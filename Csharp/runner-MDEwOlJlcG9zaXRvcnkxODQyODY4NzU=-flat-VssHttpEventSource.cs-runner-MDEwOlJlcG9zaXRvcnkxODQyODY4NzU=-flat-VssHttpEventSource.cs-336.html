
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Tokens: 18, <button onclick='openModal()' class='match'>CODE CLONE</button></h2>
        <div class="column">
            <h3>runner-MDEwOlJlcG9zaXRvcnkxODQyODY4NzU=-flat-VssHttpEventSource.cs</h3>
            <pre><code>1  using System;
2  using System.Collections.Generic;
3  using System.Diagnostics.Tracing;
4  using System.Globalization;
5  using System.Net;
6  using System.Net.Http;
7  using System.Net.Sockets;
8  namespace GitHub.Services.Common.Diagnostics
9  {
10      [EventSource(Name = VssEventSources.Http)]
11      internal sealed class VssHttpEventSource : EventSource
12      {
13          public static class Tasks
14          {
15              public const EventTask HttpRequest = (EventTask)1;
16              public const EventTask Authentication = (EventTask)2;
17              public const EventTask HttpOperation = (EventTask)3;
18          }
19          public static class Keywords
20          {
21              public const EventKeywords Authentication = (EventKeywords)0x0000000000000001;
22              public const EventKeywords HttpOperation = (EventKeywords)0x0000000000000002;
23          }
24          internal static VssHttpEventSource Log
25          {
26              get
27              {
28                  return m_log.Value;
29              }
30          }
31          [NonEvent]
32          public void AuthenticationStart(VssTraceActivity activity)
33          {
34              if (IsEnabled())
35              {
36                  SetActivityId(activity);
37                  AuthenticationStart();
38              }
39          }
40          [NonEvent]
41          public void AuthenticationStop(VssTraceActivity activity)
42          {
43              if (IsEnabled())
44              {
45                  SetActivityId(activity);
46                  AuthenticationStop();
47              }
48          }
49          [NonEvent]
50          public void AuthenticationError(
51              VssTraceActivity activity,
52              IssuedTokenProvider provider,
<span onclick='openModal()' class='match'>53              String message)
54          {
55              if (IsEnabled(EventLevel.Error, Keywords.Authentication))
56              {
57                  SetActivityId(activity);
</span>58                  WriteMessageEvent(provider.CredentialType, provider.GetHashCode(), message, this.AuthenticationError);
59              }
60          }
61          [NonEvent]
62          public void AuthenticationError(
63              VssTraceActivity activity,
64              IssuedTokenProvider provider,
65              Exception exception)
66          {
67              if (IsEnabled(EventLevel.Error, Keywords.Authentication))
68              {
69                  if (exception is AggregateException)
70                  {
71                      exception = ((AggregateException)exception).Flatten().InnerException;
72                  }
73                  AuthenticationError(activity, provider, exception.ToString());
74              }
75          }
76          [NonEvent]
77          public void HttpOperationStart(
78              VssTraceActivity activity,
79              String area,
80              String operation)
81          {
82              if (IsEnabled())
83              {
84                  SetActivityId(activity);
85                  HttpOperationStart(area, operation);
86              }
87          }
88          [NonEvent]
89          public void HttpOperationStop(
90              VssTraceActivity activity,
91              String area,
92              String operation)
93          {
94              if (IsEnabled())
95              {
96                  SetActivityId(activity);
97                  HttpOperationStop(area, operation);
98              }
99          }
100          [NonEvent]
101          public void HttpRequestStart(
102              VssTraceActivity activity,
103              HttpRequestMessage request)
104          {
105              if (IsEnabled())
106              {
107                  SetActivityId(activity);
108                  HttpRequestStart(request.GetHttpMethod(), request.RequestUri.AbsoluteUri);
109              }
110          }
111          [NonEvent]
112          public Exception HttpRequestFailed(
113              VssTraceActivity activity,
114              HttpRequestMessage request,
115              Exception exception)
116          {
117              if (IsEnabled())
118              {
119                  HttpRequestFailed(activity, request, exception.ToString());
120              }
121              return exception;
122          }
123          [NonEvent]
124          public void HttpRequestFailed(
125              VssTraceActivity activity,
126              HttpRequestMessage request,
127              String message)
128          {
129              if (IsEnabled())
130              {
131                  SetActivityId(activity);
132                  WriteMessageEvent(request.GetHttpMethod(), request.RequestUri.AbsoluteUri, message, this.HttpRequestFailed);
133              }
134          }
135          [NonEvent]
136          public void HttpRequestFailed(
137              VssTraceActivity activity,
138              HttpRequestMessage request,
139              HttpStatusCode statusCode,
140              string afdRefInfo)
141          {
142              if (IsEnabled())
143              {
144                  SetActivityId(activity);
145                  CultureInfo cultureInfo = CultureInfo.InstalledUICulture;
146                  String message = String.Format(cultureInfo, &quot;HTTP Status: {0}&quot;, statusCode);
147                  if (!string.IsNullOrEmpty(afdRefInfo))
148                  {
149                      message += $&quot;, AFD Ref: {afdRefInfo}&quot;;
150                  }
151                  WriteMessageEvent(request.GetHttpMethod(), request.RequestUri.AbsoluteUri, message, this.HttpRequestFailed);
152              }
153          }
154          [NonEvent]
155          public void HttpRequestUnauthorized(
156              VssTraceActivity activity,
157              HttpRequestMessage request,
158              String message)
159          {
160              if (IsEnabled())
161              {
162                  SetActivityId(activity);
163                  HttpRequestUnauthorized(request.GetHttpMethod(), request.RequestUri.AbsoluteUri, message);
164              }
165          }
166          [NonEvent]
167          public void HttpRequestSucceeded(
168              VssTraceActivity activity,
169              HttpResponseMessage response)
170          {
171              if (IsEnabled())
172              {
173                  SetActivityId(activity);
174                  HttpRequestSucceeded(response.RequestMessage.GetHttpMethod(), response.RequestMessage.RequestUri.AbsoluteUri, (Int32)response.StatusCode);
175              }
176          }
177          [NonEvent]
178          public void HttpRequestRetrying(
179              VssTraceActivity activity,
180              HttpRequestMessage request,
181              Int32 attempt,
182              TimeSpan backoffDuration,
183              HttpStatusCode? httpStatusCode,
184              WebExceptionStatus? webExceptionStatus,
185              SocketError? socketErrorCode,
186              WinHttpErrorCode? winHttpErrorCode,
187              CurlErrorCode? curlErrorCode,
188              string afdRefInfo)
189          {
190              if (IsEnabled())
191              {
192                  String reason = &quot;&lt;unknown&gt;&quot;;
193                  if (httpStatusCode != null)
194                  {
195                      reason = String.Format(CultureInfo.InvariantCulture, &quot;HTTP Status: {0}&quot;, httpStatusCode.Value);
196                  }
197                  else if (webExceptionStatus != null)
198                  {
199                      reason = String.Format(CultureInfo.InvariantCulture, &quot;Web Exception Status: {0}&quot;, webExceptionStatus.Value);
200                  }
201                  else if (socketErrorCode != null)
202                  {
203                      reason = String.Format(CultureInfo.InvariantCulture, &quot;Socket Error: {0}&quot;, socketErrorCode.Value);
204                  }
205                  else if (winHttpErrorCode != null)
206                  {
207                      reason = String.Format(CultureInfo.InvariantCulture, &quot;WinHttp Error: {0}&quot;, winHttpErrorCode);
208                  }
209                  else if (curlErrorCode != null)
210                  {
211                      reason = String.Format(CultureInfo.InvariantCulture, &quot;Curl Error: {0}&quot;, curlErrorCode);
212                  }
213                  if (!string.IsNullOrEmpty(afdRefInfo))
214                  {
215                      reason += $&quot;, AFD Ref: {afdRefInfo}&quot;;
216                  }
217                  SetActivityId(activity);
218                  HttpRequestRetrying(request.GetHttpMethod(), request.RequestUri.AbsoluteUri, attempt, reason, backoffDuration.TotalSeconds);
219              }
220          }
221          [NonEvent]
222          public void HttpRequestFailedMaxAttempts(
223              VssTraceActivity activity,
224              HttpRequestMessage request,
225              Int32 attempt,
226              HttpStatusCode? httpStatusCode,
227              WebExceptionStatus? webExceptionStatus,
228              SocketError? socketErrorCode,
229              WinHttpErrorCode? winHttpErrorCode,
230              CurlErrorCode? curlErrorCode,
231              string afdRefInfo)
232          {
233              if (IsEnabled())
234              {
235                  String reason = &quot;&lt;unknown&gt;&quot;;
236                  if (httpStatusCode != null)
237                  {
238                      reason = String.Format(CultureInfo.InvariantCulture, &quot;HTTP Status: {0}&quot;, httpStatusCode.Value);
239                  }
240                  else if (webExceptionStatus != null)
241                  {
242                      reason = String.Format(CultureInfo.InvariantCulture, &quot;Web Exception Status: {0}&quot;, webExceptionStatus.Value);
243                  }
244                  else if (socketErrorCode != null)
245                  {
246                      reason = String.Format(CultureInfo.InvariantCulture, &quot;Socket Error: {0}&quot;, socketErrorCode.Value);
247                  }
248                  else if (winHttpErrorCode != null)
249                  {
250                      reason = String.Format(CultureInfo.InvariantCulture, &quot;WinHttp Error: {0}&quot;, winHttpErrorCode);
251                  }
252                  else if (curlErrorCode != null)
253                  {
254                      reason = String.Format(CultureInfo.InvariantCulture, &quot;Curl Error: {0}&quot;, curlErrorCode);
255                  }
256                  if (!string.IsNullOrEmpty(afdRefInfo))
257                  {
258                      reason += $&quot;, AFD Ref: {afdRefInfo}&quot;;
259                  }
260                  SetActivityId(activity);
261                  HttpRequestFailedMaxAttempts(request.GetHttpMethod(), request.RequestUri.AbsoluteUri, attempt, reason);
262              }
263          }
264          [NonEvent]
265          public void HttpRequestSucceededWithRetry(
266              VssTraceActivity activity,
267              HttpResponseMessage response,
268              Int32 attempt)
269          {
270              if (IsEnabled())
271              {
272                  SetActivityId(activity);
273                  HttpRequestSucceededWithRetry(response.RequestMessage.GetHttpMethod(), response.RequestMessage.RequestUri.AbsoluteUri, attempt);
274              }
275          }
276          [NonEvent]
277          public void HttpRequestCancelled(
278              VssTraceActivity activity,
279              HttpRequestMessage request)
280          {
281              if (IsEnabled())
282              {
283                  SetActivityId(activity);
284                  HttpRequestCancelled(request.GetHttpMethod(), request.RequestUri.AbsoluteUri);
285              }
286          }
287          [NonEvent]
288          public void HttpRequestTimedOut(
289              VssTraceActivity activity,
290              HttpRequestMessage request,
291              TimeSpan timeout)
292          {
293              if (IsEnabled())
294              {
295                  SetActivityId(activity);
296                  HttpRequestTimedOut(request.GetHttpMethod(), request.RequestUri.AbsoluteUri, (Int32)timeout.TotalSeconds);
297              }
298          }
299          [NonEvent]
300          public void HttpRequestStop(
301              VssTraceActivity activity,
302              HttpResponseMessage response)
303          {
304              if (IsEnabled())
305              {
306                  SetActivityId(activity);
307                  HttpRequestStop(response.RequestMessage.GetHttpMethod(), response.RequestMessage.RequestUri.AbsoluteUri, (Int32)response.StatusCode);
308              }
309          }
310          [NonEvent]
311          public void AuthenticationFailed(
312              VssTraceActivity activity,
313              HttpResponseMessage response)
314          {
315              if (IsEnabled())
316              {
317                  SetActivityId(activity);
318                  WriteMessageEvent((Int32)response.StatusCode, response.Headers.ToString(), this.AuthenticationFailed);
319              }
320          }
321          [NonEvent]
322          public void AuthenticationFailedOnFirstRequest(
323              VssTraceActivity activity,
324              HttpResponseMessage response)
325          {
326              if (IsEnabled())
327              {
328                  SetActivityId(activity);
329                  WriteMessageEvent((Int32)response.StatusCode, response.Headers.ToString(), this.AuthenticationFailedOnFirstRequest);
330              }
331          }
332          [NonEvent]
333          public void IssuedTokenProviderCreated(
334              VssTraceActivity activity,
335              IssuedTokenProvider provider)
336          {
337              if (IsEnabled())
338              {
339                  SetActivityId(activity);
340                  IssuedTokenProviderCreated(provider.CredentialType, provider.GetHashCode(), provider.GetAuthenticationParameters());
341              }
342          }
343          [NonEvent]
344          public void IssuedTokenProviderRemoved(
345              VssTraceActivity activity,
346              IssuedTokenProvider provider)
347          {
348              if (IsEnabled())
349              {
350                  SetActivityId(activity);
351                  IssuedTokenProviderRemoved(provider.CredentialType, provider.GetHashCode(), provider.GetAuthenticationParameters());
352              }
353          }
354          [NonEvent]
355          internal void IssuedTokenProviderNotFound(VssTraceActivity activity)
356          {
357              if (IsEnabled())
358              {
359                  SetActivityId(activity);
360                  IssuedTokenProviderNotFound();
361              }
362          }
363          [NonEvent]
364          internal void IssuedTokenProviderPromptRequired(
365              VssTraceActivity activity,
366              IssuedTokenProvider provider)
367          {
368              if (IsEnabled())
369              {
370                  SetActivityId(activity);
371                  IssuedTokenProviderPromptRequired(provider.CredentialType, provider.GetHashCode());
372              }
373          }
374          [NonEvent]
375          public void IssuedTokenAcquiring(
376              VssTraceActivity activity,
377              IssuedTokenProvider provider)
378          {
379              if (IsEnabled())
380              {
381                  SetActivityId(activity);
382                  IssuedTokenAcquiring(provider.CredentialType, provider.GetHashCode());
383              }
384          }
385          [NonEvent]
386          public void IssuedTokenWaitStart(
387              VssTraceActivity activity,
388              IssuedTokenProvider provider,
389              Guid waitForActivityId)
390          {
391              if (IsEnabled(EventLevel.Verbose, Keywords.Authentication))
392              {
393                  SetActivityId(activity);
394                  IssuedTokenWaitStart(provider.CredentialType, provider.GetHashCode(), waitForActivityId);
395              }
396          }
397          [NonEvent]
398          public void IssuedTokenWaitStop(
399              VssTraceActivity activity,
400              IssuedTokenProvider provider,
401              IssuedToken token)
402          {
403              if (IsEnabled(EventLevel.Verbose, Keywords.Authentication))
404              {
405                  SetActivityId(activity);
406                  IssuedTokenWaitStop(provider.CredentialType, provider.GetHashCode(), token != null ? token.GetHashCode() : 0);
407              }
408          }
409          [NonEvent]
410          public void IssuedTokenAcquired(
411              VssTraceActivity activity,
412              IssuedTokenProvider provider,
413              IssuedToken token)
414          {
415              if (IsEnabled())
416              {
417                  SetActivityId(activity);
418                  IssuedTokenAcquired(provider.CredentialType, provider.GetHashCode(), token != null ? token.GetHashCode() : 0);
419              }
420          }
421          [NonEvent]
422          public void IssuedTokenInvalidated(
423              VssTraceActivity activity,
424              IssuedTokenProvider provider,
425              IssuedToken token)
426          {
427              if (IsEnabled())
428              {
429                  SetActivityId(activity);
430                  IssuedTokenInvalidated(provider.CredentialType, provider.GetHashCode(), token.GetHashCode());
431              }
432          }
433          [NonEvent]
434          public void IssuedTokenValidated(
435              VssTraceActivity activity,
436              IssuedTokenProvider provider,
437              IssuedToken token)
438          {
439              if (IsEnabled())
440              {
441                  SetActivityId(activity);
442                  IssuedTokenValidated(provider.CredentialType, provider.GetHashCode(), token.GetHashCode());
443              }
444          }
445          [NonEvent]
446          public void IssuedTokenRetrievedFromCache(
447              VssTraceActivity activity,
448              IssuedTokenProvider provider,
449              IssuedToken token)
450          {
451              if (IsEnabled())
452              {
453                  SetActivityId(activity);
454                  IssuedTokenRetrievedFromCache(provider.CredentialType, provider.GetHashCode(), token.GetHashCode());
455              }
456          }
457          [Event(1, Level = EventLevel.Verbose, Task = Tasks.HttpRequest, Opcode = EventOpcode.Start, Message = &quot;Started {0} request to {1}&quot;)]
458          private void HttpRequestStart(
459              VssHttpMethod method,
460              String url)
461          {
462              if (IsEnabled())
463              {
464                  WriteEvent(1, (Int32)method, url);
465              }
466          }
467          [Event(2, Level = EventLevel.Error, Task = Tasks.HttpRequest, Opcode = EventOpcode.Info, Message = &quot;{0} request to {1} failed. {2}&quot;)]
468          private void HttpRequestFailed(
469              VssHttpMethod method,
470              String url,
471              String message)
472          {
473              if (IsEnabled())
474              {
475                  WriteEvent(2, (Int32)method, url, message);
476              }
477          }
478          [Event(3, Level = EventLevel.Informational, Task = Tasks.HttpRequest, Opcode = EventOpcode.Info, Message = &quot;{0} request to {1} succeeded with status code {2}&quot;)]
479          private void HttpRequestSucceeded(
480              VssHttpMethod method,
481              String url,
482              Int32 statusCode)
483          {
484              if (IsEnabled())
485              {
486                  WriteEvent(3, (Int32)method, url, statusCode);
487              }
488          }
489          [Event(4, Level = EventLevel.Warning, Task = Tasks.HttpRequest, Opcode = EventOpcode.Info, Message = &quot;Attempt {2} of {0} request to {1} failed ({3}). The operation will be retried in {4} seconds.&quot;)]
490          private void HttpRequestRetrying(
491              VssHttpMethod method,
492              String url,
493              Int32 attempt,
494              String reason,
495              Double backoffDurationInSeconds)
496          {
497              if (IsEnabled())
498              {
499                  WriteEvent(4, (Int32)method, url, attempt, reason, backoffDurationInSeconds);
500              }
501          }
502          [Event(5, Level = EventLevel.Error, Task = Tasks.HttpRequest, Opcode = EventOpcode.Info, Message = &quot;Attempt {2} of {0} request to {1} failed ({3}). The maximum number of attempts has been reached.&quot;)]
503          private void HttpRequestFailedMaxAttempts(
504              VssHttpMethod method,
505              String url,
506              Int32 attempt,
507              String reason)
508          {
509              if (IsEnabled())
510              {
511                  WriteEvent(5, (Int32)method, url, attempt, reason);
512              }
513          }
514          [Event(6, Level = EventLevel.Verbose, Task = Tasks.HttpRequest, Opcode = EventOpcode.Info, Message = &quot;Attempt {2} of {0} request to {1} succeeded.&quot;)]
515          private void HttpRequestSucceededWithRetry(
516              VssHttpMethod method,
517              String url,
518              Int32 attempt)
519          {
520              if (IsEnabled())
521              {
522                  WriteEvent(6, (Int32)method, url, attempt);
523              }
524          }
525          [Event(7, Level = EventLevel.Warning, Task = Tasks.HttpRequest, Opcode = EventOpcode.Info, Message = &quot;{0} request to {1} has been cancelled.&quot;)]
526          private void HttpRequestCancelled(
527              VssHttpMethod method,
528              String url)
529          {
530              if (IsEnabled())
531              {
532                  WriteEvent(7, (Int32)method, url);
533              }
534          }
535          [Event(8, Level = EventLevel.Warning, Task = Tasks.HttpRequest, Opcode = EventOpcode.Info, Message = &quot;{0} request to {1} timed out after {2} seconds.&quot;)]
536          private void HttpRequestTimedOut(
537              VssHttpMethod method,
538              String url,
539              Int32 timeoutInSeconds)
540          {
541              if (IsEnabled())
542              {
543                  WriteEvent(8, (Int32)method, url, timeoutInSeconds);
544              }
545          }
546          [Event(9, Level = EventLevel.Error, Task = Tasks.HttpRequest, Opcode = EventOpcode.Info, Message = &quot;{0} request to {1} is not authorized. Details: {2}&quot;)]
547          private void HttpRequestUnauthorized(
548              VssHttpMethod method,
549              String url,
550              String message)
551          {
552              if (IsEnabled())
553              {
554                  WriteEvent(9, (Int32)method, url, message);
555              }
556          }
557          [Event(10, Keywords = Keywords.Authentication, Level = EventLevel.Warning, Task = Tasks.HttpRequest, Message = &quot;Authentication failed with status code {0}.%n{1}&quot;)]
558          private void AuthenticationFailed(
559              Int32 statusCode,
560              String headers)
561          {
562              if (IsEnabled(EventLevel.Verbose, Keywords.Authentication))
563              {
564                  WriteEvent(10, statusCode, headers);
565              }
566          }
567          [Event(11, Keywords = Keywords.Authentication, Level = EventLevel.Informational, Task = Tasks.HttpRequest, Message = &quot;Authentication successful using {0} credentials&quot;)]
568          private void AuthenticationSucceeded(VssCredentialsType credentialsType)
569          {
570              if (IsEnabled(EventLevel.Verbose, Keywords.Authentication))
571              {
572                  WriteEvent(11, (Int32)credentialsType);
573              }
574          }
575          [Event(12, Keywords = Keywords.Authentication, Level = EventLevel.Verbose, Task = Tasks.Authentication, Opcode = EventOpcode.Start, Message = &quot;Started authentication&quot;)]
576          private void AuthenticationStart()
577          {
578              if (IsEnabled(EventLevel.Verbose, Keywords.Authentication))
579              {
580                  WriteEvent(12);
581              }
582          }
583          [Event(13, Keywords = Keywords.Authentication, Level = EventLevel.Verbose, Task = Tasks.Authentication, Message = &quot;Created {0} issued token provider instance {1} ({2})&quot;)]
584          private void IssuedTokenProviderCreated(
585              VssCredentialsType credentialsType,
586              Int32 providerId,
587              String parameters)
588          {
589              if (IsEnabled())
590              {
591                  WriteEvent(13, (Int32)credentialsType, providerId, parameters);
592              }
593          }
594          [Event(14, Keywords = Keywords.Authentication, Level = EventLevel.Verbose, Task = Tasks.Authentication, Message = &quot;Removed {0} issued token provider instance {1} ({2})&quot;)]
595          private void IssuedTokenProviderRemoved(
596              VssCredentialsType credentialsType,
597              Int32 providerId,
598              String parameters)
599          {
600              if (IsEnabled(EventLevel.Verbose, Keywords.Authentication))
601              {
602                  WriteEvent(14, (Int32)credentialsType, providerId, parameters);
603              }
604          }
605          [Event(15, Keywords = Keywords.Authentication, Level = EventLevel.Verbose, Task = Tasks.Authentication, Message = &quot;{0} issued token provider instance {1} is acquiring a token&quot;)]
606          private void IssuedTokenAcquiring(
607              VssCredentialsType credentialsType,
608              Int32 providerId)
609          {
610              if (IsEnabled(EventLevel.Verbose, Keywords.Authentication))
611              {
612                  WriteEvent(15, (Int32)credentialsType, providerId);
613              }
614          }
615          [Event(16, Keywords = Keywords.Authentication, Level = EventLevel.Verbose, Task = Tasks.Authentication, Opcode = EventOpcode.Suspend, Message = &quot;{0} issued token provider instance {1} is waiting for issued token from activity {2}&quot;)]
616          private void IssuedTokenWaitStart(
617              VssCredentialsType credentialsType,
618              Int32 providerId,
619              Guid waitForActivityId)
620          {
621              WriteEvent(16, (Int32)credentialsType, providerId, waitForActivityId);
622          }
623          [Event(17, Keywords = Keywords.Authentication, Level = EventLevel.Verbose, Task = Tasks.Authentication, Opcode = EventOpcode.Resume, Message = &quot;{0} issued token provider instance {1} received token instance {2}&quot;)]
624          private void IssuedTokenWaitStop(
625              VssCredentialsType credentialsType,
626              Int32 providerId,
627              Int32 issuedTokenId)
628          {
629              WriteEvent(17, (Int32)credentialsType, providerId, issuedTokenId);
630          }
631          [Event(18, Keywords = Keywords.Authentication, Level = EventLevel.Verbose, Task = Tasks.Authentication, Message = &quot;{0} issued token provider instance {1} acquired new token instance {2}&quot;)]
632          private void IssuedTokenAcquired(
633              VssCredentialsType credentialsType,
634              Int32 providerId,
635              Int32 issuedTokenId)
636          {
637              if (IsEnabled(EventLevel.Verbose, Keywords.Authentication))
638              {
639                  WriteEvent(18, (Int32)credentialsType, providerId, issuedTokenId);
640              }
641          }
642          [Event(20, Keywords = Keywords.Authentication, Level = EventLevel.Verbose, Task = Tasks.Authentication, Message = &quot;{0} issued token provider instance {1} invalidated token instance {2}&quot;)]
643          private void IssuedTokenInvalidated(
644              VssCredentialsType credentialsType,
645              Int32 providerId,
646              Int32 issuedTokenId)
647          {
648              if (IsEnabled(EventLevel.Verbose, Keywords.Authentication))
649              {
650                  WriteEvent(20, (Int32)credentialsType, providerId, issuedTokenId);
651              }
652          }
653          [Event(21, Keywords = Keywords.Authentication, Level = EventLevel.Verbose, Task = Tasks.Authentication, Message = &quot;{0} issued token provider instance {1} validated token instance {2}&quot;)]
654          private void IssuedTokenValidated(
655              VssCredentialsType credentialsType,
656              Int32 providerId,
657              Int32 issuedTokenId)
658          {
659              if (IsEnabled(EventLevel.Verbose, Keywords.Authentication))
660              {
661                  WriteEvent(21, (Int32)credentialsType, providerId, issuedTokenId);
662              }
663          }
664          [Event(22, Keywords = Keywords.Authentication, Level = EventLevel.Verbose, Task = Tasks.Authentication, Message = &quot;{0} issued token provider instance {1} retrieved token instance {2}&quot;)]
665          private void IssuedTokenRetrievedFromCache(
666              VssCredentialsType credentialsType,
667              Int32 providerId,
668              Int32 issuedTokenId)
669          {
670              if (IsEnabled(EventLevel.Verbose, Keywords.Authentication))
671              {
672                  WriteEvent(22, (Int32)credentialsType, providerId, issuedTokenId);
673              }
674          }
675          [Event(23, Keywords = Keywords.Authentication, Level = EventLevel.Verbose, Task = Tasks.Authentication, Opcode = EventOpcode.Stop, Message = &quot;Finished authentication&quot;)]
676          private void AuthenticationStop()
677          {
678              if (IsEnabled(EventLevel.Verbose, Keywords.Authentication))
679              {
680                  WriteEvent(23);
681              }
682          }
683          [Event(24, Level = EventLevel.Verbose, Task = Tasks.HttpRequest, Opcode = EventOpcode.Stop, Message = &quot;Finished {0} request to {1} with status code {2}&quot;)]
684          private void HttpRequestStop(
685              VssHttpMethod method,
686              String url,
687              Int32 statusCode)
688          {
689              if (IsEnabled())
690              {
691                  WriteEvent(24, (Int32)method, url, statusCode);
692              }
693          }
694          [Event(25, Keywords = Keywords.HttpOperation, Level = EventLevel.Informational, Task = Tasks.HttpOperation, Opcode = EventOpcode.Start, Message = &quot;Starting operation {0}.{1}&quot;)]
695          private void HttpOperationStart(
696              String area,
697              String operation)
698          {
699              if (IsEnabled(EventLevel.Informational, Keywords.HttpOperation))
700              {
701                  WriteEvent(25, area, operation);
702              }
703          }
704          [Event(26, Keywords = Keywords.HttpOperation, Level = EventLevel.Informational, Task = Tasks.HttpOperation, Opcode = EventOpcode.Stop, Message = &quot;Finished operation {0}.{1}&quot;)]
705          private void HttpOperationStop(
706              String area,
707              String operation)
708          {
709              if (IsEnabled(EventLevel.Informational, Keywords.HttpOperation))
710              {
711                  WriteEvent(26, area, operation);
712              }
713          }
714          [Event(27, Keywords = Keywords.Authentication, Level = EventLevel.Error, Task = Tasks.Authentication, Opcode = EventOpcode.Info, Message = &quot;{0} issued token provider instance {1} failed to retrieve a token.%nReason: {2}&quot;)]
715          private void AuthenticationError(
716              VssCredentialsType credentialsType,
717              Int32 providerId,
718              String message)
719          {
720              if (IsEnabled(EventLevel.Error, Keywords.Authentication))
721              {
722                  WriteEvent(27, (Int32)credentialsType, providerId, message);
723              }
724          }
725          [Event(28, Keywords = Keywords.Authentication, Level = EventLevel.Warning, Task = Tasks.HttpRequest, Opcode = EventOpcode.Info, Message = &quot;No issued token provider found which can handle the authentication challenge&quot;)]
726          private void IssuedTokenProviderNotFound()
727          {
728              if (IsEnabled(EventLevel.Warning, Keywords.Authentication))
729              {
730                  WriteEvent(28);
731              }
732          }
733          [Event(29, Keywords = Keywords.Authentication, Level = EventLevel.Warning, Task = Tasks.HttpRequest, Opcode = EventOpcode.Info, Message = &quot;{0} issued token provider instance {1} requires an interactive prompt which is not allowed by the current settings&quot;)]
734          private void IssuedTokenProviderPromptRequired(
735              VssCredentialsType credentialsType,
736              Int32 providerId)
737          {
738              if (IsEnabled(EventLevel.Warning, Keywords.Authentication))
739              {
740                  WriteEvent(29, (Int32)credentialsType, providerId);
741              }
742          }
743          [Event(30, Keywords = Keywords.HttpOperation, Level = EventLevel.Critical, Task = Tasks.HttpOperation, Opcode = EventOpcode.Info, Message = &quot;A task completion source was not properly completed during authentication&quot;)]
744          public void TokenSourceNotCompleted()
745          {
746              if (IsEnabled(EventLevel.Critical, Keywords.HttpOperation))
747              {
748                  WriteEvent(30);
749              }
750          }
751          [Event(31, Keywords = Keywords.Authentication, Level = EventLevel.Warning, Task = Tasks.Authentication, Opcode = EventOpcode.Info, Message = &quot;Retrieving an AAD auth token took a long time ({0} seconds)&quot;)]
752          public void AuthorizationDelayed(string timespan)
753          {
754              if (IsEnabled(EventLevel.Warning, Keywords.Authentication))
755              {
756                  WriteEvent(31, timespan);
757              }
758          }
759          [Event(32, Keywords = Keywords.Authentication, Level = EventLevel.Informational, Task = Tasks.Authentication, Opcode = EventOpcode.Info, Message = &quot;AAD Correlation ID for this token request: {0}&quot;)]
760          public void AADCorrelationID(string aadCorrelationId)
761          {
762              if (IsEnabled(EventLevel.Informational, Keywords.Authentication))
763              {
764                  WriteEvent(32, aadCorrelationId);
765              }
766          }
767          [Event(33, Keywords = Keywords.Authentication, Level = EventLevel.Verbose, Task = Tasks.HttpRequest, Message = &quot;Authentication failed on first request with status code {0}.%n{1}&quot;)]
768          private void AuthenticationFailedOnFirstRequest(
769              Int32 statusCode,
770              String headers)
771          {
772              if (IsEnabled(EventLevel.Verbose, Keywords.Authentication))
773              {
774                  WriteEvent(33, statusCode, headers);
775              }
776          }
777          [NonEvent]
778          private void SetActivityId(VssTraceActivity activity)
779          {
780          }
781          [NonEvent]
782          private static IList&lt;String&gt; SplitMessage(String message)
783          {
784              List&lt;String&gt; list = new List&lt;String&gt;();
785              if (message.Length &gt; 30000)
786              {
787                  int num = 0;
788                  do
789                  {
790                      Int32 num2 = (message.Length - num &gt; 30000) ? 30000 : (message.Length - num);
791                      list.Add(message.Substring(num, num2));
792                      num += num2;
793                  }
794                  while (message.Length &gt; num);
795              }
796              else
797              {
798                  list.Add(message);
799              }
800              return list;
801          }
802          [NonEvent]
803          private void WriteMessageEvent(
804              Int32 param0,
805              String message,
806              Action&lt;Int32, String&gt; writeEvent)
807          {
808              writeEvent(param0, message);
809          }
810          [NonEvent]
811          private void WriteMessageEvent(
812              VssCredentialsType param0,
813              Int32 param1,
814              String message,
815              Action&lt;VssCredentialsType, Int32, String&gt; writeEvent)
816          {
817              writeEvent(param0, param1, message);
818          }
819          [NonEvent]
820          private void WriteMessageEvent(
821              VssHttpMethod param0,
822              String param1,
823              String message,
824              Action&lt;VssHttpMethod, String, String&gt; writeEvent)
825          {
826              writeEvent(param0, param1, message);
827          }
828          [NonEvent]
829          private new unsafe void WriteEvent(
830              Int32 eventId,
831              Int32 param0,
832              String param1)
833          {
834              param1 = param1 ?? String.Empty;
835              Int32 eventDataCount = 2;
836              Byte* userData = stackalloc Byte[sizeof(EventData) * eventDataCount];
837              EventData* eventData = (EventData*)userData;
838              eventData[0].Size = sizeof(Int32);
839              eventData[1].Size = (Int32)(param1.Length + 1) * sizeof(Char);
840              fixed (Char* a1 = param1)
841              {
842                  eventData[0].DataPointer = (IntPtr)(&amp;param0);
843                  eventData[1].DataPointer = (IntPtr)a1;
844                  base.WriteEventCore(eventId, eventDataCount, eventData);
845              }
846          }
847          [NonEvent]
848          private unsafe void WriteEvent(
849              Int32 eventId,
850              Int32 param0,
851              String param1,
852              String param2)
853          {
854              param1 = param1 ?? String.Empty;
855              param2 = param2 ?? String.Empty;
856              Int32 eventDataCount = 3;
857              Byte* userData = stackalloc Byte[sizeof(EventData) * eventDataCount];
858              EventData* eventData = (EventData*)userData;
859              eventData[0].Size = sizeof(Int32);
860              eventData[1].Size = (Int32)(param1.Length + 1) * sizeof(Char);
861              eventData[2].Size = (Int32)(param2.Length + 1) * sizeof(Char);
862              fixed (Char* a1 = param1, a2 = param2)
863              {
864                  eventData[0].DataPointer = (IntPtr)(&amp;param0);
865                  eventData[1].DataPointer = (IntPtr)a1;
866                  eventData[2].DataPointer = (IntPtr)a2;
867                  base.WriteEventCore(eventId, eventDataCount, eventData);
868              }
869          }
870          [NonEvent]
871          private unsafe void WriteEvent(
872              Int32 eventId,
873              Int32 param0,
874              Int32 param1,
875              Guid param2)
876          {
877              Int32 eventDataCount = 3;
878              Byte* userData = stackalloc Byte[sizeof(EventData) * eventDataCount];
879              EventData* eventData = (EventData*)userData;
880              eventData[0].Size = sizeof(Int32);
881              eventData[1].Size = sizeof(Int32);
882              eventData[2].Size = sizeof(Guid);
883              eventData[0].DataPointer = (IntPtr)(&amp;param0);
884              eventData[1].DataPointer = (IntPtr)(&amp;param1);
885              eventData[2].DataPointer = (IntPtr)(&amp;param2);
886              base.WriteEventCore(eventId, eventDataCount, eventData);
887          }
888          [NonEvent]
889          private unsafe void WriteEvent(
890              Int32 eventId,
891              Int32 param0,
892              Int32 param1,
893              String param2)
894          {
895              param2 = param2 ?? String.Empty;
896              Int32 eventDataCount = 3;
897              Byte* userData = stackalloc Byte[sizeof(EventData) * eventDataCount];
898              EventData* eventData = (EventData*)userData;
899              eventData[0].Size = sizeof(Int32);
900              eventData[1].Size = sizeof(Int32);
901              eventData[2].Size = (Int32)(param2.Length + 1) * sizeof(Char);
902              fixed (Char* a2 = param2)
903              {
904                  eventData[0].DataPointer = (IntPtr)(&amp;param0);
905                  eventData[1].DataPointer = (IntPtr)(&amp;param1);
906                  eventData[2].DataPointer = (IntPtr)a2;
907                  base.WriteEventCore(eventId, eventDataCount, eventData);
908              }
909          }
910          [NonEvent]
911          private unsafe void WriteEvent(
912              Int32 eventId,
913              Int32 param0,
914              String param1,
915              Int32 param2)
916          {
917              param1 = param1 ?? String.Empty;
918              Int32 eventDataCount = 3;
919              Byte* userData = stackalloc Byte[sizeof(EventData) * eventDataCount];
920              EventData* eventData = (EventData*)userData;
921              eventData[0].Size = sizeof(Int32);
922              eventData[1].Size = (Int32)(param1.Length + 1) * sizeof(Char);
923              eventData[2].Size = sizeof(Int32);
924              fixed (Char* a1 = param1)
925              {
926                  eventData[0].DataPointer = (IntPtr)(&amp;param0);
927                  eventData[1].DataPointer = (IntPtr)a1;
928                  eventData[2].DataPointer = (IntPtr)(&amp;param2);
929                  base.WriteEventCore(eventId, eventDataCount, eventData);
930              }
931          }
932          [NonEvent]
933          private unsafe void WriteEvent(
934              Int32 eventId,
935              Int32 param0,
936              Int32 param1,
937              Int32 param2,
938              Guid param3)
939          {
940              Int32 eventDataCount = 4;
941              Byte* userData = stackalloc Byte[sizeof(EventData) * eventDataCount];
942              EventData* eventData = (EventData*)userData;
943              eventData[0].Size = sizeof(Int32);
944              eventData[1].Size = sizeof(Int32);
945              eventData[2].Size = sizeof(Int32);
946              eventData[3].Size = sizeof(Guid);
947              eventData[0].DataPointer = (IntPtr)(&amp;param0);
948              eventData[1].DataPointer = (IntPtr)(&amp;param1);
949              eventData[2].DataPointer = (IntPtr)(&amp;param2);
950              eventData[3].DataPointer = (IntPtr)(&amp;param3);
951              base.WriteEventCore(eventId, eventDataCount, eventData);
952          }
953          [NonEvent]
954          private unsafe void WriteEvent(
955              Int32 eventId,
956              Int32 param0,
957              Int32 param1,
958              Guid param2,
959              Guid param3)
960          {
961              Int32 eventDataCount = 4;
962              Byte* userData = stackalloc Byte[sizeof(EventData) * eventDataCount];
963              EventData* eventData = (EventData*)userData;
964              eventData[0].Size = sizeof(Int32);
965              eventData[1].Size = sizeof(Int32);
966              eventData[2].Size = sizeof(Guid);
967              eventData[3].Size = sizeof(Guid);
968              eventData[0].DataPointer = (IntPtr)(&amp;param0);
969              eventData[1].DataPointer = (IntPtr)(&amp;param1);
970              eventData[2].DataPointer = (IntPtr)(&amp;param2);
971              eventData[3].DataPointer = (IntPtr)(&amp;param3);
972              base.WriteEventCore(eventId, eventDataCount, eventData);
973          }
974          [NonEvent]
975          private unsafe void WriteEvent(
976              Int32 eventId,
977              Int32 param0,
978              String param1,
979              Int32 param2,
980              String param3)
981          {
982              param1 = param1 ?? String.Empty;
983              param3 = param3 ?? String.Empty;
984              Int32 eventDataCount = 4;
985              Byte* userData = stackalloc Byte[sizeof(EventData) * eventDataCount];
986              EventData* eventData = (EventData*)userData;
987              eventData[0].Size = sizeof(Int32);
988              eventData[1].Size = (Int32)(param1.Length + 1) * sizeof(Char);
989              eventData[2].Size = sizeof(Int32);
990              eventData[3].Size = (Int32)(param3.Length + 1) * sizeof(Char);
991              fixed (Char* a1 = param1, a3 = param3)
992              {
993                  eventData[0].DataPointer = (IntPtr)(&amp;param0);
994                  eventData[1].DataPointer = (IntPtr)a1;
995                  eventData[2].DataPointer = (IntPtr)(&amp;param2);
996                  eventData[3].DataPointer = (IntPtr)a3;
997                  base.WriteEventCore(eventId, eventDataCount, eventData);
998              }
999          }
1000          [NonEvent]
1001          private unsafe void WriteEvent(
1002              Int32 eventId,
1003              Int32 param0,
1004              String param1,
1005              Int32 param2,
1006              String param3,
1007              Double param4)
1008          {
1009              param1 = param1 ?? String.Empty;
1010              param3 = param3 ?? String.Empty;
1011              Int32 eventDataCount = 5;
1012              Byte* userData = stackalloc Byte[sizeof(EventData) * eventDataCount];
1013              EventData* eventData = (EventData*)userData;
1014              eventData[0].Size = sizeof(Int32);
1015              eventData[1].Size = (Int32)(param1.Length + 1) * sizeof(Char);
1016              eventData[2].Size = sizeof(Int32);
1017              eventData[3].Size = (Int32)(param3.Length + 1) * sizeof(Char);
1018              eventData[4].Size = sizeof(Double);
1019              fixed (Char* a1 = param1, a3 = param3)
1020              {
1021                  eventData[0].DataPointer = (IntPtr)(&amp;param0);
1022                  eventData[1].DataPointer = (IntPtr)a1;
1023                  eventData[2].DataPointer = (IntPtr)(&amp;param2);
1024                  eventData[3].DataPointer = (IntPtr)a3;
1025                  eventData[4].DataPointer = (IntPtr)(&amp;param4);
1026                  base.WriteEventCore(eventId, eventDataCount, eventData);
1027              }
1028          }
1029          private static Lazy&lt;VssHttpEventSource&gt; m_log = new Lazy&lt;VssHttpEventSource&gt;(() =&gt; new VssHttpEventSource());
1030      }
1031      public static class VssEventSources
1032      {
1033          public const String Http = &quot;GitHub-Actions-Http&quot;;
1034      }
1035  }
</code></pre>
        </div>
        <div class="column">
            <h3>runner-MDEwOlJlcG9zaXRvcnkxODQyODY4NzU=-flat-VssHttpEventSource.cs</h3>
            <pre><code>1  using System;
2  using System.Collections.Generic;
3  using System.Diagnostics.Tracing;
4  using System.Globalization;
5  using System.Net;
6  using System.Net.Http;
7  using System.Net.Sockets;
8  namespace GitHub.Services.Common.Diagnostics
9  {
10      [EventSource(Name = VssEventSources.Http)]
11      internal sealed class VssHttpEventSource : EventSource
12      {
13          public static class Tasks
14          {
15              public const EventTask HttpRequest = (EventTask)1;
16              public const EventTask Authentication = (EventTask)2;
17              public const EventTask HttpOperation = (EventTask)3;
18          }
19          public static class Keywords
20          {
21              public const EventKeywords Authentication = (EventKeywords)0x0000000000000001;
22              public const EventKeywords HttpOperation = (EventKeywords)0x0000000000000002;
23          }
24          internal static VssHttpEventSource Log
25          {
26              get
27              {
28                  return m_log.Value;
29              }
30          }
31          [NonEvent]
32          public void AuthenticationStart(VssTraceActivity activity)
33          {
34              if (IsEnabled())
35              {
36                  SetActivityId(activity);
37                  AuthenticationStart();
38              }
39          }
40          [NonEvent]
41          public void AuthenticationStop(VssTraceActivity activity)
42          {
43              if (IsEnabled())
44              {
45                  SetActivityId(activity);
46                  AuthenticationStop();
47              }
48          }
49          [NonEvent]
50          public void AuthenticationError(
51              VssTraceActivity activity,
52              IssuedTokenProvider provider,
53              String message)
54          {
55              if (IsEnabled(EventLevel.Error, Keywords.Authentication))
56              {
57                  SetActivityId(activity);
58                  WriteMessageEvent(provider.CredentialType, provider.GetHashCode(), message, this.AuthenticationError);
59              }
60          }
61          [NonEvent]
62          public void AuthenticationError(
63              VssTraceActivity activity,
64              IssuedTokenProvider provider,
65              Exception exception)
66          {
67              if (IsEnabled(EventLevel.Error, Keywords.Authentication))
68              {
69                  if (exception is AggregateException)
70                  {
71                      exception = ((AggregateException)exception).Flatten().InnerException;
72                  }
73                  AuthenticationError(activity, provider, exception.ToString());
74              }
75          }
76          [NonEvent]
77          public void HttpOperationStart(
78              VssTraceActivity activity,
79              String area,
80              String operation)
81          {
82              if (IsEnabled())
83              {
84                  SetActivityId(activity);
85                  HttpOperationStart(area, operation);
86              }
87          }
88          [NonEvent]
89          public void HttpOperationStop(
90              VssTraceActivity activity,
91              String area,
92              String operation)
93          {
94              if (IsEnabled())
95              {
96                  SetActivityId(activity);
97                  HttpOperationStop(area, operation);
98              }
99          }
100          [NonEvent]
101          public void HttpRequestStart(
102              VssTraceActivity activity,
103              HttpRequestMessage request)
104          {
105              if (IsEnabled())
106              {
107                  SetActivityId(activity);
108                  HttpRequestStart(request.GetHttpMethod(), request.RequestUri.AbsoluteUri);
109              }
110          }
111          [NonEvent]
112          public Exception HttpRequestFailed(
113              VssTraceActivity activity,
114              HttpRequestMessage request,
115              Exception exception)
116          {
117              if (IsEnabled())
118              {
119                  HttpRequestFailed(activity, request, exception.ToString());
120              }
121              return exception;
122          }
123          [NonEvent]
124          public void HttpRequestFailed(
125              VssTraceActivity activity,
126              HttpRequestMessage request,
127              String message)
128          {
129              if (IsEnabled())
130              {
131                  SetActivityId(activity);
132                  WriteMessageEvent(request.GetHttpMethod(), request.RequestUri.AbsoluteUri, message, this.HttpRequestFailed);
133              }
134          }
135          [NonEvent]
136          public void HttpRequestFailed(
137              VssTraceActivity activity,
138              HttpRequestMessage request,
139              HttpStatusCode statusCode,
140              string afdRefInfo)
141          {
142              if (IsEnabled())
143              {
144                  SetActivityId(activity);
145                  CultureInfo cultureInfo = CultureInfo.InstalledUICulture;
146                  String message = String.Format(cultureInfo, &quot;HTTP Status: {0}&quot;, statusCode);
147                  if (!string.IsNullOrEmpty(afdRefInfo))
148                  {
149                      message += $&quot;, AFD Ref: {afdRefInfo}&quot;;
150                  }
151                  WriteMessageEvent(request.GetHttpMethod(), request.RequestUri.AbsoluteUri, message, this.HttpRequestFailed);
152              }
153          }
154          [NonEvent]
155          public void HttpRequestUnauthorized(
156              VssTraceActivity activity,
157              HttpRequestMessage request,
158              String message)
159          {
160              if (IsEnabled())
161              {
162                  SetActivityId(activity);
163                  HttpRequestUnauthorized(request.GetHttpMethod(), request.RequestUri.AbsoluteUri, message);
164              }
165          }
166          [NonEvent]
167          public void HttpRequestSucceeded(
168              VssTraceActivity activity,
169              HttpResponseMessage response)
170          {
171              if (IsEnabled())
172              {
173                  SetActivityId(activity);
174                  HttpRequestSucceeded(response.RequestMessage.GetHttpMethod(), response.RequestMessage.RequestUri.AbsoluteUri, (Int32)response.StatusCode);
175              }
176          }
177          [NonEvent]
178          public void HttpRequestRetrying(
179              VssTraceActivity activity,
180              HttpRequestMessage request,
181              Int32 attempt,
182              TimeSpan backoffDuration,
183              HttpStatusCode? httpStatusCode,
184              WebExceptionStatus? webExceptionStatus,
185              SocketError? socketErrorCode,
186              WinHttpErrorCode? winHttpErrorCode,
187              CurlErrorCode? curlErrorCode,
188              string afdRefInfo)
189          {
190              if (IsEnabled())
191              {
192                  String reason = &quot;&lt;unknown&gt;&quot;;
193                  if (httpStatusCode != null)
194                  {
195                      reason = String.Format(CultureInfo.InvariantCulture, &quot;HTTP Status: {0}&quot;, httpStatusCode.Value);
196                  }
197                  else if (webExceptionStatus != null)
198                  {
199                      reason = String.Format(CultureInfo.InvariantCulture, &quot;Web Exception Status: {0}&quot;, webExceptionStatus.Value);
200                  }
201                  else if (socketErrorCode != null)
202                  {
203                      reason = String.Format(CultureInfo.InvariantCulture, &quot;Socket Error: {0}&quot;, socketErrorCode.Value);
204                  }
205                  else if (winHttpErrorCode != null)
206                  {
207                      reason = String.Format(CultureInfo.InvariantCulture, &quot;WinHttp Error: {0}&quot;, winHttpErrorCode);
208                  }
209                  else if (curlErrorCode != null)
210                  {
211                      reason = String.Format(CultureInfo.InvariantCulture, &quot;Curl Error: {0}&quot;, curlErrorCode);
212                  }
213                  if (!string.IsNullOrEmpty(afdRefInfo))
214                  {
215                      reason += $&quot;, AFD Ref: {afdRefInfo}&quot;;
216                  }
217                  SetActivityId(activity);
218                  HttpRequestRetrying(request.GetHttpMethod(), request.RequestUri.AbsoluteUri, attempt, reason, backoffDuration.TotalSeconds);
219              }
220          }
221          [NonEvent]
222          public void HttpRequestFailedMaxAttempts(
223              VssTraceActivity activity,
224              HttpRequestMessage request,
225              Int32 attempt,
226              HttpStatusCode? httpStatusCode,
227              WebExceptionStatus? webExceptionStatus,
228              SocketError? socketErrorCode,
229              WinHttpErrorCode? winHttpErrorCode,
230              CurlErrorCode? curlErrorCode,
231              string afdRefInfo)
232          {
233              if (IsEnabled())
234              {
235                  String reason = &quot;&lt;unknown&gt;&quot;;
236                  if (httpStatusCode != null)
237                  {
238                      reason = String.Format(CultureInfo.InvariantCulture, &quot;HTTP Status: {0}&quot;, httpStatusCode.Value);
239                  }
240                  else if (webExceptionStatus != null)
241                  {
242                      reason = String.Format(CultureInfo.InvariantCulture, &quot;Web Exception Status: {0}&quot;, webExceptionStatus.Value);
243                  }
244                  else if (socketErrorCode != null)
245                  {
246                      reason = String.Format(CultureInfo.InvariantCulture, &quot;Socket Error: {0}&quot;, socketErrorCode.Value);
247                  }
248                  else if (winHttpErrorCode != null)
249                  {
250                      reason = String.Format(CultureInfo.InvariantCulture, &quot;WinHttp Error: {0}&quot;, winHttpErrorCode);
251                  }
252                  else if (curlErrorCode != null)
253                  {
254                      reason = String.Format(CultureInfo.InvariantCulture, &quot;Curl Error: {0}&quot;, curlErrorCode);
255                  }
256                  if (!string.IsNullOrEmpty(afdRefInfo))
257                  {
258                      reason += $&quot;, AFD Ref: {afdRefInfo}&quot;;
259                  }
260                  SetActivityId(activity);
261                  HttpRequestFailedMaxAttempts(request.GetHttpMethod(), request.RequestUri.AbsoluteUri, attempt, reason);
262              }
263          }
264          [NonEvent]
265          public void HttpRequestSucceededWithRetry(
266              VssTraceActivity activity,
267              HttpResponseMessage response,
268              Int32 attempt)
269          {
270              if (IsEnabled())
271              {
272                  SetActivityId(activity);
273                  HttpRequestSucceededWithRetry(response.RequestMessage.GetHttpMethod(), response.RequestMessage.RequestUri.AbsoluteUri, attempt);
274              }
275          }
276          [NonEvent]
277          public void HttpRequestCancelled(
278              VssTraceActivity activity,
279              HttpRequestMessage request)
280          {
281              if (IsEnabled())
282              {
283                  SetActivityId(activity);
284                  HttpRequestCancelled(request.GetHttpMethod(), request.RequestUri.AbsoluteUri);
285              }
286          }
287          [NonEvent]
288          public void HttpRequestTimedOut(
289              VssTraceActivity activity,
290              HttpRequestMessage request,
291              TimeSpan timeout)
292          {
293              if (IsEnabled())
294              {
295                  SetActivityId(activity);
296                  HttpRequestTimedOut(request.GetHttpMethod(), request.RequestUri.AbsoluteUri, (Int32)timeout.TotalSeconds);
297              }
298          }
299          [NonEvent]
300          public void HttpRequestStop(
301              VssTraceActivity activity,
302              HttpResponseMessage response)
303          {
304              if (IsEnabled())
305              {
306                  SetActivityId(activity);
307                  HttpRequestStop(response.RequestMessage.GetHttpMethod(), response.RequestMessage.RequestUri.AbsoluteUri, (Int32)response.StatusCode);
308              }
309          }
310          [NonEvent]
311          public void AuthenticationFailed(
312              VssTraceActivity activity,
313              HttpResponseMessage response)
314          {
315              if (IsEnabled())
316              {
317                  SetActivityId(activity);
318                  WriteMessageEvent((Int32)response.StatusCode, response.Headers.ToString(), this.AuthenticationFailed);
319              }
320          }
321          [NonEvent]
322          public void AuthenticationFailedOnFirstRequest(
323              VssTraceActivity activity,
324              HttpResponseMessage response)
325          {
326              if (IsEnabled())
327              {
328                  SetActivityId(activity);
329                  WriteMessageEvent((Int32)response.StatusCode, response.Headers.ToString(), this.AuthenticationFailedOnFirstRequest);
330              }
331          }
332          [NonEvent]
333          public void IssuedTokenProviderCreated(
334              VssTraceActivity activity,
335              IssuedTokenProvider provider)
336          {
337              if (IsEnabled())
338              {
339                  SetActivityId(activity);
340                  IssuedTokenProviderCreated(provider.CredentialType, provider.GetHashCode(), provider.GetAuthenticationParameters());
341              }
342          }
343          [NonEvent]
344          public void IssuedTokenProviderRemoved(
345              VssTraceActivity activity,
346              IssuedTokenProvider provider)
347          {
348              if (IsEnabled())
349              {
350                  SetActivityId(activity);
351                  IssuedTokenProviderRemoved(provider.CredentialType, provider.GetHashCode(), provider.GetAuthenticationParameters());
352              }
353          }
354          [NonEvent]
355          internal void IssuedTokenProviderNotFound(VssTraceActivity activity)
356          {
357              if (IsEnabled())
358              {
359                  SetActivityId(activity);
360                  IssuedTokenProviderNotFound();
361              }
362          }
363          [NonEvent]
364          internal void IssuedTokenProviderPromptRequired(
365              VssTraceActivity activity,
366              IssuedTokenProvider provider)
367          {
368              if (IsEnabled())
369              {
370                  SetActivityId(activity);
371                  IssuedTokenProviderPromptRequired(provider.CredentialType, provider.GetHashCode());
372              }
373          }
374          [NonEvent]
375          public void IssuedTokenAcquiring(
376              VssTraceActivity activity,
377              IssuedTokenProvider provider)
378          {
379              if (IsEnabled())
380              {
381                  SetActivityId(activity);
382                  IssuedTokenAcquiring(provider.CredentialType, provider.GetHashCode());
383              }
384          }
385          [NonEvent]
386          public void IssuedTokenWaitStart(
387              VssTraceActivity activity,
388              IssuedTokenProvider provider,
389              Guid waitForActivityId)
390          {
391              if (IsEnabled(EventLevel.Verbose, Keywords.Authentication))
392              {
393                  SetActivityId(activity);
394                  IssuedTokenWaitStart(provider.CredentialType, provider.GetHashCode(), waitForActivityId);
395              }
396          }
397          [NonEvent]
398          public void IssuedTokenWaitStop(
399              VssTraceActivity activity,
400              IssuedTokenProvider provider,
401              IssuedToken token)
402          {
403              if (IsEnabled(EventLevel.Verbose, Keywords.Authentication))
404              {
405                  SetActivityId(activity);
406                  IssuedTokenWaitStop(provider.CredentialType, provider.GetHashCode(), token != null ? token.GetHashCode() : 0);
407              }
408          }
409          [NonEvent]
410          public void IssuedTokenAcquired(
411              VssTraceActivity activity,
412              IssuedTokenProvider provider,
413              IssuedToken token)
414          {
415              if (IsEnabled())
416              {
417                  SetActivityId(activity);
418                  IssuedTokenAcquired(provider.CredentialType, provider.GetHashCode(), token != null ? token.GetHashCode() : 0);
419              }
420          }
421          [NonEvent]
422          public void IssuedTokenInvalidated(
423              VssTraceActivity activity,
424              IssuedTokenProvider provider,
425              IssuedToken token)
426          {
427              if (IsEnabled())
428              {
429                  SetActivityId(activity);
430                  IssuedTokenInvalidated(provider.CredentialType, provider.GetHashCode(), token.GetHashCode());
431              }
432          }
433          [NonEvent]
434          public void IssuedTokenValidated(
435              VssTraceActivity activity,
436              IssuedTokenProvider provider,
437              IssuedToken token)
438          {
439              if (IsEnabled())
440              {
441                  SetActivityId(activity);
442                  IssuedTokenValidated(provider.CredentialType, provider.GetHashCode(), token.GetHashCode());
443              }
444          }
445          [NonEvent]
446          public void IssuedTokenRetrievedFromCache(
447              VssTraceActivity activity,
448              IssuedTokenProvider provider,
449              IssuedToken token)
450          {
451              if (IsEnabled())
452              {
453                  SetActivityId(activity);
454                  IssuedTokenRetrievedFromCache(provider.CredentialType, provider.GetHashCode(), token.GetHashCode());
455              }
456          }
457          [Event(1, Level = EventLevel.Verbose, Task = Tasks.HttpRequest, Opcode = EventOpcode.Start, Message = &quot;Started {0} request to {1}&quot;)]
458          private void HttpRequestStart(
459              VssHttpMethod method,
460              String url)
461          {
462              if (IsEnabled())
463              {
464                  WriteEvent(1, (Int32)method, url);
465              }
466          }
467          [Event(2, Level = EventLevel.Error, Task = Tasks.HttpRequest, Opcode = EventOpcode.Info, Message = &quot;{0} request to {1} failed. {2}&quot;)]
468          private void HttpRequestFailed(
469              VssHttpMethod method,
470              String url,
471              String message)
472          {
473              if (IsEnabled())
474              {
475                  WriteEvent(2, (Int32)method, url, message);
476              }
477          }
478          [Event(3, Level = EventLevel.Informational, Task = Tasks.HttpRequest, Opcode = EventOpcode.Info, Message = &quot;{0} request to {1} succeeded with status code {2}&quot;)]
479          private void HttpRequestSucceeded(
480              VssHttpMethod method,
481              String url,
482              Int32 statusCode)
483          {
484              if (IsEnabled())
485              {
486                  WriteEvent(3, (Int32)method, url, statusCode);
487              }
488          }
489          [Event(4, Level = EventLevel.Warning, Task = Tasks.HttpRequest, Opcode = EventOpcode.Info, Message = &quot;Attempt {2} of {0} request to {1} failed ({3}). The operation will be retried in {4} seconds.&quot;)]
490          private void HttpRequestRetrying(
491              VssHttpMethod method,
492              String url,
493              Int32 attempt,
494              String reason,
495              Double backoffDurationInSeconds)
496          {
497              if (IsEnabled())
498              {
499                  WriteEvent(4, (Int32)method, url, attempt, reason, backoffDurationInSeconds);
500              }
501          }
502          [Event(5, Level = EventLevel.Error, Task = Tasks.HttpRequest, Opcode = EventOpcode.Info, Message = &quot;Attempt {2} of {0} request to {1} failed ({3}). The maximum number of attempts has been reached.&quot;)]
503          private void HttpRequestFailedMaxAttempts(
504              VssHttpMethod method,
505              String url,
506              Int32 attempt,
507              String reason)
508          {
509              if (IsEnabled())
510              {
511                  WriteEvent(5, (Int32)method, url, attempt, reason);
512              }
513          }
514          [Event(6, Level = EventLevel.Verbose, Task = Tasks.HttpRequest, Opcode = EventOpcode.Info, Message = &quot;Attempt {2} of {0} request to {1} succeeded.&quot;)]
515          private void HttpRequestSucceededWithRetry(
516              VssHttpMethod method,
517              String url,
518              Int32 attempt)
519          {
520              if (IsEnabled())
521              {
522                  WriteEvent(6, (Int32)method, url, attempt);
523              }
524          }
525          [Event(7, Level = EventLevel.Warning, Task = Tasks.HttpRequest, Opcode = EventOpcode.Info, Message = &quot;{0} request to {1} has been cancelled.&quot;)]
526          private void HttpRequestCancelled(
527              VssHttpMethod method,
528              String url)
529          {
530              if (IsEnabled())
531              {
532                  WriteEvent(7, (Int32)method, url);
533              }
534          }
535          [Event(8, Level = EventLevel.Warning, Task = Tasks.HttpRequest, Opcode = EventOpcode.Info, Message = &quot;{0} request to {1} timed out after {2} seconds.&quot;)]
536          private void HttpRequestTimedOut(
537              VssHttpMethod method,
538              String url,
539              Int32 timeoutInSeconds)
540          {
541              if (IsEnabled())
542              {
543                  WriteEvent(8, (Int32)method, url, timeoutInSeconds);
544              }
545          }
546          [Event(9, Level = EventLevel.Error, Task = Tasks.HttpRequest, Opcode = EventOpcode.Info, Message = &quot;{0} request to {1} is not authorized. Details: {2}&quot;)]
547          private void HttpRequestUnauthorized(
548              VssHttpMethod method,
549              String url,
550              String message)
551          {
552              if (IsEnabled())
553              {
554                  WriteEvent(9, (Int32)method, url, message);
555              }
556          }
557          [Event(10, Keywords = Keywords.Authentication, Level = EventLevel.Warning, Task = Tasks.HttpRequest, Message = &quot;Authentication failed with status code {0}.%n{1}&quot;)]
558          private void AuthenticationFailed(
559              Int32 statusCode,
560              String headers)
561          {
562              if (IsEnabled(EventLevel.Verbose, Keywords.Authentication))
563              {
564                  WriteEvent(10, statusCode, headers);
565              }
566          }
567          [Event(11, Keywords = Keywords.Authentication, Level = EventLevel.Informational, Task = Tasks.HttpRequest, Message = &quot;Authentication successful using {0} credentials&quot;)]
568          private void AuthenticationSucceeded(VssCredentialsType credentialsType)
569          {
570              if (IsEnabled(EventLevel.Verbose, Keywords.Authentication))
571              {
572                  WriteEvent(11, (Int32)credentialsType);
573              }
574          }
575          [Event(12, Keywords = Keywords.Authentication, Level = EventLevel.Verbose, Task = Tasks.Authentication, Opcode = EventOpcode.Start, Message = &quot;Started authentication&quot;)]
576          private void AuthenticationStart()
577          {
578              if (IsEnabled(EventLevel.Verbose, Keywords.Authentication))
579              {
580                  WriteEvent(12);
581              }
582          }
583          [Event(13, Keywords = Keywords.Authentication, Level = EventLevel.Verbose, Task = Tasks.Authentication, Message = &quot;Created {0} issued token provider instance {1} ({2})&quot;)]
584          private void IssuedTokenProviderCreated(
585              VssCredentialsType credentialsType,
586              Int32 providerId,
587              String parameters)
588          {
589              if (IsEnabled())
590              {
591                  WriteEvent(13, (Int32)credentialsType, providerId, parameters);
592              }
593          }
594          [Event(14, Keywords = Keywords.Authentication, Level = EventLevel.Verbose, Task = Tasks.Authentication, Message = &quot;Removed {0} issued token provider instance {1} ({2})&quot;)]
595          private void IssuedTokenProviderRemoved(
596              VssCredentialsType credentialsType,
597              Int32 providerId,
598              String parameters)
599          {
600              if (IsEnabled(EventLevel.Verbose, Keywords.Authentication))
601              {
602                  WriteEvent(14, (Int32)credentialsType, providerId, parameters);
603              }
604          }
605          [Event(15, Keywords = Keywords.Authentication, Level = EventLevel.Verbose, Task = Tasks.Authentication, Message = &quot;{0} issued token provider instance {1} is acquiring a token&quot;)]
606          private void IssuedTokenAcquiring(
607              VssCredentialsType credentialsType,
608              Int32 providerId)
609          {
610              if (IsEnabled(EventLevel.Verbose, Keywords.Authentication))
611              {
612                  WriteEvent(15, (Int32)credentialsType, providerId);
613              }
614          }
615          [Event(16, Keywords = Keywords.Authentication, Level = EventLevel.Verbose, Task = Tasks.Authentication, Opcode = EventOpcode.Suspend, Message = &quot;{0} issued token provider instance {1} is waiting for issued token from activity {2}&quot;)]
616          private void IssuedTokenWaitStart(
617              VssCredentialsType credentialsType,
618              Int32 providerId,
619              Guid waitForActivityId)
620          {
621              WriteEvent(16, (Int32)credentialsType, providerId, waitForActivityId);
622          }
623          [Event(17, Keywords = Keywords.Authentication, Level = EventLevel.Verbose, Task = Tasks.Authentication, Opcode = EventOpcode.Resume, Message = &quot;{0} issued token provider instance {1} received token instance {2}&quot;)]
624          private void IssuedTokenWaitStop(
625              VssCredentialsType credentialsType,
626              Int32 providerId,
627              Int32 issuedTokenId)
628          {
629              WriteEvent(17, (Int32)credentialsType, providerId, issuedTokenId);
630          }
631          [Event(18, Keywords = Keywords.Authentication, Level = EventLevel.Verbose, Task = Tasks.Authentication, Message = &quot;{0} issued token provider instance {1} acquired new token instance {2}&quot;)]
632          private void IssuedTokenAcquired(
633              VssCredentialsType credentialsType,
634              Int32 providerId,
635              Int32 issuedTokenId)
636          {
637              if (IsEnabled(EventLevel.Verbose, Keywords.Authentication))
638              {
639                  WriteEvent(18, (Int32)credentialsType, providerId, issuedTokenId);
640              }
641          }
642          [Event(20, Keywords = Keywords.Authentication, Level = EventLevel.Verbose, Task = Tasks.Authentication, Message = &quot;{0} issued token provider instance {1} invalidated token instance {2}&quot;)]
643          private void IssuedTokenInvalidated(
644              VssCredentialsType credentialsType,
645              Int32 providerId,
646              Int32 issuedTokenId)
647          {
648              if (IsEnabled(EventLevel.Verbose, Keywords.Authentication))
649              {
650                  WriteEvent(20, (Int32)credentialsType, providerId, issuedTokenId);
651              }
652          }
653          [Event(21, Keywords = Keywords.Authentication, Level = EventLevel.Verbose, Task = Tasks.Authentication, Message = &quot;{0} issued token provider instance {1} validated token instance {2}&quot;)]
654          private void IssuedTokenValidated(
655              VssCredentialsType credentialsType,
656              Int32 providerId,
657              Int32 issuedTokenId)
658          {
659              if (IsEnabled(EventLevel.Verbose, Keywords.Authentication))
660              {
661                  WriteEvent(21, (Int32)credentialsType, providerId, issuedTokenId);
662              }
663          }
664          [Event(22, Keywords = Keywords.Authentication, Level = EventLevel.Verbose, Task = Tasks.Authentication, Message = &quot;{0} issued token provider instance {1} retrieved token instance {2}&quot;)]
665          private void IssuedTokenRetrievedFromCache(
666              VssCredentialsType credentialsType,
667              Int32 providerId,
668              Int32 issuedTokenId)
669          {
670              if (IsEnabled(EventLevel.Verbose, Keywords.Authentication))
671              {
672                  WriteEvent(22, (Int32)credentialsType, providerId, issuedTokenId);
673              }
674          }
675          [Event(23, Keywords = Keywords.Authentication, Level = EventLevel.Verbose, Task = Tasks.Authentication, Opcode = EventOpcode.Stop, Message = &quot;Finished authentication&quot;)]
676          private void AuthenticationStop()
677          {
678              if (IsEnabled(EventLevel.Verbose, Keywords.Authentication))
679              {
680                  WriteEvent(23);
681              }
682          }
683          [Event(24, Level = EventLevel.Verbose, Task = Tasks.HttpRequest, Opcode = EventOpcode.Stop, Message = &quot;Finished {0} request to {1} with status code {2}&quot;)]
684          private void HttpRequestStop(
685              VssHttpMethod method,
686              String url,
687              Int32 statusCode)
688          {
689              if (IsEnabled())
690              {
691                  WriteEvent(24, (Int32)method, url, statusCode);
692              }
693          }
694          [Event(25, Keywords = Keywords.HttpOperation, Level = EventLevel.Informational, Task = Tasks.HttpOperation, Opcode = EventOpcode.Start, Message = &quot;Starting operation {0}.{1}&quot;)]
695          private void HttpOperationStart(
696              String area,
697              String operation)
698          {
699              if (IsEnabled(EventLevel.Informational, Keywords.HttpOperation))
700              {
701                  WriteEvent(25, area, operation);
702              }
703          }
704          [Event(26, Keywords = Keywords.HttpOperation, Level = EventLevel.Informational, Task = Tasks.HttpOperation, Opcode = EventOpcode.Stop, Message = &quot;Finished operation {0}.{1}&quot;)]
705          private void HttpOperationStop(
706              String area,
<span onclick='openModal()' class='match'>707              String operation)
708          {
709              if (IsEnabled(EventLevel.Informational, Keywords.HttpOperation))
710              {
711                  WriteEvent(26, area, operation);
</span>712              }
713          }
714          [Event(27, Keywords = Keywords.Authentication, Level = EventLevel.Error, Task = Tasks.Authentication, Opcode = EventOpcode.Info, Message = &quot;{0} issued token provider instance {1} failed to retrieve a token.%nReason: {2}&quot;)]
715          private void AuthenticationError(
716              VssCredentialsType credentialsType,
717              Int32 providerId,
718              String message)
719          {
720              if (IsEnabled(EventLevel.Error, Keywords.Authentication))
721              {
722                  WriteEvent(27, (Int32)credentialsType, providerId, message);
723              }
724          }
725          [Event(28, Keywords = Keywords.Authentication, Level = EventLevel.Warning, Task = Tasks.HttpRequest, Opcode = EventOpcode.Info, Message = &quot;No issued token provider found which can handle the authentication challenge&quot;)]
726          private void IssuedTokenProviderNotFound()
727          {
728              if (IsEnabled(EventLevel.Warning, Keywords.Authentication))
729              {
730                  WriteEvent(28);
731              }
732          }
733          [Event(29, Keywords = Keywords.Authentication, Level = EventLevel.Warning, Task = Tasks.HttpRequest, Opcode = EventOpcode.Info, Message = &quot;{0} issued token provider instance {1} requires an interactive prompt which is not allowed by the current settings&quot;)]
734          private void IssuedTokenProviderPromptRequired(
735              VssCredentialsType credentialsType,
736              Int32 providerId)
737          {
738              if (IsEnabled(EventLevel.Warning, Keywords.Authentication))
739              {
740                  WriteEvent(29, (Int32)credentialsType, providerId);
741              }
742          }
743          [Event(30, Keywords = Keywords.HttpOperation, Level = EventLevel.Critical, Task = Tasks.HttpOperation, Opcode = EventOpcode.Info, Message = &quot;A task completion source was not properly completed during authentication&quot;)]
744          public void TokenSourceNotCompleted()
745          {
746              if (IsEnabled(EventLevel.Critical, Keywords.HttpOperation))
747              {
748                  WriteEvent(30);
749              }
750          }
751          [Event(31, Keywords = Keywords.Authentication, Level = EventLevel.Warning, Task = Tasks.Authentication, Opcode = EventOpcode.Info, Message = &quot;Retrieving an AAD auth token took a long time ({0} seconds)&quot;)]
752          public void AuthorizationDelayed(string timespan)
753          {
754              if (IsEnabled(EventLevel.Warning, Keywords.Authentication))
755              {
756                  WriteEvent(31, timespan);
757              }
758          }
759          [Event(32, Keywords = Keywords.Authentication, Level = EventLevel.Informational, Task = Tasks.Authentication, Opcode = EventOpcode.Info, Message = &quot;AAD Correlation ID for this token request: {0}&quot;)]
760          public void AADCorrelationID(string aadCorrelationId)
761          {
762              if (IsEnabled(EventLevel.Informational, Keywords.Authentication))
763              {
764                  WriteEvent(32, aadCorrelationId);
765              }
766          }
767          [Event(33, Keywords = Keywords.Authentication, Level = EventLevel.Verbose, Task = Tasks.HttpRequest, Message = &quot;Authentication failed on first request with status code {0}.%n{1}&quot;)]
768          private void AuthenticationFailedOnFirstRequest(
769              Int32 statusCode,
770              String headers)
771          {
772              if (IsEnabled(EventLevel.Verbose, Keywords.Authentication))
773              {
774                  WriteEvent(33, statusCode, headers);
775              }
776          }
777          [NonEvent]
778          private void SetActivityId(VssTraceActivity activity)
779          {
780          }
781          [NonEvent]
782          private static IList&lt;String&gt; SplitMessage(String message)
783          {
784              List&lt;String&gt; list = new List&lt;String&gt;();
785              if (message.Length &gt; 30000)
786              {
787                  int num = 0;
788                  do
789                  {
790                      Int32 num2 = (message.Length - num &gt; 30000) ? 30000 : (message.Length - num);
791                      list.Add(message.Substring(num, num2));
792                      num += num2;
793                  }
794                  while (message.Length &gt; num);
795              }
796              else
797              {
798                  list.Add(message);
799              }
800              return list;
801          }
802          [NonEvent]
803          private void WriteMessageEvent(
804              Int32 param0,
805              String message,
806              Action&lt;Int32, String&gt; writeEvent)
807          {
808              writeEvent(param0, message);
809          }
810          [NonEvent]
811          private void WriteMessageEvent(
812              VssCredentialsType param0,
813              Int32 param1,
814              String message,
815              Action&lt;VssCredentialsType, Int32, String&gt; writeEvent)
816          {
817              writeEvent(param0, param1, message);
818          }
819          [NonEvent]
820          private void WriteMessageEvent(
821              VssHttpMethod param0,
822              String param1,
823              String message,
824              Action&lt;VssHttpMethod, String, String&gt; writeEvent)
825          {
826              writeEvent(param0, param1, message);
827          }
828          [NonEvent]
829          private new unsafe void WriteEvent(
830              Int32 eventId,
831              Int32 param0,
832              String param1)
833          {
834              param1 = param1 ?? String.Empty;
835              Int32 eventDataCount = 2;
836              Byte* userData = stackalloc Byte[sizeof(EventData) * eventDataCount];
837              EventData* eventData = (EventData*)userData;
838              eventData[0].Size = sizeof(Int32);
839              eventData[1].Size = (Int32)(param1.Length + 1) * sizeof(Char);
840              fixed (Char* a1 = param1)
841              {
842                  eventData[0].DataPointer = (IntPtr)(&amp;param0);
843                  eventData[1].DataPointer = (IntPtr)a1;
844                  base.WriteEventCore(eventId, eventDataCount, eventData);
845              }
846          }
847          [NonEvent]
848          private unsafe void WriteEvent(
849              Int32 eventId,
850              Int32 param0,
851              String param1,
852              String param2)
853          {
854              param1 = param1 ?? String.Empty;
855              param2 = param2 ?? String.Empty;
856              Int32 eventDataCount = 3;
857              Byte* userData = stackalloc Byte[sizeof(EventData) * eventDataCount];
858              EventData* eventData = (EventData*)userData;
859              eventData[0].Size = sizeof(Int32);
860              eventData[1].Size = (Int32)(param1.Length + 1) * sizeof(Char);
861              eventData[2].Size = (Int32)(param2.Length + 1) * sizeof(Char);
862              fixed (Char* a1 = param1, a2 = param2)
863              {
864                  eventData[0].DataPointer = (IntPtr)(&amp;param0);
865                  eventData[1].DataPointer = (IntPtr)a1;
866                  eventData[2].DataPointer = (IntPtr)a2;
867                  base.WriteEventCore(eventId, eventDataCount, eventData);
868              }
869          }
870          [NonEvent]
871          private unsafe void WriteEvent(
872              Int32 eventId,
873              Int32 param0,
874              Int32 param1,
875              Guid param2)
876          {
877              Int32 eventDataCount = 3;
878              Byte* userData = stackalloc Byte[sizeof(EventData) * eventDataCount];
879              EventData* eventData = (EventData*)userData;
880              eventData[0].Size = sizeof(Int32);
881              eventData[1].Size = sizeof(Int32);
882              eventData[2].Size = sizeof(Guid);
883              eventData[0].DataPointer = (IntPtr)(&amp;param0);
884              eventData[1].DataPointer = (IntPtr)(&amp;param1);
885              eventData[2].DataPointer = (IntPtr)(&amp;param2);
886              base.WriteEventCore(eventId, eventDataCount, eventData);
887          }
888          [NonEvent]
889          private unsafe void WriteEvent(
890              Int32 eventId,
891              Int32 param0,
892              Int32 param1,
893              String param2)
894          {
895              param2 = param2 ?? String.Empty;
896              Int32 eventDataCount = 3;
897              Byte* userData = stackalloc Byte[sizeof(EventData) * eventDataCount];
898              EventData* eventData = (EventData*)userData;
899              eventData[0].Size = sizeof(Int32);
900              eventData[1].Size = sizeof(Int32);
901              eventData[2].Size = (Int32)(param2.Length + 1) * sizeof(Char);
902              fixed (Char* a2 = param2)
903              {
904                  eventData[0].DataPointer = (IntPtr)(&amp;param0);
905                  eventData[1].DataPointer = (IntPtr)(&amp;param1);
906                  eventData[2].DataPointer = (IntPtr)a2;
907                  base.WriteEventCore(eventId, eventDataCount, eventData);
908              }
909          }
910          [NonEvent]
911          private unsafe void WriteEvent(
912              Int32 eventId,
913              Int32 param0,
914              String param1,
915              Int32 param2)
916          {
917              param1 = param1 ?? String.Empty;
918              Int32 eventDataCount = 3;
919              Byte* userData = stackalloc Byte[sizeof(EventData) * eventDataCount];
920              EventData* eventData = (EventData*)userData;
921              eventData[0].Size = sizeof(Int32);
922              eventData[1].Size = (Int32)(param1.Length + 1) * sizeof(Char);
923              eventData[2].Size = sizeof(Int32);
924              fixed (Char* a1 = param1)
925              {
926                  eventData[0].DataPointer = (IntPtr)(&amp;param0);
927                  eventData[1].DataPointer = (IntPtr)a1;
928                  eventData[2].DataPointer = (IntPtr)(&amp;param2);
929                  base.WriteEventCore(eventId, eventDataCount, eventData);
930              }
931          }
932          [NonEvent]
933          private unsafe void WriteEvent(
934              Int32 eventId,
935              Int32 param0,
936              Int32 param1,
937              Int32 param2,
938              Guid param3)
939          {
940              Int32 eventDataCount = 4;
941              Byte* userData = stackalloc Byte[sizeof(EventData) * eventDataCount];
942              EventData* eventData = (EventData*)userData;
943              eventData[0].Size = sizeof(Int32);
944              eventData[1].Size = sizeof(Int32);
945              eventData[2].Size = sizeof(Int32);
946              eventData[3].Size = sizeof(Guid);
947              eventData[0].DataPointer = (IntPtr)(&amp;param0);
948              eventData[1].DataPointer = (IntPtr)(&amp;param1);
949              eventData[2].DataPointer = (IntPtr)(&amp;param2);
950              eventData[3].DataPointer = (IntPtr)(&amp;param3);
951              base.WriteEventCore(eventId, eventDataCount, eventData);
952          }
953          [NonEvent]
954          private unsafe void WriteEvent(
955              Int32 eventId,
956              Int32 param0,
957              Int32 param1,
958              Guid param2,
959              Guid param3)
960          {
961              Int32 eventDataCount = 4;
962              Byte* userData = stackalloc Byte[sizeof(EventData) * eventDataCount];
963              EventData* eventData = (EventData*)userData;
964              eventData[0].Size = sizeof(Int32);
965              eventData[1].Size = sizeof(Int32);
966              eventData[2].Size = sizeof(Guid);
967              eventData[3].Size = sizeof(Guid);
968              eventData[0].DataPointer = (IntPtr)(&amp;param0);
969              eventData[1].DataPointer = (IntPtr)(&amp;param1);
970              eventData[2].DataPointer = (IntPtr)(&amp;param2);
971              eventData[3].DataPointer = (IntPtr)(&amp;param3);
972              base.WriteEventCore(eventId, eventDataCount, eventData);
973          }
974          [NonEvent]
975          private unsafe void WriteEvent(
976              Int32 eventId,
977              Int32 param0,
978              String param1,
979              Int32 param2,
980              String param3)
981          {
982              param1 = param1 ?? String.Empty;
983              param3 = param3 ?? String.Empty;
984              Int32 eventDataCount = 4;
985              Byte* userData = stackalloc Byte[sizeof(EventData) * eventDataCount];
986              EventData* eventData = (EventData*)userData;
987              eventData[0].Size = sizeof(Int32);
988              eventData[1].Size = (Int32)(param1.Length + 1) * sizeof(Char);
989              eventData[2].Size = sizeof(Int32);
990              eventData[3].Size = (Int32)(param3.Length + 1) * sizeof(Char);
991              fixed (Char* a1 = param1, a3 = param3)
992              {
993                  eventData[0].DataPointer = (IntPtr)(&amp;param0);
994                  eventData[1].DataPointer = (IntPtr)a1;
995                  eventData[2].DataPointer = (IntPtr)(&amp;param2);
996                  eventData[3].DataPointer = (IntPtr)a3;
997                  base.WriteEventCore(eventId, eventDataCount, eventData);
998              }
999          }
1000          [NonEvent]
1001          private unsafe void WriteEvent(
1002              Int32 eventId,
1003              Int32 param0,
1004              String param1,
1005              Int32 param2,
1006              String param3,
1007              Double param4)
1008          {
1009              param1 = param1 ?? String.Empty;
1010              param3 = param3 ?? String.Empty;
1011              Int32 eventDataCount = 5;
1012              Byte* userData = stackalloc Byte[sizeof(EventData) * eventDataCount];
1013              EventData* eventData = (EventData*)userData;
1014              eventData[0].Size = sizeof(Int32);
1015              eventData[1].Size = (Int32)(param1.Length + 1) * sizeof(Char);
1016              eventData[2].Size = sizeof(Int32);
1017              eventData[3].Size = (Int32)(param3.Length + 1) * sizeof(Char);
1018              eventData[4].Size = sizeof(Double);
1019              fixed (Char* a1 = param1, a3 = param3)
1020              {
1021                  eventData[0].DataPointer = (IntPtr)(&amp;param0);
1022                  eventData[1].DataPointer = (IntPtr)a1;
1023                  eventData[2].DataPointer = (IntPtr)(&amp;param2);
1024                  eventData[3].DataPointer = (IntPtr)a3;
1025                  eventData[4].DataPointer = (IntPtr)(&amp;param4);
1026                  base.WriteEventCore(eventId, eventDataCount, eventData);
1027              }
1028          }
1029          private static Lazy&lt;VssHttpEventSource&gt; m_log = new Lazy&lt;VssHttpEventSource&gt;(() =&gt; new VssHttpEventSource());
1030      }
1031      public static class VssEventSources
1032      {
1033          public const String Http = &quot;GitHub-Actions-Http&quot;;
1034      }
1035  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from runner-MDEwOlJlcG9zaXRvcnkxODQyODY4NzU=-flat-VssHttpEventSource.cs</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from runner-MDEwOlJlcG9zaXRvcnkxODQyODY4NzU=-flat-VssHttpEventSource.cs</div>
                </div>
                <div class="column column_space"><pre><code>53              String message)
54          {
55              if (IsEnabled(EventLevel.Error, Keywords.Authentication))
56              {
57                  SetActivityId(activity);
</pre></code></div>
                <div class="column column_space"><pre><code>707              String operation)
708          {
709              if (IsEnabled(EventLevel.Informational, Keywords.HttpOperation))
710              {
711                  WriteEvent(26, area, operation);
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    