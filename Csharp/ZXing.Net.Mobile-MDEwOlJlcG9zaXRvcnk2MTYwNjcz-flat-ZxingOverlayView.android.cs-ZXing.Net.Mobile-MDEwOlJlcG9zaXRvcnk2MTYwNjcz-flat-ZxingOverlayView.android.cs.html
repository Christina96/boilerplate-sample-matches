
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Tokens: 19, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>ZXing.Net.Mobile-MDEwOlJlcG9zaXRvcnk2MTYwNjcz-flat-ZxingOverlayView.android.cs</h3>
            <pre><code>1  using System;
2  using System.Collections.Generic;
3  using System.Linq;
4  using System.Text;
5  using Android.App;
6  using Android.Content;
7  using Android.OS;
8  using Android.Runtime;
9  using Android.Util;
10  using Android.Views;
11  using Android.Widget;
12  using Android.Graphics;
13  using Android.Text;
14  namespace ZXing.Mobile
15  {
16  	public class ZxingOverlayView : View
17  	{
18  		int[] SCANNER_ALPHA = { 0, 64, 128, 192, 255, 192, 128, 64 };
19  		const long ANIMATION_DELAY = 80L;
20  		const int CURRENT_POINT_OPACITY = 0xA0;
21  		const int MAX_RESULT_POINTS = 20;
22  		const int POINT_SIZE = 6;
23  		Paint paint;
24  		Bitmap resultBitmap;
25  		Color maskColor;
26  		Color resultColor;
27  		Color frameColor;
28  		Color laserColor;
29  		int scannerAlpha;
30  		List<ZXing.ResultPoint> possibleResultPoints;
31  		public ZxingOverlayView(Context context) : base(context)
32  		{
33  			paint = new Paint(PaintFlags.AntiAlias);
34  			maskColor = Color.Gray; 
35  			resultColor = Color.Red; 
36  			frameColor = Color.Black; 
37  			laserColor = Color.Red; 
38  			scannerAlpha = 0;
39  			possibleResultPoints = new List<ZXing.ResultPoint>(5);
40  			SetBackgroundColor(Color.Transparent);
41  		}
42  		Rect GetFramingRect(Canvas canvas)
43  		{
44  			var width = canvas.Width * 15 / 16;
45  			var height = canvas.Height * 4 / 10;
46  			var leftOffset = (canvas.Width - width) / 2;
47  			var topOffset = (canvas.Height - height) / 2;
48  			var framingRect = new Rect(leftOffset, topOffset, leftOffset + width, topOffset + height);
49  			return framingRect;
50  		}
51  		public string TopText { get; set; }
52  		public string BottomText { get; set; }
53  		protected override void OnDraw(Canvas canvas)
54  		{
55  			var scale = this.Context.Resources.DisplayMetrics.Density;
56  			var frame = GetFramingRect(canvas);
57  			if (frame == null)
58  				return;
59  			var width = canvas.Width;
60  			var height = canvas.Height;
61  			paint.Color = resultBitmap != null ? resultColor : maskColor;
62  			paint.Alpha = 100;
63  			canvas.DrawRect(0, 0, width, frame.Top, paint);
64  			canvas.DrawRect(0, frame.Bottom + 1, width, height, paint);
65  			var textPaint = new TextPaint();
66  			textPaint.Color = Color.White;
67  			textPaint.TextSize = 16 * scale;
68  			var topTextLayout = new StaticLayout(this.TopText, textPaint, canvas.Width, Android.Text.Layout.Alignment.AlignCenter, 1.0f, 0.0f, false);
69  			canvas.Save();
70  			var topBounds = new Rect();
<span onclick='openModal()' class='match'>71  			textPaint.GetTextBounds(this.TopText, 0, this.TopText.Length, topBounds);
72  			canvas.Translate(0, frame.Top / 2 - (topTextLayout.Height / 2));
</span>73  			topTextLayout.Draw(canvas);
74  			canvas.Restore();
75  			var botTextLayout = new StaticLayout(this.BottomText, textPaint, canvas.Width, Android.Text.Layout.Alignment.AlignCenter, 1.0f, 0.0f, false);
76  			canvas.Save();
77  			var botBounds = new Rect();
78  			textPaint.GetTextBounds(this.BottomText, 0, this.BottomText.Length, botBounds);
79  			canvas.Translate(0, (frame.Bottom + (canvas.Height - frame.Bottom) / 2) - (botTextLayout.Height / 2));
80  			botTextLayout.Draw(canvas);
81  			canvas.Restore();
82  			if (resultBitmap != null)
83  			{
84  				paint.Alpha = CURRENT_POINT_OPACITY;
85  				canvas.DrawBitmap(resultBitmap, null, new RectF(frame.Left, frame.Top, frame.Right, frame.Bottom), paint);
86  			}
87  			else
88  			{
89  				paint.Color = frameColor;
90  				paint.Color = laserColor;
91  				paint.Alpha = SCANNER_ALPHA[scannerAlpha];
92  				scannerAlpha = (scannerAlpha + 1) % SCANNER_ALPHA.Length;
93  				var middle = frame.Height() / 2 + frame.Top;
94  				canvas.DrawRect(0, middle - 1, width, middle + 2, paint);
95  				PostInvalidateDelayed(ANIMATION_DELAY,
96  									  frame.Left - POINT_SIZE,
97  									  frame.Top - POINT_SIZE,
98  									  frame.Right + POINT_SIZE,
99  									  frame.Bottom + POINT_SIZE);
100  			}
101  			base.OnDraw(canvas);
102  		}
103  		public void DrawResultBitmap(Android.Graphics.Bitmap barcode)
104  		{
105  			resultBitmap = barcode;
106  			Invalidate();
107  		}
108  		public void AddPossibleResultPoint(ZXing.ResultPoint point)
109  		{
110  			var points = possibleResultPoints;
111  			lock (points)
112  			{
113  				points.Add(point);
114  				var size = points.Count;
115  				if (size > MAX_RESULT_POINTS)
116  				{
117  					points.RemoveRange(0, size - MAX_RESULT_POINTS / 2);
118  				}
119  			}
120  		}
121  	}
122  }
</code></pre>
        </div>
        <div class="column">
            <h3>ZXing.Net.Mobile-MDEwOlJlcG9zaXRvcnk2MTYwNjcz-flat-ZxingOverlayView.android.cs</h3>
            <pre><code>1  using System;
2  using System.Collections.Generic;
3  using System.Linq;
4  using System.Text;
5  using Android.App;
6  using Android.Content;
7  using Android.OS;
8  using Android.Runtime;
9  using Android.Util;
10  using Android.Views;
11  using Android.Widget;
12  using Android.Graphics;
13  using Android.Text;
14  namespace ZXing.Mobile
15  {
16  	public class ZxingOverlayView : View
17  	{
18  		int[] SCANNER_ALPHA = { 0, 64, 128, 192, 255, 192, 128, 64 };
19  		const long ANIMATION_DELAY = 80L;
20  		const int CURRENT_POINT_OPACITY = 0xA0;
21  		const int MAX_RESULT_POINTS = 20;
22  		const int POINT_SIZE = 6;
23  		Paint paint;
24  		Bitmap resultBitmap;
25  		Color maskColor;
26  		Color resultColor;
27  		Color frameColor;
28  		Color laserColor;
29  		int scannerAlpha;
30  		List<ZXing.ResultPoint> possibleResultPoints;
31  		public ZxingOverlayView(Context context) : base(context)
32  		{
33  			paint = new Paint(PaintFlags.AntiAlias);
34  			maskColor = Color.Gray; 
35  			resultColor = Color.Red; 
36  			frameColor = Color.Black; 
37  			laserColor = Color.Red; 
38  			scannerAlpha = 0;
39  			possibleResultPoints = new List<ZXing.ResultPoint>(5);
40  			SetBackgroundColor(Color.Transparent);
41  		}
42  		Rect GetFramingRect(Canvas canvas)
43  		{
44  			var width = canvas.Width * 15 / 16;
45  			var height = canvas.Height * 4 / 10;
46  			var leftOffset = (canvas.Width - width) / 2;
47  			var topOffset = (canvas.Height - height) / 2;
48  			var framingRect = new Rect(leftOffset, topOffset, leftOffset + width, topOffset + height);
49  			return framingRect;
50  		}
51  		public string TopText { get; set; }
52  		public string BottomText { get; set; }
53  		protected override void OnDraw(Canvas canvas)
54  		{
55  			var scale = this.Context.Resources.DisplayMetrics.Density;
56  			var frame = GetFramingRect(canvas);
57  			if (frame == null)
58  				return;
59  			var width = canvas.Width;
60  			var height = canvas.Height;
61  			paint.Color = resultBitmap != null ? resultColor : maskColor;
62  			paint.Alpha = 100;
63  			canvas.DrawRect(0, 0, width, frame.Top, paint);
64  			canvas.DrawRect(0, frame.Bottom + 1, width, height, paint);
65  			var textPaint = new TextPaint();
66  			textPaint.Color = Color.White;
67  			textPaint.TextSize = 16 * scale;
68  			var topTextLayout = new StaticLayout(this.TopText, textPaint, canvas.Width, Android.Text.Layout.Alignment.AlignCenter, 1.0f, 0.0f, false);
69  			canvas.Save();
70  			var topBounds = new Rect();
71  			textPaint.GetTextBounds(this.TopText, 0, this.TopText.Length, topBounds);
72  			canvas.Translate(0, frame.Top / 2 - (topTextLayout.Height / 2));
73  			topTextLayout.Draw(canvas);
74  			canvas.Restore();
75  			var botTextLayout = new StaticLayout(this.BottomText, textPaint, canvas.Width, Android.Text.Layout.Alignment.AlignCenter, 1.0f, 0.0f, false);
76  			canvas.Save();
77  			var botBounds = new Rect();
<span onclick='openModal()' class='match'>78  			textPaint.GetTextBounds(this.BottomText, 0, this.BottomText.Length, botBounds);
79  			canvas.Translate(0, (frame.Bottom + (canvas.Height - frame.Bottom) / 2) - (botTextLayout.Height / 2));
</span>80  			botTextLayout.Draw(canvas);
81  			canvas.Restore();
82  			if (resultBitmap != null)
83  			{
84  				paint.Alpha = CURRENT_POINT_OPACITY;
85  				canvas.DrawBitmap(resultBitmap, null, new RectF(frame.Left, frame.Top, frame.Right, frame.Bottom), paint);
86  			}
87  			else
88  			{
89  				paint.Color = frameColor;
90  				paint.Color = laserColor;
91  				paint.Alpha = SCANNER_ALPHA[scannerAlpha];
92  				scannerAlpha = (scannerAlpha + 1) % SCANNER_ALPHA.Length;
93  				var middle = frame.Height() / 2 + frame.Top;
94  				canvas.DrawRect(0, middle - 1, width, middle + 2, paint);
95  				PostInvalidateDelayed(ANIMATION_DELAY,
96  									  frame.Left - POINT_SIZE,
97  									  frame.Top - POINT_SIZE,
98  									  frame.Right + POINT_SIZE,
99  									  frame.Bottom + POINT_SIZE);
100  			}
101  			base.OnDraw(canvas);
102  		}
103  		public void DrawResultBitmap(Android.Graphics.Bitmap barcode)
104  		{
105  			resultBitmap = barcode;
106  			Invalidate();
107  		}
108  		public void AddPossibleResultPoint(ZXing.ResultPoint point)
109  		{
110  			var points = possibleResultPoints;
111  			lock (points)
112  			{
113  				points.Add(point);
114  				var size = points.Count;
115  				if (size > MAX_RESULT_POINTS)
116  				{
117  					points.RemoveRange(0, size - MAX_RESULT_POINTS / 2);
118  				}
119  			}
120  		}
121  	}
122  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from ZXing.Net.Mobile-MDEwOlJlcG9zaXRvcnk2MTYwNjcz-flat-ZxingOverlayView.android.cs</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from ZXing.Net.Mobile-MDEwOlJlcG9zaXRvcnk2MTYwNjcz-flat-ZxingOverlayView.android.cs</div>
                </div>
                <div class="column column_space"><pre><code>71  			textPaint.GetTextBounds(this.TopText, 0, this.TopText.Length, topBounds);
72  			canvas.Translate(0, frame.Top / 2 - (topTextLayout.Height / 2));
</pre></code></div>
                <div class="column column_space"><pre><code>78  			textPaint.GetTextBounds(this.BottomText, 0, this.BottomText.Length, botBounds);
79  			canvas.Translate(0, (frame.Bottom + (canvas.Height - frame.Bottom) / 2) - (botTextLayout.Height / 2));
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    