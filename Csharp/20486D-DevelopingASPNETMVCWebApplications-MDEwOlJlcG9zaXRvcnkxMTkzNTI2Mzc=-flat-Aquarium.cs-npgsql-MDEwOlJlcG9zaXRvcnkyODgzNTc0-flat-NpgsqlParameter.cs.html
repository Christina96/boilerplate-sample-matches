
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 37.086092715231786%, Tokens: 28</h2>
        <div class="column">
            <h3>20486D-DevelopingASPNETMVCWebApplications-MDEwOlJlcG9zaXRvcnkxMTkzNTI2Mzc=-flat-Aquarium.cs</h3>
            <pre><code>1  using System;
2  using System.Collections.Generic;
3  using System.ComponentModel.DataAnnotations;
4  using System.Linq;
5  using System.Threading.Tasks;
6  namespace Underwater.Models
7  {
8      public class Aquarium
9      {
10          [Key]
<span onclick='openModal()' class='match'>11          public int AquariumId { get; set; }
12          public string Name { get; set; }
13          public string Address { get; set; }
14          public int Number { get; set; }
</span>15          public bool Open { get; set; }
16          public virtual ICollection<Fish> Fishes { get; set; }
17      }
18  }
</code></pre>
        </div>
        <div class="column">
            <h3>npgsql-MDEwOlJlcG9zaXRvcnkyODgzNTc0-flat-NpgsqlParameter.cs</h3>
            <pre><code>1  using System;
2  using System.ComponentModel;
3  using System.Data;
4  using System.Data.Common;
5  using System.Diagnostics.CodeAnalysis;
6  using System.Threading;
7  using System.Threading.Tasks;
8  using Npgsql.Internal;
9  using Npgsql.Internal.TypeHandling;
10  using Npgsql.Internal.TypeMapping;
11  using Npgsql.PostgresTypes;
12  using Npgsql.TypeMapping;
13  using Npgsql.Util;
14  using NpgsqlTypes;
15  using static Npgsql.Util.Statics;
16  namespace Npgsql;
17  public class NpgsqlParameter : DbParameter, IDbDataParameter, ICloneable
18  {
19      #region Fields and Properties
20      private protected byte _precision;
21      private protected byte _scale;
22      private protected int _size;
23      private protected NpgsqlDbType? _npgsqlDbType;
24      private protected string? _dataTypeName;
25      private protected  string _name = string.Empty;
26      private protected  object? _value;
27      private protected  string _sourceColumn;
28      internal string TrimmedName { get; private protected set; } = PositionalName;
29      internal const string PositionalName = ""; 
<span onclick='openModal()' class='match'>30      public object? ConvertedValue { get; set; }
31      internal NpgsqlLengthCache? LengthCache { get; set; }
32      internal NpgsqlTypeHandler? Handler { get; set; }
33      internal FormatCode FormatCode { get; private set; }
</span>34      #endregion
35      #region Constructors
36      public NpgsqlParameter()
37      {
38          _sourceColumn = string.Empty;
39          Direction = ParameterDirection.Input;
40          SourceVersion = DataRowVersion.Current;
41      }
42      public NpgsqlParameter(string? parameterName, object? value)
43          : this()
44      {
45          ParameterName = parameterName;
46          Value = value;
47      }
48      public NpgsqlParameter(string? parameterName, NpgsqlDbType parameterType)
49          : this(parameterName, parameterType, 0, string.Empty)
50      {
51      }
52      public NpgsqlParameter(string? parameterName, DbType parameterType)
53          : this(parameterName, parameterType, 0, string.Empty)
54      {
55      }
56      public NpgsqlParameter(string? parameterName, NpgsqlDbType parameterType, int size)
57          : this(parameterName, parameterType, size, string.Empty)
58      {
59      }
60      public NpgsqlParameter(string? parameterName, DbType parameterType, int size)
61          : this(parameterName, parameterType, size, string.Empty)
62      {
63      }
64      public NpgsqlParameter(string? parameterName, NpgsqlDbType parameterType, int size, string? sourceColumn)
65      {
66          ParameterName = parameterName;
67          NpgsqlDbType = parameterType;
68          _size = size;
69          _sourceColumn = sourceColumn ?? string.Empty;
70          Direction = ParameterDirection.Input;
71          SourceVersion = DataRowVersion.Current;
72      }
73      public NpgsqlParameter(string? parameterName, DbType parameterType, int size, string? sourceColumn)
74      {
75          ParameterName = parameterName;
76          DbType = parameterType;
77          _size = size;
78          _sourceColumn = sourceColumn ?? string.Empty;
79          Direction = ParameterDirection.Input;
80          SourceVersion = DataRowVersion.Current;
81      }
82      public NpgsqlParameter(string parameterName, NpgsqlDbType parameterType, int size, string? sourceColumn,
83          ParameterDirection direction, bool isNullable, byte precision, byte scale,
84          DataRowVersion sourceVersion, object value)
85      {
86          ParameterName = parameterName;
87          Size = size;
88          _sourceColumn = sourceColumn ?? string.Empty;
89          Direction = direction;
90          IsNullable = isNullable;
91          Precision = precision;
92          Scale = scale;
93          SourceVersion = sourceVersion;
94          Value = value;
95          NpgsqlDbType = parameterType;
96      }
97      public NpgsqlParameter(string parameterName, DbType parameterType, int size, string? sourceColumn,
98          ParameterDirection direction, bool isNullable, byte precision, byte scale,
99          DataRowVersion sourceVersion, object value)
100      {
101          ParameterName = parameterName;
102          Size = size;
103          _sourceColumn = sourceColumn ?? string.Empty;
104          Direction = direction;
105          IsNullable = isNullable;
106          Precision = precision;
107          Scale = scale;
108          SourceVersion = sourceVersion;
109          Value = value;
110          DbType = parameterType;
111      }
112      #endregion
113      #region Name
114      [AllowNull, DefaultValue("")]
115      public sealed override string ParameterName
116      {
117          get => _name;
118          set
119          {
120              if (Collection is not null)
121                  Collection.ChangeParameterName(this, value);
122              else 
123                  ChangeParameterName(value);
124          }
125      }
126      internal void ChangeParameterName(string? value)
127      {
128          if (value == null)
129              _name = TrimmedName = PositionalName;
130          else if (value.Length > 0 && (value[0] == ':' || value[0] == '@'))
131              TrimmedName = (_name = value).Substring(1);
132          else
133              _name = TrimmedName = value;
134      }
135      internal bool IsPositional => ParameterName.Length == 0;
136      #endregion Name
137      #region Value
138      [TypeConverter(typeof(StringConverter)), Category("Data")]
139      public override object? Value
140      {
141          get => _value;
142          set
143          {
144              if (_value == null || value == null || _value.GetType() != value.GetType())
145                  Handler = null;
146              _value = value;
147              ConvertedValue = null;
148          }
149      }
150      [Category("Data")]
151      [TypeConverter(typeof(StringConverter))]
152      public object? NpgsqlValue
153      {
154          get => Value;
155          set => Value = value;
156      }
157      #endregion Value
158      #region Type
159      [DefaultValue(DbType.Object)]
160      [Category("Data"), RefreshProperties(RefreshProperties.All)]
161      public sealed override DbType DbType
162      {
163          get
164          {
165              if (_npgsqlDbType.HasValue)
166                  return GlobalTypeMapper.NpgsqlDbTypeToDbType(_npgsqlDbType.Value);
167              if (_dataTypeName is not null)
168                  return GlobalTypeMapper.NpgsqlDbTypeToDbType(GlobalTypeMapper.DataTypeNameToNpgsqlDbType(_dataTypeName));
169              if (Value is not null) 
170              {
171                  return GlobalTypeMapper.Instance.TryResolveMappingByValue(Value, out var mapping)
172                      ? mapping.DbType
173                      : DbType.Object;
174              }
175              return DbType.Object;
176          }
177          set
178          {
179              Handler = null;
180              _npgsqlDbType = value == DbType.Object
181                  ? null
182                  : GlobalTypeMapper.DbTypeToNpgsqlDbType(value)
183                    ?? throw new NotSupportedException($"The parameter type DbType.{value} isn't supported by PostgreSQL or Npgsql");
184          }
185      }
186      [DefaultValue(NpgsqlDbType.Unknown)]
187      [Category("Data"), RefreshProperties(RefreshProperties.All)]
188      [DbProviderSpecificTypeProperty(true)]
189      public NpgsqlDbType NpgsqlDbType
190      {
191          [RequiresUnreferencedCode("The NpgsqlDbType getter isn't trimming-safe")]
192          get
193          {
194              if (_npgsqlDbType.HasValue)
195                  return _npgsqlDbType.Value;
196              if (_dataTypeName is not null)
197                  return GlobalTypeMapper.DataTypeNameToNpgsqlDbType(_dataTypeName);
198              if (Value is not null) 
199              {
200                  return GlobalTypeMapper.Instance.TryResolveMappingByValue(Value, out var mapping)
201                      ? mapping.NpgsqlDbType ?? NpgsqlDbType.Unknown
202                      : throw new NotSupportedException("Can't infer NpgsqlDbType for type " + Value.GetType());
203              }
204              return NpgsqlDbType.Unknown;
205          }
206          set
207          {
208              if (value == NpgsqlDbType.Array)
209                  throw new ArgumentOutOfRangeException(nameof(value), "Cannot set NpgsqlDbType to just Array, Binary-Or with the element type (e.g. Array of Box is NpgsqlDbType.Array | NpgsqlDbType.Box).");
210              if (value == NpgsqlDbType.Range)
211                  throw new ArgumentOutOfRangeException(nameof(value), "Cannot set NpgsqlDbType to just Range, Binary-Or with the element type (e.g. Range of integer is NpgsqlDbType.Range | NpgsqlDbType.Integer)");
212              Handler = null;
213              _npgsqlDbType = value;
214          }
215      }
216      public string? DataTypeName
217      {
218          get
219          {
220              if (_dataTypeName != null)
221                  return _dataTypeName;
222              if (_npgsqlDbType.HasValue)
223                  return GlobalTypeMapper.NpgsqlDbTypeToDataTypeName(_npgsqlDbType.Value);
224              if (Value != null) 
225              {
226                  return GlobalTypeMapper.Instance.TryResolveMappingByValue(Value, out var mapping)
227                      ? mapping.DataTypeName
228                      : null;
229              }
230              return null;
231          }
232          set
233          {
234              _dataTypeName = value;
235              Handler = null;
236          }
237      }
238      #endregion Type
239      #region Other Properties
240      public sealed override bool IsNullable { get; set; }
241      [DefaultValue(ParameterDirection.Input)]
242      [Category("Data")]
243      public sealed override ParameterDirection Direction { get; set; }
244  #pragma warning disable CS0109
245      [DefaultValue((byte)0)]
246      [Category("Data")]
247      public new byte Precision
248      {
249          get => _precision;
250          set
251          {
252              _precision = value;
253              Handler = null;
254          }
255      }
256      [DefaultValue((byte)0)]
257      [Category("Data")]
258      public new byte Scale
259      {
260          get => _scale;
261          set
262          {
263              _scale = value;
264              Handler = null;
265          }
266      }
267  #pragma warning restore CS0109
268      [DefaultValue(0)]
269      [Category("Data")]
270      public sealed override int Size
271      {
272          get => _size;
273          set
274          {
275              if (value < -1)
276                  throw new ArgumentException($"Invalid parameter Size value '{value}'. The value must be greater than or equal to 0.");
277              _size = value;
278              Handler = null;
279          }
280      }
281      [AllowNull, DefaultValue("")]
282      [Category("Data")]
283      public sealed override string SourceColumn
284      {
285          get => _sourceColumn;
286          set => _sourceColumn = value ?? string.Empty;
287      }
288      [Category("Data"), DefaultValue(DataRowVersion.Current)]
289      public sealed override DataRowVersion SourceVersion { get; set; }
290      public sealed override bool SourceColumnNullMapping { get; set; }
291  #pragma warning disable CA2227
292      public NpgsqlParameterCollection? Collection { get; set; }
293  #pragma warning restore CA2227
294      public PostgresType? PostgresType { get; internal set; }
295      #endregion Other Properties
296      #region Internals
297      internal virtual void ResolveHandler(TypeMapper typeMapper)
298      {
299          if (Handler is not null)
300              return;
301          Resolve(typeMapper);
302          void Resolve(TypeMapper typeMapper)
303          {
304              if (_npgsqlDbType.HasValue)
305                  Handler = typeMapper.ResolveByNpgsqlDbType(_npgsqlDbType.Value);
306              else if (_dataTypeName is not null)
307                  Handler = typeMapper.ResolveByDataTypeName(_dataTypeName);
308              else if (_value is not null)
309                  Handler = typeMapper.ResolveByValue(_value);
310              else
311                  ThrowInvalidOperationException();
312          }
313          void ThrowInvalidOperationException()
314          {
315              var parameterName = !string.IsNullOrEmpty(ParameterName) ? ParameterName : $"${Collection?.IndexOf(this) + 1}";
316              ThrowHelper.ThrowInvalidOperationException($"Parameter '{parameterName}' must have either its NpgsqlDbType or its DataTypeName or its Value set");
317          }
318      }
319      internal void Bind(TypeMapper typeMapper)
320      {
321          ResolveHandler(typeMapper);
322          FormatCode = Handler!.PreferTextWrite ? FormatCode.Text : FormatCode.Binary;
323      }
324      internal virtual int ValidateAndGetLength()
325      {
326          if (_value is DBNull)
327              return 0;
328          if (_value == null)
329              ThrowHelper.ThrowInvalidCastException("Parameter {0} must be set", ParameterName);
330          var lengthCache = LengthCache;
331          var len = Handler!.ValidateObjectAndGetLength(_value, ref lengthCache, this);
332          LengthCache = lengthCache;
333          return len;
334      }
335      internal virtual Task WriteWithLength(NpgsqlWriteBuffer buf, bool async, CancellationToken cancellationToken = default)
336          => Handler!.WriteObjectWithLength(_value!, buf, LengthCache, this, async, cancellationToken);
337      public override void ResetDbType()
338      {
339          _npgsqlDbType = null;
340          _dataTypeName = null;
341          Handler = null;
342      }
343      internal bool IsInputDirection => Direction == ParameterDirection.InputOutput || Direction == ParameterDirection.Input;
344      internal bool IsOutputDirection => Direction == ParameterDirection.InputOutput || Direction == ParameterDirection.Output;
345      #endregion
346      #region Clone
347      public NpgsqlParameter Clone() => CloneCore();
348      private protected virtual NpgsqlParameter CloneCore() =>
349          new()
350          {
351              _precision = _precision,
352              _scale = _scale,
353              _size = _size,
354              _npgsqlDbType = _npgsqlDbType,
355              _dataTypeName = _dataTypeName,
356              Direction = Direction,
357              IsNullable = IsNullable,
358              _name = _name,
359              TrimmedName = TrimmedName,
360              SourceColumn = SourceColumn,
361              SourceVersion = SourceVersion,
362              _value = _value,
363              SourceColumnNullMapping = SourceColumnNullMapping,
364          };
365      object ICloneable.Clone() => Clone();
366      #endregion
367  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from 20486D-DevelopingASPNETMVCWebApplications-MDEwOlJlcG9zaXRvcnkxMTkzNTI2Mzc=-flat-Aquarium.cs</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from npgsql-MDEwOlJlcG9zaXRvcnkyODgzNTc0-flat-NpgsqlParameter.cs</div>
                </div>
                <div class="column column_space"><pre><code>11          public int AquariumId { get; set; }
12          public string Name { get; set; }
13          public string Address { get; set; }
14          public int Number { get; set; }
</pre></code></div>
                <div class="column column_space"><pre><code>30      public object? ConvertedValue { get; set; }
31      internal NpgsqlLengthCache? LengthCache { get; set; }
32      internal NpgsqlTypeHandler? Handler { get; set; }
33      internal FormatCode FormatCode { get; private set; }
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    