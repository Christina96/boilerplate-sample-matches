
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 6.965174129353234%, Tokens: 14</h2>
        <div class="column">
            <h3>20486D-DevelopingASPNETMVCWebApplications-MDEwOlJlcG9zaXRvcnkxMTkzNTI2Mzc=-flat-ZooContext_208.cs</h3>
            <pre><code>1  using Microsoft.EntityFrameworkCore;
2  using System;
3  using System.Collections.Generic;
4  using System.Linq;
5  using System.Threading.Tasks;
6  using ZooSite.Models;
7  namespace ZooSite.Data
8  {
9      public class ZooContext : DbContext
10      {
11          public ZooContext(DbContextOptions<ZooContext> options) : base(options)
12          {
13          }
<span onclick='openModal()' class='match'>14          public DbSet<Customer> Customers { get; set; }
15          public DbSet<Photo> Photos { get; set; }
</span>16          protected override void OnModelCreating(ModelBuilder modelBuilder)
17          {
18              modelBuilder.Entity<Photo>().HasData(
19                   new Photo
20                   {
21                       PhotoID = 1,
22                       Title = "Butterfly Garden",
23                       Description = "The butterfly garden has more than 35 species of butterfly that can be seen by our visitors.",
24                       PhotoFileName = "butterfly.jpg",
25                       ImageMimeType = "image/jpeg"
26                   },
27                  new Photo
28                  {
29                      PhotoID = 2,
30                      Title = "African Animals",
31                      Description = "The African animals are the first sight that most people first notice upon entering the zoo, highly recommended.",
32                      PhotoFileName = "lion.jpg",
33                      ImageMimeType = "image/jpeg"
34                  },
35                  new Photo
36                  {
37                      PhotoID = 3,
38                      Title = "Underwater World",
39                      Description = "Our aquarium tank contains aquatic animals.",
40                      PhotoFileName = "octopus.jpg",
41                      ImageMimeType = "image/jpeg"
42                  },
43                  new Photo
44                  {
45                      PhotoID = 4,
46                      Title = "Sea Birds",
47                      Description = "The zoo sea birds department has a lot of special sea birds shows.",
48                      PhotoFileName = "swan.jpg",
49                      ImageMimeType = "image/jpeg"
50                  });
51          }
52      }
53  }
</code></pre>
        </div>
        <div class="column">
            <h3>NetCoreServer-MDEwOlJlcG9zaXRvcnkxNjYxMjMxNjQ=-flat-UdsTests.cs</h3>
            <pre><code>1  using System;
2  using System.Collections.Generic;
3  using System.IO;
4  using System.Net.Sockets;
5  using System.Threading;
6  using NetCoreServer;
7  using Xunit;
8  namespace tests
9  {
10      class EchoUdsClient : NetCoreServer.UdsClient
11      {
<span onclick='openModal()' class='match'>12          public bool Connected { get; set; }
13          public bool Disconnected { get; set; }
</span>14          public bool Errors { get; set; }
15          public EchoUdsClient(string path) : base(path) {}
16          protected override void OnConnected() { Connected = true; }
17          protected override void OnDisconnected() { Disconnected = true; }
18          protected override void OnError(SocketError error) { Errors = true; }
19      }
20      class EchoUdsSession : UdsSession
21      {
22          public bool Connected { get; set; }
23          public bool Disconnected { get; set; }
24          public bool Errors { get; set; }
25          public EchoUdsSession(UdsServer server) : base(server) {}
26          protected override void OnConnected() { Connected = true; }
27          protected override void OnDisconnected() { Disconnected = true; }
28          protected override void OnReceived(byte[] buffer, long offset, long size) { SendAsync(buffer, offset, size); }
29          protected override void OnError(SocketError error) { Errors = true; }
30      }
31      class EchoUdsServer : UdsServer
32      {
33          public bool Started { get; set; }
34          public bool Stopped { get; set; }
35          public bool Connected { get; set; }
36          public bool Disconnected { get; set; }
37          public int Clients { get; set; }
38          public bool Errors { get; set; }
39          public EchoUdsServer(string path) : base(path) {}
40          protected override UdsSession CreateSession() { return new EchoUdsSession(this); }
41          protected override void OnStarted() { Started = true; }
42          protected override void OnStopped() { Stopped = true; }
43          protected override void OnConnected(UdsSession session) { Connected = true; Clients++; }
44          protected override void OnDisconnected(UdsSession session) { Disconnected = true; Clients--; }
45          protected override void OnError(SocketError error) { Errors = true; }
46      }
47      public class UdsTests
48      {
49          [Fact(DisplayName = "Unix Domain Socket server test")]
50          public void UdsServerTest()
51          {
52              string path = Path.Combine(Path.GetTempPath(), "test.sock");
53              var server = new EchoUdsServer(path);
54              Assert.True(server.Start());
55              while (!server.IsStarted)
56                  Thread.Yield();
57              var client = new EchoUdsClient(path);
58              Assert.True(client.ConnectAsync());
59              while (!client.IsConnected || (server.Clients != 1))
60                  Thread.Yield();
61              client.SendAsync("test");
62              while (client.BytesReceived != 4)
63                  Thread.Yield();
64              Assert.True(client.DisconnectAsync());
65              while (client.IsConnected || (server.Clients != 0))
66                  Thread.Yield();
67              Assert.True(server.Stop());
68              while (server.IsStarted)
69                  Thread.Yield();
70              Assert.True(server.Started);
71              Assert.True(server.Stopped);
72              Assert.True(server.Connected);
73              Assert.True(server.Disconnected);
74              Assert.True(server.BytesSent == 4);
75              Assert.True(server.BytesReceived == 4);
76              Assert.True(!server.Errors);
77              Assert.True(client.Connected);
78              Assert.True(client.Disconnected);
79              Assert.True(client.BytesSent == 4);
80              Assert.True(client.BytesReceived == 4);
81              Assert.True(!client.Errors);
82          }
83          [Fact(DisplayName = "Unix Domain Socket server multicast test")]
84          public void UdsServerMulticastTest()
85          {
86              string path = Path.Combine(Path.GetTempPath(), "test.sock");
87              var server = new EchoUdsServer(path);
88              Assert.True(server.Start());
89              while (!server.IsStarted)
90                  Thread.Yield();
91              var client1 = new EchoUdsClient(path);
92              Assert.True(client1.ConnectAsync());
93              while (!client1.IsConnected || (server.Clients != 1))
94                  Thread.Yield();
95              server.Multicast("test");
96              while (client1.BytesReceived != 4)
97                  Thread.Yield();
98              var client2 = new EchoUdsClient(path);
99              Assert.True(client2.ConnectAsync());
100              while (!client2.IsConnected || (server.Clients != 2))
101                  Thread.Yield();
102              server.Multicast("test");
103              while ((client1.BytesReceived != 8) || (client2.BytesReceived != 4))
104                  Thread.Yield();
105              var client3 = new EchoUdsClient(path);
106              Assert.True(client3.ConnectAsync());
107              while (!client3.IsConnected || (server.Clients != 3))
108                  Thread.Yield();
109              server.Multicast("test");
110              while ((client1.BytesReceived != 12) || (client2.BytesReceived != 8) || (client3.BytesReceived != 4))
111                  Thread.Yield();
112              Assert.True(client1.DisconnectAsync());
113              while (client1.IsConnected || (server.Clients != 2))
114                  Thread.Yield();
115              server.Multicast("test");
116              while ((client1.BytesReceived != 12) || (client2.BytesReceived != 12) || (client3.BytesReceived != 8))
117                  Thread.Yield();
118              Assert.True(client2.DisconnectAsync());
119              while (client2.IsConnected || (server.Clients != 1))
120                  Thread.Yield();
121              server.Multicast("test");
122              while ((client1.BytesReceived != 12) || (client2.BytesReceived != 12) || (client3.BytesReceived != 12))
123                  Thread.Yield();
124              Assert.True(client3.DisconnectAsync());
125              while (client3.IsConnected || (server.Clients != 0))
126                  Thread.Yield();
127              Assert.True(server.Stop());
128              while (server.IsStarted)
129                  Thread.Yield();
130              Assert.True(server.Started);
131              Assert.True(server.Stopped);
132              Assert.True(server.Connected);
133              Assert.True(server.Disconnected);
134              Assert.True(server.BytesSent > 0);
135              Assert.True(server.BytesReceived == 0);
136              Assert.True(!server.Errors);
137              Assert.True(client1.BytesSent == 0);
138              Assert.True(client2.BytesSent == 0);
139              Assert.True(client3.BytesSent == 0);
140              Assert.True(client1.BytesReceived == 12);
141              Assert.True(client2.BytesReceived == 12);
142              Assert.True(client3.BytesReceived == 12);
143              Assert.True(!client1.Errors);
144              Assert.True(!client2.Errors);
145              Assert.True(!client3.Errors);
146          }
147          [Fact(DisplayName = "Unix Domain Socket server random test")]
148          public void UdsServerRandomTest()
149          {
150              string path = Path.Combine(Path.GetTempPath(), "test.sock");
151              var server = new EchoUdsServer(path);
152              Assert.True(server.Start());
153              while (!server.IsStarted)
154                  Thread.Yield();
155              int duration = 10;
156              var clients = new List<EchoUdsClient>();
157              var rand = new Random();
158              var start = DateTime.UtcNow;
159              while ((DateTime.UtcNow - start).TotalSeconds < duration)
160              {
161                  if ((rand.Next() % 1000) == 0)
162                  {
163                      server.DisconnectAll();
164                  }
165                  else if ((rand.Next() % 100) == 0)
166                  {
167                      if (clients.Count < 100)
168                      {
169                          var client = new EchoUdsClient(path);
170                          clients.Add(client);
171                          client.ConnectAsync();
172                          while (!client.IsConnected)
173                              Thread.Yield();
174                      }
175                  }
176                  else if ((rand.Next() % 100) == 0)
177                  {
178                      if (clients.Count > 0)
179                      {
180                          int index = rand.Next() % clients.Count;
181                          var client = clients[index];
182                          if (client.IsConnected)
183                          {
184                              client.DisconnectAsync();
185                              while (client.IsConnected)
186                                  Thread.Yield();
187                          }
188                          else
189                          {
190                              client.ConnectAsync();
191                              while (!client.IsConnected)
192                                  Thread.Yield();
193                          }
194                      }
195                  }
196                  else if ((rand.Next() % 100) == 0)
197                  {
198                      if (clients.Count > 0)
199                      {
200                          int index = rand.Next() % clients.Count;
201                          var client = clients[index];
202                          if (client.IsConnected)
203                          {
204                              client.ReconnectAsync();
205                              while (!client.IsConnected)
206                                  Thread.Yield();
207                          }
208                      }
209                  }
210                  else if ((rand.Next() % 10) == 0)
211                  {
212                      server.Multicast("test");
213                  }
214                  else if ((rand.Next() % 1) == 0)
215                  {
216                      if (clients.Count > 0)
217                      {
218                          int index = rand.Next() % clients.Count;
219                          var client = clients[index];
220                          if (client.IsConnected)
221                              client.SendAsync("test");
222                      }
223                  }
224                  Thread.Sleep(1);
225              }
226              foreach (var client in clients)
227              {
228                  client.DisconnectAsync();
229                  while (client.IsConnected)
230                      Thread.Yield();
231              }
232              Assert.True(server.Stop());
233              while (server.IsStarted)
234                  Thread.Yield();
235              Assert.True(server.Started);
236              Assert.True(server.Stopped);
237              Assert.True(server.Connected);
238              Assert.True(server.Disconnected);
239              Assert.True(server.BytesSent > 0);
240              Assert.True(server.BytesReceived > 0);
241              Assert.True(!server.Errors);
242          }
243      }
244  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from 20486D-DevelopingASPNETMVCWebApplications-MDEwOlJlcG9zaXRvcnkxMTkzNTI2Mzc=-flat-ZooContext_208.cs</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from NetCoreServer-MDEwOlJlcG9zaXRvcnkxNjYxMjMxNjQ=-flat-UdsTests.cs</div>
                </div>
                <div class="column column_space"><pre><code>14          public DbSet<Customer> Customers { get; set; }
15          public DbSet<Photo> Photos { get; set; }
</pre></code></div>
                <div class="column column_space"><pre><code>12          public bool Connected { get; set; }
13          public bool Disconnected { get; set; }
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    