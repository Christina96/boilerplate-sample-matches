
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Tokens: 15, <button onclick='openModal()' class='match'>CODE CLONE</button></h2>
        <div class="column">
            <h3>Simple.Data-MDEwOlJlcG9zaXRvcnk4MTg3Njg=-flat-FindTest.cs</h3>
            <pre><code>1  namespace Simple.Data.IntegrationTest
2  {
3      using System;
4      using System.Collections.Generic;
5      using Mocking.Ado;
6      using NUnit.Framework;
7      [TestFixture]
8      public class FindTest : DatabaseIntegrationContext
9      {
10          protected override void SetSchema(MockSchemaProvider schemaProvider)
11          {
12              schemaProvider.SetTables(new[] { &quot;dbo&quot;, &quot;Users&quot;, &quot;BASE TABLE&quot; },
13                                       new[] { &quot;dbo&quot;, &quot;MyTable&quot;, &quot;BASE TABLE&quot; });
14              schemaProvider.SetColumns(new object[] { &quot;dbo&quot;, &quot;Users&quot;, &quot;Id&quot;, true },
15                                        new[] { &quot;dbo&quot;, &quot;Users&quot;, &quot;Name&quot; },
16                                        new[] { &quot;dbo&quot;, &quot;Users&quot;, &quot;Password&quot; },
17                                        new[] { &quot;dbo&quot;, &quot;Users&quot;, &quot;Age&quot; },
18                                        new[] { &quot;dbo&quot;, &quot;MyTable&quot;, &quot;Column1&quot;});
19              schemaProvider.SetPrimaryKeys(new object[] { &quot;dbo&quot;, &quot;Users&quot;, &quot;Id&quot;, 0 });
20          }
21          private const string UsersColumns = &quot;[dbo].[Users].[Id], [dbo].[Users].[Name], [dbo].[Users].[Password], [dbo].[Users].[Age]&quot;;
22          [Test]
23          public void TestFindEqualWithInt32()
24          {
<span onclick='openModal()' class='match'>25              _db.Users.Find(_db.Users.Id == 1);
26              GeneratedSqlIs(&quot;select &quot; + UsersColumns + &quot; from [dbo].[users] where [dbo].[users].[id] = @p1&quot;);
</span>27              Parameter(0).Is(1);
28          }
29          [Test]
30          public void TestFindWithNull()
31          {
32              _db.Users.Find(_db.Users.Id == null);
33              GeneratedSqlIs(&quot;select &quot; + UsersColumns + &quot; from [dbo].[users] where [dbo].[users].[id] IS NULL&quot;);
34          }
35          [Test]
36          public void TestFindWithTwoCriteriasOneBeingNull()
37          {
38              _db.Users.Find(_db.Users.Id == 1 || _db.Users.Id == null);
39              GeneratedSqlIs(&quot;select &quot; + UsersColumns + &quot; from [dbo].[users] where ([dbo].[users].[id] = @p1 OR [dbo].[users].[id] IS NULL)&quot;);
40              Parameter(0).Is(1);
41              Parameter(1).DoesNotExist();
42          }
43          [Test]
44          public void TestFindNotEqualWithInt32()
45          {
46              _db.Users.Find(_db.Users.Id != 1);
47              GeneratedSqlIs(&quot;select &quot; + UsersColumns + &quot; from [dbo].[Users] where [dbo].[Users].[Id] != @p1&quot;);
48              Parameter(0).Is(1);
49          }
50          [Test]
51          public void TestFindGreaterThanWithInt32()
52          {
53              _db.Users.Find(_db.Users.Id &gt; 1);
54              GeneratedSqlIs(&quot;select &quot; + UsersColumns + &quot; from [dbo].[Users] where [dbo].[Users].[Id] &gt; @p1&quot;);
55              Parameter(0).Is(1);
56          }
57          [Test]
58          public void TestFindGreaterThanOrEqualWithInt32()
59          {
60              _db.Users.Find(_db.Users.Id &gt;= 1);
61              GeneratedSqlIs(&quot;select &quot; + UsersColumns + &quot; from [dbo].[Users] where [dbo].[Users].[Id] &gt;= @p1&quot;);
62              Parameter(0).Is(1);
63          }
64          [Test]
65          public void TestFindLessThanWithInt32()
66          {
67              _db.Users.Find(_db.Users.Id &lt; 1);
68              GeneratedSqlIs(&quot;select &quot; + UsersColumns + &quot; from [dbo].[Users] where [dbo].[Users].[Id] &lt; @p1&quot;);
69              Parameter(0).Is(1);
70          }
71          [Test]
72          public void TestFindLessThanOrEqualWithInt32()
73          {
74              _db.Users.Find(_db.Users.Id &lt;= 1);
75              GeneratedSqlIs(&quot;select &quot; + UsersColumns + &quot; from [dbo].[Users] where [dbo].[Users].[Id] &lt;= @p1&quot;);
76              Parameter(0).Is(1);
77          }
78          [Test]
79          public void TestFindModulo()
80          {
81              _db.Users.Find(_db.Users.Id % 2 == 1);
82              GeneratedSqlIs(&quot;select &quot; + UsersColumns + &quot; from [dbo].[Users] where ([dbo].[Users].[Id] % @p1) = @p2&quot;);
83              Parameter(0).Is(2);
84              Parameter(1).Is(1);
85          }
86          [Test]
87          public void TestFindWithAdd()
88          {
89              _db.Users.Find(_db.Users.Id + _db.Users.Age == 42);
90              GeneratedSqlIs(&quot;select &quot; + UsersColumns + &quot; from [dbo].[Users] where ([dbo].[Users].[Id] + [dbo].[Users].[Age]) = @p1&quot;);
91              Parameter(0).Is(42);
92          }
93          [Test]
94          public void TestFindWithAddAndMultiply()
95          {
96              _db.Users.Find((_db.Users.Id + _db.Users.Age) * 2 == 42);
97              GeneratedSqlIs(&quot;select &quot; + UsersColumns + &quot; from [dbo].[Users] where (([dbo].[Users].[Id] + [dbo].[Users].[Age]) * @p1) = @p2&quot;);
98              Parameter(0).Is(2);
99              Parameter(1).Is(42);
100          }
101          [Test]
102          public void TestFindWithSubtract()
103          {
104              _db.Users.Find(_db.Users.Id - _db.Users.Age == 42);
105              GeneratedSqlIs(&quot;select &quot; + UsersColumns + &quot; from [dbo].[Users] where ([dbo].[Users].[Id] - [dbo].[Users].[Age]) = @p1&quot;);
106              Parameter(0).Is(42);
107          }
108          [Test]
109          public void TestFindWithMultiply()
110          {
111              _db.Users.Find(_db.Users.Id * _db.Users.Age == 42);
112              GeneratedSqlIs(&quot;select &quot; + UsersColumns + &quot; from [dbo].[Users] where ([dbo].[Users].[Id] * [dbo].[Users].[Age]) = @p1&quot;);
113              Parameter(0).Is(42);
114          }
115          [Test]
116          public void TestFindWithDivide()
117          {
118              _db.Users.Find(_db.Users.Id / _db.Users.Age == 42);
119              GeneratedSqlIs(&quot;select &quot; + UsersColumns + &quot; from [dbo].[Users] where ([dbo].[Users].[Id] / [dbo].[Users].[Age]) = @p1&quot;);
120              Parameter(0).Is(42);
121          }
122          [Test]
123          public void TestFindByNamedParameterSingleColumn()
124          {
125              _db.Users.FindBy(Name: &quot;Foo&quot;);
126              GeneratedSqlIs(&quot;select &quot; + UsersColumns + &quot; from [dbo].[Users] where [dbo].[Users].[name] = @p1&quot;);
127              Parameter(0).Is(&quot;Foo&quot;);
128          }
129          [Test]
130          public void TestFindByNamedParameterSingleColumnNullValue()
131          {
132              _db.Users.FindBy(Name: null);
133              GeneratedSqlIs(&quot;select &quot; + UsersColumns + &quot; from [dbo].[Users] where [dbo].[Users].[name] is null&quot;);
134          }
135          [Test]
136          public void TestFindByNamedParameterTwoColumns()
137          {
138              _db.Users.FindBy(Name: &quot;Foo&quot;, Password: &quot;password&quot;);
139              GeneratedSqlIs(&quot;select &quot; + UsersColumns + &quot; from [dbo].[Users] where ([dbo].[Users].[name] = @p1 and [dbo].[Users].[password] = @p2)&quot;);
140              Parameter(0).Is(&quot;Foo&quot;);
141              Parameter(1).Is(&quot;password&quot;);
142          }
143          [Test]
144          public void TestFindByDynamicSingleColumn()
145          {
146              _db.Users.FindByName(&quot;Foo&quot;);
147              GeneratedSqlIs(&quot;select &quot; + UsersColumns + &quot; from [dbo].[Users] where [dbo].[Users].[name] = @p1&quot;);
148              Parameter(0).Is(&quot;Foo&quot;);
149          }
150          [Test]
151          public void TestFindByDynamicSingleColumnNull()
152          {
153              _db.MyTable.FindByColumn1(null);
154              GeneratedSqlIs(&quot;select [dbo].[MyTable].[Column1] from [dbo].[MyTable] where [dbo].[MyTable].[Column1] is null&quot;);
155          }
156          [Test]
157          public void TestFindAllByDynamicSingleColumnNull()
158          {
159  #pragma warning disable 168
160              IEnumerable&lt;MyTable&gt; result = _db.MyTable.FindAllByColumn1(null).ToList&lt;MyTable&gt;();
161  #pragma warning restore 168
162              GeneratedSqlIs(&quot;select [dbo].[MyTable].[Column1] from [dbo].[MyTable] where [dbo].[MyTable].[Column1] is null&quot;);
163          }
164          [Test]
165          public void TestFindByWithAnonymousObject()
166          {
167              _db.MyTable.FindBy(new { Column1 = 1 });
168              GeneratedSqlIs(&quot;select [dbo].[MyTable].[Column1] from [dbo].[MyTable] where [dbo].[MyTable].[Column1] = @p1&quot;);
169              Parameter(0).Is(1);
170          }
171          [Test]
172          public void TestFindByWithAnonymousObjectNullValue()
173          {
174              _db.MyTable.FindBy(new { Column1 = (object)null });
175              GeneratedSqlIs(&quot;select [dbo].[MyTable].[Column1] from [dbo].[MyTable] where [dbo].[MyTable].[Column1] is null&quot;);
176          }
177          [Test]
178          public void TestFindWithLike()
179          {
180              _db.Users.Find(_db.Users.Name.Like(&quot;Foo&quot;));
181              GeneratedSqlIs(&quot;select &quot; + UsersColumns + &quot; from [dbo].[Users] where [dbo].[Users].[name] like @p1&quot;);
182              Parameter(0).Is(&quot;Foo&quot;);
183          }
184          [Test]
185          public void TestFindWithNotLike()
186          {
187              _db.Users.Find(_db.Users.Name.NotLike(&quot;Foo&quot;));
188              GeneratedSqlIs(&quot;select &quot; + UsersColumns + &quot; from [dbo].[Users] where [dbo].[Users].[name] not like @p1&quot;);
189              Parameter(0).Is(&quot;Foo&quot;);
190          }
191          [Test]
192          public void TestFindAllWithLike()
193          {
194              _db.Users.FindAll(_db.Users.Name.Like(&quot;Foo&quot;)).ToList();
195              GeneratedSqlIs(&quot;select [dbo].[Users].[id],[dbo].[Users].[name],[dbo].[Users].[password],[dbo].[Users].[age] from [dbo].[Users] where [dbo].[Users].[name] like @p1&quot;);
196              Parameter(0).Is(&quot;Foo&quot;);
197          }
198          [Test]
199          public void FindAllWithNoParametersThrowsBadExpressionException()
200          {
201              Assert.Throws&lt;BadExpressionException&gt;(() =&gt; _db.Users.FindAll().ToList());
202          }
203          [Test]
204          public void FindAllWithStringParameterThrowsBadExpressionException()
205          {
206              Assert.Throws&lt;BadExpressionException&gt;(() =&gt; _db.Users.FindAll(&quot;Answer&quot;).ToList());
207          }
208          [Test]
209          public void TestFindAllWithNotLike()
210          {
211              _db.Users.FindAll(_db.Users.Name.NotLike(&quot;Foo&quot;)).ToList();
212              GeneratedSqlIs(&quot;select [dbo].[Users].[id],[dbo].[Users].[name],[dbo].[Users].[password],[dbo].[Users].[age] from [dbo].[Users] where [dbo].[Users].[name] not like @p1&quot;);
213              Parameter(0).Is(&quot;Foo&quot;);
214          }
215          [Test]
216          public void TestFindAllByNamedParameterSingleColumn()
217          {
218              _db.Users.FindAllBy(Name: &quot;Foo&quot;).ToList();
219              GeneratedSqlIs(&quot;select [dbo].[Users].[id],[dbo].[Users].[name],[dbo].[Users].[password],[dbo].[Users].[age] from [dbo].[Users] where [dbo].[Users].[name] = @p1&quot;);
220              Parameter(0).Is(&quot;Foo&quot;);
221          }
222          [Test]
223          public void TestFindAllByNamedParameterSingleColumnNull()
224          {
225              _db.Users.FindAllBy(Name: null).ToList();
226              GeneratedSqlIs(&quot;select [dbo].[Users].[id],[dbo].[Users].[name],[dbo].[Users].[password],[dbo].[Users].[age] from [dbo].[Users] where [dbo].[Users].[name] is null&quot;);
227          }
228          [Test]
229          public void TestFindAllByNamedParameterTwoColumns()
230          {
231              _db.Users.FindAllBy(Name: &quot;Foo&quot;, Password: &quot;password&quot;).ToList();
232              GeneratedSqlIs(&quot;select [dbo].[Users].[id],[dbo].[Users].[name],[dbo].[Users].[password],[dbo].[Users].[age] from [dbo].[Users] where ([dbo].[Users].[name] = @p1 and [dbo].[Users].[password] = @p2)&quot;);
233              Parameter(0).Is(&quot;Foo&quot;);
234              Parameter(1).Is(&quot;password&quot;);
235          }
236          [Test]
237          public void TestFindByDynamicTwoColumns()
238          {
239              _db.Users.FindByNameAndPassword(&quot;Foo&quot;, &quot;secret&quot;);
240              GeneratedSqlIs(&quot;select &quot; + UsersColumns + &quot; from [dbo].[Users] where ([dbo].[Users].[name] = @p1 and [dbo].[Users].[password] = @p2)&quot;);
241              Parameter(0).Is(&quot;Foo&quot;);
242              Parameter(1).Is(&quot;secret&quot;);
243          }
244          [Test]
245          public void TestFindAllByDynamic()
246          {
247              _db.Users.FindAllByName(&quot;Foo&quot;).ToList();
248              GeneratedSqlIs(&quot;select [dbo].[Users].[id],[dbo].[Users].[name],[dbo].[Users].[password],[dbo].[Users].[age] from [dbo].[Users] where [dbo].[Users].[name] = @p1&quot;);
249              Parameter(0).Is(&quot;Foo&quot;);
250          }
251          [Test]
252          public void FindByWithoutArgsThrowsArgumentException()
253          {
254              Assert.Throws&lt;ArgumentException&gt;(() =&gt; _db.Users.FindBy());
255          }
256          [Test]
257          public void FindAllByWithoutArgsThrowsArgumentException()
258          {
259              Assert.Throws&lt;ArgumentException&gt;(() =&gt; _db.Users.FindAllBy());
260          }
261      }
262      class MyTable
263      {
264          public string Column1 { get; set; }
265      }
266  }
</code></pre>
        </div>
        <div class="column">
            <h3>Simple.Data-MDEwOlJlcG9zaXRvcnk4MTg3Njg=-flat-TransactionTest.cs</h3>
            <pre><code>1  using System;
2  using System.Collections.Generic;
3  using System.Data;
4  using System.Diagnostics;
5  using System.Dynamic;
6  using System.Linq;
7  using System.Text;
8  using NUnit.Framework;
9  using Simple.Data.Ado;
10  using Simple.Data.Mocking.Ado;
11  namespace Simple.Data.IntegrationTest
12  {
13      [TestFixture]
14      public class TransactionTest
15      {
16          static Database CreateDatabase(MockDatabase mockDatabase)
17          {
18              var mockSchemaProvider = new MockSchemaProvider();
19              mockSchemaProvider.SetTables(new[] { &quot;dbo&quot;, &quot;Users&quot;, &quot;BASE TABLE&quot; });
20              mockSchemaProvider.SetColumns(new[] { &quot;dbo&quot;, &quot;Users&quot;, &quot;Id&quot; },
21                                            new[] { &quot;dbo&quot;, &quot;Users&quot;, &quot;Name&quot; },
22                                            new[] { &quot;dbo&quot;, &quot;Users&quot;, &quot;Password&quot; },
23                                            new[] { &quot;dbo&quot;, &quot;Users&quot;, &quot;Age&quot; });
24              mockSchemaProvider.SetPrimaryKeys(new object[] {&quot;dbo&quot;, &quot;Users&quot;, &quot;Id&quot;, 0});
25              return new Database(new AdoAdapter(new MockConnectionProvider(new MockDbConnection(mockDatabase), mockSchemaProvider)));
26          }
27          private const string usersColumns = &quot;[dbo].[Users].[Id], [dbo].[Users].[Name], [dbo].[Users].[Password], [dbo].[Users].[Age]&quot;;
28          [Test]
29          public void TestFindEqualWithInt32()
30          {
31              var mockDatabase = new MockDatabase();
32              dynamic database = CreateDatabase(mockDatabase);
33              using (var transaction = database.BeginTransaction())
34              {
<span onclick='openModal()' class='match'>35                  transaction.Users.Find(database.Users.Id == 1);
36              }
</span>37              Assert.AreEqual((&quot;select &quot; + usersColumns + &quot; from [dbo].[users] where [dbo].[users].[id] = @p1&quot;).ToLowerInvariant(), mockDatabase.Sql.ToLowerInvariant());
38              Assert.AreEqual(1, mockDatabase.Parameters[0]);
39          }
40          [Test]
41          public void TestFindByDynamicSingleColumn()
42          {
43              var mockDatabase = new MockDatabase();
44              dynamic database = CreateDatabase(mockDatabase);
45              using (var transaction = database.BeginTransaction())
46              {
47                  transaction.Users.FindByName(&quot;Foo&quot;);
48              }
49              Assert.AreEqual((&quot;select &quot; + usersColumns + &quot; from [dbo].[Users] where [dbo].[Users].[name] = @p1&quot;).ToLowerInvariant(), mockDatabase.Sql.ToLowerInvariant());
50              Assert.AreEqual(&quot;Foo&quot;, mockDatabase.Parameters[0]);
51          }
52          [Test]
53          public void TestInsertWithNamedArguments()
54          {
55              var mockDatabase = new MockDatabase();
56              dynamic database = CreateDatabase(mockDatabase);
57              using (var transaction = database.BeginTransaction())
58              {
59                  transaction.Users.Insert(Name: &quot;Steve&quot;, Age: 50);
60                  transaction.Commit();
61              }
62              Assert.AreEqual(&quot;insert into [dbo].[Users] ([Name],[Age]) values (@p0,@p1)&quot;.ToLowerInvariant(), mockDatabase.Sql.ToLowerInvariant());
63              Assert.AreEqual(&quot;Steve&quot;, mockDatabase.Parameters[0]);
64              Assert.AreEqual(50, mockDatabase.Parameters[1]);
65              Assert.IsTrue(MockDbTransaction.CommitCalled);
66          }
67          [Test]
68          public void TestUpdateWithNamedArguments()
69          {
70              var mockDatabase = new MockDatabase();
71              dynamic database = CreateDatabase(mockDatabase);
72              using (var transaction = database.BeginTransaction())
73              {
74                  transaction.Users.UpdateById(Id: 1, Name: &quot;Steve&quot;, Age: 50);
75                  transaction.Commit();
76              }
77              Assert.AreEqual(&quot;update [dbo].[Users] set [Name] = @p1, [Age] = @p2 where [dbo].[Users].[Id] = @p3&quot;.ToLowerInvariant(), mockDatabase.Sql.ToLowerInvariant());
78              Assert.AreEqual(&quot;Steve&quot;, mockDatabase.Parameters[0]);
79              Assert.AreEqual(50, mockDatabase.Parameters[1]);
80              Assert.AreEqual(1, mockDatabase.Parameters[2]);
81              Assert.IsTrue(MockDbTransaction.CommitCalled);
82          }
83          [Test]
84          public void TestUpdateWithDynamicObject()
85          {
86              var mockDatabase = new MockDatabase();
87              dynamic database = CreateDatabase(mockDatabase);
88              dynamic record = new SimpleRecord();
89              record.Id = 1;
90              record.Name = &quot;Steve&quot;;
91              record.Age = 50;
92              using (var transaction = database.BeginTransaction())
93              {
94                  transaction.Users.Update(record);
95                  transaction.Commit();
96              }
97              Assert.AreEqual(&quot;update [dbo].[Users] set [Name] = @p1, [Age] = @p2 where [dbo].[Users].[Id] = @p3&quot;.ToLowerInvariant(), mockDatabase.Sql.ToLowerInvariant());
98              Assert.AreEqual(&quot;Steve&quot;, mockDatabase.Parameters[0]);
99              Assert.AreEqual(50, mockDatabase.Parameters[1]);
100              Assert.AreEqual(1, mockDatabase.Parameters[2]);
101              Assert.IsTrue(MockDbTransaction.CommitCalled);
102          }
103          [Test]
104          public void TestUpdateByWithDynamicObject()
105          {
106              var mockDatabase = new MockDatabase();
107              dynamic database = CreateDatabase(mockDatabase);
108              dynamic record = new SimpleRecord();
109              record.Id = 1;
110              record.Name = &quot;Steve&quot;;
111              record.Age = 50;
112              using (var transaction = database.BeginTransaction())
113              {
114                  transaction.Users.UpdateById(record);
115                  transaction.Commit();
116              }
117              Assert.AreEqual(&quot;update [dbo].[Users] set [Name] = @p1, [Age] = @p2 where [dbo].[Users].[Id] = @p3&quot;.ToLowerInvariant(), mockDatabase.Sql.ToLowerInvariant());
118              Assert.AreEqual(&quot;Steve&quot;, mockDatabase.Parameters[0]);
119              Assert.AreEqual(50, mockDatabase.Parameters[1]);
120              Assert.AreEqual(1, mockDatabase.Parameters[2]);
121              Assert.IsTrue(MockDbTransaction.CommitCalled);
122          }
123          [Test]
124          public void TestUpdateWithStaticObject()
125          {
126              var mockDatabase = new MockDatabase();
127              dynamic database = CreateDatabase(mockDatabase);
128              var user = new User
129                             {
130                                 Id = 1,
131                                 Name = &quot;Steve&quot;,
132                                 Age = 50
133                             };
134              using (var transaction = database.BeginTransaction())
135              {
136                  transaction.Users.Update(user);
137                  transaction.Commit();
138              }
139              Assert.AreEqual(&quot;update [dbo].[Users] set [Name] = @p1, [Password] = @p2, [Age] = @p3 where [dbo].[Users].[Id] = @p4&quot;.ToLowerInvariant(), mockDatabase.Sql.ToLowerInvariant());
140              Assert.AreEqual(&quot;Steve&quot;, mockDatabase.Parameters[0]);
141              Assert.AreEqual(DBNull.Value, mockDatabase.Parameters[1]);
142              Assert.AreEqual(50, mockDatabase.Parameters[2]);
143              Assert.AreEqual(1, mockDatabase.Parameters[3]);
144              Assert.IsTrue(MockDbTransaction.CommitCalled);
145          }
146          [Test]
147          public void TestBulkUpdateWithStaticObject()
148          {
149              var mockDatabase = new MockDatabase();
150              dynamic database = CreateDatabase(mockDatabase);
151              var user = new User
152                             {
153                                 Id = 1,
154                                 Name = &quot;Steve&quot;,
155                                 Age = 50
156                             };
157              var users = new[] {user};
158              using (var transaction = database.BeginTransaction())
159              {
160                  transaction.Users.Update(users);
161                  transaction.Commit();
162              }
163              Assert.AreEqual(&quot;update [dbo].[Users] set [Name] = @p1, [Password] = @p2, [Age] = @p3 where [dbo].[Users].[Id] = @p4&quot;.ToLowerInvariant(), mockDatabase.Sql.ToLowerInvariant());
164              Assert.AreEqual(&quot;Steve&quot;, mockDatabase.Parameters[0]);
165              Assert.AreEqual(DBNull.Value, mockDatabase.Parameters[1]);
166              Assert.AreEqual(50, mockDatabase.Parameters[2]);
167              Assert.AreEqual(1, mockDatabase.Parameters[3]);
168              Assert.IsTrue(MockDbTransaction.CommitCalled);
169          }
170          [Test]
171          public void TestUpdateByWithStaticObject()
172          {
173              var mockDatabase = new MockDatabase();
174              dynamic database = CreateDatabase(mockDatabase);
175              var user = new User
176                             {
177                                 Id = 1,
178                                 Name = &quot;Steve&quot;,
179                                 Age = 50
180                             };
181              using (var transaction = database.BeginTransaction())
182              {
183                  transaction.Users.UpdateById(user);
184                  transaction.Commit();
185              }
186              Assert.AreEqual(&quot;update [dbo].[Users] set [Name] = @p1, [Password] = @p2, [Age] = @p3 where [dbo].[Users].[Id] = @p4&quot;.ToLowerInvariant(), mockDatabase.Sql.ToLowerInvariant());
187              Assert.AreEqual(&quot;Steve&quot;, mockDatabase.Parameters[0]);
188              Assert.AreEqual(DBNull.Value, mockDatabase.Parameters[1]);
189              Assert.AreEqual(50, mockDatabase.Parameters[2]);
190              Assert.AreEqual(1, mockDatabase.Parameters[3]);
191              Assert.IsTrue(MockDbTransaction.CommitCalled);
192          }
193          [Test]
194          public void TestDeleteWithNamedArguments()
195          {
196              var mockDatabase = new MockDatabase();
197              dynamic database = CreateDatabase(mockDatabase);
198              using (var transaction = database.BeginTransaction())
199              {
200                  transaction.Users.Delete(Id: 1);
201                  transaction.Commit();
202              }
203              Assert.AreEqual(&quot;delete from [dbo].[Users] where [dbo].[Users].[Id] = @p1&quot;.ToLowerInvariant(), mockDatabase.Sql.ToLowerInvariant());
204              Assert.AreEqual(1, mockDatabase.Parameters[0]);
205              Assert.IsTrue(MockDbTransaction.CommitCalled);
206          }
207          [Test]
208          public void TestDeleteBy()
209          {
210              var mockDatabase = new MockDatabase();
211              dynamic database = CreateDatabase(mockDatabase);
212              using (var transaction = database.BeginTransaction())
213              {
214                  transaction.Users.DeleteById(1);
215                  transaction.Commit();
216              }
217              Assert.AreEqual(&quot;delete from [dbo].[Users] where [dbo].[Users].[Id] = @p1&quot;.ToLowerInvariant(), mockDatabase.Sql.ToLowerInvariant());
218              Assert.AreEqual(1, mockDatabase.Parameters[0]);
219              Assert.IsTrue(MockDbTransaction.CommitCalled);
220          }
221      }
222  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from Simple.Data-MDEwOlJlcG9zaXRvcnk4MTg3Njg=-flat-FindTest.cs</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from Simple.Data-MDEwOlJlcG9zaXRvcnk4MTg3Njg=-flat-TransactionTest.cs</div>
                </div>
                <div class="column column_space"><pre><code>25              _db.Users.Find(_db.Users.Id == 1);
26              GeneratedSqlIs(&quot;select &quot; + UsersColumns + &quot; from [dbo].[users] where [dbo].[users].[id] = @p1&quot;);
</pre></code></div>
                <div class="column column_space"><pre><code>35                  transaction.Users.Find(database.Users.Id == 1);
36              }
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    