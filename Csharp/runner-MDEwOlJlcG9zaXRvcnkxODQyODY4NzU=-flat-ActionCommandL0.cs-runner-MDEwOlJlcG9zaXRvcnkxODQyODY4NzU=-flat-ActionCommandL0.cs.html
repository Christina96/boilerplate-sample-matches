
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Tokens: 353, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>runner-MDEwOlJlcG9zaXRvcnkxODQyODY4NzU=-flat-ActionCommandL0.cs</h3>
            <pre><code>1  using System;
2  using System.Collections.Generic;
3  using System.Linq;
4  using Xunit;
5  namespace GitHub.Runner.Common.Tests.Worker
6  {
7      public class LoggingCommandL0
8      {
9          [Fact]
10          [Trait("Level", "L0")]
11          [Trait("Category", "LoggingCommand")]
12          public void CommandParserTest()
13          {
14              using (var hc = new TestHostContext(this))
15              {
16                  string message;
17                  ActionCommand test;
<span onclick='openModal()' class='match'>18                  ActionCommand verify;
19                  HashSet<string> commands = new() { "do-something" };
20                  message = "##[do-something k1=v1;]msg";
21                  test = new ActionCommand("do-something")
22                  {
23                      Data = "msg",
24                  };
25                  test.Properties.Add("k1", "v1");
26                  Assert.True(ActionCommand.TryParse(message, commands, out verify));
27                  Assert.True(IsEqualCommand(hc, test, verify));
28                  message = "";
29                  test = null;
30                  verify = null;
31                  message = "##[do-something]";
32                  test = new ActionCommand("do-something");
33                  Assert.True(ActionCommand.TryParse(message, commands, out verify));
34                  Assert.True(IsEqualCommand(hc, test, verify));
35                  message = "";
36                  test = null;
37                  verify = null;
38                  message = "##[do-something k1=%3B=%0D=%0A=%5D;]%3B-%0D-%0A-%5D";
39                  test = new ActionCommand("do-something")
40                  {
41                      Data = ";-\r-\n-]",
42                  };
43                  test.Properties.Add("k1", ";=\r=\n=]");
44                  Assert.True(ActionCommand.TryParse(message, commands, out verify));
45                  Assert.True(IsEqualCommand(hc, test, verify));
46                  message = "";
47                  test = null;
48                  verify = null;
49                  message = "##[do-something k1=%253B=%250D=%250A=%255D;]%253B-%250D-%250A-%255D";
50                  test = new ActionCommand("do-something")
51                  {
52                      Data = "%3B-%0D-%0A-%5D",
53                  };
54                  test.Properties.Add("k1", "%3B=%0D=%0A=%5D");
55                  Assert.True(ActionCommand.TryParse(message, commands, out verify));
56                  Assert.True(IsEqualCommand(hc, test, verify));
57                  message = "";
58                  test = null;
59                  verify = null;
60                  message = "##[do-something k1=;k2=;]";
61                  test = new ActionCommand("do-something");
62                  Assert.True(ActionCommand.TryParse(message, commands, out verify));
63                  Assert.True(IsEqualCommand(hc, test, verify));
64                  message = "";
65                  test = null;
66                  verify = null;
67                  message = ">>>   ##[do-something k1=v1;]msg";
68                  test = new ActionCommand("do-something")
69                  {
</span>70                      Data = "msg",
71                  };
72                  test.Properties.Add("k1", "v1");
73                  Assert.True(ActionCommand.TryParse(message, commands, out verify));
74                  Assert.True(IsEqualCommand(hc, test, verify));
75              }
76          }
77          [Fact]
78          [Trait("Level", "L0")]
79          [Trait("Category", "LoggingCommand")]
80          public void CommandParserV2Test()
81          {
82              using (var hc = new TestHostContext(this))
83              {
84                  string message;
85                  ActionCommand test;
86                  ActionCommand verify;
87                  HashSet<string> commands = new() { "do-something" };
88                  message = "::do-something k1=v1,::msg";
89                  test = new ActionCommand("do-something")
90                  {
91                      Data = "msg",
92                  };
93                  test.Properties.Add("k1", "v1");
94                  Assert.True(ActionCommand.TryParseV2(message, commands, out verify));
95                  Assert.True(IsEqualCommand(hc, test, verify));
96                  message = "";
97                  test = null;
98                  verify = null;
99                  message = "::do-something::";
100                  test = new ActionCommand("do-something");
101                  Assert.True(ActionCommand.TryParseV2(message, commands, out verify));
102                  Assert.True(IsEqualCommand(hc, test, verify));
103                  message = "";
104                  test = null;
105                  verify = null;
106                  message = "::do-something k1=;=%2C=%0D=%0A=]=%3A,::;-%0D-%0A-]-:-,";
107                  test = new ActionCommand("do-something")
108                  {
109                      Data = ";-\r-\n-]-:-,",
110                  };
111                  test.Properties.Add("k1", ";=,=\r=\n=]=:");
112                  Assert.True(ActionCommand.TryParseV2(message, commands, out verify));
113                  Assert.True(IsEqualCommand(hc, test, verify));
114                  message = "";
115                  test = null;
116                  verify = null;
117                  message = "::do-something k1=;=%252C=%250D=%250A=]=%253A,::;-%250D-%250A-]-:-,";
118                  test = new ActionCommand("do-something")
119                  {
120                      Data = ";-%0D-%0A-]-:-,",
121                  };
122                  test.Properties.Add("k1", ";=%2C=%0D=%0A=]=%3A");
123                  Assert.True(ActionCommand.TryParseV2(message, commands, out verify));
124                  Assert.True(IsEqualCommand(hc, test, verify));
125                  message = "";
126                  test = null;
127                  verify = null;
128                  message = "::do-something k1=,k2=,::";
129                  test = new ActionCommand("do-something");
130                  Assert.True(ActionCommand.TryParseV2(message, commands, out verify));
131                  Assert.True(IsEqualCommand(hc, test, verify));
132                  message = "";
133                  test = null;
134                  verify = null;
135                  message = "::do-something k1=v1::";
136                  test = new ActionCommand("do-something");
137                  test.Properties.Add("k1", "v1");
138                  Assert.True(ActionCommand.TryParseV2(message, commands, out verify));
139                  Assert.True(IsEqualCommand(hc, test, verify));
140                  message = "";
141                  test = null;
142                  verify = null;
143                  message = "   ::do-something k1=v1,::msg";
144                  test = new ActionCommand("do-something")
145                  {
146                      Data = "msg",
147                  };
148                  test.Properties.Add("k1", "v1");
149                  Assert.True(ActionCommand.TryParseV2(message, commands, out verify));
150                  Assert.True(IsEqualCommand(hc, test, verify));
151                  message = "";
152                  verify = null;
153                  message = "   >>>   ::do-something k1=v1,::msg";
154                  Assert.False(ActionCommand.TryParseV2(message, commands, out verify));
155              }
156          }
157          private bool IsEqualCommand(IHostContext hc, ActionCommand e1, ActionCommand e2)
158          {
159              try
160              {
161                  if (!string.Equals(e1.Command, e2.Command, StringComparison.OrdinalIgnoreCase))
162                  {
163                      hc.GetTrace("CommandEqual").Info("Command 1={0}, Command 2={1}", e1.Command, e2.Command);
164                      return false;
165                  }
166                  if (!string.Equals(e1.Data, e2.Data, StringComparison.OrdinalIgnoreCase) && (!string.IsNullOrEmpty(e1.Data) && !string.IsNullOrEmpty(e2.Data)))
167                  {
168                      hc.GetTrace("CommandEqual").Info("Data 1={0}, Data 2={1}", e1.Data, e2.Data);
169                      return false;
170                  }
171                  if (e1.Properties.Count != e2.Properties.Count)
172                  {
173                      hc.GetTrace("CommandEqual").Info("Logging events contain different numbers of Properties,{0} to {1}", e1.Properties.Count, e2.Properties.Count);
174                      return false;
175                  }
176                  if (!e1.Properties.SequenceEqual(e2.Properties))
177                  {
178                      hc.GetTrace("CommandEqual").Info("Logging events contain different Properties");
179                      hc.GetTrace("CommandEqual").Info("Properties for event 1:");
180                      foreach (var data in e1.Properties)
181                      {
182                          hc.GetTrace("CommandEqual").Info("Key={0}, Value={1}", data.Key, data.Value);
183                      }
184                      hc.GetTrace("CommandEqual").Info("Properties for event 2:");
185                      foreach (var data in e2.Properties)
186                      {
187                          hc.GetTrace("CommandEqual").Info("Key={0}, Value={1}", data.Key, data.Value);
188                      }
189                      return false;
190                  }
191              }
192              catch (Exception ex)
193              {
194                  hc.GetTrace("CommandEqual").Info("Catch Exception during compare:{0}", ex.ToString());
195                  return false;
196              }
197              return true;
198          }
199      }
200  }
</code></pre>
        </div>
        <div class="column">
            <h3>runner-MDEwOlJlcG9zaXRvcnkxODQyODY4NzU=-flat-ActionCommandL0.cs</h3>
            <pre><code>1  using System;
2  using System.Collections.Generic;
3  using System.Linq;
4  using Xunit;
5  namespace GitHub.Runner.Common.Tests.Worker
6  {
7      public class LoggingCommandL0
8      {
9          [Fact]
10          [Trait("Level", "L0")]
11          [Trait("Category", "LoggingCommand")]
12          public void CommandParserTest()
13          {
14              using (var hc = new TestHostContext(this))
15              {
16                  string message;
17                  ActionCommand test;
18                  ActionCommand verify;
19                  HashSet<string> commands = new() { "do-something" };
20                  message = "##[do-something k1=v1;]msg";
21                  test = new ActionCommand("do-something")
22                  {
23                      Data = "msg",
24                  };
25                  test.Properties.Add("k1", "v1");
26                  Assert.True(ActionCommand.TryParse(message, commands, out verify));
27                  Assert.True(IsEqualCommand(hc, test, verify));
28                  message = "";
29                  test = null;
30                  verify = null;
31                  message = "##[do-something]";
32                  test = new ActionCommand("do-something");
33                  Assert.True(ActionCommand.TryParse(message, commands, out verify));
34                  Assert.True(IsEqualCommand(hc, test, verify));
35                  message = "";
36                  test = null;
37                  verify = null;
38                  message = "##[do-something k1=%3B=%0D=%0A=%5D;]%3B-%0D-%0A-%5D";
39                  test = new ActionCommand("do-something")
40                  {
41                      Data = ";-\r-\n-]",
42                  };
43                  test.Properties.Add("k1", ";=\r=\n=]");
44                  Assert.True(ActionCommand.TryParse(message, commands, out verify));
45                  Assert.True(IsEqualCommand(hc, test, verify));
46                  message = "";
47                  test = null;
48                  verify = null;
49                  message = "##[do-something k1=%253B=%250D=%250A=%255D;]%253B-%250D-%250A-%255D";
50                  test = new ActionCommand("do-something")
51                  {
52                      Data = "%3B-%0D-%0A-%5D",
53                  };
54                  test.Properties.Add("k1", "%3B=%0D=%0A=%5D");
55                  Assert.True(ActionCommand.TryParse(message, commands, out verify));
56                  Assert.True(IsEqualCommand(hc, test, verify));
57                  message = "";
58                  test = null;
59                  verify = null;
60                  message = "##[do-something k1=;k2=;]";
61                  test = new ActionCommand("do-something");
62                  Assert.True(ActionCommand.TryParse(message, commands, out verify));
63                  Assert.True(IsEqualCommand(hc, test, verify));
64                  message = "";
65                  test = null;
66                  verify = null;
67                  message = ">>>   ##[do-something k1=v1;]msg";
68                  test = new ActionCommand("do-something")
69                  {
70                      Data = "msg",
71                  };
72                  test.Properties.Add("k1", "v1");
73                  Assert.True(ActionCommand.TryParse(message, commands, out verify));
74                  Assert.True(IsEqualCommand(hc, test, verify));
75              }
76          }
77          [Fact]
78          [Trait("Level", "L0")]
79          [Trait("Category", "LoggingCommand")]
80          public void CommandParserV2Test()
81          {
82              using (var hc = new TestHostContext(this))
83              {
84                  string message;
85                  ActionCommand test;
<span onclick='openModal()' class='match'>86                  ActionCommand verify;
87                  HashSet<string> commands = new() { "do-something" };
88                  message = "::do-something k1=v1,::msg";
89                  test = new ActionCommand("do-something")
90                  {
91                      Data = "msg",
92                  };
93                  test.Properties.Add("k1", "v1");
94                  Assert.True(ActionCommand.TryParseV2(message, commands, out verify));
95                  Assert.True(IsEqualCommand(hc, test, verify));
96                  message = "";
97                  test = null;
98                  verify = null;
99                  message = "::do-something::";
100                  test = new ActionCommand("do-something");
101                  Assert.True(ActionCommand.TryParseV2(message, commands, out verify));
102                  Assert.True(IsEqualCommand(hc, test, verify));
103                  message = "";
104                  test = null;
105                  verify = null;
106                  message = "::do-something k1=;=%2C=%0D=%0A=]=%3A,::;-%0D-%0A-]-:-,";
107                  test = new ActionCommand("do-something")
108                  {
109                      Data = ";-\r-\n-]-:-,",
110                  };
111                  test.Properties.Add("k1", ";=,=\r=\n=]=:");
112                  Assert.True(ActionCommand.TryParseV2(message, commands, out verify));
113                  Assert.True(IsEqualCommand(hc, test, verify));
114                  message = "";
115                  test = null;
116                  verify = null;
117                  message = "::do-something k1=;=%252C=%250D=%250A=]=%253A,::;-%250D-%250A-]-:-,";
118                  test = new ActionCommand("do-something")
119                  {
120                      Data = ";-%0D-%0A-]-:-,",
121                  };
122                  test.Properties.Add("k1", ";=%2C=%0D=%0A=]=%3A");
123                  Assert.True(ActionCommand.TryParseV2(message, commands, out verify));
124                  Assert.True(IsEqualCommand(hc, test, verify));
125                  message = "";
126                  test = null;
127                  verify = null;
128                  message = "::do-something k1=,k2=,::";
129                  test = new ActionCommand("do-something");
130                  Assert.True(ActionCommand.TryParseV2(message, commands, out verify));
131                  Assert.True(IsEqualCommand(hc, test, verify));
132                  message = "";
133                  test = null;
134                  verify = null;
135                  message = "::do-something k1=v1::";
136                  test = new ActionCommand("do-something");
</span>137                  test.Properties.Add("k1", "v1");
138                  Assert.True(ActionCommand.TryParseV2(message, commands, out verify));
139                  Assert.True(IsEqualCommand(hc, test, verify));
140                  message = "";
141                  test = null;
142                  verify = null;
143                  message = "   ::do-something k1=v1,::msg";
144                  test = new ActionCommand("do-something")
145                  {
146                      Data = "msg",
147                  };
148                  test.Properties.Add("k1", "v1");
149                  Assert.True(ActionCommand.TryParseV2(message, commands, out verify));
150                  Assert.True(IsEqualCommand(hc, test, verify));
151                  message = "";
152                  verify = null;
153                  message = "   >>>   ::do-something k1=v1,::msg";
154                  Assert.False(ActionCommand.TryParseV2(message, commands, out verify));
155              }
156          }
157          private bool IsEqualCommand(IHostContext hc, ActionCommand e1, ActionCommand e2)
158          {
159              try
160              {
161                  if (!string.Equals(e1.Command, e2.Command, StringComparison.OrdinalIgnoreCase))
162                  {
163                      hc.GetTrace("CommandEqual").Info("Command 1={0}, Command 2={1}", e1.Command, e2.Command);
164                      return false;
165                  }
166                  if (!string.Equals(e1.Data, e2.Data, StringComparison.OrdinalIgnoreCase) && (!string.IsNullOrEmpty(e1.Data) && !string.IsNullOrEmpty(e2.Data)))
167                  {
168                      hc.GetTrace("CommandEqual").Info("Data 1={0}, Data 2={1}", e1.Data, e2.Data);
169                      return false;
170                  }
171                  if (e1.Properties.Count != e2.Properties.Count)
172                  {
173                      hc.GetTrace("CommandEqual").Info("Logging events contain different numbers of Properties,{0} to {1}", e1.Properties.Count, e2.Properties.Count);
174                      return false;
175                  }
176                  if (!e1.Properties.SequenceEqual(e2.Properties))
177                  {
178                      hc.GetTrace("CommandEqual").Info("Logging events contain different Properties");
179                      hc.GetTrace("CommandEqual").Info("Properties for event 1:");
180                      foreach (var data in e1.Properties)
181                      {
182                          hc.GetTrace("CommandEqual").Info("Key={0}, Value={1}", data.Key, data.Value);
183                      }
184                      hc.GetTrace("CommandEqual").Info("Properties for event 2:");
185                      foreach (var data in e2.Properties)
186                      {
187                          hc.GetTrace("CommandEqual").Info("Key={0}, Value={1}", data.Key, data.Value);
188                      }
189                      return false;
190                  }
191              }
192              catch (Exception ex)
193              {
194                  hc.GetTrace("CommandEqual").Info("Catch Exception during compare:{0}", ex.ToString());
195                  return false;
196              }
197              return true;
198          }
199      }
200  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from runner-MDEwOlJlcG9zaXRvcnkxODQyODY4NzU=-flat-ActionCommandL0.cs</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from runner-MDEwOlJlcG9zaXRvcnkxODQyODY4NzU=-flat-ActionCommandL0.cs</div>
                </div>
                <div class="column column_space"><pre><code>18                  ActionCommand verify;
19                  HashSet<string> commands = new() { "do-something" };
20                  message = "##[do-something k1=v1;]msg";
21                  test = new ActionCommand("do-something")
22                  {
23                      Data = "msg",
24                  };
25                  test.Properties.Add("k1", "v1");
26                  Assert.True(ActionCommand.TryParse(message, commands, out verify));
27                  Assert.True(IsEqualCommand(hc, test, verify));
28                  message = "";
29                  test = null;
30                  verify = null;
31                  message = "##[do-something]";
32                  test = new ActionCommand("do-something");
33                  Assert.True(ActionCommand.TryParse(message, commands, out verify));
34                  Assert.True(IsEqualCommand(hc, test, verify));
35                  message = "";
36                  test = null;
37                  verify = null;
38                  message = "##[do-something k1=%3B=%0D=%0A=%5D;]%3B-%0D-%0A-%5D";
39                  test = new ActionCommand("do-something")
40                  {
41                      Data = ";-\r-\n-]",
42                  };
43                  test.Properties.Add("k1", ";=\r=\n=]");
44                  Assert.True(ActionCommand.TryParse(message, commands, out verify));
45                  Assert.True(IsEqualCommand(hc, test, verify));
46                  message = "";
47                  test = null;
48                  verify = null;
49                  message = "##[do-something k1=%253B=%250D=%250A=%255D;]%253B-%250D-%250A-%255D";
50                  test = new ActionCommand("do-something")
51                  {
52                      Data = "%3B-%0D-%0A-%5D",
53                  };
54                  test.Properties.Add("k1", "%3B=%0D=%0A=%5D");
55                  Assert.True(ActionCommand.TryParse(message, commands, out verify));
56                  Assert.True(IsEqualCommand(hc, test, verify));
57                  message = "";
58                  test = null;
59                  verify = null;
60                  message = "##[do-something k1=;k2=;]";
61                  test = new ActionCommand("do-something");
62                  Assert.True(ActionCommand.TryParse(message, commands, out verify));
63                  Assert.True(IsEqualCommand(hc, test, verify));
64                  message = "";
65                  test = null;
66                  verify = null;
67                  message = ">>>   ##[do-something k1=v1;]msg";
68                  test = new ActionCommand("do-something")
69                  {
</pre></code></div>
                <div class="column column_space"><pre><code>86                  ActionCommand verify;
87                  HashSet<string> commands = new() { "do-something" };
88                  message = "::do-something k1=v1,::msg";
89                  test = new ActionCommand("do-something")
90                  {
91                      Data = "msg",
92                  };
93                  test.Properties.Add("k1", "v1");
94                  Assert.True(ActionCommand.TryParseV2(message, commands, out verify));
95                  Assert.True(IsEqualCommand(hc, test, verify));
96                  message = "";
97                  test = null;
98                  verify = null;
99                  message = "::do-something::";
100                  test = new ActionCommand("do-something");
101                  Assert.True(ActionCommand.TryParseV2(message, commands, out verify));
102                  Assert.True(IsEqualCommand(hc, test, verify));
103                  message = "";
104                  test = null;
105                  verify = null;
106                  message = "::do-something k1=;=%2C=%0D=%0A=]=%3A,::;-%0D-%0A-]-:-,";
107                  test = new ActionCommand("do-something")
108                  {
109                      Data = ";-\r-\n-]-:-,",
110                  };
111                  test.Properties.Add("k1", ";=,=\r=\n=]=:");
112                  Assert.True(ActionCommand.TryParseV2(message, commands, out verify));
113                  Assert.True(IsEqualCommand(hc, test, verify));
114                  message = "";
115                  test = null;
116                  verify = null;
117                  message = "::do-something k1=;=%252C=%250D=%250A=]=%253A,::;-%250D-%250A-]-:-,";
118                  test = new ActionCommand("do-something")
119                  {
120                      Data = ";-%0D-%0A-]-:-,",
121                  };
122                  test.Properties.Add("k1", ";=%2C=%0D=%0A=]=%3A");
123                  Assert.True(ActionCommand.TryParseV2(message, commands, out verify));
124                  Assert.True(IsEqualCommand(hc, test, verify));
125                  message = "";
126                  test = null;
127                  verify = null;
128                  message = "::do-something k1=,k2=,::";
129                  test = new ActionCommand("do-something");
130                  Assert.True(ActionCommand.TryParseV2(message, commands, out verify));
131                  Assert.True(IsEqualCommand(hc, test, verify));
132                  message = "";
133                  test = null;
134                  verify = null;
135                  message = "::do-something k1=v1::";
136                  test = new ActionCommand("do-something");
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    