
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 4.377104377104377%, Tokens: 13</h2>
        <div class="column">
            <h3>EarTrumpet-MDEwOlJlcG9zaXRvcnkzODkxOTcwMg==-flat-BrushValueParser.cs</h3>
            <pre><code>1  using EarTrumpet.DataModel;
2  using EarTrumpet.Interop.Helpers;
3  using System;
4  using System.Collections.Generic;
5  using System.Diagnostics;
6  using System.Globalization;
7  using System.Linq;
8  using System.Windows;
9  using System.Windows.Media;
10  namespace EarTrumpet.UI.Themes
11  {
12      class BrushValueParser
13      {
14          public static SolidColorBrush Parse(DependencyObject element, string value)
15          {
16              try
17              {
18                  bool isLight = Options.GetSource(element) == Options.SourceKind.App ? SystemSettings.IsLightTheme : SystemSettings.IsSystemLightTheme;
19                  string lightOrDarkText = isLight ? "Light" : "Dark";
20                  Dictionary<string, Dictionary<string, string>> fullMap = new Dictionary<string, Dictionary<string, string>>();
21                  foreach (var commaValue in value.Split(','))
22                  {
23                      var segment = commaValue.Trim();
24                      var scope = "";
25                      if (segment.IndexOf(':') > -1)
26                      {
27                          var colonSplit = segment.Split(':');
28                          scope = colonSplit[0];
29                          segment = colonSplit[1];
30                      }
31                      if (!fullMap.ContainsKey(scope))
32                      {
33                          fullMap[scope] = new Dictionary<string, string>();
34                      }
35                      var equalsSplit = segment.Split('=');
36                      var key = equalsSplit.Length == 1 ? "" : equalsSplit[0];
37                      var color = equalsSplit.Length == 1 ? equalsSplit[0] : equalsSplit[1];
38                      fullMap[scope][key] = color;
39                  }
40                  var elementScope = Options.GetScope(element);
41                  var searchKey = "";
42                  if (fullMap.ContainsKey(elementScope))
43                  {
44                      if (fullMap[elementScope].ContainsKey(""))
45                      {
46                          searchKey = fullMap[elementScope][""];
47                      }
48                  }
49                  else
50                  {
51                      if (fullMap[""].ContainsKey(""))
52                      {
53                          searchKey = fullMap[""][""];
54                      }
55                  }
56                  if (searchKey != "")
57                  {
58                      if (FindReference(element, searchKey, out var outRef))
59                      {
60                          return outRef;
61                      }
62                  }
63                  var map = fullMap.ContainsKey(elementScope) ? fullMap[elementScope] : fullMap[""];
64                  string colorName;
65                  if (SystemParameters.HighContrast)
66                  {
67                      if (map.ContainsKey(""))
68                      {
69                          colorName = map[""];
70                      }
71                      else if (map.ContainsKey("HighContrast"))
72                      {
73                          colorName = map["HighContrast"];
<span onclick='openModal()' class='match'>74                      }
75                      else if (map.ContainsKey("Theme"))
76                      {
77                          colorName = map["Theme"].Replace("{Theme}", "Light");
78                      }
79                      else if (map.ContainsKey("Light"))
80                      {
81                          colorName = map["Light"];
</span>82                      }
83                      else
84                      {
85                          throw new NotImplementedException($"BrushValueParser: '{value}'");
86                      }
87                  }
88                  else
89                  {
90                      if (map.ContainsKey(""))
91                      {
92                          colorName = map[""];
93                      }
94                      else if (map.ContainsKey("Theme"))
95                      {
96                          colorName = map["Theme"].Replace("{Theme}", isLight ? "Light" : "Dark");
97                      }
98                      else if (map.ContainsKey("Light") && isLight)
99                      {
100                          colorName = map["Light"];
101                      }
102                      else if (map.ContainsKey("Dark") && !isLight)
103                      {
104                          colorName = map["Dark"];
105                      }
106                      else
107                      {
108                          throw new NotImplementedException($"BrushValueParser: '{value}'");
109                      }
110                  }
111                  if (FindReference(element, colorName, out var reference))
112                  {
113                      return reference;
114                  }
115                  Color ret;
116                  colorName = ParseOpacityFromColor(colorName, out var opacity);
117                  if (colorName[0] == '#')
118                  {
119                      ret = (Color)ColorConverter.ConvertFromString(colorName);
120                  }
121                  else if (!ImmersiveSystemColors.TryLookup($"Immersive{colorName}", out var color))
122                  {
123                      var info = typeof(Colors).GetProperty(colorName, System.Reflection.BindingFlags.Static | System.Reflection.BindingFlags.Public);
124                      if (info == null)
125                      {
126                          info = typeof(SystemColors).GetProperty(colorName + "Color", System.Reflection.BindingFlags.Static | System.Reflection.BindingFlags.Public);
127                      }
128                      if (info != null)
129                      {
130                          ret = (Color)info.GetValue(null, null);
131                      }
132                      else
133                      {
134                          ret = Colors.HotPink;
135                          Trace.WriteLine($"## BrushValueParser Parse FAILED ## '{value}' {element}");
136                      }
137                  }
138                  else
139                  {
140                      ret = color;
141                  }
142                  if (opacity > 0)
143                  {
144                      ret.A = (byte)(opacity * 255);
145                  }
146                  return new SolidColorBrush(ret);
147              }
148              catch (Exception ex)
149              {
150                  throw new Exception($"BrushValueParser Error: '{value}' {element}", ex);
151              }
152          }
153          private static bool FindReference(DependencyObject element, string searchKey, out SolidColorBrush outRef)
154          {
155              bool isLight = Options.GetSource(element) == Options.SourceKind.App ? SystemSettings.IsLightTheme : SystemSettings.IsSystemLightTheme;
156              var reference = Manager.Current.References.FirstOrDefault(r => r.Key == searchKey.Split('/')[0]);
157              if (reference != null)
158              {
159                  if (reference.Value != null)
160                  {
161                      outRef = Parse(element, reference.Value);
162                      return true;
163                  }
164                  else
165                  {
166                      var tab = new Dictionary<Rule.Kind, bool>();
167                      tab.Add(Rule.Kind.Any, true);
168                      tab.Add(Rule.Kind.HighContrast, SystemParameters.HighContrast);
169                      tab.Add(Rule.Kind.LightTheme, isLight);
170                      tab.Add(Rule.Kind.Transparency, SystemSettings.IsTransparencyEnabled && !SystemParameters.HighContrast);
171                      tab.Add(Rule.Kind.UseAccentColor, SystemSettings.UseAccentColor && !isLight && !SystemParameters.HighContrast);
172                      tab.Add(Rule.Kind.UseAccentColorOnWindowBorders, SystemSettings.UseAccentColorOnWindowBorders);
173                      tab.Add(Rule.Kind.AccentPolicySupportsTintColor, AccentPolicyLibrary.AccentPolicySupportsTintColor);
174                      Func<List<Rule>, string> ParseRule = null;
175                      ParseRule = ruleList =>
176                      {
177                          var ret = ruleList.Where(
178                              rule => tab[rule.On]).Select(
179                              rule => (rule.Value != null) ? rule.Value : ParseRule(rule.Rules)).FirstOrDefault();
180                          return ret != null ? ret : throw new NotImplementedException("Rule type not found");
181                      };
182                      string opacities = "";
183                      var oItems = searchKey.Split('/').Skip(1).ToArray();
184                      if (oItems.Length == 0)
185                      {
186                      }
187                      else if (oItems.Length == 1)
188                      {
189                          opacities = $"/{oItems[0]}";
190                      }
191                      else
192                      {
193                          opacities = $"/{oItems[0]}/{oItems[1]}";
194                      }
195                      outRef = Parse(element, ParseRule(reference.Rules) + opacities);
196                      return true;
197                  }
198              }
199              outRef = null;
200              return false;
201          }
202          private static string ParseOpacityFromColor(string colorName, out double desiredOpacity)
203          {
204              double opacity = 0;
205              double opacityNoTransparency = 0;
206              var parts = colorName.Split('/');
207              if (parts.Length == 1)
208              {
209              }
210              else if (parts.Length == 2)
211              {
212                  opacity = double.Parse(parts[1], CultureInfo.InvariantCulture);
213                  colorName = parts[0];
214              }
215              else if (parts.Length == 3)
216              {
217                  opacity = double.Parse(parts[1], CultureInfo.InvariantCulture);
218                  opacityNoTransparency = double.Parse(parts[2], CultureInfo.InvariantCulture);
219                  colorName = parts[0];
220              }
221              else
222              {
223                  throw new NotImplementedException("bad number of /");
224              }
225              desiredOpacity = SystemSettings.IsTransparencyEnabled && !SystemParameters.HighContrast ? opacity : (opacityNoTransparency > 0 ? opacityNoTransparency : opacity);
226              return colorName;
227          }
228      }
229  }
</code></pre>
        </div>
        <div class="column">
            <h3>Security-MDEwOlJlcG9zaXRvcnkxNzcyMzY5OQ==-flat-WsFederationHandler.cs</h3>
            <pre><code>1  using System;
2  using System.Collections.Generic;
3  using System.Linq;
4  using System.Security.Claims;
5  using System.Text.Encodings.Web;
6  using System.Threading.Tasks;
7  using Microsoft.AspNetCore.Http;
8  using Microsoft.Extensions.Logging;
9  using Microsoft.Extensions.Options;
10  using Microsoft.IdentityModel.Protocols.WsFederation;
11  using Microsoft.IdentityModel.Tokens;
12  namespace Microsoft.AspNetCore.Authentication.WsFederation
13  {
14      public class WsFederationHandler : RemoteAuthenticationHandler<WsFederationOptions>, IAuthenticationSignOutHandler
15      {
16          private const string CorrelationProperty = ".xsrf";
17          private WsFederationConfiguration _configuration;
18          public WsFederationHandler(IOptionsMonitor<WsFederationOptions> options, ILoggerFactory logger, UrlEncoder encoder, ISystemClock clock)
19              : base(options, logger, encoder, clock)
20          {
21          }
22          protected new WsFederationEvents Events
23          {
24              get { return (WsFederationEvents)base.Events; }
25              set { base.Events = value; }
26          }
27          protected override Task<object> CreateEventsAsync() => Task.FromResult<object>(new WsFederationEvents());
28          public override Task<bool> HandleRequestAsync()
29          {
30              if (Options.RemoteSignOutPath.HasValue && Options.RemoteSignOutPath == Request.Path && HttpMethods.IsGet(Request.Method)
31                  && string.Equals(Request.Query[WsFederationConstants.WsFederationParameterNames.Wa],
32                      WsFederationConstants.WsFederationActions.SignOutCleanup, StringComparison.OrdinalIgnoreCase))
33              {
34                  return HandleRemoteSignOutAsync();
35              }
36              return base.HandleRequestAsync();
37          }
38          protected override async Task HandleChallengeAsync(AuthenticationProperties properties)
39          {
40              if (_configuration == null)
41              {
42                  _configuration = await Options.ConfigurationManager.GetConfigurationAsync(Context.RequestAborted);
43              }
44              if (string.IsNullOrEmpty(properties.RedirectUri))
45              {
46                  properties.RedirectUri = OriginalPathBase + OriginalPath + Request.QueryString;
47              }
48              var wsFederationMessage = new WsFederationMessage()
49              {
50                  IssuerAddress = _configuration.TokenEndpoint ?? string.Empty,
51                  Wtrealm = Options.Wtrealm,
52                  Wa = WsFederationConstants.WsFederationActions.SignIn,
53              };
54              if (!string.IsNullOrEmpty(Options.Wreply))
55              {
56                  wsFederationMessage.Wreply = Options.Wreply;
57              }
58              else
59              {
60                  wsFederationMessage.Wreply = BuildRedirectUri(Options.CallbackPath);
61              }
62              GenerateCorrelationId(properties);
63              var redirectContext = new RedirectContext(Context, Scheme, Options, properties)
64              {
65                  ProtocolMessage = wsFederationMessage
66              };
67              await Events.RedirectToIdentityProvider(redirectContext);
68              if (redirectContext.Handled)
69              {
70                  return;
71              }
72              wsFederationMessage = redirectContext.ProtocolMessage;
73              if (!string.IsNullOrEmpty(wsFederationMessage.Wctx))
74              {
75                  properties.Items[WsFederationDefaults.UserstatePropertiesKey] = wsFederationMessage.Wctx;
76              }
77              wsFederationMessage.Wctx = Uri.EscapeDataString(Options.StateDataFormat.Protect(properties));
78              var redirectUri = wsFederationMessage.CreateSignInUrl();
79              if (!Uri.IsWellFormedUriString(redirectUri, UriKind.Absolute))
80              {
81                  Logger.MalformedRedirectUri(redirectUri);
82              }
83              Response.Redirect(redirectUri);
84          }
85          protected override async Task<HandleRequestResult> HandleRemoteAuthenticateAsync()
86          {
87              WsFederationMessage wsFederationMessage = null;
88              AuthenticationProperties properties = null;
89              if (HttpMethods.IsPost(Request.Method)
90                && !string.IsNullOrEmpty(Request.ContentType)
91                && Request.ContentType.StartsWith("application/x-www-form-urlencoded", StringComparison.OrdinalIgnoreCase)
92                && Request.Body.CanRead)
93              {
94                  var form = await Request.ReadFormAsync();
95                  wsFederationMessage = new WsFederationMessage(form.Select(pair => new KeyValuePair<string, string[]>(pair.Key, pair.Value)));
96              }
97              if (wsFederationMessage == null || !wsFederationMessage.IsSignInMessage)
98              {
99                  if (Options.SkipUnrecognizedRequests)
100                  {
101                      return HandleRequestResult.SkipHandler();
102                  }
103                  return HandleRequestResult.Fail("No message.");
104              }
105              try
106              {
107                  var state = wsFederationMessage.Wctx;
108                  properties = Options.StateDataFormat.Unprotect(state);
109                  if (properties == null)
110                  {
111                      if (!Options.AllowUnsolicitedLogins)
112                      {
113                          return HandleRequestResult.Fail("Unsolicited logins are not allowed.");
114                      }
115                  }
116                  else
117                  {
118                      properties.Items.TryGetValue(WsFederationDefaults.UserstatePropertiesKey, out var userState);
119                      wsFederationMessage.Wctx = userState;
120                  }
121                  var messageReceivedContext = new MessageReceivedContext(Context, Scheme, Options, properties)
122                  {
123                      ProtocolMessage = wsFederationMessage
124                  };
125                  await Events.MessageReceived(messageReceivedContext);
126                  if (messageReceivedContext.Result != null)
127                  {
128                      return messageReceivedContext.Result;
129                  }
130                  wsFederationMessage = messageReceivedContext.ProtocolMessage;
131                  properties = messageReceivedContext.Properties; 
132                  if (properties.Items.TryGetValue(CorrelationProperty, out string correlationId)
133                      && !ValidateCorrelationId(properties))
134                  {
135                      return HandleRequestResult.Fail("Correlation failed.", properties);
136                  }
137                  if (wsFederationMessage.Wresult == null)
138                  {
139                      Logger.SignInWithoutWresult();
140                      return HandleRequestResult.Fail(Resources.SignInMessageWresultIsMissing, properties);
141                  }
142                  var token = wsFederationMessage.GetToken();
143                  if (string.IsNullOrEmpty(token))
144                  {
145                      Logger.SignInWithoutToken();
146                      return HandleRequestResult.Fail(Resources.SignInMessageTokenIsMissing, properties);
147                  }
148                  var securityTokenReceivedContext = new SecurityTokenReceivedContext(Context, Scheme, Options, properties)
149                  {
150                      ProtocolMessage = wsFederationMessage
151                  };
152                  await Events.SecurityTokenReceived(securityTokenReceivedContext);
153                  if (securityTokenReceivedContext.Result != null)
154                  {
155                      return securityTokenReceivedContext.Result;
156                  }
157                  wsFederationMessage = securityTokenReceivedContext.ProtocolMessage;
158                  properties = messageReceivedContext.Properties;
159                  if (_configuration == null)
160                  {
161                      _configuration = await Options.ConfigurationManager.GetConfigurationAsync(Context.RequestAborted);
162                  }
163                  var tvp = Options.TokenValidationParameters.Clone();
164                  var issuers = new[] { _configuration.Issuer };
165                  tvp.ValidIssuers = (tvp.ValidIssuers == null ? issuers : tvp.ValidIssuers.Concat(issuers));
166                  tvp.IssuerSigningKeys = (tvp.IssuerSigningKeys == null ? _configuration.SigningKeys : tvp.IssuerSigningKeys.Concat(_configuration.SigningKeys));
167                  ClaimsPrincipal principal = null;
168                  SecurityToken parsedToken = null;
169                  foreach (var validator in Options.SecurityTokenHandlers)
170                  {
171                      if (validator.CanReadToken(token))
172                      {
173                          principal = validator.ValidateToken(token, tvp, out parsedToken);
174                          break;
175                      }
176                  }
177                  if (principal == null)
178                  {
179                      throw new SecurityTokenException(Resources.Exception_NoTokenValidatorFound);
180                  }
181                  if (Options.UseTokenLifetime && parsedToken != null)
182                  {
183                      var issued = parsedToken.ValidFrom;
184                      if (issued != DateTime.MinValue)
185                      {
186                          properties.IssuedUtc = issued.ToUniversalTime();
187                      }
188                      var expires = parsedToken.ValidTo;
189                      if (expires != DateTime.MinValue)
190                      {
191                          properties.ExpiresUtc = expires.ToUniversalTime();
192                      }
193                      properties.AllowRefresh = false;
194                  }
195                  var securityTokenValidatedContext = new SecurityTokenValidatedContext(Context, Scheme, Options, principal, properties)
196                  {
197                      ProtocolMessage = wsFederationMessage,
198                      SecurityToken = parsedToken,
199                  };
200                  await Events.SecurityTokenValidated(securityTokenValidatedContext);
201                  if (securityTokenValidatedContext.Result != null)
202                  {
203                      return securityTokenValidatedContext.Result;
204                  }
205                  principal = securityTokenValidatedContext.Principal;
206                  properties = securityTokenValidatedContext.Properties;
207                  return HandleRequestResult.Success(new AuthenticationTicket(principal, properties, Scheme.Name));
208              }
209              catch (Exception exception)
210              {
211                  Logger.ExceptionProcessingMessage(exception);
212                  if (Options.RefreshOnIssuerKeyNotFound && exception.GetType().Equals(typeof(SecurityTokenSignatureKeyNotFoundException)))
213                  {
214                      Options.ConfigurationManager.RequestRefresh();
215                  }
216                  var authenticationFailedContext = new AuthenticationFailedContext(Context, Scheme, Options)
217                  {
218                      ProtocolMessage = wsFederationMessage,
219                      Exception = exception
220                  };
221                  await Events.AuthenticationFailed(authenticationFailedContext);
222                  if (authenticationFailedContext.Result != null)
223                  {
224                      return authenticationFailedContext.Result;
225                  }
226                  return HandleRequestResult.Fail(exception, properties);
227              }
228          }
229          public async virtual Task SignOutAsync(AuthenticationProperties properties)
230          {
231              var target = ResolveTarget(Options.ForwardSignOut);
232              if (target != null)
233              {
234                  await Context.SignOutAsync(target, properties);
235                  return;
236              }
237              if (_configuration == null)
238              {
239                  _configuration = await Options.ConfigurationManager.GetConfigurationAsync(Context.RequestAborted);
240              }
241              var wsFederationMessage = new WsFederationMessage()
242              {
243                  IssuerAddress = _configuration.TokenEndpoint ?? string.Empty,
244                  Wtrealm = Options.Wtrealm,
245                  Wa = WsFederationConstants.WsFederationActions.SignOut,
246              };
247              if (properties != null && !string.IsNullOrEmpty(properties.RedirectUri))
248              {
249                  wsFederationMessage.Wreply = BuildRedirectUriIfRelative(properties.RedirectUri);
<span onclick='openModal()' class='match'>250              }
251              else if (!string.IsNullOrEmpty(Options.SignOutWreply))
252              {
253                  wsFederationMessage.Wreply = BuildRedirectUriIfRelative(Options.SignOutWreply);
254              }
255              else if (!string.IsNullOrEmpty(Options.Wreply))
256              {
257                  wsFederationMessage.Wreply = BuildRedirectUriIfRelative(Options.Wreply);
</span>258              }
259              var redirectContext = new RedirectContext(Context, Scheme, Options, properties)
260              {
261                  ProtocolMessage = wsFederationMessage
262              };
263              await Events.RedirectToIdentityProvider(redirectContext);
264              if (!redirectContext.Handled)
265              {
266                  var redirectUri = redirectContext.ProtocolMessage.CreateSignOutUrl();
267                  if (!Uri.IsWellFormedUriString(redirectUri, UriKind.Absolute))
268                  {
269                      Logger.MalformedRedirectUri(redirectUri);
270                  }
271                  Response.Redirect(redirectUri);
272              }
273          }
274          protected virtual async Task<bool> HandleRemoteSignOutAsync()
275          {
276              var message = new WsFederationMessage(Request.Query.Select(pair => new KeyValuePair<string, string[]>(pair.Key, pair.Value)));
277              var remoteSignOutContext = new RemoteSignOutContext(Context, Scheme, Options, message);
278              await Events.RemoteSignOut(remoteSignOutContext);
279              if (remoteSignOutContext.Result != null)
280              {
281                  if (remoteSignOutContext.Result.Handled)
282                  {
283                      Logger.RemoteSignOutHandledResponse();
284                      return true;
285                  }
286                  if (remoteSignOutContext.Result.Skipped)
287                  {
288                      Logger.RemoteSignOutSkipped();
289                      return false;
290                  }
291              }
292              Logger.RemoteSignOut();
293              await Context.SignOutAsync(Options.SignOutScheme);
294              return true;
295          }
296          private string BuildRedirectUriIfRelative(string uri)
297          {
298              if (string.IsNullOrEmpty(uri))
299              {
300                  return uri;
301              }
302              if (!uri.StartsWith("/", StringComparison.Ordinal))
303              {
304                  return uri;
305              }
306              return BuildRedirectUri(uri);
307          }
308      }
309  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from EarTrumpet-MDEwOlJlcG9zaXRvcnkzODkxOTcwMg==-flat-BrushValueParser.cs</div>
                <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from Security-MDEwOlJlcG9zaXRvcnkxNzcyMzY5OQ==-flat-WsFederationHandler.cs</div>
                <div class="column column_space"><pre><code>74                      }
75                      else if (map.ContainsKey("Theme"))
76                      {
77                          colorName = map["Theme"].Replace("{Theme}", "Light");
78                      }
79                      else if (map.ContainsKey("Light"))
80                      {
81                          colorName = map["Light"];
</pre></code></div>
                <div class="column column_space"><pre><code>250              }
251              else if (!string.IsNullOrEmpty(Options.SignOutWreply))
252              {
253                  wsFederationMessage.Wreply = BuildRedirectUriIfRelative(Options.SignOutWreply);
254              }
255              else if (!string.IsNullOrEmpty(Options.Wreply))
256              {
257                  wsFederationMessage.Wreply = BuildRedirectUriIfRelative(Options.Wreply);
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    