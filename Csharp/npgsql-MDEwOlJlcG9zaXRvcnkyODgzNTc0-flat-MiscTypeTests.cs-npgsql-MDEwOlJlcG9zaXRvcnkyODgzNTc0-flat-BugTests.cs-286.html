
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Tokens: 19, <button onclick='openModal()' class='match'>CODE CLONE</button></h2>
        <div class="column">
            <h3>npgsql-MDEwOlJlcG9zaXRvcnkyODgzNTc0-flat-MiscTypeTests.cs</h3>
            <pre><code>1  using System;
2  using System.Data;
3  using System.Threading.Tasks;
4  using Npgsql.Properties;
5  using NpgsqlTypes;
6  using NUnit.Framework;
7  using NUnit.Framework.Constraints;
8  namespace Npgsql.Tests.Types;
9  class MiscTypeTests : MultiplexingTestBase
10  {
11      [Test]
12      public async Task Boolean()
13      {
14          await AssertType(true, &quot;true&quot;, &quot;boolean&quot;, NpgsqlDbType.Boolean, DbType.Boolean);
15          await AssertType(false, &quot;false&quot;, &quot;boolean&quot;, NpgsqlDbType.Boolean, DbType.Boolean);
16      }
17      [Test]
18      public Task Uuid()
19          =&gt; AssertType(
20              new Guid(&quot;a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11&quot;),
21              &quot;a0eebc99-9c0b-4ef8-bb6d-6bb9bd380a11&quot;,
22              &quot;uuid&quot;, NpgsqlDbType.Uuid, DbType.Guid);
23      [Test, Description(&quot;Makes sure that the PostgreSQL &#x27;unknown&#x27; type (OID 705) is read properly&quot;)]
24      public async Task Read_unknown()
25      {
26          const string expected = &quot;some_text&quot;;
27          await using var conn = await OpenConnectionAsync();
28          await using var cmd = new NpgsqlCommand($&quot;SELECT &#x27;{expected}&#x27;&quot;, conn);
29          await using var reader = await cmd.ExecuteReaderAsync();
30          reader.Read();
31          Assert.That(reader.GetString(0), Is.EqualTo(expected));
32          Assert.That(reader.GetValue(0), Is.EqualTo(expected));
33          Assert.That(reader.GetFieldValue&lt;char[]&gt;(0), Is.EqualTo(expected.ToCharArray()));
34          Assert.That(reader.GetFieldType(0), Is.EqualTo(typeof(string)));
35      }
36      [Test]
37      public async Task Null()
38      {
39          await using var conn = await OpenConnectionAsync();
40          await using (var cmd = new NpgsqlCommand(&quot;SELECT @p1::TEXT, @p2::TEXT, @p3::TEXT&quot;, conn))
41          {
42              cmd.Parameters.AddWithValue(&quot;p1&quot;, DBNull.Value);
43              cmd.Parameters.Add(new NpgsqlParameter&lt;string?&gt;(&quot;p2&quot;, null));
44              cmd.Parameters.Add(new NpgsqlParameter&lt;DBNull&gt;(&quot;p3&quot;, DBNull.Value));
45              await using var reader = await cmd.ExecuteReaderAsync();
46              reader.Read();
47              for (var i = 0; i &lt; cmd.Parameters.Count; i++)
48              {
49                  Assert.That(reader.IsDBNull(i));
50                  Assert.That(reader.GetFieldType(i), Is.EqualTo(typeof(string)));
51              }
52          }
53          await using (var cmd = new NpgsqlCommand(&quot;SELECT @p::TEXT&quot;, conn))
54          {
55              cmd.Parameters.AddWithValue(&quot;p4&quot;, NpgsqlDbType.Text, null!);
56              Assert.That(async () =&gt; await cmd.ExecuteReaderAsync(), Throws.Exception.TypeOf&lt;InvalidCastException&gt;());
57          }
58      }
59      #region Record
60      [Test]
61      [IssueLink(&quot;https:&amp;bsol;&amp;bsol;github.com/npgsql/npgsql/issues/724&quot;)]
62      [IssueLink(&quot;https:&amp;bsol;&amp;bsol;github.com/npgsql/npgsql/issues/1980&quot;)]
63      public async Task Read_Record_as_object_array()
64      {
65          var recordLiteral = &quot;(1,&#x27;foo&#x27;::text)::record&quot;;
66          await using var conn = await OpenConnectionAsync();
67          await using var cmd = new NpgsqlCommand($&quot;SELECT {recordLiteral}, ARRAY[{recordLiteral}, {recordLiteral}]&quot;, conn);
68          await using var reader = await cmd.ExecuteReaderAsync();
69          reader.Read();
70          var record = (object[])reader[0];
71          Assert.That(record[0], Is.EqualTo(1));
72          Assert.That(record[1], Is.EqualTo(&quot;foo&quot;));
73          var array = (object[][])reader[1];
74          Assert.That(array.Length, Is.EqualTo(2));
75          Assert.That(array[0][0], Is.EqualTo(1));
76          Assert.That(array[1][0], Is.EqualTo(1));
77      }
78      [Test]
79      public async Task Read_Record_as_ValueTuple()
80      {
81          var recordLiteral = &quot;(1,&#x27;foo&#x27;::text)::record&quot;;
82          await using var conn = await OpenConnectionAsync();
83          await using var cmd = new NpgsqlCommand($&quot;SELECT {recordLiteral}, ARRAY[{recordLiteral}, {recordLiteral}]&quot;, conn);
84          await using var reader = await cmd.ExecuteReaderAsync();
85          reader.Read();
86          var record = reader.GetFieldValue&lt;(int, string)&gt;(0);
87          Assert.That(record.Item1, Is.EqualTo(1));
88          Assert.That(record.Item2, Is.EqualTo(&quot;foo&quot;));
89          var array = (object[][])reader[1];
90          Assert.That(array.Length, Is.EqualTo(2));
91          Assert.That(array[0][0], Is.EqualTo(1));
92          Assert.That(array[1][0], Is.EqualTo(1));
93      }
94      [Test]
95      public async Task Read_Record_as_Tuple()
96      {
97          var recordLiteral = &quot;(1,&#x27;foo&#x27;::text)::record&quot;;
98          await using var conn = await OpenConnectionAsync();
99          await using var cmd = new NpgsqlCommand($&quot;SELECT {recordLiteral}, ARRAY[{recordLiteral}, {recordLiteral}]&quot;, conn);
100          await using var reader = await cmd.ExecuteReaderAsync();
101          reader.Read();
102          var record = reader.GetFieldValue&lt;Tuple&lt;int, string&gt;&gt;(0);
103          Assert.That(record.Item1, Is.EqualTo(1));
104          Assert.That(record.Item2, Is.EqualTo(&quot;foo&quot;));
105          var array = (object[][])reader[1];
106          Assert.That(array.Length, Is.EqualTo(2));
107          Assert.That(array[0][0], Is.EqualTo(1));
108          Assert.That(array[1][0], Is.EqualTo(1));
109      }
110      [Test]
111      public Task Write_Record_is_not_supported()
112          =&gt; AssertTypeUnsupportedWrite&lt;object[], NotSupportedException&gt;(new object[] { 1, &quot;foo&quot; }, &quot;record&quot;);
113      [Test]
114      public async Task Records_supported_only_with_EnableRecords([Values] bool withMappings)
115      {
116          Func&lt;IResolveConstraint&gt; assertExpr = () =&gt; withMappings
117              ? Throws.Nothing
118              : Throws.Exception
119                  .TypeOf&lt;NotSupportedException&gt;()
120                  .With.Property(&quot;Message&quot;)
121                  .EqualTo(string.Format(NpgsqlStrings.RecordsNotEnabled, &quot;EnableRecords&quot;, &quot;NpgsqlSlimDataSourceBuilder&quot;));
122          var dataSourceBuilder = new NpgsqlSlimDataSourceBuilder(ConnectionString);
123          if (withMappings)
124              dataSourceBuilder.EnableRecords();
125          await using var dataSource = dataSourceBuilder.Build();
126          await using var conn = await dataSource.OpenConnectionAsync();
127          await using var cmd = conn.CreateCommand();
128          cmd.CommandText = &quot;SELECT (&#x27;one&#x27;::text, 2)&quot;;
129          await using var reader = await cmd.ExecuteReaderAsync();
130          await reader.ReadAsync();
131          Assert.That(() =&gt; reader.GetValue(0), assertExpr());
132          Assert.That(() =&gt; reader.GetFieldValue&lt;object[]&gt;(0), assertExpr());
133      }
134      #endregion Record
135      [Test, Description(&quot;Makes sure that setting DbType.Object makes Npgsql infer the type&quot;)]
136      [IssueLink(&quot;https:&amp;bsol;&amp;bsol;github.com/npgsql/npgsql/issues/694&quot;)]
137      public async Task DbType_causes_inference()
138      {
139          await using var conn = await OpenConnectionAsync();
140          await using var cmd = new NpgsqlCommand(&quot;SELECT @p&quot;, conn);
141          cmd.Parameters.Add(new NpgsqlParameter { ParameterName=&quot;p&quot;, DbType = DbType.Object, Value = 3 });
142          Assert.That(await cmd.ExecuteScalarAsync(), Is.EqualTo(3));
143      }
144      #region Unrecognized types
145      [Test, Description(&quot;Retrieves a type as an unknown type, i.e. untreated string&quot;)]
146      public async Task AllResultTypesAreUnknown()
147      {
148          await using var conn = await OpenConnectionAsync();
149          await using var cmd = new NpgsqlCommand(&quot;SELECT TRUE&quot;, conn);
150          cmd.AllResultTypesAreUnknown = true;
151          await using var reader = await cmd.ExecuteReaderAsync();
152          reader.Read();
153          Assert.That(reader.GetFieldType(0), Is.EqualTo(typeof(string)));
154          Assert.That(reader.GetString(0), Is.EqualTo(&quot;t&quot;));
155      }
156      [Test, Description(&quot;Mixes and matches an unknown type with a known type&quot;)]
157      public async Task UnknownResultTypeList()
158      {
159          if (IsMultiplexing)
160              return;
161          await using var conn = await OpenConnectionAsync();
162          await using var cmd = new NpgsqlCommand(&quot;SELECT TRUE, 8&quot;, conn);
163          cmd.UnknownResultTypeList = new[] { true, false };
164          await using var reader = await cmd.ExecuteReaderAsync();
165          reader.Read();
166          Assert.That(reader.GetFieldType(0), Is.EqualTo(typeof(string)));
167          Assert.That(reader.GetString(0), Is.EqualTo(&quot;t&quot;));
168          Assert.That(reader.GetInt32(1), Is.EqualTo(8));
169      }
170      [Test, IssueLink(&quot;https:&amp;bsol;&amp;bsol;github.com/npgsql/npgsql/issues/711&quot;)]
171      public async Task Known_type_as_unknown()
172      {
173          await using var conn = await OpenConnectionAsync();
174          await using var cmd = new NpgsqlCommand(&quot;SELECT 8&quot;, conn);
175          cmd.AllResultTypesAreUnknown = true;
176          Assert.That(await cmd.ExecuteScalarAsync(), Is.EqualTo(&quot;8&quot;));
177      }
178      [Test, Description(&quot;Sends a null value parameter with no NpgsqlDbType or DbType, but with context for the backend to handle it&quot;)]
179      public async Task Unrecognized_null()
180      {
181          await using var conn = await OpenConnectionAsync();
182          await using var cmd = new NpgsqlCommand(&quot;SELECT @p::TEXT&quot;, conn);
183          var p = new NpgsqlParameter(&quot;p&quot;, DBNull.Value);
184          cmd.Parameters.Add(p);
185          await using var reader = await cmd.ExecuteReaderAsync();
186          reader.Read();
187          Assert.That(reader.IsDBNull(0));
188          Assert.That(reader.GetFieldType(0), Is.EqualTo(typeof(string)));
189      }
190      [Test, Description(&quot;Sends a value parameter with an explicit NpgsqlDbType.Unknown, but with context for the backend to handle it&quot;)]
191      public async Task Send_unknown()
192      {
193          await using var conn = await OpenConnectionAsync();
194          await using var cmd = new NpgsqlCommand(&quot;SELECT @p::INT4&quot;, conn);
195          var p = new NpgsqlParameter(&quot;p&quot;, &quot;8&quot;);
196          cmd.Parameters.Add(p);
197          await using var reader = await cmd.ExecuteReaderAsync();
198          reader.Read();
199          Assert.That(reader.GetFieldType(0), Is.EqualTo(typeof(int)));
<span onclick='openModal()' class='match'>200          Assert.That(reader.GetInt32(0), Is.EqualTo(8));
201      }
</span>202      #endregion
203      [Test]
204      public Task Int2Vector()
205          =&gt; AssertType(new short[] { 4, 5, 6 }, &quot;4 5 6&quot;, &quot;int2vector&quot;, NpgsqlDbType.Int2Vector, isDefault: false);
206      [Test]
207      public Task Oidvector()
208          =&gt; AssertType(new uint[] { 4, 5, 6 }, &quot;4 5 6&quot;, &quot;oidvector&quot;, NpgsqlDbType.Oidvector, isDefault: false);
209      [Test, IssueLink(&quot;https:&amp;bsol;&amp;bsol;github.com/npgsql/npgsql/issues/1138&quot;)]
210      public async Task Void()
211      {
212          await using var conn = await OpenConnectionAsync();
213          Assert.That(await conn.ExecuteScalarAsync(&quot;SELECT pg_sleep(0)&quot;), Is.SameAs(DBNull.Value));
214      }
215      [Test, IssueLink(&quot;https:&amp;bsol;&amp;bsol;github.com/npgsql/npgsql/issues/1364&quot;)]
216      public async Task Unsupported_DbType()
217      {
218          await using var conn = await OpenConnectionAsync();
219          await using var cmd = new NpgsqlCommand(&quot;SELECT @p&quot;, conn);
220          Assert.That(() =&gt; cmd.Parameters.Add(new NpgsqlParameter(&quot;p&quot;, DbType.UInt32) { Value = 8u }),
221              Throws.Exception.TypeOf&lt;NotSupportedException&gt;());
222      }
223      public MiscTypeTests(MultiplexingMode multiplexingMode) : base(multiplexingMode) {}
224  }
</code></pre>
        </div>
        <div class="column">
            <h3>npgsql-MDEwOlJlcG9zaXRvcnkyODgzNTc0-flat-BugTests.cs</h3>
            <pre><code>1  using Npgsql.BackendMessages;
2  using Npgsql.Tests.Support;
3  using Npgsql.TypeMapping;
4  using NpgsqlTypes;
5  using NUnit.Framework;
6  using System;
7  using System.Data;
8  using System.Text;
9  using System.Threading;
10  using System.Threading.Tasks;
11  using System.Transactions;
12  using static Npgsql.Tests.TestUtil;
13  namespace Npgsql.Tests;
14  public class BugTests : TestBase
15  {
16      #region Sequential reader bugs
17      [Test, Description(&quot;In sequential access, performing a null check on a non-first field would check the first field&quot;)]
18      public void SequentialNullCheckOnNonFirstField()
19      {
20          using var conn = OpenConnection();
21          using var cmd = new NpgsqlCommand(&quot;SELECT &#x27;X&#x27;, NULL&quot;, conn);
22          using var dr = cmd.ExecuteReader(CommandBehavior.SequentialAccess);
23          dr.Read();
24          Assert.That(dr.IsDBNull(1), Is.True);
25      }
26      [Test, IssueLink(&quot;https:&amp;bsol;&amp;bsol;github.com/npgsql/npgsql/issues/1034&quot;)]
27      public void SequentialSkipOverFirstRow()
28      {
29          using var conn = OpenConnection();
30          using var cmd = new NpgsqlCommand(&quot;SELECT 1; SELECT 2&quot;, conn);
31          using var reader = cmd.ExecuteReader(CommandBehavior.SequentialAccess);
32          Assert.That(reader.NextResult(), Is.True);
33          Assert.That(reader.Read(), Is.True);
34          Assert.That(reader.GetInt32(0), Is.EqualTo(2));
35      }
36      [Test]
37      public void SequentialConsumeWithNull()
38      {
39          using var conn = OpenConnection();
40          using var command = new NpgsqlCommand(&quot;SELECT 1, NULL&quot;, conn);
41          using var reader = command.ExecuteReader(CommandBehavior.SequentialAccess);
42          reader.Read();
43      }
44      #endregion
45      [Test, IssueLink(&quot;https:&amp;bsol;&amp;bsol;github.com/npgsql/npgsql/issues/1210&quot;)]
46      public void Many_parameters_with_mixed_FormatCode()
47      {
48          using var conn = OpenConnection();
49          using var cmd = new NpgsqlCommand();
50          cmd.Connection = conn;
51          var sb = new StringBuilder(&quot;SELECT @text_param&quot;);
52          cmd.Parameters.AddWithValue(&quot;@text_param&quot;, &quot;some_text&quot;);
53          for (var i = 0; i &lt; conn.Settings.WriteBufferSize; i++)
54          {
55              var paramName = $&quot;@binary_param{i}&quot;;
56              sb.Append(&#x27;,&#x27;);
57              sb.Append(paramName);
58              cmd.Parameters.AddWithValue(paramName, 8);
59          }
60          cmd.CommandText = sb.ToString();
61          var ex = Assert.Throws&lt;PostgresException&gt;(() =&gt; cmd.ExecuteNonQuery())!;
62          Assert.That(ex.SqlState, Is.EqualTo(PostgresErrorCodes.ProgramLimitExceeded)
63              .Or.EqualTo(PostgresErrorCodes.TooManyColumns)); 
64      }
65      [Test, IssueLink(&quot;https:&amp;bsol;&amp;bsol;github.com/npgsql/npgsql/issues/1238&quot;)]
66      public void Record_with_non_int_field()
67      {
68          using var conn = OpenConnection();
69          using var cmd = new NpgsqlCommand(&quot;SELECT (&#x27;one&#x27;::TEXT, 2)&quot;, conn);
70          using var reader = cmd.ExecuteReader();
71          reader.Read();
72          var record = reader.GetFieldValue&lt;object[]&gt;(0);
73          Assert.That(record[0], Is.EqualTo(&quot;one&quot;));
74          Assert.That(record[1], Is.EqualTo(2));
75      }
76      [Test, IssueLink(&quot;https:&amp;bsol;&amp;bsol;github.com/npgsql/npgsql/issues/1450&quot;)]
77      public void Bug1450()
78      {
79          using var conn = OpenConnection();
80          using var cmd = new NpgsqlCommand();
81          cmd.Connection = conn;
82          cmd.CommandText = &quot;CREATE TEMP TABLE a (a1 int); CREATE TEMP TABLE b (b1 int);&quot;;
83          cmd.ExecuteNonQuery();
84          cmd.CommandText = &quot;CREATE TEMP TABLE c (c1 int);&quot;;
85          cmd.ExecuteNonQuery();
86      }
87      [Test]
88      public async Task Bug1645()
89      {
90          await using var conn = await OpenConnectionAsync();
91          var tableName = await CreateTempTable(conn, &quot;field_text TEXT, field_int2 SMALLINT, field_int4 INTEGER&quot;);
92          Assert.That(() =&gt;
93              {
94                  using var writer = conn.BeginBinaryImport($&quot;COPY {tableName} (field_text, field_int4) FROM STDIN BINARY&quot;);
95                  writer.StartRow();
96                  writer.Write(&quot;foo&quot;);
97                  writer.Write(8);
98                  writer.StartRow();
99                  throw new InvalidOperationException(&quot;Catch me outside the using statement if you can!&quot;);
100              }, Throws.Exception
101                  .TypeOf&lt;InvalidOperationException&gt;()
102                  .With.Property(nameof(InvalidOperationException.Message)).EqualTo(&quot;Catch me outside the using statement if you can!&quot;)
103          );
104          Assert.That(await conn.ExecuteScalarAsync($&quot;SELECT COUNT(*) FROM {tableName}&quot;), Is.Zero);
105      }
106      [Test, IssueLink(&quot;https:&amp;bsol;&amp;bsol;github.com/npgsql/npgsql/issues/3600&quot;)]
107      public async Task Bug3600()
108      {
109          var csb = new NpgsqlConnectionStringBuilder(ConnectionString)
110          {
111              CommandTimeout = 1,
112          };
113          await using var postmasterMock = PgPostmasterMock.Start(csb.ConnectionString);
114          await using var dataSource = CreateDataSource(postmasterMock.ConnectionString);
115          await using var conn = await dataSource.OpenConnectionAsync();
116          var serverMock = await postmasterMock.WaitForServerConnection();
117          await serverMock
118              .WriteCopyInResponse()
119              .FlushAsync();
120          var ex = Assert.ThrowsAsync&lt;NpgsqlException&gt;(async () =&gt;
121          {
122              await using var importer = await conn.BeginTextImportAsync($&quot;COPY SomeTable (field_text, field_int4) FROM STDIN&quot;);
123          });
124          Assert.That(ex!.InnerException, Is.TypeOf&lt;TimeoutException&gt;());
125      }
126      [Test, IssueLink(&quot;https:&amp;bsol;&amp;bsol;github.com/npgsql/npgsql/issues/1497&quot;)]
127      public async Task Bug1497()
128      {
129          await using var conn = await OpenConnectionAsync();
130          var tableName = await CreateTempTable(conn, &quot;id INT4&quot;);
131          conn.ExecuteNonQuery($&quot;INSERT INTO {tableName} (id) VALUES (NULL)&quot;);
132          await using var cmd = new NpgsqlCommand($&quot;SELECT * FROM {tableName}&quot;, conn);
133          await using var reader = await cmd.ExecuteReaderAsync();
134          var dt = new DataTable();
135          dt.Load(reader);
136      }
137      [Test, IssueLink(&quot;https:&amp;bsol;&amp;bsol;github.com/npgsql/npgsql/issues/1558&quot;)]
138      public void Bug1558()
139      {
140          using var dataSource = CreateDataSource(csb =&gt;
141          {
142              csb.Pooling = false;
143              csb.Enlist = true;
144          });
145          using var tx = new TransactionScope();
146          using var conn = dataSource.OpenConnection();
147      }
148      [Test]
149      public void Bug1695()
150      {
151          using var dataSource = CreateDataSource(csb =&gt;
152          {
153              csb.Pooling = false;
154              csb.MaxAutoPrepare = 10;
155              csb.AutoPrepareMinUsages = 1;
156          });
157          using var conn = dataSource.OpenConnection();
158          using (var cmd = new NpgsqlCommand(&quot;SELECT 1; SELECT 2&quot;, conn))
159          using (var reader = cmd.ExecuteReader())
160          {
161              reader.Read();
162          }
163          Assert.That(conn.ExecuteScalar(&quot;SELECT 2&quot;), Is.EqualTo(2));
164      }
165      [Test, IssueLink(&quot;https:&amp;bsol;&amp;bsol;github.com/npgsql/npgsql/issues/1700&quot;)]
166      public void Bug1700()
167      {
168          Assert.That(() =&gt;
169          {
170              using var conn = OpenConnection();
171              using var tx = conn.BeginTransaction();
172              using var cmd = conn.CreateCommand();
173              cmd.CommandText = &quot;SELECT 1&quot;;
174              var reader = cmd.ExecuteReader();
175              while (reader.Read())
176              {
177                  throw new InvalidOperationException(&quot;Some problem parsing the returned data&quot;);
178              }
179              tx.Commit();
180          }, Throws.InvalidOperationException.With.Message.EqualTo(&quot;Some problem parsing the returned data&quot;));
181      }
182      [Test, IssueLink(&quot;https:&amp;bsol;&amp;bsol;github.com/npgsql/npgsql/issues/1964&quot;)]
183      public void Bug1964()
184      {
185          using var conn = OpenConnection();
186          using var cmd = new NpgsqlCommand(&quot;INVALID SQL&quot;, conn);
187          cmd.Parameters.Add(new NpgsqlParameter { ParameterName = &quot;p&quot;, Direction = ParameterDirection.Output });
188          Assert.That(() =&gt; cmd.ExecuteNonQuery(), Throws.Exception.TypeOf&lt;PostgresException&gt;()
189              .With.Property(nameof(PostgresException.SqlState)).EqualTo(PostgresErrorCodes.SyntaxError));
190      }
191      [Test, IssueLink(&quot;https:&amp;bsol;&amp;bsol;github.com/npgsql/npgsql/issues/1986&quot;)]
192      public void Bug1986()
193      {
194          using var conn = OpenConnection();
195          using var cmd = new NpgsqlCommand(&quot;SELECT &#x27;hello&#x27;, &#x27;goodbye&#x27;&quot;, conn);
196          using var reader = cmd.ExecuteReader();
197          reader.Read();
198          using (var textReader1 = reader.GetTextReader(0))
199          {
200          }
201          using (var textReader2 = reader.GetTextReader(1))
202          {
203          }
204      }
205      [Test, IssueLink(&quot;https:&amp;bsol;&amp;bsol;github.com/npgsql/npgsql/issues/1987&quot;)]
206      public async Task Bug1987()
207      {
208          await using var adminConnection = await OpenConnectionAsync();
209          var type = await GetTempTypeName(adminConnection);
210          await adminConnection.ExecuteNonQueryAsync($&quot;CREATE TYPE {type} AS ENUM (&#x27;sad&#x27;, &#x27;ok&#x27;, &#x27;happy&#x27;)&quot;);
211          var dataSourceBuilder = CreateDataSourceBuilder();
212          dataSourceBuilder.MapEnum&lt;Mood&gt;(type);
213          await using var dataSource = dataSourceBuilder.Build();
214          await using var connection = await dataSource.OpenConnectionAsync();
215          for (var i = 0; i &lt; 2; i++)
216          {
217              await using var cmd = new NpgsqlCommand(&quot;SELECT @p&quot;, connection);
218              cmd.Parameters.AddWithValue(&quot;p&quot;, Mood.Happy);
219              Assert.That(await cmd.ExecuteScalarAsync(), Is.EqualTo(Mood.Happy));
220          }
221      }
222      enum Mood { Sad, Ok, Happy };
223      [Test, IssueLink(&quot;https:&amp;bsol;&amp;bsol;github.com/npgsql/npgsql/issues/2003&quot;)]
224      public void Bug2003()
225      {
226          using var conn = OpenConnection();
227          var longFieldName = new string(&#x27;x&#x27;, conn.Settings.ReadBufferSize);
228          using var cmd = new NpgsqlCommand($&quot;SELECT 8 AS {longFieldName}&quot;, conn);
229          using var reader = cmd.ExecuteReader(CommandBehavior.SequentialAccess);
230          reader.Read();
<span onclick='openModal()' class='match'>231          Assert.That(reader.GetInt32(0), Is.EqualTo(8));
232      }
</span>233      [Test]
234      public async Task Bug2046()
235      {
236          var expected = 64.27245f;
237          using var conn = OpenConnection();
238          using var cmd = new NpgsqlCommand(&quot;SELECT @p = 64.27245::real, 64.27245::real, @p&quot;, conn);
239          cmd.Parameters.AddWithValue(&quot;p&quot;, expected);
240          using var rdr = await cmd.ExecuteReaderAsync();
241          rdr.Read();
242          Assert.That(rdr.GetFieldValue&lt;bool&gt;(0));
243          Assert.That(rdr.GetFieldValue&lt;float&gt;(1), Is.EqualTo(expected));
244          Assert.That(rdr.GetFieldValue&lt;float&gt;(2), Is.EqualTo(expected));
245      }
246      [Test]
247      public void Bug1761()
248      {
249          using var dataSource = CreateDataSource(csb =&gt;
250          {
251              csb.Enlist = true;
252              csb.Pooling = true;
253              csb.MinPoolSize = 1;
254              csb.MaxPoolSize = 1;
255          });
256          for (var i = 0; i &lt; 2; i++)
257          {
258              try
259              {
260                  using var scope = new TransactionScope(TransactionScopeOption.Required, TimeSpan.FromMilliseconds(100));
261                  Thread.Sleep(1000);
262                  using (var connection = dataSource.OpenConnection())
263                  using (var cmd = new NpgsqlCommand(&quot;SELECT 1&quot;, connection))
264                  {
265                      cmd.CommandText = &quot;select 1;&quot;;
266                      cmd.ExecuteNonQuery();
267                  }
268                  scope.Complete();
269              }
270              catch (TransactionException)
271              {
272              }
273          }
274      }
275      [Test]
276      public void Bug2274()
277      {
278          using var conn = OpenConnection();
279          using var cmd = new NpgsqlCommand(&quot;SELECT 1&quot;, conn);
280          cmd.Parameters.Add(new NpgsqlParameter
281          {
282              ParameterName = &quot;p&quot;,
283              Direction = ParameterDirection.Output
284          });
285          using var reader = cmd.ExecuteReader(CommandBehavior.SingleRow);
286          Assert.That(() =&gt; reader.GetInt32(0), Throws.Exception.TypeOf&lt;InvalidOperationException&gt;());
287          Assert.That(reader.Read(), Is.True);
288          Assert.That(reader.GetInt32(0), Is.EqualTo(1));
289          Assert.That(reader.Read(), Is.False);
290      }
291      [Test]
292      public async Task Bug2278()
293      {
294          await using var adminConnection = await OpenConnectionAsync();
295          var enumType = await GetTempTypeName(adminConnection);
296          var domainType = await GetTempTypeName(adminConnection);
297          var compositeType = await GetTempTypeName(adminConnection);
298          await adminConnection.ExecuteNonQueryAsync($@&quot;
299  CREATE TYPE {enumType} AS ENUM (&#x27;left&#x27;, &#x27;right&#x27;);
300  CREATE DOMAIN {domainType} AS {enumType} NOT NULL;
301  CREATE TYPE {compositeType} AS (value {domainType})&quot;);
302          var table = await CreateTempTable(adminConnection, $&quot;value {compositeType}&quot;);
303          var dataSourceBuilder = CreateDataSourceBuilder();
304          dataSourceBuilder.MapComposite&lt;Bug2278CompositeType&gt;(compositeType);
305          dataSourceBuilder.MapEnum&lt;Bug2278EnumType&gt;(enumType);
306          await using var dataSource = dataSourceBuilder.Build();
307          await using var connection = await dataSource.OpenConnectionAsync();
308          await connection.ExecuteScalarAsync($&quot;SELECT * FROM {table} AS d&quot;);
309      }
310      class Bug2278CompositeType
311      {
312          public Bug2278EnumType Value { get; set; }
313      }
314      enum Bug2278EnumType
315      {
316          Left,
317          Right
318      }
319      [Test]
320      [IssueLink(&quot;https:&amp;bsol;&amp;bsol;github.com/npgsql/npgsql/issues/2178&quot;)]
321      public async Task Bug2178()
322      {
323          await using var dataSource = CreateDataSource(csb =&gt;
324          {
325              csb.AutoPrepareMinUsages = 2;
326              csb.MaxAutoPrepare = 2;
327          });
328          await using var conn = await dataSource.OpenConnectionAsync();
329          await using var cmd = new NpgsqlCommand();
330          cmd.Connection = conn;
331          cmd.CommandText = &quot;SELECT 1&quot;;
332          await cmd.ExecuteScalarAsync();
333          await cmd.ExecuteScalarAsync();
334          Assert.That(cmd.IsPrepared);
335          cmd.CommandText = &quot;SELECT * FROM public.dummy_table_name&quot;;
336          for (var i = 0; i &lt; 3; ++i)
337          {
338              Assert.ThrowsAsync&lt;PostgresException&gt;(async () =&gt; await cmd.ExecuteScalarAsync());
339          }
340          cmd.CommandText = &quot;SELECT 1&quot;;
341          await cmd.ExecuteScalarAsync();
342          Assert.That(cmd.IsPrepared);
343      }
344      [Test]
345      public async Task Bug2296()
346      {
347          await using var conn = await OpenConnectionAsync();
348          await conn.ExecuteNonQueryAsync(&quot;DROP TYPE IF EXISTS \&quot;boolean\&quot; CASCADE&quot;);
349          await conn.ExecuteNonQueryAsync(&quot;CREATE DOMAIN pg_temp.\&quot;boolean\&quot; AS bool&quot;);
350          conn.ReloadTypes();
351          var tableName = await CreateTempTable(conn, $&quot;mybool \&quot;boolean\&quot;&quot;);
352          await conn.ExecuteNonQueryAsync($&quot;INSERT INTO {tableName} (mybool) VALUES (TRUE)&quot;);
353          await conn.ExecuteScalarAsync($&quot;SELECT mybool FROM {tableName}&quot;);
354      }
355      [Test, IssueLink(&quot;https:&amp;bsol;&amp;bsol;github.com/npgsql/npgsql/issues/2660&quot;)]
356      public void Standard_conforming_strings()
357      {
358          using var conn = OpenConnection();
359          var sql = @&quot;
360  SELECT table_name
361  FROM information_schema.views
362  WHERE table_name LIKE @p0 escape &#x27;\&#x27; AND (is_updatable = &#x27;NO&#x27;) = @p1&quot;;
363          using var cmd = new NpgsqlCommand(sql, conn);
364          cmd.Parameters.AddWithValue(&quot;@p0&quot;, &quot;%trig%&quot;);
365          cmd.Parameters.AddWithValue(&quot;@p1&quot;, true);
366          using var reader = cmd.ExecuteReader();
367          reader.Read();
368      }
369      #region Bug1285
370      [Test, IssueLink(&quot;https:&amp;bsol;&amp;bsol;github.com/npgsql/npgsql/issues/1285&quot;)]
371      public void Bug1285()
372      {
373          using var conn = OpenConnection();
374          using var cmd = new NpgsqlCommand { Connection = conn };
375          cmd.CommandText = Bug1285CreateStatement;
376          cmd.ExecuteNonQuery();
377          cmd.CommandText = Bug1285SelectStatement;
378          cmd.Parameters.Add(new NpgsqlParameter(&quot;@1&quot;, Guid.NewGuid()));
379          cmd.ExecuteNonQuery();
380      }
381      const string Bug1285SelectStatement =
382          &quot;select &quot; +
383          &quot; \&quot;Afbeelding\&quot;&quot; +
384          &quot;, \&quot;Afbeelding#Id\&quot;&quot; +
385          &quot;, \&quot;Omschrijving\&quot;&quot; +
386          &quot;, \&quot;Website\&quot;&quot; +
387          &quot;, \&quot;EMailadres\&quot;&quot; +
388          &quot;, \&quot;SocialMediaVastleggen\&quot;&quot; +
389          &quot;, \&quot;Facebook\&quot;&quot; +
390          &quot;, \&quot;Linkedin\&quot;&quot; +
391          &quot;, \&quot;Twitter\&quot;&quot; +
392          &quot;, \&quot;Youtube\&quot;&quot; +
393          &quot;, \&quot;Branche\&quot;&quot; +
394          &quot;, \&quot;Branche#Id\&quot;&quot; +
395          &quot;, \&quot;Branche#ComponentId\&quot;&quot; +
396          &quot;, \&quot;Telefoonnummer\&quot;&quot; +
397          &quot;, \&quot;Overheidsidentificatienummer\&quot;&quot; +
398          &quot;, \&quot;Adres\&quot;&quot; +
399          &quot;, \&quot;Adres#Id\&quot;&quot; +
400          &quot;, \&quot;Adres#ComponentId\&quot;&quot; +
401          &quot;, \&quot;2gIKz62kaTdGxw82_OrzTc4ANSM_\&quot;&quot; +
402          &quot;, \&quot;OnderdeelVanOrganisatie\&quot;&quot; +
403          &quot;, \&quot;OnderdeelVanOrganisatie#Id\&quot;&quot; +
404          &quot;, \&quot;OnderdeelVanOrganisatie#ComponentId\&quot;&quot; +
405          &quot;, \&quot;Profit\&quot;&quot; +
406          &quot;, \&quot;Profit#Id\&quot;&quot; +
407          &quot;, \&quot;Profit#ComponentId\&quot;&quot; +
408          &quot;, \&quot;Taal\&quot;&quot; +
409          &quot;, \&quot;Taal#Id\&quot;&quot; +
410          &quot;, \&quot;Taal#ComponentId\&quot;&quot; +
411          &quot;, \&quot;KlantSinds\&quot;&quot; +
412          &quot;, \&quot;BarcodeKlant\&quot;&quot; +
413          &quot;, \&quot;BarcodeKlant#BarcodeType\&quot;&quot; +
414          &quot;, \&quot;BarcodeKlant#Value\&quot;&quot; +
415          &quot;, \&quot;Postadres\&quot;&quot; +
416          &quot;, \&quot;Postadres#Id\&quot;&quot; +
417          &quot;, \&quot;Postadres#ComponentId\&quot;&quot; +
418          &quot;, \&quot;LeverancierSinds\&quot;&quot; +
419          &quot;, \&quot;BarcodeLeverancier\&quot;&quot; +
420          &quot;, \&quot;BarcodeLeverancier#BarcodeType\&quot;&quot; +
421          &quot;, \&quot;BarcodeLeverancier#Value\&quot;&quot; +
422          &quot;, \&quot;Zoeknaam\&quot;&quot; +
423          &quot;, \&quot;TitelEnAanhef\&quot;&quot; +
424          &quot;, \&quot;TitelEnAanhef#Id\&quot;&quot; +
425          &quot;, \&quot;TitelEnAanhef#ComponentId\&quot;&quot; +
426          &quot;, \&quot;Rechtsvorm\&quot;&quot; +
427          &quot;, \&quot;Rechtsvorm#Id\&quot;&quot; +
428          &quot;, \&quot;Rechtsvorm#ComponentId\&quot;&quot; +
429          &quot;, \&quot;LandVanVestiging\&quot;&quot; +
430          &quot;, \&quot;LandVanVestiging#Id\&quot;&quot; +
431          &quot;, \&quot;LandVanVestiging#ComponentId\&quot;&quot; +
432          &quot;, \&quot;AantalMedewerkers\&quot;&quot; +
433          &quot;, \&quot;NaamStatutair\&quot;&quot; +
434          &quot;, \&quot;VestigingStatutair\&quot;&quot; +
435          &quot;, \&quot;Correspondentie\&quot;&quot; +
436          &quot;, \&quot;Medium\&quot;&quot; +
437          &quot;, \&quot;FiscaalNummer\&quot;&quot; +
438          &quot;, \&quot;AangebrachtDoor\&quot;&quot; +
439          &quot;, \&quot;AangebrachtDoor#Id\&quot;&quot; +
440          &quot;, \&quot;AangebrachtDoor#ComponentId\&quot;&quot; +
441          &quot;, \&quot;Status\&quot;&quot; +
442          &quot;, \&quot;NummerKamerVanKoophandel\&quot;&quot; +
443          &quot;, \&quot;zII9SOHbwUPS_jKSlcRrQzuEr6A_\&quot;&quot; +
444          &quot;, \&quot;Code\&quot;&quot; +
445          &quot;, \&quot;OrganisatorischeEenheid\&quot;&quot; +
446          &quot;, \&quot;OrganisatorischeEenheid#Id\&quot;&quot; +
447          &quot;, \&quot;OrganisatorischeEenheid#ComponentId\&quot;&quot; +
448          &quot;, \&quot;PJlr3asVdeHVoqmAyHIF2fF1gVM_\&quot;&quot; +
449          &quot;, \&quot;IsUwv\&quot;&quot; +
450          &quot;, \&quot;Uwv\&quot;&quot; +
451          &quot;, \&quot;Uwv#Id\&quot;&quot; +
452          &quot;, \&quot;Uwv#ComponentId\&quot;&quot; +
453          &quot;, \&quot;IsVerzekeraarVoorWerkgever\&quot;&quot; +
454          &quot;, \&quot;VerzekeraarVoorWerkgever\&quot;&quot; +
455          &quot;, \&quot;VerzekeraarVoorWerkgever#Id\&quot;&quot; +
456          &quot;, \&quot;VerzekeraarVoorWerkgever#ComponentId\&quot;&quot; +
457          &quot;, \&quot;IsAbonnementsadministratie\&quot;&quot; +
458          &quot;, \&quot;Abonnementsadministratie\&quot;&quot; +
459          &quot;, \&quot;Abonnementsadministratie#Id\&quot;&quot; +
460          &quot;, \&quot;Abonnementsadministratie#ComponentId\&quot;&quot; +
461          &quot;, \&quot;IsPensioenfonds\&quot;&quot; +
462          &quot;, \&quot;Pensioenfonds\&quot;&quot; +
463          &quot;, \&quot;Pensioenfonds#Id\&quot;&quot; +
464          &quot;, \&quot;Pensioenfonds#ComponentId\&quot;&quot; +
465          &quot;, \&quot;IsProfit\&quot;&quot; +
466          &quot;, \&quot;Profit1\&quot;&quot; +
467          &quot;, \&quot;Profit1#Id\&quot;&quot; +
468          &quot;, \&quot;Profit1#ComponentId\&quot;&quot; +
469          &quot;, \&quot;Verantwoordelijke\&quot;&quot; +
470          &quot;, \&quot;Verantwoordelijke#Id\&quot;&quot; +
471          &quot;, \&quot;Verantwoordelijke#ComponentId\&quot;&quot; +
472          &quot;, \&quot;IsKlant\&quot;&quot; +
473          &quot;, \&quot;Klant\&quot;&quot; +
474          &quot;, \&quot;Klant#Id\&quot;&quot; +
475          &quot;, \&quot;Klant#ComponentId\&quot;&quot; +
476          &quot;, \&quot;IsFactureringsadministratie\&quot;&quot; +
477          &quot;, \&quot;Factureringsadministratie\&quot;&quot; +
478          &quot;, \&quot;Factureringsadministratie#Id\&quot;&quot; +
479          &quot;, \&quot;Factureringsadministratie#ComponentId\&quot;&quot; +
480          &quot;, \&quot;IsLeninggever\&quot;&quot; +
481          &quot;, \&quot;Leninggever\&quot;&quot; +
482          &quot;, \&quot;Leninggever#Id\&quot;&quot; +
483          &quot;, \&quot;Leninggever#ComponentId\&quot;&quot; +
484          &quot;, \&quot;IsProjectadministratie\&quot;&quot; +
485          &quot;, \&quot;Projectadministratie\&quot;&quot; +
486          &quot;, \&quot;Projectadministratie#Id\&quot;&quot; +
487          &quot;, \&quot;Projectadministratie#ComponentId\&quot;&quot; +
488          &quot;, \&quot;IsVervangingsfonds\&quot;&quot; +
489          &quot;, \&quot;Vervangingsfonds\&quot;&quot; +
490          &quot;, \&quot;Vervangingsfonds#Id\&quot;&quot; +
491          &quot;, \&quot;Vervangingsfonds#ComponentId\&quot;&quot; +
492          &quot;, \&quot;IsPensioen\&quot;&quot; +
493          &quot;, \&quot;Pensioen\&quot;&quot; +
494          &quot;, \&quot;Pensioen#Id\&quot;&quot; +
495          &quot;, \&quot;Pensioen#ComponentId\&quot;&quot; +
496          &quot;, \&quot;IsVasteActivaAdministratie\&quot;&quot; +
497          &quot;, \&quot;VasteActivaAdministratie\&quot;&quot; +
498          &quot;, \&quot;VasteActivaAdministratie#Id\&quot;&quot; +
499          &quot;, \&quot;VasteActivaAdministratie#ComponentId\&quot;&quot; +
500          &quot;, \&quot;IsBelastingdienst\&quot;&quot; +
501          &quot;, \&quot;Belastingdienst\&quot;&quot; +
502          &quot;, \&quot;Belastingdienst#Id\&quot;&quot; +
503          &quot;, \&quot;Belastingdienst#ComponentId\&quot;&quot; +
504          &quot;, \&quot;IsCursusadministratie\&quot;&quot; +
505          &quot;, \&quot;Cursusadministratie\&quot;&quot; +
506          &quot;, \&quot;Cursusadministratie#Id\&quot;&quot; +
507          &quot;, \&quot;Cursusadministratie#ComponentId\&quot;&quot; +
508          &quot;, \&quot;IsUitvoerderVervangingsfonds\&quot;&quot; +
509          &quot;, \&quot;UitvoerderVervangingsfonds\&quot;&quot; +
510          &quot;, \&quot;UitvoerderVervangingsfonds#Id\&quot;&quot; +
511          &quot;, \&quot;UitvoerderVervangingsfonds#ComponentId\&quot;&quot; +
512          &quot;, \&quot;IsAssemblageadministratie\&quot;&quot; +
513          &quot;, \&quot;Assemblageadministratie\&quot;&quot; +
514          &quot;, \&quot;Assemblageadministratie#Id\&quot;&quot; +
515          &quot;, \&quot;Assemblageadministratie#ComponentId\&quot;&quot; +
516          &quot;, \&quot;IsLeasemaatschappij\&quot;&quot; +
517          &quot;, \&quot;Leasemaatschappij\&quot;&quot; +
518          &quot;, \&quot;Leasemaatschappij#Id\&quot;&quot; +
519          &quot;, \&quot;Leasemaatschappij#ComponentId\&quot;&quot; +
520          &quot;, \&quot;IsBeslaglegger\&quot;&quot; +
521          &quot;, \&quot;Beslaglegger\&quot;&quot; +
522          &quot;, \&quot;Beslaglegger#Id\&quot;&quot; +
523          &quot;, \&quot;Beslaglegger#ComponentId\&quot;&quot; +
524          &quot;, \&quot;IsVerzekeraarVoorMedewerker\&quot;&quot; +
525          &quot;, \&quot;VerzekeraarVoorMedewerker\&quot;&quot; +
526          &quot;, \&quot;VerzekeraarVoorMedewerker#Id\&quot;&quot; +
527          &quot;, \&quot;VerzekeraarVoorMedewerker#ComponentId\&quot;&quot; +
528          &quot;, \&quot;IsWoningverhuur\&quot;&quot; +
529          &quot;, \&quot;Woningverhuur\&quot;&quot; +
530          &quot;, \&quot;Woningverhuur#Id\&quot;&quot; +
531          &quot;, \&quot;Woningverhuur#ComponentId\&quot;&quot; +
532          &quot;, \&quot;9cSTu7fkjOZm08FFQUHvclQHSWY_\&quot;&quot; +
533          &quot;, \&quot;Goederenstroomadministratie\&quot;&quot; +
534          &quot;, \&quot;Goederenstroomadministratie#Id\&quot;&quot; +
535          &quot;, \&quot;Goederenstroomadministratie#ComponentId\&quot;&quot; +
536          &quot;, \&quot;IsConcurrent\&quot;&quot; +
537          &quot;, \&quot;Concurrent\&quot;&quot; +
538          &quot;, \&quot;Concurrent#Id\&quot;&quot; +
539          &quot;, \&quot;Concurrent#ComponentId\&quot;&quot; +
540          &quot;, \&quot;IsArbodienst\&quot;&quot; +
541          &quot;, \&quot;Arbodienst\&quot;&quot; +
542          &quot;, \&quot;Arbodienst#Id\&quot;&quot; +
543          &quot;, \&quot;Arbodienst#ComponentId\&quot;&quot; +
544          &quot;, \&quot;IsUitvoerderSociaalFonds\&quot;&quot; +
545          &quot;, \&quot;UitvoerderSociaalFonds\&quot;&quot; +
546          &quot;, \&quot;UitvoerderSociaalFonds#Id\&quot;&quot; +
547          &quot;, \&quot;UitvoerderSociaalFonds#ComponentId\&quot;&quot; +
548          &quot;, \&quot;IsPensioenuitvoerder\&quot;&quot; +
549          &quot;, \&quot;Pensioenuitvoerder\&quot;&quot; +
550          &quot;, \&quot;Pensioenuitvoerder#Id\&quot;&quot; +
551          &quot;, \&quot;Pensioenuitvoerder#ComponentId\&quot;&quot; +
552          &quot;, \&quot;IsProspect\&quot;&quot; +
553          &quot;, \&quot;Prospect\&quot;&quot; +
554          &quot;, \&quot;Prospect#Id\&quot;&quot; +
555          &quot;, \&quot;Prospect#ComponentId\&quot;&quot; +
556          &quot;, \&quot;IsProspectadministratie\&quot;&quot; +
557          &quot;, \&quot;Prospectadministratie\&quot;&quot; +
558          &quot;, \&quot;Prospectadministratie#Id\&quot;&quot; +
559          &quot;, \&quot;Prospectadministratie#ComponentId\&quot;&quot; +
560          &quot;, \&quot;IsArtikelbeheeradministratie\&quot;&quot; +
561          &quot;, \&quot;Artikelbeheeradministratie\&quot;&quot; +
562          &quot;, \&quot;Artikelbeheeradministratie#Id\&quot;&quot; +
563          &quot;, \&quot;Artikelbeheeradministratie#ComponentId\&quot;&quot; +
564          &quot;, \&quot;v1J4Rq2eNZy9GBvGhuCBKqga0Rg_\&quot;&quot; +
565          &quot;, \&quot;g4i3gYZGL0yu0T6UwmiZTaUDI8Y_\&quot;&quot; +
566          &quot;, \&quot;g4i3gYZGL0yu0T6UwmiZTaUDI8Y_#Id\&quot;&quot; +
567          &quot;, \&quot;g4i3gYZGL0yu0T6UwmiZTaUDI8Y_#ComponentId\&quot;&quot; +
568          &quot;, \&quot;IsSociaalFonds\&quot;&quot; +
569          &quot;, \&quot;SociaalFonds\&quot;&quot; +
570          &quot;, \&quot;SociaalFonds#Id\&quot;&quot; +
571          &quot;, \&quot;SociaalFonds#ComponentId\&quot;&quot; +
572          &quot;, \&quot;IsWagenparkadministratie\&quot;&quot; +
573          &quot;, \&quot;Wagenparkadministratie\&quot;&quot; +
574          &quot;, \&quot;Wagenparkadministratie#Id\&quot;&quot; +
575          &quot;, \&quot;Wagenparkadministratie#ComponentId\&quot;&quot; +
576          &quot;, \&quot;IsLeverancier\&quot;&quot; +
577          &quot;, \&quot;Leverancier\&quot;&quot; +
578          &quot;, \&quot;Leverancier#Id\&quot;&quot; +
579          &quot;, \&quot;Leverancier#ComponentId\&quot;&quot; +
580          &quot;, \&quot;IsWagenparkAfnemer\&quot;&quot; +
581          &quot;, \&quot;WagenparkAfnemer\&quot;&quot; +
582          &quot;, \&quot;WagenparkAfnemer#Id\&quot;&quot; +
583          &quot;, \&quot;WagenparkAfnemer#ComponentId\&quot;&quot; +
584          &quot;, \&quot;IsEvenementadministratie\&quot;&quot; +
585          &quot;, \&quot;Evenementadministratie\&quot;&quot; +
586          &quot;, \&quot;Evenementadministratie#Id\&quot;&quot; +
587          &quot;, \&quot;Evenementadministratie#ComponentId\&quot;&quot; +
588          &quot;, \&quot;IsCrediteur\&quot;&quot; +
589          &quot;, \&quot;Crediteur\&quot;&quot; +
590          &quot;, \&quot;Crediteur#Id\&quot;&quot; +
591          &quot;, \&quot;Crediteur#ComponentId\&quot;&quot; +
592          &quot;, \&quot;IsFinancieleAdministratie\&quot;&quot; +
593          &quot;, \&quot;FinancieleAdministratie\&quot;&quot; +
594          &quot;, \&quot;FinancieleAdministratie#Id\&quot;&quot; +
595          &quot;, \&quot;FinancieleAdministratie#ComponentId\&quot;&quot; +
596          &quot;, \&quot;IsSociaalSecretariaat\&quot;&quot; +
597          &quot;, \&quot;SociaalSecretariaat\&quot;&quot; +
598          &quot;, \&quot;SociaalSecretariaat#Id\&quot;&quot; +
599          &quot;, \&quot;SociaalSecretariaat#ComponentId\&quot;&quot; +
600          &quot;, \&quot;IsBank\&quot;&quot; +
601          &quot;, \&quot;Bank\&quot;&quot; +
602          &quot;, \&quot;Bank#Id\&quot;&quot; +
603          &quot;, \&quot;Bank#ComponentId\&quot;&quot; +
604          &quot;, \&quot;IsWerkgever\&quot;&quot; +
605          &quot;, \&quot;Werkgever\&quot;&quot; +
606          &quot;, \&quot;Werkgever#Id\&quot;&quot; +
607          &quot;, \&quot;Werkgever#ComponentId\&quot;&quot; +
608          &quot;, \&quot;IsVerkoopadministratie\&quot;&quot; +
609          &quot;, \&quot;Verkoopadministratie\&quot;&quot; +
610          &quot;, \&quot;Verkoopadministratie#Id\&quot;&quot; +
611          &quot;, \&quot;Verkoopadministratie#ComponentId\&quot;&quot; +
612          &quot;, \&quot;IsInkoopadministratie\&quot;&quot; +
613          &quot;, \&quot;Inkoopadministratie\&quot;&quot; +
614          &quot;, \&quot;Inkoopadministratie#Id\&quot;&quot; +
615          &quot;, \&quot;Inkoopadministratie#ComponentId\&quot;&quot; +
616          &quot;, \&quot;IsSubsidient\&quot;&quot; +
617          &quot;, \&quot;Subsidient\&quot;&quot; +
618          &quot;, \&quot;Subsidient#Id\&quot;&quot; +
619          &quot;, \&quot;Subsidient#ComponentId\&quot;&quot; +
620          &quot;, \&quot;IsEnqueteadministratie\&quot;&quot; +
621          &quot;, \&quot;Enqueteadministratie\&quot;&quot; +
622          &quot;, \&quot;Enqueteadministratie#Id\&quot;&quot; +
623          &quot;, \&quot;Enqueteadministratie#ComponentId\&quot;&quot; +
624          &quot;, \&quot;XWiQaVjEbD041r7QN0kj2aKeCys_\&quot;&quot; +
625          &quot;, \&quot;X_TVE5FRBaQ97JJQbT7LmX4HBVY_\&quot;&quot; +
626          &quot;, \&quot;BrancheDescription\&quot;&quot; +
627          &quot;, \&quot;AdresDescription\&quot;&quot; +
628          &quot;, \&quot;PicMWY7oCqeiZMTdDqwFqi1U508_\&quot;&quot; +
629          &quot;, \&quot;ProfitDescription\&quot;&quot; +
630          &quot;, \&quot;TaalDescription\&quot;&quot; +
631          &quot;, \&quot;PostadresDescription\&quot;&quot; +
632          &quot;, \&quot;TitelEnAanhefDescription\&quot;&quot; +
633          &quot;, \&quot;RechtsvormDescription\&quot;&quot; +
634          &quot;, \&quot;LandVanVestigingDescription\&quot;&quot; +
635          &quot;, \&quot;AangebrachtDoorDescription\&quot;&quot; +
636          &quot;, \&quot;KFEDo6ZYK_ffNCeHuujBCshlPVs_\&quot;&quot; +
637          &quot;, \&quot;VerantwoordelijkeDescription\&quot;&quot; +
638          &quot;, \&quot;FunctionalState\&quot;&quot; +
639          &quot;, \&quot;KlantFinancieleAdministratie\&quot;&quot; +
640          &quot;, \&quot;KlantFinancieleAdministratie#Id\&quot;&quot; +
641          &quot;, \&quot;KlantFinancieleAdministratie#ComponentId\&quot;&quot; +
642          &quot;, \&quot;KlantVerkoopadministratie\&quot;&quot; +
643          &quot;, \&quot;KlantVerkoopadministratie#Id\&quot;&quot; +
644          &quot;, \&quot;KlantVerkoopadministratie#ComponentId\&quot;&quot; +
645          &quot;, \&quot;NQwaM_lfzxIm_JPrPhwruL0YOXY_\&quot;&quot; +
646          &quot;, \&quot;NQwaM_lfzxIm_JPrPhwruL0YOXY_#Id\&quot;&quot; +
647          &quot;, \&quot;NQwaM_lfzxIm_JPrPhwruL0YOXY_#ComponentId\&quot;&quot; +
648          &quot;, \&quot;uSf1yseW4YQ1K6EoHNlzCxPofm0_\&quot;&quot; +
649          &quot;, \&quot;uSf1yseW4YQ1K6EoHNlzCxPofm0_#Id\&quot;&quot; +
650          &quot;, \&quot;uSf1yseW4YQ1K6EoHNlzCxPofm0_#ComponentId\&quot;&quot; +
651          &quot;, \&quot;KlantEvenementadministratie\&quot;&quot; +
652          &quot;, \&quot;KlantEvenementadministratie#Id\&quot;&quot; +
653          &quot;, \&quot;KlantEvenementadministratie#ComponentId\&quot;&quot; +
654          &quot;, \&quot;KlantCursusadministratie\&quot;&quot; +
655          &quot;, \&quot;KlantCursusadministratie#Id\&quot;&quot; +
656          &quot;, \&quot;KlantCursusadministratie#ComponentId\&quot;&quot; +
657          &quot;, \&quot;KlantProspectadministratie\&quot;&quot; +
658          &quot;, \&quot;KlantProspectadministratie#Id\&quot;&quot; +
659          &quot;, \&quot;KlantProspectadministratie#ComponentId\&quot;&quot; +
660          &quot;, \&quot;KlantInkoopadministratie\&quot;&quot; +
661          &quot;, \&quot;KlantInkoopadministratie#Id\&quot;&quot; +
662          &quot;, \&quot;KlantInkoopadministratie#ComponentId\&quot;&quot; +
663          &quot;, \&quot;KlantProjectadministratie\&quot;&quot; +
664          &quot;, \&quot;KlantProjectadministratie#Id\&quot;&quot; +
665          &quot;, \&quot;KlantProjectadministratie#ComponentId\&quot;&quot; +
666          &quot;, \&quot;P0gBTGcrSbl2kK8BM4_24fIeMvk_\&quot;&quot; +
667          &quot;, \&quot;P0gBTGcrSbl2kK8BM4_24fIeMvk_#Id\&quot;&quot; +
668          &quot;, \&quot;P0gBTGcrSbl2kK8BM4_24fIeMvk_#ComponentId\&quot;&quot; +
669          &quot;, \&quot;KlantMain\&quot;&quot; +
670          &quot;, \&quot;KlantMain#Id\&quot;&quot; +
671          &quot;, \&quot;KlantMain#ComponentId\&quot;&quot; +
672          &quot;, \&quot;8awXARDcCdVtrvN6IRlwAk5UcrI_\&quot;&quot; +
673          &quot;, \&quot;8awXARDcCdVtrvN6IRlwAk5UcrI_#Id\&quot;&quot; +
674          &quot;, \&quot;8awXARDcCdVtrvN6IRlwAk5UcrI_#ComponentId\&quot;&quot; +
675          &quot;, \&quot;MjgFAhRfH64O3M9Ts_5b0ENQDBE_\&quot;&quot; +
676          &quot;, \&quot;MjgFAhRfH64O3M9Ts_5b0ENQDBE_#Id\&quot;&quot; +
677          &quot;, \&quot;MjgFAhRfH64O3M9Ts_5b0ENQDBE_#ComponentId\&quot;&quot; +
678          &quot;, \&quot;LeverancierMain\&quot;&quot; +
679          &quot;, \&quot;LeverancierMain#Id\&quot;&quot; +
680          &quot;, \&quot;LeverancierMain#ComponentId\&quot;&quot; +
681          &quot;, \&quot;2CaNQvGgtPNHP2XCsoKBQEpwmYA_\&quot;&quot; +
682          &quot;, \&quot;2CaNQvGgtPNHP2XCsoKBQEpwmYA_#Id\&quot;&quot; +
683          &quot;, \&quot;2CaNQvGgtPNHP2XCsoKBQEpwmYA_#ComponentId\&quot;&quot; +
684          &quot;, \&quot;kleo39GG1utTUtP0F15mWkXZBFQ_\&quot;&quot; +
685          &quot;, \&quot;kleo39GG1utTUtP0F15mWkXZBFQ_#Id\&quot;&quot; +
686          &quot;, \&quot;kleo39GG1utTUtP0F15mWkXZBFQ_#ComponentId\&quot;&quot; +
687          &quot;, \&quot;d9jEYARbghWBrZU6jKbtZPyZUAk_\&quot;&quot; +
688          &quot;, \&quot;d9jEYARbghWBrZU6jKbtZPyZUAk_#Id\&quot;&quot; +
689          &quot;, \&quot;d9jEYARbghWBrZU6jKbtZPyZUAk_#ComponentId\&quot;&quot; +
690          &quot;, \&quot;CrediteurMain\&quot;&quot; +
691          &quot;, \&quot;CrediteurMain#Id\&quot;&quot; +
692          &quot;, \&quot;CrediteurMain#ComponentId\&quot;&quot; +
693          &quot;, \&quot;TTStart\&quot;&quot; +
694          &quot;, \&quot;TTEnd\&quot;&quot; +
695          &quot;, \&quot;InstanceId\&quot;&quot; +
696          &quot;, \&quot;StartDate\&quot;&quot; +
697          &quot;, \&quot;EndDate\&quot;&quot; +
698          &quot;, \&quot;UserId\&quot;&quot; +
699          &quot;, \&quot;Id\&quot;&quot; +
700          &quot; from \&quot;OrganisatieQmo_Organisatie_QueryModelObjects_Imp\&quot; WHERE (\&quot;InstanceId\&quot; = @1) AND ((\&quot;StartDate\&quot; IS NULL) AND (\&quot;TTEnd\&quot; IS NULL)) ORDER BY \&quot;Id\&quot; ASC NULLS FIRST OFFSET 0 ROWS FETCH NEXT 2 ROWS ONLY;&quot;;
701      const string Bug1285CreateStatement = @&quot;
702  CREATE TEMP TABLE &quot;&quot;OrganisatieQmo_Organisatie_QueryModelObjects_Imp&quot;&quot;
703  (
704    &quot;&quot;Id&quot;&quot; uuid NOT NULL,
705    &quot;&quot;InstanceId&quot;&quot; uuid,
706    &quot;&quot;UserId&quot;&quot; text,
707    &quot;&quot;StartDate&quot;&quot; timestamp(3) without time zone,
708    &quot;&quot;EndDate&quot;&quot; timestamp(3) without time zone,
709    &quot;&quot;TTStart&quot;&quot; timestamp(3) without time zone,
710    &quot;&quot;TTEnd&quot;&quot; timestamp(3) without time zone,
711    &quot;&quot;Afbeelding#Id&quot;&quot; uuid,
712    &quot;&quot;Afbeelding&quot;&quot; boolean,
713    &quot;&quot;Omschrijving&quot;&quot; character varying(250),
714    &quot;&quot;Website&quot;&quot; text,
715    &quot;&quot;EMailadres&quot;&quot; character varying(255),
716    &quot;&quot;SocialMediaVastleggen&quot;&quot; boolean,
717    &quot;&quot;Facebook&quot;&quot; text,
718    &quot;&quot;Linkedin&quot;&quot; text,
719    &quot;&quot;Twitter&quot;&quot; text,
720    &quot;&quot;Youtube&quot;&quot; text,
721    &quot;&quot;Branche#Id&quot;&quot; uuid,
722    &quot;&quot;Branche#ComponentId&quot;&quot; uuid,
723    &quot;&quot;Branche&quot;&quot; boolean,
724    &quot;&quot;Telefoonnummer&quot;&quot; character varying(18),
725    &quot;&quot;Overheidsidentificatienummer&quot;&quot; character varying(40),
726    &quot;&quot;Adres#Id&quot;&quot; uuid,
727    &quot;&quot;Adres#ComponentId&quot;&quot; uuid,
728    &quot;&quot;Adres&quot;&quot; boolean,
729    &quot;&quot;2gIKz62kaTdGxw82_OrzTc4ANSM_&quot;&quot; boolean,
730    &quot;&quot;OnderdeelVanOrganisatie#Id&quot;&quot; uuid,
731    &quot;&quot;OnderdeelVanOrganisatie#ComponentId&quot;&quot; uuid,
732    &quot;&quot;OnderdeelVanOrganisatie&quot;&quot; boolean,
733    &quot;&quot;Profit#Id&quot;&quot; uuid,
734    &quot;&quot;Profit#ComponentId&quot;&quot; uuid,
735    &quot;&quot;Profit&quot;&quot; boolean,
736    &quot;&quot;Taal#Id&quot;&quot; uuid,
737    &quot;&quot;Taal#ComponentId&quot;&quot; uuid,
738    &quot;&quot;Taal&quot;&quot; boolean,
739    &quot;&quot;KlantSinds&quot;&quot; timestamp(3) without time zone,
740    &quot;&quot;BarcodeKlant#BarcodeType&quot;&quot; uuid,
741    &quot;&quot;BarcodeKlant#Value&quot;&quot; text,
742    &quot;&quot;BarcodeKlant&quot;&quot; boolean,
743    &quot;&quot;Postadres#Id&quot;&quot; uuid,
744    &quot;&quot;Postadres#ComponentId&quot;&quot; uuid,
745    &quot;&quot;Postadres&quot;&quot; boolean,
746    &quot;&quot;LeverancierSinds&quot;&quot; timestamp(3) without time zone,
747    &quot;&quot;BarcodeLeverancier#BarcodeType&quot;&quot; uuid,
748    &quot;&quot;BarcodeLeverancier#Value&quot;&quot; text,
749    &quot;&quot;BarcodeLeverancier&quot;&quot; boolean,
750    &quot;&quot;Zoeknaam&quot;&quot; character varying(255),
751    &quot;&quot;TitelEnAanhef#Id&quot;&quot; uuid,
752    &quot;&quot;TitelEnAanhef#ComponentId&quot;&quot; uuid,
753    &quot;&quot;TitelEnAanhef&quot;&quot; boolean,
754    &quot;&quot;Rechtsvorm#Id&quot;&quot; uuid,
755    &quot;&quot;Rechtsvorm#ComponentId&quot;&quot; uuid,
756    &quot;&quot;Rechtsvorm&quot;&quot; boolean,
757    &quot;&quot;LandVanVestiging#Id&quot;&quot; uuid,
758    &quot;&quot;LandVanVestiging#ComponentId&quot;&quot; uuid,
759    &quot;&quot;LandVanVestiging&quot;&quot; boolean,
760    &quot;&quot;AantalMedewerkers&quot;&quot; character varying(50),
761    &quot;&quot;NaamStatutair&quot;&quot; character varying(255),
762    &quot;&quot;VestigingStatutair&quot;&quot; character varying(255),
763    &quot;&quot;Correspondentie&quot;&quot; boolean,
764    &quot;&quot;Medium&quot;&quot; character varying(255),
765    &quot;&quot;FiscaalNummer&quot;&quot; character varying(9),
766    &quot;&quot;AangebrachtDoor#Id&quot;&quot; uuid,
767    &quot;&quot;AangebrachtDoor#ComponentId&quot;&quot; uuid,
768    &quot;&quot;AangebrachtDoor&quot;&quot; boolean,
769    &quot;&quot;Status&quot;&quot; character varying(255),
770    &quot;&quot;NummerKamerVanKoophandel&quot;&quot; character varying(30),
771    &quot;&quot;zII9SOHbwUPS_jKSlcRrQzuEr6A_&quot;&quot; timestamp(3) without time zone,
772    &quot;&quot;Code&quot;&quot; character varying(255),
773    &quot;&quot;OrganisatorischeEenheid#Id&quot;&quot; uuid,
774    &quot;&quot;OrganisatorischeEenheid#ComponentId&quot;&quot; uuid,
775    &quot;&quot;OrganisatorischeEenheid&quot;&quot; boolean,
776    &quot;&quot;PJlr3asVdeHVoqmAyHIF2fF1gVM_&quot;&quot; uuid,
777    &quot;&quot;IsUwv&quot;&quot; boolean,
778    &quot;&quot;Uwv#Id&quot;&quot; uuid,
779    &quot;&quot;Uwv#ComponentId&quot;&quot; uuid,
780    &quot;&quot;Uwv&quot;&quot; boolean,
781    &quot;&quot;IsVerzekeraarVoorWerkgever&quot;&quot; boolean,
782    &quot;&quot;VerzekeraarVoorWerkgever#Id&quot;&quot; uuid,
783    &quot;&quot;VerzekeraarVoorWerkgever#ComponentId&quot;&quot; uuid,
784    &quot;&quot;VerzekeraarVoorWerkgever&quot;&quot; boolean,
785    &quot;&quot;IsAbonnementsadministratie&quot;&quot; boolean,
786    &quot;&quot;Abonnementsadministratie#Id&quot;&quot; uuid,
787    &quot;&quot;Abonnementsadministratie#ComponentId&quot;&quot; uuid,
788    &quot;&quot;Abonnementsadministratie&quot;&quot; boolean,
789    &quot;&quot;IsPensioenfonds&quot;&quot; boolean,
790    &quot;&quot;Pensioenfonds#Id&quot;&quot; uuid,
791    &quot;&quot;Pensioenfonds#ComponentId&quot;&quot; uuid,
792    &quot;&quot;Pensioenfonds&quot;&quot; boolean,
793    &quot;&quot;IsProfit&quot;&quot; boolean,
794    &quot;&quot;Profit1#Id&quot;&quot; uuid,
795    &quot;&quot;Profit1#ComponentId&quot;&quot; uuid,
796    &quot;&quot;Profit1&quot;&quot; boolean,
797    &quot;&quot;Verantwoordelijke#Id&quot;&quot; uuid,
798    &quot;&quot;Verantwoordelijke#ComponentId&quot;&quot; uuid,
799    &quot;&quot;Verantwoordelijke&quot;&quot; boolean,
800    &quot;&quot;IsKlant&quot;&quot; boolean,
801    &quot;&quot;Klant#Id&quot;&quot; uuid,
802    &quot;&quot;Klant#ComponentId&quot;&quot; uuid,
803    &quot;&quot;Klant&quot;&quot; boolean,
804    &quot;&quot;IsFactureringsadministratie&quot;&quot; boolean,
805    &quot;&quot;Factureringsadministratie#Id&quot;&quot; uuid,
806    &quot;&quot;Factureringsadministratie#ComponentId&quot;&quot; uuid,
807    &quot;&quot;Factureringsadministratie&quot;&quot; boolean,
808    &quot;&quot;IsLeninggever&quot;&quot; boolean,
809    &quot;&quot;Leninggever#Id&quot;&quot; uuid,
810    &quot;&quot;Leninggever#ComponentId&quot;&quot; uuid,
811    &quot;&quot;Leninggever&quot;&quot; boolean,
812    &quot;&quot;IsProjectadministratie&quot;&quot; boolean,
813    &quot;&quot;Projectadministratie#Id&quot;&quot; uuid,
814    &quot;&quot;Projectadministratie#ComponentId&quot;&quot; uuid,
815    &quot;&quot;Projectadministratie&quot;&quot; boolean,
816    &quot;&quot;IsVervangingsfonds&quot;&quot; boolean,
817    &quot;&quot;Vervangingsfonds#Id&quot;&quot; uuid,
818    &quot;&quot;Vervangingsfonds#ComponentId&quot;&quot; uuid,
819    &quot;&quot;Vervangingsfonds&quot;&quot; boolean,
820    &quot;&quot;IsPensioen&quot;&quot; boolean,
821    &quot;&quot;Pensioen#Id&quot;&quot; uuid,
822    &quot;&quot;Pensioen#ComponentId&quot;&quot; uuid,
823    &quot;&quot;Pensioen&quot;&quot; boolean,
824    &quot;&quot;IsVasteActivaAdministratie&quot;&quot; boolean,
825    &quot;&quot;VasteActivaAdministratie#Id&quot;&quot; uuid,
826    &quot;&quot;VasteActivaAdministratie#ComponentId&quot;&quot; uuid,
827    &quot;&quot;VasteActivaAdministratie&quot;&quot; boolean,
828    &quot;&quot;IsBelastingdienst&quot;&quot; boolean,
829    &quot;&quot;Belastingdienst#Id&quot;&quot; uuid,
830    &quot;&quot;Belastingdienst#ComponentId&quot;&quot; uuid,
831    &quot;&quot;Belastingdienst&quot;&quot; boolean,
832    &quot;&quot;IsCursusadministratie&quot;&quot; boolean,
833    &quot;&quot;Cursusadministratie#Id&quot;&quot; uuid,
834    &quot;&quot;Cursusadministratie#ComponentId&quot;&quot; uuid,
835    &quot;&quot;Cursusadministratie&quot;&quot; boolean,
836    &quot;&quot;IsUitvoerderVervangingsfonds&quot;&quot; boolean,
837    &quot;&quot;UitvoerderVervangingsfonds#Id&quot;&quot; uuid,
838    &quot;&quot;UitvoerderVervangingsfonds#ComponentId&quot;&quot; uuid,
839    &quot;&quot;UitvoerderVervangingsfonds&quot;&quot; boolean,
840    &quot;&quot;IsAssemblageadministratie&quot;&quot; boolean,
841    &quot;&quot;Assemblageadministratie#Id&quot;&quot; uuid,
842    &quot;&quot;Assemblageadministratie#ComponentId&quot;&quot; uuid,
843    &quot;&quot;Assemblageadministratie&quot;&quot; boolean,
844    &quot;&quot;IsLeasemaatschappij&quot;&quot; boolean,
845    &quot;&quot;Leasemaatschappij#Id&quot;&quot; uuid,
846    &quot;&quot;Leasemaatschappij#ComponentId&quot;&quot; uuid,
847    &quot;&quot;Leasemaatschappij&quot;&quot; boolean,
848    &quot;&quot;IsBeslaglegger&quot;&quot; boolean,
849    &quot;&quot;Beslaglegger#Id&quot;&quot; uuid,
850    &quot;&quot;Beslaglegger#ComponentId&quot;&quot; uuid,
851    &quot;&quot;Beslaglegger&quot;&quot; boolean,
852    &quot;&quot;IsVerzekeraarVoorMedewerker&quot;&quot; boolean,
853    &quot;&quot;VerzekeraarVoorMedewerker#Id&quot;&quot; uuid,
854    &quot;&quot;VerzekeraarVoorMedewerker#ComponentId&quot;&quot; uuid,
855    &quot;&quot;VerzekeraarVoorMedewerker&quot;&quot; boolean,
856    &quot;&quot;IsWoningverhuur&quot;&quot; boolean,
857    &quot;&quot;Woningverhuur#Id&quot;&quot; uuid,
858    &quot;&quot;Woningverhuur#ComponentId&quot;&quot; uuid,
859    &quot;&quot;Woningverhuur&quot;&quot; boolean,
860    &quot;&quot;9cSTu7fkjOZm08FFQUHvclQHSWY_&quot;&quot; boolean,
861    &quot;&quot;Goederenstroomadministratie#Id&quot;&quot; uuid,
862    &quot;&quot;Goederenstroomadministratie#ComponentId&quot;&quot; uuid,
863    &quot;&quot;Goederenstroomadministratie&quot;&quot; boolean,
864    &quot;&quot;IsConcurrent&quot;&quot; boolean,
865    &quot;&quot;Concurrent#Id&quot;&quot; uuid,
866    &quot;&quot;Concurrent#ComponentId&quot;&quot; uuid,
867    &quot;&quot;Concurrent&quot;&quot; boolean,
868    &quot;&quot;IsArbodienst&quot;&quot; boolean,
869    &quot;&quot;Arbodienst#Id&quot;&quot; uuid,
870    &quot;&quot;Arbodienst#ComponentId&quot;&quot; uuid,
871    &quot;&quot;Arbodienst&quot;&quot; boolean,
872    &quot;&quot;IsUitvoerderSociaalFonds&quot;&quot; boolean,
873    &quot;&quot;UitvoerderSociaalFonds#Id&quot;&quot; uuid,
874    &quot;&quot;UitvoerderSociaalFonds#ComponentId&quot;&quot; uuid,
875    &quot;&quot;UitvoerderSociaalFonds&quot;&quot; boolean,
876    &quot;&quot;IsPensioenuitvoerder&quot;&quot; boolean,
877    &quot;&quot;Pensioenuitvoerder#Id&quot;&quot; uuid,
878    &quot;&quot;Pensioenuitvoerder#ComponentId&quot;&quot; uuid,
879    &quot;&quot;Pensioenuitvoerder&quot;&quot; boolean,
880    &quot;&quot;IsProspect&quot;&quot; boolean,
881    &quot;&quot;Prospect#Id&quot;&quot; uuid,
882    &quot;&quot;Prospect#ComponentId&quot;&quot; uuid,
883    &quot;&quot;Prospect&quot;&quot; boolean,
884    &quot;&quot;IsProspectadministratie&quot;&quot; boolean,
885    &quot;&quot;Prospectadministratie#Id&quot;&quot; uuid,
886    &quot;&quot;Prospectadministratie#ComponentId&quot;&quot; uuid,
887    &quot;&quot;Prospectadministratie&quot;&quot; boolean,
888    &quot;&quot;IsArtikelbeheeradministratie&quot;&quot; boolean,
889    &quot;&quot;Artikelbeheeradministratie#Id&quot;&quot; uuid,
890    &quot;&quot;Artikelbeheeradministratie#ComponentId&quot;&quot; uuid,
891    &quot;&quot;Artikelbeheeradministratie&quot;&quot; boolean,
892    &quot;&quot;v1J4Rq2eNZy9GBvGhuCBKqga0Rg_&quot;&quot; boolean,
893    &quot;&quot;g4i3gYZGL0yu0T6UwmiZTaUDI8Y_#Id&quot;&quot; uuid,
894    &quot;&quot;g4i3gYZGL0yu0T6UwmiZTaUDI8Y_#ComponentId&quot;&quot; uuid,
895    &quot;&quot;g4i3gYZGL0yu0T6UwmiZTaUDI8Y_&quot;&quot; boolean,
896    &quot;&quot;IsSociaalFonds&quot;&quot; boolean,
897    &quot;&quot;SociaalFonds#Id&quot;&quot; uuid,
898    &quot;&quot;SociaalFonds#ComponentId&quot;&quot; uuid,
899    &quot;&quot;SociaalFonds&quot;&quot; boolean,
900    &quot;&quot;IsWagenparkadministratie&quot;&quot; boolean,
901    &quot;&quot;Wagenparkadministratie#Id&quot;&quot; uuid,
902    &quot;&quot;Wagenparkadministratie#ComponentId&quot;&quot; uuid,
903    &quot;&quot;Wagenparkadministratie&quot;&quot; boolean,
904    &quot;&quot;IsLeverancier&quot;&quot; boolean,
905    &quot;&quot;Leverancier#Id&quot;&quot; uuid,
906    &quot;&quot;Leverancier#ComponentId&quot;&quot; uuid,
907    &quot;&quot;Leverancier&quot;&quot; boolean,
908    &quot;&quot;IsWagenparkAfnemer&quot;&quot; boolean,
909    &quot;&quot;WagenparkAfnemer#Id&quot;&quot; uuid,
910    &quot;&quot;WagenparkAfnemer#ComponentId&quot;&quot; uuid,
911    &quot;&quot;WagenparkAfnemer&quot;&quot; boolean,
912    &quot;&quot;IsEvenementadministratie&quot;&quot; boolean,
913    &quot;&quot;Evenementadministratie#Id&quot;&quot; uuid,
914    &quot;&quot;Evenementadministratie#ComponentId&quot;&quot; uuid,
915    &quot;&quot;Evenementadministratie&quot;&quot; boolean,
916    &quot;&quot;IsCrediteur&quot;&quot; boolean,
917    &quot;&quot;Crediteur#Id&quot;&quot; uuid,
918    &quot;&quot;Crediteur#ComponentId&quot;&quot; uuid,
919    &quot;&quot;Crediteur&quot;&quot; boolean,
920    &quot;&quot;IsFinancieleAdministratie&quot;&quot; boolean,
921    &quot;&quot;FinancieleAdministratie#Id&quot;&quot; uuid,
922    &quot;&quot;FinancieleAdministratie#ComponentId&quot;&quot; uuid,
923    &quot;&quot;FinancieleAdministratie&quot;&quot; boolean,
924    &quot;&quot;IsSociaalSecretariaat&quot;&quot; boolean,
925    &quot;&quot;SociaalSecretariaat#Id&quot;&quot; uuid,
926    &quot;&quot;SociaalSecretariaat#ComponentId&quot;&quot; uuid,
927    &quot;&quot;SociaalSecretariaat&quot;&quot; boolean,
928    &quot;&quot;IsBank&quot;&quot; boolean,
929    &quot;&quot;Bank#Id&quot;&quot; uuid,
930    &quot;&quot;Bank#ComponentId&quot;&quot; uuid,
931    &quot;&quot;Bank&quot;&quot; boolean,
932    &quot;&quot;IsWerkgever&quot;&quot; boolean,
933    &quot;&quot;Werkgever#Id&quot;&quot; uuid,
934    &quot;&quot;Werkgever#ComponentId&quot;&quot; uuid,
935    &quot;&quot;Werkgever&quot;&quot; boolean,
936    &quot;&quot;IsVerkoopadministratie&quot;&quot; boolean,
937    &quot;&quot;Verkoopadministratie#Id&quot;&quot; uuid,
938    &quot;&quot;Verkoopadministratie#ComponentId&quot;&quot; uuid,
939    &quot;&quot;Verkoopadministratie&quot;&quot; boolean,
940    &quot;&quot;IsInkoopadministratie&quot;&quot; boolean,
941    &quot;&quot;Inkoopadministratie#Id&quot;&quot; uuid,
942    &quot;&quot;Inkoopadministratie#ComponentId&quot;&quot; uuid,
943    &quot;&quot;Inkoopadministratie&quot;&quot; boolean,
944    &quot;&quot;IsSubsidient&quot;&quot; boolean,
945    &quot;&quot;Subsidient#Id&quot;&quot; uuid,
946    &quot;&quot;Subsidient#ComponentId&quot;&quot; uuid,
947    &quot;&quot;Subsidient&quot;&quot; boolean,
948    &quot;&quot;IsEnqueteadministratie&quot;&quot; boolean,
949    &quot;&quot;Enqueteadministratie#Id&quot;&quot; uuid,
950    &quot;&quot;Enqueteadministratie#ComponentId&quot;&quot; uuid,
951    &quot;&quot;Enqueteadministratie&quot;&quot; boolean,
952    &quot;&quot;XWiQaVjEbD041r7QN0kj2aKeCys_&quot;&quot; boolean,
953    &quot;&quot;X_TVE5FRBaQ97JJQbT7LmX4HBVY_&quot;&quot; boolean,
954    &quot;&quot;BrancheDescription&quot;&quot; character varying(250),
955    &quot;&quot;AdresDescription&quot;&quot; character varying(250),
956    &quot;&quot;PicMWY7oCqeiZMTdDqwFqi1U508_&quot;&quot; character varying(250),
957    &quot;&quot;ProfitDescription&quot;&quot; character varying(100),
958    &quot;&quot;TaalDescription&quot;&quot; character varying(250),
959    &quot;&quot;PostadresDescription&quot;&quot; character varying(250),
960    &quot;&quot;TitelEnAanhefDescription&quot;&quot; character varying(250),
961    &quot;&quot;RechtsvormDescription&quot;&quot; character varying(250),
962    &quot;&quot;LandVanVestigingDescription&quot;&quot; character varying(250),
963    &quot;&quot;AangebrachtDoorDescription&quot;&quot; character varying(250),
964    &quot;&quot;KFEDo6ZYK_ffNCeHuujBCshlPVs_&quot;&quot; character varying(250),
965    &quot;&quot;VerantwoordelijkeDescription&quot;&quot; character varying(250),
966    &quot;&quot;FunctionalState&quot;&quot; integer,
967    &quot;&quot;KlantFinancieleAdministratie#Id&quot;&quot; uuid,
968    &quot;&quot;KlantFinancieleAdministratie#ComponentId&quot;&quot; uuid,
969    &quot;&quot;KlantFinancieleAdministratie&quot;&quot; boolean,
970    &quot;&quot;KlantVerkoopadministratie#Id&quot;&quot; uuid,
971    &quot;&quot;KlantVerkoopadministratie#ComponentId&quot;&quot; uuid,
972    &quot;&quot;KlantVerkoopadministratie&quot;&quot; boolean,
973    &quot;&quot;NQwaM_lfzxIm_JPrPhwruL0YOXY_#Id&quot;&quot; uuid,
974    &quot;&quot;NQwaM_lfzxIm_JPrPhwruL0YOXY_#ComponentId&quot;&quot; uuid,
975    &quot;&quot;NQwaM_lfzxIm_JPrPhwruL0YOXY_&quot;&quot; boolean,
976    &quot;&quot;uSf1yseW4YQ1K6EoHNlzCxPofm0_#Id&quot;&quot; uuid,
977    &quot;&quot;uSf1yseW4YQ1K6EoHNlzCxPofm0_#ComponentId&quot;&quot; uuid,
978    &quot;&quot;uSf1yseW4YQ1K6EoHNlzCxPofm0_&quot;&quot; boolean,
979    &quot;&quot;KlantEvenementadministratie#Id&quot;&quot; uuid,
980    &quot;&quot;KlantEvenementadministratie#ComponentId&quot;&quot; uuid,
981    &quot;&quot;KlantEvenementadministratie&quot;&quot; boolean,
982    &quot;&quot;KlantCursusadministratie#Id&quot;&quot; uuid,
983    &quot;&quot;KlantCursusadministratie#ComponentId&quot;&quot; uuid,
984    &quot;&quot;KlantCursusadministratie&quot;&quot; boolean,
985    &quot;&quot;KlantProspectadministratie#Id&quot;&quot; uuid,
986    &quot;&quot;KlantProspectadministratie#ComponentId&quot;&quot; uuid,
987    &quot;&quot;KlantProspectadministratie&quot;&quot; boolean,
988    &quot;&quot;KlantInkoopadministratie#Id&quot;&quot; uuid,
989    &quot;&quot;KlantInkoopadministratie#ComponentId&quot;&quot; uuid,
990    &quot;&quot;KlantInkoopadministratie&quot;&quot; boolean,
991    &quot;&quot;KlantProjectadministratie#Id&quot;&quot; uuid,
992    &quot;&quot;KlantProjectadministratie#ComponentId&quot;&quot; uuid,
993    &quot;&quot;KlantProjectadministratie&quot;&quot; boolean,
994    &quot;&quot;P0gBTGcrSbl2kK8BM4_24fIeMvk_#Id&quot;&quot; uuid,
995    &quot;&quot;P0gBTGcrSbl2kK8BM4_24fIeMvk_#ComponentId&quot;&quot; uuid,
996    &quot;&quot;P0gBTGcrSbl2kK8BM4_24fIeMvk_&quot;&quot; boolean,
997    &quot;&quot;KlantMain#Id&quot;&quot; uuid,
998    &quot;&quot;KlantMain#ComponentId&quot;&quot; uuid,
999    &quot;&quot;KlantMain&quot;&quot; boolean,
1000    &quot;&quot;8awXARDcCdVtrvN6IRlwAk5UcrI_#Id&quot;&quot; uuid,
1001    &quot;&quot;8awXARDcCdVtrvN6IRlwAk5UcrI_#ComponentId&quot;&quot; uuid,
1002    &quot;&quot;8awXARDcCdVtrvN6IRlwAk5UcrI_&quot;&quot; boolean,
1003    &quot;&quot;MjgFAhRfH64O3M9Ts_5b0ENQDBE_#Id&quot;&quot; uuid,
1004    &quot;&quot;MjgFAhRfH64O3M9Ts_5b0ENQDBE_#ComponentId&quot;&quot; uuid,
1005    &quot;&quot;MjgFAhRfH64O3M9Ts_5b0ENQDBE_&quot;&quot; boolean,
1006    &quot;&quot;LeverancierMain#Id&quot;&quot; uuid,
1007    &quot;&quot;LeverancierMain#ComponentId&quot;&quot; uuid,
1008    &quot;&quot;LeverancierMain&quot;&quot; boolean,
1009    &quot;&quot;2CaNQvGgtPNHP2XCsoKBQEpwmYA_#Id&quot;&quot; uuid,
1010    &quot;&quot;2CaNQvGgtPNHP2XCsoKBQEpwmYA_#ComponentId&quot;&quot; uuid,
1011    &quot;&quot;2CaNQvGgtPNHP2XCsoKBQEpwmYA_&quot;&quot; boolean,
1012    &quot;&quot;kleo39GG1utTUtP0F15mWkXZBFQ_#Id&quot;&quot; uuid,
1013    &quot;&quot;kleo39GG1utTUtP0F15mWkXZBFQ_#ComponentId&quot;&quot; uuid,
1014    &quot;&quot;kleo39GG1utTUtP0F15mWkXZBFQ_&quot;&quot; boolean,
1015    &quot;&quot;d9jEYARbghWBrZU6jKbtZPyZUAk_#Id&quot;&quot; uuid,
1016    &quot;&quot;d9jEYARbghWBrZU6jKbtZPyZUAk_#ComponentId&quot;&quot; uuid,
1017    &quot;&quot;d9jEYARbghWBrZU6jKbtZPyZUAk_&quot;&quot; boolean,
1018    &quot;&quot;CrediteurMain#Id&quot;&quot; uuid,
1019    &quot;&quot;CrediteurMain#ComponentId&quot;&quot; uuid,
1020    &quot;&quot;CrediteurMain&quot;&quot; boolean,
1021    CONSTRAINT &quot;&quot;pk_OrganisatieQmo_Organisatie_QueryModelObjects_Imp&quot;&quot; PRIMARY KEY (&quot;&quot;Id&quot;&quot;)
1022  )&quot;;
1023      #endregion Bug1285
1024      [Test, IssueLink(&quot;https:&amp;bsol;&amp;bsol;github.com/npgsql/npgsql/issues/2849&quot;)]
1025      public async Task Chunked_string_write_buffer_encoding_space()
1026      {
1027          await using var dataSource = CreateDataSource(csb =&gt; csb.WriteBufferSize = 8192);
1028          await using var conn = await dataSource.OpenConnectionAsync();
1029          var tableName = await CreateTempTable(conn, &quot;col1 text, col2 text&quot;);
1030          await using var binaryImporter = await conn.BeginBinaryImportAsync($&quot;COPY {tableName} FROM STDIN (FORMAT BINARY);&quot;);
1031          await binaryImporter.StartRowAsync();
1032          var almostBufferFillingString = new string(&#x27;a&#x27;, 8152);
1033          await binaryImporter.WriteAsync(almostBufferFillingString, NpgsqlDbType.Text);
1034          var unicodeCharacterThatEncodesToThreeBytesInUtf8 = &#x27;\uD55C&#x27;;
1035          var longStringStartingWithAforementionedUnicodeCharacter = unicodeCharacterThatEncodesToThreeBytesInUtf8 + new string(&#x27;a&#x27;, 10000);
1036          await binaryImporter.WriteAsync(longStringStartingWithAforementionedUnicodeCharacter, NpgsqlDbType.Text);
1037          await binaryImporter.CompleteAsync();
1038      }
1039      [Test, IssueLink(&quot;https:&amp;bsol;&amp;bsol;github.com/npgsql/npgsql/issues/2849&quot;)]
1040      public async Task Chunked_char_array_write_buffer_encoding_space()
1041      {
1042          await using var dataSource = CreateDataSource(csb =&gt; csb.WriteBufferSize = 8192);
1043          await using var conn = await dataSource.OpenConnectionAsync();
1044          var tableName = await CreateTempTable(conn, &quot;col1 text, col2 text&quot;);
1045          await using var binaryImporter = await conn.BeginBinaryImportAsync($&quot;COPY {tableName} FROM STDIN (FORMAT BINARY);&quot;);
1046          await binaryImporter.StartRowAsync();
1047          var almostBufferFillingString = new string(&#x27;a&#x27;, 8152);
1048          await binaryImporter.WriteAsync(almostBufferFillingString, NpgsqlDbType.Text);
1049          var unicodeCharacterThatEncodesToThreeBytesInUtf8 = &#x27;\uD55C&#x27;;
1050          var longStringStartingWithAforementionedUnicodeCharacter = unicodeCharacterThatEncodesToThreeBytesInUtf8 + new string(&#x27;a&#x27;, 10000);
1051          await binaryImporter.WriteAsync(longStringStartingWithAforementionedUnicodeCharacter.ToCharArray(), NpgsqlDbType.Text);
1052          await binaryImporter.CompleteAsync();
1053      }
1054      [Test, IssueLink(&quot;https:&amp;bsol;&amp;bsol;github.com/npgsql/npgsql/issues/2371&quot;)]
1055      public async Task NRE_in_BeginTextExport()
1056      {
1057          await using var conn = await OpenConnectionAsync();
1058          var funcName = await GetTempFunctionName(conn);
1059          await using var transaction = await conn.BeginTransactionAsync();
1060          await conn.ExecuteNonQueryAsync($&quot;CREATE OR REPLACE FUNCTION {funcName}() RETURNS TABLE (i INT) AS $$ BEGIN RETURN QUERY SELECT s.a FROM pg_stat_activity p; end; $$ LANGUAGE plpgsql;&quot;);
1061          using var reader = await conn.BeginTextExportAsync($&quot;copy (select * FROM {funcName}())  TO STDOUT WITH (format csv)&quot;);
1062          Assert.That(() =&gt; reader.ReadLine(), Throws.Exception
1063              .TypeOf&lt;PostgresException&gt;()
1064              .With.Property(nameof(PostgresException.SqlState)).EqualTo(PostgresErrorCodes.UndefinedTable)
1065          );
1066      }
1067      public enum TestEnum
1068      {
1069          One,
1070          Two
1071      }
1072      class SomeComposite
1073      {
1074          public TestEnum Test { get; set; }
1075          public int X { get; set; }
1076          public string SomeText { get; set; } = &quot;&quot;;
1077      }
1078      [Test]
1079      public async Task CompositePostgresType()
1080      {
1081          await using var adminConnection = await OpenConnectionAsync();
1082          var type = await GetTempTypeName(adminConnection);
1083          var func = await GetTempFunctionName(adminConnection);
1084          await adminConnection.ExecuteNonQueryAsync($&quot;CREATE TYPE {type} as (x int, some_text text, test int)&quot;);
1085          var dataSourceBuilder = CreateDataSourceBuilder();
1086          dataSourceBuilder.MapComposite&lt;SomeComposite&gt;(type);
1087          await using var dataSource = dataSourceBuilder.Build();
1088          await using var connection = await dataSource.OpenConnectionAsync();
1089          await connection.ExecuteNonQueryAsync(@$&quot;
1090  CREATE OR REPLACE FUNCTION {func}(id int, out comp1 {type}, OUT comp2 {type}[])
1091  LANGUAGE plpgsql AS
1092  $$
1093  BEGIN
1094      comp1 = ROW(9, &#x27;bar&#x27;, 1)::{type};
1095      comp2 = ARRAY[ROW(9, &#x27;bar&#x27;, 1)::{type}];
1096  END;
1097  $$;&quot;);
1098          Assert.ThrowsAsync&lt;InvalidCastException&gt;(async () =&gt; await connection.ExecuteScalarAsync($&quot;SELECT {func}(0)&quot;));
1099      }
1100      [Test]
1101      [IssueLink(&quot;https:&amp;bsol;&amp;bsol;github.com/npgsql/npgsql/issues/3117&quot;)]
1102      public void Bug3117()
1103      {
1104          const string OkCommand = &quot;SELECT 1&quot;;
1105          const string ErrorCommand = &quot;SELECT * FROM public.imnotexist&quot;;
1106          using var dataSource = CreateDataSource();
1107          using (var conn = dataSource.OpenConnection())
1108          {
1109              var okCommand = new NpgsqlCommand(OkCommand, conn);
1110              okCommand.Prepare();
1111              using (okCommand.ExecuteReader()) { }
1112              var errorCommand = new NpgsqlCommand(ErrorCommand, conn);
1113              Assert.That(() =&gt; errorCommand.Prepare(), Throws.Exception
1114                  .TypeOf&lt;PostgresException&gt;()
1115                  .With.Property(nameof(PostgresException.SqlState)).EqualTo(PostgresErrorCodes.UndefinedTable));
1116          }
1117          using (var conn = dataSource.OpenConnection())
1118          {
1119              var okCommand = new NpgsqlCommand(OkCommand, conn);
1120              okCommand.Prepare();
1121              using (okCommand.ExecuteReader()) { }
1122          }
1123      }
1124      [Test, IssueLink(&quot;https:&amp;bsol;&amp;bsol;github.com/npgsql/npgsql/issues/3209&quot;)]
1125      public async Task Bug3209()
1126      {
1127          await using var conn = CreateConnection();
1128          await conn.CloseAsync();
1129          await conn.OpenAsync();
1130          await conn.CloseAsync();
1131          Assert.That(conn.State, Is.EqualTo(ConnectionState.Closed));
1132      }
1133      [Test, IssueLink(&quot;https:&amp;bsol;&amp;bsol;github.com/npgsql/npgsql/issues/3373&quot;)]
1134      public async Task Bug3373()
1135      {
1136          await using var conn = await OpenConnectionAsync();
1137          using var cmd = conn.CreateCommand();
1138          cmd.CommandText = &quot;SELECT repeat(&#x27;1&#x27;, 10000); SELECT * from pg_sleep(3)&quot;;
1139          cmd.CommandTimeout = 0;
1140          await using var reader = await cmd.ExecuteReaderAsync();
1141          Assert.DoesNotThrowAsync(async () =&gt; await reader.NextResultAsync());
1142      }
1143      [Test, IssueLink(&quot;https:&amp;bsol;&amp;bsol;github.com/npgsql/npgsql/issues/3649&quot;)]
1144      public async Task Bug3649()
1145      {
1146          await using var conn = await OpenConnectionAsync();
1147          var table = await CreateTempTable(conn, &quot;value integer&quot;);
1148          using (var importer = await conn.BeginBinaryImportAsync($&quot;COPY {table} (value) FROM STDIN (FORMAT binary)&quot;))
1149          {
1150              await importer.StartRowAsync();
1151              await importer.WriteAsync(DBNull.Value, NpgsqlDbType.Integer);
1152              await importer.StartRowAsync();
1153              await importer.WriteAsync(1, NpgsqlDbType.Integer);
1154              await importer.StartRowAsync();
1155              await importer.WriteAsync(2, NpgsqlDbType.Integer);
1156              await importer.CompleteAsync();
1157          }
1158          using (var exporter = await conn.BeginBinaryExportAsync($&quot;COPY {table} (value) TO STDIN (FORMAT binary)&quot;))
1159          {
1160              await exporter.StartRowAsync();
1161              Assert.IsTrue(exporter.IsNull);
1162              await exporter.SkipAsync();
1163              await exporter.StartRowAsync();
1164              Assert.AreEqual(1, await exporter.ReadAsync&lt;int?&gt;());
1165              await exporter.StartRowAsync();
1166              Assert.AreEqual(2, await exporter.ReadAsync&lt;int?&gt;());
1167          }
1168      }
1169      [Test]
1170      [IssueLink(&quot;https:&amp;bsol;&amp;bsol;github.com/npgsql/npgsql/issues/3839&quot;)]
1171      public async Task SingleThreadedSynchronizationContext_deadlock()
1172      {
1173          var syncContext = new SingleThreadSynchronizationContext(nameof(SingleThreadedSynchronizationContext_deadlock));
1174          using (var _ = syncContext.Enter())
1175          {
1176              await Task.Yield();
1177              using var connection = OpenConnection();
1178              var data = new string(&#x27;x&#x27;, 5_000_000);
1179              using var cmd = new NpgsqlCommand(&quot;SELECT generate_series(1, 500000); SELECT @p&quot;, connection);
1180              cmd.Parameters.AddWithValue(&quot;p&quot;, NpgsqlDbType.Text, data);
1181              cmd.ExecuteNonQuery();
1182          }
1183          await Task.Yield();
1184      }
1185      [Test]
1186      [IssueLink(&quot;https:&amp;bsol;&amp;bsol;github.com/npgsql/npgsql/issues/3924&quot;)]
1187      public async Task Bug3924()
1188      {
1189          var csb = new NpgsqlConnectionStringBuilder(ConnectionString)
1190          {
1191              CommandTimeout = 10,
1192              KeepAlive = 5,
1193          };
1194          await using var postmaster = PgPostmasterMock.Start(csb.ConnectionString);
1195          await using var dataSource = CreateDataSource(postmaster.ConnectionString);
1196          await using var conn = await dataSource.OpenConnectionAsync();
1197          var serverMock = await postmaster.WaitForServerConnection();
1198          using (var cmd = conn.CreateCommand())
1199          {
1200              cmd.CommandTimeout = 1;
1201              cmd.CommandText = &quot;SELECT 1&quot;;
1202              var queryTask = cmd.ExecuteNonQueryAsync();
1203              await serverMock.ExpectExtendedQuery();
1204              _ = serverMock.WriteScalarResponseAndFlush(1);
1205              await queryTask;
1206          }
1207          await serverMock.ExpectMessage(FrontendMessageCode.Sync);
1208          await Task.Delay(1000);
1209          _ = serverMock.WriteReadyForQuery().FlushAsync();
1210          using (var cmd = conn.CreateCommand())
1211          {
1212              cmd.CommandTimeout = 1;
1213              cmd.CommandText = &quot;SELECT 1&quot;;
1214              var queryTask = cmd.ExecuteNonQueryAsync();
1215              await serverMock.ExpectExtendedQuery();
1216              _ = serverMock.WriteScalarResponseAndFlush(1);
1217              Assert.DoesNotThrowAsync(async () =&gt; await queryTask);
1218          }
1219      }
1220      [Test]
1221      [IssueLink(&quot;https:&amp;bsol;&amp;bsol;github.com/npgsql/npgsql/issues/4099&quot;)]
1222      public async Task Bug4099()
1223      {
1224          var csb = new NpgsqlConnectionStringBuilder(ConnectionString)
1225          {
1226              Multiplexing = true,
1227              MaxPoolSize = 1
1228          };
1229          await using var postmaster = PgPostmasterMock.Start(csb.ConnectionString);
1230          await using var dataSource = CreateDataSource(postmaster.ConnectionString);
1231          await using var firstConn = await dataSource.OpenConnectionAsync();
1232          await using var secondConn = await dataSource.OpenConnectionAsync();
1233          var firstQuery = firstConn.ExecuteScalarAsync(&quot;SELECT data&quot;);
1234          var server = await postmaster.WaitForServerConnection();
1235          await server.ExpectExtendedQuery();
1236          var secondQuery = secondConn.ExecuteScalarAsync(&quot;SELECT other_data&quot;);
1237          await server.ExpectExtendedQuery();
1238          var data = new byte[10000];
1239          await server
1240              .WriteParseComplete()
1241              .WriteBindComplete()
1242              .WriteRowDescription(new FieldDescription(PostgresTypeOIDs.Bytea))
1243              .WriteDataRowWithFlush(data);
1244          var otherData = new byte[10];
1245          await server
1246              .WriteCommandComplete()
1247              .WriteReadyForQuery()
1248              .WriteParseComplete()
1249              .WriteBindComplete()
1250              .WriteRowDescription(new FieldDescription(PostgresTypeOIDs.Bytea))
1251              .WriteDataRow(otherData)
1252              .WriteCommandComplete()
1253              .WriteReadyForQuery()
1254              .FlushAsync();
1255          Assert.That(data, Is.EquivalentTo((byte[])(await firstQuery)!));
1256          Assert.That(otherData, Is.EquivalentTo((byte[])(await secondQuery)!));
1257      }
1258      [Test]
1259      [IssueLink(&quot;https:&amp;bsol;&amp;bsol;github.com/npgsql/npgsql/issues/4123&quot;)]
1260      public async Task Bug4123()
1261      {
1262          await using var conn = await OpenConnectionAsync();
1263          await using var cmd = new NpgsqlCommand(&quot;SELECT 1&quot;, conn);
1264          await using var rdr = await cmd.ExecuteReaderAsync();
1265          await rdr.ReadAsync();
1266          await using var stream = await rdr.GetStreamAsync(0);
1267          Assert.DoesNotThrowAsync(stream.FlushAsync);
1268          Assert.DoesNotThrow(stream.Flush);
1269      }
1270  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from npgsql-MDEwOlJlcG9zaXRvcnkyODgzNTc0-flat-MiscTypeTests.cs</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from npgsql-MDEwOlJlcG9zaXRvcnkyODgzNTc0-flat-BugTests.cs</div>
                </div>
                <div class="column column_space"><pre><code>200          Assert.That(reader.GetInt32(0), Is.EqualTo(8));
201      }
</pre></code></div>
                <div class="column column_space"><pre><code>231          Assert.That(reader.GetInt32(0), Is.EqualTo(8));
232      }
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    