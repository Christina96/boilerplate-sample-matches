
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 29.78723404255319%, Tokens: 11, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>MudBlazor-MDEwOlJlcG9zaXRvcnkyODg0Mjg2NzY=-flat-OverlayTests.cs</h3>
            <pre><code>1  using System.Threading.Tasks;
2  using Bunit;
3  using FluentAssertions;
4  using Microsoft.AspNetCore.Components.Web;
5  using NUnit.Framework;
6  namespace MudBlazor.UnitTests.Components
7  {
8      [TestFixture]
9      public class OverlayTests : BunitTest
10      {
11          [Test]
12          public void MarkupShouldBeEmptyTest()
13          {
14              var comp = Context.RenderComponent<MudOverlay>();
15              comp.Markup.Should().BeEmpty();
16          }
17          [Test]
18          public void MarkupShouldNotBeEmptyTest()
19          {
20              var comp = Context.RenderComponent<MudOverlay>(parameters => parameters
21                  .Add(p => p.Visible, true)
22              );
23              comp.Markup.Should().NotBeEmpty();
24          }
25          [Test]
26          public async Task OverlayShouldCloseOnClickTest()
27          {
28              var comp = Context.RenderComponent<MudOverlay>(parameters => parameters
29                  .Add(p => p.Visible, true)
30                  .Add(p => p.AutoClose, true)
31              );
32              await comp.Find("div.mud-overlay").ClickAsync(null);
33              comp.Markup.Should().BeEmpty();
34          }
35          [Test]
36          public async Task OverlayShouldNotCloseOnClickTest()
37          {
<span onclick='openModal()' class='match'>38              var comp = Context.RenderComponent<MudOverlay>(parameters => parameters
39                  .Add(p => p.Visible, true)
40              );
41              await comp.Find("div.mud-overlay").ClickAsync(null);
42              comp.Markup.Should().NotBeEmpty();
43              comp.SetParam(nameof(MudOverlay.AutoClose), false);
44              await comp.Find("div.mud-overlay").ClickAsync(null);
45              comp.Markup.Should().NotBeEmpty();
</span>46          }
47          [Test]
48          public async Task LifetimeTest()
49          {
50              var counter = 0;
51              void OnClickHandler(MouseEventArgs args) => counter++;
52              var comp = Context.RenderComponent<MudOverlay>(parameters => parameters
53                  .Add(p => p.Visible, true)
54                  .Add(p => p.OnClick, OnClickHandler)
55              );
56              await comp.Find("div.mud-overlay").ClickAsync(null);
57              comp.Markup.Trim().Should().NotBeEmpty();
58              counter.Should().Be(1);
59          }
60      }
61  }
</code></pre>
        </div>
        <div class="column">
            <h3>MudBlazor-MDEwOlJlcG9zaXRvcnkyODg0Mjg2NzY=-flat-MudDrawer.razor.cs</h3>
            <pre><code>1  using System;
2  using System.Threading;
3  using System.Threading.Tasks;
4  using Microsoft.AspNetCore.Components;
5  using MudBlazor.Extensions;
6  using MudBlazor.Interfaces;
7  using MudBlazor.Services;
8  using MudBlazor.Utilities;
9  namespace MudBlazor
10  {
11      public partial class MudDrawer : MudComponentBase, IDisposable, INavigationEventReceiver
12      {
13          private double _height;
14          private ElementReference _contentRef;
15          private DrawerClipMode _clipMode;
16          private bool? _isOpenWhenLarge = null;
17          private bool _open, _rtl, _isRendered, _initial = true, _keepInitialState, _fixed = true;
18          private Breakpoint _breakpoint = Breakpoint.Md, _screenBreakpoint = Breakpoint.None;
19          private Guid _breakpointListenerSubscriptionId;
20          private bool OverlayVisible => _open && !DisableOverlay &&
21              (Variant == DrawerVariant.Temporary ||
22               (_screenBreakpoint < Breakpoint && Variant == DrawerVariant.Mini) ||
23               (_screenBreakpoint < Breakpoint && Variant == DrawerVariant.Responsive));
24          protected string Classname =>
25          new CssBuilder("mud-drawer")
<span onclick='openModal()' class='match'>26            .AddClass($"mud-drawer-fixed", Fixed)
27            .AddClass($"mud-drawer-pos-{GetPosition()}")
28            .AddClass($"mud-drawer--open", Open)
29            .AddClass($"mud-drawer--closed", !Open)
30            .AddClass($"mud-drawer--initial", _initial)
31            .AddClass($"mud-drawer-{Breakpoint.ToDescriptionString()}")
32            .AddClass($"mud-drawer-clipped-{_clipMode.ToDescriptionString()}")
33            .AddClass($"mud-theme-{Color.ToDescriptionString()}", Color != Color.Default)
</span>34            .AddClass($"mud-elevation-{Elevation}")
35            .AddClass($"mud-drawer-{Variant.ToDescriptionString()}")
36            .AddClass(Class)
37          .Build();
38          protected string OverlayClass =>
39          new CssBuilder("mud-drawer-overlay mud-overlay-drawer")
40            .AddClass($"mud-drawer-pos-{GetPosition()}")
41            .AddClass($"mud-drawer-overlay--open", Open)
42            .AddClass($"mud-drawer-overlay-{Variant.ToDescriptionString()}")
43            .AddClass($"mud-drawer-overlay-{Breakpoint.ToDescriptionString()}")
44            .AddClass($"mud-drawer-overlay--initial", _initial)
45          .Build();
46          protected string Stylename =>
47          new StyleBuilder()
48              .AddStyle("--mud-drawer-width", Width, !string.IsNullOrWhiteSpace(Width) && (!Fixed || Variant == DrawerVariant.Temporary))
49              .AddStyle("height", Height, !string.IsNullOrWhiteSpace(Height))
50              .AddStyle("--mud-drawer-content-height",
51                  string.IsNullOrWhiteSpace(Height) ? _height.ToPx() : Height,
52                  Anchor == Anchor.Bottom || Anchor == Anchor.Top)
53              .AddStyle("visibility", "hidden", string.IsNullOrWhiteSpace(Height) && _height == 0 && (Anchor == Anchor.Bottom || Anchor == Anchor.Top))
54              .AddStyle(Style)
55          .Build();
56          [Inject] public IBreakpointService Breakpointistener { get; set; }
57          [CascadingParameter] MudDrawerContainer DrawerContainer { get; set; }
58          [CascadingParameter(Name = "RightToLeft")]
59          bool RightToLeft
60          {
61              get => _rtl;
62              set
63              {
64                  if (_rtl != value)
65                  {
66                      _rtl = value;
67                      DrawerContainer?.FireDrawersChanged();
68                  }
69              }
70          }
71          [Parameter]
72          [Category(CategoryTypes.Drawer.Behavior)]
73          public bool Fixed
74          {
75              get => _fixed && DrawerContainer is MudLayout;
76              set
77              {
78                  if (_fixed == value)
79                      return;
80                  _fixed = value;
81              }
82          }
83          [Parameter]
84          [Category(CategoryTypes.Drawer.Appearance)]
85          public int Elevation { set; get; } = 1;
86          [Parameter]
87          [Category(CategoryTypes.Drawer.Behavior)]
88          public Anchor Anchor { get; set; } = Anchor.Start;
89          [Parameter]
90          [Category(CategoryTypes.Drawer.Appearance)]
91          public Color Color { get; set; } = Color.Default;
92          [Parameter]
93          [Category(CategoryTypes.Drawer.Behavior)]
94          public DrawerVariant Variant { get; set; } = DrawerVariant.Responsive;
95          [Parameter]
96          [Category(CategoryTypes.Drawer.Behavior)]
97          public RenderFragment ChildContent { get; set; }
98          [Parameter]
99          [Category(CategoryTypes.Drawer.Behavior)]
100          public bool DisableOverlay { get; set; } = false;
101          [Parameter]
102          [Category(CategoryTypes.Drawer.Behavior)]
103          public bool PreserveOpenState { get; set; } = false;
104          [Parameter]
105          [Category(CategoryTypes.Drawer.Behavior)]
106          public bool OpenMiniOnHover { get; set; }
107          [Parameter]
108          [Category(CategoryTypes.Drawer.Behavior)]
109          public Breakpoint Breakpoint
110          {
111              get => _breakpoint;
112              set
113              {
114                  if (value == _breakpoint)
115                      return;
116                  _breakpoint = value;
117                  if (_isRendered)
118                  {
119                      UpdateBreakpointState(_screenBreakpoint);
120                  }
121                  DrawerContainer?.FireDrawersChanged();
122              }
123          }
124          [Parameter]
125          [Category(CategoryTypes.Drawer.Behavior)]
126          public bool Open
127          {
128              get => _open;
129              set
130              {
131                  if (_open == value)
132                  {
133                      return;
134                  }
135                  _open = value;
136                  if (_isRendered && _initial && !_keepInitialState)
137                  {
138                      _initial = false;
139                  }
140                  if (_keepInitialState)
141                  {
142                      _keepInitialState = false;
143                  }
144                  if (_isRendered && value && (Anchor == Anchor.Top || Anchor == Anchor.Bottom))
145                  {
146                      _ = UpdateHeight();
147                  }
148                  DrawerContainer?.FireDrawersChanged();
149                  OpenChanged.InvokeAsync(_open);
150              }
151          }
152          [Parameter] public EventCallback<bool> OpenChanged { get; set; }
153          [Parameter]
154          [Category(CategoryTypes.Drawer.Appearance)]
155          public string Width { get; set; }
156          [Parameter]
157          [Category(CategoryTypes.Drawer.Appearance)]
158          public string MiniWidth { get; set; }
159          [Parameter]
160          [Category(CategoryTypes.Drawer.Appearance)]
161          public string Height { get; set; }
162          [Parameter]
163          [Category(CategoryTypes.Drawer.Behavior)]
164          public DrawerClipMode ClipMode
165          {
166              get => _clipMode;
167              set
168              {
169                  if (_clipMode == value)
170                  {
171                      return;
172                  }
173                  _clipMode = value;
174                  if (Fixed)
175                  {
176                      DrawerContainer?.FireDrawersChanged();
177                  }
178                  StateHasChanged();
179              }
180          }
181          protected override void OnInitialized()
182          {
183              if (Variant != DrawerVariant.Temporary)
184              {
185                  DrawerContainer?.Add(this);
186              }
187              base.OnInitialized();
188          }
189          protected override async Task OnAfterRenderAsync(bool firstRender)
190          {
191              if (firstRender)
192              {
193                  await UpdateHeight();
194                  var result = await Breakpointistener.SubscribeAsync(UpdateBreakpointState);
195                  var currentBreakpoint = result.Breakpoint;
196                  _breakpointListenerSubscriptionId = result.SubscriptionId;
197                  _screenBreakpoint = result.Breakpoint;
198                  if (_screenBreakpoint < Breakpoint && _open)
199                  {
200                      _keepInitialState = true;
201                      await OpenChanged.InvokeAsync(false);
202                  }
203                  _isRendered = true;
204                  if (string.IsNullOrWhiteSpace(Height) && (Anchor == Anchor.Bottom || Anchor == Anchor.Top))
205                  {
206                      StateHasChanged();
207                  }
208              }
209              await base.OnAfterRenderAsync(firstRender);
210          }
211          public void Dispose()
212          {
213              Dispose(true);
214              GC.SuppressFinalize(this);
215          }
216          int _disposeCount;
217          public virtual void Dispose(bool disposing)
218          {
219              if (Interlocked.Increment(ref _disposeCount) == 1)
220              {
221                  if (disposing)
222                  {
223                      DrawerContainer?.Remove(this);
224                      if (_breakpointListenerSubscriptionId != default)
225                      {
226                          Breakpointistener.UnsubscribeAsync(_breakpointListenerSubscriptionId).AndForget();
227                      }
228                  }
229              }
230          }
231          private void CloseDrawer()
232          {
233              if (Open)
234              {
235                  OpenChanged.InvokeAsync(false);
236              }
237          }
238          public async Task OnNavigation()
239          {
240              if (Variant == DrawerVariant.Temporary ||
241                  (Variant == DrawerVariant.Responsive && await Breakpointistener.GetBreakpoint() < Breakpoint))
242              {
243                  await OpenChanged.InvokeAsync(false);
244              }
245          }
246          private void ResizeListener_OnBreakpointChanged(object sender, Breakpoint breakpoint)
247          {
248              if (!_isRendered)
249                  return;
250              InvokeAsync(() => UpdateBreakpointState(breakpoint));
251          }
252          private async Task UpdateHeight()
253          {
254              _height = (await _contentRef.MudGetBoundingClientRectAsync())?.Height ?? 0;
255          }
256          private async void UpdateBreakpointState(Breakpoint breakpoint)
257          {
258              var isStateChanged = false;
259              if (breakpoint == Breakpoint.None)
260              {
261                  breakpoint = await Breakpointistener.GetBreakpoint();
262              }
263              if (breakpoint < Breakpoint && _screenBreakpoint >= Breakpoint && (Variant == DrawerVariant.Responsive || Variant == DrawerVariant.Mini))
264              {
265                  _isOpenWhenLarge = Open;
266                  await OpenChanged.InvokeAsync(false);
267                  isStateChanged = true;
268              }
269              else if (breakpoint >= Breakpoint && _screenBreakpoint < Breakpoint && (Variant == DrawerVariant.Responsive || Variant == DrawerVariant.Mini))
270              {
271                  if (Open && PreserveOpenState)
272                  {
273                      DrawerContainer?.FireDrawersChanged();
274                      isStateChanged = true;
275                  }
276                  else if (_isOpenWhenLarge != null)
277                  {
278                      await OpenChanged.InvokeAsync(_isOpenWhenLarge.Value);
279                      _isOpenWhenLarge = null;
280                      isStateChanged = true;
281                  }
282              }
283              _screenBreakpoint = breakpoint;
284              if (isStateChanged)
285              {
286                  StateHasChanged();
287              }
288          }
289          internal string GetPosition()
290          {
291              switch (Anchor)
292              {
293                  case Anchor.Start:
294                      return RightToLeft ? "right" : "left";
295                  case Anchor.End:
296                      return RightToLeft ? "left" : "right";
297                  default: break;
298              }
299              return Anchor.ToDescriptionString();
300          }
301          private bool closeOnMouseLeave = false;
302          public async void OnMouseEnter()
303          {
304              if (Variant == DrawerVariant.Mini && !Open && OpenMiniOnHover)
305              {
306                  closeOnMouseLeave = true;
307                  await OpenChanged.InvokeAsync(true);
308              }
309          }
310          public async void OnMouseLeave()
311          {
312              if (Variant == DrawerVariant.Mini && Open && closeOnMouseLeave)
313              {
314                  closeOnMouseLeave = false;
315                  await OpenChanged.InvokeAsync(false);
316              }
317          }
318      }
319  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from MudBlazor-MDEwOlJlcG9zaXRvcnkyODg0Mjg2NzY=-flat-OverlayTests.cs</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from MudBlazor-MDEwOlJlcG9zaXRvcnkyODg0Mjg2NzY=-flat-MudDrawer.razor.cs</div>
                </div>
                <div class="column column_space"><pre><code>38              var comp = Context.RenderComponent<MudOverlay>(parameters => parameters
39                  .Add(p => p.Visible, true)
40              );
41              await comp.Find("div.mud-overlay").ClickAsync(null);
42              comp.Markup.Should().NotBeEmpty();
43              comp.SetParam(nameof(MudOverlay.AutoClose), false);
44              await comp.Find("div.mud-overlay").ClickAsync(null);
45              comp.Markup.Should().NotBeEmpty();
</pre></code></div>
                <div class="column column_space"><pre><code>26            .AddClass($"mud-drawer-fixed", Fixed)
27            .AddClass($"mud-drawer-pos-{GetPosition()}")
28            .AddClass($"mud-drawer--open", Open)
29            .AddClass($"mud-drawer--closed", !Open)
30            .AddClass($"mud-drawer--initial", _initial)
31            .AddClass($"mud-drawer-{Breakpoint.ToDescriptionString()}")
32            .AddClass($"mud-drawer-clipped-{_clipMode.ToDescriptionString()}")
33            .AddClass($"mud-theme-{Color.ToDescriptionString()}", Color != Color.Default)
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    