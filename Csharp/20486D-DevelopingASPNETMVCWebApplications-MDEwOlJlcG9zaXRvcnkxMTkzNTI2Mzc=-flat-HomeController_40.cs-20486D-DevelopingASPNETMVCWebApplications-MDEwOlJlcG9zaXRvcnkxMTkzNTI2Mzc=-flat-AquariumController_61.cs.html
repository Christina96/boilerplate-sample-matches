
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 55.670103092783506%, Tokens: 43, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>20486D-DevelopingASPNETMVCWebApplications-MDEwOlJlcG9zaXRvcnkxMTkzNTI2Mzc=-flat-HomeController_40.cs</h3>
            <pre><code>1  using System;
2  using System.Collections.Generic;
3  using System.IO;
4  using System.Linq;
5  using System.Threading.Tasks;
6  using AzureStorageDemo.Data;
7  using AzureStorageDemo.Models;
8  using Microsoft.AspNetCore.Hosting;
9  using Microsoft.AspNetCore.Mvc;
10  namespace AzureStorageDemo.Controllers
11  {
12      public class HomeController : Controller
13      {
14          private PhotoContext _dbContext;
15          private IHostingEnvironment _environment;
16          public HomeController(PhotoContext dbContext, IHostingEnvironment environment)
17          {
18              _dbContext = dbContext;
19              _environment = environment;
20          }
21          public IActionResult Index()
22          {
<span onclick='openModal()' class='match'>23              return View(_dbContext.Photos.ToList());
24          }
25          public IActionResult GetImage(int id)
26          {
27              Photo requestedPhoto = _dbContext.Photos.FirstOrDefault(i => i.Id == id);
28              if (requestedPhoto != null)
29              {
30                  string webRootpath = _environment.WebRootPath;
31                  string folderPath = "\\images\\";
32                  string fullPath = webRootpath + folderPath + requestedPhoto.ImageName;
33                  if (System.IO.File.Exists(fullPath))
34                  {
35                      FileStream fileOnDisk = new FileStream(fullPath, FileMode.Open);
36                      byte[] fileBytes;
37                      using (BinaryReader br = new BinaryReader(fileOnDisk))
38                      {
39                          fileBytes = br.ReadBytes((int)fileOnDisk.Length);
40                      }
41                      return File(fileBytes, requestedPhoto.ImageMimeType);
42                  }
43                  else
44                  {
45                      if (requestedPhoto.PhotoFile.Length > 0)
46                      {
47                          return File(requestedPhoto.PhotoFile, requestedPhoto.ImageMimeType);
48                      }
49                      else
50                      {
51                          return NotFound();
52                      }
53                  }
54              }
55              else
56              {
57                  return NotFound();
58              }
59          }
60      }
61  }
</span></code></pre>
        </div>
        <div class="column">
            <h3>20486D-DevelopingASPNETMVCWebApplications-MDEwOlJlcG9zaXRvcnkxMTkzNTI2Mzc=-flat-AquariumController_61.cs</h3>
            <pre><code>1  using System;
2  using System.Collections.Generic;
3  using System.IO;
4  using System.Linq;
5  using System.Threading.Tasks;
6  using Microsoft.AspNetCore.Hosting;
7  using Microsoft.AspNetCore.Mvc;
8  using Microsoft.AspNetCore.Mvc.Rendering;
9  using Microsoft.EntityFrameworkCore;
10  using Underwater.Models;
11  using Underwater.Repositories;
12  namespace Underwater.Controllers
13  {
14      public class AquariumController : Controller
15      {
16          private IUnderwaterRepository _repository;
17          private IHostingEnvironment _environment;
18          public AquariumController(IUnderwaterRepository repository, IHostingEnvironment environment)
19          {
20              _repository = repository;
21              _environment = environment;
22          }
23          public IActionResult Index()
24          {
25              return View(_repository.Getfishes());
26          }
27          public IActionResult Details(int id)
28          {
29              var fish = _repository.GetFishById(id);
30              if (fish == null)
31              {
32                  return NotFound();
33              }
34              return View(fish);
35          }
36          [HttpGet]
37          public IActionResult Create()
38          {
39              PopulateAquariumsDropDownList();
40              return View();
41          }
42          [HttpPost, ActionName("Create")]
43          public IActionResult CreatePost(Fish fish)
44          {
45              if (ModelState.IsValid)
46              {
47                  _repository.AddFish(fish);
48                  return RedirectToAction(nameof(Index));
49              }
50              PopulateAquariumsDropDownList(fish.AquariumId);
51              return View(fish);
52          }
53          [HttpGet]
54          public IActionResult Edit(int id)
55          {
56              Fish fish = _repository.GetFishById(id);
57              if (fish == null)
58              {
59                  return NotFound();
60              }
61              PopulateAquariumsDropDownList(fish.AquariumId);
62              return View(fish);
63          }
64          [HttpPost, ActionName("Edit")]
65          public async Task<IActionResult> EditPost(int id)
66          {
67              var fishToUpdate = _repository.GetFishById(id);
68              bool isUpdated = await TryUpdateModelAsync<Fish>(
69                                  fishToUpdate,
70                                  "",
71                                  f => f.AquariumId,
72                                  f => f.Name,
73                                  f => f.ScientificName
74                                 );
75              if (isUpdated)
76              {
77                  _repository.SaveChanges();
78                  return RedirectToAction(nameof(Index));
79              }
80              PopulateAquariumsDropDownList(fishToUpdate.AquariumId);
81              return View(fishToUpdate);
82          }
83          [HttpGet]
84          public IActionResult Delete(int id)
85          {
86              var fish = _repository.GetFishById(id);
87              if (fish == null)
88              {
89                  return NotFound();
90              }
91              return View(fish);
92          }
93          [HttpPost, ActionName("Delete")]
94          public IActionResult DeleteConfirmed(int id)
95          {
96              _repository.RemoveFish(id);
97              return RedirectToAction(nameof(Index));
98          }
99          private void PopulateAquariumsDropDownList(int? selectedAquarium = null)
100          {
101              var aquariums = _repository.PopulateAquariumsDropDownList();
<span onclick='openModal()' class='match'>102              ViewBag.AquariumID = new SelectList(aquariums.AsNoTracking(), "AquariumId", "Name", selectedAquarium);
103          }
104          public IActionResult GetImage(int id)
105          {
106              Fish requestedFish = _repository.GetFishById(id);
107              if (requestedFish != null)
108              {
109                  string webRootpath = _environment.WebRootPath;
110                  string folderPath = "\\images\\";
111                  string fullPath = webRootpath + folderPath + requestedFish.ImageName;
112                  if (System.IO.File.Exists(fullPath))
113                  {
114                      FileStream fileOnDisk = new FileStream(fullPath, FileMode.Open);
115                      byte[] fileBytes;
116                      using (BinaryReader br = new BinaryReader(fileOnDisk))
117                      {
118                          fileBytes = br.ReadBytes((int)fileOnDisk.Length);
119                      }
120                      return File(fileBytes, requestedFish.ImageMimeType);
121                  }
122                  else
123                  {
124                      if (requestedFish.PhotoFile.Length > 0)
125                      {
126                          return File(requestedFish.PhotoFile, requestedFish.ImageMimeType);
127                      }
128                      else
129                      {
130                          return NotFound();
131                      }
132                  }
133              }
134              else
135              {
136                  return NotFound();
137              }
138          }
139      }
140  }
</span></code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from 20486D-DevelopingASPNETMVCWebApplications-MDEwOlJlcG9zaXRvcnkxMTkzNTI2Mzc=-flat-HomeController_40.cs</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from 20486D-DevelopingASPNETMVCWebApplications-MDEwOlJlcG9zaXRvcnkxMTkzNTI2Mzc=-flat-AquariumController_61.cs</div>
                </div>
                <div class="column column_space"><pre><code>23              return View(_dbContext.Photos.ToList());
24          }
25          public IActionResult GetImage(int id)
26          {
27              Photo requestedPhoto = _dbContext.Photos.FirstOrDefault(i => i.Id == id);
28              if (requestedPhoto != null)
29              {
30                  string webRootpath = _environment.WebRootPath;
31                  string folderPath = "\\images\\";
32                  string fullPath = webRootpath + folderPath + requestedPhoto.ImageName;
33                  if (System.IO.File.Exists(fullPath))
34                  {
35                      FileStream fileOnDisk = new FileStream(fullPath, FileMode.Open);
36                      byte[] fileBytes;
37                      using (BinaryReader br = new BinaryReader(fileOnDisk))
38                      {
39                          fileBytes = br.ReadBytes((int)fileOnDisk.Length);
40                      }
41                      return File(fileBytes, requestedPhoto.ImageMimeType);
42                  }
43                  else
44                  {
45                      if (requestedPhoto.PhotoFile.Length > 0)
46                      {
47                          return File(requestedPhoto.PhotoFile, requestedPhoto.ImageMimeType);
48                      }
49                      else
50                      {
51                          return NotFound();
52                      }
53                  }
54              }
55              else
56              {
57                  return NotFound();
58              }
59          }
60      }
61  }
</pre></code></div>
                <div class="column column_space"><pre><code>102              ViewBag.AquariumID = new SelectList(aquariums.AsNoTracking(), "AquariumId", "Name", selectedAquarium);
103          }
104          public IActionResult GetImage(int id)
105          {
106              Fish requestedFish = _repository.GetFishById(id);
107              if (requestedFish != null)
108              {
109                  string webRootpath = _environment.WebRootPath;
110                  string folderPath = "\\images\\";
111                  string fullPath = webRootpath + folderPath + requestedFish.ImageName;
112                  if (System.IO.File.Exists(fullPath))
113                  {
114                      FileStream fileOnDisk = new FileStream(fullPath, FileMode.Open);
115                      byte[] fileBytes;
116                      using (BinaryReader br = new BinaryReader(fileOnDisk))
117                      {
118                          fileBytes = br.ReadBytes((int)fileOnDisk.Length);
119                      }
120                      return File(fileBytes, requestedFish.ImageMimeType);
121                  }
122                  else
123                  {
124                      if (requestedFish.PhotoFile.Length > 0)
125                      {
126                          return File(requestedFish.PhotoFile, requestedFish.ImageMimeType);
127                      }
128                      else
129                      {
130                          return NotFound();
131                      }
132                  }
133              }
134              else
135              {
136                  return NotFound();
137              }
138          }
139      }
140  }
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    