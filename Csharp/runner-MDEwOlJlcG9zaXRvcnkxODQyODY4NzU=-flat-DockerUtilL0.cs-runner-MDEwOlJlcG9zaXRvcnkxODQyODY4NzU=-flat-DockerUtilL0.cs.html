
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Tokens: 54, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>runner-MDEwOlJlcG9zaXRvcnkxODQyODY4NzU=-flat-DockerUtilL0.cs</h3>
            <pre><code>1  using System;
2  using System.Collections.Generic;
3  using GitHub.Runner.Worker.Container;
4  using Xunit;
5  namespace GitHub.Runner.Common.Tests.Worker.Container
6  {
7      public sealed class DockerUtilL0
8      {
9          [Fact]
10          [Trait("Level", "L0")]
11          [Trait("Category", "Worker")]
12          public void RegexParsesDockerPort()
13          {
14              var dockerPortOutput0 = new List<string>();
15              var dockerPortOutput1 = new List<string>
16              {
17                  "80/tcp -> 0.0.0.0:32881"
18              };
19              var dockerPortOutput1Empty = new List<string>
20              {
21                  ""
22              };
23              var dockerPortOutput2 = new List<string>
24              {
25                  "80/tcp -> 0.0.0.0:32881",
26                  "6379/tcp -> 0.0.0.0:32882"
27              };
28              var result0 = DockerUtil.ParseDockerPort(dockerPortOutput0);
29              var result1 = DockerUtil.ParseDockerPort(dockerPortOutput1);
30              var result1Empty = DockerUtil.ParseDockerPort(dockerPortOutput1Empty);
31              var result2 = DockerUtil.ParseDockerPort(dockerPortOutput2);
32              Assert.NotNull(result0);
33              Assert.Equal(0, result0.Count);
34              Assert.NotNull(result1);
35              Assert.Equal(1, result1.Count);
36              var result1Port80Mapping = result1.Find(pm =>
37                  string.Equals(pm.ContainerPort, "80") &&
38                  string.Equals(pm.HostPort, "32881") &&
39                  string.Equals(pm.Protocol, "tcp", StringComparison.OrdinalIgnoreCase)
40              );
41              Assert.NotNull(result1Port80Mapping);
42              Assert.NotNull(result1Empty);
43              Assert.Equal(0, result1Empty.Count);
44              Assert.NotNull(result2);
45              Assert.Equal(2, result2.Count);
<span onclick='openModal()' class='match'>46              var result2Port80Mapping = result2.Find(pm =>
47                  string.Equals(pm.ContainerPort, "80") &&
48                  string.Equals(pm.HostPort, "32881") &&
49                  string.Equals(pm.Protocol, "tcp", StringComparison.OrdinalIgnoreCase)
50              );
51              Assert.NotNull(result2Port80Mapping);
52              var result2Port6379Mapping = result2.Find(pm =>
</span>53                  string.Equals(pm.ContainerPort, "6379") &&
54                  string.Equals(pm.HostPort, "32882") &&
55                  string.Equals(pm.Protocol, "tcp", StringComparison.OrdinalIgnoreCase)
56              );
57              Assert.NotNull(result2Port6379Mapping);
58          }
59          [Fact]
60          [Trait("Level", "L0")]
61          [Trait("Category", "Worker")]
62          public void RegexParsesPathFromDockerConfigEnv()
63          {
64              var configOutput0 = new List<string>
65              {
66                  "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
67                  "MY_VAR=test"
68              };
69              var configOutput1 = new List<string>
70              {
71                  "PATH=/bad idea:/really,bad,idea:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
72                  "MY_VAR=test"
73              };
74              var configOutput2 = new List<string>();
75              var configOutput3 = new List<string>
76              {
77                  "NOT_A_PATH=/bad idea:/really,bad,idea:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
78                  "MY_VAR=test"
79              };
80              var configOutput4 = new List<string>
81              {
82                  "PATH",
83                  "PATH="
84              };
85              var configOutput5 = new List<string>
86              {
87                  "PATH=/foo/bar:/baz",
88                  "Path=/no/where"
89              };
90              var result0 = DockerUtil.ParsePathFromConfigEnv(configOutput0);
91              var result1 = DockerUtil.ParsePathFromConfigEnv(configOutput1);
92              var result2 = DockerUtil.ParsePathFromConfigEnv(configOutput2);
93              var result3 = DockerUtil.ParsePathFromConfigEnv(configOutput3);
94              var result4 = DockerUtil.ParsePathFromConfigEnv(configOutput4);
95              var result5 = DockerUtil.ParsePathFromConfigEnv(configOutput5);
96              Assert.NotNull(result0);
97              Assert.Equal("/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin", result0);
98              Assert.NotNull(result1);
99              Assert.Equal("/bad idea:/really,bad,idea:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin", result1);
100              Assert.NotNull(result2);
101              Assert.Equal("", result2);
102              Assert.NotNull(result3);
103              Assert.Equal("", result3);
104              Assert.NotNull(result4);
105              Assert.Equal("", result4);
106              Assert.NotNull(result5);
107              Assert.Equal("/foo/bar:/baz", result5);
108          }
109          [Theory]
110          [Trait("Level", "L0")]
111          [Trait("Category", "Worker")]
112          [InlineData("dockerhub/repo", "")]
113          [InlineData("localhost/doesnt_work", "")]
114          [InlineData("localhost:port/works", "localhost:port")]
115          [InlineData("host.tld/works", "host.tld")]
116          [InlineData("ghcr.io/owner/image", "ghcr.io")]
117          [InlineData("gcr.io/project/image", "gcr.io")]
118          [InlineData("myregistry.azurecr.io/namespace/image", "myregistry.azurecr.io")]
119          [InlineData("account.dkr.ecr.region.amazonaws.com/image", "account.dkr.ecr.region.amazonaws.com")]
120          [InlineData("docker.pkg.github.com/owner/repo/image", "docker.pkg.github.com")]
121          public void ParseRegistryHostnameFromImageName(string input, string expected)
122          {
123              var actual = DockerUtil.ParseRegistryHostnameFromImageName(input);
124              Assert.Equal(expected, actual);
125          }
126          [Theory]
127          [Trait("Level", "L0")]
128          [Trait("Category", "Worker")]
129          [InlineData("dockerhub/repo", false)]
130          [InlineData("debian:latest", false)]
131          [InlineData("something/dockerfileimage", false)]
132          [InlineData("ghcr.io/docker/dockerfile", true)] 
133          [InlineData("Dockerfile", true)]
134          [InlineData("Dockerfile.", true)]
135          [InlineData(".Dockerfile", true)]
136          [InlineData(".Dockerfile.", false)]
137          [InlineData("dockerfile", true)]
138          [InlineData("dockerfile.", true)]
139          [InlineData(".dockerfile", true)]
140          [InlineData(".dockerfile.", false)]
141          [InlineData("Dockerfile.test", true)]
142          [InlineData("test.Dockerfile", true)]
143          [InlineData("docker/dockerfile:latest", false)]
144          [InlineData("/some/path/dockerfile:latest", false)]
145          [InlineData("dockerfile:latest", false)]
146          [InlineData("Dockerfile:latest", false)]
147          [InlineData("dockerfile-latest", false)]
148          [InlineData("Dockerfile-latest", false)]
149          [InlineData("dockerfile.latest", true)]
150          [InlineData("Dockerfile.latest", true)]
151          [InlineData("../dockerfile/dockerfileone", false)]
152          [InlineData("../Dockerfile/dockerfileone", false)]
153          [InlineData("../dockerfile.test", true)]
154          [InlineData("../Dockerfile.test", true)]
155          [InlineData("./dockerfile/image", false)]
156          [InlineData("./Dockerfile/image", false)]
157          [InlineData("example/Dockerfile.test", true)]
158          [InlineData("./example/Dockerfile.test", true)]
159          [InlineData("example/test.dockerfile", true)]
160          [InlineData("./example/test.dockerfile", true)]
161          [InlineData("docker:&bsol;&bsol;Dockerfile", false)]
162          [InlineData("docker:&bsol;&bsol;ubuntu:latest", false)]
163          public void IsDockerfile(string input, bool expected)
164          {
165              var actual = DockerUtil.IsDockerfile(input);
166              Assert.Equal(expected, actual);
167          }
168          [Theory]
169          [Trait("Level", "L0")]
170          [Trait("Category", "Worker")]
171          [InlineData("", "")]
172          [InlineData("foo", "foo")]
173          [InlineData("foo \\ bar", "foo \\ bar")]
174          [InlineData("foo \\", "foo \\\\")]
175          [InlineData("foo \\\\", "foo \\\\\\\\")]
176          [InlineData("foo \\\" bar", "foo \\\\\\\" bar")]
177          [InlineData("foo \\\\\" bar", "foo \\\\\\\\\\\" bar")]
178          public void CreateEscapedOption_keyOnly(string input, string escaped)
179          {
180              var flag = "--example";
181              var actual = DockerUtil.CreateEscapedOption(flag, input);
182              string expected;
183              if (String.IsNullOrEmpty(input))
184              {
185                  expected = "";
186              }
187              else
188              {
189                  expected = $"{flag} \"{escaped}\"";
190              }
191              Assert.Equal(expected, actual);
192          }
193          [Theory]
194          [Trait("Level", "L0")]
195          [Trait("Category", "Worker")]
196          [InlineData("foo", "bar", "foo=bar")]
197          [InlineData("foo\\", "bar", "foo\\=bar")]
198          [InlineData("foo\\", "bar\\", "foo\\=bar\\\\")]
199          [InlineData("foo \\", "bar \\", "foo \\=bar \\\\")]
200          public void CreateEscapedOption_keyValue(string keyInput, string valueInput, string escapedString)
201          {
202              var flag = "--example";
203              var actual = DockerUtil.CreateEscapedOption(flag, keyInput, valueInput);
204              string expected;
205              if (String.IsNullOrEmpty(keyInput))
206              {
207                  expected = "";
208              }
209              else
210              {
211                  expected = $"{flag} \"{escapedString}\"";
212              }
213              Assert.Equal(expected, actual);
214          }
215      }
216  }
</code></pre>
        </div>
        <div class="column">
            <h3>runner-MDEwOlJlcG9zaXRvcnkxODQyODY4NzU=-flat-DockerUtilL0.cs</h3>
            <pre><code>1  using System;
2  using System.Collections.Generic;
3  using GitHub.Runner.Worker.Container;
4  using Xunit;
5  namespace GitHub.Runner.Common.Tests.Worker.Container
6  {
7      public sealed class DockerUtilL0
8      {
9          [Fact]
10          [Trait("Level", "L0")]
11          [Trait("Category", "Worker")]
12          public void RegexParsesDockerPort()
13          {
14              var dockerPortOutput0 = new List<string>();
15              var dockerPortOutput1 = new List<string>
16              {
17                  "80/tcp -> 0.0.0.0:32881"
18              };
19              var dockerPortOutput1Empty = new List<string>
20              {
21                  ""
22              };
23              var dockerPortOutput2 = new List<string>
24              {
25                  "80/tcp -> 0.0.0.0:32881",
26                  "6379/tcp -> 0.0.0.0:32882"
27              };
28              var result0 = DockerUtil.ParseDockerPort(dockerPortOutput0);
29              var result1 = DockerUtil.ParseDockerPort(dockerPortOutput1);
30              var result1Empty = DockerUtil.ParseDockerPort(dockerPortOutput1Empty);
31              var result2 = DockerUtil.ParseDockerPort(dockerPortOutput2);
32              Assert.NotNull(result0);
33              Assert.Equal(0, result0.Count);
34              Assert.NotNull(result1);
35              Assert.Equal(1, result1.Count);
36              var result1Port80Mapping = result1.Find(pm =>
37                  string.Equals(pm.ContainerPort, "80") &&
38                  string.Equals(pm.HostPort, "32881") &&
39                  string.Equals(pm.Protocol, "tcp", StringComparison.OrdinalIgnoreCase)
40              );
41              Assert.NotNull(result1Port80Mapping);
42              Assert.NotNull(result1Empty);
43              Assert.Equal(0, result1Empty.Count);
44              Assert.NotNull(result2);
45              Assert.Equal(2, result2.Count);
46              var result2Port80Mapping = result2.Find(pm =>
47                  string.Equals(pm.ContainerPort, "80") &&
48                  string.Equals(pm.HostPort, "32881") &&
49                  string.Equals(pm.Protocol, "tcp", StringComparison.OrdinalIgnoreCase)
50              );
51              Assert.NotNull(result2Port80Mapping);
<span onclick='openModal()' class='match'>52              var result2Port6379Mapping = result2.Find(pm =>
53                  string.Equals(pm.ContainerPort, "6379") &&
54                  string.Equals(pm.HostPort, "32882") &&
55                  string.Equals(pm.Protocol, "tcp", StringComparison.OrdinalIgnoreCase)
56              );
57              Assert.NotNull(result2Port6379Mapping);
58          }
</span>59          [Fact]
60          [Trait("Level", "L0")]
61          [Trait("Category", "Worker")]
62          public void RegexParsesPathFromDockerConfigEnv()
63          {
64              var configOutput0 = new List<string>
65              {
66                  "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
67                  "MY_VAR=test"
68              };
69              var configOutput1 = new List<string>
70              {
71                  "PATH=/bad idea:/really,bad,idea:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
72                  "MY_VAR=test"
73              };
74              var configOutput2 = new List<string>();
75              var configOutput3 = new List<string>
76              {
77                  "NOT_A_PATH=/bad idea:/really,bad,idea:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
78                  "MY_VAR=test"
79              };
80              var configOutput4 = new List<string>
81              {
82                  "PATH",
83                  "PATH="
84              };
85              var configOutput5 = new List<string>
86              {
87                  "PATH=/foo/bar:/baz",
88                  "Path=/no/where"
89              };
90              var result0 = DockerUtil.ParsePathFromConfigEnv(configOutput0);
91              var result1 = DockerUtil.ParsePathFromConfigEnv(configOutput1);
92              var result2 = DockerUtil.ParsePathFromConfigEnv(configOutput2);
93              var result3 = DockerUtil.ParsePathFromConfigEnv(configOutput3);
94              var result4 = DockerUtil.ParsePathFromConfigEnv(configOutput4);
95              var result5 = DockerUtil.ParsePathFromConfigEnv(configOutput5);
96              Assert.NotNull(result0);
97              Assert.Equal("/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin", result0);
98              Assert.NotNull(result1);
99              Assert.Equal("/bad idea:/really,bad,idea:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin", result1);
100              Assert.NotNull(result2);
101              Assert.Equal("", result2);
102              Assert.NotNull(result3);
103              Assert.Equal("", result3);
104              Assert.NotNull(result4);
105              Assert.Equal("", result4);
106              Assert.NotNull(result5);
107              Assert.Equal("/foo/bar:/baz", result5);
108          }
109          [Theory]
110          [Trait("Level", "L0")]
111          [Trait("Category", "Worker")]
112          [InlineData("dockerhub/repo", "")]
113          [InlineData("localhost/doesnt_work", "")]
114          [InlineData("localhost:port/works", "localhost:port")]
115          [InlineData("host.tld/works", "host.tld")]
116          [InlineData("ghcr.io/owner/image", "ghcr.io")]
117          [InlineData("gcr.io/project/image", "gcr.io")]
118          [InlineData("myregistry.azurecr.io/namespace/image", "myregistry.azurecr.io")]
119          [InlineData("account.dkr.ecr.region.amazonaws.com/image", "account.dkr.ecr.region.amazonaws.com")]
120          [InlineData("docker.pkg.github.com/owner/repo/image", "docker.pkg.github.com")]
121          public void ParseRegistryHostnameFromImageName(string input, string expected)
122          {
123              var actual = DockerUtil.ParseRegistryHostnameFromImageName(input);
124              Assert.Equal(expected, actual);
125          }
126          [Theory]
127          [Trait("Level", "L0")]
128          [Trait("Category", "Worker")]
129          [InlineData("dockerhub/repo", false)]
130          [InlineData("debian:latest", false)]
131          [InlineData("something/dockerfileimage", false)]
132          [InlineData("ghcr.io/docker/dockerfile", true)] 
133          [InlineData("Dockerfile", true)]
134          [InlineData("Dockerfile.", true)]
135          [InlineData(".Dockerfile", true)]
136          [InlineData(".Dockerfile.", false)]
137          [InlineData("dockerfile", true)]
138          [InlineData("dockerfile.", true)]
139          [InlineData(".dockerfile", true)]
140          [InlineData(".dockerfile.", false)]
141          [InlineData("Dockerfile.test", true)]
142          [InlineData("test.Dockerfile", true)]
143          [InlineData("docker/dockerfile:latest", false)]
144          [InlineData("/some/path/dockerfile:latest", false)]
145          [InlineData("dockerfile:latest", false)]
146          [InlineData("Dockerfile:latest", false)]
147          [InlineData("dockerfile-latest", false)]
148          [InlineData("Dockerfile-latest", false)]
149          [InlineData("dockerfile.latest", true)]
150          [InlineData("Dockerfile.latest", true)]
151          [InlineData("../dockerfile/dockerfileone", false)]
152          [InlineData("../Dockerfile/dockerfileone", false)]
153          [InlineData("../dockerfile.test", true)]
154          [InlineData("../Dockerfile.test", true)]
155          [InlineData("./dockerfile/image", false)]
156          [InlineData("./Dockerfile/image", false)]
157          [InlineData("example/Dockerfile.test", true)]
158          [InlineData("./example/Dockerfile.test", true)]
159          [InlineData("example/test.dockerfile", true)]
160          [InlineData("./example/test.dockerfile", true)]
161          [InlineData("docker:&bsol;&bsol;Dockerfile", false)]
162          [InlineData("docker:&bsol;&bsol;ubuntu:latest", false)]
163          public void IsDockerfile(string input, bool expected)
164          {
165              var actual = DockerUtil.IsDockerfile(input);
166              Assert.Equal(expected, actual);
167          }
168          [Theory]
169          [Trait("Level", "L0")]
170          [Trait("Category", "Worker")]
171          [InlineData("", "")]
172          [InlineData("foo", "foo")]
173          [InlineData("foo \\ bar", "foo \\ bar")]
174          [InlineData("foo \\", "foo \\\\")]
175          [InlineData("foo \\\\", "foo \\\\\\\\")]
176          [InlineData("foo \\\" bar", "foo \\\\\\\" bar")]
177          [InlineData("foo \\\\\" bar", "foo \\\\\\\\\\\" bar")]
178          public void CreateEscapedOption_keyOnly(string input, string escaped)
179          {
180              var flag = "--example";
181              var actual = DockerUtil.CreateEscapedOption(flag, input);
182              string expected;
183              if (String.IsNullOrEmpty(input))
184              {
185                  expected = "";
186              }
187              else
188              {
189                  expected = $"{flag} \"{escaped}\"";
190              }
191              Assert.Equal(expected, actual);
192          }
193          [Theory]
194          [Trait("Level", "L0")]
195          [Trait("Category", "Worker")]
196          [InlineData("foo", "bar", "foo=bar")]
197          [InlineData("foo\\", "bar", "foo\\=bar")]
198          [InlineData("foo\\", "bar\\", "foo\\=bar\\\\")]
199          [InlineData("foo \\", "bar \\", "foo \\=bar \\\\")]
200          public void CreateEscapedOption_keyValue(string keyInput, string valueInput, string escapedString)
201          {
202              var flag = "--example";
203              var actual = DockerUtil.CreateEscapedOption(flag, keyInput, valueInput);
204              string expected;
205              if (String.IsNullOrEmpty(keyInput))
206              {
207                  expected = "";
208              }
209              else
210              {
211                  expected = $"{flag} \"{escapedString}\"";
212              }
213              Assert.Equal(expected, actual);
214          }
215      }
216  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from runner-MDEwOlJlcG9zaXRvcnkxODQyODY4NzU=-flat-DockerUtilL0.cs</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from runner-MDEwOlJlcG9zaXRvcnkxODQyODY4NzU=-flat-DockerUtilL0.cs</div>
                </div>
                <div class="column column_space"><pre><code>46              var result2Port80Mapping = result2.Find(pm =>
47                  string.Equals(pm.ContainerPort, "80") &&
48                  string.Equals(pm.HostPort, "32881") &&
49                  string.Equals(pm.Protocol, "tcp", StringComparison.OrdinalIgnoreCase)
50              );
51              Assert.NotNull(result2Port80Mapping);
52              var result2Port6379Mapping = result2.Find(pm =>
</pre></code></div>
                <div class="column column_space"><pre><code>52              var result2Port6379Mapping = result2.Find(pm =>
53                  string.Equals(pm.ContainerPort, "6379") &&
54                  string.Equals(pm.HostPort, "32882") &&
55                  string.Equals(pm.Protocol, "tcp", StringComparison.OrdinalIgnoreCase)
56              );
57              Assert.NotNull(result2Port6379Mapping);
58          }
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    