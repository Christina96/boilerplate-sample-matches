
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Tokens: 18, <button onclick='openModal()' class='match'>CODE CLONE</button></h2>
        <div class="column">
            <h3>MudBlazor-MDEwOlJlcG9zaXRvcnkyODg0Mjg2NzY=-flat-DataGridTests.cs</h3>
            <pre><code>1  #pragma warning disable CS1998 
2  #pragma warning disable BL0005 
3  using System;
4  using System.Collections.Generic;
5  using System.Linq;
6  using System.Linq.Expressions;
7  using System.Threading.Tasks;
8  using AngleSharp.Dom;
9  using Bunit;
10  using FluentAssertions;
11  using Microsoft.AspNetCore.Components;
12  using Microsoft.AspNetCore.Components.Web;
13  using Microsoft.JSInterop;
14  using MudBlazor.Interfaces;
15  using MudBlazor.UnitTests.TestComponents;
16  using NUnit.Framework;
17  using static MudBlazor.Docs.Examples.TableRelationalExample;
18  namespace MudBlazor.UnitTests.Components
19  {
20      public record TestModel1(string Name, int? Age);
21      public record TestModel2(string Name, int? Age, DateTime? Date);
22      public record TestModel3(string Name, int? Age, Severity? Status);
23      public record TestModel4(string Name, int? Age, bool? Hired);
24      [TestFixture]
25      public class DataGridTests : BunitTest
26      {
27          [Test]
28          public async Task DataGridSortableTest()
29          {
30              var comp = Context.RenderComponent&lt;DataGridSortableTest&gt;();
31              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridSortableTest.Item&gt;&gt;();
32              var rows = dataGrid.FindAll(&quot;tr&quot;);
33              rows.Count.Should().Be(9, because: &quot;1 header row + 7 data rows + 1 footer row&quot;);
34              var cells = dataGrid.FindAll(&quot;td&quot;);
35              cells.Count.Should().Be(21, because: &quot;We have 7 data rows with three columns&quot;);
36              cells[0].TextContent.Should().Be(&quot;B&quot;); cells[1].TextContent.Should().Be(&quot;42&quot;); cells[2].TextContent.Should().Be(&quot;555&quot;);
37              cells[3].TextContent.Should().Be(&quot;A&quot;); cells[4].TextContent.Should().Be(&quot;73&quot;); cells[5].TextContent.Should().Be(&quot;7&quot;);
38              cells[6].TextContent.Should().Be(&quot;A&quot;); cells[7].TextContent.Should().Be(&quot;11&quot;); cells[8].TextContent.Should().Be(&quot;4444&quot;);
39              cells[9].TextContent.Should().Be(&quot;C&quot;); cells[10].TextContent.Should().Be(&quot;33&quot;); cells[11].TextContent.Should().Be(&quot;33333&quot;);
40              cells[12].TextContent.Should().Be(&quot;A&quot;); cells[13].TextContent.Should().Be(&quot;99&quot;); cells[14].TextContent.Should().Be(&quot;66&quot;);
41              cells[15].TextContent.Should().Be(&quot;C&quot;); cells[16].TextContent.Should().Be(&quot;44&quot;); cells[17].TextContent.Should().Be(&quot;1111111&quot;);
42              cells[18].TextContent.Should().Be(&quot;C&quot;); cells[19].TextContent.Should().Be(&quot;55&quot;); cells[20].TextContent.Should().Be(&quot;222222&quot;);
43              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SetSortAsync(&quot;Name&quot;, SortDirection.Ascending, x =&gt; { return x.Name; }));
44              cells = dataGrid.FindAll(&quot;td&quot;);
45              cells[0].TextContent.Should().Be(&quot;A&quot;); cells[1].TextContent.Should().Be(&quot;73&quot;); cells[2].TextContent.Should().Be(&quot;7&quot;);
46              cells[3].TextContent.Should().Be(&quot;A&quot;); cells[4].TextContent.Should().Be(&quot;11&quot;); cells[5].TextContent.Should().Be(&quot;4444&quot;);
47              cells[6].TextContent.Should().Be(&quot;A&quot;); cells[7].TextContent.Should().Be(&quot;99&quot;); cells[8].TextContent.Should().Be(&quot;66&quot;);
48              cells[9].TextContent.Should().Be(&quot;B&quot;); cells[10].TextContent.Should().Be(&quot;42&quot;); cells[11].TextContent.Should().Be(&quot;555&quot;);
49              cells[12].TextContent.Should().Be(&quot;C&quot;); cells[13].TextContent.Should().Be(&quot;33&quot;); cells[14].TextContent.Should().Be(&quot;33333&quot;);
50              cells[15].TextContent.Should().Be(&quot;C&quot;); cells[16].TextContent.Should().Be(&quot;44&quot;); cells[17].TextContent.Should().Be(&quot;1111111&quot;);
51              cells[18].TextContent.Should().Be(&quot;C&quot;); cells[19].TextContent.Should().Be(&quot;55&quot;); cells[20].TextContent.Should().Be(&quot;222222&quot;);
52              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SetSortAsync(&quot;Name&quot;, SortDirection.Descending, x =&gt; { return x.Name; }));
53              cells = dataGrid.FindAll(&quot;td&quot;);
54              cells[0].TextContent.Should().Be(&quot;C&quot;); cells[1].TextContent.Should().Be(&quot;33&quot;); cells[2].TextContent.Should().Be(&quot;33333&quot;);
55              cells[3].TextContent.Should().Be(&quot;C&quot;); cells[4].TextContent.Should().Be(&quot;44&quot;); cells[5].TextContent.Should().Be(&quot;1111111&quot;);
56              cells[6].TextContent.Should().Be(&quot;C&quot;); cells[7].TextContent.Should().Be(&quot;55&quot;); cells[8].TextContent.Should().Be(&quot;222222&quot;);
57              cells[9].TextContent.Should().Be(&quot;B&quot;); cells[10].TextContent.Should().Be(&quot;42&quot;); cells[11].TextContent.Should().Be(&quot;555&quot;);
58              cells[12].TextContent.Should().Be(&quot;A&quot;); cells[13].TextContent.Should().Be(&quot;73&quot;); cells[14].TextContent.Should().Be(&quot;7&quot;);
59              cells[15].TextContent.Should().Be(&quot;A&quot;); cells[16].TextContent.Should().Be(&quot;11&quot;); cells[17].TextContent.Should().Be(&quot;4444&quot;);
60              cells[18].TextContent.Should().Be(&quot;A&quot;); cells[19].TextContent.Should().Be(&quot;99&quot;); cells[20].TextContent.Should().Be(&quot;66&quot;);
61              await comp.InvokeAsync(() =&gt; dataGrid.Instance.RemoveSortAsync(&quot;Name&quot;));
62              cells = dataGrid.FindAll(&quot;td&quot;);
63              cells[0].TextContent.Should().Be(&quot;B&quot;); cells[1].TextContent.Should().Be(&quot;42&quot;); cells[2].TextContent.Should().Be(&quot;555&quot;);
64              cells[3].TextContent.Should().Be(&quot;A&quot;); cells[4].TextContent.Should().Be(&quot;73&quot;); cells[5].TextContent.Should().Be(&quot;7&quot;);
65              cells[6].TextContent.Should().Be(&quot;A&quot;); cells[7].TextContent.Should().Be(&quot;11&quot;); cells[8].TextContent.Should().Be(&quot;4444&quot;);
66              cells[9].TextContent.Should().Be(&quot;C&quot;); cells[10].TextContent.Should().Be(&quot;33&quot;); cells[11].TextContent.Should().Be(&quot;33333&quot;);
67              cells[12].TextContent.Should().Be(&quot;A&quot;); cells[13].TextContent.Should().Be(&quot;99&quot;); cells[14].TextContent.Should().Be(&quot;66&quot;);
68              cells[15].TextContent.Should().Be(&quot;C&quot;); cells[16].TextContent.Should().Be(&quot;44&quot;); cells[17].TextContent.Should().Be(&quot;1111111&quot;);
69              cells[18].TextContent.Should().Be(&quot;C&quot;); cells[19].TextContent.Should().Be(&quot;55&quot;); cells[20].TextContent.Should().Be(&quot;222222&quot;);
70              var column = dataGrid.FindComponent&lt;Column&lt;DataGridSortableTest.Item&gt;&gt;();
71              await comp.InvokeAsync(() =&gt; column.Instance.SortBy = x =&gt; { return x.Name; });
72              cells[0].TextContent.Should().Be(&quot;B&quot;); cells[1].TextContent.Should().Be(&quot;42&quot;); cells[2].TextContent.Should().Be(&quot;555&quot;);
73              cells[3].TextContent.Should().Be(&quot;A&quot;); cells[4].TextContent.Should().Be(&quot;73&quot;); cells[5].TextContent.Should().Be(&quot;7&quot;);
74              cells[6].TextContent.Should().Be(&quot;A&quot;); cells[7].TextContent.Should().Be(&quot;11&quot;); cells[8].TextContent.Should().Be(&quot;4444&quot;);
75              cells[9].TextContent.Should().Be(&quot;C&quot;); cells[10].TextContent.Should().Be(&quot;33&quot;); cells[11].TextContent.Should().Be(&quot;33333&quot;);
76              cells[12].TextContent.Should().Be(&quot;A&quot;); cells[13].TextContent.Should().Be(&quot;99&quot;); cells[14].TextContent.Should().Be(&quot;66&quot;);
77              cells[15].TextContent.Should().Be(&quot;C&quot;); cells[16].TextContent.Should().Be(&quot;44&quot;); cells[17].TextContent.Should().Be(&quot;1111111&quot;);
78              cells[18].TextContent.Should().Be(&quot;C&quot;); cells[19].TextContent.Should().Be(&quot;55&quot;); cells[20].TextContent.Should().Be(&quot;222222&quot;);
79              dataGrid.Find(&quot;.column-options button&quot;).Click();
80              cells = dataGrid.FindAll(&quot;td&quot;);
81              cells[0].TextContent.Should().Be(&quot;A&quot;); cells[1].TextContent.Should().Be(&quot;73&quot;); cells[2].TextContent.Should().Be(&quot;7&quot;);
82              cells[3].TextContent.Should().Be(&quot;A&quot;); cells[4].TextContent.Should().Be(&quot;11&quot;); cells[5].TextContent.Should().Be(&quot;4444&quot;);
83              cells[6].TextContent.Should().Be(&quot;A&quot;); cells[7].TextContent.Should().Be(&quot;99&quot;); cells[8].TextContent.Should().Be(&quot;66&quot;);
84              cells[9].TextContent.Should().Be(&quot;B&quot;); cells[10].TextContent.Should().Be(&quot;42&quot;); cells[11].TextContent.Should().Be(&quot;555&quot;);
85              cells[12].TextContent.Should().Be(&quot;C&quot;); cells[13].TextContent.Should().Be(&quot;33&quot;); cells[14].TextContent.Should().Be(&quot;33333&quot;);
86              cells[15].TextContent.Should().Be(&quot;C&quot;); cells[16].TextContent.Should().Be(&quot;44&quot;); cells[17].TextContent.Should().Be(&quot;1111111&quot;);
87              cells[18].TextContent.Should().Be(&quot;C&quot;); cells[19].TextContent.Should().Be(&quot;55&quot;); cells[20].TextContent.Should().Be(&quot;222222&quot;);
88              var headerCell = dataGrid.FindComponent&lt;HeaderCell&lt;DataGridSortableTest.Item&gt;&gt;();
89              await comp.InvokeAsync(() =&gt; headerCell.Instance.SortChangedAsync(new Microsoft.AspNetCore.Components.Web.MouseEventArgs()));
90              await comp.InvokeAsync(() =&gt; headerCell.Instance.RemoveSortAsync());
91              await comp.InvokeAsync(() =&gt; headerCell.Instance.AddFilterAsync());
92              await comp.InvokeAsync(() =&gt; headerCell.Instance.OpenFilters());
93              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SortMode = SortMode.None);
94              dataGrid.Render();
95              dataGrid.Instance.DropContainerHasChanged();
96              dataGrid.FindAll(&quot;.column-header .sortable-column-header&quot;).Should().BeEmpty();
97          }
98          [Test]
99          public async Task DataGridSortableTemplateColumnTest()
100          {
101              var comp = Context.RenderComponent&lt;DataGridSortableTemplateColumnTest&gt;();
102              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridSortableTemplateColumnTest.Item&gt;&gt;();
103              var rows = dataGrid.FindAll(&quot;tr&quot;);
104              rows.Count.Should().Be(9, because: &quot;1 header row + 7 data rows + 1 footer row&quot;);
105              var cells = dataGrid.FindAll(&quot;td&quot;);
106              cells.Count.Should().Be(7, because: &quot;We have 7 data rows with one column&quot;);
107              cells[0].TextContent.Should().Be(&quot;B&quot;);
108              cells[1].TextContent.Should().Be(&quot;A&quot;);
109              cells[2].TextContent.Should().Be(&quot;A&quot;);
110              cells[3].TextContent.Should().Be(&quot;C&quot;);
111              cells[4].TextContent.Should().Be(&quot;A&quot;);
112              cells[5].TextContent.Should().Be(&quot;C&quot;);
113              cells[6].TextContent.Should().Be(&quot;C&quot;);
114              var templatePropertyName = dataGrid.Instance.RenderedColumns.FirstOrDefault().PropertyName;
115              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SetSortAsync(templatePropertyName, SortDirection.Ascending, x =&gt; { return x.Name; }));
116              cells = dataGrid.FindAll(&quot;td&quot;);
117              cells[0].TextContent.Should().Be(&quot;A&quot;);
118              cells[1].TextContent.Should().Be(&quot;A&quot;);
119              cells[2].TextContent.Should().Be(&quot;A&quot;);
120              cells[3].TextContent.Should().Be(&quot;B&quot;);
121              cells[4].TextContent.Should().Be(&quot;C&quot;);
122              cells[5].TextContent.Should().Be(&quot;C&quot;);
123              cells[6].TextContent.Should().Be(&quot;C&quot;);
124              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SetSortAsync(templatePropertyName, SortDirection.Descending, x =&gt; { return x.Name; }));
125              cells = dataGrid.FindAll(&quot;td&quot;);
126              cells[0].TextContent.Should().Be(&quot;C&quot;);
127              cells[1].TextContent.Should().Be(&quot;C&quot;);
128              cells[2].TextContent.Should().Be(&quot;C&quot;);
129              cells[3].TextContent.Should().Be(&quot;B&quot;);
130              cells[4].TextContent.Should().Be(&quot;A&quot;);
131              cells[5].TextContent.Should().Be(&quot;A&quot;);
132              cells[6].TextContent.Should().Be(&quot;A&quot;);
133              await comp.InvokeAsync(() =&gt; dataGrid.Instance.RemoveSortAsync(templatePropertyName));
134              cells = dataGrid.FindAll(&quot;td&quot;);
135              cells[0].TextContent.Should().Be(&quot;B&quot;);
136              cells[1].TextContent.Should().Be(&quot;A&quot;);
137              cells[2].TextContent.Should().Be(&quot;A&quot;);
138              cells[3].TextContent.Should().Be(&quot;C&quot;);
139              cells[4].TextContent.Should().Be(&quot;A&quot;);
140              cells[5].TextContent.Should().Be(&quot;C&quot;);
141              cells[6].TextContent.Should().Be(&quot;C&quot;);
142              dataGrid.Find(&quot;.column-options button&quot;).Click();
143              cells = dataGrid.FindAll(&quot;td&quot;);
144              cells[0].TextContent.Should().Be(&quot;A&quot;);
145              cells[1].TextContent.Should().Be(&quot;A&quot;);
146              cells[2].TextContent.Should().Be(&quot;A&quot;);
147              cells[3].TextContent.Should().Be(&quot;B&quot;);
148              cells[4].TextContent.Should().Be(&quot;C&quot;);
149              cells[5].TextContent.Should().Be(&quot;C&quot;);
150              cells[6].TextContent.Should().Be(&quot;C&quot;);
151          }
152          [Test]
153          public async Task DataGridFilterableTest()
154          {
155              var comp = Context.RenderComponent&lt;DataGridFilterableTest&gt;();
156              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridFilterableTest.Item&gt;&gt;();
157              dataGrid.FindAll(&quot;tr&quot;).Count.Should().Be(6); 
158              dataGrid.FindAll(&quot;td&quot;)[0].TextContent.Trim().Should().Be(&quot;B&quot;);
159              dataGrid.FindAll(&quot;td&quot;)[1].TextContent.Trim().Should().Be(&quot;A&quot;);
160              dataGrid.FindAll(&quot;td&quot;)[2].TextContent.Trim().Should().Be(&quot;C&quot;);
161              dataGrid.FindAll(&quot;td&quot;)[3].TextContent.Trim().Should().Be(&quot;C&quot;);
162              await comp.InvokeAsync(() =&gt;
163              {
164                  return dataGrid.Instance.AddFilterAsync(new FilterDefinition&lt;DataGridFilterableTest.Item&gt;
165                  {
166                      Column = dataGrid.Instance.RenderedColumns.First(),
167                      Operator = FilterOperator.String.Equal,
168                      Value = &quot;C&quot;
169                  });
170              });
171              dataGrid.FindAll(&quot;td&quot;)[0].TextContent.Trim().Should().Be(&quot;C&quot;);
172              dataGrid.FindAll(&quot;td&quot;)[1].TextContent.Trim().Should().Be(&quot;C&quot;);
173              dataGrid.Instance.Filterable = false;
174          }
175          [Test]
176          public async Task DataGridFilterableServerDataTest()
177          {
178              var comp = Context.RenderComponent&lt;DataGridFilterableServerDataTest&gt;();
179              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridFilterableServerDataTest.Item&gt;&gt;();
180              dataGrid.FindAll(&quot;tr&quot;).Count.Should().Be(6); 
181              dataGrid.FindAll(&quot;td&quot;)[0].TextContent.Trim().Should().Be(&quot;B&quot;);
182              dataGrid.FindAll(&quot;td&quot;)[1].TextContent.Trim().Should().Be(&quot;A&quot;);
183              dataGrid.FindAll(&quot;td&quot;)[2].TextContent.Trim().Should().Be(&quot;C&quot;);
184              dataGrid.FindAll(&quot;td&quot;)[3].TextContent.Trim().Should().Be(&quot;C&quot;);
185              await comp.InvokeAsync(() =&gt;
186              {
187                  return dataGrid.Instance.AddFilterAsync(new FilterDefinition&lt;DataGridFilterableServerDataTest.Item&gt;
188                  {
189                      Column = dataGrid.Instance.RenderedColumns.FirstOrDefault(),
190                      Operator = FilterOperator.String.Equal,
191                      Value = &quot;C&quot;
192                  });
193              });
194              dataGrid.FindAll(&quot;td&quot;)[0].TextContent.Trim().Should().Be(&quot;C&quot;);
195              dataGrid.FindAll(&quot;td&quot;)[1].TextContent.Trim().Should().Be(&quot;C&quot;);
196              dataGrid.Instance.Filterable = false;
197          }
198          [Test]
199          public async Task DataGridMultiSelectionTest()
200          {
201              var comp = Context.RenderComponent&lt;DataGridMultiSelectionTest&gt;();
202              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridMultiSelectionTest.Item&gt;&gt;();
203              dataGrid.Instance.SelectedItems.Count.Should().Be(0);
204              dataGrid.FindAll(&quot;input&quot;)[0].Change(true);
205              dataGrid.Instance.SelectedItems.Count.Should().Be(3);
206              await comp.InvokeAsync(async () =&gt; await dataGrid.Instance.SetSelectedItemAsync(false, dataGrid.Instance.SelectedItems.First()));
207              dataGrid.Instance.SelectedItems.Count.Should().Be(2);
208              await comp.InvokeAsync(async () =&gt; await dataGrid.Instance.SetSelectedItemAsync(dataGrid.Instance.Items.First()));
209              dataGrid.Instance.SelectedItems.Count.Should().Be(3);
210              await comp.InvokeAsync(async () =&gt; await dataGrid.Instance.SetSelectAllAsync(false));
211              dataGrid.Instance.SelectedItems.Count.Should().Be(0);
212              await comp.InvokeAsync(async () =&gt; await dataGrid.Instance.SetSelectAllAsync(true));
213              dataGrid.Instance.SelectedItems.Count.Should().Be(3);
214              dataGrid.Find(&quot;tfoot input&quot;).Change(false);
215              dataGrid.Instance.SelectedItems.Count.Should().Be(0);
216          }
217          [Test]
218          public async Task DataGridServerMultiSelectionTest()
219          {
220              var comp = Context.RenderComponent&lt;DataGridServerMultiSelectionTest&gt;();
221              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridServerMultiSelectionTest.Item&gt;&gt;();
222              dataGrid.Instance.SelectedItems.Count.Should().Be(0);
223              dataGrid.FindAll(&quot;input&quot;)[0].Change(true);
224              dataGrid.Instance.SelectedItems.Count.Should().Be(3);
225              await comp.InvokeAsync(async () =&gt; await dataGrid.Instance.SetSelectedItemAsync(false, dataGrid.Instance.SelectedItems.First()));
226              dataGrid.Instance.SelectedItems.Count.Should().Be(2);
227              await comp.InvokeAsync(async () =&gt; await dataGrid.Instance.SetSelectedItemAsync(dataGrid.Instance.ServerItems.First()));
228              dataGrid.Instance.SelectedItems.Count.Should().Be(3);
229              await comp.InvokeAsync(async () =&gt; await dataGrid.Instance.SetSelectAllAsync(false));
230              dataGrid.Instance.SelectedItems.Count.Should().Be(0);
231              await comp.InvokeAsync(async () =&gt; await dataGrid.Instance.SetSelectAllAsync(true));
232              dataGrid.Instance.SelectedItems.Count.Should().Be(3);
233              dataGrid.Find(&quot;tfoot input&quot;).Change(false);
234              dataGrid.Instance.SelectedItems.Count.Should().Be(0);
235          }
236          [Test]
237          public async Task DataGridPaginationTest()
238          {
239              var comp = Context.RenderComponent&lt;DataGridPaginationTest&gt;();
240              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridPaginationTest.Item&gt;&gt;();
241              dataGrid.FindAll(&quot;.mud-table-pagination-caption&quot;)[^1].TextContent.Trim().Should().Be(&quot;1-10 of 20&quot;);
242              dataGrid.Find(&quot;.mud-table-body td&quot;).TextContent.Trim().Should().Be(&quot;0&quot;);
243              dataGrid.FindAll(&quot;.mud-table-pagination-actions button&quot;)[2].Click();
244              dataGrid.Find(&quot;.mud-table-body td&quot;).TextContent.Trim().Should().Be(&quot;10&quot;);
245              dataGrid.Instance.RowsPerPage.Should().Be(10);
246              await comp.InvokeAsync(async () =&gt; await dataGrid.Instance.SetRowsPerPageAsync(4));
247              dataGrid.Instance.RowsPerPage.Should().Be(4);
248              await comp.InvokeAsync(() =&gt; dataGrid.Instance.NavigateTo(Page.Last));
249              dataGrid.Instance.CurrentPage.Should().Be(4);
250              await comp.InvokeAsync(() =&gt; dataGrid.Instance.NavigateTo(Page.Previous));
251              dataGrid.Instance.CurrentPage.Should().Be(3);
252              await comp.InvokeAsync(() =&gt; dataGrid.Instance.NavigateTo(Page.First));
253              dataGrid.Instance.CurrentPage.Should().Be(0);
254          }
255          [Test]
256          public async Task DataGridInlineEditTest()
257          {
258              var comp = Context.RenderComponent&lt;DataGridCellEditTest&gt;();
259              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridCellEditTest.Model&gt;&gt;();
260              dataGrid.FindAll(&quot;td input&quot;)[0].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;John&quot;);
261              dataGrid.FindAll(&quot;td input&quot;)[1].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;45&quot;);
262              dataGrid.FindAll(&quot;td input&quot;)[2].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;Johanna&quot;);
263              dataGrid.FindAll(&quot;td input&quot;)[3].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;23&quot;);
264              dataGrid.FindAll(&quot;td input&quot;)[4].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;Steve&quot;);
265              dataGrid.FindAll(&quot;td input&quot;)[5].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;32&quot;);
266              dataGrid.FindAll(&quot;.mud-table-body tr td input&quot;)[0].Change(&quot;Jonathan&quot;);
267              dataGrid.FindAll(&quot;.mud-table-body tr td input&quot;)[1].Change(52d);
268              dataGrid.FindAll(&quot;.mud-table-body tr td input&quot;)[0].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;Jonathan&quot;);
269              dataGrid.FindAll(&quot;.mud-table-body tr td input&quot;)[1].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;52&quot;);
270              var name = dataGrid.Instance.Items.First().Name;
271              var age = dataGrid.Instance.Items.First().Age;
272              name.Should().Be(&quot;Jonathan&quot;);
273              age.Should().Be(52);
274          }
275          [Test]
276          public async Task DataGridInlineEditWithNullableTest()
277          {
278              var comp = Context.RenderComponent&lt;DataGridCellEditWithNullableTest&gt;();
279              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridCellEditWithNullableTest.Model&gt;&gt;();
280              dataGrid.FindAll(&quot;td input&quot;)[0].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;John&quot;);
281              dataGrid.FindAll(&quot;td input&quot;)[1].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;45&quot;);
282              dataGrid.FindAll(&quot;td input&quot;)[2].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;Johanna&quot;);
283              dataGrid.FindAll(&quot;td input&quot;)[3].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;23&quot;);
284              dataGrid.FindAll(&quot;td input&quot;)[4].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;Steve&quot;);
285              Assert.IsNull(dataGrid.FindAll(&quot;td input&quot;)[5].GetAttribute(&quot;value&quot;));
286              dataGrid.FindAll(&quot;.mud-table-body tr td input&quot;)[0].Change(&quot;Jonathan&quot;);
287              dataGrid.FindAll(&quot;.mud-table-body tr td input&quot;)[1].Change(52);
288              dataGrid.FindAll(&quot;.mud-table-body tr td input&quot;)[0].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;Jonathan&quot;);
289              dataGrid.FindAll(&quot;.mud-table-body tr td input&quot;)[1].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;52&quot;);
290              var name = dataGrid.Instance.Items.First().Name;
291              var age = dataGrid.Instance.Items.First().Age;
292              name.Should().Be(&quot;Jonathan&quot;);
293              age.Should().Be(52);
294          }
295          [Test]
296          public async Task DataGridInlineEditWithTemplateTest()
297          {
298              var comp = Context.RenderComponent&lt;DataGridCellEditWithTemplateTest&gt;();
299              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridCellEditWithTemplateTest.Model&gt;&gt;();
300              dataGrid.FindAll(&quot;td input&quot;)[0].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;John&quot;);
301              dataGrid.FindAll(&quot;td input&quot;)[1].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;45&quot;);
302              dataGrid.FindAll(&quot;td input&quot;)[2].HasAttribute(&quot;checked&quot;).Should().Be(false);
303              dataGrid.FindAll(&quot;td input&quot;)[3].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;Johanna&quot;);
304              dataGrid.FindAll(&quot;td input&quot;)[4].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;23&quot;);
305              dataGrid.FindAll(&quot;td input&quot;)[5].HasAttribute(&quot;checked&quot;).Should().Be(true);
306              dataGrid.FindAll(&quot;td input&quot;)[6].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;Steve&quot;);
307              dataGrid.FindAll(&quot;td input&quot;)[7].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;32&quot;);
308              dataGrid.FindAll(&quot;td input&quot;)[8].HasAttribute(&quot;value&quot;).Should().Be(false);
309              dataGrid.FindAll(&quot;td input&quot;)[0].Change(&quot;Jonathan&quot;);
310              dataGrid.FindAll(&quot;td input&quot;)[1].Change(52d);
311              dataGrid.FindAll(&quot;td input&quot;)[2].Change(true);
312              dataGrid.FindAll(&quot;td input&quot;)[0].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;Jonathan&quot;);
313              dataGrid.FindAll(&quot;td input&quot;)[1].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;52&quot;);
314              dataGrid.FindAll(&quot;td input&quot;)[2].HasAttribute(&quot;checked&quot;).Should().Be(true);
315              var name = dataGrid.Instance.Items.First().Name;
316              var age = dataGrid.Instance.Items.First().Age;
317              var hired = dataGrid.Instance.Items.First().Hired;
318              name.Should().Be(&quot;Jonathan&quot;);
319              age.Should().Be(52);
320              hired.Should().Be(true);
321          }
322          [Test]
323          public async Task DataGridDialogEditTest()
324          {
325              var comp = Context.RenderComponent&lt;DataGridFormEditTest&gt;();
326              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridFormEditTest.Model&gt;&gt;();
327              dataGrid.FindAll(&quot;td&quot;)[0].Html().Trim().Should().Be(&quot;John&quot;);
328              dataGrid.FindAll(&quot;td&quot;)[1].Html().Trim().Should().Be(&quot;45&quot;);
329              dataGrid.FindAll(&quot;td&quot;)[2].Html().Trim().Should().Be(&quot;snakex64&quot;);
330              dataGrid.FindAll(&quot;td&quot;)[3].Html().Trim().Should().Be(&quot;Johanna&quot;);
331              dataGrid.FindAll(&quot;td&quot;)[4].Html().Trim().Should().Be(&quot;23&quot;);
332              dataGrid.FindAll(&quot;td&quot;)[5].Html().Trim().Should().Be(&quot;snakex64&quot;);
333              dataGrid.FindAll(&quot;td&quot;)[6].Html().Trim().Should().Be(&quot;Steve&quot;);
334              dataGrid.FindAll(&quot;td&quot;)[7].Html().Trim().Should().Be(&quot;32&quot;);
335              dataGrid.FindAll(&quot;td&quot;)[8].Html().Trim().Should().Be(&quot;snakex64&quot;);
336              dataGrid.FindAll(&quot;tbody tr&quot;)[1].Click();
337              comp.FindAll(&quot;div input&quot;)[0].Change(&quot;Galadriel&quot;);
338              comp.FindAll(&quot;div input&quot;)[1].Change(1);
339              comp.Find(&quot;.mud-dialog-actions .mud-button-filled-primary&quot;).Click();
340              dataGrid.FindAll(&quot;td&quot;)[0].Html().Trim().Should().Be(&quot;John&quot;);
341              dataGrid.FindAll(&quot;td&quot;)[1].Html().Trim().Should().Be(&quot;45&quot;);
342              dataGrid.FindAll(&quot;td&quot;)[2].Html().Trim().Should().Be(&quot;snakex64&quot;);
343              dataGrid.FindAll(&quot;td&quot;)[3].Html().Trim().Should().Be(&quot;Galadriel&quot;);
344              dataGrid.FindAll(&quot;td&quot;)[4].Html().Trim().Should().Be(&quot;1&quot;);
345              dataGrid.FindAll(&quot;td&quot;)[5].Html().Trim().Should().Be(&quot;snakex64&quot;);
346              dataGrid.FindAll(&quot;td&quot;)[6].Html().Trim().Should().Be(&quot;Steve&quot;);
347              dataGrid.FindAll(&quot;td&quot;)[7].Html().Trim().Should().Be(&quot;32&quot;);
348              dataGrid.FindAll(&quot;td&quot;)[8].Html().Trim().Should().Be(&quot;snakex64&quot;);
349          }
350          [Test]
351          public async Task DataGridFormFieldChangedTest()
352          {
353              var comp = Context.RenderComponent&lt;DataGridFormFieldChangedTest&gt;();
354              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridFormFieldChangedTest.Item&gt;&gt;();
355              dataGrid.FindAll(&quot;tbody tr&quot;)[0].Click();
356              comp.Find(&quot;div input&quot;).Change(&quot;J K Simmons&quot;);
357              comp.Instance.FormFieldChangedEventArgs.NewValue.Should().Be(&quot;J K Simmons&quot;);
358              var textfield = comp.FindComponent&lt;MudTextField&lt;string&gt;&gt;();
359              Assert.AreSame(comp.Instance.FormFieldChangedEventArgs.Field, textfield.Instance);
360          }
361          [Test]
362          public async Task DataGridVisualStylingTest()
363          {
364              var comp = Context.RenderComponent&lt;DataGridVisualStylingTest&gt;();
365              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridVisualStylingTest.Item&gt;&gt;();
366              dataGrid.FindAll(&quot;td&quot;)[1].GetAttribute(&quot;style&quot;).Should().Contain(&quot;background-color:#E5BDE5&quot;);
367              dataGrid.FindAll(&quot;td&quot;)[2].GetAttribute(&quot;style&quot;).Should().Contain(&quot;font-weight:bold&quot;);
368          }
369          [Test]
370          [Obsolete]
371          public async Task DataGridEventCallbacksTest()
372          {
373              var comp = Context.RenderComponent&lt;DataGridEventCallbacksTest&gt;();
374              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridEventCallbacksTest.Item&gt;&gt;();
375              dataGrid.Instance.RowClick.HasDelegate.Should().Be(true);
376              dataGrid.Instance.SelectedItemChanged.HasDelegate.Should().Be(true);
377              dataGrid.Instance.CommittedItemChanges.HasDelegate.Should().Be(true);
378              dataGrid.Instance.StartedEditingItem.HasDelegate.Should().Be(true);
379              dataGrid.Instance.CancelledEditingItem.HasDelegate.Should().Be(true);
380              dataGrid.Instance.CancelledEditingItem.Should().Be(dataGrid.Instance.CancelledEditingItem);
381              var cancelCallback = dataGrid.Instance.CancelledEditingItem;
382              dataGrid.SetCallback(dg =&gt; dg.CancelledEditingItem, x =&gt; { return; });
383              dataGrid.Instance.CancelledEditingItem.Should().NotBe(cancelCallback);
384              dataGrid.Instance.CancelledEditingItem = cancelCallback;
385              dataGrid.Instance.CancelledEditingItem.Should().Be(cancelCallback);
386              var parameters = new List&lt;ComponentParameter&gt;();
387              parameters.Add(ComponentParameter.CreateParameter(nameof(dataGrid.Instance.MultiSelection), true));
388              parameters.Add(ComponentParameter.CreateParameter(nameof(dataGrid.Instance.ReadOnly), false));
389              parameters.Add(ComponentParameter.CreateParameter(nameof(dataGrid.Instance.EditMode), DataGridEditMode.Cell));
390              parameters.Add(ComponentParameter.CreateParameter(nameof(dataGrid.Instance.EditTrigger), DataGridEditTrigger.OnRowClick));
391              dataGrid.SetParametersAndRender(parameters.ToArray());
392              comp.Instance.RowClicked.Should().Be(false);
393              comp.Instance.SelectedItemChanged.Should().Be(false);
394              comp.Instance.CommittedItemChanges.Should().Be(false);
395              comp.Instance.StartedEditingItem.Should().Be(false);
396              comp.Instance.CanceledEditingItem.Should().Be(false);
397              dataGrid.FindAll(&quot;.mud-table-body tr&quot;)[0].Click();
398              dataGrid.FindAll(&quot;.mud-table-body tr td input&quot;)[0].Change(&quot;A test&quot;);
399              comp.Instance.RowClicked.Should().Be(true);
400              comp.Instance.SelectedItemChanged.Should().Be(true);
401              comp.Instance.CommittedItemChanges.Should().Be(true);
402              comp.Instance.CanceledEditingItem.Should().Be(false);
403              await dataGrid.InvokeAsync(dataGrid.Instance.CancelEditingItemAsync);
404              comp.Instance.CanceledEditingItem.Should().Be(true);
405          }
406          [Test]
407          public async Task DataGridServerSideSortableTest()
408          {
409              TestComponents.DataGridServerSideSortableTest.DisableServerTimeoutForTests = true;
410              var comp = Context.RenderComponent&lt;DataGridServerSideSortableTest&gt;();
411              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridServerSideSortableTest.Item&gt;&gt;();
412              var cells = dataGrid.FindAll(&quot;td&quot;);
413              cells.Count.Should().Be(21, because: &quot;We have 7 data rows with three columns&quot;);
414              cells[0].TextContent.Should().Be(&quot;B&quot;); cells[1].TextContent.Should().Be(&quot;42&quot;); cells[2].TextContent.Should().Be(&quot;555&quot;);
415              cells[3].TextContent.Should().Be(&quot;A&quot;); cells[4].TextContent.Should().Be(&quot;73&quot;); cells[5].TextContent.Should().Be(&quot;7&quot;);
416              cells[6].TextContent.Should().Be(&quot;A&quot;); cells[7].TextContent.Should().Be(&quot;11&quot;); cells[8].TextContent.Should().Be(&quot;4444&quot;);
417              cells[9].TextContent.Should().Be(&quot;C&quot;); cells[10].TextContent.Should().Be(&quot;33&quot;); cells[11].TextContent.Should().Be(&quot;33333&quot;);
418              cells[12].TextContent.Should().Be(&quot;A&quot;); cells[13].TextContent.Should().Be(&quot;99&quot;); cells[14].TextContent.Should().Be(&quot;66&quot;);
419              cells[15].TextContent.Should().Be(&quot;C&quot;); cells[16].TextContent.Should().Be(&quot;44&quot;); cells[17].TextContent.Should().Be(&quot;1111111&quot;);
420              cells[18].TextContent.Should().Be(&quot;C&quot;); cells[19].TextContent.Should().Be(&quot;55&quot;); cells[20].TextContent.Should().Be(&quot;222222&quot;);
421              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SetSortAsync(&quot;Name&quot;, SortDirection.Ascending, x =&gt; { return x.Name; }));
422              cells = dataGrid.FindAll(&quot;td&quot;);
423              cells[0].TextContent.Should().Be(&quot;A&quot;); cells[1].TextContent.Should().Be(&quot;73&quot;); cells[2].TextContent.Should().Be(&quot;7&quot;);
424              cells[3].TextContent.Should().Be(&quot;A&quot;); cells[4].TextContent.Should().Be(&quot;11&quot;); cells[5].TextContent.Should().Be(&quot;4444&quot;);
425              cells[6].TextContent.Should().Be(&quot;A&quot;); cells[7].TextContent.Should().Be(&quot;99&quot;); cells[8].TextContent.Should().Be(&quot;66&quot;);
426              cells[9].TextContent.Should().Be(&quot;B&quot;); cells[10].TextContent.Should().Be(&quot;42&quot;); cells[11].TextContent.Should().Be(&quot;555&quot;);
427              cells[12].TextContent.Should().Be(&quot;C&quot;); cells[13].TextContent.Should().Be(&quot;33&quot;); cells[14].TextContent.Should().Be(&quot;33333&quot;);
428              cells[15].TextContent.Should().Be(&quot;C&quot;); cells[16].TextContent.Should().Be(&quot;44&quot;); cells[17].TextContent.Should().Be(&quot;1111111&quot;);
429              cells[18].TextContent.Should().Be(&quot;C&quot;); cells[19].TextContent.Should().Be(&quot;55&quot;); cells[20].TextContent.Should().Be(&quot;222222&quot;);
430              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SetSortAsync(&quot;Name&quot;, SortDirection.Descending, x =&gt; { return x.Name; }));
431              cells = dataGrid.FindAll(&quot;td&quot;);
432              cells[0].TextContent.Should().Be(&quot;C&quot;); cells[1].TextContent.Should().Be(&quot;33&quot;); cells[2].TextContent.Should().Be(&quot;33333&quot;);
433              cells[3].TextContent.Should().Be(&quot;C&quot;); cells[4].TextContent.Should().Be(&quot;44&quot;); cells[5].TextContent.Should().Be(&quot;1111111&quot;);
434              cells[6].TextContent.Should().Be(&quot;C&quot;); cells[7].TextContent.Should().Be(&quot;55&quot;); cells[8].TextContent.Should().Be(&quot;222222&quot;);
435              cells[9].TextContent.Should().Be(&quot;B&quot;); cells[10].TextContent.Should().Be(&quot;42&quot;); cells[11].TextContent.Should().Be(&quot;555&quot;);
436              cells[12].TextContent.Should().Be(&quot;A&quot;); cells[13].TextContent.Should().Be(&quot;73&quot;); cells[14].TextContent.Should().Be(&quot;7&quot;);
437              cells[15].TextContent.Should().Be(&quot;A&quot;); cells[16].TextContent.Should().Be(&quot;11&quot;); cells[17].TextContent.Should().Be(&quot;4444&quot;);
438              cells[18].TextContent.Should().Be(&quot;A&quot;); cells[19].TextContent.Should().Be(&quot;99&quot;); cells[20].TextContent.Should().Be(&quot;66&quot;);
439              await comp.InvokeAsync(() =&gt; dataGrid.Instance.RemoveSortAsync(&quot;Name&quot;));
440              cells = dataGrid.FindAll(&quot;td&quot;);
441              cells[0].TextContent.Should().Be(&quot;B&quot;); cells[1].TextContent.Should().Be(&quot;42&quot;); cells[2].TextContent.Should().Be(&quot;555&quot;);
442              cells[3].TextContent.Should().Be(&quot;A&quot;); cells[4].TextContent.Should().Be(&quot;73&quot;); cells[5].TextContent.Should().Be(&quot;7&quot;);
443              cells[6].TextContent.Should().Be(&quot;A&quot;); cells[7].TextContent.Should().Be(&quot;11&quot;); cells[8].TextContent.Should().Be(&quot;4444&quot;);
444              cells[9].TextContent.Should().Be(&quot;C&quot;); cells[10].TextContent.Should().Be(&quot;33&quot;); cells[11].TextContent.Should().Be(&quot;33333&quot;);
445              cells[12].TextContent.Should().Be(&quot;A&quot;); cells[13].TextContent.Should().Be(&quot;99&quot;); cells[14].TextContent.Should().Be(&quot;66&quot;);
446              cells[15].TextContent.Should().Be(&quot;C&quot;); cells[16].TextContent.Should().Be(&quot;44&quot;); cells[17].TextContent.Should().Be(&quot;1111111&quot;);
447              cells[18].TextContent.Should().Be(&quot;C&quot;); cells[19].TextContent.Should().Be(&quot;55&quot;); cells[20].TextContent.Should().Be(&quot;222222&quot;);
448              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SortMode = SortMode.None);
449              dataGrid.Render();
450              dataGrid.Instance.DropContainerHasChanged();
451              dataGrid.FindAll(&quot;.column-header .sortable-column-header&quot;).Should().BeEmpty();
452          }
453          [Test]
454          public async Task FilterDefinitionStringTest()
455          {
456              var comp = Context.RenderComponent&lt;DataGridFiltersTest&gt;();
457              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridFiltersTest.Model&gt;&gt;();
458              var nameColumn = dataGrid.Instance.GetColumnByPropertyName(&quot;Name&quot;);
459              var filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;();
460              Func&lt;DataGridFiltersTest.Model, bool&gt; func = null;
461              #region FilterOperator.String.Contains
462              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
463              {
464                  Column = nameColumn,
465                  Operator = FilterOperator.String.Contains,
466                  Value = &quot;Joe&quot;,
467                  DataGrid = dataGrid.Instance
468              };
469              func = filterDefinition.GenerateFilterFunction();
470              Assert.IsFalse(func.Invoke(new(&quot;Does not contain&quot;, 45, null, null, null)));
471              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
472              Assert.IsFalse(func.Invoke(new(&quot;joe&quot;, 45, null, null, null)));
473              Assert.IsFalse(func.Invoke(new(null, 45, null, null, null)));
474              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
475              {
476                  Column = nameColumn,
477                  Operator = FilterOperator.String.Contains,
478                  Value = &quot;Joe&quot;,
479                  DataGrid = dataGrid.Instance
480              };
481              filterDefinition.DataGrid.FilterCaseSensitivity = DataGridFilterCaseSensitivity.CaseInsensitive;
482              func = filterDefinition.GenerateFilterFunction();
483              Assert.IsFalse(func.Invoke(new(&quot;Does not contain&quot;, 45, null, null, null)));
484              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
485              Assert.IsTrue(func.Invoke(new(&quot;joe&quot;, 45, null, null, null)));
486              Assert.IsFalse(func.Invoke(new(null, 45, null, null, null)));
487              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
488              {
489                  Column = nameColumn,
490                  Operator = FilterOperator.String.Contains,
491                  Value = null,
492                  DataGrid = dataGrid.Instance
493              };
494              filterDefinition.DataGrid.FilterCaseSensitivity = DataGridFilterCaseSensitivity.Default;
495              func = filterDefinition.GenerateFilterFunction();
496              Assert.IsTrue(func.Invoke(new(&quot;Does not contain&quot;, 45, null, null, null)));
497              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
498              Assert.IsTrue(func.Invoke(new(null, 45, null, null, null)));
499              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
500              {
501                  Column = nameColumn,
502                  Operator = FilterOperator.String.Contains,
503                  Value = null,
504                  DataGrid = dataGrid.Instance
505              };
506              filterDefinition.DataGrid.FilterCaseSensitivity = DataGridFilterCaseSensitivity.CaseInsensitive;
507              func = filterDefinition.GenerateFilterFunction();
508              Assert.IsTrue(func.Invoke(new(&quot;Does not contain&quot;, 45, null, null, null)));
509              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
510              Assert.IsTrue(func.Invoke(new(null, 45, null, null, null)));
511              #endregion
512              #region FilterOperator.String.NotContains
513              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
514              {
515                  Column = nameColumn,
516                  Operator = FilterOperator.String.NotContains,
517                  Value = &quot;Joe&quot;,
518                  DataGrid = dataGrid.Instance
519              };
520              filterDefinition.DataGrid.FilterCaseSensitivity = DataGridFilterCaseSensitivity.Default;
521              func = filterDefinition.GenerateFilterFunction();
522              Assert.IsTrue(func.Invoke(new(&quot;Does not contain&quot;, 45, null, null, null)));
523              Assert.IsFalse(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
524              Assert.IsTrue(func.Invoke(new(&quot;joe&quot;, 45, null, null, null)));
525              Assert.IsFalse(func.Invoke(new(null, 45, null, null, null)));
526              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
527              {
528                  Column = nameColumn,
529                  Operator = FilterOperator.String.NotContains,
530                  Value = &quot;Joe&quot;,
531                  DataGrid = dataGrid.Instance
532              };
533              filterDefinition.DataGrid.FilterCaseSensitivity = DataGridFilterCaseSensitivity.CaseInsensitive;
534              func = filterDefinition.GenerateFilterFunction();
535              Assert.IsTrue(func.Invoke(new(&quot;Does not contain&quot;, 45, null, null, null)));
536              Assert.IsFalse(func.Invoke(new(&quot;joe&quot;, 45, null, null, null)));
537              Assert.IsFalse(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
538              Assert.IsFalse(func.Invoke(new(null, 45, null, null, null)));
539              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
540              {
541                  Column = nameColumn,
542                  Operator = FilterOperator.String.NotContains,
543                  Value = null,
544                  DataGrid = dataGrid.Instance
545              };
546              filterDefinition.DataGrid.FilterCaseSensitivity = DataGridFilterCaseSensitivity.Default;
547              func = filterDefinition.GenerateFilterFunction();
548              Assert.IsTrue(func.Invoke(new(&quot;Does not contain&quot;, 45, null, null, null)));
549              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
550              Assert.IsTrue(func.Invoke(new(null, 45, null, null, null)));
551              #endregion
552              #region FilterOperator.String.Equal
553              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
554              {
555                  Column = nameColumn,
556                  Operator = FilterOperator.String.Equal,
557                  Value = &quot;Joe&quot;,
558                  DataGrid = dataGrid.Instance
559              };
560              func = filterDefinition.GenerateFilterFunction();
561              Assert.IsFalse(func.Invoke(new(&quot;Not Joe&quot;, 45, null, null, null)));
562              Assert.IsFalse(func.Invoke(new(null, 45, null, null, null)));
563              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
564              Assert.IsFalse(func.Invoke(new(&quot;joe&quot;, 45, null, null, null)));
565              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
566              {
567                  Column = nameColumn,
568                  Operator = FilterOperator.String.Equal,
569                  Value = &quot;Joe&quot;,
570                  DataGrid = dataGrid.Instance
571              };
572              filterDefinition.DataGrid.FilterCaseSensitivity = DataGridFilterCaseSensitivity.CaseInsensitive;
573              func = filterDefinition.GenerateFilterFunction();
574              Assert.IsFalse(func.Invoke(new(&quot;Not Joe&quot;, 45, null, null, null)));
575              Assert.IsFalse(func.Invoke(new(null, 45, null, null, null)));
576              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
577              Assert.IsTrue(func.Invoke(new(&quot;joe&quot;, 45, null, null, null)));
578              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
579              {
580                  Column = nameColumn,
581                  Operator = FilterOperator.String.Equal,
582                  Value = null,
583                  DataGrid = dataGrid.Instance
584              };
585              filterDefinition.DataGrid.FilterCaseSensitivity = DataGridFilterCaseSensitivity.Default;
586              func = filterDefinition.GenerateFilterFunction();
587              Assert.IsTrue(func.Invoke(new(&quot;Joe Not&quot;, 45, null, null, null)));
588              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
589              Assert.IsTrue(func.Invoke(new(null, 45, null, null, null)));
590              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
591              {
592                  Column = nameColumn,
593                  Operator = FilterOperator.String.Equal,
594                  Value = null,
595                  DataGrid = dataGrid.Instance
596              };
597              filterDefinition.DataGrid.FilterCaseSensitivity = DataGridFilterCaseSensitivity.CaseInsensitive;
598              func = filterDefinition.GenerateFilterFunction();
599              Assert.IsTrue(func.Invoke(new(&quot;Joe Not&quot;, 45, null, null, null)));
600              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
601              Assert.IsTrue(func.Invoke(new(&quot;joe&quot;, 45, null, null, null)));
602              Assert.IsTrue(func.Invoke(new(null, 45, null, null, null)));
603              #endregion
604              #region FilterOperator.String.NotEqual
605              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
606              {
607                  Column = nameColumn,
608                  Operator = FilterOperator.String.NotEqual,
609                  Value = &quot;Joe&quot;,
610                  DataGrid = dataGrid.Instance
611              };
612              filterDefinition.DataGrid.FilterCaseSensitivity = DataGridFilterCaseSensitivity.Default;
613              func = filterDefinition.GenerateFilterFunction();
614              Assert.IsTrue(func.Invoke(new(&quot;Not Joe&quot;, 45, null, null, null)));
615              Assert.IsFalse(func.Invoke(new(null, 45, null, null, null)));
616              Assert.IsFalse(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
617              Assert.IsTrue(func.Invoke(new(&quot;joe&quot;, 45, null, null, null)));
618              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
619              {
620                  Column = nameColumn,
621                  Operator = FilterOperator.String.NotEqual,
622                  Value = &quot;Joe&quot;,
623                  DataGrid = dataGrid.Instance
624              };
625              filterDefinition.DataGrid.FilterCaseSensitivity = DataGridFilterCaseSensitivity.CaseInsensitive;
626              func = filterDefinition.GenerateFilterFunction();
627              Assert.IsTrue(func.Invoke(new(&quot;Not Joe&quot;, 45, null, null, null)));
628              Assert.IsFalse(func.Invoke(new(null, 45, null, null, null)));
629              Assert.IsFalse(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
630              Assert.IsFalse(func.Invoke(new(&quot;joe&quot;, 45, null, null, null)));
631              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
632              {
633                  Column = nameColumn,
634                  Operator = FilterOperator.String.NotEqual,
635                  Value = null,
636                  DataGrid = dataGrid.Instance
637              };
638              filterDefinition.DataGrid.FilterCaseSensitivity = DataGridFilterCaseSensitivity.Default;
639              func = filterDefinition.GenerateFilterFunction();
640              Assert.IsTrue(func.Invoke(new(&quot;Joe Not&quot;, 45, null, null, null)));
641              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
642              Assert.IsTrue(func.Invoke(new(null, 45, null, null, null)));
643              #endregion
644              #region FilterOperator.String.StartsWith
645              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
646              {
647                  Column = nameColumn,
648                  Operator = FilterOperator.String.StartsWith,
649                  Value = &quot;Joe&quot;,
650                  DataGrid = dataGrid.Instance
651              };
652              func = filterDefinition.GenerateFilterFunction();
653              Assert.IsFalse(func.Invoke(new(&quot;Not Joe&quot;, 45, null, null, null)));
654              Assert.IsFalse(func.Invoke(new(null, 45, null, null, null)));
655              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
656              Assert.IsFalse(func.Invoke(new(&quot;joe&quot;, 45, null, null, null)));
657              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
658              {
659                  Column = nameColumn,
660                  Operator = FilterOperator.String.StartsWith,
661                  Value = &quot;Joe&quot;,
662                  DataGrid = dataGrid.Instance
663              };
664              filterDefinition.DataGrid.FilterCaseSensitivity = DataGridFilterCaseSensitivity.CaseInsensitive;
665              func = filterDefinition.GenerateFilterFunction();
666              Assert.IsFalse(func.Invoke(new(&quot;Not Joe&quot;, 45, null, null, null)));
667              Assert.IsFalse(func.Invoke(new(null, 45, null, null, null)));
668              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
669              Assert.IsTrue(func.Invoke(new(&quot;joe&quot;, 45, null, null, null)));
670              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
671              {
672                  Column = nameColumn,
673                  Operator = FilterOperator.String.StartsWith,
674                  Value = null,
675                  DataGrid = dataGrid.Instance
676              };
677              filterDefinition.DataGrid.FilterCaseSensitivity = DataGridFilterCaseSensitivity.Default;
678              func = filterDefinition.GenerateFilterFunction();
679              Assert.IsTrue(func.Invoke(new(&quot;Not Joe&quot;, 45, null, null, null)));
680              Assert.IsTrue(func.Invoke(new(null, 45, null, null, null)));
681              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
682              #endregion
683              #region FilterOperator.String.EndsWith
684              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
685              {
686                  Column = nameColumn,
687                  Operator = FilterOperator.String.EndsWith,
688                  Value = &quot;Joe&quot;,
689                  DataGrid = dataGrid.Instance
690              };
691              func = filterDefinition.GenerateFilterFunction();
692              Assert.IsFalse(func.Invoke(new(&quot;Joe Not&quot;, 45, null, null, null)));
693              Assert.IsFalse(func.Invoke(new(null, 45, null, null, null)));
694              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
695              Assert.IsFalse(func.Invoke(new(&quot;joe&quot;, 45, null, null, null)));
696              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
697              {
698                  Column = nameColumn,
699                  Operator = FilterOperator.String.EndsWith,
700                  Value = &quot;Joe&quot;,
701                  DataGrid = dataGrid.Instance
702              };
703              filterDefinition.DataGrid.FilterCaseSensitivity = DataGridFilterCaseSensitivity.CaseInsensitive;
704              func = filterDefinition.GenerateFilterFunction();
705              Assert.IsFalse(func.Invoke(new(&quot;Joe Not&quot;, 45, null, null, null)));
706              Assert.IsFalse(func.Invoke(new(null, 45, null, null, null)));
707              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
708              Assert.IsTrue(func.Invoke(new(&quot;joe&quot;, 45, null, null, null)));
709              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
710              {
711                  Column = nameColumn,
712                  Operator = FilterOperator.String.EndsWith,
713                  Value = null,
714                  DataGrid = dataGrid.Instance
715              };
716              filterDefinition.DataGrid.FilterCaseSensitivity = DataGridFilterCaseSensitivity.Default;
717              func = filterDefinition.GenerateFilterFunction();
718              Assert.IsTrue(func.Invoke(new(&quot;Joe Not&quot;, 45, null, null, null)));
719              Assert.IsTrue(func.Invoke(new(null, 45, null, null, null)));
720              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
721              #endregion
722              #region FilterOperator.String.Empty
723              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
724              {
725                  Column = nameColumn,
726                  Operator = FilterOperator.String.Empty,
727                  Value = null,
728                  DataGrid = dataGrid.Instance
729              };
730              func = filterDefinition.GenerateFilterFunction();
731              Assert.IsFalse(func.Invoke(new(&quot;Joe Not&quot;, 45, null, null, null)));
732              Assert.IsTrue(func.Invoke(new(&quot;&quot;, 45, null, null, null)));
733              Assert.IsTrue(func.Invoke(new(null, 45, null, null, null)));
734              Assert.IsTrue(func.Invoke(new(String.Empty, 45, null, null, null)));
735              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
736              {
737                  Column = nameColumn,
738                  Operator = FilterOperator.String.NotEmpty,
739                  Value = null,
740                  DataGrid = dataGrid.Instance
741              };
742              func = filterDefinition.GenerateFilterFunction();
743              Assert.IsTrue(func.Invoke(new(&quot;Joe Not&quot;, 45, null, null, null)));
744              Assert.IsFalse(func.Invoke(new(&quot;&quot;, 45, null, null, null)));
745              Assert.IsFalse(func.Invoke(new(null, 45, null, null, null)));
746              Assert.IsFalse(func.Invoke(new(String.Empty, 45, null, null, null)));
747              #endregion
748              #region FilterOperator.String.NotEmpty
749              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
750              {
751                  Column = nameColumn,
752                  Operator = FilterOperator.String.NotEmpty,
753                  Value = null,
754                  DataGrid = dataGrid.Instance
755              };
756              func = filterDefinition.GenerateFilterFunction();
757              Assert.IsTrue(func.Invoke(new(&quot;Joe Not&quot;, 45, null, null, null)));
758              Assert.IsFalse(func.Invoke(new(&quot;&quot;, 45, null, null, null)));
759              Assert.IsFalse(func.Invoke(new(null, 45, null, null, null)));
760              Assert.IsFalse(func.Invoke(new(String.Empty, 45, null, null, null)));
761              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
762              {
763                  Column = nameColumn,
764                  Operator = FilterOperator.String.NotEmpty,
765                  Value = null,
766                  DataGrid = dataGrid.Instance
767              };
768              func = filterDefinition.GenerateFilterFunction();
769              Assert.IsTrue(func.Invoke(new(&quot;Joe Not&quot;, 45, null, null, null)));
770              Assert.IsFalse(func.Invoke(new(&quot;&quot;, 45, null, null, null)));
771              Assert.IsFalse(func.Invoke(new(null, 45, null, null, null)));
772              Assert.IsFalse(func.Invoke(new(String.Empty, 45, null, null, null)));
773              #endregion
774              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
775              {
776                  Column = nameColumn,
777                  Operator = null,
778                  Value = &quot;Joe&quot;,
779                  DataGrid = dataGrid.Instance
780              };
781              func = filterDefinition.GenerateFilterFunction();
782              Assert.IsTrue(func.Invoke(new(&quot;Joe Not&quot;, 45, null, null, null)));
783              Assert.IsTrue(func.Invoke(new(null, 45, null, null, null)));
784              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
785          }
786          [Test]
787          public async Task FilterDefinitionBoolTest()
788          {
789              var comp = Context.RenderComponent&lt;DataGridFiltersTest&gt;();
790              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridFiltersTest.Model&gt;&gt;();
791              var hiredColumn = dataGrid.Instance.GetColumnByPropertyName(&quot;Hired&quot;);
792              #region FilterOperator.Boolean.Is
793              var filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
794              {
795                  Column = hiredColumn,
796                  Operator = FilterOperator.Boolean.Is,
797                  Value = true
798              };
799              var func = filterDefinition.GenerateFilterFunction();
800              Assert.IsFalse(func.Invoke(new(&quot;Sam&quot;, 45, null, false, null)));
801              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, true, null)));
802              Assert.IsFalse(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
803              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
804              {
805                  Column = hiredColumn,
806                  Operator = FilterOperator.Boolean.Is,
807                  Value = null
808              };
809              func = filterDefinition.GenerateFilterFunction();
810              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 45, null, false, null)));
811              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, true, null)));
812              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
813              #endregion
814              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
815              {
816                  Column = hiredColumn,
817                  Operator = null,
818                  Value = true
819              };
820              func = filterDefinition.GenerateFilterFunction();
821              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 45, null, false, null)));
822              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, true, null)));
823              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
824          }
825          [Test]
826          public async Task FilterDefinitionEnumTest()
827          {
828              var comp = Context.RenderComponent&lt;DataGridFiltersTest&gt;();
829              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridFiltersTest.Model&gt;&gt;();
830              var statusColumn = dataGrid.Instance.GetColumnByPropertyName(&quot;Status&quot;);
831              #region FilterOperator.Enum.Is
832              var filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
833              {
834                  Column = statusColumn,
835                  Operator = FilterOperator.Enum.Is,
836                  Value = Severity.Normal
837              };
838              var func = filterDefinition.GenerateFilterFunction();
839              Assert.IsFalse(func.Invoke(new(&quot;Sam&quot;, 456, Severity.Info, null, null)));
840              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, Severity.Normal, null, null)));
841              Assert.IsFalse(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
842              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
843              {
844                  Column = statusColumn,
845                  Operator = FilterOperator.Enum.Is,
846                  Value = null
847              };
848              func = filterDefinition.GenerateFilterFunction();
849              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 456, Severity.Info, null, null)));
850              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, Severity.Normal, null, null)));
851              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
852              #endregion
853              #region FilterOperator.Enum.IsNot
854              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
855              {
856                  Column = statusColumn,
857                  Operator = FilterOperator.Enum.IsNot,
858                  Value = Severity.Normal
859              };
860              func = filterDefinition.GenerateFilterFunction();
861              Assert.IsFalse(func.Invoke(new(&quot;Sam&quot;, 456, Severity.Normal, null, null)));
862              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, Severity.Info, null, null)));
863              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
864              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
865              {
866                  Column = statusColumn,
867                  Operator = FilterOperator.Enum.IsNot,
868                  Value = null
869              };
870              func = filterDefinition.GenerateFilterFunction();
871              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 456, Severity.Normal, null, null)));
872              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, Severity.Info, null, null)));
873              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
874              #endregion
875              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
876              {
877                  Column = statusColumn,
878                  Operator = null,
879                  Value = Severity.Normal
880              };
881              func = filterDefinition.GenerateFilterFunction();
882              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 456, Severity.Normal, null, null)));
883              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, Severity.Info, null, null)));
884              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
885          }
886          [Test]
887          public async Task FilterDefinitionDateTimeTest()
888          {
889              var comp = Context.RenderComponent&lt;DataGridFiltersTest&gt;();
890              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridFiltersTest.Model&gt;&gt;();
891              var dateColumn = dataGrid.Instance.GetColumnByPropertyName(&quot;HiredOn&quot;);
892              var utcnow = DateTime.UtcNow;
893              #region FilterOperator.DateTime.Is
894              var filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
895              {
896                  Column = dateColumn,
897                  Operator = FilterOperator.DateTime.Is,
898                  Value = utcnow
899              };
900              var func = filterDefinition.GenerateFilterFunction();
901              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
902              Assert.IsFalse(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
903              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
904              {
905                  Column = dateColumn,
906                  Operator = FilterOperator.DateTime.Is,
907                  Value = null
908              };
909              func = filterDefinition.GenerateFilterFunction();
910              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
911              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
912              #endregion
913              #region FilterOperator.DateTime.IsNot
914              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
915              {
916                  Column = dateColumn,
917                  Operator = FilterOperator.DateTime.IsNot,
918                  Value = utcnow
919              };
920              func = filterDefinition.GenerateFilterFunction();
921              Assert.IsFalse(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
922              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
923              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
924              {
925                  Column = dateColumn,
926                  Operator = FilterOperator.DateTime.IsNot,
927                  Value = null
928              };
929              func = filterDefinition.GenerateFilterFunction();
930              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
931              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
932              #endregion
933              #region FilterOperator.DateTime.After
934              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
935              {
936                  Column = dateColumn,
937                  Operator = FilterOperator.DateTime.After,
938                  Value = utcnow
939              };
940              func = filterDefinition.GenerateFilterFunction();
941              Assert.IsFalse(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
942              Assert.IsFalse(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
943              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
944              {
945                  Column = dateColumn,
946                  Operator = FilterOperator.DateTime.After,
947                  Value = null
948              };
949              func = filterDefinition.GenerateFilterFunction();
950              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
951              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
952              #endregion
953              #region FilterOperator.DateTime.OnOrAfter
954              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
955              {
956                  Column = dateColumn,
957                  Operator = FilterOperator.DateTime.OnOrAfter,
958                  Value = utcnow
959              };
960              func = filterDefinition.GenerateFilterFunction();
961              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
962              Assert.IsFalse(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
963              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
964              {
965                  Column = dateColumn,
966                  Operator = FilterOperator.DateTime.OnOrAfter,
967                  Value = null
968              };
969              func = filterDefinition.GenerateFilterFunction();
970              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
971              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
972              #endregion
973              #region FilterOperator.DateTime.Before
974              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
975              {
976                  Column = dateColumn,
977                  Operator = FilterOperator.DateTime.Before,
978                  Value = utcnow
979              };
980              func = filterDefinition.GenerateFilterFunction();
981              Assert.IsFalse(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
982              Assert.IsFalse(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
983              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
984              {
985                  Column = dateColumn,
986                  Operator = FilterOperator.DateTime.Before,
987                  Value = null
988              };
989              func = filterDefinition.GenerateFilterFunction();
990              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
991              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
992              #endregion
993              #region FilterOperator.DateTime.OnOrBefore
994              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
995              {
996                  Column = dateColumn,
997                  Operator = FilterOperator.DateTime.OnOrBefore,
998                  Value = utcnow
999              };
1000              func = filterDefinition.GenerateFilterFunction();
1001              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
1002              Assert.IsFalse(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1003              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1004              {
1005                  Column = dateColumn,
1006                  Operator = FilterOperator.DateTime.OnOrBefore,
1007                  Value = null
1008              };
1009              func = filterDefinition.GenerateFilterFunction();
1010              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
1011              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1012              #endregion
1013              #region FilterOperator.DateTime.Empty
1014              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1015              {
1016                  Column = dateColumn,
1017                  Operator = FilterOperator.DateTime.Empty,
1018                  Value = utcnow
1019              };
1020              func = filterDefinition.GenerateFilterFunction();
1021              Assert.IsFalse(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
1022              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1023              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1024              {
1025                  Column = dateColumn,
1026                  Operator = FilterOperator.DateTime.Empty,
1027                  Value = null
1028              };
1029              func = filterDefinition.GenerateFilterFunction();
1030              Assert.IsFalse(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
1031              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1032              #endregion
1033              #region FilterOperator.DateTime.NotEmpty
1034              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1035              {
1036                  Column = dateColumn,
1037                  Operator = FilterOperator.DateTime.NotEmpty,
1038                  Value = utcnow
1039              };
1040              func = filterDefinition.GenerateFilterFunction();
1041              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
1042              Assert.IsFalse(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1043              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1044              {
1045                  Column = dateColumn,
1046                  Operator = FilterOperator.DateTime.NotEmpty,
1047                  Value = null
1048              };
1049              func = filterDefinition.GenerateFilterFunction();
1050              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
1051              Assert.IsFalse(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1052              #endregion
1053              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1054              {
1055                  Column = dateColumn,
1056                  Operator = null,
1057                  Value = utcnow
1058              };
1059              func = filterDefinition.GenerateFilterFunction();
1060              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
1061              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1062          }
1063          [Test]
1064          public async Task FilterDefinitionNumberTest()
1065          {
1066              var comp = Context.RenderComponent&lt;DataGridFiltersTest&gt;();
1067              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridFiltersTest.Model&gt;&gt;();
1068              var ageColumn = dataGrid.Instance.GetColumnByPropertyName(&quot;Age&quot;);
1069              #region FilterOperator.Number.Equal
1070              var filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1071              {
1072                  Column = ageColumn,
1073                  Operator = FilterOperator.Number.Equal,
1074                  Value = 45
1075              };
1076              var func = filterDefinition.GenerateFilterFunction();
1077              Assert.IsFalse(func.Invoke(new(&quot;Sam&quot;, 456, null, null, null)));
1078              Assert.IsFalse(func.Invoke(new(&quot;Sam&quot;, null, null, null, null)));
1079              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1080              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1081              {
1082                  Column = ageColumn,
1083                  Operator = FilterOperator.Number.Equal,
1084                  Value = null
1085              };
1086              var func2 = filterDefinition.GenerateFilterFunction();
1087              Assert.IsTrue(func2.Invoke(new(&quot;Sam&quot;, 456, null, null, null)));
1088              Assert.IsTrue(func2.Invoke(new(&quot;Sam&quot;, null, null, null, null)));
1089              Assert.IsTrue(func2.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1090              #endregion
1091              #region FilterOperator.Number.NotEqual
1092              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1093              {
1094                  Column = ageColumn,
1095                  Operator = FilterOperator.Number.NotEqual,
1096                  Value = 45
1097              };
1098              var func3 = filterDefinition.GenerateFilterFunction();
1099              Assert.IsTrue(func3.Invoke(new(&quot;Sam&quot;, 456, null, null, null)));
1100              Assert.IsTrue(func3.Invoke(new(&quot;Sam&quot;, null, null, null, null)));
1101              Assert.IsFalse(func3.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1102              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1103              {
1104                  Column = ageColumn,
1105                  Operator = FilterOperator.Number.NotEqual,
1106                  Value = null
1107              };
1108              var func4 = filterDefinition.GenerateFilterFunction();
1109              Assert.IsTrue(func4.Invoke(new(&quot;Sam&quot;, 456, null, null, null)));
1110              Assert.IsTrue(func4.Invoke(new(&quot;Sam&quot;, null, null, null, null)));
1111              Assert.IsTrue(func4.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1112              #endregion
1113              #region FilterOperator.Number.GreaterThan
1114              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1115              {
1116                  Column = ageColumn,
1117                  Operator = FilterOperator.Number.GreaterThan,
1118                  Value = 45
1119              };
1120              var func5 = filterDefinition.GenerateFilterFunction();
1121              Assert.IsTrue(func5.Invoke(new(&quot;Sam&quot;, 456, null, null, null)));
1122              Assert.IsFalse(func5.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1123              Assert.IsFalse(func5.Invoke(new(&quot;Joe&quot;, null, null, null, null)));
1124              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1125              {
1126                  Column = ageColumn,
1127                  Operator = FilterOperator.Number.GreaterThan,
1128                  Value = null
1129              };
1130              var func6 = filterDefinition.GenerateFilterFunction();
1131              Assert.IsTrue(func6.Invoke(new(&quot;Sam&quot;, 456, null, null, null)));
1132              Assert.IsTrue(func6.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1133              Assert.IsTrue(func6.Invoke(new(&quot;Joe&quot;, null, null, null, null)));
1134              #endregion
1135              #region FilterOperator.Number.LessThan
1136              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1137              {
1138                  Column = ageColumn,
1139                  Operator = FilterOperator.Number.LessThan,
1140                  Value = 45
1141              };
1142              var func7 = filterDefinition.GenerateFilterFunction();
1143              Assert.IsTrue(func7.Invoke(new(&quot;Sam&quot;, 4, null, null, null)));
1144              Assert.IsFalse(func7.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1145              Assert.IsFalse(func7.Invoke(new(&quot;Joe&quot;, null, null, null, null)));
1146              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1147              {
1148                  Column = ageColumn,
1149                  Operator = FilterOperator.Number.LessThan,
1150                  Value = null
1151              };
1152              var func8 = filterDefinition.GenerateFilterFunction();
1153              Assert.IsTrue(func8.Invoke(new(&quot;Sam&quot;, 4, null, null, null)));
1154              Assert.IsTrue(func8.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1155              Assert.IsTrue(func8.Invoke(new(&quot;Joe&quot;, null, null, null, null)));
1156              #endregion
1157              #region FilterOperator.Number.GreaterThanOrEqual
1158              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1159              {
1160                  Column = ageColumn,
1161                  Operator = FilterOperator.Number.GreaterThanOrEqual,
1162                  Value = 45
1163              };
1164              var func9 = filterDefinition.GenerateFilterFunction();
1165              Assert.IsFalse(func9.Invoke(new(&quot;Sam&quot;, 4, null, null, null)));
1166              Assert.IsFalse(func9.Invoke(new(&quot;Sam&quot;, null, null, null, null)));
1167              Assert.IsTrue(func9.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1168              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1169              {
1170                  Column = ageColumn,
1171                  Operator = FilterOperator.Number.GreaterThanOrEqual,
1172                  Value = null
1173              };
1174              var func10 = filterDefinition.GenerateFilterFunction();
1175              Assert.IsTrue(func10.Invoke(new(&quot;Sam&quot;, 4, null, null, null)));
1176              Assert.IsTrue(func10.Invoke(new(&quot;Sam&quot;, null, null, null, null)));
1177              Assert.IsTrue(func10.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1178              #endregion
1179              #region FilterOperator.Number.LessThanOrEqual
1180              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1181              {
1182                  Column = ageColumn,
1183                  Operator = FilterOperator.Number.LessThanOrEqual,
1184                  Value = 45
1185              };
1186              var func11 = filterDefinition.GenerateFilterFunction();
1187              Assert.IsFalse(func11.Invoke(new(&quot;Sam&quot;, 46, null, null, null)));
1188              Assert.IsFalse(func11.Invoke(new(&quot;Sam&quot;, null, null, null, null)));
1189              Assert.IsTrue(func11.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1190              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1191              {
1192                  Column = ageColumn,
1193                  Operator = FilterOperator.Number.LessThanOrEqual,
1194                  Value = null
1195              };
1196              var func12 = filterDefinition.GenerateFilterFunction();
1197              Assert.IsTrue(func12.Invoke(new(&quot;Sam&quot;, 46, null, null, null)));
1198              Assert.IsTrue(func12.Invoke(new(&quot;Sam&quot;, null, null, null, null)));
1199              Assert.IsTrue(func12.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1200              #endregion
1201              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1202              {
1203                  Column = ageColumn,
1204                  Operator = null,
1205                  Value = 45
1206              };
1207              var func13 = filterDefinition.GenerateFilterFunction();
1208              Assert.IsTrue(func13.Invoke(new(&quot;Sam&quot;, 456, null, null, null)));
1209              Assert.IsTrue(func13.Invoke(new(&quot;Sam&quot;, null, null, null, null)));
1210              Assert.IsTrue(func13.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1211          }
1212          [Test]
1213          public async Task FilterDefinitionReplaceWithCustom()
1214          {
1215              var comp = Context.RenderComponent&lt;DataGridFiltersTest&gt;();
1216              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridFiltersTest.Model&gt;&gt;();
1217              dataGrid.Instance.SetDefaultFilterDefinition&lt;CustomFilterDefinitionMock&lt;DataGridFiltersTest.Model&gt;&gt;();
1218              await comp.InvokeAsync(() =&gt; dataGrid.Instance.OpenFilters());
1219              await comp.InvokeAsync(() =&gt; dataGrid.Instance.AddFilter());
1220              dataGrid.FindAll(&quot;.filters-panel .mud-grid-item.d-flex&quot;).Count.Should().Be(1);
1221              var filterDefinitionInstance = dataGrid.Instance.FilterDefinitions.FirstOrDefault();
1222              dataGrid.Instance.FilterDefinitions.Count.Should().Be(1);
1223              filterDefinitionInstance.Should().NotBeNull();
1224              filterDefinitionInstance.Should().BeOfType&lt;CustomFilterDefinitionMock&lt;DataGridFiltersTest.Model&gt;&gt;();
1225          }
1226          [Test]
1227          public async Task DataGridFiltersTest()
1228          {
1229              var comp = Context.RenderComponent&lt;DataGridFiltersTest&gt;();
1230              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridFiltersTest.Model&gt;&gt;();
1231              var filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1232              {
1233                  Column = dataGrid.Instance.GetColumnByPropertyName(&quot;Name&quot;),
1234                  Operator = &quot;contains&quot;,
1235                  Value = &quot;John&quot;
1236              };
1237              var filterDefinition2 = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1238              {
1239                  Column = dataGrid.Instance.GetColumnByPropertyName(&quot;Age&quot;),
1240                  Operator = &quot;&gt;&quot;,
1241                  Value = 30
1242              };
1243              var filterDefinition3 = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1244              {
1245                  Column = dataGrid.Instance.GetColumnByPropertyName(&quot;Status&quot;),
1246                  Operator = &quot;is&quot;,
1247                  Value = Severity.Normal
1248              };
1249              var filterDefinition4 = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1250              {
1251                  Column = dataGrid.Instance.GetColumnByPropertyName(&quot;Hired&quot;),
1252                  Operator = &quot;is&quot;,
1253                  Value = true
1254              };
1255              var filterDefinition5 = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1256              {
1257                  Column = dataGrid.Instance.GetColumnByPropertyName(&quot;HiredOn&quot;),
1258                  Operator = &quot;is&quot;,
1259                  Value = DateTime.UtcNow.Date
1260              };
1261              await comp.InvokeAsync(() =&gt; dataGrid.Instance.AddFilterAsync(filterDefinition));
1262              await comp.InvokeAsync(() =&gt; dataGrid.Instance.AddFilterAsync(filterDefinition2));
1263              await comp.InvokeAsync(() =&gt; dataGrid.Instance.AddFilterAsync(filterDefinition3));
1264              await comp.InvokeAsync(() =&gt; dataGrid.Instance.AddFilterAsync(filterDefinition4));
1265              await comp.InvokeAsync(() =&gt; dataGrid.Instance.AddFilterAsync(filterDefinition5));
1266              await comp.InvokeAsync(() =&gt; dataGrid.Instance.OpenFilters());
1267              dataGrid.FindAll(&quot;.filters-panel .mud-grid-item.d-flex&quot;).Count.Should().Be(5);
1268              dataGrid.FindAll(&quot;.filters-panel &gt; button&quot;)[0].Click();
1269              dataGrid.FindAll(&quot;.filters-panel .mud-grid-item.d-flex&quot;).Count.Should().Be(6);
1270              await comp.InvokeAsync(() =&gt; dataGrid.Instance.AddFilter());
1271              dataGrid.FindAll(&quot;.filters-panel .mud-grid-item.d-flex&quot;).Count.Should().Be(7);
1272              await comp.InvokeAsync(() =&gt; dataGrid.Instance.AddFilterAsync(new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1273              {
1274                  Column = dataGrid.Instance.RenderedColumns.FirstOrDefault(x =&gt; x.PropertyName == &quot;Status&quot;)
1275              }));
1276              dataGrid.FindAll(&quot;.filters-panel .mud-grid-item.d-flex&quot;).Count.Should().Be(8);
1277              await comp.InvokeAsync(() =&gt; dataGrid.Instance.ToggleFiltersMenu());
1278              dataGrid.FindAll(&quot;.filters-panel&quot;).Count.Should().Be(0);
1279              var internalFilter = new Filter&lt;DataGridFiltersTest.Model&gt;(dataGrid.Instance, filterDefinition, null);
1280              filterDefinition.Column.dataType.Should().Be(typeof(string));
1281              await comp.InvokeAsync(() =&gt; internalFilter.StringValueChanged(&quot;J&quot;));
1282              filterDefinition.Value.Should().Be(&quot;J&quot;);
1283              internalFilter = new Filter&lt;DataGridFiltersTest.Model&gt;(dataGrid.Instance, filterDefinition2, null);
1284              filterDefinition2.Column.dataType.Should().Be(typeof(int?));
1285              await comp.InvokeAsync(() =&gt; internalFilter.NumberValueChanged(35));
1286              filterDefinition2.Value.Should().Be(35);
1287              internalFilter = new Filter&lt;DataGridFiltersTest.Model&gt;(dataGrid.Instance, filterDefinition3, null);
1288              filterDefinition3.Column.dataType.Should().Be(typeof(Severity?));
1289              await comp.InvokeAsync(() =&gt; internalFilter.NumberValueChanged(35));
1290              filterDefinition3.Value.Should().Be(35);
1291              filterDefinition3.FieldType.IsEnum.Should().Be(true);
1292              internalFilter = new Filter&lt;DataGridFiltersTest.Model&gt;(dataGrid.Instance, filterDefinition4, null);
1293              filterDefinition4.Column.dataType.Should().Be(typeof(bool?));
1294              await comp.InvokeAsync(() =&gt; internalFilter.BoolValueChanged(false));
1295              filterDefinition4.Value.Should().Be(false);
1296              var date = DateTime.UtcNow;
1297              internalFilter = new Filter&lt;DataGridFiltersTest.Model&gt;(dataGrid.Instance, filterDefinition5, null);
1298              filterDefinition5.Column.dataType.Should().Be(typeof(DateTime?));
1299              await comp.InvokeAsync(() =&gt; internalFilter.DateValueChanged(date));
1300              filterDefinition5.Value.Should().Be(date.Date);
1301              await comp.InvokeAsync(() =&gt; internalFilter.TimeValueChanged(date.TimeOfDay));
1302              filterDefinition5.Value.Should().Be(date);
1303          }
1304          [Test]
1305          public async Task DataGridIDictionaryFiltersTest()
1306          {
1307              var comp = Context.RenderComponent&lt;DataGridIDictionaryFiltersTest&gt;();
1308              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;IDictionary&lt;string, object&gt;&gt;&gt;();
1309              var filterDefinition = new FilterDefinition&lt;IDictionary&lt;string, object&gt;&gt;
1310              {
1311                  Id = Guid.NewGuid(),
1312                  Operator = &quot;contains&quot;,
1313                  Value = &quot;John&quot;
1314              };
1315              var filterDefinition2 = new FilterDefinition&lt;IDictionary&lt;string, object&gt;&gt;
1316              {
1317                  Id = Guid.NewGuid(),
1318                  Operator = &quot;&gt;&quot;,
1319                  Value = 30
1320              };
1321              var filterDefinition3 = new FilterDefinition&lt;IDictionary&lt;string, object&gt;&gt;
1322              {
1323                  Id = Guid.NewGuid(),
1324                  Operator = &quot;is&quot;,
1325                  Value = Severity.Normal
1326              };
1327              await comp.InvokeAsync(() =&gt; dataGrid.Instance.FilterDefinitions.Add(filterDefinition));
1328              await comp.InvokeAsync(() =&gt; dataGrid.Instance.FilterDefinitions.Add(filterDefinition2));
1329              await comp.InvokeAsync(() =&gt; dataGrid.Instance.FilterDefinitions.Add(filterDefinition3));
1330              await comp.InvokeAsync(() =&gt; dataGrid.Instance.OpenFilters());
1331              var filters = dataGrid.Instance.FilterDefinitions;
1332              Assert.AreEqual(filterDefinition.Id, filters[0].Id);
1333              Assert.AreEqual(filterDefinition.Operator, filters[0].Operator);
1334              Assert.AreEqual(filterDefinition.Value, filters[0].Value);
1335              filters[0].Value = &quot;Not Joe&quot;;
1336              Assert.AreEqual(filterDefinition.Value, &quot;Not Joe&quot;);
1337              Assert.AreEqual(filterDefinition2.Id, filters[1].Id);
1338              Assert.AreEqual(filterDefinition2.Operator, filters[1].Operator);
1339              Assert.AreEqual(filterDefinition2.Value, filters[1].Value);
1340              filters[1].Value = 45;
1341              Assert.AreEqual(filterDefinition2.Value, 45);
1342              Assert.AreEqual(filterDefinition3.Id, filters[2].Id);
1343              Assert.AreEqual(filterDefinition3.Operator, filters[2].Operator);
1344              Assert.AreEqual(filterDefinition3.Value, filters[2].Value);
1345              filters[2].Value = Severity.Error;
1346              Assert.AreEqual(filterDefinition3.Value, Severity.Error);
1347          }
1348          [Test]
1349          public async Task DataGridColGroupTest()
1350          {
1351              var comp = Context.RenderComponent&lt;DataGridColGroupTest&gt;();
1352              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridColGroupTest.Model&gt;&gt;();
1353              dataGrid.FindAll(&quot;col&quot;).Count.Should().Be(3);
1354          }
1355          [Test]
1356          public async Task DataGridHeaderTemplateTest()
1357          {
1358              var comp = Context.RenderComponent&lt;DataGridHeaderTemplateTest&gt;();
1359              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridHeaderTemplateTest.Model&gt;&gt;();
1360              dataGrid.Find(&quot;thead th&quot;).TextContent.Trim().Should().Be(&quot;test&quot;);
1361              dataGrid.Find(&quot;span.column-header&quot;).FirstChild.NodeName.Should().Be(&quot;svg&quot;);
1362              dataGrid.Find(&quot;span.column-header span&quot;).TextContent.Should().Be(&quot;Name&quot;);
1363          }
1364          [Test]
1365          public async Task DataGridRowDetailOpenTest()
1366          {
1367              var comp = Context.RenderComponent&lt;DataGridHierarchyColumnTest&gt;();
1368              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridHierarchyColumnTest.Model&gt;&gt;();
1369              await comp.InvokeAsync(() =&gt; dataGrid.Instance
1370              .ToggleHierarchyVisibilityAsync(dataGrid.Instance.Items.First()));
1371              dataGrid.FindAll(&quot;td&quot;)[5].TextContent.Trim().Should().StartWith(&quot;uid = Sam|56|Normal|&quot;);
1372          }
1373          [Test]
1374          public async Task DataGridRowDetailClosedTest()
1375          {
1376              var comp = Context.RenderComponent&lt;DataGridHierarchyColumnTest&gt;();
1377              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridHierarchyColumnTest.Model&gt;&gt;();
1378              dataGrid.FindAll(&quot;td&quot;).SingleOrDefault(x =&gt; x.TextContent.Trim().StartsWith(&quot;uid = Sam|56|Normal|&quot;)).Should().BeNull();
1379          }
1380          [Test]
1381          public async Task DataGridRowDetailButtonDisabledTest()
1382          {
1383              var comp = Context.RenderComponent&lt;DataGridHierarchyColumnTest&gt;();
1384              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridHierarchyColumnTest.Model&gt;&gt;();
1385              dataGrid.FindAll(&quot;button&quot;)[10].OuterHtml.Contains(&quot;disabled&quot;)
1386                  .Should().BeTrue();
1387          }
1388          [Test]
1389          public async Task DataGridRowDetailButtonDisabledClickTest()
1390          {
1391              var comp = Context.RenderComponent&lt;DataGridHierarchyColumnTest&gt;();
1392              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridHierarchyColumnTest.Model&gt;&gt;();
1393              await comp.InvokeAsync(() =&gt;
1394              {
1395                  var buttons = dataGrid.FindAll(&quot;button.mud-button-root.mud-icon-button.mud-ripple.mud-ripple-icon&quot;);
1396                  buttons[10].Click();
1397                  dataGrid.FindAll(&quot;td&quot;)
1398                  .SingleOrDefault(x =&gt; x.TextContent.Trim().StartsWith(&quot;uid = Alicia|54|Info|&quot;)).Should().BeNull();
1399              });
1400          }
1401          [Test]
1402          public async Task DataGridChildRowContentTest()
1403          {
1404              var comp = Context.RenderComponent&lt;DataGridChildRowContentTest&gt;();
1405              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridChildRowContentTest.Model&gt;&gt;();
1406              dataGrid.FindAll(&quot;td&quot;).SingleOrDefault(x =&gt; x.TextContent.Trim().StartsWith(&quot;uid = Sam|56|Normal|&quot;)).Should().NotBeNull();
1407          }
1408          [Test]
1409          public async Task DataGridLoadingTest()
1410          {
1411              var comp = Context.RenderComponent&lt;DataGridLoadingTest&gt;();
1412              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridLoadingTest.Model&gt;&gt;();
1413              dataGrid.Find(&quot;th.mud-table-empty-row div&quot;).TextContent.Trim().Should().Be(&quot;Data loading, please wait...&quot;);
1414          }
1415          [Test]
1416          public async Task DataGridNoRecordsContentTest()
1417          {
1418              var comp = Context.RenderComponent&lt;DataGridNoRecordsContentTest&gt;();
1419              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridNoRecordsContentTest.Model&gt;&gt;();
1420              dataGrid.Find(&quot;th.mud-table-empty-row div&quot;).TextContent.Trim().Should().Be(&quot;There are no records to view.&quot;);
1421          }
1422          [Test]
1423          public async Task DataGridFooterTemplateTest()
1424          {
1425              var comp = Context.RenderComponent&lt;DataGridFooterTemplateTest&gt;();
1426              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridFooterTemplateTest.Model&gt;&gt;();
1427              dataGrid.FindAll(&quot;tfoot td&quot;).First().TextContent.Trim().Should().Be(&quot;Names: Sam, Alicia, Ira, John&quot;);
1428              dataGrid.FindAll(&quot;tfoot td&quot;).Last().TextContent.Trim().Should().Be($&quot;Highest: {132000:C0} | 2 Over {100000:C0}&quot;);
1429          }
1430          [Test]
1431          public async Task DataGridServerDataQuickFilterTest()
1432          {
1433              var comp = Context.RenderComponent&lt;DataGridServerDataQuickFilterTest&gt;();
1434              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridServerDataQuickFilterTest.Item&gt;&gt;();
1435              dataGrid.FindAll(&quot;tr&quot;).Count.Should().Be(3);
1436          }
1437          [Test]
1438          public async Task DataGridServerPaginationTest()
1439          {
1440              var comp = Context.RenderComponent&lt;DataGridServerPaginationTest&gt;();
1441              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridServerPaginationTest.Model&gt;&gt;();
1442              dataGrid.Find(&quot;.mud-table-body td&quot;).TextContent.Trim().Should().Be(&quot;Name 0&quot;);
1443              dataGrid.FindAll(&quot;.mud-table-pagination-actions button&quot;)[2].Click();
1444              dataGrid.Find(&quot;.mud-table-body td&quot;).TextContent.Trim().Should().Be(&quot;Name 10&quot;);
1445              await comp.InvokeAsync(async () =&gt; await dataGrid.Instance.ReloadServerData());
1446          }
1447          [Test]
1448          public async Task DataGridCellTemplateTest()
1449          {
1450              var comp = Context.RenderComponent&lt;DataGridCellTemplateTest&gt;();
1451              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridCellTemplateTest.Model&gt;&gt;();
1452              dataGrid.FindAll(&quot;td&quot;)[0].TextContent.Trim().Should().Be(&quot;John&quot;);
1453              dataGrid.FindAll(&quot;td&quot;)[1].TextContent.Trim().Should().Be(&quot;45&quot;);
1454          }
1455          [Test]
1456          public async Task DataGridColumnChooserTest()
1457          {
1458              var comp = Context.RenderComponent&lt;DataGridColumnChooserTest&gt;();
1459              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridColumnChooserTest.Model&gt;&gt;();
1460              var popoverProvider = comp.FindComponent&lt;MudPopoverProvider&gt;();
1461              var popover = dataGrid.FindComponent&lt;MudPopover&gt;();
1462              dataGrid.FindAll(&quot;.mud-table-head th&quot;).Count.Should().Be(2);
1463              await comp.InvokeAsync(() =&gt;
1464              {
1465                  var columnHamburger = dataGrid.FindAll(&quot;button.mud-button-root.mud-icon-button.mud-ripple.mud-ripple-icon.mud-icon-button-size-small&quot;);
1466                  columnHamburger[2].Click();
1467                  var listItems = popoverProvider.FindComponents&lt;MudListItem&gt;();
1468                  listItems.Count.Should().Be(2);
1469                  var clickablePopover = listItems[1].Find(&quot;.mud-list-item&quot;);
1470                  clickablePopover.Click();
1471                  ((IMudStateHasChanged)dataGrid.Instance).StateHasChanged();
1472              });
1473              dataGrid.FindAll(&quot;.mud-table-head th&quot;).Count.Should().Be(1);
1474              await comp.InvokeAsync(() =&gt;
1475              {
1476                  var columnsButton = dataGrid.Find(&quot;button.mud-button-root.mud-icon-button.mud-ripple.mud-ripple-icon.mud-icon-button-size-small&quot;);
1477                  columnsButton.Click();
1478                  popover.Instance.Open.Should().BeTrue(&quot;Should be open once clicked&quot;);
1479                  var listItems = popoverProvider.FindComponents&lt;MudListItem&gt;();
1480                  listItems.Count.Should().Be(1);
1481                  var clickablePopover = listItems[0].Find(&quot;.mud-list-item&quot;);
1482                  clickablePopover.Click();
1483                  var switches = dataGrid.FindComponents&lt;MudSwitch&lt;bool&gt;&gt;();
1484                  switches.Count.Should().Be(2);
1485                  var buttons = dataGrid.FindComponents&lt;MudButton&gt;();
1486                  buttons[1].Find(&quot;button&quot;).Click();
1487                  dataGrid.FindAll(&quot;.mud-table-head th&quot;).Count.Should().Be(2);
1488                  ((IMudStateHasChanged)dataGrid.Instance).StateHasChanged();
1489              });
1490              dataGrid.FindAll(&quot;.mud-table-head th&quot;).Count.Should().Be(2);
1491              await comp.InvokeAsync(() =&gt; dataGrid.Instance.ShowColumnsPanel());
1492              dataGrid.FindAll(&quot;.mud-paper.columns-panel&quot;).Count.Should().Be(1);
1493              await comp.InvokeAsync(() =&gt; dataGrid.Instance.HideColumnsPanel());
1494              dataGrid.FindAll(&quot;.mud-paper.columns-panel&quot;).Count.Should().Be(0);
1495              await comp.InvokeAsync(() =&gt; dataGrid.Instance.HideAllColumnsAsync());
1496              dataGrid.FindAll(&quot;.mud-table-head th&quot;).Count.Should().Be(0);
1497              await comp.InvokeAsync(() =&gt; dataGrid.Instance.ShowAllColumnsAsync());
1498              dataGrid.FindAll(&quot;.mud-table-head th&quot;).Count.Should().Be(2);
1499          }
1500          [Test]
1501          public async Task DataGridColumnHiddenTest()
1502          {
1503              var comp = Context.RenderComponent&lt;DataGridColumnHiddenTest&gt;();
1504              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridColumnHiddenTest.Model&gt;&gt;();
1505              var popoverProvider = comp.FindComponent&lt;MudPopoverProvider&gt;();
1506              var popover = dataGrid.FindComponent&lt;MudPopover&gt;();
1507              popover.Instance.Open.Should().BeFalse(&quot;Should start as closed&quot;);
1508              var columnsButton = dataGrid.Find(&quot;button.mud-button-root.mud-icon-button.mud-ripple.mud-ripple-icon.mud-icon-button-size-small&quot;);
1509              columnsButton.Click();
1510              popover.Instance.Open.Should().BeTrue(&quot;Should be open once clicked&quot;);
1511              var listItems = popoverProvider.FindComponents&lt;MudListItem&gt;();
1512              listItems.Count.Should().Be(1);
1513              var clickablePopover = listItems[0].Find(&quot;.mud-list-item&quot;);
1514              clickablePopover.Click();
1515              var switches = dataGrid.FindComponents&lt;MudSwitch&lt;bool&gt;&gt;();
1516              switches.Count.Should().Be(2);
1517              switches[0].Instance.Checked.Should().BeFalse();
1518              switches[1].Instance.Checked.Should().BeTrue();
1519              var buttons = dataGrid.FindComponents&lt;MudButton&gt;();
1520              buttons[0].Find(&quot;button&quot;).Click();
1521              switches[0].Instance.Checked.Should().BeTrue();
1522              switches[1].Instance.Checked.Should().BeTrue();
1523              dataGrid.FindAll(&quot;.mud-table-head th&quot;).Count.Should().Be(0);
1524              buttons[1].Find(&quot;button&quot;).Click();
1525              switches[0].Instance.Checked.Should().BeFalse();
1526              switches[1].Instance.Checked.Should().BeFalse();
1527              dataGrid.FindAll(&quot;.mud-table-head th&quot;).Count.Should().Be(2);
1528          }
1529          [Test]
1530          public async Task DataGridShowMenuIconTest()
1531          {
1532              var comp = Context.RenderComponent&lt;DataGridShowMenuIconTest&gt;();
1533              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridShowMenuIconTest.Item&gt;&gt;();
1534              dataGrid.FindAll(&quot;.mud-table-toolbar .mud-menu&quot;).Should().BeEmpty();
1535              var parameters = new List&lt;ComponentParameter&gt;();
1536              parameters.Add(ComponentParameter.CreateParameter(nameof(dataGrid.Instance.ShowMenuIcon), true));
1537              dataGrid.SetParametersAndRender(parameters.ToArray());
1538              dataGrid.FindAll(&quot;.mud-table-toolbar .mud-menu&quot;).Should().NotBeEmpty();
1539          }
1540          [Test]
1541          public async Task DataGridColumnPopupFilteringTest()
1542          {
1543              var comp = Context.RenderComponent&lt;DataGridColumnPopupFilteringTest&gt;();
1544              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridColumnPopupFilteringTest.Model&gt;&gt;();
1545              dataGrid.FindAll(&quot;tbody tr&quot;).Count.Should().Be(4);
1546              comp.Find(&quot;.filter-button&quot;).Click();
1547              var input = comp.FindComponent&lt;MudTextField&lt;string&gt;&gt;();
1548              var parameters = new List&lt;ComponentParameter&gt;();
1549              parameters.Add(ComponentParameter.CreateParameter(nameof(input.Instance.Value), &quot;test&quot;));
1550              input.SetParametersAndRender(parameters.ToArray());
1551              comp.Find(&quot;.apply-filter-button&quot;).Click();
1552              await comp.InvokeAsync(() =&gt;
1553              {
1554                  return dataGrid.Instance.AddFilterAsync(new FilterDefinition&lt;DataGridColumnPopupFilteringTest.Model&gt;
1555                  {
1556                      Column = dataGrid.Instance.RenderedColumns.First(),
1557                      Operator = FilterOperator.String.Contains,
1558                      Value = &quot;test&quot;
1559                  });
1560              });
1561              dataGrid.Render();
1562              dataGrid.FindAll(&quot;tbody tr&quot;).Count.Should().Be(0);
1563          }
1564          [Test]
1565          public async Task DataGridFilterableFalseTest()
1566          {
1567              var comp = Context.RenderComponent&lt;DataGridFilterableFalseTest&gt;();
1568              comp.Find(&quot;.filter-button&quot;).Click();
1569              comp.FindAll(&quot;.filters-panel&quot;).Count.Should().Be(1);
1570              comp.FindAll(&quot;div.mud-input-control&quot;)[0].Click();
1571              comp.FindAll(&quot;div.mud-list-item&quot;).Count.Should().Be(3);
1572          }
1573          [Test]
1574          public async Task DataGridColumnPopupCustomFilteringTest()
1575          {
1576              var comp = Context.RenderComponent&lt;DataGridColumnPopupCustomFilteringTest&gt;();
1577              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridColumnPopupCustomFilteringTest.Model&gt;&gt;();
1578              dataGrid.FindAll(&quot;tbody tr&quot;).Count.Should().Be(4);
1579              comp.Instance.FilterHired = true;
1580              await comp.InvokeAsync(async () =&gt;
1581              {
1582                  var filterContext = dataGrid.Instance.RenderedColumns[3].FilterContext;
1583                  await comp.Instance.ApplyFilterAsync(filterContext);
1584              });
1585              dataGrid.FindAll(&quot;tbody tr&quot;).Count.Should().Be(1);
1586          }
1587          [Test]
1588          public async Task DataGridCustomFilteringTest()
1589          {
1590              var comp = Context.RenderComponent&lt;DataGridCustomFilteringTest&gt;();
1591              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridCustomFilteringTest.Model&gt;&gt;();
1592              dataGrid.FindAll(&quot;tbody tr&quot;).Count.Should().Be(4);
1593              await comp.InvokeAsync(() =&gt;
1594              {
1595                  comp.Instance.FilterHiredToggled(true, dataGrid.Instance);
1596              });
1597              dataGrid.Render();
1598              dataGrid.FindAll(&quot;tbody tr&quot;).Count.Should().Be(1);
1599          }
1600          [Test]
1601          public async Task DataGridShowFilterIconTest()
1602          {
1603              var comp = Context.RenderComponent&lt;DataGridCustomFilteringTest&gt;();
1604              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridCustomFilteringTest.Model&gt;&gt;();
1605              var parameters = new List&lt;ComponentParameter&gt;();
1606              parameters.Add(ComponentParameter.CreateParameter(nameof(dataGrid.Instance.Filterable), false));
1607              dataGrid.SetParametersAndRender(parameters.ToArray());
1608              dataGrid.Instance.DropContainerHasChanged();
1609              dataGrid.FindAll(&quot;.filter-button&quot;).Should().BeEmpty();
1610              parameters.Clear();
1611              parameters.Add(ComponentParameter.CreateParameter(nameof(dataGrid.Instance.Filterable), true));
1612              dataGrid.SetParametersAndRender(parameters.ToArray());
1613              dataGrid.Instance.DropContainerHasChanged();
1614              dataGrid.FindAll(&quot;.filter-button&quot;).Should().NotBeEmpty();
1615              parameters.Clear();
1616              parameters.Add(ComponentParameter.CreateParameter(nameof(dataGrid.Instance.ShowFilterIcons), false));
1617              dataGrid.SetParametersAndRender(parameters.ToArray());
1618              dataGrid.Instance.DropContainerHasChanged();
1619              dataGrid.FindAll(&quot;.filter-button&quot;).Should().BeEmpty();
1620          }
1621          [Test]
1622          public async Task DataGridServerDataColumnFilterMenuTest()
1623          {
1624              var comp = Context.RenderComponent&lt;DataGridServerDataColumnFilterMenuTest&gt;();
1625              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridServerDataColumnFilterMenuTest.Model&gt;&gt;();
1626              var callCountText = comp.FindComponent&lt;MudText&gt;();
1627              dataGrid.FindAll(&quot;.mud-table-body .mud-table-row&quot;).Count.Should().Be(4);
1628              callCountText.Markup.Should().Contain(&quot;Server call count: 1&quot;);
1629              comp.Find(&quot;.filter-button&quot;).Click();
1630              var input = comp.FindComponent&lt;MudTextField&lt;string&gt;&gt;();
1631              await comp.InvokeAsync(async () =&gt; await input.Instance.ValueChanged.InvokeAsync(&quot;Sam&quot;));
1632              comp.Find(&quot;.apply-filter-button&quot;).Click();
1633              callCountText.Markup.Should().Contain(&quot;Server call count: 2&quot;);
1634              dataGrid.FindAll(&quot;.mud-table-body .mud-table-row&quot;).Count.Should().Be(1);
1635              comp.Find(&quot;.filter-button&quot;).Click();
1636              comp.Find(&quot;.clear-filter-button&quot;).Click();
1637              callCountText.Markup.Should().Contain(&quot;Server call count: 3&quot;);
1638              dataGrid.FindAll(&quot;.mud-table-body .mud-table-row&quot;).Count.Should().Be(4);
1639          }
1640          [Test]
1641          public async Task DataGridServerDataColumnFilterRowTest()
1642          {
1643              var comp = Context.RenderComponent&lt;DataGridServerDataColumnFilterRowTest&gt;();
1644              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridServerDataColumnFilterRowTest.Model&gt;&gt;();
1645              var callCountText = comp.FindComponent&lt;MudText&gt;();
1646              dataGrid.FindAll(&quot;.mud-table-body .mud-table-row&quot;).Count.Should().Be(4);
1647              callCountText.Markup.Should().Contain(&quot;Server call count: 1&quot;);
1648              var input = comp.FindComponent&lt;MudTextField&lt;string&gt;&gt;();
1649              await comp.InvokeAsync(async () =&gt; await input.Instance.ValueChanged.InvokeAsync(&quot;Sam&quot;));
1650              callCountText.Markup.Should().Contain(&quot;Server call count: 2&quot;);
1651              dataGrid.FindAll(&quot;.mud-table-body .mud-table-row&quot;).Count.Should().Be(1);
1652              comp.Find(&quot;th &gt; div &gt; button.mud-button-root&quot;).Click(); 
1653              callCountText.Markup.Should().Contain(&quot;Server call count: 3&quot;);
1654              dataGrid.Render();
1655              dataGrid.FindAll(&quot;.mud-table-body .mud-table-row&quot;).Count.Should().Be(4);
1656          }
1657          [Test]
1658          public async Task DataGridStickyColumnsTest()
1659          {
1660              var comp = Context.RenderComponent&lt;DataGridStickyColumnsTest&gt;();
1661              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridStickyColumnsTest.Model&gt;&gt;();
1662              dataGrid.Find(&quot;th&quot;).ClassList.Should().Contain(&quot;sticky-left&quot;);
1663              dataGrid.FindAll(&quot;th&quot;).Last().ClassList.Should().Contain(&quot;sticky-right&quot;);
1664          }
1665          [Test]
1666          public async Task DataGridStickyColumnsResizerTest()
1667          {
1668              var comp = Context.RenderComponent&lt;DataGridStickyColumnsResizerTest&gt;();
1669              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridStickyColumnsResizerTest.Model&gt;&gt;();
1670              var header = dataGrid.Find(&quot;.mud-table-toolbar&quot;);
1671              header.GetAttribute(&quot;style&quot;).Should().Contain(&quot;position:sticky&quot;);
1672              header.GetAttribute(&quot;style&quot;).Should().Contain(&quot;left:0px&quot;);
1673              var footer = dataGrid.Find(&quot;.mud-table-pagination&quot;);
1674              footer.GetAttribute(&quot;style&quot;).Should().Contain(&quot;position:sticky&quot;);
1675              footer.GetAttribute(&quot;style&quot;).Should().Contain(&quot;left:0px&quot;);
1676              var body = dataGrid.Find(&quot;.mud-table-container&quot;);
1677              body.GetAttribute(&quot;style&quot;).Should().Contain(&quot;width:max-content&quot;);
1678              body.GetAttribute(&quot;style&quot;).Should().Contain(&quot;overflow:clip&quot;);
1679              dataGrid.Find(&quot;th&quot;).ClassList.Should().Contain(&quot;sticky-left&quot;);
1680              dataGrid.FindAll(&quot;th&quot;).Last().ClassList.Should().Contain(&quot;sticky-right&quot;);
1681          }
1682          [Test]
1683          public async Task DataGridCellContextTest()
1684          {
1685              var comp = Context.RenderComponent&lt;DataGridCellContextTest&gt;();
1686              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridCellContextTest.Model&gt;&gt;();
1687              var item = dataGrid.Instance.Items.FirstOrDefault();
1688              var column = dataGrid.Instance.RenderedColumns.First();
1689              var cell = new Cell&lt;DataGridCellContextTest.Model&gt;(dataGrid.Instance, column, item);
1690              cell._cellContext.IsSelected.Should().Be(false);
1691              await cell._cellContext.Actions.SetSelectedItemAsync(true);
1692              cell._cellContext.IsSelected.Should().Be(true);
1693              await cell._cellContext.Actions.ToggleHierarchyVisibilityForItemAsync();
1694              cell._cellContext.OpenHierarchies.Should().Contain(item);
1695              await cell._cellContext.Actions.ToggleHierarchyVisibilityForItemAsync();
1696              cell._cellContext.OpenHierarchies.Should().NotContain(item);
1697          }
1698          [Test]
1699          public async Task DataGridAggregationTest()
1700          {
1701              var comp = Context.RenderComponent&lt;DataGridAggregationTest&gt;();
1702              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridAggregationTest.Model&gt;&gt;();
1703              dataGrid.FindAll(&quot;td.footer-cell&quot;)[1].TrimmedText().Should().Be(&quot;Average age is 56&quot;);
1704              dataGrid.FindAll(&quot;tfoot td.footer-cell&quot;)[1].TrimmedText().Should().Be(&quot;Average age is 43&quot;);
1705          }
1706          [Test]
1707          public async Task DataGridSequenceContainsNoElementsTest()
1708          {
1709              var comp = Context.RenderComponent&lt;DataGridSequenceContainsNoElementsTest&gt;();
1710              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridSequenceContainsNoElementsTest.Model&gt;&gt;();
1711          }
1712          [Test]
1713          public async Task DataGridObservabilityTest()
1714          {
1715              var comp = Context.RenderComponent&lt;DataGridObservabilityTest&gt;();
1716              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridObservabilityTest.Model&gt;&gt;();
1717              var addButton = comp.Find(&quot;.add-item-btn&quot;);
1718              var removeButton = comp.Find(&quot;.remove-item-btn&quot;);
1719              dataGrid.FindAll(&quot;.mud-table-body .mud-table-row&quot;).Count.Should().Be(8);
1720              addButton.Click();
1721              dataGrid.FindAll(&quot;.mud-table-body .mud-table-row&quot;).Count.Should().Be(9);
1722              removeButton.Click();
1723              dataGrid.FindAll(&quot;.mud-table-body .mud-table-row&quot;).Count.Should().Be(8);
1724          }
1725          public async Task TableFilterGuid()
1726          {
1727              var comp = Context.RenderComponent&lt;DataGridFilterGuid&lt;Guid&gt;&gt;();
1728              var grid = comp.Instance.MudGridRef;
1729              grid.Items.Count().Should().Be(2);
1730              grid.FilteredItems.Count().Should().Be(2);
1731              var guidColumn = grid.RenderedColumns.FirstOrDefault(x =&gt; x.PropertyName == &quot;Id&quot;);
1732              grid.FilterDefinitions.Add(new FilterDefinition&lt;DataGridFilterGuid&lt;Guid&gt;.WeatherForecast&gt;()
1733              {
1734                  Column = guidColumn,
1735                  Operator = &quot;equals&quot;,
1736                  Value = &quot;invalid guid&quot;,
1737              });
1738              grid.FilteredItems.Count().Should().Be(0);
1739              grid.FilterDefinitions.Clear();
1740              grid.FilterDefinitions.Add(new FilterDefinition&lt;DataGridFilterGuid&lt;Guid&gt;.WeatherForecast&gt;()
1741              {
1742                  Column = guidColumn,
1743                  Operator = &quot;equals&quot;,
1744                  Value = comp.Instance.Guid1,
1745              });
1746              grid.FilteredItems.Count().Should().Be(1);
1747              grid.FilteredItems.FirstOrDefault()?.Id.Should().Be(comp.Instance.Guid1);
1748              grid.FilterDefinitions.Clear();
1749              grid.FilterDefinitions.Add(new FilterDefinition&lt;DataGridFilterGuid&lt;Guid&gt;.WeatherForecast&gt;()
1750              {
1751                  Column = guidColumn,
1752                  Operator = &quot;not equals&quot;,
1753                  Value = comp.Instance.Guid1,
1754              });
1755              grid.FilteredItems.Count().Should().Be(1);
1756              grid.FilteredItems.FirstOrDefault()?.Id.Should().Be(comp.Instance.Guid2);
1757          }
1758          [Test]
1759          public async Task TableFilterNullableGuid()
1760          {
1761              var comp = Context.RenderComponent&lt;DataGridFilterGuid&lt;Nullable&lt;Guid&gt;&gt;&gt;();
1762              var grid = comp.Instance.MudGridRef;
1763              grid.Items.Count().Should().Be(2);
1764              grid.FilteredItems.Count().Should().Be(2);
1765              var guidColumn = grid.RenderedColumns.FirstOrDefault(x =&gt; x.PropertyName == &quot;Id&quot;);
1766              grid.FilterDefinitions.Add(new FilterDefinition&lt;DataGridFilterGuid&lt;Nullable&lt;Guid&gt;&gt;.WeatherForecast&gt;()
1767              {
1768                  Column = guidColumn,
1769                  Operator = &quot;equals&quot;,
1770                  Value = Guid.Empty
1771              });
1772              comp.Render();
1773              grid.FilteredItems.Count().Should().Be(0);
1774              grid.FilterDefinitions.Clear();
1775              grid.FilterDefinitions.Add(new FilterDefinition&lt;DataGridFilterGuid&lt;Nullable&lt;Guid&gt;&gt;.WeatherForecast&gt;()
1776              {
1777                  Column = guidColumn,
1778                  Operator = &quot;equals&quot;,
1779                  Value = comp.Instance.Guid1,
1780              });
1781              comp.Render();
1782              grid.FilteredItems.Count().Should().Be(1);
1783              grid.FilteredItems.FirstOrDefault()?.Id.Should().Be(comp.Instance.Guid1);
1784              grid.FilterDefinitions.Clear();
1785              grid.FilterDefinitions.Add(new FilterDefinition&lt;DataGridFilterGuid&lt;Nullable&lt;Guid&gt;&gt;.WeatherForecast&gt;()
1786              {
1787                  Column = guidColumn,
1788                  Operator = &quot;not equals&quot;,
1789                  Value = comp.Instance.Guid1,
1790              });
1791              comp.Render();
1792              grid.FilteredItems.Count().Should().Be(1);
1793              grid.FilteredItems.FirstOrDefault()?.Id.Should().Be(comp.Instance.Guid2);
1794          }
1795          [Test]
1796          public void DataGridCultureColumnSimpleTest()
1797          {
1798              var comp = Context.RenderComponent&lt;DataGridCultureSimpleTest&gt;();
1799              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridCultureSimpleTest.Model&gt;&gt;();
1800              dataGrid.FindAll(&quot;td&quot;)[2].TextContent.Trim().Should().Be(&quot;3.5&quot;);
1801              dataGrid.FindAll(&quot;td&quot;)[3].TextContent.Trim().Should().Be(&quot;5,2&quot;);
1802          }
1803          [Test]
1804          public void DataGridCultureColumnEditableTest()
1805          {
1806              var comp = Context.RenderComponent&lt;DataGridCultureEditableTest&gt;();
1807              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridCultureEditableTest.Model&gt;&gt;();
1808              dataGrid.FindAll(&quot;td input&quot;)[2].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;3.5&quot;);
1809              dataGrid.FindAll(&quot;td input&quot;)[3].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;5,2&quot;);
1810          }
1811          [Test]
1812          public async Task DataGridCultureColumnFilterTest()
1813          {
1814              var comp = Context.RenderComponent&lt;DataGridCultureSimpleTest&gt;();
1815              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridCultureSimpleTest.Model&gt;&gt;();
1816              var amountHeader = dataGrid.FindAll(&quot;th .mud-menu button&quot;)[2];
1817              amountHeader.Click();
1818              var filterAmount = comp.FindAll(&quot;.mud-list-item-clickable&quot;)[1];
1819              filterAmount.Click();
1820              var filterField = comp.Find(&quot;.filters-panel .filter-field .mud-select-input&quot;);
1821              filterField.TextContent.Trim().Should().Be(&quot;Amount&quot;);
1822              var filterInput = comp.FindAll(&quot;.filters-panel input&quot;)[2];
1823              filterInput.Input(new ChangeEventArgs() { Value = &quot;2,2&quot; });
1824              dataGrid.Instance.FilterDefinitions.Count.Should().Be(1);
1825              dataGrid.Instance.FilterDefinitions[0].Value.Should().Be(22.0);
1826              dataGrid.Instance.FilterDefinitions.Clear();
1827              dataGrid.Render();
1828              var totalHeader = dataGrid.FindAll(&quot;th .mud-menu button&quot;)[3];
1829              totalHeader.Click();
1830              var filterTotal = comp.FindAll(&quot;.mud-list-item-clickable&quot;)[1];
1831              filterTotal.Click();
1832              var filterTotalField = comp.Find(&quot;.filters-panel .filter-field .mud-select-input&quot;);
1833              filterTotalField.TextContent.Trim().Should().Be(&quot;Total&quot;);
1834              var filterTotalInput = comp.FindAll(&quot;.filters-panel input&quot;)[2];
1835              filterTotalInput.Input(new ChangeEventArgs() { Value = &quot;2,2&quot; });
1836              dataGrid.Instance.FilterDefinitions.Count.Should().Be(1);
1837              dataGrid.Instance.FilterDefinitions[0].Value.Should().Be(2.2);
1838          }
1839          [Test]
1840          public async Task DataGridCultureColumnFilterHeaderTest()
1841          {
1842              var comp = Context.RenderComponent&lt;DataGridCultureEditableTest&gt;();
1843              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridCultureEditableTest.Model&gt;&gt;();
1844              var filterAmount = dataGrid.FindAll(&quot;th.filter-header-cell input&quot;)[2];
1845              filterAmount.Input(new ChangeEventArgs() { Value = &quot;2,2&quot; });
1846              dataGrid.Instance.FilterDefinitions.Count.Should().Be(1);
1847              dataGrid.Instance.FilterDefinitions[0].Value.Should().Be(22.0);
1848              dataGrid.Instance.FilterDefinitions.Clear();
1849              dataGrid.Render();
1850              var filterTotal = dataGrid.FindAll(&quot;th.filter-header-cell input&quot;)[3];
1851              filterTotal.Input(new ChangeEventArgs() { Value = &quot;2,2&quot; });
1852              dataGrid.Instance.FilterDefinitions.Count.Should().Be(1);
1853              dataGrid.Instance.FilterDefinitions[0].Value.Should().Be(2.2);
1854          }
1855          [Test]
1856          public async Task DataGridCultureColumnOverridesTest()
1857          {
1858              var comp = Context.RenderComponent&lt;DataGridCulturesTest&gt;();
1859              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridCulturesTest.Model&gt;&gt;();
1860              dataGrid.FindAll(&quot;td input&quot;)[2].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;3.5&quot;);
1861              dataGrid.FindAll(&quot;td input&quot;)[3].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;5,2&quot;);
1862              dataGrid.FindAll(&quot;td input&quot;)[4].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;2#1&quot;);
1863          }
1864          [Test]
1865          public async Task DataGridSortIndicatorTest()
1866          {
1867              var comp = Context.RenderComponent&lt;DataGridSortableTest&gt;();
1868              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridSortableTest.Item&gt;&gt;();
1869              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SetSortAsync(&quot;Value&quot;, SortDirection.Ascending, x =&gt; x.Value));
1870              dataGrid.Instance.DropContainerHasChanged();
1871              dataGrid.FindAll(&quot;th .sortable-column-header&quot;)[1].TextContent.Trim().Should().Be(&quot;Value&quot;);
1872              dataGrid.FindAll(&quot;th .sort-direction-icon&quot;)[0].ClassList.Contains(&quot;mud-direction-asc&quot;).Should().Be(false);
1873              dataGrid.FindAll(&quot;th .sort-direction-icon&quot;)[1].ClassList.Contains(&quot;mud-direction-asc&quot;).Should().Be(true);
1874              dataGrid.Instance.GetColumnSortDirection(&quot;Name&quot;).Should().Be(SortDirection.None);
1875              dataGrid.Instance.GetColumnSortDirection(&quot;Value&quot;).Should().Be(SortDirection.Ascending);
1876              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SetSortAsync(&quot;Value&quot;, SortDirection.Descending, x =&gt; x.Value));
1877              dataGrid.Instance.DropContainerHasChanged();
1878              dataGrid.Instance.GetColumnSortDirection(&quot;Name&quot;).Should().Be(SortDirection.None);
1879              dataGrid.Instance.GetColumnSortDirection(&quot;Value&quot;).Should().Be(SortDirection.Descending);
1880              dataGrid.FindAll(&quot;th .sort-direction-icon&quot;)[0].ClassList.Contains(&quot;mud-direction-asc&quot;).Should().Be(false);
1881              dataGrid.FindAll(&quot;th .sort-direction-icon&quot;)[1].ClassList.Contains(&quot;mud-direction-desc&quot;).Should().Be(true);
1882              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SetSortAsync(&quot;Name&quot;, SortDirection.Ascending, x =&gt; x.Value));
1883              dataGrid.Instance.DropContainerHasChanged();
1884              dataGrid.Instance.GetColumnSortDirection(&quot;Name&quot;).Should().Be(SortDirection.Ascending);
1885              dataGrid.Instance.GetColumnSortDirection(&quot;Value&quot;).Should().Be(SortDirection.None);
1886              dataGrid.FindAll(&quot;th .sort-direction-icon&quot;)[0].ClassList.Contains(&quot;mud-direction-asc&quot;).Should().Be(true);
1887              dataGrid.FindAll(&quot;th .sort-direction-icon&quot;)[1].ClassList.Contains(&quot;mud-direction-asc&quot;).Should().Be(false);
1888          }
1889          [Test]
1890          public async Task DataGridCustomSortTest()
1891          {
1892              var comp = Context.RenderComponent&lt;DataGridCustomSortableTest&gt;();
1893              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridCustomSortableTest.Item&gt;&gt;();
1894              dataGrid.Instance.SortMode = SortMode.Single;
1895              dataGrid.Instance.SortMode.Should().Be(SortMode.Single);
1896              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SetSortAsync(&quot;Value&quot;, SortDirection.Ascending, x =&gt; x.Value, new MudBlazor.Utilities.NaturalComparer()));
1897              dataGrid.Instance.DropContainerHasChanged();
1898              dataGrid.FindAll(&quot;th .sortable-column-header&quot;)[1].TextContent.Trim().Should().Be(&quot;Value&quot;);
1899              dataGrid.FindAll(&quot;th .sort-direction-icon&quot;)[0].ClassList.Contains(&quot;mud-direction-asc&quot;).Should().Be(false);
1900              dataGrid.FindAll(&quot;th .sort-direction-icon&quot;)[1].ClassList.Contains(&quot;mud-direction-asc&quot;).Should().Be(true);
1901              dataGrid.Instance.GetColumnSortDirection(&quot;Name&quot;).Should().Be(SortDirection.None);
1902              dataGrid.Instance.GetColumnSortDirection(&quot;Value&quot;).Should().Be(SortDirection.Ascending);
1903              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SetSortAsync(&quot;Value&quot;, SortDirection.Descending, x =&gt; x.Value, new MudBlazor.Utilities.NaturalComparer()));
1904              dataGrid.Instance.DropContainerHasChanged();
1905              dataGrid.Instance.GetColumnSortDirection(&quot;Name&quot;).Should().Be(SortDirection.None);
1906              dataGrid.Instance.GetColumnSortDirection(&quot;Value&quot;).Should().Be(SortDirection.Descending);
1907              dataGrid.FindAll(&quot;th .sort-direction-icon&quot;)[0].ClassList.Contains(&quot;mud-direction-asc&quot;).Should().Be(false);
1908              dataGrid.FindAll(&quot;th .sort-direction-icon&quot;)[1].ClassList.Contains(&quot;mud-direction-desc&quot;).Should().Be(true);
1909              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SetSortAsync(&quot;Value&quot;, SortDirection.Ascending, x =&gt; x.Value));
1910              dataGrid.Instance.DropContainerHasChanged();
1911              dataGrid.FindAll(&quot;th .sortable-column-header&quot;)[1].TextContent.Trim().Should().Be(&quot;Value&quot;);
1912              dataGrid.FindAll(&quot;th .sort-direction-icon&quot;)[0].ClassList.Contains(&quot;mud-direction-asc&quot;).Should().Be(false);
1913              dataGrid.FindAll(&quot;th .sort-direction-icon&quot;)[1].ClassList.Contains(&quot;mud-direction-asc&quot;).Should().Be(true);
1914              dataGrid.Instance.GetColumnSortDirection(&quot;Name&quot;).Should().Be(SortDirection.None);
1915              dataGrid.Instance.GetColumnSortDirection(&quot;Value&quot;).Should().Be(SortDirection.Ascending);
1916              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SetSortAsync(&quot;Name&quot;, SortDirection.Ascending, x =&gt; x.Name, new MudBlazor.Utilities.NaturalComparer()));
1917              dataGrid.Instance.DropContainerHasChanged();
1918              dataGrid.Instance.GetColumnSortDirection(&quot;Name&quot;).Should().Be(SortDirection.Ascending);
1919              dataGrid.Instance.GetColumnSortDirection(&quot;Value&quot;).Should().Be(SortDirection.None);
1920              dataGrid.FindAll(&quot;th .sort-direction-icon&quot;)[0].ClassList.Contains(&quot;mud-direction-asc&quot;).Should().Be(true);
1921              dataGrid.FindAll(&quot;th .sort-direction-icon&quot;)[1].ClassList.Contains(&quot;mud-direction-asc&quot;).Should().Be(false);
1922              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SetSortAsync(&quot;Name&quot;, SortDirection.Descending, x =&gt; x.Name, new MudBlazor.Utilities.NaturalComparer()));
1923              dataGrid.Instance.DropContainerHasChanged();
1924              dataGrid.Instance.GetColumnSortDirection(&quot;Name&quot;).Should().Be(SortDirection.Descending);
1925              dataGrid.Instance.GetColumnSortDirection(&quot;Value&quot;).Should().Be(SortDirection.None);
1926              dataGrid.FindAll(&quot;th .sort-direction-icon&quot;)[0].ClassList.Contains(&quot;mud-direction-desc&quot;).Should().Be(true);
1927              dataGrid.FindAll(&quot;th .sort-direction-icon&quot;)[1].ClassList.Contains(&quot;mud-direction-asc&quot;).Should().Be(false);
1928              dataGrid.Instance.SortMode = SortMode.Multiple;
1929              dataGrid.Instance.SortMode.Should().Be(SortMode.Multiple);
1930              var column = dataGrid.FindComponent&lt;Column&lt;DataGridCustomSortableTest.Item&gt;&gt;();
1931              await comp.InvokeAsync(() =&gt; column.Instance.Comparer = new MudBlazor.Utilities.NaturalComparer());
1932              await comp.InvokeAsync(() =&gt; dataGrid.Instance.RemoveSortAsync(&quot;Name&quot;));
1933              dataGrid.Instance.GetColumnSortDirection(&quot;Name&quot;).Should().Be(SortDirection.None);
1934              dataGrid.Find(&quot;.column-options button&quot;).Click();
1935              var cells = dataGrid.FindAll(&quot;td&quot;);
1936              cells[0].TextContent.Should().Be(&quot;0&quot;);
1937              cells[3].TextContent.Should().Be(&quot;1&quot;);
1938              cells[6].TextContent.Should().Be(&quot;1_2&quot;);
1939              cells[9].TextContent.Should().Be(&quot;1_10&quot;);
1940              cells[12].TextContent.Should().Be(&quot;1_11&quot;);
1941              cells[15].TextContent.Should().Be(&quot;2&quot;);
1942              cells[18].TextContent.Should().Be(&quot;10&quot;);
1943              var headerCell = dataGrid.FindComponents&lt;HeaderCell&lt;DataGridCustomSortableTest.Item&gt;&gt;()[1];
1944              await comp.InvokeAsync(() =&gt; headerCell.Instance.SortChangedAsync(new MouseEventArgs() { CtrlKey = true, Button = 0 }));
1945              headerCell.Instance.SortDirection.Should().Be(SortDirection.Ascending);
1946              await comp.InvokeAsync(() =&gt; headerCell.Instance.SortChangedAsync(new MouseEventArgs() { CtrlKey = true, Button = 0 }));
1947              headerCell.Instance.SortDirection.Should().Be(SortDirection.Descending);
1948              headerCell = dataGrid.FindComponents&lt;HeaderCell&lt;DataGridCustomSortableTest.Item&gt;&gt;()[0];
1949              await comp.InvokeAsync(() =&gt; headerCell.Instance.SortChangedAsync(new MouseEventArgs() { AltKey = true, Button = 0 }));
1950              headerCell.Instance.SortDirection.Should().Be(SortDirection.None);
1951          }
1952          [Test]
1953          public async Task DataGridGroupExpandedTest()
1954          {
1955              var comp = Context.RenderComponent&lt;DataGridGroupExpandedTest&gt;();
1956              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridGroupExpandedTest.Fruit&gt;&gt;();
1957              comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(7);
1958              comp.Instance.CollapseAllGroups();
1959              dataGrid.Render();
1960              comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(2);
1961              await comp.InvokeAsync(() =&gt;
1962                  comp.Instance.AddFruit());
1963              dataGrid.Render();
1964              comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(3);
1965          }
1966          [Test]
1967          public async Task DataGridGroupExpandedAsyncTest()
1968          {
1969              var comp = Context.RenderComponent&lt;DataGridGroupExpandedAsyncTest&gt;();
1970              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridGroupExpandedAsyncTest.Fruit&gt;&gt;();
1971              comp.WaitForAssertion(() =&gt; comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(7));
1972              comp.Instance.CollapseAllGroups();
1973              dataGrid.Render();
1974              comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(2);
1975              await comp.InvokeAsync(() =&gt;
1976                  comp.Instance.AddFruit());
1977              dataGrid.Render();
1978              comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(3);
1979          }
1980          [Test]
1981          public async Task DataGridGroupExpandedServerDataTest()
1982          {
1983              var comp = Context.RenderComponent&lt;DataGridGroupExpandedServerDataTest&gt;();
1984              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridGroupExpandedServerDataTest.Fruit&gt;&gt;();
1985              comp.WaitForAssertion(() =&gt; comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(7));
1986              comp.Instance.CollapseAllGroups();
1987              dataGrid.Render();
1988              comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(2);
1989              await comp.InvokeAsync(() =&gt;
1990                  comp.Instance.AddFruit());
1991              dataGrid.Render();
1992              comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(3);
1993          }
1994          [Test]
1995          public async Task DataGridGroupCollapseAllTest()
1996          {
1997              var comp = Context.RenderComponent&lt;DataGridGroupCollapseAllTest&gt;();
1998              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridGroupCollapseAllTest.TestObject&gt;&gt;();
1999              comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(3);
2000              comp.Instance.ExpandAllGroups();
2001              comp.Render();
2002              comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(15);
2003              comp.Instance.CollapseAllGroups();
2004              comp.Render();
2005              comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(3);
2006              comp.Instance.RefreshList();
2007              comp.Render();
2008              comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(3);
2009          }
2010          [Test]
2011          public async Task DataGridGroupExpandAllCollapseAllTest()
2012          {
2013              var comp = Context.RenderComponent&lt;DataGridGroupExpandAllCollapseAllTest&gt;();
2014              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridGroupExpandAllCollapseAllTest.Element&gt;&gt;();
2015              comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(2);
2016              comp.Instance.ExpandAllGroups();
2017              comp.Render();
2018              comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(14);
2019              comp.Instance.NavigateToPage(1);
2020              comp.Render();
2021              comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(18);
2022              comp.Instance.CollapseAllGroups();
2023              comp.Instance.NavigateToPage(0);
2024              comp.Render();
2025              comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(2);
2026              comp.Instance.RefreshList();
2027              comp.Render();
2028              comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(2);
2029          }
2030          [Test]
2031          public async Task DataGridPropertyColumnFormatTest()
2032          {
2033              var comp = Context.RenderComponent&lt;DataGridFormatTest&gt;();
2034              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridFormatTest.Employee&gt;&gt;();
2035              comp.FindAll(&quot;tbody.mud-table-body td&quot;)[3].TextContent.Should().Be(&quot;$87,000.00&quot;);
2036              var column = (PropertyColumn&lt;DataGridFormatTest.Employee, int&gt;)dataGrid.Instance.GetColumnByPropertyName(&quot;Salary&quot;);
2037              await comp.InvokeAsync(() =&gt; column.Format = &quot;C0&quot;);
2038              comp.Find(&quot;.mud-switch-input&quot;).Change(new ChangeEventArgs { Value = true });
2039              comp.FindAll(&quot;tbody.mud-table-body td&quot;)[3].TextContent.Should().Be(&quot;$87,000&quot;);
2040          }
2041          [Test]
2042          public async Task DataGridFilteredItemsCacheTest()
2043          {
2044              var comp = Context.RenderComponent&lt;DataGridSortableTest&gt;();
2045              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridSortableTest.Item&gt;&gt;();
2046              var initialFilterCount = dataGrid.Instance.FilteringRunCount;
2047              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SetSortAsync(&quot;Name&quot;, SortDirection.Ascending, x =&gt; { return x.Name; }));
2048              dataGrid.Instance.FilteringRunCount.Should().Be(initialFilterCount + 1);
2049              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SetSortAsync(&quot;Name&quot;, SortDirection.Descending, x =&gt; { return x.Name; }));
2050              dataGrid.Instance.FilteringRunCount.Should().Be(initialFilterCount + 2);
2051              await comp.InvokeAsync(() =&gt; dataGrid.Instance.RemoveSortAsync(&quot;Name&quot;));
2052              dataGrid.Instance.FilteringRunCount.Should().Be(initialFilterCount + 3);
2053              var column = dataGrid.FindComponent&lt;Column&lt;DataGridSortableTest.Item&gt;&gt;();
2054              await comp.InvokeAsync(() =&gt; column.Instance.SortBy = x =&gt; { return x.Name; });
2055              dataGrid.Render();
2056              dataGrid.Instance.FilteringRunCount.Should().Be(initialFilterCount + 4);
2057              dataGrid.Find(&quot;.column-options button&quot;).Click();
2058              dataGrid.Instance.FilteringRunCount.Should().Be(initialFilterCount + 5);
2059              var headerCell = dataGrid.FindComponent&lt;HeaderCell&lt;DataGridSortableTest.Item&gt;&gt;();
2060              await comp.InvokeAsync(() =&gt; headerCell.Instance.SortChangedAsync(new Microsoft.AspNetCore.Components.Web.MouseEventArgs()));
2061              dataGrid.Instance.FilteringRunCount.Should().Be(initialFilterCount + 6);
2062              await comp.InvokeAsync(() =&gt; headerCell.Instance.RemoveSortAsync());
2063              dataGrid.Instance.FilteringRunCount.Should().Be(initialFilterCount + 7);
2064              await comp.InvokeAsync(() =&gt; headerCell.Instance.AddFilterAsync());
2065              dataGrid.Instance.FilteringRunCount.Should().Be(initialFilterCount + 8);
2066              await comp.InvokeAsync(() =&gt; headerCell.Instance.OpenFilters());
2067              dataGrid.Instance.FilteringRunCount.Should().Be(initialFilterCount + 9);
2068              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SortMode = SortMode.None);
2069              dataGrid.Render();
2070              dataGrid.Instance.FilteringRunCount.Should().Be(initialFilterCount + 10);
2071              dataGrid.Instance.DropContainerHasChanged();
2072              dataGrid.FindAll(&quot;.column-header .sortable-column-header&quot;).Should().BeEmpty();
2073          }
2074          [Test]
2075          public async Task DataGridDragAndDropTest()
2076          {
2077              var comp = Context.RenderComponent&lt;DataGridDragAndDropTest&gt;();
2078              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridDragAndDropTest.Model&gt;&gt;();
2079              dataGrid.Instance.DropContainerHasChanged();
2080              var headerValues = dataGrid.FindAll(&quot;.sortable-column-header&quot;);
2081              headerValues.Count.Should().Be(5, because: &quot;5 columns in DataGridFiltersTest&quot;);
2082              headerValues[0].InnerHtml.Should().Be(&quot;Name&quot;);
2083              headerValues[1].InnerHtml.Should().Be(&quot;Age&quot;);
2084              headerValues[2].InnerHtml.Should().Be(&quot;Status&quot;);
2085              headerValues[3].InnerHtml.Should().Be(&quot;Hired&quot;);
2086              headerValues[4].InnerHtml.Should().Be(&quot;HiredOn&quot;);
2087              var container = dataGrid.Find(&quot;.mud-drop-container&quot;);
2088              container.Children.Should().HaveCount(1);
2089              var zone = dataGrid.FindAll(&quot;.mud-drop-zone&quot;);
2090              zone.Count.Should().Be(5, because: &quot;5 columns in DataGridFiltersTest&quot;);
<span onclick='openModal()' class='match'>2091              var firstDropZone = zone[1];
2092              var firstDropItem = firstDropZone.Children[0];
2093              var secondDropZone = zone[2];
</span>2094              var secondDropItem = secondDropZone.Children[0];
2095              await firstDropItem.DragStartAsync(new DragEventArgs());
2096              await secondDropItem.DropAsync(new DragEventArgs());
2097              var newHeaderValues = dataGrid.FindAll(&quot;.sortable-column-header&quot;);
2098              newHeaderValues.Count.Should().Be(5, because: &quot;5 columns in DataGridFiltersTest&quot;);
2099              newHeaderValues[0].InnerHtml.Should().Be(&quot;Name&quot;);
2100              newHeaderValues[1].InnerHtml.Should().Be(&quot;Status&quot;);
2101              newHeaderValues[2].InnerHtml.Should().Be(&quot;Age&quot;);
2102              newHeaderValues[3].InnerHtml.Should().Be(&quot;Hired&quot;);
2103              newHeaderValues[4].InnerHtml.Should().Be(&quot;HiredOn&quot;);
2104          }
2105      }
2106  }
</code></pre>
        </div>
        <div class="column">
            <h3>MudBlazor-MDEwOlJlcG9zaXRvcnkyODg0Mjg2NzY=-flat-DataGridTests.cs</h3>
            <pre><code>1  #pragma warning disable CS1998 
2  #pragma warning disable BL0005 
3  using System;
4  using System.Collections.Generic;
5  using System.Linq;
6  using System.Linq.Expressions;
7  using System.Threading.Tasks;
8  using AngleSharp.Dom;
9  using Bunit;
10  using FluentAssertions;
11  using Microsoft.AspNetCore.Components;
12  using Microsoft.AspNetCore.Components.Web;
13  using Microsoft.JSInterop;
14  using MudBlazor.Interfaces;
15  using MudBlazor.UnitTests.TestComponents;
16  using NUnit.Framework;
17  using static MudBlazor.Docs.Examples.TableRelationalExample;
18  namespace MudBlazor.UnitTests.Components
19  {
20      public record TestModel1(string Name, int? Age);
21      public record TestModel2(string Name, int? Age, DateTime? Date);
22      public record TestModel3(string Name, int? Age, Severity? Status);
23      public record TestModel4(string Name, int? Age, bool? Hired);
24      [TestFixture]
25      public class DataGridTests : BunitTest
26      {
27          [Test]
28          public async Task DataGridSortableTest()
29          {
30              var comp = Context.RenderComponent&lt;DataGridSortableTest&gt;();
31              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridSortableTest.Item&gt;&gt;();
32              var rows = dataGrid.FindAll(&quot;tr&quot;);
33              rows.Count.Should().Be(9, because: &quot;1 header row + 7 data rows + 1 footer row&quot;);
34              var cells = dataGrid.FindAll(&quot;td&quot;);
35              cells.Count.Should().Be(21, because: &quot;We have 7 data rows with three columns&quot;);
36              cells[0].TextContent.Should().Be(&quot;B&quot;); cells[1].TextContent.Should().Be(&quot;42&quot;); cells[2].TextContent.Should().Be(&quot;555&quot;);
37              cells[3].TextContent.Should().Be(&quot;A&quot;); cells[4].TextContent.Should().Be(&quot;73&quot;); cells[5].TextContent.Should().Be(&quot;7&quot;);
38              cells[6].TextContent.Should().Be(&quot;A&quot;); cells[7].TextContent.Should().Be(&quot;11&quot;); cells[8].TextContent.Should().Be(&quot;4444&quot;);
39              cells[9].TextContent.Should().Be(&quot;C&quot;); cells[10].TextContent.Should().Be(&quot;33&quot;); cells[11].TextContent.Should().Be(&quot;33333&quot;);
40              cells[12].TextContent.Should().Be(&quot;A&quot;); cells[13].TextContent.Should().Be(&quot;99&quot;); cells[14].TextContent.Should().Be(&quot;66&quot;);
41              cells[15].TextContent.Should().Be(&quot;C&quot;); cells[16].TextContent.Should().Be(&quot;44&quot;); cells[17].TextContent.Should().Be(&quot;1111111&quot;);
42              cells[18].TextContent.Should().Be(&quot;C&quot;); cells[19].TextContent.Should().Be(&quot;55&quot;); cells[20].TextContent.Should().Be(&quot;222222&quot;);
43              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SetSortAsync(&quot;Name&quot;, SortDirection.Ascending, x =&gt; { return x.Name; }));
44              cells = dataGrid.FindAll(&quot;td&quot;);
45              cells[0].TextContent.Should().Be(&quot;A&quot;); cells[1].TextContent.Should().Be(&quot;73&quot;); cells[2].TextContent.Should().Be(&quot;7&quot;);
46              cells[3].TextContent.Should().Be(&quot;A&quot;); cells[4].TextContent.Should().Be(&quot;11&quot;); cells[5].TextContent.Should().Be(&quot;4444&quot;);
47              cells[6].TextContent.Should().Be(&quot;A&quot;); cells[7].TextContent.Should().Be(&quot;99&quot;); cells[8].TextContent.Should().Be(&quot;66&quot;);
48              cells[9].TextContent.Should().Be(&quot;B&quot;); cells[10].TextContent.Should().Be(&quot;42&quot;); cells[11].TextContent.Should().Be(&quot;555&quot;);
49              cells[12].TextContent.Should().Be(&quot;C&quot;); cells[13].TextContent.Should().Be(&quot;33&quot;); cells[14].TextContent.Should().Be(&quot;33333&quot;);
50              cells[15].TextContent.Should().Be(&quot;C&quot;); cells[16].TextContent.Should().Be(&quot;44&quot;); cells[17].TextContent.Should().Be(&quot;1111111&quot;);
51              cells[18].TextContent.Should().Be(&quot;C&quot;); cells[19].TextContent.Should().Be(&quot;55&quot;); cells[20].TextContent.Should().Be(&quot;222222&quot;);
52              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SetSortAsync(&quot;Name&quot;, SortDirection.Descending, x =&gt; { return x.Name; }));
53              cells = dataGrid.FindAll(&quot;td&quot;);
54              cells[0].TextContent.Should().Be(&quot;C&quot;); cells[1].TextContent.Should().Be(&quot;33&quot;); cells[2].TextContent.Should().Be(&quot;33333&quot;);
55              cells[3].TextContent.Should().Be(&quot;C&quot;); cells[4].TextContent.Should().Be(&quot;44&quot;); cells[5].TextContent.Should().Be(&quot;1111111&quot;);
56              cells[6].TextContent.Should().Be(&quot;C&quot;); cells[7].TextContent.Should().Be(&quot;55&quot;); cells[8].TextContent.Should().Be(&quot;222222&quot;);
57              cells[9].TextContent.Should().Be(&quot;B&quot;); cells[10].TextContent.Should().Be(&quot;42&quot;); cells[11].TextContent.Should().Be(&quot;555&quot;);
58              cells[12].TextContent.Should().Be(&quot;A&quot;); cells[13].TextContent.Should().Be(&quot;73&quot;); cells[14].TextContent.Should().Be(&quot;7&quot;);
59              cells[15].TextContent.Should().Be(&quot;A&quot;); cells[16].TextContent.Should().Be(&quot;11&quot;); cells[17].TextContent.Should().Be(&quot;4444&quot;);
60              cells[18].TextContent.Should().Be(&quot;A&quot;); cells[19].TextContent.Should().Be(&quot;99&quot;); cells[20].TextContent.Should().Be(&quot;66&quot;);
61              await comp.InvokeAsync(() =&gt; dataGrid.Instance.RemoveSortAsync(&quot;Name&quot;));
62              cells = dataGrid.FindAll(&quot;td&quot;);
63              cells[0].TextContent.Should().Be(&quot;B&quot;); cells[1].TextContent.Should().Be(&quot;42&quot;); cells[2].TextContent.Should().Be(&quot;555&quot;);
64              cells[3].TextContent.Should().Be(&quot;A&quot;); cells[4].TextContent.Should().Be(&quot;73&quot;); cells[5].TextContent.Should().Be(&quot;7&quot;);
65              cells[6].TextContent.Should().Be(&quot;A&quot;); cells[7].TextContent.Should().Be(&quot;11&quot;); cells[8].TextContent.Should().Be(&quot;4444&quot;);
66              cells[9].TextContent.Should().Be(&quot;C&quot;); cells[10].TextContent.Should().Be(&quot;33&quot;); cells[11].TextContent.Should().Be(&quot;33333&quot;);
67              cells[12].TextContent.Should().Be(&quot;A&quot;); cells[13].TextContent.Should().Be(&quot;99&quot;); cells[14].TextContent.Should().Be(&quot;66&quot;);
68              cells[15].TextContent.Should().Be(&quot;C&quot;); cells[16].TextContent.Should().Be(&quot;44&quot;); cells[17].TextContent.Should().Be(&quot;1111111&quot;);
69              cells[18].TextContent.Should().Be(&quot;C&quot;); cells[19].TextContent.Should().Be(&quot;55&quot;); cells[20].TextContent.Should().Be(&quot;222222&quot;);
70              var column = dataGrid.FindComponent&lt;Column&lt;DataGridSortableTest.Item&gt;&gt;();
71              await comp.InvokeAsync(() =&gt; column.Instance.SortBy = x =&gt; { return x.Name; });
72              cells[0].TextContent.Should().Be(&quot;B&quot;); cells[1].TextContent.Should().Be(&quot;42&quot;); cells[2].TextContent.Should().Be(&quot;555&quot;);
73              cells[3].TextContent.Should().Be(&quot;A&quot;); cells[4].TextContent.Should().Be(&quot;73&quot;); cells[5].TextContent.Should().Be(&quot;7&quot;);
74              cells[6].TextContent.Should().Be(&quot;A&quot;); cells[7].TextContent.Should().Be(&quot;11&quot;); cells[8].TextContent.Should().Be(&quot;4444&quot;);
75              cells[9].TextContent.Should().Be(&quot;C&quot;); cells[10].TextContent.Should().Be(&quot;33&quot;); cells[11].TextContent.Should().Be(&quot;33333&quot;);
76              cells[12].TextContent.Should().Be(&quot;A&quot;); cells[13].TextContent.Should().Be(&quot;99&quot;); cells[14].TextContent.Should().Be(&quot;66&quot;);
77              cells[15].TextContent.Should().Be(&quot;C&quot;); cells[16].TextContent.Should().Be(&quot;44&quot;); cells[17].TextContent.Should().Be(&quot;1111111&quot;);
78              cells[18].TextContent.Should().Be(&quot;C&quot;); cells[19].TextContent.Should().Be(&quot;55&quot;); cells[20].TextContent.Should().Be(&quot;222222&quot;);
79              dataGrid.Find(&quot;.column-options button&quot;).Click();
80              cells = dataGrid.FindAll(&quot;td&quot;);
81              cells[0].TextContent.Should().Be(&quot;A&quot;); cells[1].TextContent.Should().Be(&quot;73&quot;); cells[2].TextContent.Should().Be(&quot;7&quot;);
82              cells[3].TextContent.Should().Be(&quot;A&quot;); cells[4].TextContent.Should().Be(&quot;11&quot;); cells[5].TextContent.Should().Be(&quot;4444&quot;);
83              cells[6].TextContent.Should().Be(&quot;A&quot;); cells[7].TextContent.Should().Be(&quot;99&quot;); cells[8].TextContent.Should().Be(&quot;66&quot;);
84              cells[9].TextContent.Should().Be(&quot;B&quot;); cells[10].TextContent.Should().Be(&quot;42&quot;); cells[11].TextContent.Should().Be(&quot;555&quot;);
85              cells[12].TextContent.Should().Be(&quot;C&quot;); cells[13].TextContent.Should().Be(&quot;33&quot;); cells[14].TextContent.Should().Be(&quot;33333&quot;);
86              cells[15].TextContent.Should().Be(&quot;C&quot;); cells[16].TextContent.Should().Be(&quot;44&quot;); cells[17].TextContent.Should().Be(&quot;1111111&quot;);
87              cells[18].TextContent.Should().Be(&quot;C&quot;); cells[19].TextContent.Should().Be(&quot;55&quot;); cells[20].TextContent.Should().Be(&quot;222222&quot;);
88              var headerCell = dataGrid.FindComponent&lt;HeaderCell&lt;DataGridSortableTest.Item&gt;&gt;();
89              await comp.InvokeAsync(() =&gt; headerCell.Instance.SortChangedAsync(new Microsoft.AspNetCore.Components.Web.MouseEventArgs()));
90              await comp.InvokeAsync(() =&gt; headerCell.Instance.RemoveSortAsync());
91              await comp.InvokeAsync(() =&gt; headerCell.Instance.AddFilterAsync());
92              await comp.InvokeAsync(() =&gt; headerCell.Instance.OpenFilters());
93              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SortMode = SortMode.None);
94              dataGrid.Render();
95              dataGrid.Instance.DropContainerHasChanged();
96              dataGrid.FindAll(&quot;.column-header .sortable-column-header&quot;).Should().BeEmpty();
97          }
98          [Test]
99          public async Task DataGridSortableTemplateColumnTest()
100          {
101              var comp = Context.RenderComponent&lt;DataGridSortableTemplateColumnTest&gt;();
102              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridSortableTemplateColumnTest.Item&gt;&gt;();
103              var rows = dataGrid.FindAll(&quot;tr&quot;);
104              rows.Count.Should().Be(9, because: &quot;1 header row + 7 data rows + 1 footer row&quot;);
105              var cells = dataGrid.FindAll(&quot;td&quot;);
106              cells.Count.Should().Be(7, because: &quot;We have 7 data rows with one column&quot;);
107              cells[0].TextContent.Should().Be(&quot;B&quot;);
108              cells[1].TextContent.Should().Be(&quot;A&quot;);
109              cells[2].TextContent.Should().Be(&quot;A&quot;);
110              cells[3].TextContent.Should().Be(&quot;C&quot;);
111              cells[4].TextContent.Should().Be(&quot;A&quot;);
112              cells[5].TextContent.Should().Be(&quot;C&quot;);
113              cells[6].TextContent.Should().Be(&quot;C&quot;);
114              var templatePropertyName = dataGrid.Instance.RenderedColumns.FirstOrDefault().PropertyName;
115              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SetSortAsync(templatePropertyName, SortDirection.Ascending, x =&gt; { return x.Name; }));
116              cells = dataGrid.FindAll(&quot;td&quot;);
117              cells[0].TextContent.Should().Be(&quot;A&quot;);
118              cells[1].TextContent.Should().Be(&quot;A&quot;);
119              cells[2].TextContent.Should().Be(&quot;A&quot;);
120              cells[3].TextContent.Should().Be(&quot;B&quot;);
121              cells[4].TextContent.Should().Be(&quot;C&quot;);
122              cells[5].TextContent.Should().Be(&quot;C&quot;);
123              cells[6].TextContent.Should().Be(&quot;C&quot;);
124              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SetSortAsync(templatePropertyName, SortDirection.Descending, x =&gt; { return x.Name; }));
125              cells = dataGrid.FindAll(&quot;td&quot;);
126              cells[0].TextContent.Should().Be(&quot;C&quot;);
127              cells[1].TextContent.Should().Be(&quot;C&quot;);
128              cells[2].TextContent.Should().Be(&quot;C&quot;);
129              cells[3].TextContent.Should().Be(&quot;B&quot;);
130              cells[4].TextContent.Should().Be(&quot;A&quot;);
131              cells[5].TextContent.Should().Be(&quot;A&quot;);
132              cells[6].TextContent.Should().Be(&quot;A&quot;);
133              await comp.InvokeAsync(() =&gt; dataGrid.Instance.RemoveSortAsync(templatePropertyName));
134              cells = dataGrid.FindAll(&quot;td&quot;);
135              cells[0].TextContent.Should().Be(&quot;B&quot;);
136              cells[1].TextContent.Should().Be(&quot;A&quot;);
137              cells[2].TextContent.Should().Be(&quot;A&quot;);
138              cells[3].TextContent.Should().Be(&quot;C&quot;);
139              cells[4].TextContent.Should().Be(&quot;A&quot;);
140              cells[5].TextContent.Should().Be(&quot;C&quot;);
141              cells[6].TextContent.Should().Be(&quot;C&quot;);
142              dataGrid.Find(&quot;.column-options button&quot;).Click();
143              cells = dataGrid.FindAll(&quot;td&quot;);
144              cells[0].TextContent.Should().Be(&quot;A&quot;);
145              cells[1].TextContent.Should().Be(&quot;A&quot;);
146              cells[2].TextContent.Should().Be(&quot;A&quot;);
147              cells[3].TextContent.Should().Be(&quot;B&quot;);
148              cells[4].TextContent.Should().Be(&quot;C&quot;);
149              cells[5].TextContent.Should().Be(&quot;C&quot;);
150              cells[6].TextContent.Should().Be(&quot;C&quot;);
151          }
152          [Test]
153          public async Task DataGridFilterableTest()
154          {
155              var comp = Context.RenderComponent&lt;DataGridFilterableTest&gt;();
156              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridFilterableTest.Item&gt;&gt;();
157              dataGrid.FindAll(&quot;tr&quot;).Count.Should().Be(6); 
158              dataGrid.FindAll(&quot;td&quot;)[0].TextContent.Trim().Should().Be(&quot;B&quot;);
159              dataGrid.FindAll(&quot;td&quot;)[1].TextContent.Trim().Should().Be(&quot;A&quot;);
160              dataGrid.FindAll(&quot;td&quot;)[2].TextContent.Trim().Should().Be(&quot;C&quot;);
161              dataGrid.FindAll(&quot;td&quot;)[3].TextContent.Trim().Should().Be(&quot;C&quot;);
162              await comp.InvokeAsync(() =&gt;
163              {
164                  return dataGrid.Instance.AddFilterAsync(new FilterDefinition&lt;DataGridFilterableTest.Item&gt;
165                  {
166                      Column = dataGrid.Instance.RenderedColumns.First(),
167                      Operator = FilterOperator.String.Equal,
168                      Value = &quot;C&quot;
169                  });
170              });
171              dataGrid.FindAll(&quot;td&quot;)[0].TextContent.Trim().Should().Be(&quot;C&quot;);
172              dataGrid.FindAll(&quot;td&quot;)[1].TextContent.Trim().Should().Be(&quot;C&quot;);
173              dataGrid.Instance.Filterable = false;
174          }
175          [Test]
176          public async Task DataGridFilterableServerDataTest()
177          {
178              var comp = Context.RenderComponent&lt;DataGridFilterableServerDataTest&gt;();
179              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridFilterableServerDataTest.Item&gt;&gt;();
180              dataGrid.FindAll(&quot;tr&quot;).Count.Should().Be(6); 
181              dataGrid.FindAll(&quot;td&quot;)[0].TextContent.Trim().Should().Be(&quot;B&quot;);
182              dataGrid.FindAll(&quot;td&quot;)[1].TextContent.Trim().Should().Be(&quot;A&quot;);
183              dataGrid.FindAll(&quot;td&quot;)[2].TextContent.Trim().Should().Be(&quot;C&quot;);
184              dataGrid.FindAll(&quot;td&quot;)[3].TextContent.Trim().Should().Be(&quot;C&quot;);
185              await comp.InvokeAsync(() =&gt;
186              {
187                  return dataGrid.Instance.AddFilterAsync(new FilterDefinition&lt;DataGridFilterableServerDataTest.Item&gt;
188                  {
189                      Column = dataGrid.Instance.RenderedColumns.FirstOrDefault(),
190                      Operator = FilterOperator.String.Equal,
191                      Value = &quot;C&quot;
192                  });
193              });
194              dataGrid.FindAll(&quot;td&quot;)[0].TextContent.Trim().Should().Be(&quot;C&quot;);
195              dataGrid.FindAll(&quot;td&quot;)[1].TextContent.Trim().Should().Be(&quot;C&quot;);
196              dataGrid.Instance.Filterable = false;
197          }
198          [Test]
199          public async Task DataGridMultiSelectionTest()
200          {
201              var comp = Context.RenderComponent&lt;DataGridMultiSelectionTest&gt;();
202              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridMultiSelectionTest.Item&gt;&gt;();
203              dataGrid.Instance.SelectedItems.Count.Should().Be(0);
204              dataGrid.FindAll(&quot;input&quot;)[0].Change(true);
205              dataGrid.Instance.SelectedItems.Count.Should().Be(3);
206              await comp.InvokeAsync(async () =&gt; await dataGrid.Instance.SetSelectedItemAsync(false, dataGrid.Instance.SelectedItems.First()));
207              dataGrid.Instance.SelectedItems.Count.Should().Be(2);
208              await comp.InvokeAsync(async () =&gt; await dataGrid.Instance.SetSelectedItemAsync(dataGrid.Instance.Items.First()));
209              dataGrid.Instance.SelectedItems.Count.Should().Be(3);
210              await comp.InvokeAsync(async () =&gt; await dataGrid.Instance.SetSelectAllAsync(false));
211              dataGrid.Instance.SelectedItems.Count.Should().Be(0);
212              await comp.InvokeAsync(async () =&gt; await dataGrid.Instance.SetSelectAllAsync(true));
213              dataGrid.Instance.SelectedItems.Count.Should().Be(3);
214              dataGrid.Find(&quot;tfoot input&quot;).Change(false);
215              dataGrid.Instance.SelectedItems.Count.Should().Be(0);
216          }
217          [Test]
218          public async Task DataGridServerMultiSelectionTest()
219          {
220              var comp = Context.RenderComponent&lt;DataGridServerMultiSelectionTest&gt;();
221              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridServerMultiSelectionTest.Item&gt;&gt;();
222              dataGrid.Instance.SelectedItems.Count.Should().Be(0);
223              dataGrid.FindAll(&quot;input&quot;)[0].Change(true);
224              dataGrid.Instance.SelectedItems.Count.Should().Be(3);
225              await comp.InvokeAsync(async () =&gt; await dataGrid.Instance.SetSelectedItemAsync(false, dataGrid.Instance.SelectedItems.First()));
226              dataGrid.Instance.SelectedItems.Count.Should().Be(2);
227              await comp.InvokeAsync(async () =&gt; await dataGrid.Instance.SetSelectedItemAsync(dataGrid.Instance.ServerItems.First()));
228              dataGrid.Instance.SelectedItems.Count.Should().Be(3);
229              await comp.InvokeAsync(async () =&gt; await dataGrid.Instance.SetSelectAllAsync(false));
230              dataGrid.Instance.SelectedItems.Count.Should().Be(0);
231              await comp.InvokeAsync(async () =&gt; await dataGrid.Instance.SetSelectAllAsync(true));
232              dataGrid.Instance.SelectedItems.Count.Should().Be(3);
233              dataGrid.Find(&quot;tfoot input&quot;).Change(false);
234              dataGrid.Instance.SelectedItems.Count.Should().Be(0);
235          }
236          [Test]
237          public async Task DataGridPaginationTest()
238          {
239              var comp = Context.RenderComponent&lt;DataGridPaginationTest&gt;();
240              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridPaginationTest.Item&gt;&gt;();
241              dataGrid.FindAll(&quot;.mud-table-pagination-caption&quot;)[^1].TextContent.Trim().Should().Be(&quot;1-10 of 20&quot;);
242              dataGrid.Find(&quot;.mud-table-body td&quot;).TextContent.Trim().Should().Be(&quot;0&quot;);
243              dataGrid.FindAll(&quot;.mud-table-pagination-actions button&quot;)[2].Click();
244              dataGrid.Find(&quot;.mud-table-body td&quot;).TextContent.Trim().Should().Be(&quot;10&quot;);
245              dataGrid.Instance.RowsPerPage.Should().Be(10);
246              await comp.InvokeAsync(async () =&gt; await dataGrid.Instance.SetRowsPerPageAsync(4));
247              dataGrid.Instance.RowsPerPage.Should().Be(4);
248              await comp.InvokeAsync(() =&gt; dataGrid.Instance.NavigateTo(Page.Last));
249              dataGrid.Instance.CurrentPage.Should().Be(4);
250              await comp.InvokeAsync(() =&gt; dataGrid.Instance.NavigateTo(Page.Previous));
251              dataGrid.Instance.CurrentPage.Should().Be(3);
252              await comp.InvokeAsync(() =&gt; dataGrid.Instance.NavigateTo(Page.First));
253              dataGrid.Instance.CurrentPage.Should().Be(0);
254          }
255          [Test]
256          public async Task DataGridInlineEditTest()
257          {
258              var comp = Context.RenderComponent&lt;DataGridCellEditTest&gt;();
259              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridCellEditTest.Model&gt;&gt;();
260              dataGrid.FindAll(&quot;td input&quot;)[0].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;John&quot;);
261              dataGrid.FindAll(&quot;td input&quot;)[1].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;45&quot;);
262              dataGrid.FindAll(&quot;td input&quot;)[2].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;Johanna&quot;);
263              dataGrid.FindAll(&quot;td input&quot;)[3].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;23&quot;);
264              dataGrid.FindAll(&quot;td input&quot;)[4].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;Steve&quot;);
265              dataGrid.FindAll(&quot;td input&quot;)[5].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;32&quot;);
266              dataGrid.FindAll(&quot;.mud-table-body tr td input&quot;)[0].Change(&quot;Jonathan&quot;);
267              dataGrid.FindAll(&quot;.mud-table-body tr td input&quot;)[1].Change(52d);
268              dataGrid.FindAll(&quot;.mud-table-body tr td input&quot;)[0].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;Jonathan&quot;);
269              dataGrid.FindAll(&quot;.mud-table-body tr td input&quot;)[1].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;52&quot;);
270              var name = dataGrid.Instance.Items.First().Name;
271              var age = dataGrid.Instance.Items.First().Age;
272              name.Should().Be(&quot;Jonathan&quot;);
273              age.Should().Be(52);
274          }
275          [Test]
276          public async Task DataGridInlineEditWithNullableTest()
277          {
278              var comp = Context.RenderComponent&lt;DataGridCellEditWithNullableTest&gt;();
279              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridCellEditWithNullableTest.Model&gt;&gt;();
280              dataGrid.FindAll(&quot;td input&quot;)[0].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;John&quot;);
281              dataGrid.FindAll(&quot;td input&quot;)[1].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;45&quot;);
282              dataGrid.FindAll(&quot;td input&quot;)[2].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;Johanna&quot;);
283              dataGrid.FindAll(&quot;td input&quot;)[3].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;23&quot;);
284              dataGrid.FindAll(&quot;td input&quot;)[4].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;Steve&quot;);
285              Assert.IsNull(dataGrid.FindAll(&quot;td input&quot;)[5].GetAttribute(&quot;value&quot;));
286              dataGrid.FindAll(&quot;.mud-table-body tr td input&quot;)[0].Change(&quot;Jonathan&quot;);
287              dataGrid.FindAll(&quot;.mud-table-body tr td input&quot;)[1].Change(52);
288              dataGrid.FindAll(&quot;.mud-table-body tr td input&quot;)[0].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;Jonathan&quot;);
289              dataGrid.FindAll(&quot;.mud-table-body tr td input&quot;)[1].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;52&quot;);
290              var name = dataGrid.Instance.Items.First().Name;
291              var age = dataGrid.Instance.Items.First().Age;
292              name.Should().Be(&quot;Jonathan&quot;);
293              age.Should().Be(52);
294          }
295          [Test]
296          public async Task DataGridInlineEditWithTemplateTest()
297          {
298              var comp = Context.RenderComponent&lt;DataGridCellEditWithTemplateTest&gt;();
299              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridCellEditWithTemplateTest.Model&gt;&gt;();
300              dataGrid.FindAll(&quot;td input&quot;)[0].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;John&quot;);
301              dataGrid.FindAll(&quot;td input&quot;)[1].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;45&quot;);
302              dataGrid.FindAll(&quot;td input&quot;)[2].HasAttribute(&quot;checked&quot;).Should().Be(false);
303              dataGrid.FindAll(&quot;td input&quot;)[3].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;Johanna&quot;);
304              dataGrid.FindAll(&quot;td input&quot;)[4].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;23&quot;);
305              dataGrid.FindAll(&quot;td input&quot;)[5].HasAttribute(&quot;checked&quot;).Should().Be(true);
306              dataGrid.FindAll(&quot;td input&quot;)[6].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;Steve&quot;);
307              dataGrid.FindAll(&quot;td input&quot;)[7].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;32&quot;);
308              dataGrid.FindAll(&quot;td input&quot;)[8].HasAttribute(&quot;value&quot;).Should().Be(false);
309              dataGrid.FindAll(&quot;td input&quot;)[0].Change(&quot;Jonathan&quot;);
310              dataGrid.FindAll(&quot;td input&quot;)[1].Change(52d);
311              dataGrid.FindAll(&quot;td input&quot;)[2].Change(true);
312              dataGrid.FindAll(&quot;td input&quot;)[0].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;Jonathan&quot;);
313              dataGrid.FindAll(&quot;td input&quot;)[1].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;52&quot;);
314              dataGrid.FindAll(&quot;td input&quot;)[2].HasAttribute(&quot;checked&quot;).Should().Be(true);
315              var name = dataGrid.Instance.Items.First().Name;
316              var age = dataGrid.Instance.Items.First().Age;
317              var hired = dataGrid.Instance.Items.First().Hired;
318              name.Should().Be(&quot;Jonathan&quot;);
319              age.Should().Be(52);
320              hired.Should().Be(true);
321          }
322          [Test]
323          public async Task DataGridDialogEditTest()
324          {
325              var comp = Context.RenderComponent&lt;DataGridFormEditTest&gt;();
326              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridFormEditTest.Model&gt;&gt;();
327              dataGrid.FindAll(&quot;td&quot;)[0].Html().Trim().Should().Be(&quot;John&quot;);
328              dataGrid.FindAll(&quot;td&quot;)[1].Html().Trim().Should().Be(&quot;45&quot;);
329              dataGrid.FindAll(&quot;td&quot;)[2].Html().Trim().Should().Be(&quot;snakex64&quot;);
330              dataGrid.FindAll(&quot;td&quot;)[3].Html().Trim().Should().Be(&quot;Johanna&quot;);
331              dataGrid.FindAll(&quot;td&quot;)[4].Html().Trim().Should().Be(&quot;23&quot;);
332              dataGrid.FindAll(&quot;td&quot;)[5].Html().Trim().Should().Be(&quot;snakex64&quot;);
333              dataGrid.FindAll(&quot;td&quot;)[6].Html().Trim().Should().Be(&quot;Steve&quot;);
334              dataGrid.FindAll(&quot;td&quot;)[7].Html().Trim().Should().Be(&quot;32&quot;);
335              dataGrid.FindAll(&quot;td&quot;)[8].Html().Trim().Should().Be(&quot;snakex64&quot;);
336              dataGrid.FindAll(&quot;tbody tr&quot;)[1].Click();
337              comp.FindAll(&quot;div input&quot;)[0].Change(&quot;Galadriel&quot;);
338              comp.FindAll(&quot;div input&quot;)[1].Change(1);
339              comp.Find(&quot;.mud-dialog-actions .mud-button-filled-primary&quot;).Click();
340              dataGrid.FindAll(&quot;td&quot;)[0].Html().Trim().Should().Be(&quot;John&quot;);
341              dataGrid.FindAll(&quot;td&quot;)[1].Html().Trim().Should().Be(&quot;45&quot;);
342              dataGrid.FindAll(&quot;td&quot;)[2].Html().Trim().Should().Be(&quot;snakex64&quot;);
343              dataGrid.FindAll(&quot;td&quot;)[3].Html().Trim().Should().Be(&quot;Galadriel&quot;);
344              dataGrid.FindAll(&quot;td&quot;)[4].Html().Trim().Should().Be(&quot;1&quot;);
345              dataGrid.FindAll(&quot;td&quot;)[5].Html().Trim().Should().Be(&quot;snakex64&quot;);
346              dataGrid.FindAll(&quot;td&quot;)[6].Html().Trim().Should().Be(&quot;Steve&quot;);
347              dataGrid.FindAll(&quot;td&quot;)[7].Html().Trim().Should().Be(&quot;32&quot;);
348              dataGrid.FindAll(&quot;td&quot;)[8].Html().Trim().Should().Be(&quot;snakex64&quot;);
349          }
350          [Test]
351          public async Task DataGridFormFieldChangedTest()
352          {
353              var comp = Context.RenderComponent&lt;DataGridFormFieldChangedTest&gt;();
354              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridFormFieldChangedTest.Item&gt;&gt;();
355              dataGrid.FindAll(&quot;tbody tr&quot;)[0].Click();
356              comp.Find(&quot;div input&quot;).Change(&quot;J K Simmons&quot;);
357              comp.Instance.FormFieldChangedEventArgs.NewValue.Should().Be(&quot;J K Simmons&quot;);
358              var textfield = comp.FindComponent&lt;MudTextField&lt;string&gt;&gt;();
359              Assert.AreSame(comp.Instance.FormFieldChangedEventArgs.Field, textfield.Instance);
360          }
361          [Test]
362          public async Task DataGridVisualStylingTest()
363          {
364              var comp = Context.RenderComponent&lt;DataGridVisualStylingTest&gt;();
365              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridVisualStylingTest.Item&gt;&gt;();
366              dataGrid.FindAll(&quot;td&quot;)[1].GetAttribute(&quot;style&quot;).Should().Contain(&quot;background-color:#E5BDE5&quot;);
367              dataGrid.FindAll(&quot;td&quot;)[2].GetAttribute(&quot;style&quot;).Should().Contain(&quot;font-weight:bold&quot;);
368          }
369          [Test]
370          [Obsolete]
371          public async Task DataGridEventCallbacksTest()
372          {
373              var comp = Context.RenderComponent&lt;DataGridEventCallbacksTest&gt;();
374              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridEventCallbacksTest.Item&gt;&gt;();
375              dataGrid.Instance.RowClick.HasDelegate.Should().Be(true);
376              dataGrid.Instance.SelectedItemChanged.HasDelegate.Should().Be(true);
377              dataGrid.Instance.CommittedItemChanges.HasDelegate.Should().Be(true);
378              dataGrid.Instance.StartedEditingItem.HasDelegate.Should().Be(true);
379              dataGrid.Instance.CancelledEditingItem.HasDelegate.Should().Be(true);
380              dataGrid.Instance.CancelledEditingItem.Should().Be(dataGrid.Instance.CancelledEditingItem);
381              var cancelCallback = dataGrid.Instance.CancelledEditingItem;
382              dataGrid.SetCallback(dg =&gt; dg.CancelledEditingItem, x =&gt; { return; });
383              dataGrid.Instance.CancelledEditingItem.Should().NotBe(cancelCallback);
384              dataGrid.Instance.CancelledEditingItem = cancelCallback;
385              dataGrid.Instance.CancelledEditingItem.Should().Be(cancelCallback);
386              var parameters = new List&lt;ComponentParameter&gt;();
387              parameters.Add(ComponentParameter.CreateParameter(nameof(dataGrid.Instance.MultiSelection), true));
388              parameters.Add(ComponentParameter.CreateParameter(nameof(dataGrid.Instance.ReadOnly), false));
389              parameters.Add(ComponentParameter.CreateParameter(nameof(dataGrid.Instance.EditMode), DataGridEditMode.Cell));
390              parameters.Add(ComponentParameter.CreateParameter(nameof(dataGrid.Instance.EditTrigger), DataGridEditTrigger.OnRowClick));
391              dataGrid.SetParametersAndRender(parameters.ToArray());
392              comp.Instance.RowClicked.Should().Be(false);
393              comp.Instance.SelectedItemChanged.Should().Be(false);
394              comp.Instance.CommittedItemChanges.Should().Be(false);
395              comp.Instance.StartedEditingItem.Should().Be(false);
396              comp.Instance.CanceledEditingItem.Should().Be(false);
397              dataGrid.FindAll(&quot;.mud-table-body tr&quot;)[0].Click();
398              dataGrid.FindAll(&quot;.mud-table-body tr td input&quot;)[0].Change(&quot;A test&quot;);
399              comp.Instance.RowClicked.Should().Be(true);
400              comp.Instance.SelectedItemChanged.Should().Be(true);
401              comp.Instance.CommittedItemChanges.Should().Be(true);
402              comp.Instance.CanceledEditingItem.Should().Be(false);
403              await dataGrid.InvokeAsync(dataGrid.Instance.CancelEditingItemAsync);
404              comp.Instance.CanceledEditingItem.Should().Be(true);
405          }
406          [Test]
407          public async Task DataGridServerSideSortableTest()
408          {
409              TestComponents.DataGridServerSideSortableTest.DisableServerTimeoutForTests = true;
410              var comp = Context.RenderComponent&lt;DataGridServerSideSortableTest&gt;();
411              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridServerSideSortableTest.Item&gt;&gt;();
412              var cells = dataGrid.FindAll(&quot;td&quot;);
413              cells.Count.Should().Be(21, because: &quot;We have 7 data rows with three columns&quot;);
414              cells[0].TextContent.Should().Be(&quot;B&quot;); cells[1].TextContent.Should().Be(&quot;42&quot;); cells[2].TextContent.Should().Be(&quot;555&quot;);
415              cells[3].TextContent.Should().Be(&quot;A&quot;); cells[4].TextContent.Should().Be(&quot;73&quot;); cells[5].TextContent.Should().Be(&quot;7&quot;);
416              cells[6].TextContent.Should().Be(&quot;A&quot;); cells[7].TextContent.Should().Be(&quot;11&quot;); cells[8].TextContent.Should().Be(&quot;4444&quot;);
417              cells[9].TextContent.Should().Be(&quot;C&quot;); cells[10].TextContent.Should().Be(&quot;33&quot;); cells[11].TextContent.Should().Be(&quot;33333&quot;);
418              cells[12].TextContent.Should().Be(&quot;A&quot;); cells[13].TextContent.Should().Be(&quot;99&quot;); cells[14].TextContent.Should().Be(&quot;66&quot;);
419              cells[15].TextContent.Should().Be(&quot;C&quot;); cells[16].TextContent.Should().Be(&quot;44&quot;); cells[17].TextContent.Should().Be(&quot;1111111&quot;);
420              cells[18].TextContent.Should().Be(&quot;C&quot;); cells[19].TextContent.Should().Be(&quot;55&quot;); cells[20].TextContent.Should().Be(&quot;222222&quot;);
421              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SetSortAsync(&quot;Name&quot;, SortDirection.Ascending, x =&gt; { return x.Name; }));
422              cells = dataGrid.FindAll(&quot;td&quot;);
423              cells[0].TextContent.Should().Be(&quot;A&quot;); cells[1].TextContent.Should().Be(&quot;73&quot;); cells[2].TextContent.Should().Be(&quot;7&quot;);
424              cells[3].TextContent.Should().Be(&quot;A&quot;); cells[4].TextContent.Should().Be(&quot;11&quot;); cells[5].TextContent.Should().Be(&quot;4444&quot;);
425              cells[6].TextContent.Should().Be(&quot;A&quot;); cells[7].TextContent.Should().Be(&quot;99&quot;); cells[8].TextContent.Should().Be(&quot;66&quot;);
426              cells[9].TextContent.Should().Be(&quot;B&quot;); cells[10].TextContent.Should().Be(&quot;42&quot;); cells[11].TextContent.Should().Be(&quot;555&quot;);
427              cells[12].TextContent.Should().Be(&quot;C&quot;); cells[13].TextContent.Should().Be(&quot;33&quot;); cells[14].TextContent.Should().Be(&quot;33333&quot;);
428              cells[15].TextContent.Should().Be(&quot;C&quot;); cells[16].TextContent.Should().Be(&quot;44&quot;); cells[17].TextContent.Should().Be(&quot;1111111&quot;);
429              cells[18].TextContent.Should().Be(&quot;C&quot;); cells[19].TextContent.Should().Be(&quot;55&quot;); cells[20].TextContent.Should().Be(&quot;222222&quot;);
430              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SetSortAsync(&quot;Name&quot;, SortDirection.Descending, x =&gt; { return x.Name; }));
431              cells = dataGrid.FindAll(&quot;td&quot;);
432              cells[0].TextContent.Should().Be(&quot;C&quot;); cells[1].TextContent.Should().Be(&quot;33&quot;); cells[2].TextContent.Should().Be(&quot;33333&quot;);
433              cells[3].TextContent.Should().Be(&quot;C&quot;); cells[4].TextContent.Should().Be(&quot;44&quot;); cells[5].TextContent.Should().Be(&quot;1111111&quot;);
434              cells[6].TextContent.Should().Be(&quot;C&quot;); cells[7].TextContent.Should().Be(&quot;55&quot;); cells[8].TextContent.Should().Be(&quot;222222&quot;);
435              cells[9].TextContent.Should().Be(&quot;B&quot;); cells[10].TextContent.Should().Be(&quot;42&quot;); cells[11].TextContent.Should().Be(&quot;555&quot;);
436              cells[12].TextContent.Should().Be(&quot;A&quot;); cells[13].TextContent.Should().Be(&quot;73&quot;); cells[14].TextContent.Should().Be(&quot;7&quot;);
437              cells[15].TextContent.Should().Be(&quot;A&quot;); cells[16].TextContent.Should().Be(&quot;11&quot;); cells[17].TextContent.Should().Be(&quot;4444&quot;);
438              cells[18].TextContent.Should().Be(&quot;A&quot;); cells[19].TextContent.Should().Be(&quot;99&quot;); cells[20].TextContent.Should().Be(&quot;66&quot;);
439              await comp.InvokeAsync(() =&gt; dataGrid.Instance.RemoveSortAsync(&quot;Name&quot;));
440              cells = dataGrid.FindAll(&quot;td&quot;);
441              cells[0].TextContent.Should().Be(&quot;B&quot;); cells[1].TextContent.Should().Be(&quot;42&quot;); cells[2].TextContent.Should().Be(&quot;555&quot;);
442              cells[3].TextContent.Should().Be(&quot;A&quot;); cells[4].TextContent.Should().Be(&quot;73&quot;); cells[5].TextContent.Should().Be(&quot;7&quot;);
443              cells[6].TextContent.Should().Be(&quot;A&quot;); cells[7].TextContent.Should().Be(&quot;11&quot;); cells[8].TextContent.Should().Be(&quot;4444&quot;);
444              cells[9].TextContent.Should().Be(&quot;C&quot;); cells[10].TextContent.Should().Be(&quot;33&quot;); cells[11].TextContent.Should().Be(&quot;33333&quot;);
445              cells[12].TextContent.Should().Be(&quot;A&quot;); cells[13].TextContent.Should().Be(&quot;99&quot;); cells[14].TextContent.Should().Be(&quot;66&quot;);
446              cells[15].TextContent.Should().Be(&quot;C&quot;); cells[16].TextContent.Should().Be(&quot;44&quot;); cells[17].TextContent.Should().Be(&quot;1111111&quot;);
447              cells[18].TextContent.Should().Be(&quot;C&quot;); cells[19].TextContent.Should().Be(&quot;55&quot;); cells[20].TextContent.Should().Be(&quot;222222&quot;);
448              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SortMode = SortMode.None);
449              dataGrid.Render();
450              dataGrid.Instance.DropContainerHasChanged();
451              dataGrid.FindAll(&quot;.column-header .sortable-column-header&quot;).Should().BeEmpty();
452          }
453          [Test]
454          public async Task FilterDefinitionStringTest()
455          {
456              var comp = Context.RenderComponent&lt;DataGridFiltersTest&gt;();
457              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridFiltersTest.Model&gt;&gt;();
458              var nameColumn = dataGrid.Instance.GetColumnByPropertyName(&quot;Name&quot;);
459              var filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;();
460              Func&lt;DataGridFiltersTest.Model, bool&gt; func = null;
461              #region FilterOperator.String.Contains
462              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
463              {
464                  Column = nameColumn,
465                  Operator = FilterOperator.String.Contains,
466                  Value = &quot;Joe&quot;,
467                  DataGrid = dataGrid.Instance
468              };
469              func = filterDefinition.GenerateFilterFunction();
470              Assert.IsFalse(func.Invoke(new(&quot;Does not contain&quot;, 45, null, null, null)));
471              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
472              Assert.IsFalse(func.Invoke(new(&quot;joe&quot;, 45, null, null, null)));
473              Assert.IsFalse(func.Invoke(new(null, 45, null, null, null)));
474              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
475              {
476                  Column = nameColumn,
477                  Operator = FilterOperator.String.Contains,
478                  Value = &quot;Joe&quot;,
479                  DataGrid = dataGrid.Instance
480              };
481              filterDefinition.DataGrid.FilterCaseSensitivity = DataGridFilterCaseSensitivity.CaseInsensitive;
482              func = filterDefinition.GenerateFilterFunction();
483              Assert.IsFalse(func.Invoke(new(&quot;Does not contain&quot;, 45, null, null, null)));
484              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
485              Assert.IsTrue(func.Invoke(new(&quot;joe&quot;, 45, null, null, null)));
486              Assert.IsFalse(func.Invoke(new(null, 45, null, null, null)));
487              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
488              {
489                  Column = nameColumn,
490                  Operator = FilterOperator.String.Contains,
491                  Value = null,
492                  DataGrid = dataGrid.Instance
493              };
494              filterDefinition.DataGrid.FilterCaseSensitivity = DataGridFilterCaseSensitivity.Default;
495              func = filterDefinition.GenerateFilterFunction();
496              Assert.IsTrue(func.Invoke(new(&quot;Does not contain&quot;, 45, null, null, null)));
497              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
498              Assert.IsTrue(func.Invoke(new(null, 45, null, null, null)));
499              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
500              {
501                  Column = nameColumn,
502                  Operator = FilterOperator.String.Contains,
503                  Value = null,
504                  DataGrid = dataGrid.Instance
505              };
506              filterDefinition.DataGrid.FilterCaseSensitivity = DataGridFilterCaseSensitivity.CaseInsensitive;
507              func = filterDefinition.GenerateFilterFunction();
508              Assert.IsTrue(func.Invoke(new(&quot;Does not contain&quot;, 45, null, null, null)));
509              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
510              Assert.IsTrue(func.Invoke(new(null, 45, null, null, null)));
511              #endregion
512              #region FilterOperator.String.NotContains
513              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
514              {
515                  Column = nameColumn,
516                  Operator = FilterOperator.String.NotContains,
517                  Value = &quot;Joe&quot;,
518                  DataGrid = dataGrid.Instance
519              };
520              filterDefinition.DataGrid.FilterCaseSensitivity = DataGridFilterCaseSensitivity.Default;
521              func = filterDefinition.GenerateFilterFunction();
522              Assert.IsTrue(func.Invoke(new(&quot;Does not contain&quot;, 45, null, null, null)));
523              Assert.IsFalse(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
524              Assert.IsTrue(func.Invoke(new(&quot;joe&quot;, 45, null, null, null)));
525              Assert.IsFalse(func.Invoke(new(null, 45, null, null, null)));
526              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
527              {
528                  Column = nameColumn,
529                  Operator = FilterOperator.String.NotContains,
530                  Value = &quot;Joe&quot;,
531                  DataGrid = dataGrid.Instance
532              };
533              filterDefinition.DataGrid.FilterCaseSensitivity = DataGridFilterCaseSensitivity.CaseInsensitive;
534              func = filterDefinition.GenerateFilterFunction();
535              Assert.IsTrue(func.Invoke(new(&quot;Does not contain&quot;, 45, null, null, null)));
536              Assert.IsFalse(func.Invoke(new(&quot;joe&quot;, 45, null, null, null)));
537              Assert.IsFalse(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
538              Assert.IsFalse(func.Invoke(new(null, 45, null, null, null)));
539              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
540              {
541                  Column = nameColumn,
542                  Operator = FilterOperator.String.NotContains,
543                  Value = null,
544                  DataGrid = dataGrid.Instance
545              };
546              filterDefinition.DataGrid.FilterCaseSensitivity = DataGridFilterCaseSensitivity.Default;
547              func = filterDefinition.GenerateFilterFunction();
548              Assert.IsTrue(func.Invoke(new(&quot;Does not contain&quot;, 45, null, null, null)));
549              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
550              Assert.IsTrue(func.Invoke(new(null, 45, null, null, null)));
551              #endregion
552              #region FilterOperator.String.Equal
553              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
554              {
555                  Column = nameColumn,
556                  Operator = FilterOperator.String.Equal,
557                  Value = &quot;Joe&quot;,
558                  DataGrid = dataGrid.Instance
559              };
560              func = filterDefinition.GenerateFilterFunction();
561              Assert.IsFalse(func.Invoke(new(&quot;Not Joe&quot;, 45, null, null, null)));
562              Assert.IsFalse(func.Invoke(new(null, 45, null, null, null)));
563              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
564              Assert.IsFalse(func.Invoke(new(&quot;joe&quot;, 45, null, null, null)));
565              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
566              {
567                  Column = nameColumn,
568                  Operator = FilterOperator.String.Equal,
569                  Value = &quot;Joe&quot;,
570                  DataGrid = dataGrid.Instance
571              };
572              filterDefinition.DataGrid.FilterCaseSensitivity = DataGridFilterCaseSensitivity.CaseInsensitive;
573              func = filterDefinition.GenerateFilterFunction();
574              Assert.IsFalse(func.Invoke(new(&quot;Not Joe&quot;, 45, null, null, null)));
575              Assert.IsFalse(func.Invoke(new(null, 45, null, null, null)));
576              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
577              Assert.IsTrue(func.Invoke(new(&quot;joe&quot;, 45, null, null, null)));
578              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
579              {
580                  Column = nameColumn,
581                  Operator = FilterOperator.String.Equal,
582                  Value = null,
583                  DataGrid = dataGrid.Instance
584              };
585              filterDefinition.DataGrid.FilterCaseSensitivity = DataGridFilterCaseSensitivity.Default;
586              func = filterDefinition.GenerateFilterFunction();
587              Assert.IsTrue(func.Invoke(new(&quot;Joe Not&quot;, 45, null, null, null)));
588              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
589              Assert.IsTrue(func.Invoke(new(null, 45, null, null, null)));
590              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
591              {
592                  Column = nameColumn,
593                  Operator = FilterOperator.String.Equal,
594                  Value = null,
595                  DataGrid = dataGrid.Instance
596              };
597              filterDefinition.DataGrid.FilterCaseSensitivity = DataGridFilterCaseSensitivity.CaseInsensitive;
598              func = filterDefinition.GenerateFilterFunction();
599              Assert.IsTrue(func.Invoke(new(&quot;Joe Not&quot;, 45, null, null, null)));
600              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
601              Assert.IsTrue(func.Invoke(new(&quot;joe&quot;, 45, null, null, null)));
602              Assert.IsTrue(func.Invoke(new(null, 45, null, null, null)));
603              #endregion
604              #region FilterOperator.String.NotEqual
605              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
606              {
607                  Column = nameColumn,
608                  Operator = FilterOperator.String.NotEqual,
609                  Value = &quot;Joe&quot;,
610                  DataGrid = dataGrid.Instance
611              };
612              filterDefinition.DataGrid.FilterCaseSensitivity = DataGridFilterCaseSensitivity.Default;
613              func = filterDefinition.GenerateFilterFunction();
614              Assert.IsTrue(func.Invoke(new(&quot;Not Joe&quot;, 45, null, null, null)));
615              Assert.IsFalse(func.Invoke(new(null, 45, null, null, null)));
616              Assert.IsFalse(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
617              Assert.IsTrue(func.Invoke(new(&quot;joe&quot;, 45, null, null, null)));
618              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
619              {
620                  Column = nameColumn,
621                  Operator = FilterOperator.String.NotEqual,
622                  Value = &quot;Joe&quot;,
623                  DataGrid = dataGrid.Instance
624              };
625              filterDefinition.DataGrid.FilterCaseSensitivity = DataGridFilterCaseSensitivity.CaseInsensitive;
626              func = filterDefinition.GenerateFilterFunction();
627              Assert.IsTrue(func.Invoke(new(&quot;Not Joe&quot;, 45, null, null, null)));
628              Assert.IsFalse(func.Invoke(new(null, 45, null, null, null)));
629              Assert.IsFalse(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
630              Assert.IsFalse(func.Invoke(new(&quot;joe&quot;, 45, null, null, null)));
631              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
632              {
633                  Column = nameColumn,
634                  Operator = FilterOperator.String.NotEqual,
635                  Value = null,
636                  DataGrid = dataGrid.Instance
637              };
638              filterDefinition.DataGrid.FilterCaseSensitivity = DataGridFilterCaseSensitivity.Default;
639              func = filterDefinition.GenerateFilterFunction();
640              Assert.IsTrue(func.Invoke(new(&quot;Joe Not&quot;, 45, null, null, null)));
641              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
642              Assert.IsTrue(func.Invoke(new(null, 45, null, null, null)));
643              #endregion
644              #region FilterOperator.String.StartsWith
645              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
646              {
647                  Column = nameColumn,
648                  Operator = FilterOperator.String.StartsWith,
649                  Value = &quot;Joe&quot;,
650                  DataGrid = dataGrid.Instance
651              };
652              func = filterDefinition.GenerateFilterFunction();
653              Assert.IsFalse(func.Invoke(new(&quot;Not Joe&quot;, 45, null, null, null)));
654              Assert.IsFalse(func.Invoke(new(null, 45, null, null, null)));
655              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
656              Assert.IsFalse(func.Invoke(new(&quot;joe&quot;, 45, null, null, null)));
657              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
658              {
659                  Column = nameColumn,
660                  Operator = FilterOperator.String.StartsWith,
661                  Value = &quot;Joe&quot;,
662                  DataGrid = dataGrid.Instance
663              };
664              filterDefinition.DataGrid.FilterCaseSensitivity = DataGridFilterCaseSensitivity.CaseInsensitive;
665              func = filterDefinition.GenerateFilterFunction();
666              Assert.IsFalse(func.Invoke(new(&quot;Not Joe&quot;, 45, null, null, null)));
667              Assert.IsFalse(func.Invoke(new(null, 45, null, null, null)));
668              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
669              Assert.IsTrue(func.Invoke(new(&quot;joe&quot;, 45, null, null, null)));
670              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
671              {
672                  Column = nameColumn,
673                  Operator = FilterOperator.String.StartsWith,
674                  Value = null,
675                  DataGrid = dataGrid.Instance
676              };
677              filterDefinition.DataGrid.FilterCaseSensitivity = DataGridFilterCaseSensitivity.Default;
678              func = filterDefinition.GenerateFilterFunction();
679              Assert.IsTrue(func.Invoke(new(&quot;Not Joe&quot;, 45, null, null, null)));
680              Assert.IsTrue(func.Invoke(new(null, 45, null, null, null)));
681              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
682              #endregion
683              #region FilterOperator.String.EndsWith
684              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
685              {
686                  Column = nameColumn,
687                  Operator = FilterOperator.String.EndsWith,
688                  Value = &quot;Joe&quot;,
689                  DataGrid = dataGrid.Instance
690              };
691              func = filterDefinition.GenerateFilterFunction();
692              Assert.IsFalse(func.Invoke(new(&quot;Joe Not&quot;, 45, null, null, null)));
693              Assert.IsFalse(func.Invoke(new(null, 45, null, null, null)));
694              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
695              Assert.IsFalse(func.Invoke(new(&quot;joe&quot;, 45, null, null, null)));
696              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
697              {
698                  Column = nameColumn,
699                  Operator = FilterOperator.String.EndsWith,
700                  Value = &quot;Joe&quot;,
701                  DataGrid = dataGrid.Instance
702              };
703              filterDefinition.DataGrid.FilterCaseSensitivity = DataGridFilterCaseSensitivity.CaseInsensitive;
704              func = filterDefinition.GenerateFilterFunction();
705              Assert.IsFalse(func.Invoke(new(&quot;Joe Not&quot;, 45, null, null, null)));
706              Assert.IsFalse(func.Invoke(new(null, 45, null, null, null)));
707              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
708              Assert.IsTrue(func.Invoke(new(&quot;joe&quot;, 45, null, null, null)));
709              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
710              {
711                  Column = nameColumn,
712                  Operator = FilterOperator.String.EndsWith,
713                  Value = null,
714                  DataGrid = dataGrid.Instance
715              };
716              filterDefinition.DataGrid.FilterCaseSensitivity = DataGridFilterCaseSensitivity.Default;
717              func = filterDefinition.GenerateFilterFunction();
718              Assert.IsTrue(func.Invoke(new(&quot;Joe Not&quot;, 45, null, null, null)));
719              Assert.IsTrue(func.Invoke(new(null, 45, null, null, null)));
720              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
721              #endregion
722              #region FilterOperator.String.Empty
723              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
724              {
725                  Column = nameColumn,
726                  Operator = FilterOperator.String.Empty,
727                  Value = null,
728                  DataGrid = dataGrid.Instance
729              };
730              func = filterDefinition.GenerateFilterFunction();
731              Assert.IsFalse(func.Invoke(new(&quot;Joe Not&quot;, 45, null, null, null)));
732              Assert.IsTrue(func.Invoke(new(&quot;&quot;, 45, null, null, null)));
733              Assert.IsTrue(func.Invoke(new(null, 45, null, null, null)));
734              Assert.IsTrue(func.Invoke(new(String.Empty, 45, null, null, null)));
735              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
736              {
737                  Column = nameColumn,
738                  Operator = FilterOperator.String.NotEmpty,
739                  Value = null,
740                  DataGrid = dataGrid.Instance
741              };
742              func = filterDefinition.GenerateFilterFunction();
743              Assert.IsTrue(func.Invoke(new(&quot;Joe Not&quot;, 45, null, null, null)));
744              Assert.IsFalse(func.Invoke(new(&quot;&quot;, 45, null, null, null)));
745              Assert.IsFalse(func.Invoke(new(null, 45, null, null, null)));
746              Assert.IsFalse(func.Invoke(new(String.Empty, 45, null, null, null)));
747              #endregion
748              #region FilterOperator.String.NotEmpty
749              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
750              {
751                  Column = nameColumn,
752                  Operator = FilterOperator.String.NotEmpty,
753                  Value = null,
754                  DataGrid = dataGrid.Instance
755              };
756              func = filterDefinition.GenerateFilterFunction();
757              Assert.IsTrue(func.Invoke(new(&quot;Joe Not&quot;, 45, null, null, null)));
758              Assert.IsFalse(func.Invoke(new(&quot;&quot;, 45, null, null, null)));
759              Assert.IsFalse(func.Invoke(new(null, 45, null, null, null)));
760              Assert.IsFalse(func.Invoke(new(String.Empty, 45, null, null, null)));
761              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
762              {
763                  Column = nameColumn,
764                  Operator = FilterOperator.String.NotEmpty,
765                  Value = null,
766                  DataGrid = dataGrid.Instance
767              };
768              func = filterDefinition.GenerateFilterFunction();
769              Assert.IsTrue(func.Invoke(new(&quot;Joe Not&quot;, 45, null, null, null)));
770              Assert.IsFalse(func.Invoke(new(&quot;&quot;, 45, null, null, null)));
771              Assert.IsFalse(func.Invoke(new(null, 45, null, null, null)));
772              Assert.IsFalse(func.Invoke(new(String.Empty, 45, null, null, null)));
773              #endregion
774              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
775              {
776                  Column = nameColumn,
777                  Operator = null,
778                  Value = &quot;Joe&quot;,
779                  DataGrid = dataGrid.Instance
780              };
781              func = filterDefinition.GenerateFilterFunction();
782              Assert.IsTrue(func.Invoke(new(&quot;Joe Not&quot;, 45, null, null, null)));
783              Assert.IsTrue(func.Invoke(new(null, 45, null, null, null)));
784              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
785          }
786          [Test]
787          public async Task FilterDefinitionBoolTest()
788          {
789              var comp = Context.RenderComponent&lt;DataGridFiltersTest&gt;();
790              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridFiltersTest.Model&gt;&gt;();
791              var hiredColumn = dataGrid.Instance.GetColumnByPropertyName(&quot;Hired&quot;);
792              #region FilterOperator.Boolean.Is
793              var filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
794              {
795                  Column = hiredColumn,
796                  Operator = FilterOperator.Boolean.Is,
797                  Value = true
798              };
799              var func = filterDefinition.GenerateFilterFunction();
800              Assert.IsFalse(func.Invoke(new(&quot;Sam&quot;, 45, null, false, null)));
801              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, true, null)));
802              Assert.IsFalse(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
803              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
804              {
805                  Column = hiredColumn,
806                  Operator = FilterOperator.Boolean.Is,
807                  Value = null
808              };
809              func = filterDefinition.GenerateFilterFunction();
810              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 45, null, false, null)));
811              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, true, null)));
812              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
813              #endregion
814              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
815              {
816                  Column = hiredColumn,
817                  Operator = null,
818                  Value = true
819              };
820              func = filterDefinition.GenerateFilterFunction();
821              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 45, null, false, null)));
822              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, true, null)));
823              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
824          }
825          [Test]
826          public async Task FilterDefinitionEnumTest()
827          {
828              var comp = Context.RenderComponent&lt;DataGridFiltersTest&gt;();
829              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridFiltersTest.Model&gt;&gt;();
830              var statusColumn = dataGrid.Instance.GetColumnByPropertyName(&quot;Status&quot;);
831              #region FilterOperator.Enum.Is
832              var filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
833              {
834                  Column = statusColumn,
835                  Operator = FilterOperator.Enum.Is,
836                  Value = Severity.Normal
837              };
838              var func = filterDefinition.GenerateFilterFunction();
839              Assert.IsFalse(func.Invoke(new(&quot;Sam&quot;, 456, Severity.Info, null, null)));
840              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, Severity.Normal, null, null)));
841              Assert.IsFalse(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
842              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
843              {
844                  Column = statusColumn,
845                  Operator = FilterOperator.Enum.Is,
846                  Value = null
847              };
848              func = filterDefinition.GenerateFilterFunction();
849              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 456, Severity.Info, null, null)));
850              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, Severity.Normal, null, null)));
851              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
852              #endregion
853              #region FilterOperator.Enum.IsNot
854              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
855              {
856                  Column = statusColumn,
857                  Operator = FilterOperator.Enum.IsNot,
858                  Value = Severity.Normal
859              };
860              func = filterDefinition.GenerateFilterFunction();
861              Assert.IsFalse(func.Invoke(new(&quot;Sam&quot;, 456, Severity.Normal, null, null)));
862              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, Severity.Info, null, null)));
863              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
864              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
865              {
866                  Column = statusColumn,
867                  Operator = FilterOperator.Enum.IsNot,
868                  Value = null
869              };
870              func = filterDefinition.GenerateFilterFunction();
871              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 456, Severity.Normal, null, null)));
872              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, Severity.Info, null, null)));
873              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
874              #endregion
875              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
876              {
877                  Column = statusColumn,
878                  Operator = null,
879                  Value = Severity.Normal
880              };
881              func = filterDefinition.GenerateFilterFunction();
882              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 456, Severity.Normal, null, null)));
883              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, Severity.Info, null, null)));
884              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
885          }
886          [Test]
887          public async Task FilterDefinitionDateTimeTest()
888          {
889              var comp = Context.RenderComponent&lt;DataGridFiltersTest&gt;();
890              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridFiltersTest.Model&gt;&gt;();
891              var dateColumn = dataGrid.Instance.GetColumnByPropertyName(&quot;HiredOn&quot;);
892              var utcnow = DateTime.UtcNow;
893              #region FilterOperator.DateTime.Is
894              var filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
895              {
896                  Column = dateColumn,
897                  Operator = FilterOperator.DateTime.Is,
898                  Value = utcnow
899              };
900              var func = filterDefinition.GenerateFilterFunction();
901              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
902              Assert.IsFalse(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
903              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
904              {
905                  Column = dateColumn,
906                  Operator = FilterOperator.DateTime.Is,
907                  Value = null
908              };
909              func = filterDefinition.GenerateFilterFunction();
910              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
911              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
912              #endregion
913              #region FilterOperator.DateTime.IsNot
914              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
915              {
916                  Column = dateColumn,
917                  Operator = FilterOperator.DateTime.IsNot,
918                  Value = utcnow
919              };
920              func = filterDefinition.GenerateFilterFunction();
921              Assert.IsFalse(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
922              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
923              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
924              {
925                  Column = dateColumn,
926                  Operator = FilterOperator.DateTime.IsNot,
927                  Value = null
928              };
929              func = filterDefinition.GenerateFilterFunction();
930              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
931              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
932              #endregion
933              #region FilterOperator.DateTime.After
934              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
935              {
936                  Column = dateColumn,
937                  Operator = FilterOperator.DateTime.After,
938                  Value = utcnow
939              };
940              func = filterDefinition.GenerateFilterFunction();
941              Assert.IsFalse(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
942              Assert.IsFalse(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
943              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
944              {
945                  Column = dateColumn,
946                  Operator = FilterOperator.DateTime.After,
947                  Value = null
948              };
949              func = filterDefinition.GenerateFilterFunction();
950              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
951              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
952              #endregion
953              #region FilterOperator.DateTime.OnOrAfter
954              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
955              {
956                  Column = dateColumn,
957                  Operator = FilterOperator.DateTime.OnOrAfter,
958                  Value = utcnow
959              };
960              func = filterDefinition.GenerateFilterFunction();
961              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
962              Assert.IsFalse(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
963              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
964              {
965                  Column = dateColumn,
966                  Operator = FilterOperator.DateTime.OnOrAfter,
967                  Value = null
968              };
969              func = filterDefinition.GenerateFilterFunction();
970              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
971              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
972              #endregion
973              #region FilterOperator.DateTime.Before
974              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
975              {
976                  Column = dateColumn,
977                  Operator = FilterOperator.DateTime.Before,
978                  Value = utcnow
979              };
980              func = filterDefinition.GenerateFilterFunction();
981              Assert.IsFalse(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
982              Assert.IsFalse(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
983              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
984              {
985                  Column = dateColumn,
986                  Operator = FilterOperator.DateTime.Before,
987                  Value = null
988              };
989              func = filterDefinition.GenerateFilterFunction();
990              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
991              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
992              #endregion
993              #region FilterOperator.DateTime.OnOrBefore
994              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
995              {
996                  Column = dateColumn,
997                  Operator = FilterOperator.DateTime.OnOrBefore,
998                  Value = utcnow
999              };
1000              func = filterDefinition.GenerateFilterFunction();
1001              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
1002              Assert.IsFalse(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1003              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1004              {
1005                  Column = dateColumn,
1006                  Operator = FilterOperator.DateTime.OnOrBefore,
1007                  Value = null
1008              };
1009              func = filterDefinition.GenerateFilterFunction();
1010              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
1011              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1012              #endregion
1013              #region FilterOperator.DateTime.Empty
1014              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1015              {
1016                  Column = dateColumn,
1017                  Operator = FilterOperator.DateTime.Empty,
1018                  Value = utcnow
1019              };
1020              func = filterDefinition.GenerateFilterFunction();
1021              Assert.IsFalse(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
1022              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1023              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1024              {
1025                  Column = dateColumn,
1026                  Operator = FilterOperator.DateTime.Empty,
1027                  Value = null
1028              };
1029              func = filterDefinition.GenerateFilterFunction();
1030              Assert.IsFalse(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
1031              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1032              #endregion
1033              #region FilterOperator.DateTime.NotEmpty
1034              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1035              {
1036                  Column = dateColumn,
1037                  Operator = FilterOperator.DateTime.NotEmpty,
1038                  Value = utcnow
1039              };
1040              func = filterDefinition.GenerateFilterFunction();
1041              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
1042              Assert.IsFalse(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1043              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1044              {
1045                  Column = dateColumn,
1046                  Operator = FilterOperator.DateTime.NotEmpty,
1047                  Value = null
1048              };
1049              func = filterDefinition.GenerateFilterFunction();
1050              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
1051              Assert.IsFalse(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1052              #endregion
1053              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1054              {
1055                  Column = dateColumn,
1056                  Operator = null,
1057                  Value = utcnow
1058              };
1059              func = filterDefinition.GenerateFilterFunction();
1060              Assert.IsTrue(func.Invoke(new(&quot;Sam&quot;, 45, null, null, utcnow)));
1061              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1062          }
1063          [Test]
1064          public async Task FilterDefinitionNumberTest()
1065          {
1066              var comp = Context.RenderComponent&lt;DataGridFiltersTest&gt;();
1067              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridFiltersTest.Model&gt;&gt;();
1068              var ageColumn = dataGrid.Instance.GetColumnByPropertyName(&quot;Age&quot;);
1069              #region FilterOperator.Number.Equal
1070              var filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1071              {
1072                  Column = ageColumn,
1073                  Operator = FilterOperator.Number.Equal,
1074                  Value = 45
1075              };
1076              var func = filterDefinition.GenerateFilterFunction();
1077              Assert.IsFalse(func.Invoke(new(&quot;Sam&quot;, 456, null, null, null)));
1078              Assert.IsFalse(func.Invoke(new(&quot;Sam&quot;, null, null, null, null)));
1079              Assert.IsTrue(func.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1080              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1081              {
1082                  Column = ageColumn,
1083                  Operator = FilterOperator.Number.Equal,
1084                  Value = null
1085              };
1086              var func2 = filterDefinition.GenerateFilterFunction();
1087              Assert.IsTrue(func2.Invoke(new(&quot;Sam&quot;, 456, null, null, null)));
1088              Assert.IsTrue(func2.Invoke(new(&quot;Sam&quot;, null, null, null, null)));
1089              Assert.IsTrue(func2.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1090              #endregion
1091              #region FilterOperator.Number.NotEqual
1092              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1093              {
1094                  Column = ageColumn,
1095                  Operator = FilterOperator.Number.NotEqual,
1096                  Value = 45
1097              };
1098              var func3 = filterDefinition.GenerateFilterFunction();
1099              Assert.IsTrue(func3.Invoke(new(&quot;Sam&quot;, 456, null, null, null)));
1100              Assert.IsTrue(func3.Invoke(new(&quot;Sam&quot;, null, null, null, null)));
1101              Assert.IsFalse(func3.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1102              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1103              {
1104                  Column = ageColumn,
1105                  Operator = FilterOperator.Number.NotEqual,
1106                  Value = null
1107              };
1108              var func4 = filterDefinition.GenerateFilterFunction();
1109              Assert.IsTrue(func4.Invoke(new(&quot;Sam&quot;, 456, null, null, null)));
1110              Assert.IsTrue(func4.Invoke(new(&quot;Sam&quot;, null, null, null, null)));
1111              Assert.IsTrue(func4.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1112              #endregion
1113              #region FilterOperator.Number.GreaterThan
1114              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1115              {
1116                  Column = ageColumn,
1117                  Operator = FilterOperator.Number.GreaterThan,
1118                  Value = 45
1119              };
1120              var func5 = filterDefinition.GenerateFilterFunction();
1121              Assert.IsTrue(func5.Invoke(new(&quot;Sam&quot;, 456, null, null, null)));
1122              Assert.IsFalse(func5.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1123              Assert.IsFalse(func5.Invoke(new(&quot;Joe&quot;, null, null, null, null)));
1124              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1125              {
1126                  Column = ageColumn,
1127                  Operator = FilterOperator.Number.GreaterThan,
1128                  Value = null
1129              };
1130              var func6 = filterDefinition.GenerateFilterFunction();
1131              Assert.IsTrue(func6.Invoke(new(&quot;Sam&quot;, 456, null, null, null)));
1132              Assert.IsTrue(func6.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1133              Assert.IsTrue(func6.Invoke(new(&quot;Joe&quot;, null, null, null, null)));
1134              #endregion
1135              #region FilterOperator.Number.LessThan
1136              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1137              {
1138                  Column = ageColumn,
1139                  Operator = FilterOperator.Number.LessThan,
1140                  Value = 45
1141              };
1142              var func7 = filterDefinition.GenerateFilterFunction();
1143              Assert.IsTrue(func7.Invoke(new(&quot;Sam&quot;, 4, null, null, null)));
1144              Assert.IsFalse(func7.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1145              Assert.IsFalse(func7.Invoke(new(&quot;Joe&quot;, null, null, null, null)));
1146              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1147              {
1148                  Column = ageColumn,
1149                  Operator = FilterOperator.Number.LessThan,
1150                  Value = null
1151              };
1152              var func8 = filterDefinition.GenerateFilterFunction();
1153              Assert.IsTrue(func8.Invoke(new(&quot;Sam&quot;, 4, null, null, null)));
1154              Assert.IsTrue(func8.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1155              Assert.IsTrue(func8.Invoke(new(&quot;Joe&quot;, null, null, null, null)));
1156              #endregion
1157              #region FilterOperator.Number.GreaterThanOrEqual
1158              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1159              {
1160                  Column = ageColumn,
1161                  Operator = FilterOperator.Number.GreaterThanOrEqual,
1162                  Value = 45
1163              };
1164              var func9 = filterDefinition.GenerateFilterFunction();
1165              Assert.IsFalse(func9.Invoke(new(&quot;Sam&quot;, 4, null, null, null)));
1166              Assert.IsFalse(func9.Invoke(new(&quot;Sam&quot;, null, null, null, null)));
1167              Assert.IsTrue(func9.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1168              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1169              {
1170                  Column = ageColumn,
1171                  Operator = FilterOperator.Number.GreaterThanOrEqual,
1172                  Value = null
1173              };
1174              var func10 = filterDefinition.GenerateFilterFunction();
1175              Assert.IsTrue(func10.Invoke(new(&quot;Sam&quot;, 4, null, null, null)));
1176              Assert.IsTrue(func10.Invoke(new(&quot;Sam&quot;, null, null, null, null)));
1177              Assert.IsTrue(func10.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1178              #endregion
1179              #region FilterOperator.Number.LessThanOrEqual
1180              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1181              {
1182                  Column = ageColumn,
1183                  Operator = FilterOperator.Number.LessThanOrEqual,
1184                  Value = 45
1185              };
1186              var func11 = filterDefinition.GenerateFilterFunction();
1187              Assert.IsFalse(func11.Invoke(new(&quot;Sam&quot;, 46, null, null, null)));
1188              Assert.IsFalse(func11.Invoke(new(&quot;Sam&quot;, null, null, null, null)));
1189              Assert.IsTrue(func11.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1190              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1191              {
1192                  Column = ageColumn,
1193                  Operator = FilterOperator.Number.LessThanOrEqual,
1194                  Value = null
1195              };
1196              var func12 = filterDefinition.GenerateFilterFunction();
1197              Assert.IsTrue(func12.Invoke(new(&quot;Sam&quot;, 46, null, null, null)));
1198              Assert.IsTrue(func12.Invoke(new(&quot;Sam&quot;, null, null, null, null)));
1199              Assert.IsTrue(func12.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1200              #endregion
1201              filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1202              {
1203                  Column = ageColumn,
1204                  Operator = null,
1205                  Value = 45
1206              };
1207              var func13 = filterDefinition.GenerateFilterFunction();
1208              Assert.IsTrue(func13.Invoke(new(&quot;Sam&quot;, 456, null, null, null)));
1209              Assert.IsTrue(func13.Invoke(new(&quot;Sam&quot;, null, null, null, null)));
1210              Assert.IsTrue(func13.Invoke(new(&quot;Joe&quot;, 45, null, null, null)));
1211          }
1212          [Test]
1213          public async Task FilterDefinitionReplaceWithCustom()
1214          {
1215              var comp = Context.RenderComponent&lt;DataGridFiltersTest&gt;();
1216              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridFiltersTest.Model&gt;&gt;();
1217              dataGrid.Instance.SetDefaultFilterDefinition&lt;CustomFilterDefinitionMock&lt;DataGridFiltersTest.Model&gt;&gt;();
1218              await comp.InvokeAsync(() =&gt; dataGrid.Instance.OpenFilters());
1219              await comp.InvokeAsync(() =&gt; dataGrid.Instance.AddFilter());
1220              dataGrid.FindAll(&quot;.filters-panel .mud-grid-item.d-flex&quot;).Count.Should().Be(1);
1221              var filterDefinitionInstance = dataGrid.Instance.FilterDefinitions.FirstOrDefault();
1222              dataGrid.Instance.FilterDefinitions.Count.Should().Be(1);
1223              filterDefinitionInstance.Should().NotBeNull();
1224              filterDefinitionInstance.Should().BeOfType&lt;CustomFilterDefinitionMock&lt;DataGridFiltersTest.Model&gt;&gt;();
1225          }
1226          [Test]
1227          public async Task DataGridFiltersTest()
1228          {
1229              var comp = Context.RenderComponent&lt;DataGridFiltersTest&gt;();
1230              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridFiltersTest.Model&gt;&gt;();
1231              var filterDefinition = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1232              {
1233                  Column = dataGrid.Instance.GetColumnByPropertyName(&quot;Name&quot;),
1234                  Operator = &quot;contains&quot;,
1235                  Value = &quot;John&quot;
1236              };
1237              var filterDefinition2 = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1238              {
1239                  Column = dataGrid.Instance.GetColumnByPropertyName(&quot;Age&quot;),
1240                  Operator = &quot;&gt;&quot;,
1241                  Value = 30
1242              };
1243              var filterDefinition3 = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1244              {
1245                  Column = dataGrid.Instance.GetColumnByPropertyName(&quot;Status&quot;),
1246                  Operator = &quot;is&quot;,
1247                  Value = Severity.Normal
1248              };
1249              var filterDefinition4 = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1250              {
1251                  Column = dataGrid.Instance.GetColumnByPropertyName(&quot;Hired&quot;),
1252                  Operator = &quot;is&quot;,
1253                  Value = true
1254              };
1255              var filterDefinition5 = new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1256              {
1257                  Column = dataGrid.Instance.GetColumnByPropertyName(&quot;HiredOn&quot;),
1258                  Operator = &quot;is&quot;,
1259                  Value = DateTime.UtcNow.Date
1260              };
1261              await comp.InvokeAsync(() =&gt; dataGrid.Instance.AddFilterAsync(filterDefinition));
1262              await comp.InvokeAsync(() =&gt; dataGrid.Instance.AddFilterAsync(filterDefinition2));
1263              await comp.InvokeAsync(() =&gt; dataGrid.Instance.AddFilterAsync(filterDefinition3));
1264              await comp.InvokeAsync(() =&gt; dataGrid.Instance.AddFilterAsync(filterDefinition4));
1265              await comp.InvokeAsync(() =&gt; dataGrid.Instance.AddFilterAsync(filterDefinition5));
1266              await comp.InvokeAsync(() =&gt; dataGrid.Instance.OpenFilters());
1267              dataGrid.FindAll(&quot;.filters-panel .mud-grid-item.d-flex&quot;).Count.Should().Be(5);
1268              dataGrid.FindAll(&quot;.filters-panel &gt; button&quot;)[0].Click();
1269              dataGrid.FindAll(&quot;.filters-panel .mud-grid-item.d-flex&quot;).Count.Should().Be(6);
1270              await comp.InvokeAsync(() =&gt; dataGrid.Instance.AddFilter());
1271              dataGrid.FindAll(&quot;.filters-panel .mud-grid-item.d-flex&quot;).Count.Should().Be(7);
1272              await comp.InvokeAsync(() =&gt; dataGrid.Instance.AddFilterAsync(new FilterDefinition&lt;DataGridFiltersTest.Model&gt;
1273              {
1274                  Column = dataGrid.Instance.RenderedColumns.FirstOrDefault(x =&gt; x.PropertyName == &quot;Status&quot;)
1275              }));
1276              dataGrid.FindAll(&quot;.filters-panel .mud-grid-item.d-flex&quot;).Count.Should().Be(8);
1277              await comp.InvokeAsync(() =&gt; dataGrid.Instance.ToggleFiltersMenu());
1278              dataGrid.FindAll(&quot;.filters-panel&quot;).Count.Should().Be(0);
1279              var internalFilter = new Filter&lt;DataGridFiltersTest.Model&gt;(dataGrid.Instance, filterDefinition, null);
1280              filterDefinition.Column.dataType.Should().Be(typeof(string));
1281              await comp.InvokeAsync(() =&gt; internalFilter.StringValueChanged(&quot;J&quot;));
1282              filterDefinition.Value.Should().Be(&quot;J&quot;);
1283              internalFilter = new Filter&lt;DataGridFiltersTest.Model&gt;(dataGrid.Instance, filterDefinition2, null);
1284              filterDefinition2.Column.dataType.Should().Be(typeof(int?));
1285              await comp.InvokeAsync(() =&gt; internalFilter.NumberValueChanged(35));
1286              filterDefinition2.Value.Should().Be(35);
1287              internalFilter = new Filter&lt;DataGridFiltersTest.Model&gt;(dataGrid.Instance, filterDefinition3, null);
1288              filterDefinition3.Column.dataType.Should().Be(typeof(Severity?));
1289              await comp.InvokeAsync(() =&gt; internalFilter.NumberValueChanged(35));
1290              filterDefinition3.Value.Should().Be(35);
1291              filterDefinition3.FieldType.IsEnum.Should().Be(true);
1292              internalFilter = new Filter&lt;DataGridFiltersTest.Model&gt;(dataGrid.Instance, filterDefinition4, null);
1293              filterDefinition4.Column.dataType.Should().Be(typeof(bool?));
1294              await comp.InvokeAsync(() =&gt; internalFilter.BoolValueChanged(false));
1295              filterDefinition4.Value.Should().Be(false);
1296              var date = DateTime.UtcNow;
1297              internalFilter = new Filter&lt;DataGridFiltersTest.Model&gt;(dataGrid.Instance, filterDefinition5, null);
1298              filterDefinition5.Column.dataType.Should().Be(typeof(DateTime?));
1299              await comp.InvokeAsync(() =&gt; internalFilter.DateValueChanged(date));
1300              filterDefinition5.Value.Should().Be(date.Date);
1301              await comp.InvokeAsync(() =&gt; internalFilter.TimeValueChanged(date.TimeOfDay));
1302              filterDefinition5.Value.Should().Be(date);
1303          }
1304          [Test]
1305          public async Task DataGridIDictionaryFiltersTest()
1306          {
1307              var comp = Context.RenderComponent&lt;DataGridIDictionaryFiltersTest&gt;();
1308              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;IDictionary&lt;string, object&gt;&gt;&gt;();
1309              var filterDefinition = new FilterDefinition&lt;IDictionary&lt;string, object&gt;&gt;
1310              {
1311                  Id = Guid.NewGuid(),
1312                  Operator = &quot;contains&quot;,
1313                  Value = &quot;John&quot;
1314              };
1315              var filterDefinition2 = new FilterDefinition&lt;IDictionary&lt;string, object&gt;&gt;
1316              {
1317                  Id = Guid.NewGuid(),
1318                  Operator = &quot;&gt;&quot;,
1319                  Value = 30
1320              };
1321              var filterDefinition3 = new FilterDefinition&lt;IDictionary&lt;string, object&gt;&gt;
1322              {
1323                  Id = Guid.NewGuid(),
1324                  Operator = &quot;is&quot;,
1325                  Value = Severity.Normal
1326              };
1327              await comp.InvokeAsync(() =&gt; dataGrid.Instance.FilterDefinitions.Add(filterDefinition));
1328              await comp.InvokeAsync(() =&gt; dataGrid.Instance.FilterDefinitions.Add(filterDefinition2));
1329              await comp.InvokeAsync(() =&gt; dataGrid.Instance.FilterDefinitions.Add(filterDefinition3));
1330              await comp.InvokeAsync(() =&gt; dataGrid.Instance.OpenFilters());
1331              var filters = dataGrid.Instance.FilterDefinitions;
1332              Assert.AreEqual(filterDefinition.Id, filters[0].Id);
1333              Assert.AreEqual(filterDefinition.Operator, filters[0].Operator);
1334              Assert.AreEqual(filterDefinition.Value, filters[0].Value);
1335              filters[0].Value = &quot;Not Joe&quot;;
1336              Assert.AreEqual(filterDefinition.Value, &quot;Not Joe&quot;);
1337              Assert.AreEqual(filterDefinition2.Id, filters[1].Id);
1338              Assert.AreEqual(filterDefinition2.Operator, filters[1].Operator);
1339              Assert.AreEqual(filterDefinition2.Value, filters[1].Value);
1340              filters[1].Value = 45;
1341              Assert.AreEqual(filterDefinition2.Value, 45);
1342              Assert.AreEqual(filterDefinition3.Id, filters[2].Id);
1343              Assert.AreEqual(filterDefinition3.Operator, filters[2].Operator);
1344              Assert.AreEqual(filterDefinition3.Value, filters[2].Value);
1345              filters[2].Value = Severity.Error;
1346              Assert.AreEqual(filterDefinition3.Value, Severity.Error);
1347          }
1348          [Test]
1349          public async Task DataGridColGroupTest()
1350          {
1351              var comp = Context.RenderComponent&lt;DataGridColGroupTest&gt;();
1352              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridColGroupTest.Model&gt;&gt;();
1353              dataGrid.FindAll(&quot;col&quot;).Count.Should().Be(3);
1354          }
1355          [Test]
1356          public async Task DataGridHeaderTemplateTest()
1357          {
1358              var comp = Context.RenderComponent&lt;DataGridHeaderTemplateTest&gt;();
1359              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridHeaderTemplateTest.Model&gt;&gt;();
1360              dataGrid.Find(&quot;thead th&quot;).TextContent.Trim().Should().Be(&quot;test&quot;);
1361              dataGrid.Find(&quot;span.column-header&quot;).FirstChild.NodeName.Should().Be(&quot;svg&quot;);
1362              dataGrid.Find(&quot;span.column-header span&quot;).TextContent.Should().Be(&quot;Name&quot;);
1363          }
1364          [Test]
1365          public async Task DataGridRowDetailOpenTest()
1366          {
1367              var comp = Context.RenderComponent&lt;DataGridHierarchyColumnTest&gt;();
1368              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridHierarchyColumnTest.Model&gt;&gt;();
1369              await comp.InvokeAsync(() =&gt; dataGrid.Instance
1370              .ToggleHierarchyVisibilityAsync(dataGrid.Instance.Items.First()));
1371              dataGrid.FindAll(&quot;td&quot;)[5].TextContent.Trim().Should().StartWith(&quot;uid = Sam|56|Normal|&quot;);
1372          }
1373          [Test]
1374          public async Task DataGridRowDetailClosedTest()
1375          {
1376              var comp = Context.RenderComponent&lt;DataGridHierarchyColumnTest&gt;();
1377              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridHierarchyColumnTest.Model&gt;&gt;();
1378              dataGrid.FindAll(&quot;td&quot;).SingleOrDefault(x =&gt; x.TextContent.Trim().StartsWith(&quot;uid = Sam|56|Normal|&quot;)).Should().BeNull();
1379          }
1380          [Test]
1381          public async Task DataGridRowDetailButtonDisabledTest()
1382          {
1383              var comp = Context.RenderComponent&lt;DataGridHierarchyColumnTest&gt;();
1384              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridHierarchyColumnTest.Model&gt;&gt;();
1385              dataGrid.FindAll(&quot;button&quot;)[10].OuterHtml.Contains(&quot;disabled&quot;)
1386                  .Should().BeTrue();
1387          }
1388          [Test]
1389          public async Task DataGridRowDetailButtonDisabledClickTest()
1390          {
1391              var comp = Context.RenderComponent&lt;DataGridHierarchyColumnTest&gt;();
1392              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridHierarchyColumnTest.Model&gt;&gt;();
1393              await comp.InvokeAsync(() =&gt;
1394              {
1395                  var buttons = dataGrid.FindAll(&quot;button.mud-button-root.mud-icon-button.mud-ripple.mud-ripple-icon&quot;);
1396                  buttons[10].Click();
1397                  dataGrid.FindAll(&quot;td&quot;)
1398                  .SingleOrDefault(x =&gt; x.TextContent.Trim().StartsWith(&quot;uid = Alicia|54|Info|&quot;)).Should().BeNull();
1399              });
1400          }
1401          [Test]
1402          public async Task DataGridChildRowContentTest()
1403          {
1404              var comp = Context.RenderComponent&lt;DataGridChildRowContentTest&gt;();
1405              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridChildRowContentTest.Model&gt;&gt;();
1406              dataGrid.FindAll(&quot;td&quot;).SingleOrDefault(x =&gt; x.TextContent.Trim().StartsWith(&quot;uid = Sam|56|Normal|&quot;)).Should().NotBeNull();
1407          }
1408          [Test]
1409          public async Task DataGridLoadingTest()
1410          {
1411              var comp = Context.RenderComponent&lt;DataGridLoadingTest&gt;();
1412              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridLoadingTest.Model&gt;&gt;();
1413              dataGrid.Find(&quot;th.mud-table-empty-row div&quot;).TextContent.Trim().Should().Be(&quot;Data loading, please wait...&quot;);
1414          }
1415          [Test]
1416          public async Task DataGridNoRecordsContentTest()
1417          {
1418              var comp = Context.RenderComponent&lt;DataGridNoRecordsContentTest&gt;();
1419              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridNoRecordsContentTest.Model&gt;&gt;();
1420              dataGrid.Find(&quot;th.mud-table-empty-row div&quot;).TextContent.Trim().Should().Be(&quot;There are no records to view.&quot;);
1421          }
1422          [Test]
1423          public async Task DataGridFooterTemplateTest()
1424          {
1425              var comp = Context.RenderComponent&lt;DataGridFooterTemplateTest&gt;();
1426              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridFooterTemplateTest.Model&gt;&gt;();
1427              dataGrid.FindAll(&quot;tfoot td&quot;).First().TextContent.Trim().Should().Be(&quot;Names: Sam, Alicia, Ira, John&quot;);
1428              dataGrid.FindAll(&quot;tfoot td&quot;).Last().TextContent.Trim().Should().Be($&quot;Highest: {132000:C0} | 2 Over {100000:C0}&quot;);
1429          }
1430          [Test]
1431          public async Task DataGridServerDataQuickFilterTest()
1432          {
1433              var comp = Context.RenderComponent&lt;DataGridServerDataQuickFilterTest&gt;();
1434              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridServerDataQuickFilterTest.Item&gt;&gt;();
1435              dataGrid.FindAll(&quot;tr&quot;).Count.Should().Be(3);
1436          }
1437          [Test]
1438          public async Task DataGridServerPaginationTest()
1439          {
1440              var comp = Context.RenderComponent&lt;DataGridServerPaginationTest&gt;();
1441              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridServerPaginationTest.Model&gt;&gt;();
1442              dataGrid.Find(&quot;.mud-table-body td&quot;).TextContent.Trim().Should().Be(&quot;Name 0&quot;);
1443              dataGrid.FindAll(&quot;.mud-table-pagination-actions button&quot;)[2].Click();
1444              dataGrid.Find(&quot;.mud-table-body td&quot;).TextContent.Trim().Should().Be(&quot;Name 10&quot;);
1445              await comp.InvokeAsync(async () =&gt; await dataGrid.Instance.ReloadServerData());
1446          }
1447          [Test]
1448          public async Task DataGridCellTemplateTest()
1449          {
1450              var comp = Context.RenderComponent&lt;DataGridCellTemplateTest&gt;();
1451              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridCellTemplateTest.Model&gt;&gt;();
1452              dataGrid.FindAll(&quot;td&quot;)[0].TextContent.Trim().Should().Be(&quot;John&quot;);
1453              dataGrid.FindAll(&quot;td&quot;)[1].TextContent.Trim().Should().Be(&quot;45&quot;);
1454          }
1455          [Test]
1456          public async Task DataGridColumnChooserTest()
1457          {
1458              var comp = Context.RenderComponent&lt;DataGridColumnChooserTest&gt;();
1459              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridColumnChooserTest.Model&gt;&gt;();
1460              var popoverProvider = comp.FindComponent&lt;MudPopoverProvider&gt;();
1461              var popover = dataGrid.FindComponent&lt;MudPopover&gt;();
1462              dataGrid.FindAll(&quot;.mud-table-head th&quot;).Count.Should().Be(2);
1463              await comp.InvokeAsync(() =&gt;
1464              {
1465                  var columnHamburger = dataGrid.FindAll(&quot;button.mud-button-root.mud-icon-button.mud-ripple.mud-ripple-icon.mud-icon-button-size-small&quot;);
1466                  columnHamburger[2].Click();
1467                  var listItems = popoverProvider.FindComponents&lt;MudListItem&gt;();
1468                  listItems.Count.Should().Be(2);
1469                  var clickablePopover = listItems[1].Find(&quot;.mud-list-item&quot;);
1470                  clickablePopover.Click();
1471                  ((IMudStateHasChanged)dataGrid.Instance).StateHasChanged();
1472              });
1473              dataGrid.FindAll(&quot;.mud-table-head th&quot;).Count.Should().Be(1);
1474              await comp.InvokeAsync(() =&gt;
1475              {
1476                  var columnsButton = dataGrid.Find(&quot;button.mud-button-root.mud-icon-button.mud-ripple.mud-ripple-icon.mud-icon-button-size-small&quot;);
1477                  columnsButton.Click();
1478                  popover.Instance.Open.Should().BeTrue(&quot;Should be open once clicked&quot;);
1479                  var listItems = popoverProvider.FindComponents&lt;MudListItem&gt;();
1480                  listItems.Count.Should().Be(1);
1481                  var clickablePopover = listItems[0].Find(&quot;.mud-list-item&quot;);
1482                  clickablePopover.Click();
1483                  var switches = dataGrid.FindComponents&lt;MudSwitch&lt;bool&gt;&gt;();
1484                  switches.Count.Should().Be(2);
1485                  var buttons = dataGrid.FindComponents&lt;MudButton&gt;();
1486                  buttons[1].Find(&quot;button&quot;).Click();
1487                  dataGrid.FindAll(&quot;.mud-table-head th&quot;).Count.Should().Be(2);
1488                  ((IMudStateHasChanged)dataGrid.Instance).StateHasChanged();
1489              });
1490              dataGrid.FindAll(&quot;.mud-table-head th&quot;).Count.Should().Be(2);
1491              await comp.InvokeAsync(() =&gt; dataGrid.Instance.ShowColumnsPanel());
1492              dataGrid.FindAll(&quot;.mud-paper.columns-panel&quot;).Count.Should().Be(1);
1493              await comp.InvokeAsync(() =&gt; dataGrid.Instance.HideColumnsPanel());
1494              dataGrid.FindAll(&quot;.mud-paper.columns-panel&quot;).Count.Should().Be(0);
1495              await comp.InvokeAsync(() =&gt; dataGrid.Instance.HideAllColumnsAsync());
1496              dataGrid.FindAll(&quot;.mud-table-head th&quot;).Count.Should().Be(0);
1497              await comp.InvokeAsync(() =&gt; dataGrid.Instance.ShowAllColumnsAsync());
1498              dataGrid.FindAll(&quot;.mud-table-head th&quot;).Count.Should().Be(2);
1499          }
1500          [Test]
1501          public async Task DataGridColumnHiddenTest()
1502          {
1503              var comp = Context.RenderComponent&lt;DataGridColumnHiddenTest&gt;();
1504              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridColumnHiddenTest.Model&gt;&gt;();
1505              var popoverProvider = comp.FindComponent&lt;MudPopoverProvider&gt;();
1506              var popover = dataGrid.FindComponent&lt;MudPopover&gt;();
1507              popover.Instance.Open.Should().BeFalse(&quot;Should start as closed&quot;);
1508              var columnsButton = dataGrid.Find(&quot;button.mud-button-root.mud-icon-button.mud-ripple.mud-ripple-icon.mud-icon-button-size-small&quot;);
1509              columnsButton.Click();
1510              popover.Instance.Open.Should().BeTrue(&quot;Should be open once clicked&quot;);
1511              var listItems = popoverProvider.FindComponents&lt;MudListItem&gt;();
1512              listItems.Count.Should().Be(1);
1513              var clickablePopover = listItems[0].Find(&quot;.mud-list-item&quot;);
1514              clickablePopover.Click();
1515              var switches = dataGrid.FindComponents&lt;MudSwitch&lt;bool&gt;&gt;();
1516              switches.Count.Should().Be(2);
1517              switches[0].Instance.Checked.Should().BeFalse();
1518              switches[1].Instance.Checked.Should().BeTrue();
1519              var buttons = dataGrid.FindComponents&lt;MudButton&gt;();
1520              buttons[0].Find(&quot;button&quot;).Click();
1521              switches[0].Instance.Checked.Should().BeTrue();
1522              switches[1].Instance.Checked.Should().BeTrue();
1523              dataGrid.FindAll(&quot;.mud-table-head th&quot;).Count.Should().Be(0);
1524              buttons[1].Find(&quot;button&quot;).Click();
1525              switches[0].Instance.Checked.Should().BeFalse();
1526              switches[1].Instance.Checked.Should().BeFalse();
1527              dataGrid.FindAll(&quot;.mud-table-head th&quot;).Count.Should().Be(2);
1528          }
1529          [Test]
1530          public async Task DataGridShowMenuIconTest()
1531          {
1532              var comp = Context.RenderComponent&lt;DataGridShowMenuIconTest&gt;();
1533              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridShowMenuIconTest.Item&gt;&gt;();
1534              dataGrid.FindAll(&quot;.mud-table-toolbar .mud-menu&quot;).Should().BeEmpty();
1535              var parameters = new List&lt;ComponentParameter&gt;();
1536              parameters.Add(ComponentParameter.CreateParameter(nameof(dataGrid.Instance.ShowMenuIcon), true));
1537              dataGrid.SetParametersAndRender(parameters.ToArray());
1538              dataGrid.FindAll(&quot;.mud-table-toolbar .mud-menu&quot;).Should().NotBeEmpty();
1539          }
1540          [Test]
1541          public async Task DataGridColumnPopupFilteringTest()
1542          {
1543              var comp = Context.RenderComponent&lt;DataGridColumnPopupFilteringTest&gt;();
1544              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridColumnPopupFilteringTest.Model&gt;&gt;();
1545              dataGrid.FindAll(&quot;tbody tr&quot;).Count.Should().Be(4);
1546              comp.Find(&quot;.filter-button&quot;).Click();
1547              var input = comp.FindComponent&lt;MudTextField&lt;string&gt;&gt;();
1548              var parameters = new List&lt;ComponentParameter&gt;();
1549              parameters.Add(ComponentParameter.CreateParameter(nameof(input.Instance.Value), &quot;test&quot;));
1550              input.SetParametersAndRender(parameters.ToArray());
1551              comp.Find(&quot;.apply-filter-button&quot;).Click();
1552              await comp.InvokeAsync(() =&gt;
1553              {
1554                  return dataGrid.Instance.AddFilterAsync(new FilterDefinition&lt;DataGridColumnPopupFilteringTest.Model&gt;
1555                  {
1556                      Column = dataGrid.Instance.RenderedColumns.First(),
1557                      Operator = FilterOperator.String.Contains,
1558                      Value = &quot;test&quot;
1559                  });
1560              });
1561              dataGrid.Render();
1562              dataGrid.FindAll(&quot;tbody tr&quot;).Count.Should().Be(0);
1563          }
1564          [Test]
1565          public async Task DataGridFilterableFalseTest()
1566          {
1567              var comp = Context.RenderComponent&lt;DataGridFilterableFalseTest&gt;();
1568              comp.Find(&quot;.filter-button&quot;).Click();
1569              comp.FindAll(&quot;.filters-panel&quot;).Count.Should().Be(1);
1570              comp.FindAll(&quot;div.mud-input-control&quot;)[0].Click();
1571              comp.FindAll(&quot;div.mud-list-item&quot;).Count.Should().Be(3);
1572          }
1573          [Test]
1574          public async Task DataGridColumnPopupCustomFilteringTest()
1575          {
1576              var comp = Context.RenderComponent&lt;DataGridColumnPopupCustomFilteringTest&gt;();
1577              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridColumnPopupCustomFilteringTest.Model&gt;&gt;();
1578              dataGrid.FindAll(&quot;tbody tr&quot;).Count.Should().Be(4);
1579              comp.Instance.FilterHired = true;
1580              await comp.InvokeAsync(async () =&gt;
1581              {
1582                  var filterContext = dataGrid.Instance.RenderedColumns[3].FilterContext;
1583                  await comp.Instance.ApplyFilterAsync(filterContext);
1584              });
1585              dataGrid.FindAll(&quot;tbody tr&quot;).Count.Should().Be(1);
1586          }
1587          [Test]
1588          public async Task DataGridCustomFilteringTest()
1589          {
1590              var comp = Context.RenderComponent&lt;DataGridCustomFilteringTest&gt;();
1591              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridCustomFilteringTest.Model&gt;&gt;();
1592              dataGrid.FindAll(&quot;tbody tr&quot;).Count.Should().Be(4);
1593              await comp.InvokeAsync(() =&gt;
1594              {
1595                  comp.Instance.FilterHiredToggled(true, dataGrid.Instance);
1596              });
1597              dataGrid.Render();
1598              dataGrid.FindAll(&quot;tbody tr&quot;).Count.Should().Be(1);
1599          }
1600          [Test]
1601          public async Task DataGridShowFilterIconTest()
1602          {
1603              var comp = Context.RenderComponent&lt;DataGridCustomFilteringTest&gt;();
1604              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridCustomFilteringTest.Model&gt;&gt;();
1605              var parameters = new List&lt;ComponentParameter&gt;();
1606              parameters.Add(ComponentParameter.CreateParameter(nameof(dataGrid.Instance.Filterable), false));
1607              dataGrid.SetParametersAndRender(parameters.ToArray());
1608              dataGrid.Instance.DropContainerHasChanged();
1609              dataGrid.FindAll(&quot;.filter-button&quot;).Should().BeEmpty();
1610              parameters.Clear();
1611              parameters.Add(ComponentParameter.CreateParameter(nameof(dataGrid.Instance.Filterable), true));
1612              dataGrid.SetParametersAndRender(parameters.ToArray());
1613              dataGrid.Instance.DropContainerHasChanged();
1614              dataGrid.FindAll(&quot;.filter-button&quot;).Should().NotBeEmpty();
1615              parameters.Clear();
1616              parameters.Add(ComponentParameter.CreateParameter(nameof(dataGrid.Instance.ShowFilterIcons), false));
1617              dataGrid.SetParametersAndRender(parameters.ToArray());
1618              dataGrid.Instance.DropContainerHasChanged();
1619              dataGrid.FindAll(&quot;.filter-button&quot;).Should().BeEmpty();
1620          }
1621          [Test]
1622          public async Task DataGridServerDataColumnFilterMenuTest()
1623          {
1624              var comp = Context.RenderComponent&lt;DataGridServerDataColumnFilterMenuTest&gt;();
1625              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridServerDataColumnFilterMenuTest.Model&gt;&gt;();
1626              var callCountText = comp.FindComponent&lt;MudText&gt;();
1627              dataGrid.FindAll(&quot;.mud-table-body .mud-table-row&quot;).Count.Should().Be(4);
1628              callCountText.Markup.Should().Contain(&quot;Server call count: 1&quot;);
1629              comp.Find(&quot;.filter-button&quot;).Click();
1630              var input = comp.FindComponent&lt;MudTextField&lt;string&gt;&gt;();
1631              await comp.InvokeAsync(async () =&gt; await input.Instance.ValueChanged.InvokeAsync(&quot;Sam&quot;));
1632              comp.Find(&quot;.apply-filter-button&quot;).Click();
1633              callCountText.Markup.Should().Contain(&quot;Server call count: 2&quot;);
1634              dataGrid.FindAll(&quot;.mud-table-body .mud-table-row&quot;).Count.Should().Be(1);
1635              comp.Find(&quot;.filter-button&quot;).Click();
1636              comp.Find(&quot;.clear-filter-button&quot;).Click();
1637              callCountText.Markup.Should().Contain(&quot;Server call count: 3&quot;);
1638              dataGrid.FindAll(&quot;.mud-table-body .mud-table-row&quot;).Count.Should().Be(4);
1639          }
1640          [Test]
1641          public async Task DataGridServerDataColumnFilterRowTest()
1642          {
1643              var comp = Context.RenderComponent&lt;DataGridServerDataColumnFilterRowTest&gt;();
1644              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridServerDataColumnFilterRowTest.Model&gt;&gt;();
1645              var callCountText = comp.FindComponent&lt;MudText&gt;();
1646              dataGrid.FindAll(&quot;.mud-table-body .mud-table-row&quot;).Count.Should().Be(4);
1647              callCountText.Markup.Should().Contain(&quot;Server call count: 1&quot;);
1648              var input = comp.FindComponent&lt;MudTextField&lt;string&gt;&gt;();
1649              await comp.InvokeAsync(async () =&gt; await input.Instance.ValueChanged.InvokeAsync(&quot;Sam&quot;));
1650              callCountText.Markup.Should().Contain(&quot;Server call count: 2&quot;);
1651              dataGrid.FindAll(&quot;.mud-table-body .mud-table-row&quot;).Count.Should().Be(1);
1652              comp.Find(&quot;th &gt; div &gt; button.mud-button-root&quot;).Click(); 
1653              callCountText.Markup.Should().Contain(&quot;Server call count: 3&quot;);
1654              dataGrid.Render();
1655              dataGrid.FindAll(&quot;.mud-table-body .mud-table-row&quot;).Count.Should().Be(4);
1656          }
1657          [Test]
1658          public async Task DataGridStickyColumnsTest()
1659          {
1660              var comp = Context.RenderComponent&lt;DataGridStickyColumnsTest&gt;();
1661              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridStickyColumnsTest.Model&gt;&gt;();
1662              dataGrid.Find(&quot;th&quot;).ClassList.Should().Contain(&quot;sticky-left&quot;);
1663              dataGrid.FindAll(&quot;th&quot;).Last().ClassList.Should().Contain(&quot;sticky-right&quot;);
1664          }
1665          [Test]
1666          public async Task DataGridStickyColumnsResizerTest()
1667          {
1668              var comp = Context.RenderComponent&lt;DataGridStickyColumnsResizerTest&gt;();
1669              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridStickyColumnsResizerTest.Model&gt;&gt;();
1670              var header = dataGrid.Find(&quot;.mud-table-toolbar&quot;);
1671              header.GetAttribute(&quot;style&quot;).Should().Contain(&quot;position:sticky&quot;);
1672              header.GetAttribute(&quot;style&quot;).Should().Contain(&quot;left:0px&quot;);
1673              var footer = dataGrid.Find(&quot;.mud-table-pagination&quot;);
1674              footer.GetAttribute(&quot;style&quot;).Should().Contain(&quot;position:sticky&quot;);
1675              footer.GetAttribute(&quot;style&quot;).Should().Contain(&quot;left:0px&quot;);
1676              var body = dataGrid.Find(&quot;.mud-table-container&quot;);
1677              body.GetAttribute(&quot;style&quot;).Should().Contain(&quot;width:max-content&quot;);
1678              body.GetAttribute(&quot;style&quot;).Should().Contain(&quot;overflow:clip&quot;);
1679              dataGrid.Find(&quot;th&quot;).ClassList.Should().Contain(&quot;sticky-left&quot;);
1680              dataGrid.FindAll(&quot;th&quot;).Last().ClassList.Should().Contain(&quot;sticky-right&quot;);
1681          }
1682          [Test]
1683          public async Task DataGridCellContextTest()
1684          {
1685              var comp = Context.RenderComponent&lt;DataGridCellContextTest&gt;();
1686              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridCellContextTest.Model&gt;&gt;();
1687              var item = dataGrid.Instance.Items.FirstOrDefault();
1688              var column = dataGrid.Instance.RenderedColumns.First();
1689              var cell = new Cell&lt;DataGridCellContextTest.Model&gt;(dataGrid.Instance, column, item);
1690              cell._cellContext.IsSelected.Should().Be(false);
1691              await cell._cellContext.Actions.SetSelectedItemAsync(true);
1692              cell._cellContext.IsSelected.Should().Be(true);
1693              await cell._cellContext.Actions.ToggleHierarchyVisibilityForItemAsync();
1694              cell._cellContext.OpenHierarchies.Should().Contain(item);
1695              await cell._cellContext.Actions.ToggleHierarchyVisibilityForItemAsync();
1696              cell._cellContext.OpenHierarchies.Should().NotContain(item);
1697          }
1698          [Test]
1699          public async Task DataGridAggregationTest()
1700          {
1701              var comp = Context.RenderComponent&lt;DataGridAggregationTest&gt;();
1702              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridAggregationTest.Model&gt;&gt;();
1703              dataGrid.FindAll(&quot;td.footer-cell&quot;)[1].TrimmedText().Should().Be(&quot;Average age is 56&quot;);
1704              dataGrid.FindAll(&quot;tfoot td.footer-cell&quot;)[1].TrimmedText().Should().Be(&quot;Average age is 43&quot;);
1705          }
1706          [Test]
1707          public async Task DataGridSequenceContainsNoElementsTest()
1708          {
1709              var comp = Context.RenderComponent&lt;DataGridSequenceContainsNoElementsTest&gt;();
1710              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridSequenceContainsNoElementsTest.Model&gt;&gt;();
1711          }
1712          [Test]
1713          public async Task DataGridObservabilityTest()
1714          {
1715              var comp = Context.RenderComponent&lt;DataGridObservabilityTest&gt;();
1716              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridObservabilityTest.Model&gt;&gt;();
1717              var addButton = comp.Find(&quot;.add-item-btn&quot;);
1718              var removeButton = comp.Find(&quot;.remove-item-btn&quot;);
1719              dataGrid.FindAll(&quot;.mud-table-body .mud-table-row&quot;).Count.Should().Be(8);
1720              addButton.Click();
1721              dataGrid.FindAll(&quot;.mud-table-body .mud-table-row&quot;).Count.Should().Be(9);
1722              removeButton.Click();
1723              dataGrid.FindAll(&quot;.mud-table-body .mud-table-row&quot;).Count.Should().Be(8);
1724          }
1725          public async Task TableFilterGuid()
1726          {
1727              var comp = Context.RenderComponent&lt;DataGridFilterGuid&lt;Guid&gt;&gt;();
1728              var grid = comp.Instance.MudGridRef;
1729              grid.Items.Count().Should().Be(2);
1730              grid.FilteredItems.Count().Should().Be(2);
1731              var guidColumn = grid.RenderedColumns.FirstOrDefault(x =&gt; x.PropertyName == &quot;Id&quot;);
1732              grid.FilterDefinitions.Add(new FilterDefinition&lt;DataGridFilterGuid&lt;Guid&gt;.WeatherForecast&gt;()
1733              {
1734                  Column = guidColumn,
1735                  Operator = &quot;equals&quot;,
1736                  Value = &quot;invalid guid&quot;,
1737              });
1738              grid.FilteredItems.Count().Should().Be(0);
1739              grid.FilterDefinitions.Clear();
1740              grid.FilterDefinitions.Add(new FilterDefinition&lt;DataGridFilterGuid&lt;Guid&gt;.WeatherForecast&gt;()
1741              {
1742                  Column = guidColumn,
1743                  Operator = &quot;equals&quot;,
1744                  Value = comp.Instance.Guid1,
1745              });
1746              grid.FilteredItems.Count().Should().Be(1);
1747              grid.FilteredItems.FirstOrDefault()?.Id.Should().Be(comp.Instance.Guid1);
1748              grid.FilterDefinitions.Clear();
1749              grid.FilterDefinitions.Add(new FilterDefinition&lt;DataGridFilterGuid&lt;Guid&gt;.WeatherForecast&gt;()
1750              {
1751                  Column = guidColumn,
1752                  Operator = &quot;not equals&quot;,
1753                  Value = comp.Instance.Guid1,
1754              });
1755              grid.FilteredItems.Count().Should().Be(1);
1756              grid.FilteredItems.FirstOrDefault()?.Id.Should().Be(comp.Instance.Guid2);
1757          }
1758          [Test]
1759          public async Task TableFilterNullableGuid()
1760          {
1761              var comp = Context.RenderComponent&lt;DataGridFilterGuid&lt;Nullable&lt;Guid&gt;&gt;&gt;();
1762              var grid = comp.Instance.MudGridRef;
1763              grid.Items.Count().Should().Be(2);
1764              grid.FilteredItems.Count().Should().Be(2);
1765              var guidColumn = grid.RenderedColumns.FirstOrDefault(x =&gt; x.PropertyName == &quot;Id&quot;);
1766              grid.FilterDefinitions.Add(new FilterDefinition&lt;DataGridFilterGuid&lt;Nullable&lt;Guid&gt;&gt;.WeatherForecast&gt;()
1767              {
1768                  Column = guidColumn,
1769                  Operator = &quot;equals&quot;,
1770                  Value = Guid.Empty
1771              });
1772              comp.Render();
1773              grid.FilteredItems.Count().Should().Be(0);
1774              grid.FilterDefinitions.Clear();
1775              grid.FilterDefinitions.Add(new FilterDefinition&lt;DataGridFilterGuid&lt;Nullable&lt;Guid&gt;&gt;.WeatherForecast&gt;()
1776              {
1777                  Column = guidColumn,
1778                  Operator = &quot;equals&quot;,
1779                  Value = comp.Instance.Guid1,
1780              });
1781              comp.Render();
1782              grid.FilteredItems.Count().Should().Be(1);
1783              grid.FilteredItems.FirstOrDefault()?.Id.Should().Be(comp.Instance.Guid1);
1784              grid.FilterDefinitions.Clear();
1785              grid.FilterDefinitions.Add(new FilterDefinition&lt;DataGridFilterGuid&lt;Nullable&lt;Guid&gt;&gt;.WeatherForecast&gt;()
1786              {
1787                  Column = guidColumn,
1788                  Operator = &quot;not equals&quot;,
1789                  Value = comp.Instance.Guid1,
1790              });
1791              comp.Render();
1792              grid.FilteredItems.Count().Should().Be(1);
1793              grid.FilteredItems.FirstOrDefault()?.Id.Should().Be(comp.Instance.Guid2);
1794          }
1795          [Test]
1796          public void DataGridCultureColumnSimpleTest()
1797          {
1798              var comp = Context.RenderComponent&lt;DataGridCultureSimpleTest&gt;();
1799              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridCultureSimpleTest.Model&gt;&gt;();
1800              dataGrid.FindAll(&quot;td&quot;)[2].TextContent.Trim().Should().Be(&quot;3.5&quot;);
1801              dataGrid.FindAll(&quot;td&quot;)[3].TextContent.Trim().Should().Be(&quot;5,2&quot;);
1802          }
1803          [Test]
1804          public void DataGridCultureColumnEditableTest()
1805          {
1806              var comp = Context.RenderComponent&lt;DataGridCultureEditableTest&gt;();
1807              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridCultureEditableTest.Model&gt;&gt;();
1808              dataGrid.FindAll(&quot;td input&quot;)[2].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;3.5&quot;);
1809              dataGrid.FindAll(&quot;td input&quot;)[3].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;5,2&quot;);
1810          }
1811          [Test]
1812          public async Task DataGridCultureColumnFilterTest()
1813          {
1814              var comp = Context.RenderComponent&lt;DataGridCultureSimpleTest&gt;();
1815              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridCultureSimpleTest.Model&gt;&gt;();
1816              var amountHeader = dataGrid.FindAll(&quot;th .mud-menu button&quot;)[2];
1817              amountHeader.Click();
1818              var filterAmount = comp.FindAll(&quot;.mud-list-item-clickable&quot;)[1];
1819              filterAmount.Click();
1820              var filterField = comp.Find(&quot;.filters-panel .filter-field .mud-select-input&quot;);
1821              filterField.TextContent.Trim().Should().Be(&quot;Amount&quot;);
1822              var filterInput = comp.FindAll(&quot;.filters-panel input&quot;)[2];
1823              filterInput.Input(new ChangeEventArgs() { Value = &quot;2,2&quot; });
1824              dataGrid.Instance.FilterDefinitions.Count.Should().Be(1);
1825              dataGrid.Instance.FilterDefinitions[0].Value.Should().Be(22.0);
1826              dataGrid.Instance.FilterDefinitions.Clear();
1827              dataGrid.Render();
1828              var totalHeader = dataGrid.FindAll(&quot;th .mud-menu button&quot;)[3];
1829              totalHeader.Click();
1830              var filterTotal = comp.FindAll(&quot;.mud-list-item-clickable&quot;)[1];
1831              filterTotal.Click();
1832              var filterTotalField = comp.Find(&quot;.filters-panel .filter-field .mud-select-input&quot;);
1833              filterTotalField.TextContent.Trim().Should().Be(&quot;Total&quot;);
1834              var filterTotalInput = comp.FindAll(&quot;.filters-panel input&quot;)[2];
1835              filterTotalInput.Input(new ChangeEventArgs() { Value = &quot;2,2&quot; });
1836              dataGrid.Instance.FilterDefinitions.Count.Should().Be(1);
1837              dataGrid.Instance.FilterDefinitions[0].Value.Should().Be(2.2);
1838          }
1839          [Test]
1840          public async Task DataGridCultureColumnFilterHeaderTest()
1841          {
1842              var comp = Context.RenderComponent&lt;DataGridCultureEditableTest&gt;();
1843              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridCultureEditableTest.Model&gt;&gt;();
1844              var filterAmount = dataGrid.FindAll(&quot;th.filter-header-cell input&quot;)[2];
1845              filterAmount.Input(new ChangeEventArgs() { Value = &quot;2,2&quot; });
1846              dataGrid.Instance.FilterDefinitions.Count.Should().Be(1);
1847              dataGrid.Instance.FilterDefinitions[0].Value.Should().Be(22.0);
1848              dataGrid.Instance.FilterDefinitions.Clear();
1849              dataGrid.Render();
1850              var filterTotal = dataGrid.FindAll(&quot;th.filter-header-cell input&quot;)[3];
1851              filterTotal.Input(new ChangeEventArgs() { Value = &quot;2,2&quot; });
1852              dataGrid.Instance.FilterDefinitions.Count.Should().Be(1);
1853              dataGrid.Instance.FilterDefinitions[0].Value.Should().Be(2.2);
1854          }
1855          [Test]
1856          public async Task DataGridCultureColumnOverridesTest()
1857          {
1858              var comp = Context.RenderComponent&lt;DataGridCulturesTest&gt;();
1859              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridCulturesTest.Model&gt;&gt;();
1860              dataGrid.FindAll(&quot;td input&quot;)[2].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;3.5&quot;);
1861              dataGrid.FindAll(&quot;td input&quot;)[3].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;5,2&quot;);
1862              dataGrid.FindAll(&quot;td input&quot;)[4].GetAttribute(&quot;value&quot;).Trim().Should().Be(&quot;2#1&quot;);
1863          }
1864          [Test]
1865          public async Task DataGridSortIndicatorTest()
1866          {
1867              var comp = Context.RenderComponent&lt;DataGridSortableTest&gt;();
1868              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridSortableTest.Item&gt;&gt;();
1869              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SetSortAsync(&quot;Value&quot;, SortDirection.Ascending, x =&gt; x.Value));
1870              dataGrid.Instance.DropContainerHasChanged();
1871              dataGrid.FindAll(&quot;th .sortable-column-header&quot;)[1].TextContent.Trim().Should().Be(&quot;Value&quot;);
1872              dataGrid.FindAll(&quot;th .sort-direction-icon&quot;)[0].ClassList.Contains(&quot;mud-direction-asc&quot;).Should().Be(false);
1873              dataGrid.FindAll(&quot;th .sort-direction-icon&quot;)[1].ClassList.Contains(&quot;mud-direction-asc&quot;).Should().Be(true);
1874              dataGrid.Instance.GetColumnSortDirection(&quot;Name&quot;).Should().Be(SortDirection.None);
1875              dataGrid.Instance.GetColumnSortDirection(&quot;Value&quot;).Should().Be(SortDirection.Ascending);
1876              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SetSortAsync(&quot;Value&quot;, SortDirection.Descending, x =&gt; x.Value));
1877              dataGrid.Instance.DropContainerHasChanged();
1878              dataGrid.Instance.GetColumnSortDirection(&quot;Name&quot;).Should().Be(SortDirection.None);
1879              dataGrid.Instance.GetColumnSortDirection(&quot;Value&quot;).Should().Be(SortDirection.Descending);
1880              dataGrid.FindAll(&quot;th .sort-direction-icon&quot;)[0].ClassList.Contains(&quot;mud-direction-asc&quot;).Should().Be(false);
1881              dataGrid.FindAll(&quot;th .sort-direction-icon&quot;)[1].ClassList.Contains(&quot;mud-direction-desc&quot;).Should().Be(true);
1882              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SetSortAsync(&quot;Name&quot;, SortDirection.Ascending, x =&gt; x.Value));
1883              dataGrid.Instance.DropContainerHasChanged();
1884              dataGrid.Instance.GetColumnSortDirection(&quot;Name&quot;).Should().Be(SortDirection.Ascending);
1885              dataGrid.Instance.GetColumnSortDirection(&quot;Value&quot;).Should().Be(SortDirection.None);
1886              dataGrid.FindAll(&quot;th .sort-direction-icon&quot;)[0].ClassList.Contains(&quot;mud-direction-asc&quot;).Should().Be(true);
1887              dataGrid.FindAll(&quot;th .sort-direction-icon&quot;)[1].ClassList.Contains(&quot;mud-direction-asc&quot;).Should().Be(false);
1888          }
1889          [Test]
1890          public async Task DataGridCustomSortTest()
1891          {
1892              var comp = Context.RenderComponent&lt;DataGridCustomSortableTest&gt;();
1893              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridCustomSortableTest.Item&gt;&gt;();
1894              dataGrid.Instance.SortMode = SortMode.Single;
1895              dataGrid.Instance.SortMode.Should().Be(SortMode.Single);
1896              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SetSortAsync(&quot;Value&quot;, SortDirection.Ascending, x =&gt; x.Value, new MudBlazor.Utilities.NaturalComparer()));
1897              dataGrid.Instance.DropContainerHasChanged();
1898              dataGrid.FindAll(&quot;th .sortable-column-header&quot;)[1].TextContent.Trim().Should().Be(&quot;Value&quot;);
1899              dataGrid.FindAll(&quot;th .sort-direction-icon&quot;)[0].ClassList.Contains(&quot;mud-direction-asc&quot;).Should().Be(false);
1900              dataGrid.FindAll(&quot;th .sort-direction-icon&quot;)[1].ClassList.Contains(&quot;mud-direction-asc&quot;).Should().Be(true);
1901              dataGrid.Instance.GetColumnSortDirection(&quot;Name&quot;).Should().Be(SortDirection.None);
1902              dataGrid.Instance.GetColumnSortDirection(&quot;Value&quot;).Should().Be(SortDirection.Ascending);
1903              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SetSortAsync(&quot;Value&quot;, SortDirection.Descending, x =&gt; x.Value, new MudBlazor.Utilities.NaturalComparer()));
1904              dataGrid.Instance.DropContainerHasChanged();
1905              dataGrid.Instance.GetColumnSortDirection(&quot;Name&quot;).Should().Be(SortDirection.None);
1906              dataGrid.Instance.GetColumnSortDirection(&quot;Value&quot;).Should().Be(SortDirection.Descending);
1907              dataGrid.FindAll(&quot;th .sort-direction-icon&quot;)[0].ClassList.Contains(&quot;mud-direction-asc&quot;).Should().Be(false);
1908              dataGrid.FindAll(&quot;th .sort-direction-icon&quot;)[1].ClassList.Contains(&quot;mud-direction-desc&quot;).Should().Be(true);
1909              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SetSortAsync(&quot;Value&quot;, SortDirection.Ascending, x =&gt; x.Value));
1910              dataGrid.Instance.DropContainerHasChanged();
1911              dataGrid.FindAll(&quot;th .sortable-column-header&quot;)[1].TextContent.Trim().Should().Be(&quot;Value&quot;);
1912              dataGrid.FindAll(&quot;th .sort-direction-icon&quot;)[0].ClassList.Contains(&quot;mud-direction-asc&quot;).Should().Be(false);
1913              dataGrid.FindAll(&quot;th .sort-direction-icon&quot;)[1].ClassList.Contains(&quot;mud-direction-asc&quot;).Should().Be(true);
1914              dataGrid.Instance.GetColumnSortDirection(&quot;Name&quot;).Should().Be(SortDirection.None);
1915              dataGrid.Instance.GetColumnSortDirection(&quot;Value&quot;).Should().Be(SortDirection.Ascending);
1916              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SetSortAsync(&quot;Name&quot;, SortDirection.Ascending, x =&gt; x.Name, new MudBlazor.Utilities.NaturalComparer()));
1917              dataGrid.Instance.DropContainerHasChanged();
1918              dataGrid.Instance.GetColumnSortDirection(&quot;Name&quot;).Should().Be(SortDirection.Ascending);
1919              dataGrid.Instance.GetColumnSortDirection(&quot;Value&quot;).Should().Be(SortDirection.None);
1920              dataGrid.FindAll(&quot;th .sort-direction-icon&quot;)[0].ClassList.Contains(&quot;mud-direction-asc&quot;).Should().Be(true);
1921              dataGrid.FindAll(&quot;th .sort-direction-icon&quot;)[1].ClassList.Contains(&quot;mud-direction-asc&quot;).Should().Be(false);
1922              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SetSortAsync(&quot;Name&quot;, SortDirection.Descending, x =&gt; x.Name, new MudBlazor.Utilities.NaturalComparer()));
1923              dataGrid.Instance.DropContainerHasChanged();
1924              dataGrid.Instance.GetColumnSortDirection(&quot;Name&quot;).Should().Be(SortDirection.Descending);
1925              dataGrid.Instance.GetColumnSortDirection(&quot;Value&quot;).Should().Be(SortDirection.None);
1926              dataGrid.FindAll(&quot;th .sort-direction-icon&quot;)[0].ClassList.Contains(&quot;mud-direction-desc&quot;).Should().Be(true);
1927              dataGrid.FindAll(&quot;th .sort-direction-icon&quot;)[1].ClassList.Contains(&quot;mud-direction-asc&quot;).Should().Be(false);
1928              dataGrid.Instance.SortMode = SortMode.Multiple;
1929              dataGrid.Instance.SortMode.Should().Be(SortMode.Multiple);
1930              var column = dataGrid.FindComponent&lt;Column&lt;DataGridCustomSortableTest.Item&gt;&gt;();
1931              await comp.InvokeAsync(() =&gt; column.Instance.Comparer = new MudBlazor.Utilities.NaturalComparer());
1932              await comp.InvokeAsync(() =&gt; dataGrid.Instance.RemoveSortAsync(&quot;Name&quot;));
1933              dataGrid.Instance.GetColumnSortDirection(&quot;Name&quot;).Should().Be(SortDirection.None);
1934              dataGrid.Find(&quot;.column-options button&quot;).Click();
1935              var cells = dataGrid.FindAll(&quot;td&quot;);
1936              cells[0].TextContent.Should().Be(&quot;0&quot;);
1937              cells[3].TextContent.Should().Be(&quot;1&quot;);
1938              cells[6].TextContent.Should().Be(&quot;1_2&quot;);
1939              cells[9].TextContent.Should().Be(&quot;1_10&quot;);
1940              cells[12].TextContent.Should().Be(&quot;1_11&quot;);
1941              cells[15].TextContent.Should().Be(&quot;2&quot;);
1942              cells[18].TextContent.Should().Be(&quot;10&quot;);
1943              var headerCell = dataGrid.FindComponents&lt;HeaderCell&lt;DataGridCustomSortableTest.Item&gt;&gt;()[1];
1944              await comp.InvokeAsync(() =&gt; headerCell.Instance.SortChangedAsync(new MouseEventArgs() { CtrlKey = true, Button = 0 }));
1945              headerCell.Instance.SortDirection.Should().Be(SortDirection.Ascending);
1946              await comp.InvokeAsync(() =&gt; headerCell.Instance.SortChangedAsync(new MouseEventArgs() { CtrlKey = true, Button = 0 }));
1947              headerCell.Instance.SortDirection.Should().Be(SortDirection.Descending);
1948              headerCell = dataGrid.FindComponents&lt;HeaderCell&lt;DataGridCustomSortableTest.Item&gt;&gt;()[0];
1949              await comp.InvokeAsync(() =&gt; headerCell.Instance.SortChangedAsync(new MouseEventArgs() { AltKey = true, Button = 0 }));
1950              headerCell.Instance.SortDirection.Should().Be(SortDirection.None);
1951          }
1952          [Test]
1953          public async Task DataGridGroupExpandedTest()
1954          {
1955              var comp = Context.RenderComponent&lt;DataGridGroupExpandedTest&gt;();
1956              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridGroupExpandedTest.Fruit&gt;&gt;();
1957              comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(7);
1958              comp.Instance.CollapseAllGroups();
1959              dataGrid.Render();
1960              comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(2);
1961              await comp.InvokeAsync(() =&gt;
1962                  comp.Instance.AddFruit());
1963              dataGrid.Render();
1964              comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(3);
1965          }
1966          [Test]
1967          public async Task DataGridGroupExpandedAsyncTest()
1968          {
1969              var comp = Context.RenderComponent&lt;DataGridGroupExpandedAsyncTest&gt;();
1970              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridGroupExpandedAsyncTest.Fruit&gt;&gt;();
1971              comp.WaitForAssertion(() =&gt; comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(7));
1972              comp.Instance.CollapseAllGroups();
1973              dataGrid.Render();
1974              comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(2);
1975              await comp.InvokeAsync(() =&gt;
1976                  comp.Instance.AddFruit());
1977              dataGrid.Render();
1978              comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(3);
1979          }
1980          [Test]
1981          public async Task DataGridGroupExpandedServerDataTest()
1982          {
1983              var comp = Context.RenderComponent&lt;DataGridGroupExpandedServerDataTest&gt;();
1984              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridGroupExpandedServerDataTest.Fruit&gt;&gt;();
1985              comp.WaitForAssertion(() =&gt; comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(7));
1986              comp.Instance.CollapseAllGroups();
1987              dataGrid.Render();
1988              comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(2);
1989              await comp.InvokeAsync(() =&gt;
1990                  comp.Instance.AddFruit());
1991              dataGrid.Render();
1992              comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(3);
1993          }
1994          [Test]
1995          public async Task DataGridGroupCollapseAllTest()
1996          {
1997              var comp = Context.RenderComponent&lt;DataGridGroupCollapseAllTest&gt;();
1998              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridGroupCollapseAllTest.TestObject&gt;&gt;();
1999              comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(3);
2000              comp.Instance.ExpandAllGroups();
2001              comp.Render();
2002              comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(15);
2003              comp.Instance.CollapseAllGroups();
2004              comp.Render();
2005              comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(3);
2006              comp.Instance.RefreshList();
2007              comp.Render();
2008              comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(3);
2009          }
2010          [Test]
2011          public async Task DataGridGroupExpandAllCollapseAllTest()
2012          {
2013              var comp = Context.RenderComponent&lt;DataGridGroupExpandAllCollapseAllTest&gt;();
2014              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridGroupExpandAllCollapseAllTest.Element&gt;&gt;();
2015              comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(2);
2016              comp.Instance.ExpandAllGroups();
2017              comp.Render();
2018              comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(14);
2019              comp.Instance.NavigateToPage(1);
2020              comp.Render();
2021              comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(18);
2022              comp.Instance.CollapseAllGroups();
2023              comp.Instance.NavigateToPage(0);
2024              comp.Render();
2025              comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(2);
2026              comp.Instance.RefreshList();
2027              comp.Render();
2028              comp.FindAll(&quot;tbody .mud-table-row&quot;).Count.Should().Be(2);
2029          }
2030          [Test]
2031          public async Task DataGridPropertyColumnFormatTest()
2032          {
2033              var comp = Context.RenderComponent&lt;DataGridFormatTest&gt;();
2034              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridFormatTest.Employee&gt;&gt;();
2035              comp.FindAll(&quot;tbody.mud-table-body td&quot;)[3].TextContent.Should().Be(&quot;$87,000.00&quot;);
2036              var column = (PropertyColumn&lt;DataGridFormatTest.Employee, int&gt;)dataGrid.Instance.GetColumnByPropertyName(&quot;Salary&quot;);
2037              await comp.InvokeAsync(() =&gt; column.Format = &quot;C0&quot;);
2038              comp.Find(&quot;.mud-switch-input&quot;).Change(new ChangeEventArgs { Value = true });
2039              comp.FindAll(&quot;tbody.mud-table-body td&quot;)[3].TextContent.Should().Be(&quot;$87,000&quot;);
2040          }
2041          [Test]
2042          public async Task DataGridFilteredItemsCacheTest()
2043          {
2044              var comp = Context.RenderComponent&lt;DataGridSortableTest&gt;();
2045              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridSortableTest.Item&gt;&gt;();
2046              var initialFilterCount = dataGrid.Instance.FilteringRunCount;
2047              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SetSortAsync(&quot;Name&quot;, SortDirection.Ascending, x =&gt; { return x.Name; }));
2048              dataGrid.Instance.FilteringRunCount.Should().Be(initialFilterCount + 1);
2049              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SetSortAsync(&quot;Name&quot;, SortDirection.Descending, x =&gt; { return x.Name; }));
2050              dataGrid.Instance.FilteringRunCount.Should().Be(initialFilterCount + 2);
2051              await comp.InvokeAsync(() =&gt; dataGrid.Instance.RemoveSortAsync(&quot;Name&quot;));
2052              dataGrid.Instance.FilteringRunCount.Should().Be(initialFilterCount + 3);
2053              var column = dataGrid.FindComponent&lt;Column&lt;DataGridSortableTest.Item&gt;&gt;();
2054              await comp.InvokeAsync(() =&gt; column.Instance.SortBy = x =&gt; { return x.Name; });
2055              dataGrid.Render();
2056              dataGrid.Instance.FilteringRunCount.Should().Be(initialFilterCount + 4);
2057              dataGrid.Find(&quot;.column-options button&quot;).Click();
2058              dataGrid.Instance.FilteringRunCount.Should().Be(initialFilterCount + 5);
2059              var headerCell = dataGrid.FindComponent&lt;HeaderCell&lt;DataGridSortableTest.Item&gt;&gt;();
2060              await comp.InvokeAsync(() =&gt; headerCell.Instance.SortChangedAsync(new Microsoft.AspNetCore.Components.Web.MouseEventArgs()));
2061              dataGrid.Instance.FilteringRunCount.Should().Be(initialFilterCount + 6);
2062              await comp.InvokeAsync(() =&gt; headerCell.Instance.RemoveSortAsync());
2063              dataGrid.Instance.FilteringRunCount.Should().Be(initialFilterCount + 7);
2064              await comp.InvokeAsync(() =&gt; headerCell.Instance.AddFilterAsync());
2065              dataGrid.Instance.FilteringRunCount.Should().Be(initialFilterCount + 8);
2066              await comp.InvokeAsync(() =&gt; headerCell.Instance.OpenFilters());
2067              dataGrid.Instance.FilteringRunCount.Should().Be(initialFilterCount + 9);
2068              await comp.InvokeAsync(() =&gt; dataGrid.Instance.SortMode = SortMode.None);
2069              dataGrid.Render();
2070              dataGrid.Instance.FilteringRunCount.Should().Be(initialFilterCount + 10);
2071              dataGrid.Instance.DropContainerHasChanged();
2072              dataGrid.FindAll(&quot;.column-header .sortable-column-header&quot;).Should().BeEmpty();
2073          }
2074          [Test]
2075          public async Task DataGridDragAndDropTest()
2076          {
2077              var comp = Context.RenderComponent&lt;DataGridDragAndDropTest&gt;();
2078              var dataGrid = comp.FindComponent&lt;MudDataGrid&lt;DataGridDragAndDropTest.Model&gt;&gt;();
2079              dataGrid.Instance.DropContainerHasChanged();
2080              var headerValues = dataGrid.FindAll(&quot;.sortable-column-header&quot;);
2081              headerValues.Count.Should().Be(5, because: &quot;5 columns in DataGridFiltersTest&quot;);
2082              headerValues[0].InnerHtml.Should().Be(&quot;Name&quot;);
2083              headerValues[1].InnerHtml.Should().Be(&quot;Age&quot;);
2084              headerValues[2].InnerHtml.Should().Be(&quot;Status&quot;);
2085              headerValues[3].InnerHtml.Should().Be(&quot;Hired&quot;);
2086              headerValues[4].InnerHtml.Should().Be(&quot;HiredOn&quot;);
2087              var container = dataGrid.Find(&quot;.mud-drop-container&quot;);
2088              container.Children.Should().HaveCount(1);
2089              var zone = dataGrid.FindAll(&quot;.mud-drop-zone&quot;);
2090              zone.Count.Should().Be(5, because: &quot;5 columns in DataGridFiltersTest&quot;);
2091              var firstDropZone = zone[1];
2092              var firstDropItem = firstDropZone.Children[0];
<span onclick='openModal()' class='match'>2093              var secondDropZone = zone[2];
2094              var secondDropItem = secondDropZone.Children[0];
2095              await firstDropItem.DragStartAsync(new DragEventArgs());
</span>2096              await secondDropItem.DropAsync(new DragEventArgs());
2097              var newHeaderValues = dataGrid.FindAll(&quot;.sortable-column-header&quot;);
2098              newHeaderValues.Count.Should().Be(5, because: &quot;5 columns in DataGridFiltersTest&quot;);
2099              newHeaderValues[0].InnerHtml.Should().Be(&quot;Name&quot;);
2100              newHeaderValues[1].InnerHtml.Should().Be(&quot;Status&quot;);
2101              newHeaderValues[2].InnerHtml.Should().Be(&quot;Age&quot;);
2102              newHeaderValues[3].InnerHtml.Should().Be(&quot;Hired&quot;);
2103              newHeaderValues[4].InnerHtml.Should().Be(&quot;HiredOn&quot;);
2104          }
2105      }
2106  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from MudBlazor-MDEwOlJlcG9zaXRvcnkyODg0Mjg2NzY=-flat-DataGridTests.cs</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from MudBlazor-MDEwOlJlcG9zaXRvcnkyODg0Mjg2NzY=-flat-DataGridTests.cs</div>
                </div>
                <div class="column column_space"><pre><code>2091              var firstDropZone = zone[1];
2092              var firstDropItem = firstDropZone.Children[0];
2093              var secondDropZone = zone[2];
</pre></code></div>
                <div class="column column_space"><pre><code>2093              var secondDropZone = zone[2];
2094              var secondDropItem = secondDropZone.Children[0];
2095              await firstDropItem.DragStartAsync(new DragEventArgs());
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    