
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Tokens: 460, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>dotween-MDEwOlJlcG9zaXRvcnkzMjQ3NTE2Mg==-flat-TweenEnginesComparisonInternal.cs</h3>
            <pre><code>1  using DG.Tweening;
2  using Holoville.HOTween;
3  using System;
4  using System.Collections;
5  using UnityEngine;
6  public class TweenEnginesComparisonInternal : BrainBase
7  {
8  	enum State {
9  		Menu,
10  		NoEmitWITween,
11  		ConfirmGoKit,
12  		ConfirmITween,
13  		CreatingObjects,
14  		TweensSetup,
15  		Running
16  	}
17  	enum Engine {
18  		DOTween,
19  		HOTween,
20  		LeanTween,
21  		GoKit,
22  		iTween
23  	}
24  	enum TestType {
25  		Transforms,
26  		Floats
27  	}
28  	enum TestSetup {
29  		Emit,
30  		Loop,
31  		YoyoLoop
32  	}
33  	enum Easing {
34  		Linear,
35  		InOutQuad
36  	}
37  	public bool doTweenSafeMode;
38  	public GameObject prefab;
39  	public float someVal; 
40  	State state = State.Menu;
41  	Engine engine = Engine.DOTween;
42  	TestType testType = TestType.Transforms;
43  	TestSetup testSetup = TestSetup.YoyoLoop;
44  	Easing easing = Easing.Linear;
45  	int numTweens;
46  	float duration;
47  	bool disableRenderers;
48  	bool positionTween = true;
49  	bool rotationTween, scaleTween;
50  	Transform container;
51  	GameObject[] testObjsGos; 
52  	Transform[] testObjsTrans;
53  	TestObjectData[] testObjsData;
54  	Vector3[] rndPositions;
55  	Vector3[] rndRotations;
56  	Vector3[] rndStartupPos;
57  	readonly Vector3 rndScale = new Vector3(6,6,6);
58  	float[] rndFloats;
59  	float totCreationTime;
60  	bool guiInitialized;
61  	GUIStyle labelStyle;
62  	const int vspace = 10;
<span onclick='openModal()' class='match'>63  	string[] engineList, testTypeList, testSetupList, easingList;
64  	string[] durationList = new[] {
65  		"0.25", "0.5", "1", "2", "4", "8", "16", "32"
66  	};
67  	string[] numTweensList = new[] {
68  		"1", "2", "50", "100", "500", "1000", "2000", "4000", "8000", "16000", "32000"
69  	};
70  	int durationSelId = 2, numTweensSelId = 4;
71  	override protected void Awake()
72  	{
73  		base.Awake();
74  		DOTween.Init(true, false);
75  		DOTween.useSafeMode = doTweenSafeMode;
76  		HOTween.Init(true, false, false);
77  		LeanTween.init(Convert.ToInt32(numTweensList[numTweensList.Length - 1]) + 1);
78  	}
79  	void Start()
80  	{
81  		engineList = Enum.GetNames(typeof(Engine));
82  		testTypeList = Enum.GetNames(typeof(TestType));
83  		testSetupList = Enum.GetNames(typeof(TestSetup));
84  		easingList = Enum.GetNames(typeof(Easing));
85  		container = new GameObject("Test Objects Container").transform;
86  	}
87  	IEnumerator StartRun()
88  	{
89  		state = State.CreatingObjects;
90  		yield return null;
91  		duration = Convert.ToSingle(durationList[durationSelId]);
92  		rndStartupPos = new Vector3[numTweens];
93  		rndPositions = new Vector3[numTweens];
94  		rndRotations = new Vector3[numTweens];
95  		rndFloats = new float[numTweens];
96  		for (int i = 0; i < numTweens; ++i) {
97  			rndStartupPos[i] = RandomVector3(50, 50, 20);
98  			rndPositions[i] = RandomVector3(50, 50, 20);
99  			rndRotations[i] = RandomVector3(180, 180, 180);
100  			rndFloats[i] = UnityEngine.Random.Range(-1000f, 1000f);
101  		}
102  		if (testType == TestType.Transforms) {
103  			testObjsGos = new GameObject[numTweens];
104  			testObjsTrans = new Transform[numTweens];
105  		} else {
106  			testObjsData = new TestObjectData[numTweens];
107  		}
108  		for (int i = 0; i < numTweens; ++i) {
109  			if (testType == TestType.Transforms) {
110  				GameObject go = (GameObject)Instantiate(prefab);
111  				go.SetActive(true);
112  				Transform t = go.transform;
113  				if (testSetup != TestSetup.Emit) t.position = rndStartupPos[i];
114  				t.parent = container;
115  				testObjsGos[i] = go;
116  				testObjsTrans[i] = t;
117  				if (disableRenderers || testType == TestType.Floats) go.GetComponent<Renderer>().enabled = false;
</span>118  			} else testObjsData[i] = new TestObjectData();
119  		}
120  		if (engine == Engine.DOTween) {
121  			int minCapacityToBeFair = Convert.ToInt32(numTweensList[numTweensList.Length - 1]);
122  			int capacityX1 = Convert.ToInt32(numTweensList[numTweensSelId]);
123  			int neededCapacity = 0;
124  			int capacity = minCapacityToBeFair;
125  			if (testType == TestType.Transforms && positionTween) neededCapacity += capacityX1;
126  			if (testType == TestType.Transforms && rotationTween) neededCapacity += capacityX1;
127  			if (testType == TestType.Transforms && scaleTween) neededCapacity += capacityX1;
128  			if (minCapacityToBeFair < neededCapacity) capacity = neededCapacity;
129  			DOTween.SetTweensCapacity(capacity, 0);
130  		}
131  		yield return null;
132  		state = State.TweensSetup;
133  		yield return null;
134  		totCreationTime = Time.realtimeSinceStartup;
135  		SetupTweens();
136  		totCreationTime = Time.realtimeSinceStartup - totCreationTime;
137  		yield return null;
138  		state = State.Running;
139  		fpsGadget.ResetFps();
140  	}
141  	void StopRun()
142  	{
143  		this.StopAllCoroutines();
144  		state = State.Menu;
145  		if (engine == Engine.DOTween) DOTween.Clear();
146  		else if (engine == Engine.HOTween) HOTween.Kill();
147  		else if (engine == Engine.LeanTween) LeanTween.reset();
148  		else if (engine == Engine.GoKit) KillAllGoTweens();
149  		else if (engine == Engine.iTween) iTween.Stop();
150  		if (testObjsGos != null) foreach (GameObject go in testObjsGos) Destroy(go);
151  		testObjsGos = null;
152  		testObjsTrans = null;
153  		testObjsData = null;
154  		rndPositions = null;
155  		rndRotations = null;
156  	}
157  	void Reset(bool complete = true)
158  	{
159  		if (complete) {
160  			if (engine == Engine.DOTween) DOTween.Clear();
161  			else if (engine == Engine.HOTween) HOTween.Kill();
162  			else if (engine == Engine.LeanTween) LeanTween.reset();
163  			else if (engine == Engine.GoKit) KillAllGoTweens();
164  			else if (engine == Engine.iTween) iTween.Stop();
165  		}
166  		if (testObjsTrans != null) {
167  			for (int i = 0; i < testObjsTrans.Length; ++i) {
168  				Transform t = testObjsTrans[i];
169  				t.position = rndStartupPos[i];
170  				t.localScale = Vector3.one;
171  				t.rotation = Quaternion.identity;
172  			}
173  		}
174  	}
175  	void SetupTweens()
176  	{
177  		DG.Tweening.Ease dotweenEase = easing == Easing.Linear ? DG.Tweening.Ease.Linear : DG.Tweening.Ease.InOutQuad;
178  		Holoville.HOTween.EaseType hotweenEase = easing == Easing.Linear ? Holoville.HOTween.EaseType.Linear : Holoville.HOTween.EaseType.EaseInOutQuad;
179  		LeanTweenType leanEase = easing == Easing.Linear ? LeanTweenType.linear : LeanTweenType.easeInOutQuad;
180  		GoEaseType goEase = easing == Easing.Linear ? GoEaseType.Linear : GoEaseType.QuadInOut;
181  		iTween.EaseType iTweenEase = easing == Easing.Linear ? iTween.EaseType.linear : iTween.EaseType.easeInOutQuad;
182  		int loops = testSetup == TestSetup.Emit ? 1 : -1;
183  		DG.Tweening.LoopType dotweenLoopType = testSetup == TestSetup.YoyoLoop ? DG.Tweening.LoopType.Yoyo : DG.Tweening.LoopType.Restart;
184  		Holoville.HOTween.LoopType hotweenLoopType = testSetup == TestSetup.YoyoLoop ? Holoville.HOTween.LoopType.Yoyo : Holoville.HOTween.LoopType.Restart;
185  		LeanTweenType leanLoopType = testSetup == TestSetup.YoyoLoop ? LeanTweenType.pingPong : LeanTweenType.clamp;
186  		GoLoopType goLoopType = testSetup == TestSetup.YoyoLoop ? GoLoopType.PingPong : GoLoopType.RestartFromBeginning;
187  		iTween.LoopType iTweenLoopType = loops != -1 ? iTween.LoopType.none : testSetup == TestSetup.YoyoLoop ? iTween.LoopType.pingPong : iTween.LoopType.loop;
188  		switch (testType) {
189  		case TestType.Floats:
190  			for (int i = 0; i < numTweens; ++i) {
191  				TestObjectData data = testObjsData[i];
192  				switch (engine) {
193  				case Engine.HOTween:
194  					HOTween.To(data, duration, new Holoville.HOTween.TweenParms()
195  						.Prop("floatValue", rndFloats[i])
196  						.Ease(hotweenEase)
197  						.Loops(loops, hotweenLoopType)
198  					);
199  					break;
200  				case Engine.LeanTween:
201  					LeanTween.value(this.gameObject, x=> data.floatValue = x, data.floatValue, rndFloats[i], duration).setEase(leanEase).setRepeat(loops).setLoopType(leanLoopType);
202  					break;
203  				case Engine.GoKit:
204  					Go.to(data, duration, new GoTweenConfig()
205  						.floatProp("floatValueProperty", rndFloats[i])
206  						.setEaseType(goEase)
207  						.setIterations(loops, goLoopType)
208  					);
209  					break;
210  				case Engine.iTween:
211  					Hashtable hs = new Hashtable();
212  					hs.Add("from", data.floatValue);
213  					hs.Add("to", rndFloats[i]);
214  					hs.Add("time", duration);
215  					hs.Add("onupdate", "UpdateiTweenFloat");
216  					hs.Add("looptype", iTweenLoopType);
217  					hs.Add("easetype", iTweenEase);
218  					iTween.ValueTo(this.gameObject, hs);
219  					break;
220  				default:
221  					TestObjectData dataCopy = data;
222  					DOTween.To(()=> dataCopy.floatValue, x=> dataCopy.floatValue = x, rndFloats[i], duration).SetEase(dotweenEase).SetLoops(loops, dotweenLoopType);
223  					break;
224  				}
225  			}
226  			break;
227  		default:
228  			for (int i = 0; i < numTweens; ++i) {
229  				float twDuration = testSetup == TestSetup.Emit ? UnityEngine.Random.Range(0.25f, 1f) : duration;
230  				Transform t = testObjsTrans[i];
231  				GameObject go = testObjsGos[i]; 
232  				switch (engine) {
233  				case Engine.HOTween:
234  					Holoville.HOTween.TweenParms tp = new Holoville.HOTween.TweenParms()
235  						.Ease(hotweenEase)
236  						.Loops(loops, hotweenLoopType);
237  					if (positionTween) {
238  						Vector3 toPos = rndPositions[i];
239  						tp.Prop("position", toPos);
240  						if (testSetup == TestSetup.Emit) tp.OnComplete(()=> EmitHOTweenPositionFor(t, toPos, twDuration, hotweenEase));
241  					}
242  					if (rotationTween) {
243  						Vector3 toRot = rndRotations[i];
244  						tp.Prop("rotation", toRot);
245  						if (testSetup == TestSetup.Emit) tp.OnComplete(()=> EmitHOTweenRotationFor(t, toRot, twDuration, hotweenEase));
246  					}
247  					if (scaleTween) {
248  						tp.Prop("localScale", rndScale);
249  						if (testSetup == TestSetup.Emit) tp.OnComplete(()=> EmitHOTweenScaleFor(t, rndScale, twDuration, hotweenEase));
250  					}
251  					HOTween.To(t, twDuration, tp);
252  					break;
253  				case Engine.LeanTween:
254  					LTDescr leanTween;
255  					if (positionTween) {
256  						Vector3 toPos = rndPositions[i];
257  						leanTween = LeanTween.move(go, rndPositions[i], twDuration).setEase(leanEase).setRepeat(loops).setLoopType(leanLoopType);
258  						if (testSetup == TestSetup.Emit) leanTween.setOnComplete(()=> EmitLeanTweenPositionFor(t, go, toPos, twDuration, leanEase));
259  					}
260  					if (rotationTween) {
261  						Vector3 toRot = rndRotations[i];
262  						leanTween = LeanTween.rotate(go, rndRotations[i], twDuration).setEase(leanEase).setRepeat(loops).setLoopType(leanLoopType);
263  						if (testSetup == TestSetup.Emit) leanTween.setOnComplete(()=> EmitLeanTweenRotationFor(t, go, toRot, twDuration, leanEase));
264  					}
265  					if (scaleTween) {
266  						leanTween = LeanTween.scale(go, rndScale, twDuration).setEase(leanEase).setRepeat(loops).setLoopType(leanLoopType);
267  						if (testSetup == TestSetup.Emit) leanTween.setOnComplete(()=> EmitLeanTweenScaleFor(t, go, rndScale, twDuration, leanEase));
268  					}
269  					break;
270  				case Engine.GoKit:
271  					GoTweenConfig goConfig = new GoTweenConfig()
272  						.setEaseType(goEase)
273  						.setIterations(loops, goLoopType);
274  					if (positionTween) {
275  						Vector3 toPos = rndPositions[i];
276  						goConfig.addTweenProperty(new PositionTweenProperty(toPos));
277  						if (testSetup == TestSetup.Emit) goConfig.onComplete(x=> EmitGoKitPositionFor(t, toPos, twDuration, goEase));
278  					}
279  					if (rotationTween) {
280  						Vector3 toRot = rndRotations[i];
281  						goConfig.addTweenProperty(new RotationTweenProperty(toRot));
282  						if (testSetup == TestSetup.Emit) goConfig.onComplete(x=> EmitGoKitRotationFor(t, toRot, twDuration, goEase));
283  					}
284  					if (scaleTween) {
285  						goConfig.addTweenProperty(new ScaleTweenProperty(rndScale));
286  						if (testSetup == TestSetup.Emit) goConfig.onComplete(x=> EmitGoKitScaleFor(t, rndScale, twDuration, goEase));
287  					}
288  					Go.to(t, twDuration, goConfig);
289  					break;
290  				case Engine.iTween:
291  					Hashtable hs;
292  					if (positionTween) {
293  						hs = new Hashtable();
294  						hs.Add("position", rndPositions[i]);
295  						hs.Add("time", twDuration);
296  						hs.Add("looptype", iTweenLoopType);
297  						hs.Add("easetype", iTweenEase);
298  						iTween.MoveTo(go, hs);
299  					}
300  					if (rotationTween) {
301  						hs = new Hashtable();
302  						hs.Add("rotation", rndRotations[i]);
303  						hs.Add("time", twDuration);
304  						hs.Add("looptype", iTweenLoopType);
305  						hs.Add("easetype", iTweenEase);
306  						iTween.RotateTo(go, hs);
307  					}
308  					if (scaleTween) {
309  						hs = new Hashtable();
310  						hs.Add("scale", rndScale);
311  						hs.Add("time", twDuration);
312  						hs.Add("looptype", iTweenLoopType);
313  						hs.Add("easetype", iTweenEase);
314  						iTween.ScaleTo(go, hs);
315  					}
316  					break;
317  				default:
318  					Transform tCopy = t;
319  					DG.Tweening.Tween dotween;
320  					if (positionTween) {
321  						Vector3 toPos = rndPositions[i];
322  						dotween = tCopy.DOMove(toPos, twDuration).SetEase(dotweenEase).SetLoops(loops, dotweenLoopType);
323  						if (testSetup == TestSetup.Emit) dotween.OnComplete(()=> EmitDOTweenPositionFor(t, toPos, twDuration, dotweenEase));
324  					}
325  					if (rotationTween) {
326  						Vector3 toRot = rndRotations[i];
327  						dotween = tCopy.DORotate(toRot, twDuration).SetEase(dotweenEase).SetLoops(loops, dotweenLoopType);
328  						if (testSetup == TestSetup.Emit) dotween.OnComplete(()=> EmitDOTweenRotationFor(t, toRot, twDuration, dotweenEase));
329  					}
330  					if (scaleTween) {
331  						dotween = tCopy.DOScale(rndScale, twDuration).SetEase(dotweenEase).SetLoops(loops, dotweenLoopType);
332  						if (testSetup == TestSetup.Emit) dotween.OnComplete(()=> EmitDOTweenScaleFor(t, rndScale, twDuration, dotweenEase));
333  					}
334  					break;
335  				}
336  			}
337  			break;
338  		}
339  	}
340  	void EmitDOTweenPositionFor(Transform t, Vector3 to, float twDuration, DG.Tweening.Ease ease)
341  	{
342  		t.position = Vector3.zero;
343  		t.DOMove(to, twDuration).SetEase(ease).OnComplete(()=> EmitDOTweenPositionFor(t, to, twDuration, ease));
344  	}
345  	void EmitDOTweenRotationFor(Transform t, Vector3 to, float twDuration, DG.Tweening.Ease ease)
346  	{
347  		t.rotation = Quaternion.identity;
348  		t.DORotate(to, twDuration).SetEase(ease).OnComplete(()=> EmitDOTweenRotationFor(t, to, twDuration, ease));
349  	}
350  	void EmitDOTweenScaleFor(Transform t, Vector3 to, float twDuration, DG.Tweening.Ease ease)
351  	{
352  		t.localScale = Vector3.one;
353  		t.DOScale(to, twDuration).SetEase(ease).OnComplete(()=> EmitDOTweenScaleFor(t, to, twDuration, ease));
354  	}
355  	void EmitHOTweenPositionFor(Transform t, Vector3 to, float twDuration, Holoville.HOTween.EaseType ease)
356  	{
357  		t.position = Vector3.zero;
358  		HOTween.To(t, twDuration, new Holoville.HOTween.TweenParms()
359  			.Prop("position", to)
360  			.Ease(ease)
361  			.OnComplete(()=> EmitHOTweenPositionFor(t, to, twDuration, ease))
362  		);
363  	}
364  	void EmitHOTweenRotationFor(Transform t, Vector3 to, float twDuration, Holoville.HOTween.EaseType ease)
365  	{
366  		t.rotation = Quaternion.identity;
367  		HOTween.To(t, twDuration, new Holoville.HOTween.TweenParms()
368  			.Prop("rotation", to)
369  			.Ease(ease)
370  			.OnComplete(()=> EmitHOTweenRotationFor(t, to, twDuration, ease))
371  		);
372  	}
373  	void EmitHOTweenScaleFor(Transform t, Vector3 to, float twDuration, Holoville.HOTween.EaseType ease)
374  	{
375  		t.localScale = Vector3.one;
376  		HOTween.To(t, twDuration, new Holoville.HOTween.TweenParms()
377  			.Prop("localScale", to)
378  			.Ease(ease)
379  			.OnComplete(()=> EmitHOTweenScaleFor(t, to, twDuration, ease))
380  		);
381  	}
382  	void EmitLeanTweenPositionFor(Transform t, GameObject go, Vector3 to, float twDuration, LeanTweenType ease)
383  	{
384  		t.position = Vector3.zero;
385  		LeanTween.move(go, to, twDuration).setEase(ease).setOnComplete(()=> EmitLeanTweenPositionFor(t, go, to, twDuration, ease));
386  	}
387  	void EmitLeanTweenRotationFor(Transform t, GameObject go, Vector3 to, float twDuration, LeanTweenType ease)
388  	{
389  		t.rotation = Quaternion.identity;
390  		LeanTween.rotate(go, to, twDuration).setEase(ease).setOnComplete(()=> EmitLeanTweenRotationFor(t, go, to, twDuration, ease));
391  	}
392  	void EmitLeanTweenScaleFor(Transform t, GameObject go, Vector3 to, float twDuration, LeanTweenType ease)
393  	{
394  		t.localScale = Vector3.one;
395  		LeanTween.scale(go, to, twDuration).setEase(ease).setOnComplete(()=> EmitLeanTweenScaleFor(t, go, to, twDuration, ease));
396  	}
397  	void EmitGoKitPositionFor(Transform t, Vector3 to, float twDuration, GoEaseType ease)
398  	{
399  		t.position = Vector3.zero;
400  		Go.to(t, twDuration, new GoTweenConfig()
401  			.addTweenProperty(new PositionTweenProperty(to))
402  			.onComplete(x=> EmitGoKitPositionFor(t, to, twDuration, ease))
403  		);
404  	}
405  	void EmitGoKitRotationFor(Transform t, Vector3 to, float twDuration, GoEaseType ease)
406  	{
407  		t.rotation = Quaternion.identity;
408  		Go.to(t, twDuration, new GoTweenConfig()
409  			.addTweenProperty(new RotationTweenProperty(to))
410  			.onComplete(x=> EmitGoKitRotationFor(t, to, twDuration, ease))
411  		);
412  	}
413  	void EmitGoKitScaleFor(Transform t, Vector3 to, float twDuration, GoEaseType ease)
414  	{
415  		t.localScale = Vector3.one;
416  		Go.to(t, twDuration, new GoTweenConfig()
417  			.addTweenProperty(new ScaleTweenProperty(to))
418  			.onComplete(x=> EmitGoKitScaleFor(t, to, twDuration, ease))
419  		);
420  	}
421  	Vector3 RandomVector3(float rangeX, float rangeY, float rangeZ)
422  	{
423  		return new Vector3(UnityEngine.Random.Range(-rangeX, rangeX), UnityEngine.Random.Range(-rangeY, rangeY), UnityEngine.Random.Range(-rangeZ, rangeZ));
424  	}
425  	void KillAllGoTweens()
426  	{
427  		if(testObjsTrans != null) foreach(Transform t in testObjsTrans) Go.killAllTweensWithTarget(t);
428  		if(testObjsData != null) foreach(TestObjectData t in testObjsData) Go.killAllTweensWithTarget(t);
429  	}
430  	public void UpdateiTweenFloat(float newVal)
431  	{
432  		someVal = newVal;
433  	}
434  	void OnGUI()
435  	{
436  		if (!guiInitialized) {
437  			guiInitialized = true;
438  			labelStyle = new GUIStyle(GUI.skin.label);
439  			labelStyle.padding = new RectOffset(0, 0, 0, 0);
440  			labelStyle.margin = new RectOffset(4, 4, 0, 0);
441  		}
442  		GUILayout.BeginArea(new Rect(10, 10, Screen.width - 20, Screen.height - 20));
443  		GUILayout.BeginHorizontal();
444  		GUILayout.FlexibleSpace();
445  		switch (state) {
446  		case State.CreatingObjects:
447  			DrawCreatingObjectsGUI();
448  			break;
449  		case State.TweensSetup:
450  			DrawTweensSetupGUI();
451  			break;
452  		case State.Running:
453  			DrawRunningGUI();
454  			break;
455  		case State.NoEmitWITween:
456  			DrawNoEmitWITweenGUI();
457  			break;
458  		case State.ConfirmGoKit:
459  			DrawConfirmGoKitGUI();
460  			break;
461  		case State.ConfirmITween:
462  			DrawConfirmITweenGUI();
463  			break;
464  		default:
465  			DrawMenuGUI();
466  			break;
467  		}
468  		GUILayout.FlexibleSpace();
469  		GUILayout.EndHorizontal();
470  		GUILayout.EndArea();
471  	}
472  	void DrawMenuGUI()
473  	{
474  		GUILayout.BeginVertical();
475  		GUILayout.FlexibleSpace();
476  		GUILayout.Label("Tween Duration", labelStyle);
477  		durationSelId = GUILayout.Toolbar(durationSelId, durationList);
478  		GUILayout.Space(vspace);
479  		GUILayout.Label("Number of Tweens", labelStyle);
480  		numTweensSelId = GUILayout.Toolbar(numTweensSelId, numTweensList);
481  		GUILayout.Space(vspace);
482  		GUILayout.Label("Tweens", labelStyle);
483  		GUILayout.BeginHorizontal();
484  			positionTween = GUILayout.Toggle(positionTween, "Position");
485  			rotationTween = GUILayout.Toggle(rotationTween, "Rotation");
486  			scaleTween = GUILayout.Toggle(scaleTween, "Scale");
487  			if (!positionTween && !rotationTween && !scaleTween) positionTween = true;
488  		GUILayout.EndHorizontal();
489  		GUILayout.Space(vspace);
490  		GUILayout.Label("Test Type", labelStyle);
491  		testType = (TestType)GUILayout.Toolbar((int)testType, testTypeList);
492  		if (testType == TestType.Floats && testSetup == TestSetup.Emit) testSetup = TestSetup.Loop;
493  		GUILayout.Space(vspace);
494  		GUILayout.Label("Test Setup", labelStyle);
495  		testSetup = (TestSetup)GUILayout.Toolbar((int)testSetup, testSetupList);
496  		GUILayout.Space(vspace);
497  		GUILayout.Label("Easing", labelStyle);
498  		easing = (Easing)GUILayout.Toolbar((int)easing, easingList);
499  		GUILayout.Space(vspace);
500  		GUILayout.Label("Options", labelStyle);
501  		disableRenderers = GUILayout.Toggle(disableRenderers, "Disable Renderers");
502  		GUILayout.Space(vspace);
503  		GUILayout.Label("Engine", labelStyle);
504  		engine = (Engine)GUILayout.Toolbar((int)engine, engineList);
505  		GUILayout.Space(vspace);
506  		if (GUILayout.Button("START")) {
507  			numTweens = Convert.ToInt32(numTweensList[numTweensSelId]);
508  			if (engine == Engine.GoKit && testType == TestType.Floats && numTweens >= 8000) state = State.ConfirmGoKit;
509  			else if (engine == Engine.iTween) {
510  				if (testSetup == TestSetup.Emit) state = State.NoEmitWITween;
511  				else if (numTweens > 4000) state = State.ConfirmITween;
512  				else StartCoroutine(StartRun());
513  			}
514  			else StartCoroutine(StartRun());
515  		}
516  		GUILayout.FlexibleSpace();
517  		GUILayout.EndVertical();
518  	}
519  	void DrawNoEmitWITweenGUI()
520  	{
521  		GUILayout.BeginVertical();
522  		GUILayout.FlexibleSpace();
523  		GUILayout.Label("Sorry, but iTween doesn't allow to create a good Emit test");
524  		GUILayout.Space(8);
525  		GUILayout.BeginHorizontal();
526  		if (GUILayout.Button("Ok")) state = State.Menu;
527  		GUILayout.EndHorizontal();
528  		GUILayout.FlexibleSpace();
529  		GUILayout.EndVertical();
530  	}
531  	void DrawConfirmGoKitGUI()
532  	{
533  		GUILayout.BeginVertical();
534  		GUILayout.FlexibleSpace();
535  		GUILayout.Label("Beware, GoKit takes a long time to startup and to stop custom tweens,\nand your computer might hang for a while.\n\nAre you sure you want to proceed?");
536  		GUILayout.Space(8);
537  		GUILayout.BeginHorizontal();
538  		if (GUILayout.Button("Continue")) StartCoroutine(StartRun());
539  		if (GUILayout.Button("Cancel")) state = State.Menu;
540  		GUILayout.EndHorizontal();
541  		GUILayout.FlexibleSpace();
542  		GUILayout.EndVertical();
543  	}
544  	void DrawConfirmITweenGUI()
545  	{
546  		GUILayout.BeginVertical();
547  		GUILayout.FlexibleSpace();
548  		GUILayout.Label("Beware, ITween takes a long time to startup and a longer time to stop tweens,\nand your computer might hang for a while.\n\nAre you sure you want to proceed?");
549  		GUILayout.Space(8);
550  		GUILayout.BeginHorizontal();
551  		if (GUILayout.Button("Continue")) StartCoroutine(StartRun());
552  		if (GUILayout.Button("Cancel")) state = State.Menu;
553  		GUILayout.EndHorizontal();
554  		GUILayout.FlexibleSpace();
555  		GUILayout.EndVertical();
556  	}
557  	void DrawCreatingObjectsGUI()
558  	{
559  		GUILayout.BeginVertical();
560  		GUILayout.FlexibleSpace();
561  		GUILayout.BeginHorizontal(GUI.skin.box);
562  		GUILayout.Space(8);
563  		GUILayout.Label("Preparing environment...");
564  		GUILayout.Space(8);
565  		GUILayout.EndHorizontal();
566  		GUILayout.FlexibleSpace();
567  		GUILayout.EndVertical();
568  	}
569  	void DrawTweensSetupGUI()
570  	{
571  		GUILayout.BeginVertical();
572  		GUILayout.FlexibleSpace();
573  		GUILayout.BeginHorizontal(GUI.skin.box);
574  		GUILayout.Space(8);
575  		GUILayout.Label("Starting up tweens...");
576  		GUILayout.Space(8);
577  		GUILayout.EndHorizontal();
578  		GUILayout.FlexibleSpace();
579  		GUILayout.EndVertical();
580  	}
581  	void DrawRunningGUI()
582  	{
583  		GUILayout.BeginVertical();
584  		if (testType == TestType.Floats) {
585  			GUILayout.FlexibleSpace();
586  			GUILayout.Label("Tweening random float values on each test object");
587  		} else if (disableRenderers) {
588  			GUILayout.FlexibleSpace();
589  			GUILayout.Label("Tweening transforms even if you can't see them (renderers disabled)");
590  		}
591  		GUILayout.FlexibleSpace();
592  		GUILayout.Label(engine.ToString() + " (startup time: " + totCreationTime + ")");
593  		if (GUILayout.Button("STOP")) StopRun();
594  		GUILayout.EndVertical();
595  	}
596  }
</code></pre>
        </div>
        <div class="column">
            <h3>dotween-MDEwOlJlcG9zaXRvcnkzMjQ3NTE2Mg==-flat-TweenEnginesComparisonInternal_37.cs</h3>
            <pre><code>1  using DG.Tweening;
2  using Holoville.HOTween;
3  using System;
4  using System.Collections;
5  using UnityEngine;
6  public class TweenEnginesComparisonInternal : BrainBase
7  {
8  	enum State {
9  		Menu,
10  		NoEmitWITween,
11  		ConfirmGoKit,
12  		ConfirmITween,
13  		CreatingObjects,
14  		TweensSetup,
15  		Running
16  	}
17  	enum Engine {
18  		DOTween,
19  		HOTween,
20  		LeanTween,
21  		GoKit,
22  		iTween
23  	}
24  	enum TestType {
25  		Transforms,
26  		Floats
27  	}
28  	enum TestSetup {
29  		Emit,
30  		Loop,
31  		YoyoLoop
32  	}
33  	enum Easing {
34  		Linear,
35  		InOutQuad
36  	}
37  	public bool doTweenSafeMode;
38  	public GameObject prefab;
39  	public float someVal; 
40  	State state = State.Menu;
41  	Engine engine = Engine.DOTween;
42  	TestType testType = TestType.Transforms;
43  	TestSetup testSetup = TestSetup.YoyoLoop;
44  	Easing easing = Easing.Linear;
45  	int numTweens;
46  	float duration;
47  	bool disableRenderers;
48  	bool positionTween = true;
49  	bool rotationTween, scaleTween;
50  	Transform container;
51  	GameObject[] testObjsGos; 
52  	Transform[] testObjsTrans;
53  	TestObjectData[] testObjsData;
54  	Vector3[] rndPositions;
55  	Vector3[] rndRotations;
56  	Vector3[] rndStartupPos;
57  	readonly Vector3 rndScale = new Vector3(6,6,6);
58  	float[] rndFloats;
59  	float totCreationTime;
60  	bool guiInitialized;
61  	GUIStyle labelStyle;
62  	const int vspace = 10;
<span onclick='openModal()' class='match'>63  	string[] engineList, testTypeList, testSetupList, easingList;
64  	string[] durationList = new[] {
65  		"0.25", "0.5", "1", "2", "4", "8", "16", "32"
66  	};
67  	string[] numTweensList = new[] {
68  		"1", "2", "50", "100", "500", "1000", "2000", "4000", "8000", "16000", "32000"
69  	};
70  	int durationSelId = 2, numTweensSelId = 4;
71  	override protected void Awake()
72  	{
73  		base.Awake();
74  		DOTween.Init(true, false);
75  		DOTween.useSafeMode = doTweenSafeMode;
76  		HOTween.Init(true, false, false);
77  		LeanTween.init(Convert.ToInt32(numTweensList[numTweensList.Length - 1]) + 1);
78  	}
79  	void Start()
80  	{
81  		engineList = Enum.GetNames(typeof(Engine));
82  		testTypeList = Enum.GetNames(typeof(TestType));
83  		testSetupList = Enum.GetNames(typeof(TestSetup));
84  		easingList = Enum.GetNames(typeof(Easing));
85  		container = new GameObject("Test Objects Container").transform;
86  	}
87  	IEnumerator StartRun()
88  	{
89  		state = State.CreatingObjects;
90  		yield return null;
91  		duration = Convert.ToSingle(durationList[durationSelId]);
92  		rndStartupPos = new Vector3[numTweens];
93  		rndPositions = new Vector3[numTweens];
94  		rndRotations = new Vector3[numTweens];
95  		rndFloats = new float[numTweens];
96  		for (int i = 0; i < numTweens; ++i) {
97  			rndStartupPos[i] = RandomVector3(50, 50, 20);
98  			rndPositions[i] = RandomVector3(50, 50, 20);
99  			rndRotations[i] = RandomVector3(180, 180, 180);
100  			rndFloats[i] = UnityEngine.Random.Range(-1000f, 1000f);
101  		}
102  		if (testType == TestType.Transforms) {
103  			testObjsGos = new GameObject[numTweens];
104  			testObjsTrans = new Transform[numTweens];
105  		} else {
106  			testObjsData = new TestObjectData[numTweens];
107  		}
108  		for (int i = 0; i < numTweens; ++i) {
109  			if (testType == TestType.Transforms) {
110  				GameObject go = (GameObject)Instantiate(prefab);
111  				go.SetActive(true);
112  				Transform t = go.transform;
113  				if (testSetup != TestSetup.Emit) t.position = rndStartupPos[i];
114  				t.parent = container;
115  				testObjsGos[i] = go;
116  				testObjsTrans[i] = t;
117  				if (disableRenderers || testType == TestType.Floats) go.renderer.enabled = false;
</span>118  			} else testObjsData[i] = new TestObjectData();
119  		}
120  		if (engine == Engine.DOTween) {
121  			int minCapacityToBeFair = Convert.ToInt32(numTweensList[numTweensList.Length - 1]);
122  			int capacityX1 = Convert.ToInt32(numTweensList[numTweensSelId]);
123  			int neededCapacity = 0;
124  			int capacity = minCapacityToBeFair;
125  			if (testType == TestType.Transforms && positionTween) neededCapacity += capacityX1;
126  			if (testType == TestType.Transforms && rotationTween) neededCapacity += capacityX1;
127  			if (testType == TestType.Transforms && scaleTween) neededCapacity += capacityX1;
128  			if (minCapacityToBeFair < neededCapacity) capacity = neededCapacity;
129  			DOTween.SetTweensCapacity(capacity, 0);
130  		}
131  		yield return null;
132  		state = State.TweensSetup;
133  		yield return null;
134  		totCreationTime = Time.realtimeSinceStartup;
135  		SetupTweens();
136  		totCreationTime = Time.realtimeSinceStartup - totCreationTime;
137  		yield return null;
138  		state = State.Running;
139  		fpsGadget.ResetFps();
140  	}
141  	void StopRun()
142  	{
143  		this.StopAllCoroutines();
144  		state = State.Menu;
145  		if (engine == Engine.DOTween) DOTween.Clear();
146  		else if (engine == Engine.HOTween) HOTween.Kill();
147  		else if (engine == Engine.LeanTween) LeanTween.reset();
148  		else if (engine == Engine.GoKit) KillAllGoTweens();
149  		else if (engine == Engine.iTween) iTween.Stop();
150  		if (testObjsGos != null) foreach (GameObject go in testObjsGos) Destroy(go);
151  		testObjsGos = null;
152  		testObjsTrans = null;
153  		testObjsData = null;
154  		rndPositions = null;
155  		rndRotations = null;
156  	}
157  	void Reset(bool complete = true)
158  	{
159  		if (complete) {
160  			if (engine == Engine.DOTween) DOTween.Clear();
161  			else if (engine == Engine.HOTween) HOTween.Kill();
162  			else if (engine == Engine.LeanTween) LeanTween.reset();
163  			else if (engine == Engine.GoKit) KillAllGoTweens();
164  			else if (engine == Engine.iTween) iTween.Stop();
165  		}
166  		if (testObjsTrans != null) {
167  			for (int i = 0; i < testObjsTrans.Length; ++i) {
168  				Transform t = testObjsTrans[i];
169  				t.position = rndStartupPos[i];
170  				t.localScale = Vector3.one;
171  				t.rotation = Quaternion.identity;
172  			}
173  		}
174  	}
175  	void SetupTweens()
176  	{
177  		DG.Tweening.Ease dotweenEase = easing == Easing.Linear ? DG.Tweening.Ease.Linear : DG.Tweening.Ease.InOutQuad;
178  		Holoville.HOTween.EaseType hotweenEase = easing == Easing.Linear ? Holoville.HOTween.EaseType.Linear : Holoville.HOTween.EaseType.EaseInOutQuad;
179  		LeanTweenType leanEase = easing == Easing.Linear ? LeanTweenType.linear : LeanTweenType.easeInOutQuad;
180  		GoEaseType goEase = easing == Easing.Linear ? GoEaseType.Linear : GoEaseType.QuadInOut;
181  		iTween.EaseType iTweenEase = easing == Easing.Linear ? iTween.EaseType.linear : iTween.EaseType.easeInOutQuad;
182  		int loops = testSetup == TestSetup.Emit ? 1 : -1;
183  		DG.Tweening.LoopType dotweenLoopType = testSetup == TestSetup.YoyoLoop ? DG.Tweening.LoopType.Yoyo : DG.Tweening.LoopType.Restart;
184  		Holoville.HOTween.LoopType hotweenLoopType = testSetup == TestSetup.YoyoLoop ? Holoville.HOTween.LoopType.Yoyo : Holoville.HOTween.LoopType.Restart;
185  		LeanTweenType leanLoopType = testSetup == TestSetup.YoyoLoop ? LeanTweenType.pingPong : LeanTweenType.clamp;
186  		GoLoopType goLoopType = testSetup == TestSetup.YoyoLoop ? GoLoopType.PingPong : GoLoopType.RestartFromBeginning;
187  		iTween.LoopType iTweenLoopType = loops != -1 ? iTween.LoopType.none : testSetup == TestSetup.YoyoLoop ? iTween.LoopType.pingPong : iTween.LoopType.loop;
188  		switch (testType) {
189  		case TestType.Floats:
190  			for (int i = 0; i < numTweens; ++i) {
191  				TestObjectData data = testObjsData[i];
192  				switch (engine) {
193  				case Engine.HOTween:
194  					HOTween.To(data, duration, new Holoville.HOTween.TweenParms()
195  						.Prop("floatValue", rndFloats[i])
196  						.Ease(hotweenEase)
197  						.Loops(loops, hotweenLoopType)
198  					);
199  					break;
200  				case Engine.LeanTween:
201  					LeanTween.value(this.gameObject, x=> data.floatValue = x, data.floatValue, rndFloats[i], duration).setEase(leanEase).setRepeat(loops).setLoopType(leanLoopType);
202  					break;
203  				case Engine.GoKit:
204  					Go.to(data, duration, new GoTweenConfig()
205  						.floatProp("floatValueProperty", rndFloats[i])
206  						.setEaseType(goEase)
207  						.setIterations(loops, goLoopType)
208  					);
209  					break;
210  				case Engine.iTween:
211  					Hashtable hs = new Hashtable();
212  					hs.Add("from", data.floatValue);
213  					hs.Add("to", rndFloats[i]);
214  					hs.Add("time", duration);
215  					hs.Add("onupdate", "UpdateiTweenFloat");
216  					hs.Add("looptype", iTweenLoopType);
217  					hs.Add("easetype", iTweenEase);
218  					iTween.ValueTo(this.gameObject, hs);
219  					break;
220  				default:
221  					TestObjectData dataCopy = data;
222  					DOTween.To(()=> dataCopy.floatValue, x=> dataCopy.floatValue = x, rndFloats[i], duration).SetEase(dotweenEase).SetLoops(loops, dotweenLoopType);
223  					break;
224  				}
225  			}
226  			break;
227  		default:
228  			for (int i = 0; i < numTweens; ++i) {
229  				float twDuration = testSetup == TestSetup.Emit ? UnityEngine.Random.Range(0.25f, 1f) : duration;
230  				Transform t = testObjsTrans[i];
231  				GameObject go = testObjsGos[i]; 
232  				switch (engine) {
233  				case Engine.HOTween:
234  					Holoville.HOTween.TweenParms tp = new Holoville.HOTween.TweenParms()
235  						.Ease(hotweenEase)
236  						.Loops(loops, hotweenLoopType);
237  					if (positionTween) {
238  						Vector3 toPos = rndPositions[i];
239  						tp.Prop("position", toPos);
240  						if (testSetup == TestSetup.Emit) tp.OnComplete(()=> EmitHOTweenPositionFor(t, toPos, twDuration, hotweenEase));
241  					}
242  					if (rotationTween) {
243  						Vector3 toRot = rndRotations[i];
244  						tp.Prop("rotation", toRot);
245  						if (testSetup == TestSetup.Emit) tp.OnComplete(()=> EmitHOTweenRotationFor(t, toRot, twDuration, hotweenEase));
246  					}
247  					if (scaleTween) {
248  						tp.Prop("localScale", rndScale);
249  						if (testSetup == TestSetup.Emit) tp.OnComplete(()=> EmitHOTweenScaleFor(t, rndScale, twDuration, hotweenEase));
250  					}
251  					HOTween.To(t, twDuration, tp);
252  					break;
253  				case Engine.LeanTween:
254  					LTDescr leanTween;
255  					if (positionTween) {
256  						Vector3 toPos = rndPositions[i];
257  						leanTween = LeanTween.move(go, rndPositions[i], twDuration).setEase(leanEase).setRepeat(loops).setLoopType(leanLoopType);
258  						if (testSetup == TestSetup.Emit) leanTween.setOnComplete(()=> EmitLeanTweenPositionFor(t, go, toPos, twDuration, leanEase));
259  					}
260  					if (rotationTween) {
261  						Vector3 toRot = rndRotations[i];
262  						leanTween = LeanTween.rotate(go, rndRotations[i], twDuration).setEase(leanEase).setRepeat(loops).setLoopType(leanLoopType);
263  						if (testSetup == TestSetup.Emit) leanTween.setOnComplete(()=> EmitLeanTweenRotationFor(t, go, toRot, twDuration, leanEase));
264  					}
265  					if (scaleTween) {
266  						leanTween = LeanTween.scale(go, rndScale, twDuration).setEase(leanEase).setRepeat(loops).setLoopType(leanLoopType);
267  						if (testSetup == TestSetup.Emit) leanTween.setOnComplete(()=> EmitLeanTweenScaleFor(t, go, rndScale, twDuration, leanEase));
268  					}
269  					break;
270  				case Engine.GoKit:
271  					GoTweenConfig goConfig = new GoTweenConfig()
272  						.setEaseType(goEase)
273  						.setIterations(loops, goLoopType);
274  					if (positionTween) {
275  						Vector3 toPos = rndPositions[i];
276  						goConfig.addTweenProperty(new PositionTweenProperty(toPos));
277  						if (testSetup == TestSetup.Emit) goConfig.onComplete(x=> EmitGoKitPositionFor(t, toPos, twDuration, goEase));
278  					}
279  					if (rotationTween) {
280  						Vector3 toRot = rndRotations[i];
281  						goConfig.addTweenProperty(new RotationTweenProperty(toRot));
282  						if (testSetup == TestSetup.Emit) goConfig.onComplete(x=> EmitGoKitRotationFor(t, toRot, twDuration, goEase));
283  					}
284  					if (scaleTween) {
285  						goConfig.addTweenProperty(new ScaleTweenProperty(rndScale));
286  						if (testSetup == TestSetup.Emit) goConfig.onComplete(x=> EmitGoKitScaleFor(t, rndScale, twDuration, goEase));
287  					}
288  					Go.to(t, twDuration, goConfig);
289  					break;
290  				case Engine.iTween:
291  					Hashtable hs;
292  					if (positionTween) {
293  						hs = new Hashtable();
294  						hs.Add("position", rndPositions[i]);
295  						hs.Add("time", twDuration);
296  						hs.Add("looptype", iTweenLoopType);
297  						hs.Add("easetype", iTweenEase);
298  						iTween.MoveTo(go, hs);
299  					}
300  					if (rotationTween) {
301  						hs = new Hashtable();
302  						hs.Add("rotation", rndRotations[i]);
303  						hs.Add("time", twDuration);
304  						hs.Add("looptype", iTweenLoopType);
305  						hs.Add("easetype", iTweenEase);
306  						iTween.RotateTo(go, hs);
307  					}
308  					if (scaleTween) {
309  						hs = new Hashtable();
310  						hs.Add("scale", rndScale);
311  						hs.Add("time", twDuration);
312  						hs.Add("looptype", iTweenLoopType);
313  						hs.Add("easetype", iTweenEase);
314  						iTween.ScaleTo(go, hs);
315  					}
316  					break;
317  				default:
318  					Transform tCopy = t;
319  					DG.Tweening.Tween dotween;
320  					if (positionTween) {
321  						Vector3 toPos = rndPositions[i];
322  						dotween = tCopy.DOMove(toPos, twDuration).SetEase(dotweenEase).SetLoops(loops, dotweenLoopType);
323  						if (testSetup == TestSetup.Emit) dotween.OnComplete(()=> EmitDOTweenPositionFor(t, toPos, twDuration, dotweenEase));
324  					}
325  					if (rotationTween) {
326  						Vector3 toRot = rndRotations[i];
327  						dotween = tCopy.DORotate(toRot, twDuration).SetEase(dotweenEase).SetLoops(loops, dotweenLoopType);
328  						if (testSetup == TestSetup.Emit) dotween.OnComplete(()=> EmitDOTweenRotationFor(t, toRot, twDuration, dotweenEase));
329  					}
330  					if (scaleTween) {
331  						dotween = tCopy.DOScale(rndScale, twDuration).SetEase(dotweenEase).SetLoops(loops, dotweenLoopType);
332  						if (testSetup == TestSetup.Emit) dotween.OnComplete(()=> EmitDOTweenScaleFor(t, rndScale, twDuration, dotweenEase));
333  					}
334  					break;
335  				}
336  			}
337  			break;
338  		}
339  	}
340  	void EmitDOTweenPositionFor(Transform t, Vector3 to, float twDuration, DG.Tweening.Ease ease)
341  	{
342  		t.position = Vector3.zero;
343  		t.DOMove(to, twDuration).SetEase(ease).OnComplete(()=> EmitDOTweenPositionFor(t, to, twDuration, ease));
344  	}
345  	void EmitDOTweenRotationFor(Transform t, Vector3 to, float twDuration, DG.Tweening.Ease ease)
346  	{
347  		t.rotation = Quaternion.identity;
348  		t.DORotate(to, twDuration).SetEase(ease).OnComplete(()=> EmitDOTweenRotationFor(t, to, twDuration, ease));
349  	}
350  	void EmitDOTweenScaleFor(Transform t, Vector3 to, float twDuration, DG.Tweening.Ease ease)
351  	{
352  		t.localScale = Vector3.one;
353  		t.DOScale(to, twDuration).SetEase(ease).OnComplete(()=> EmitDOTweenScaleFor(t, to, twDuration, ease));
354  	}
355  	void EmitHOTweenPositionFor(Transform t, Vector3 to, float twDuration, Holoville.HOTween.EaseType ease)
356  	{
357  		t.position = Vector3.zero;
358  		HOTween.To(t, twDuration, new Holoville.HOTween.TweenParms()
359  			.Prop("position", to)
360  			.Ease(ease)
361  			.OnComplete(()=> EmitHOTweenPositionFor(t, to, twDuration, ease))
362  		);
363  	}
364  	void EmitHOTweenRotationFor(Transform t, Vector3 to, float twDuration, Holoville.HOTween.EaseType ease)
365  	{
366  		t.rotation = Quaternion.identity;
367  		HOTween.To(t, twDuration, new Holoville.HOTween.TweenParms()
368  			.Prop("rotation", to)
369  			.Ease(ease)
370  			.OnComplete(()=> EmitHOTweenRotationFor(t, to, twDuration, ease))
371  		);
372  	}
373  	void EmitHOTweenScaleFor(Transform t, Vector3 to, float twDuration, Holoville.HOTween.EaseType ease)
374  	{
375  		t.localScale = Vector3.one;
376  		HOTween.To(t, twDuration, new Holoville.HOTween.TweenParms()
377  			.Prop("localScale", to)
378  			.Ease(ease)
379  			.OnComplete(()=> EmitHOTweenScaleFor(t, to, twDuration, ease))
380  		);
381  	}
382  	void EmitLeanTweenPositionFor(Transform t, GameObject go, Vector3 to, float twDuration, LeanTweenType ease)
383  	{
384  		t.position = Vector3.zero;
385  		LeanTween.move(go, to, twDuration).setEase(ease).setOnComplete(()=> EmitLeanTweenPositionFor(t, go, to, twDuration, ease));
386  	}
387  	void EmitLeanTweenRotationFor(Transform t, GameObject go, Vector3 to, float twDuration, LeanTweenType ease)
388  	{
389  		t.rotation = Quaternion.identity;
390  		LeanTween.rotate(go, to, twDuration).setEase(ease).setOnComplete(()=> EmitLeanTweenRotationFor(t, go, to, twDuration, ease));
391  	}
392  	void EmitLeanTweenScaleFor(Transform t, GameObject go, Vector3 to, float twDuration, LeanTweenType ease)
393  	{
394  		t.localScale = Vector3.one;
395  		LeanTween.scale(go, to, twDuration).setEase(ease).setOnComplete(()=> EmitLeanTweenScaleFor(t, go, to, twDuration, ease));
396  	}
397  	void EmitGoKitPositionFor(Transform t, Vector3 to, float twDuration, GoEaseType ease)
398  	{
399  		t.position = Vector3.zero;
400  		Go.to(t, twDuration, new GoTweenConfig()
401  			.addTweenProperty(new PositionTweenProperty(to))
402  			.onComplete(x=> EmitGoKitPositionFor(t, to, twDuration, ease))
403  		);
404  	}
405  	void EmitGoKitRotationFor(Transform t, Vector3 to, float twDuration, GoEaseType ease)
406  	{
407  		t.rotation = Quaternion.identity;
408  		Go.to(t, twDuration, new GoTweenConfig()
409  			.addTweenProperty(new RotationTweenProperty(to))
410  			.onComplete(x=> EmitGoKitRotationFor(t, to, twDuration, ease))
411  		);
412  	}
413  	void EmitGoKitScaleFor(Transform t, Vector3 to, float twDuration, GoEaseType ease)
414  	{
415  		t.localScale = Vector3.one;
416  		Go.to(t, twDuration, new GoTweenConfig()
417  			.addTweenProperty(new ScaleTweenProperty(to))
418  			.onComplete(x=> EmitGoKitScaleFor(t, to, twDuration, ease))
419  		);
420  	}
421  	Vector3 RandomVector3(float rangeX, float rangeY, float rangeZ)
422  	{
423  		return new Vector3(UnityEngine.Random.Range(-rangeX, rangeX), UnityEngine.Random.Range(-rangeY, rangeY), UnityEngine.Random.Range(-rangeZ, rangeZ));
424  	}
425  	void KillAllGoTweens()
426  	{
427  		if(testObjsTrans != null) foreach(Transform t in testObjsTrans) Go.killAllTweensWithTarget(t);
428  		if(testObjsData != null) foreach(TestObjectData t in testObjsData) Go.killAllTweensWithTarget(t);
429  	}
430  	public void UpdateiTweenFloat(float newVal)
431  	{
432  		someVal = newVal;
433  	}
434  	void OnGUI()
435  	{
436  		if (!guiInitialized) {
437  			guiInitialized = true;
438  			labelStyle = new GUIStyle(GUI.skin.label);
439  			labelStyle.padding = new RectOffset(0, 0, 0, 0);
440  			labelStyle.margin = new RectOffset(4, 4, 0, 0);
441  		}
442  		GUILayout.BeginArea(new Rect(10, 10, Screen.width - 20, Screen.height - 20));
443  		GUILayout.BeginHorizontal();
444  		GUILayout.FlexibleSpace();
445  		switch (state) {
446  		case State.CreatingObjects:
447  			DrawCreatingObjectsGUI();
448  			break;
449  		case State.TweensSetup:
450  			DrawTweensSetupGUI();
451  			break;
452  		case State.Running:
453  			DrawRunningGUI();
454  			break;
455  		case State.NoEmitWITween:
456  			DrawNoEmitWITweenGUI();
457  			break;
458  		case State.ConfirmGoKit:
459  			DrawConfirmGoKitGUI();
460  			break;
461  		case State.ConfirmITween:
462  			DrawConfirmITweenGUI();
463  			break;
464  		default:
465  			DrawMenuGUI();
466  			break;
467  		}
468  		GUILayout.FlexibleSpace();
469  		GUILayout.EndHorizontal();
470  		GUILayout.EndArea();
471  	}
472  	void DrawMenuGUI()
473  	{
474  		GUILayout.BeginVertical();
475  		GUILayout.FlexibleSpace();
476  		GUILayout.Label("Tween Duration", labelStyle);
477  		durationSelId = GUILayout.Toolbar(durationSelId, durationList);
478  		GUILayout.Space(vspace);
479  		GUILayout.Label("Number of Tweens", labelStyle);
480  		numTweensSelId = GUILayout.Toolbar(numTweensSelId, numTweensList);
481  		GUILayout.Space(vspace);
482  		GUILayout.Label("Tweens", labelStyle);
483  		GUILayout.BeginHorizontal();
484  			positionTween = GUILayout.Toggle(positionTween, "Position");
485  			rotationTween = GUILayout.Toggle(rotationTween, "Rotation");
486  			scaleTween = GUILayout.Toggle(scaleTween, "Scale");
487  			if (!positionTween && !rotationTween && !scaleTween) positionTween = true;
488  		GUILayout.EndHorizontal();
489  		GUILayout.Space(vspace);
490  		GUILayout.Label("Test Type", labelStyle);
491  		testType = (TestType)GUILayout.Toolbar((int)testType, testTypeList);
492  		if (testType == TestType.Floats && testSetup == TestSetup.Emit) testSetup = TestSetup.Loop;
493  		GUILayout.Space(vspace);
494  		GUILayout.Label("Test Setup", labelStyle);
495  		testSetup = (TestSetup)GUILayout.Toolbar((int)testSetup, testSetupList);
496  		GUILayout.Space(vspace);
497  		GUILayout.Label("Easing", labelStyle);
498  		easing = (Easing)GUILayout.Toolbar((int)easing, easingList);
499  		GUILayout.Space(vspace);
500  		GUILayout.Label("Options", labelStyle);
501  		disableRenderers = GUILayout.Toggle(disableRenderers, "Disable Renderers");
502  		GUILayout.Space(vspace);
503  		GUILayout.Label("Engine", labelStyle);
504  		engine = (Engine)GUILayout.Toolbar((int)engine, engineList);
505  		GUILayout.Space(vspace);
506  		if (GUILayout.Button("START")) {
507  			numTweens = Convert.ToInt32(numTweensList[numTweensSelId]);
508  			if (engine == Engine.GoKit && testType == TestType.Floats && numTweens >= 8000) state = State.ConfirmGoKit;
509  			else if (engine == Engine.iTween) {
510  				if (testSetup == TestSetup.Emit) state = State.NoEmitWITween;
511  				else if (numTweens > 4000) state = State.ConfirmITween;
512  				else StartCoroutine(StartRun());
513  			}
514  			else StartCoroutine(StartRun());
515  		}
516  		GUILayout.FlexibleSpace();
517  		GUILayout.EndVertical();
518  	}
519  	void DrawNoEmitWITweenGUI()
520  	{
521  		GUILayout.BeginVertical();
522  		GUILayout.FlexibleSpace();
523  		GUILayout.Label("Sorry, but iTween doesn't allow to create a good Emit test");
524  		GUILayout.Space(8);
525  		GUILayout.BeginHorizontal();
526  		if (GUILayout.Button("Ok")) state = State.Menu;
527  		GUILayout.EndHorizontal();
528  		GUILayout.FlexibleSpace();
529  		GUILayout.EndVertical();
530  	}
531  	void DrawConfirmGoKitGUI()
532  	{
533  		GUILayout.BeginVertical();
534  		GUILayout.FlexibleSpace();
535  		GUILayout.Label("Beware, GoKit takes a long time to startup and to stop custom tweens,\nand your computer might hang for a while.\n\nAre you sure you want to proceed?");
536  		GUILayout.Space(8);
537  		GUILayout.BeginHorizontal();
538  		if (GUILayout.Button("Continue")) StartCoroutine(StartRun());
539  		if (GUILayout.Button("Cancel")) state = State.Menu;
540  		GUILayout.EndHorizontal();
541  		GUILayout.FlexibleSpace();
542  		GUILayout.EndVertical();
543  	}
544  	void DrawConfirmITweenGUI()
545  	{
546  		GUILayout.BeginVertical();
547  		GUILayout.FlexibleSpace();
548  		GUILayout.Label("Beware, ITween takes a long time to startup and a longer time to stop tweens,\nand your computer might hang for a while.\n\nAre you sure you want to proceed?");
549  		GUILayout.Space(8);
550  		GUILayout.BeginHorizontal();
551  		if (GUILayout.Button("Continue")) StartCoroutine(StartRun());
552  		if (GUILayout.Button("Cancel")) state = State.Menu;
553  		GUILayout.EndHorizontal();
554  		GUILayout.FlexibleSpace();
555  		GUILayout.EndVertical();
556  	}
557  	void DrawCreatingObjectsGUI()
558  	{
559  		GUILayout.BeginVertical();
560  		GUILayout.FlexibleSpace();
561  		GUILayout.BeginHorizontal(GUI.skin.box);
562  		GUILayout.Space(8);
563  		GUILayout.Label("Preparing environment...");
564  		GUILayout.Space(8);
565  		GUILayout.EndHorizontal();
566  		GUILayout.FlexibleSpace();
567  		GUILayout.EndVertical();
568  	}
569  	void DrawTweensSetupGUI()
570  	{
571  		GUILayout.BeginVertical();
572  		GUILayout.FlexibleSpace();
573  		GUILayout.BeginHorizontal(GUI.skin.box);
574  		GUILayout.Space(8);
575  		GUILayout.Label("Starting up tweens...");
576  		GUILayout.Space(8);
577  		GUILayout.EndHorizontal();
578  		GUILayout.FlexibleSpace();
579  		GUILayout.EndVertical();
580  	}
581  	void DrawRunningGUI()
582  	{
583  		GUILayout.BeginVertical();
584  		if (testType == TestType.Floats) {
585  			GUILayout.FlexibleSpace();
586  			GUILayout.Label("Tweening random float values on each test object");
587  		} else if (disableRenderers) {
588  			GUILayout.FlexibleSpace();
589  			GUILayout.Label("Tweening transforms even if you can't see them (renderers disabled)");
590  		}
591  		GUILayout.FlexibleSpace();
592  		GUILayout.Label(engine.ToString() + " (startup time: " + totCreationTime + ")");
593  		if (GUILayout.Button("STOP")) StopRun();
594  		GUILayout.EndVertical();
595  	}
596  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from dotween-MDEwOlJlcG9zaXRvcnkzMjQ3NTE2Mg==-flat-TweenEnginesComparisonInternal.cs</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from dotween-MDEwOlJlcG9zaXRvcnkzMjQ3NTE2Mg==-flat-TweenEnginesComparisonInternal_37.cs</div>
                </div>
                <div class="column column_space"><pre><code>63  	string[] engineList, testTypeList, testSetupList, easingList;
64  	string[] durationList = new[] {
65  		"0.25", "0.5", "1", "2", "4", "8", "16", "32"
66  	};
67  	string[] numTweensList = new[] {
68  		"1", "2", "50", "100", "500", "1000", "2000", "4000", "8000", "16000", "32000"
69  	};
70  	int durationSelId = 2, numTweensSelId = 4;
71  	override protected void Awake()
72  	{
73  		base.Awake();
74  		DOTween.Init(true, false);
75  		DOTween.useSafeMode = doTweenSafeMode;
76  		HOTween.Init(true, false, false);
77  		LeanTween.init(Convert.ToInt32(numTweensList[numTweensList.Length - 1]) + 1);
78  	}
79  	void Start()
80  	{
81  		engineList = Enum.GetNames(typeof(Engine));
82  		testTypeList = Enum.GetNames(typeof(TestType));
83  		testSetupList = Enum.GetNames(typeof(TestSetup));
84  		easingList = Enum.GetNames(typeof(Easing));
85  		container = new GameObject("Test Objects Container").transform;
86  	}
87  	IEnumerator StartRun()
88  	{
89  		state = State.CreatingObjects;
90  		yield return null;
91  		duration = Convert.ToSingle(durationList[durationSelId]);
92  		rndStartupPos = new Vector3[numTweens];
93  		rndPositions = new Vector3[numTweens];
94  		rndRotations = new Vector3[numTweens];
95  		rndFloats = new float[numTweens];
96  		for (int i = 0; i < numTweens; ++i) {
97  			rndStartupPos[i] = RandomVector3(50, 50, 20);
98  			rndPositions[i] = RandomVector3(50, 50, 20);
99  			rndRotations[i] = RandomVector3(180, 180, 180);
100  			rndFloats[i] = UnityEngine.Random.Range(-1000f, 1000f);
101  		}
102  		if (testType == TestType.Transforms) {
103  			testObjsGos = new GameObject[numTweens];
104  			testObjsTrans = new Transform[numTweens];
105  		} else {
106  			testObjsData = new TestObjectData[numTweens];
107  		}
108  		for (int i = 0; i < numTweens; ++i) {
109  			if (testType == TestType.Transforms) {
110  				GameObject go = (GameObject)Instantiate(prefab);
111  				go.SetActive(true);
112  				Transform t = go.transform;
113  				if (testSetup != TestSetup.Emit) t.position = rndStartupPos[i];
114  				t.parent = container;
115  				testObjsGos[i] = go;
116  				testObjsTrans[i] = t;
117  				if (disableRenderers || testType == TestType.Floats) go.GetComponent<Renderer>().enabled = false;
</pre></code></div>
                <div class="column column_space"><pre><code>63  	string[] engineList, testTypeList, testSetupList, easingList;
64  	string[] durationList = new[] {
65  		"0.25", "0.5", "1", "2", "4", "8", "16", "32"
66  	};
67  	string[] numTweensList = new[] {
68  		"1", "2", "50", "100", "500", "1000", "2000", "4000", "8000", "16000", "32000"
69  	};
70  	int durationSelId = 2, numTweensSelId = 4;
71  	override protected void Awake()
72  	{
73  		base.Awake();
74  		DOTween.Init(true, false);
75  		DOTween.useSafeMode = doTweenSafeMode;
76  		HOTween.Init(true, false, false);
77  		LeanTween.init(Convert.ToInt32(numTweensList[numTweensList.Length - 1]) + 1);
78  	}
79  	void Start()
80  	{
81  		engineList = Enum.GetNames(typeof(Engine));
82  		testTypeList = Enum.GetNames(typeof(TestType));
83  		testSetupList = Enum.GetNames(typeof(TestSetup));
84  		easingList = Enum.GetNames(typeof(Easing));
85  		container = new GameObject("Test Objects Container").transform;
86  	}
87  	IEnumerator StartRun()
88  	{
89  		state = State.CreatingObjects;
90  		yield return null;
91  		duration = Convert.ToSingle(durationList[durationSelId]);
92  		rndStartupPos = new Vector3[numTweens];
93  		rndPositions = new Vector3[numTweens];
94  		rndRotations = new Vector3[numTweens];
95  		rndFloats = new float[numTweens];
96  		for (int i = 0; i < numTweens; ++i) {
97  			rndStartupPos[i] = RandomVector3(50, 50, 20);
98  			rndPositions[i] = RandomVector3(50, 50, 20);
99  			rndRotations[i] = RandomVector3(180, 180, 180);
100  			rndFloats[i] = UnityEngine.Random.Range(-1000f, 1000f);
101  		}
102  		if (testType == TestType.Transforms) {
103  			testObjsGos = new GameObject[numTweens];
104  			testObjsTrans = new Transform[numTweens];
105  		} else {
106  			testObjsData = new TestObjectData[numTweens];
107  		}
108  		for (int i = 0; i < numTweens; ++i) {
109  			if (testType == TestType.Transforms) {
110  				GameObject go = (GameObject)Instantiate(prefab);
111  				go.SetActive(true);
112  				Transform t = go.transform;
113  				if (testSetup != TestSetup.Emit) t.position = rndStartupPos[i];
114  				t.parent = container;
115  				testObjsGos[i] = go;
116  				testObjsTrans[i] = t;
117  				if (disableRenderers || testType == TestType.Floats) go.renderer.enabled = false;
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    