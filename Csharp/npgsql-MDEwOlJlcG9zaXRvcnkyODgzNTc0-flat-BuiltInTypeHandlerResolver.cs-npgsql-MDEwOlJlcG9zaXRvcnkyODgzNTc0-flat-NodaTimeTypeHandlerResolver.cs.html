
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Tokens: 12, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>npgsql-MDEwOlJlcG9zaXRvcnkyODgzNTc0-flat-BuiltInTypeHandlerResolver.cs</h3>
            <pre><code>1  using System;
2  using System.Collections.Generic;
3  using System.Collections.Specialized;
4  using System.IO;
5  using System.Net;
6  using System.Net.NetworkInformation;
7  using System.Numerics;
8  using Npgsql.Internal;
9  using Npgsql.Internal.TypeHandlers;
10  using Npgsql.Internal.TypeHandlers.DateTimeHandlers;
11  using Npgsql.Internal.TypeHandlers.FullTextSearchHandlers;
12  using Npgsql.Internal.TypeHandlers.GeometricHandlers;
13  using Npgsql.Internal.TypeHandlers.InternalTypeHandlers;
14  using Npgsql.Internal.TypeHandlers.LTreeHandlers;
15  using Npgsql.Internal.TypeHandlers.NetworkHandlers;
16  using Npgsql.Internal.TypeHandlers.NumericHandlers;
17  using Npgsql.Internal.TypeHandling;
18  using Npgsql.PostgresTypes;
19  using Npgsql.Properties;
20  using NpgsqlTypes;
21  using static Npgsql.Util.Statics;
22  namespace Npgsql.TypeMapping;
23  sealed class BuiltInTypeHandlerResolver : TypeHandlerResolver
24  {
25      readonly NpgsqlConnector _connector;
26      readonly NpgsqlDatabaseInfo _databaseInfo;
27      #region Cached handlers
28      readonly Int16Handler _int16Handler;
29      readonly Int32Handler _int32Handler;
30      readonly Int64Handler _int64Handler;
31      SingleHandler? _singleHandler;
32      readonly DoubleHandler _doubleHandler;
33      readonly NumericHandler _numericHandler;
34      MoneyHandler? _moneyHandler;
35      readonly TextHandler _textHandler;
36      TextHandler? _xmlHandler;
37      TextHandler? _varcharHandler;
38      TextHandler? _charHandler;
39      TextHandler? _nameHandler;
40      TextHandler? _refcursorHandler;
41      TextHandler? _citextHandler;
42      JsonTextHandler? _jsonbHandler;
43      JsonTextHandler? _jsonHandler;
44      JsonPathHandler? _jsonPathHandler;
45      readonly TimestampHandler _timestampHandler;
46      readonly TimestampTzHandler _timestampTzHandler;
47      readonly DateHandler _dateHandler;
48      TimeHandler? _timeHandler;
49      TimeTzHandler? _timeTzHandler;
50      IntervalHandler? _intervalHandler;
51      CidrHandler? _cidrHandler;
52      InetHandler? _inetHandler;
53      MacaddrHandler? _macaddrHandler;
54      MacaddrHandler? _macaddr8Handler;
55      BoxHandler? _boxHandler;
56      CircleHandler? _circleHandler;
57      LineHandler? _lineHandler;
58      LineSegmentHandler? _lineSegmentHandler;
59      PathHandler? _pathHandler;
60      PointHandler? _pointHandler;
61      PolygonHandler? _polygonHandler;
62      LQueryHandler? _lQueryHandler;
63      LTreeHandler? _lTreeHandler;
64      LTxtQueryHandler? _lTxtQueryHandler;
65      UInt32Handler? _oidHandler;
66      UInt32Handler? _xidHandler;
67      UInt64Handler? _xid8Handler;
68      UInt32Handler? _cidHandler;
<span onclick='openModal()' class='match'>69      UInt32Handler? _regtypeHandler;
70      UInt32Handler? _regconfigHandler;
71      readonly BoolHandler _boolHandler;
72      ByteaHandler? _byteaHandler;
</span>73      UuidHandler? _uuidHandler;
74      BitStringHandler? _bitVaryingHandler;
75      BitStringHandler? _bitHandler;
76      VoidHandler? _voidHandler;
77      HstoreHandler? _hstoreHandler;
78      Int2VectorHandler? _int2VectorHandler;
79      OIDVectorHandler? _oidVectorHandler;
80      PgLsnHandler? _pgLsnHandler;
81      TidHandler? _tidHandler;
82      InternalCharHandler? _internalCharHandler;
83      UnknownTypeHandler? _unknownHandler;
84      NpgsqlTypeHandler? _timestampArrayHandler;
85      NpgsqlTypeHandler? _timestampTzArrayHandler;
86      #endregion Cached handlers
87      internal BuiltInTypeHandlerResolver(NpgsqlConnector connector)
88      {
89          _connector = connector;
90          _databaseInfo = connector.DatabaseInfo;
91          _int16Handler = new Int16Handler(PgType("smallint"));
92          _int32Handler = new Int32Handler(PgType("integer"));
93          _int64Handler = new Int64Handler(PgType("bigint"));
94          _doubleHandler = new DoubleHandler(PgType("double precision"));
95          _numericHandler = new NumericHandler(PgType("numeric"));
96          _textHandler ??= new TextHandler(PgType("text"), _connector.TextEncoding);
97          _timestampHandler ??= new TimestampHandler(PgType("timestamp without time zone"));
98          _timestampTzHandler ??= new TimestampTzHandler(PgType("timestamp with time zone"));
99          _dateHandler ??= new DateHandler(PgType("date"));
100          _boolHandler ??= new BoolHandler(PgType("boolean"));
101      }
102      public override NpgsqlTypeHandler? ResolveByDataTypeName(string typeName)
103          => typeName switch
104          {
105              "smallint"             => _int16Handler,
106              "integer" or "int"     => _int32Handler,
107              "bigint"               => _int64Handler,
108              "real"                 => SingleHandler(),
109              "double precision"     => _doubleHandler,
110              "numeric" or "decimal" => _numericHandler,
111              "money"                => MoneyHandler(),
112              "text"                           => _textHandler,
113              "xml"                            => XmlHandler(),
114              "varchar" or "character varying" => VarcharHandler(),
115              "character"                      => CharHandler(),
116              "name"                           => NameHandler(),
117              "refcursor"                      => RefcursorHandler(),
118              "citext"                         => CitextHandler(),
119              "jsonb"                          => JsonbHandler(),
120              "json"                           => JsonHandler(),
121              "jsonpath"                       => JsonPathHandler(),
122              "timestamp" or "timestamp without time zone" => _timestampHandler,
123              "timestamptz" or "timestamp with time zone"  => _timestampTzHandler,
124              "date"                                       => _dateHandler,
125              "time without time zone"                     => TimeHandler(),
126              "time with time zone"                        => TimeTzHandler(),
127              "interval"                                   => IntervalHandler(),
128              "cidr"     => CidrHandler(),
129              "inet"     => InetHandler(),
130              "macaddr"  => MacaddrHandler(),
131              "macaddr8" => Macaddr8Handler(),
132              "box"     => BoxHandler(),
133              "circle"  => CircleHandler(),
134              "line"    => LineHandler(),
135              "lseg"    => LineSegmentHandler(),
136              "path"    => PathHandler(),
137              "point"   => PointHandler(),
138              "polygon" => PolygonHandler(),
139              "lquery"    => LQueryHandler(),
140              "ltree"     => LTreeHandler(),
141              "ltxtquery" => LTxtHandler(),
142              "oid"       => OidHandler(),
143              "xid"       => XidHandler(),
144              "xid8"      => Xid8Handler(),
145              "cid"       => CidHandler(),
146              "regtype"   => RegtypeHandler(),
147              "regconfig" => RegconfigHandler(),
148              "bool" or "boolean"       => _boolHandler,
149              "bytea"                   => ByteaHandler(),
150              "uuid"                    => UuidHandler(),
151              "bit varying" or "varbit" => BitVaryingHandler(),
152              "bit"                     => BitHandler(),
153              "hstore"                  => HstoreHandler(),
154              "int2vector" => Int2VectorHandler(),
155              "oidvector"  => OidVectorHandler(),
156              "pg_lsn"     => PgLsnHandler(),
157              "tid"        => TidHandler(),
158              "char"       => InternalCharHandler(),
159              "void"       => VoidHandler(),
160              "unknown"    => UnknownHandler(),
161              "record" => UnsupportedRecordHandler(),
162              "tsvector" => UnsupportedTsVectorHandler(),
163              "tsquery" => UnsupportedTsQueryHandler(),
164              _ => null
165          };
166      public override NpgsqlTypeHandler? ResolveByClrType(Type type)
167      {
168          if (BuiltInTypeMappingResolver.ClrTypeToDataTypeName(type) is { } dataTypeName)
169              return ResolveByDataTypeName(dataTypeName);
170          if (type.IsSubclassOf(typeof(Stream)))
171              return ResolveByDataTypeName("bytea");
172          switch (type.FullName)
173          {
174          case "NpgsqlTypes.NpgsqlTsVector":
175          case "NpgsqlTypes.NpgsqlTsQueryLexeme":
176          case "NpgsqlTypes.NpgsqlTsQueryAnd":
177          case "NpgsqlTypes.NpgsqlTsQueryOr":
178          case "NpgsqlTypes.NpgsqlTsQueryNot":
179          case "NpgsqlTypes.NpgsqlTsQueryEmpty":
180          case "NpgsqlTypes.NpgsqlTsQueryFollowedBy":
181              return UnsupportedTsQueryHandler();
182          default:
183              return null;
184          }
185      }
186      public override NpgsqlTypeHandler? ResolveValueDependentValue(object value)
187      {
188          if (LegacyTimestampBehavior)
189              return null;
190          return value switch
191          {
192              DateTime dateTime => dateTime.Kind == DateTimeKind.Utc ? _timestampTzHandler : _timestampHandler,
193              IList<DateTime> array => ArrayHandler(array.Count == 0 ? DateTimeKind.Unspecified : array[0].Kind),
194              _ => null
195          };
196          NpgsqlTypeHandler ArrayHandler(DateTimeKind kind)
197              => kind == DateTimeKind.Utc
198                  ? _timestampTzArrayHandler ??= _timestampTzHandler.CreateArrayHandler(
199                      (PostgresArrayType)PgType("timestamp with time zone[]"), _connector.Settings.ArrayNullabilityMode)
200                  : _timestampArrayHandler ??= _timestampHandler.CreateArrayHandler(
201                      (PostgresArrayType)PgType("timestamp without time zone[]"), _connector.Settings.ArrayNullabilityMode);
202      }
203      public override NpgsqlTypeHandler? ResolveValueTypeGenerically<T>(T value)
204      {
205          if (typeof(T) == typeof(byte))
206              return _int16Handler;
207          if (typeof(T) == typeof(short))
208              return _int16Handler;
209          if (typeof(T) == typeof(int))
210              return _int32Handler;
211          if (typeof(T) == typeof(long))
212              return _int64Handler;
213          if (typeof(T) == typeof(float))
214              return SingleHandler();
215          if (typeof(T) == typeof(double))
216              return _doubleHandler;
217          if (typeof(T) == typeof(decimal))
218              return _numericHandler;
219          if (typeof(T) == typeof(BigInteger))
220              return _numericHandler;
221          if (typeof(T) == typeof(char))
222              return _textHandler;
223          if (typeof(T) == typeof(ArraySegment<char>))
224              return _textHandler;
225          if (typeof(T) == typeof(DateTimeOffset))
226              return _timestampTzHandler;
227  #if NET6_0_OR_GREATER
228          if (typeof(T) == typeof(DateOnly))
229              return _dateHandler;
230          if (typeof(T) == typeof(TimeOnly))
231              return _timeHandler;
232  #endif
233          if (typeof(T) == typeof(TimeSpan))
234              return _intervalHandler;
235          if (typeof(T) == typeof(NpgsqlInterval))
236              return _intervalHandler;
237          if (typeof(T) == typeof(IPAddress))
238              return InetHandler();
239          if (typeof(T) == typeof(PhysicalAddress))
240              return _macaddrHandler;
241          if (typeof(T) == typeof(TimeSpan))
242              return _intervalHandler;
243          if (typeof(T) == typeof(NpgsqlBox))
244              return BoxHandler();
245          if (typeof(T) == typeof(NpgsqlCircle))
246              return CircleHandler();
247          if (typeof(T) == typeof(NpgsqlLine))
248              return LineHandler();
249          if (typeof(T) == typeof(NpgsqlLSeg))
250              return LineSegmentHandler();
251          if (typeof(T) == typeof(NpgsqlPath))
252              return PathHandler();
253          if (typeof(T) == typeof(NpgsqlPoint))
254              return PointHandler();
255          if (typeof(T) == typeof(NpgsqlPolygon))
256              return PolygonHandler();
257          if (typeof(T) == typeof(bool))
258              return _boolHandler;
259          if (typeof(T) == typeof(Guid))
260              return UuidHandler();
261          if (typeof(T) == typeof(BitVector32))
262              return BitVaryingHandler();
263          if (typeof(T) == typeof(NpgsqlLogSequenceNumber))
264              return PgLsnHandler();
265          if (typeof(T) == typeof(NpgsqlTid))
266              return TidHandler();
267          if (typeof(T) == typeof(DBNull))
268              return UnknownHandler();
269          return null;
270      }
271      PostgresType PgType(string pgTypeName) => _databaseInfo.GetPostgresTypeByName(pgTypeName);
272      #region Handler accessors
273      NpgsqlTypeHandler SingleHandler() => _singleHandler ??= new SingleHandler(PgType("real"));
274      NpgsqlTypeHandler MoneyHandler()  => _moneyHandler ??= new MoneyHandler(PgType("money"));
275      NpgsqlTypeHandler XmlHandler()       => _xmlHandler ??= new TextHandler(PgType("xml"), _connector.TextEncoding);
276      NpgsqlTypeHandler VarcharHandler()   => _varcharHandler ??= new TextHandler(PgType("character varying"), _connector.TextEncoding);
277      NpgsqlTypeHandler CharHandler()      => _charHandler ??= new TextHandler(PgType("character"), _connector.TextEncoding);
278      NpgsqlTypeHandler NameHandler()      => _nameHandler ??= new TextHandler(PgType("name"), _connector.TextEncoding);
279      NpgsqlTypeHandler RefcursorHandler() => _refcursorHandler ??= new TextHandler(PgType("refcursor"), _connector.TextEncoding);
280      NpgsqlTypeHandler? CitextHandler()   => _citextHandler ??= _databaseInfo.TryGetPostgresTypeByName("citext", out var pgType)
281          ? new TextHandler(pgType, _connector.TextEncoding)
282          : null;
283      NpgsqlTypeHandler JsonbHandler()     => _jsonbHandler ??= new JsonTextHandler(PgType("jsonb"), _connector.TextEncoding, isJsonb: true);
284      NpgsqlTypeHandler JsonHandler()      => _jsonHandler ??= new JsonTextHandler(PgType("json"), _connector.TextEncoding, isJsonb: false);
285      NpgsqlTypeHandler JsonPathHandler()  => _jsonPathHandler ??= new JsonPathHandler(PgType("jsonpath"), _connector.TextEncoding);
286      NpgsqlTypeHandler TimeHandler()     => _timeHandler ??= new TimeHandler(PgType("time without time zone"));
287      NpgsqlTypeHandler TimeTzHandler()   => _timeTzHandler ??= new TimeTzHandler(PgType("time with time zone"));
288      NpgsqlTypeHandler IntervalHandler() => _intervalHandler ??= new IntervalHandler(PgType("interval"));
289      NpgsqlTypeHandler CidrHandler()     => _cidrHandler ??= new CidrHandler(PgType("cidr"));
290      NpgsqlTypeHandler InetHandler()     => _inetHandler ??= new InetHandler(PgType("inet"));
291      NpgsqlTypeHandler MacaddrHandler()  => _macaddrHandler ??= new MacaddrHandler(PgType("macaddr"));
292      NpgsqlTypeHandler Macaddr8Handler() => _macaddr8Handler ??= new MacaddrHandler(PgType("macaddr8"));
293      NpgsqlTypeHandler BoxHandler()         => _boxHandler ??= new BoxHandler(PgType("box"));
294      NpgsqlTypeHandler CircleHandler()      => _circleHandler ??= new CircleHandler(PgType("circle"));
295      NpgsqlTypeHandler LineHandler()        => _lineHandler ??= new LineHandler(PgType("line"));
296      NpgsqlTypeHandler LineSegmentHandler() => _lineSegmentHandler ??= new LineSegmentHandler(PgType("lseg"));
297      NpgsqlTypeHandler PathHandler()        => _pathHandler ??= new PathHandler(PgType("path"));
298      NpgsqlTypeHandler PointHandler()       => _pointHandler ??= new PointHandler(PgType("point"));
299      NpgsqlTypeHandler PolygonHandler()     => _polygonHandler ??= new PolygonHandler(PgType("polygon"));
300      NpgsqlTypeHandler? LQueryHandler() => _lQueryHandler ??= _databaseInfo.TryGetPostgresTypeByName("lquery", out var pgType)
301          ? new LQueryHandler(pgType, _connector.TextEncoding)
302          : null;
303      NpgsqlTypeHandler? LTreeHandler()  => _lTreeHandler ??= _databaseInfo.TryGetPostgresTypeByName("ltree", out var pgType)
304          ? new LTreeHandler(pgType, _connector.TextEncoding)
305          : null;
306      NpgsqlTypeHandler? LTxtHandler()   => _lTxtQueryHandler ??= _databaseInfo.TryGetPostgresTypeByName("ltxtquery", out var pgType)
307          ? new LTxtQueryHandler(pgType, _connector.TextEncoding)
308          : null;
309      NpgsqlTypeHandler OidHandler()       => _oidHandler ??= new UInt32Handler(PgType("oid"));
310      NpgsqlTypeHandler XidHandler()       => _xidHandler ??= new UInt32Handler(PgType("xid"));
311      NpgsqlTypeHandler Xid8Handler()      => _xid8Handler ??= new UInt64Handler(PgType("xid8"));
312      NpgsqlTypeHandler CidHandler()       => _cidHandler ??= new UInt32Handler(PgType("cid"));
313      NpgsqlTypeHandler RegtypeHandler()   => _regtypeHandler ??= new UInt32Handler(PgType("regtype"));
314      NpgsqlTypeHandler RegconfigHandler() => _regconfigHandler ??= new UInt32Handler(PgType("regconfig"));
315      NpgsqlTypeHandler ByteaHandler()      => _byteaHandler ??= new ByteaHandler(PgType("bytea"));
316      NpgsqlTypeHandler UuidHandler()       => _uuidHandler ??= new UuidHandler(PgType("uuid"));
317      NpgsqlTypeHandler BitVaryingHandler() => _bitVaryingHandler ??= new BitStringHandler(PgType("bit varying"));
318      NpgsqlTypeHandler BitHandler()        => _bitHandler ??= new BitStringHandler(PgType("bit"));
319      NpgsqlTypeHandler? HstoreHandler()    => _hstoreHandler ??= _databaseInfo.TryGetPostgresTypeByName("hstore", out var pgType)
320          ? new HstoreHandler(pgType, _textHandler)
321          : null;
322      NpgsqlTypeHandler Int2VectorHandler()   => _int2VectorHandler ??= new Int2VectorHandler(PgType("int2vector"), PgType("smallint"));
323      NpgsqlTypeHandler OidVectorHandler()    => _oidVectorHandler ??= new OIDVectorHandler(PgType("oidvector"), PgType("oid"));
324      NpgsqlTypeHandler PgLsnHandler()        => _pgLsnHandler ??= new PgLsnHandler(PgType("pg_lsn"));
325      NpgsqlTypeHandler TidHandler()          => _tidHandler ??= new TidHandler(PgType("tid"));
326      NpgsqlTypeHandler InternalCharHandler() => _internalCharHandler ??= new InternalCharHandler(PgType("char"));
327      NpgsqlTypeHandler VoidHandler()         => _voidHandler ??= new VoidHandler(PgType("void"));
328      NpgsqlTypeHandler UnsupportedRecordHandler() => new UnsupportedHandler(PgType("record"), string.Format(
329          NpgsqlStrings.RecordsNotEnabled, nameof(NpgsqlSlimDataSourceBuilder.EnableRecords), nameof(NpgsqlSlimDataSourceBuilder)));
330      NpgsqlTypeHandler UnsupportedTsVectorHandler() => new UnsupportedHandler(PgType("tsvector"), string.Format(
331          NpgsqlStrings.FullTextSearchNotEnabled, nameof(NpgsqlSlimDataSourceBuilder.EnableFullTextSearch),
332          nameof(NpgsqlSlimDataSourceBuilder)));
333      NpgsqlTypeHandler UnsupportedTsQueryHandler() => new UnsupportedHandler(PgType("tsquery"), string.Format(
334          NpgsqlStrings.FullTextSearchNotEnabled, nameof(NpgsqlSlimDataSourceBuilder.EnableFullTextSearch),
335          nameof(NpgsqlSlimDataSourceBuilder)));
336      NpgsqlTypeHandler UnknownHandler() => _unknownHandler ??= new UnknownTypeHandler(_connector.TextEncoding);
337      #endregion Handler accessors
338  }
</code></pre>
        </div>
        <div class="column">
            <h3>npgsql-MDEwOlJlcG9zaXRvcnkyODgzNTc0-flat-NodaTimeTypeHandlerResolver.cs</h3>
            <pre><code>1  using System;
2  using NodaTime;
3  using Npgsql.Internal;
4  using Npgsql.Internal.TypeHandlers;
5  using Npgsql.Internal.TypeHandling;
6  using Npgsql.PostgresTypes;
7  using NpgsqlTypes;
8  using static Npgsql.NodaTime.Internal.NodaTimeUtils;
9  namespace Npgsql.NodaTime.Internal;
10  public class NodaTimeTypeHandlerResolver : TypeHandlerResolver
11  {
12      readonly NpgsqlDatabaseInfo _databaseInfo;
13      readonly NpgsqlTypeHandler _timestampHandler;
14      readonly NpgsqlTypeHandler _timestampTzHandler;
15      readonly DateHandler _dateHandler;
16      readonly TimeHandler _timeHandler;
17      readonly TimeTzHandler _timeTzHandler;
18      readonly IntervalHandler _intervalHandler;
19      TimestampTzRangeHandler? _timestampTzRangeHandler;
20      DateRangeHandler? _dateRangeHandler;
21      DateMultirangeHandler? _dateMultirangeHandler;
22      TimestampTzMultirangeHandler? _timestampTzMultirangeHandler;
<span onclick='openModal()' class='match'>23      NpgsqlTypeHandler? _timestampTzRangeArray;
24      NpgsqlTypeHandler? _dateRangeArray;
25      readonly ArrayNullabilityMode _arrayNullabilityMode;
26      internal NodaTimeTypeHandlerResolver(NpgsqlConnector connector)
</span>27      {
28          _databaseInfo = connector.DatabaseInfo;
29          _timestampHandler = LegacyTimestampBehavior
30              ? new LegacyTimestampHandler(PgType("timestamp without time zone"))
31              : new TimestampHandler(PgType("timestamp without time zone"));
32          _timestampTzHandler = LegacyTimestampBehavior
33              ? new LegacyTimestampTzHandler(PgType("timestamp with time zone"))
34              : new TimestampTzHandler(PgType("timestamp with time zone"));
35          _dateHandler = new DateHandler(PgType("date"));
36          _timeHandler = new TimeHandler(PgType("time without time zone"));
37          _timeTzHandler = new TimeTzHandler(PgType("time with time zone"));
38          _intervalHandler = new IntervalHandler(PgType("interval"));
39          _arrayNullabilityMode = connector.Settings.ArrayNullabilityMode;
40      }
41      public override NpgsqlTypeHandler? ResolveByDataTypeName(string typeName)
42          => typeName switch
43          {
44              "timestamp" or "timestamp without time zone" => _timestampHandler,
45              "timestamptz" or "timestamp with time zone" => _timestampTzHandler,
46              "date" => _dateHandler,
47              "time without time zone" => _timeHandler,
48              "time with time zone" => _timeTzHandler,
49              "interval" => _intervalHandler,
50              "tstzrange" => TsTzRange(),
51              "daterange" => DateRange(),
52              "tstzmultirange" => TsTzMultirange(),
53              "datemultirange" => DateMultirange(),
54              "tstzrange[]" => TsTzRangeArray(),
55              "daterange[]" => DateRangeArray(),
56              _ => null
57          };
58      public override NpgsqlTypeHandler? ResolveByClrType(Type type)
59          => NodaTimeTypeMappingResolver.ClrTypeToDataTypeName(type) is { } dataTypeName && ResolveByDataTypeName(dataTypeName) is { } handler
60              ? handler
61              : null;
62      public override NpgsqlTypeHandler? ResolveByNpgsqlDbType(NpgsqlDbType npgsqlDbType)
63          => npgsqlDbType switch
64          {
65              NpgsqlDbType.TimestampTzRange => TsTzRange(),
66              NpgsqlDbType.DateRange => DateRange(),
67              NpgsqlDbType.TimestampTzMultirange => TsTzMultirange(),
68              NpgsqlDbType.DateMultirange => DateMultirange(),
69              NpgsqlDbType.TimestampTzRange | NpgsqlDbType.Array => TsTzRangeArray(),
70              NpgsqlDbType.DateRange | NpgsqlDbType.Array => TsTzRangeArray(),
71              _ => null
72          };
73      public override NpgsqlTypeHandler? ResolveValueTypeGenerically<T>(T value)
74      {
75          if (typeof(T) == typeof(Instant))
76              return LegacyTimestampBehavior ? _timestampHandler : _timestampTzHandler;
77          if (typeof(T) == typeof(LocalDateTime))
78              return _timestampHandler;
79          if (typeof(T) == typeof(ZonedDateTime))
80              return _timestampTzHandler;
81          if (typeof(T) == typeof(OffsetDateTime))
82              return _timestampTzHandler;
83          if (typeof(T) == typeof(LocalDate))
84              return _dateHandler;
85          if (typeof(T) == typeof(LocalTime))
86              return _timeHandler;
87          if (typeof(T) == typeof(OffsetTime))
88              return _timeTzHandler;
89          if (typeof(T) == typeof(Period))
90              return _intervalHandler;
91          if (typeof(T) == typeof(Duration))
92              return _intervalHandler;
93          if (typeof(T) == typeof(Interval))
94              return _timestampTzRangeHandler;
95          if (typeof(T) == typeof(NpgsqlRange<Instant>))
96              return _timestampTzRangeHandler;
97          if (typeof(T) == typeof(NpgsqlRange<ZonedDateTime>))
98              return _timestampTzRangeHandler;
99          if (typeof(T) == typeof(NpgsqlRange<OffsetDateTime>))
100              return _timestampTzRangeHandler;
101          if (typeof(T) == typeof(NpgsqlRange<LocalDate>))
102              return _dateRangeHandler;
103          return null;
104      }
105      PostgresType PgType(string pgTypeName) => _databaseInfo.GetPostgresTypeByName(pgTypeName);
106      TimestampTzRangeHandler TsTzRange()
107          => _timestampTzRangeHandler ??= new TimestampTzRangeHandler(PgType("tstzrange"), _timestampTzHandler);
108      DateRangeHandler DateRange()
109          => _dateRangeHandler ??= new DateRangeHandler(PgType("daterange"), _dateHandler);
110      NpgsqlTypeHandler TsTzMultirange()
111          => _timestampTzMultirangeHandler ??=
112              new TimestampTzMultirangeHandler((PostgresMultirangeType)PgType("tstzmultirange"), TsTzRange());
113      NpgsqlTypeHandler DateMultirange()
114          => _dateMultirangeHandler ??= new DateMultirangeHandler((PostgresMultirangeType)PgType("datemultirange"), DateRange());
115      NpgsqlTypeHandler TsTzRangeArray()
116          => _timestampTzRangeArray ??=
117              new ArrayHandler((PostgresArrayType)PgType("tstzrange[]"), TsTzRange(), _arrayNullabilityMode);
118      NpgsqlTypeHandler DateRangeArray()
119          => _dateRangeArray ??=
120              new ArrayHandler((PostgresArrayType)PgType("daterange[]"), DateRange(), _arrayNullabilityMode);
121  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from npgsql-MDEwOlJlcG9zaXRvcnkyODgzNTc0-flat-BuiltInTypeHandlerResolver.cs</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from npgsql-MDEwOlJlcG9zaXRvcnkyODgzNTc0-flat-NodaTimeTypeHandlerResolver.cs</div>
                </div>
                <div class="column column_space"><pre><code>69      UInt32Handler? _regtypeHandler;
70      UInt32Handler? _regconfigHandler;
71      readonly BoolHandler _boolHandler;
72      ByteaHandler? _byteaHandler;
</pre></code></div>
                <div class="column column_space"><pre><code>23      NpgsqlTypeHandler? _timestampTzRangeArray;
24      NpgsqlTypeHandler? _dateRangeArray;
25      readonly ArrayNullabilityMode _arrayNullabilityMode;
26      internal NodaTimeTypeHandlerResolver(NpgsqlConnector connector)
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    