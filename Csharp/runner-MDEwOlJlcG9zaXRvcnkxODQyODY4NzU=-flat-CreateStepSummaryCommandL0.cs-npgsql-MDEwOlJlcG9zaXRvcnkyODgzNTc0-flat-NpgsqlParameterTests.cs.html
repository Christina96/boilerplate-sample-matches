
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 22.93986636971047%, Tokens: 17, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>runner-MDEwOlJlcG9zaXRvcnkxODQyODY4NzU=-flat-CreateStepSummaryCommandL0.cs</h3>
            <pre><code>1  using System;
2  using System.Collections.Generic;
3  using System.IO;
4  using System.Text;
5  using System.Runtime.CompilerServices;
6  using GitHub.Runner.Common.Util;
7  using GitHub.Runner.Sdk;
8  using GitHub.Runner.Worker;
9  using Moq;
10  using Xunit;
11  using DTWebApi = GitHub.DistributedTask.WebApi;
12  using GitHub.DistributedTask.WebApi;
13  using Pipelines = GitHub.DistributedTask.Pipelines;
14  namespace GitHub.Runner.Common.Tests.Worker
15  {
16      public sealed class CreateStepSummaryCommandL0
17      {
18          private Mock<IExecutionContext> _executionContext;
19          private Mock<IJobServerQueue> _jobServerQueue;
20          private ExecutionContext _jobExecutionContext;
21          private List<Tuple<DTWebApi.Issue, string>> _issues;
22          private Variables _variables;
23          private string _rootDirectory;
24          private CreateStepSummaryCommand _createStepCommand;
25          private ITraceWriter _trace;
26          [Fact]
27          [Trait("Level", "L0")]
28          [Trait("Category", "Worker")]
29          public void CreateStepSummaryCommand_FileNull()
30          {
31              using (var hostContext = Setup())
32              {
33                  _createStepCommand.ProcessCommand(_executionContext.Object, null, null);
34                  _jobExecutionContext.Complete();
35                  _jobServerQueue.Verify(x => x.QueueFileUpload(It.IsAny<Guid>(), It.IsAny<Guid>(), It.IsAny<string>(), It.IsAny<string>(), It.IsAny<string>(), It.IsAny<bool>()), Times.Never());
36                  Assert.Equal(0, _issues.Count);
37              }
38          }
39          [Fact]
40          [Trait("Level", "L0")]
41          [Trait("Category", "Worker")]
42          public void CreateStepSummaryCommand_DirectoryNotFound()
43          {
44              using (var hostContext = Setup())
45              {
46                  var stepSummaryFile = Path.Combine(_rootDirectory, "directory-not-found", "env");
47                  _createStepCommand.ProcessCommand(_executionContext.Object, stepSummaryFile, null);
48                  _jobExecutionContext.Complete();
49                  _jobServerQueue.Verify(x => x.QueueFileUpload(It.IsAny<Guid>(), It.IsAny<Guid>(), It.IsAny<string>(), It.IsAny<string>(), It.IsAny<string>(), It.IsAny<bool>()), Times.Never());
50                  Assert.Equal(0, _issues.Count);
51              }
52          }
53          [Fact]
54          [Trait("Level", "L0")]
55          [Trait("Category", "Worker")]
56          public void CreateStepSummaryCommand_FileNotFound()
57          {
58              using (var hostContext = Setup())
59              {
60                  var stepSummaryFile = Path.Combine(_rootDirectory, "file-not-found");
61                  _createStepCommand.ProcessCommand(_executionContext.Object, stepSummaryFile, null);
62                  _jobExecutionContext.Complete();
63                  _jobServerQueue.Verify(x => x.QueueFileUpload(It.IsAny<Guid>(), It.IsAny<Guid>(), It.IsAny<string>(), It.IsAny<string>(), It.IsAny<string>(), It.IsAny<bool>()), Times.Never());
64                  Assert.Equal(0, _issues.Count);
65              }
66          }
67          [Fact]
68          [Trait("Level", "L0")]
69          [Trait("Category", "Worker")]
70          public void CreateStepSummaryCommand_EmptyFile()
71          {
72              using (var hostContext = Setup())
73              {
74                  var stepSummaryFile = Path.Combine(_rootDirectory, "empty-file");
75                  File.Create(stepSummaryFile).Dispose();
76                  _createStepCommand.ProcessCommand(_executionContext.Object, stepSummaryFile, null);
77                  _jobExecutionContext.Complete();
78                  _jobServerQueue.Verify(x => x.QueueFileUpload(It.IsAny<Guid>(), It.IsAny<Guid>(), It.IsAny<string>(), It.IsAny<string>(), It.IsAny<string>(), It.IsAny<bool>()), Times.Never());
79                  Assert.Equal(0, _issues.Count);
80              }
81          }
82          [Fact]
83          [Trait("Level", "L0")]
84          [Trait("Category", "Worker")]
85          public void CreateStepSummaryCommand_LargeFile()
86          {
87              using (var hostContext = Setup())
88              {
<span onclick='openModal()' class='match'>89                  var stepSummaryFile = Path.Combine(_rootDirectory, "empty-file");
90                  File.WriteAllBytes(stepSummaryFile, new byte[CreateStepSummaryCommand.AttachmentSizeLimit + 1]);
91                  _createStepCommand.ProcessCommand(_executionContext.Object, stepSummaryFile, null);
92                  _jobExecutionContext.Complete();
93                  _jobServerQueue.Verify(x => x.QueueFileUpload(It.IsAny<Guid>(), It.IsAny<Guid>(), It.IsAny<string>(), It.IsAny<string>(), It.IsAny<string>(), It.IsAny<bool>()), Times.Never());
94                  Assert.Equal(1, _issues.Count);
95              }
96          }
97          [Fact]
</span>98          [Trait("Level", "L0")]
99          [Trait("Category", "Worker")]
100          public void CreateStepSummaryCommand_Simple()
101          {
102              using (var hostContext = Setup())
103              {
104                  var stepSummaryFile = Path.Combine(_rootDirectory, "simple");
105                  var content = new List<string>
106                  {
107                      "# This is some markdown content",
108                      "",
109                      "## This is more markdown content",
110                  };
111                  WriteContent(stepSummaryFile, content);
112                  _createStepCommand.ProcessCommand(_executionContext.Object, stepSummaryFile, null);
113                  _jobExecutionContext.Complete();
114                  _jobServerQueue.Verify(x => x.QueueFileUpload(It.IsAny<Guid>(), It.IsAny<Guid>(), ChecksAttachmentType.StepSummary, _executionContext.Object.Id.ToString(), stepSummaryFile + "-scrubbed", It.IsAny<bool>()), Times.Once());
115                  Assert.Equal(0, _issues.Count);
116              }
117          }
118          [Fact]
119          [Trait("Level", "L0")]
120          [Trait("Category", "Worker")]
121          public void CreateStepSummaryCommand_ScrubSecrets()
122          {
123              using (var hostContext = Setup())
124              {
125                  hostContext.SecretMasker.AddRegex("Password=.*");
126                  hostContext.SecretMasker.AddRegex("ghs_.*");
127                  var stepSummaryFile = Path.Combine(_rootDirectory, "simple");
128                  var scrubbedFile = stepSummaryFile + "-scrubbed";
129                  var content = new List<string>
130                  {
131                      "# Password=ThisIsMySecretPassword!",
132                      "",
133                      "# GITHUB_TOKEN ghs_verysecuretoken",
134                  };
135                  WriteContent(stepSummaryFile, content);
136                  _createStepCommand.ProcessCommand(_executionContext.Object, stepSummaryFile, null);
137                  var scrubbedFileContents = File.ReadAllText(scrubbedFile);
138                  Assert.DoesNotContain("ThisIsMySecretPassword!", scrubbedFileContents);
139                  Assert.DoesNotContain("ghs_verysecuretoken", scrubbedFileContents);
140                  _jobExecutionContext.Complete();
141                  _jobServerQueue.Verify(x => x.QueueFileUpload(It.IsAny<Guid>(), It.IsAny<Guid>(), ChecksAttachmentType.StepSummary, _executionContext.Object.Id.ToString(), scrubbedFile, It.IsAny<bool>()), Times.Once());
142                  Assert.Equal(0, _issues.Count);
143              }
144          }
145          private void WriteContent(
146              string path,
147              List<string> content,
148              string newline = null)
149          {
150              if (string.IsNullOrEmpty(newline))
151              {
152                  newline = Environment.NewLine;
153              }
154              var encoding = new UTF8Encoding(true); 
155              var contentStr = string.Join(newline, content);
156              File.WriteAllText(path, contentStr, encoding);
157          }
158          private TestHostContext Setup([CallerMemberName] string name = "")
159          {
160              var hostContext = new TestHostContext(this, name);
161              _issues = new List<Tuple<DTWebApi.Issue, string>>();
162              TaskOrchestrationPlanReference plan = new();
163              TimelineReference timeline = new();
164              Guid jobId = Guid.NewGuid();
165              string jobName = "Summary Job";
166              var jobRequest = new Pipelines.AgentJobRequestMessage(plan, timeline, jobId, jobName, jobName, null, null, null, new Dictionary<string, VariableValue>(), new List<MaskHint>(), new Pipelines.JobResources(), new Pipelines.ContextData.DictionaryContextData(), new Pipelines.WorkspaceOptions(), new List<Pipelines.ActionStep>(), null, null, null, null);
167              jobRequest.Resources.Repositories.Add(new Pipelines.RepositoryResource()
168              {
169                  Alias = Pipelines.PipelineConstants.SelfAlias,
170                  Id = "github",
171                  Version = "sha1"
172              });
173              jobRequest.ContextData["github"] = new Pipelines.ContextData.DictionaryContextData();
174              jobRequest.Variables["ACTIONS_STEP_DEBUG"] = "true";
175              _jobServerQueue = new Mock<IJobServerQueue>();
176              _jobServerQueue.Setup(x => x.QueueTimelineRecordUpdate(It.IsAny<Guid>(), It.IsAny<TimelineRecord>()));
177              hostContext.SetSingleton(_jobServerQueue.Object);
178              var configurationStore = new Mock<IConfigurationStore>();
179              configurationStore.Setup(x => x.GetSettings()).Returns(new RunnerSettings());
180              hostContext.SetSingleton(configurationStore.Object);
181              var pagingLogger = new Mock<IPagingLogger>();
182              hostContext.EnqueueInstance(pagingLogger.Object);
183              _trace = hostContext.GetTrace();
184              _variables = new Variables(hostContext, new Dictionary<string, VariableValue>
185                  {
186                      { "MySecretName", new VariableValue("My secret value", true) },
187                  });
188              var workDirectory = hostContext.GetDirectory(WellKnownDirectory.Work);
189              ArgUtil.NotNullOrEmpty(workDirectory, nameof(workDirectory));
190              Directory.CreateDirectory(workDirectory);
191              _rootDirectory = Path.Combine(workDirectory, nameof(CreateStepSummaryCommandL0));
192              Directory.CreateDirectory(_rootDirectory);
193              _jobExecutionContext = new ExecutionContext();
194              _jobExecutionContext.Initialize(hostContext);
195              _jobExecutionContext.InitializeJob(jobRequest, System.Threading.CancellationToken.None);
196              _executionContext = new Mock<IExecutionContext>();
197              _executionContext.Setup(x => x.Global)
198                  .Returns(new GlobalContext
199                  {
200                      EnvironmentVariables = new Dictionary<string, string>(VarUtil.EnvironmentVariableKeyComparer),
201                      WriteDebug = true,
202                      Variables = _variables,
203                  });
204              _executionContext.Setup(x => x.AddIssue(It.IsAny<DTWebApi.Issue>(), It.IsAny<ExecutionContextLogOptions>()))
205                  .Callback((DTWebApi.Issue issue, ExecutionContextLogOptions logOptions) =>
206                  {
207                      var resolvedMessage = issue.Message;
208                      if (logOptions.WriteToLog && !string.IsNullOrEmpty(logOptions.LogMessageOverride))
209                      {
210                          resolvedMessage = logOptions.LogMessageOverride;
211                      }
212                      _issues.Add(new(issue, resolvedMessage));
213                      _trace.Info($"Issue '{issue.Type}': {resolvedMessage}");
214                  });
215              _executionContext.Setup(x => x.Write(It.IsAny<string>(), It.IsAny<string>()))
216                  .Callback((string tag, string message) =>
217                  {
218                      _trace.Info($"{tag}{message}");
219                  });
220              _executionContext.SetupGet(x => x.Root).Returns(_jobExecutionContext);
221              _createStepCommand = new CreateStepSummaryCommand();
222              _createStepCommand.Initialize(hostContext);
223              return hostContext;
224          }
225      }
226  }
</code></pre>
        </div>
        <div class="column">
            <h3>npgsql-MDEwOlJlcG9zaXRvcnkyODgzNTc0-flat-NpgsqlParameterTests.cs</h3>
            <pre><code>1  using NpgsqlTypes;
2  using NUnit.Framework;
3  using System;
4  using System.Collections.Generic;
5  using System.Data;
6  using System.Data.Common;
7  namespace Npgsql.Tests;
8  public class NpgsqlParameterTest : TestBase
9  {
10      [Test, Description("Makes sure that when NpgsqlDbType or Value/NpgsqlValue are set, DbType and NpgsqlDbType are set accordingly")]
11      public void Implicit_setting_of_DbType()
12      {
13          var p = new NpgsqlParameter("p", DbType.Int32);
14          Assert.That(p.NpgsqlDbType, Is.EqualTo(NpgsqlDbType.Integer));
15          p = new NpgsqlParameter("p", 8);
16          Assert.That(p.NpgsqlDbType, Is.EqualTo(NpgsqlDbType.Integer));
17          Assert.That(p.DbType, Is.EqualTo(DbType.Int32));
18          p.Value = 3.0;
19          Assert.That(p.NpgsqlDbType, Is.EqualTo(NpgsqlDbType.Double));
20          Assert.That(p.DbType, Is.EqualTo(DbType.Double));
21          p.NpgsqlDbType = NpgsqlDbType.Bytea;
22          Assert.That(p.NpgsqlDbType, Is.EqualTo(NpgsqlDbType.Bytea));
23          Assert.That(p.DbType, Is.EqualTo(DbType.Binary));
24          p.Value = "dont_change";
25          Assert.That(p.NpgsqlDbType, Is.EqualTo(NpgsqlDbType.Bytea));
26          Assert.That(p.DbType, Is.EqualTo(DbType.Binary));
27          p = new NpgsqlParameter("p", new int[0]);
28          Assert.That(p.NpgsqlDbType, Is.EqualTo(NpgsqlDbType.Array | NpgsqlDbType.Integer));
29          Assert.That(p.DbType, Is.EqualTo(DbType.Object));
30      }
31      [Test]
32      public void DataTypeName()
33      {
34          using var conn = OpenConnection();
35          using var cmd = new NpgsqlCommand("SELECT @p", conn);
36          var p1 = new NpgsqlParameter { ParameterName = "p", Value = 8, DataTypeName = "integer" };
37          cmd.Parameters.Add(p1);
38          Assert.That(cmd.ExecuteScalar(), Is.EqualTo(8));
39          p1.DataTypeName = "text";
40          Assert.That(() => cmd.ExecuteScalar(), Throws.Exception.TypeOf<InvalidCastException>());
41          cmd.Parameters.Clear();
42          var p2 = new NpgsqlParameter<int> { ParameterName = "p", TypedValue = 8, DataTypeName = "integer" };
43          cmd.Parameters.Add(p2);
44          Assert.That(cmd.ExecuteScalar(), Is.EqualTo(8));
45          p2.DataTypeName = "text";
46          Assert.That(() => cmd.ExecuteScalar(), Throws.Exception.TypeOf<InvalidCastException>());
47      }
48      [Test]
49      public void Positional_parameter_is_positional()
50      {
51          var p = new NpgsqlParameter(NpgsqlParameter.PositionalName, 1);
52          Assert.That(p.IsPositional, Is.True);
53          var p2 = new NpgsqlParameter(null, 1);
54          Assert.That(p2.IsPositional, Is.True);
55      }
56      [Test]
57      public void Infer_data_type_name_from_NpgsqlDbType()
58      {
59          var p = new NpgsqlParameter("par_field1", NpgsqlDbType.Varchar, 50);
60          Assert.That(p.DataTypeName, Is.EqualTo("character varying"));
61      }
62      [Test]
63      public void Infer_data_type_name_from_DbType()
64      {
65          var p = new NpgsqlParameter("par_field1", DbType.String , 50);
66          Assert.That(p.DataTypeName, Is.EqualTo("text"));
67      }
68      [Test]
69      public void Infer_data_type_name_from_NpgsqlDbType_for_array()
70      {
71          var p = new NpgsqlParameter("int_array", NpgsqlDbType.Array | NpgsqlDbType.Integer);
72          Assert.That(p.DataTypeName, Is.EqualTo("integer[]"));
73      }
74      [Test]
75      public void Infer_data_type_name_from_NpgsqlDbType_for_built_in_range()
76      {
77          var p = new NpgsqlParameter("numeric_range", NpgsqlDbType.Range | NpgsqlDbType.Numeric);
78          Assert.That(p.DataTypeName, Is.EqualTo("numrange"));
79      }
80      [Test]
81      public void Cannot_infer_data_type_name_from_NpgsqlDbType_for_unknown_range()
82      {
83          var p = new NpgsqlParameter("text_range", NpgsqlDbType.Range | NpgsqlDbType.Text);
84          Assert.That(p.DataTypeName, Is.EqualTo(null));
85      }
86      [Test]
87      public void Infer_data_type_name_from_ClrType()
88      {
89          var p = new NpgsqlParameter("p1", new Dictionary<string, string>());
90          Assert.That(p.DataTypeName, Is.EqualTo("hstore"));
91      }
92      [Test]
93      public void Setting_DbType_sets_NpgsqlDbType()
94      {
95          var p = new NpgsqlParameter();
96          p.DbType = DbType.Binary;
97          Assert.That(p.NpgsqlDbType, Is.EqualTo(NpgsqlDbType.Bytea));
98      }
99      [Test]
100      public void Setting_NpgsqlDbType_sets_DbType()
101      {
102          var p = new NpgsqlParameter();
103          p.NpgsqlDbType = NpgsqlDbType.Bytea;
104          Assert.That(p.DbType, Is.EqualTo(DbType.Binary));
105      }
106      [Test]
107      public void Setting_value_does_not_change_DbType()
108      {
109          var p = new NpgsqlParameter { DbType = DbType.String, NpgsqlDbType = NpgsqlDbType.Bytea };
110          p.Value = 8;
111          Assert.That(p.DbType, Is.EqualTo(DbType.Binary));
112          Assert.That(p.NpgsqlDbType, Is.EqualTo(NpgsqlDbType.Bytea));
113      }
114      #region Constructors
115      [Test]
116      public void Constructor1()
117      {
118          var p = new NpgsqlParameter();
119          Assert.AreEqual(DbType.Object, p.DbType, "DbType");
120          Assert.AreEqual(ParameterDirection.Input, p.Direction, "Direction");
121          Assert.IsFalse(p.IsNullable, "IsNullable");
122          Assert.AreEqual(string.Empty, p.ParameterName, "ParameterName");
123          Assert.AreEqual(0, p.Precision, "Precision");
124          Assert.AreEqual(0, p.Scale, "Scale");
125          Assert.AreEqual(0, p.Size, "Size");
126          Assert.AreEqual(string.Empty, p.SourceColumn, "SourceColumn");
127          Assert.AreEqual(DataRowVersion.Current, p.SourceVersion, "SourceVersion");
128          Assert.AreEqual(NpgsqlDbType.Unknown, p.NpgsqlDbType, "NpgsqlDbType");
129          Assert.IsNull(p.Value, "Value");
130      }
131      [Test]
132      public void Constructor2_Value_DateTime()
133      {
134          var value = new DateTime(2004, 8, 24);
135          var p = new NpgsqlParameter("address", value);
136          Assert.AreEqual(DbType.DateTime2, p.DbType, "B:DbType");
137          Assert.AreEqual(ParameterDirection.Input, p.Direction, "B:Direction");
138          Assert.IsFalse(p.IsNullable, "B:IsNullable");
139          Assert.AreEqual("address", p.ParameterName, "B:ParameterName");
140          Assert.AreEqual(0, p.Precision, "B:Precision");
141          Assert.AreEqual(0, p.Scale, "B:Scale");
142          Assert.AreEqual(string.Empty, p.SourceColumn, "B:SourceColumn");
143          Assert.AreEqual(DataRowVersion.Current, p.SourceVersion, "B:SourceVersion");
144          Assert.AreEqual(NpgsqlDbType.Timestamp, p.NpgsqlDbType, "B:NpgsqlDbType");
145          Assert.AreEqual(value, p.Value, "B:Value");
146      }
147      [Test]
148      public void Constructor2_Value_DBNull()
149      {
150          var p = new NpgsqlParameter("address", DBNull.Value);
151          Assert.AreEqual(DbType.Object, p.DbType, "B:DbType");
152          Assert.AreEqual(ParameterDirection.Input, p.Direction, "B:Direction");
153          Assert.IsFalse(p.IsNullable, "B:IsNullable");
154          Assert.AreEqual("address", p.ParameterName, "B:ParameterName");
155          Assert.AreEqual(0, p.Precision, "B:Precision");
156          Assert.AreEqual(0, p.Scale, "B:Scale");
157          Assert.AreEqual(0, p.Size, "B:Size");
158          Assert.AreEqual(string.Empty, p.SourceColumn, "B:SourceColumn");
159          Assert.AreEqual(DataRowVersion.Current, p.SourceVersion, "B:SourceVersion");
160          Assert.AreEqual(NpgsqlDbType.Unknown, p.NpgsqlDbType, "B:NpgsqlDbType");
161          Assert.AreEqual(DBNull.Value, p.Value, "B:Value");
162      }
163      [Test]
164      public void Constructor2_Value_null()
165      {
166          var p = new NpgsqlParameter("address", null);
167          Assert.AreEqual(DbType.Object, p.DbType, "A:DbType");
168          Assert.AreEqual(ParameterDirection.Input, p.Direction, "A:Direction");
169          Assert.IsFalse(p.IsNullable, "A:IsNullable");
170          Assert.AreEqual("address", p.ParameterName, "A:ParameterName");
171          Assert.AreEqual(0, p.Precision, "A:Precision");
172          Assert.AreEqual(0, p.Scale, "A:Scale");
173          Assert.AreEqual(0, p.Size, "A:Size");
174          Assert.AreEqual(string.Empty, p.SourceColumn, "A:SourceColumn");
175          Assert.AreEqual(DataRowVersion.Current, p.SourceVersion, "A:SourceVersion");
176          Assert.AreEqual(NpgsqlDbType.Unknown, p.NpgsqlDbType, "A:NpgsqlDbType");
177          Assert.IsNull(p.Value, "A:Value");
178      }
179      [Test]
180      public void Constructor7()
181      {
182          var p1 = new NpgsqlParameter("p1Name", NpgsqlDbType.Varchar, 20,
183              "srcCol", ParameterDirection.InputOutput, false, 0, 0,
184              DataRowVersion.Original, "foo");
185          Assert.AreEqual(DbType.String, p1.DbType, "DbType");
186          Assert.AreEqual(ParameterDirection.InputOutput, p1.Direction, "Direction");
187          Assert.AreEqual(false, p1.IsNullable, "IsNullable");
188          Assert.AreEqual("p1Name", p1.ParameterName, "ParameterName");
189          Assert.AreEqual(0, p1.Precision, "Precision");
190          Assert.AreEqual(0, p1.Scale, "Scale");
191          Assert.AreEqual(20, p1.Size, "Size");
192          Assert.AreEqual("srcCol", p1.SourceColumn, "SourceColumn");
193          Assert.AreEqual(false, p1.SourceColumnNullMapping, "SourceColumnNullMapping");
194          Assert.AreEqual(DataRowVersion.Original, p1.SourceVersion, "SourceVersion");
195          Assert.AreEqual(NpgsqlDbType.Varchar, p1.NpgsqlDbType, "NpgsqlDbType");
196          Assert.AreEqual("foo", p1.Value, "Value");
197      }
198      [Test]
199      public void Clone()
200      {
201          var expected = new NpgsqlParameter
202          {
203              Value = 42,
204              ParameterName = "TheAnswer",
205              DbType = DbType.Int32,
206              NpgsqlDbType = NpgsqlDbType.Integer,
207              DataTypeName = "integer",
208              Direction = ParameterDirection.InputOutput,
209              IsNullable = true,
210              Precision = 1,
211              Scale = 2,
212              Size = 4,
213              SourceVersion = DataRowVersion.Proposed,
214              SourceColumn = "source",
215              SourceColumnNullMapping = true,
216          };
<span onclick='openModal()' class='match'>217          var actual = expected.Clone();
218          Assert.AreEqual(expected.Value, actual.Value);
219          Assert.AreEqual(expected.ParameterName, actual.ParameterName);
220          Assert.AreEqual(expected.DbType, actual.DbType);
221          Assert.AreEqual(expected.NpgsqlDbType, actual.NpgsqlDbType);
222          Assert.AreEqual(expected.DataTypeName, actual.DataTypeName);
223          Assert.AreEqual(expected.Direction, actual.Direction);
224          Assert.AreEqual(expected.IsNullable, actual.IsNullable);
225          Assert.AreEqual(expected.Precision, actual.Precision);
226          Assert.AreEqual(expected.Scale, actual.Scale);
227          Assert.AreEqual(expected.Size, actual.Size);
228          Assert.AreEqual(expected.SourceVersion, actual.SourceVersion);
229          Assert.AreEqual(expected.SourceColumn, actual.SourceColumn);
230          Assert.AreEqual(expected.SourceColumnNullMapping, actual.SourceColumnNullMapping);
231      }
232      [Test]
</span>233      public void Clone_generic()
234      {
235          var expected = new NpgsqlParameter<int>
236          {
237              TypedValue = 42,
238              ParameterName = "TheAnswer",
239              DbType = DbType.Int32,
240              NpgsqlDbType = NpgsqlDbType.Integer,
241              DataTypeName = "integer",
242              Direction = ParameterDirection.InputOutput,
243              IsNullable = true,
244              Precision = 1,
245              Scale = 2,
246              Size = 4,
247              SourceVersion = DataRowVersion.Proposed,
248              SourceColumn ="source",
249              SourceColumnNullMapping = true,
250          };
251          var actual = (NpgsqlParameter<int>)expected.Clone();
252          Assert.AreEqual(expected.Value, actual.Value);
253          Assert.AreEqual(expected.TypedValue, actual.TypedValue);
254          Assert.AreEqual(expected.ParameterName, actual.ParameterName);
255          Assert.AreEqual(expected.DbType, actual.DbType);
256          Assert.AreEqual(expected.NpgsqlDbType, actual.NpgsqlDbType);
257          Assert.AreEqual(expected.DataTypeName, actual.DataTypeName);
258          Assert.AreEqual(expected.Direction, actual.Direction);
259          Assert.AreEqual(expected.IsNullable, actual.IsNullable);
260          Assert.AreEqual(expected.Precision, actual.Precision);
261          Assert.AreEqual(expected.Scale, actual.Scale);
262          Assert.AreEqual(expected.Size, actual.Size);
263          Assert.AreEqual(expected.SourceVersion, actual.SourceVersion);
264          Assert.AreEqual(expected.SourceColumn, actual.SourceColumn);
265          Assert.AreEqual(expected.SourceColumnNullMapping, actual.SourceColumnNullMapping);
266      }
267      #endregion
268      [Test]
269      [Ignore("")]
270      public void InferType_invalid_throws()
271      {
272          var notsupported = new object[]
273          {
274              ushort.MaxValue,
275              uint.MaxValue,
276              ulong.MaxValue,
277              sbyte.MaxValue,
278              new NpgsqlParameter()
279          };
280          var param = new NpgsqlParameter();
281          for (var i = 0; i < notsupported.Length; i++)
282          {
283              try
284              {
285                  param.Value = notsupported[i];
286                  Assert.Fail("#A1:" + i);
287              }
288              catch (FormatException)
289              {
290              }
291              catch (ArgumentException ex)
292              {
293                  Assert.AreEqual(typeof(ArgumentException), ex.GetType(), "#A2");
294                  Assert.IsNull(ex.InnerException, "#A3");
295                  Assert.IsNotNull(ex.Message, "#A4");
296                  Assert.IsNull(ex.ParamName, "#A5");
297              }
298          }
299      }
300      [Test] 
301      public void Parameter_null()
302      {
303          var param = new NpgsqlParameter("param", NpgsqlDbType.Numeric);
304          Assert.AreEqual(0, param.Scale, "#A1");
305          param.Value = DBNull.Value;
306          Assert.AreEqual(0, param.Scale, "#A2");
307          param = new NpgsqlParameter("param", NpgsqlDbType.Integer);
308          Assert.AreEqual(0, param.Scale, "#B1");
309          param.Value = DBNull.Value;
310          Assert.AreEqual(0, param.Scale, "#B2");
311      }
312      [Test]
313      [Ignore("")]
314      public void Parameter_type()
315      {
316          NpgsqlParameter p;
317          p = new NpgsqlParameter();
318          Assert.AreEqual(DbType.String, p.DbType, "#A1");
319          Assert.AreEqual(NpgsqlDbType.Text, p.NpgsqlDbType, "#A2");
320          p.Value = DBNull.Value;
321          Assert.AreEqual(DbType.String, p.DbType, "#B1");
322          Assert.AreEqual(NpgsqlDbType.Text, p.NpgsqlDbType, "#B2");
323          p.Value = 1;
324          Assert.AreEqual(DbType.Int32, p.DbType, "#C1");
325          Assert.AreEqual(NpgsqlDbType.Integer, p.NpgsqlDbType, "#C2");
326          p.Value = DBNull.Value;
327          Assert.AreEqual(DbType.String, p.DbType, "#D1");
328          Assert.AreEqual(NpgsqlDbType.Text, p.NpgsqlDbType, "#D2");
329          p.Value = new byte[] { 0x0a };
330          Assert.AreEqual(DbType.Binary, p.DbType, "#E1");
331          Assert.AreEqual(NpgsqlDbType.Bytea, p.NpgsqlDbType, "#E2");
332          p.Value = null;
333          Assert.AreEqual(DbType.String, p.DbType, "#F1");
334          Assert.AreEqual(NpgsqlDbType.Text, p.NpgsqlDbType, "#F2");
335          p.Value = DateTime.Now;
336          Assert.AreEqual(DbType.DateTime, p.DbType, "#G1");
337          Assert.AreEqual(NpgsqlDbType.Timestamp, p.NpgsqlDbType, "#G2");
338          p.Value = null;
339          Assert.AreEqual(DbType.String, p.DbType, "#H1");
340          Assert.AreEqual(NpgsqlDbType.Text, p.NpgsqlDbType, "#H2");
341          p = new NpgsqlParameter();
342          p.DbType = DbType.DateTime;
343          Assert.AreEqual(NpgsqlDbType.Timestamp, p.NpgsqlDbType, "#I1");
344          p.Value = 1;
345          Assert.AreEqual(NpgsqlDbType.Timestamp, p.NpgsqlDbType, "#I2");
346          p.Value = null;
347          Assert.AreEqual(NpgsqlDbType.Timestamp, p.NpgsqlDbType, "#I3");
348          p.Value = DBNull.Value;
349          Assert.AreEqual(NpgsqlDbType.Timestamp, p.NpgsqlDbType, "#I4");
350          p = new NpgsqlParameter();
351          p.NpgsqlDbType = NpgsqlDbType.Bytea;
352          Assert.AreEqual(NpgsqlDbType.Bytea, p.NpgsqlDbType, "#J1");
353          p.Value = 1;
354          Assert.AreEqual(NpgsqlDbType.Bytea, p.NpgsqlDbType, "#J2");
355          p.Value = null;
356          Assert.AreEqual(NpgsqlDbType.Bytea, p.NpgsqlDbType, "#J3");
357          p.Value = DBNull.Value;
358          Assert.AreEqual(NpgsqlDbType.Bytea, p.NpgsqlDbType, "#J4");
359      }
360      [Test]
361      [Ignore("")]
362      public void ParameterName()
363      {
364          var p = new NpgsqlParameter();
365          p.ParameterName = "name";
366          Assert.AreEqual("name", p.ParameterName, "#A:ParameterName");
367          Assert.AreEqual(string.Empty, p.SourceColumn, "#A:SourceColumn");
368          p.ParameterName = null;
369          Assert.AreEqual(string.Empty, p.ParameterName, "#B:ParameterName");
370          Assert.AreEqual(string.Empty, p.SourceColumn, "#B:SourceColumn");
371          p.ParameterName = " ";
372          Assert.AreEqual(" ", p.ParameterName, "#C:ParameterName");
373          Assert.AreEqual(string.Empty, p.SourceColumn, "#C:SourceColumn");
374          p.ParameterName = " name ";
375          Assert.AreEqual(" name ", p.ParameterName, "#D:ParameterName");
376          Assert.AreEqual(string.Empty, p.SourceColumn, "#D:SourceColumn");
377          p.ParameterName = string.Empty;
378          Assert.AreEqual(string.Empty, p.ParameterName, "#E:ParameterName");
379          Assert.AreEqual(string.Empty, p.SourceColumn, "#E:SourceColumn");
380      }
381      [Test]
382      public void ResetDbType()
383      {
384          NpgsqlParameter p;
385          p = new NpgsqlParameter("foo", 42);
386          p.ResetDbType();
387          Assert.AreEqual(DbType.Int32, p.DbType, "#A:DbType");
388          Assert.AreEqual(NpgsqlDbType.Integer, p.NpgsqlDbType, "#A:NpgsqlDbType");
389          Assert.AreEqual(42, p.Value, "#A:Value");
390          p.DbType = DbType.DateTime; 
391          Assert.AreEqual(DbType.DateTime, p.DbType, "#B:DbType1");
392          Assert.AreEqual(NpgsqlDbType.TimestampTz, p.NpgsqlDbType, "#B:SqlDbType1");
393          p.ResetDbType();
394          Assert.AreEqual(DbType.Int32, p.DbType, "#B:DbType2");
395          Assert.AreEqual(NpgsqlDbType.Integer, p.NpgsqlDbType, "#B:SqlDbtype2");
396          p = new NpgsqlParameter("foo", NpgsqlDbType.Integer);
397          p.ResetDbType();
398          Assert.AreEqual(DbType.Object, p.DbType, "#C:DbType");
399          Assert.AreEqual(NpgsqlDbType.Unknown, p.NpgsqlDbType, "#C:NpgsqlDbType");
400          p.NpgsqlDbType = NpgsqlDbType.TimestampTz; 
401          Assert.AreEqual(DbType.DateTime, p.DbType, "#D:DbType1");
402          Assert.AreEqual(NpgsqlDbType.TimestampTz, p.NpgsqlDbType, "#D:SqlDbType1");
403          p.ResetDbType();
404          Assert.AreEqual(DbType.Object, p.DbType, "#D:DbType2");
405          Assert.AreEqual(NpgsqlDbType.Unknown, p.NpgsqlDbType, "#D:SqlDbType2");
406          p = new NpgsqlParameter();
407          p.Value = DateTime.MaxValue;
408          Assert.AreEqual(DbType.DateTime2, p.DbType, "#E:DbType1");
409          Assert.AreEqual(NpgsqlDbType.Timestamp, p.NpgsqlDbType, "#E:SqlDbType1");
410          p.Value = null;
411          p.ResetDbType();
412          Assert.AreEqual(DbType.Object, p.DbType, "#E:DbType2");
413          Assert.AreEqual(NpgsqlDbType.Unknown, p.NpgsqlDbType, "#E:SqlDbType2");
414          p = new NpgsqlParameter("foo", NpgsqlDbType.Varchar);
415          p.Value = DateTime.MaxValue;
416          p.ResetDbType();
417          Assert.AreEqual(DbType.DateTime2, p.DbType, "#F:DbType");
418          Assert.AreEqual(NpgsqlDbType.Timestamp, p.NpgsqlDbType, "#F:NpgsqlDbType");
419          Assert.AreEqual(DateTime.MaxValue, p.Value, "#F:Value");
420          p = new NpgsqlParameter("foo", NpgsqlDbType.Varchar);
421          p.Value = DBNull.Value;
422          p.ResetDbType();
423          Assert.AreEqual(DbType.Object, p.DbType, "#G:DbType");
424          Assert.AreEqual(NpgsqlDbType.Unknown, p.NpgsqlDbType, "#G:NpgsqlDbType");
425          Assert.AreEqual(DBNull.Value, p.Value, "#G:Value");
426          p = new NpgsqlParameter("foo", NpgsqlDbType.Varchar);
427          p.Value = null;
428          p.ResetDbType();
429          Assert.AreEqual(DbType.Object, p.DbType, "#G:DbType");
430          Assert.AreEqual(NpgsqlDbType.Unknown, p.NpgsqlDbType, "#G:NpgsqlDbType");
431          Assert.IsNull(p.Value, "#G:Value");
432      }
433      [Test]
434      public void ParameterName_retains_prefix()
435          => Assert.That(new NpgsqlParameter("@p", DbType.String).ParameterName, Is.EqualTo("@p"));
436      [Test]
437      [Ignore("")]
438      public void SourceColumn()
439      {
440          var p = new NpgsqlParameter();
441          p.SourceColumn = "name";
442          Assert.AreEqual(string.Empty, p.ParameterName, "#A:ParameterName");
443          Assert.AreEqual("name", p.SourceColumn, "#A:SourceColumn");
444          p.SourceColumn = null;
445          Assert.AreEqual(string.Empty, p.ParameterName, "#B:ParameterName");
446          Assert.AreEqual(string.Empty, p.SourceColumn, "#B:SourceColumn");
447          p.SourceColumn = " ";
448          Assert.AreEqual(string.Empty, p.ParameterName, "#C:ParameterName");
449          Assert.AreEqual(" ", p.SourceColumn, "#C:SourceColumn");
450          p.SourceColumn = " name ";
451          Assert.AreEqual(string.Empty, p.ParameterName, "#D:ParameterName");
452          Assert.AreEqual(" name ", p.SourceColumn, "#D:SourceColumn");
453          p.SourceColumn = string.Empty;
454          Assert.AreEqual(string.Empty, p.ParameterName, "#E:ParameterName");
455          Assert.AreEqual(string.Empty, p.SourceColumn, "#E:SourceColumn");
456      }
457      [Test]
458      public void Bug1011100_NpgsqlDbType()
459      {
460          var p = new NpgsqlParameter();
461          p.Value = DBNull.Value;
462          Assert.AreEqual(DbType.Object, p.DbType, "#A:DbType");
463          Assert.AreEqual(NpgsqlDbType.Unknown, p.NpgsqlDbType, "#A:NpgsqlDbType");
464          p.Value = 8;
465          Assert.AreEqual(DbType.Int32, p.DbType, "#A:DbType");
466          Assert.AreEqual(NpgsqlDbType.Integer, p.NpgsqlDbType, "#A:NpgsqlDbType");
467      }
468      [Test]
469      public void NpgsqlParameter_Clone()
470      {
471          var param = new NpgsqlParameter();
472          param.Value = 5;
473          param.Precision = 1;
474          param.Scale = 1;
475          param.Size = 1;
476          param.Direction = ParameterDirection.Input;
477          param.IsNullable = true;
478          param.ParameterName = "parameterName";
479          param.SourceColumn = "source_column";
480          param.SourceVersion = DataRowVersion.Current;
481          param.NpgsqlValue = 5;
482          param.SourceColumnNullMapping = false;
483          var newParam = param.Clone();
484          Assert.AreEqual(param.Value, newParam.Value);
485          Assert.AreEqual(param.Precision, newParam.Precision);
486          Assert.AreEqual(param.Scale, newParam.Scale);
487          Assert.AreEqual(param.Size, newParam.Size);
488          Assert.AreEqual(param.Direction, newParam.Direction);
489          Assert.AreEqual(param.IsNullable, newParam.IsNullable);
490          Assert.AreEqual(param.ParameterName, newParam.ParameterName);
491          Assert.AreEqual(param.TrimmedName, newParam.TrimmedName);
492          Assert.AreEqual(param.SourceColumn, newParam.SourceColumn);
493          Assert.AreEqual(param.SourceVersion, newParam.SourceVersion);
494          Assert.AreEqual(param.NpgsqlValue, newParam.NpgsqlValue);
495          Assert.AreEqual(param.SourceColumnNullMapping, newParam.SourceColumnNullMapping);
496          Assert.AreEqual(param.NpgsqlValue, newParam.NpgsqlValue);
497      }
498      [Test]
499      public void Precision_via_interface()
500      {
501          var parameter = new NpgsqlParameter();
502          var paramIface = (IDbDataParameter)parameter;
503          paramIface.Precision = 42;
504          Assert.AreEqual((byte)42, paramIface.Precision);
505      }
506      [Test]
507      public void Precision_via_base_class()
508      {
509          var parameter = new NpgsqlParameter();
510          var paramBase = (DbParameter)parameter;
511          paramBase.Precision = 42;
512          Assert.AreEqual((byte)42, paramBase.Precision);
513      }
514      [Test]
515      public void Scale_via_interface()
516      {
517          var parameter = new NpgsqlParameter();
518          var paramIface = (IDbDataParameter)parameter;
519          paramIface.Scale = 42;
520          Assert.AreEqual((byte)42, paramIface.Scale);
521      }
522      [Test]
523      public void Scale_via_base_class()
524      {
525          var parameter = new NpgsqlParameter();
526          var paramBase = (DbParameter)parameter;
527          paramBase.Scale = 42;
528          Assert.AreEqual((byte)42, paramBase.Scale);
529      }
530      [Test]
531      public void Null_value_throws()
532      {
533          using var connection = OpenConnection();
534          using var command = new NpgsqlCommand("SELECT @p", connection)
535          {
536              Parameters = { new NpgsqlParameter("p", null) }
537          };
538          Assert.That(() => command.ExecuteReader(), Throws.InvalidOperationException);
539      }
540      [Test]
541      public void Null_value_with_nullable_type()
542      {
543          using var connection = OpenConnection();
544          using var command = new NpgsqlCommand("SELECT @p", connection)
545          {
546              Parameters = { new NpgsqlParameter<int?>("p", null) }
547          };
548          using var reader = command.ExecuteReader();
549          Assert.That(reader.Read(), Is.True);
550          Assert.That(reader.GetFieldValue<int?>(0), Is.Null);
551      }
552  #if NeedsPorting
553      [Test]
554      [Category ("NotWorking")]
555      public void InferType_Char()
556      {
557          Char value = 'X';
558          String string_value = "X";
559          NpgsqlParameter p = new NpgsqlParameter ();
560          p.Value = value;
561          Assert.AreEqual (NpgsqlDbType.Text, p.NpgsqlDbType, "#A:NpgsqlDbType");
562          Assert.AreEqual (DbType.String, p.DbType, "#A:DbType");
563          Assert.AreEqual (string_value, p.Value, "#A:Value");
564          p = new NpgsqlParameter ();
565          p.Value = value;
566          Assert.AreEqual (value, p.Value, "#B:Value1");
567          Assert.AreEqual (NpgsqlDbType.Text, p.NpgsqlDbType, "#B:NpgsqlDbType");
568          Assert.AreEqual (string_value, p.Value, "#B:Value2");
569          p = new NpgsqlParameter ();
570          p.Value = value;
571          Assert.AreEqual (value, p.Value, "#C:Value1");
572          Assert.AreEqual (DbType.String, p.DbType, "#C:DbType");
573          Assert.AreEqual (string_value, p.Value, "#C:Value2");
574          p = new NpgsqlParameter ("name", value);
575          Assert.AreEqual (value, p.Value, "#D:Value1");
576          Assert.AreEqual (DbType.String, p.DbType, "#D:DbType");
577          Assert.AreEqual (NpgsqlDbType.Text, p.NpgsqlDbType, "#D:NpgsqlDbType");
578          Assert.AreEqual (string_value, p.Value, "#D:Value2");
579          p = new NpgsqlParameter ("name", 5);
580          p.Value = value;
581          Assert.AreEqual (value, p.Value, "#E:Value1");
582          Assert.AreEqual (DbType.String, p.DbType, "#E:DbType");
583          Assert.AreEqual (NpgsqlDbType.Text, p.NpgsqlDbType, "#E:NpgsqlDbType");
584          Assert.AreEqual (string_value, p.Value, "#E:Value2");
585          p = new NpgsqlParameter ("name", NpgsqlDbType.Text);
586          p.Value = value;
587          Assert.AreEqual (NpgsqlDbType.Text, p.NpgsqlDbType, "#F:NpgsqlDbType");
588          Assert.AreEqual (value, p.Value, "#F:Value");
589      }
590      [Test]
591      [Category ("NotWorking")]
592      public void InferType_CharArray()
593      {
594          Char[] value = new Char[] { 'A', 'X' };
595          String string_value = "AX";
596          NpgsqlParameter p = new NpgsqlParameter ();
597          p.Value = value;
598          Assert.AreEqual (value, p.Value, "#A:Value1");
599          Assert.AreEqual (NpgsqlDbType.Text, p.NpgsqlDbType, "#A:NpgsqlDbType");
600          Assert.AreEqual (DbType.String, p.DbType, "#A:DbType");
601          Assert.AreEqual (string_value, p.Value, "#A:Value2");
602          p = new NpgsqlParameter ();
603          p.Value = value;
604          Assert.AreEqual (value, p.Value, "#B:Value1");
605          Assert.AreEqual (NpgsqlDbType.Text, p.NpgsqlDbType, "#B:NpgsqlDbType");
606          Assert.AreEqual (string_value, p.Value, "#B:Value2");
607          p = new NpgsqlParameter ();
608          p.Value = value;
609          Assert.AreEqual (value, p.Value, "#C:Value1");
610          Assert.AreEqual (DbType.String, p.DbType, "#C:DbType");
611          Assert.AreEqual (string_value, p.Value, "#C:Value2");
612          p = new NpgsqlParameter ("name", value);
613          Assert.AreEqual (value, p.Value, "#D:Value1");
614          Assert.AreEqual (DbType.String, p.DbType, "#D:DbType");
615          Assert.AreEqual (NpgsqlDbType.Text, p.NpgsqlDbType, "#D:NpgsqlDbType");
616          Assert.AreEqual (string_value, p.Value, "#D:Value2");
617          p = new NpgsqlParameter ("name", 5);
618          p.Value = value;
619          Assert.AreEqual (value, p.Value, "#E:Value1");
620          Assert.AreEqual (DbType.String, p.DbType, "#E:DbType");
621          Assert.AreEqual (NpgsqlDbType.Text, p.NpgsqlDbType, "#E:NpgsqlDbType");
622          Assert.AreEqual (string_value, p.Value, "#E:Value2");
623          p = new NpgsqlParameter ("name", NpgsqlDbType.Text);
624          p.Value = value;
625          Assert.AreEqual (NpgsqlDbType.Text, p.NpgsqlDbType, "#F:NpgsqlDbType");
626          Assert.AreEqual (value, p.Value, "#F:Value");
627      }
628      [Test]
629      public void InferType_Object()
630      {
631          Object value = new Object();
632          NpgsqlParameter param = new NpgsqlParameter();
633          param.Value = value;
634          Assert.AreEqual(NpgsqlDbType.Variant, param.NpgsqlDbType, "#1");
635          Assert.AreEqual(DbType.Object, param.DbType, "#2");
636      }
637      [Test]
638      public void LocaleId ()
639      {
640          NpgsqlParameter parameter = new NpgsqlParameter ();
641          Assert.AreEqual (0, parameter.LocaleId, "#1");
642          parameter.LocaleId = 15;
643          Assert.AreEqual(15, parameter.LocaleId, "#2");
644      }
645  #endif
646  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from runner-MDEwOlJlcG9zaXRvcnkxODQyODY4NzU=-flat-CreateStepSummaryCommandL0.cs</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from npgsql-MDEwOlJlcG9zaXRvcnkyODgzNTc0-flat-NpgsqlParameterTests.cs</div>
                </div>
                <div class="column column_space"><pre><code>89                  var stepSummaryFile = Path.Combine(_rootDirectory, "empty-file");
90                  File.WriteAllBytes(stepSummaryFile, new byte[CreateStepSummaryCommand.AttachmentSizeLimit + 1]);
91                  _createStepCommand.ProcessCommand(_executionContext.Object, stepSummaryFile, null);
92                  _jobExecutionContext.Complete();
93                  _jobServerQueue.Verify(x => x.QueueFileUpload(It.IsAny<Guid>(), It.IsAny<Guid>(), It.IsAny<string>(), It.IsAny<string>(), It.IsAny<string>(), It.IsAny<bool>()), Times.Never());
94                  Assert.Equal(1, _issues.Count);
95              }
96          }
97          [Fact]
</pre></code></div>
                <div class="column column_space"><pre><code>217          var actual = expected.Clone();
218          Assert.AreEqual(expected.Value, actual.Value);
219          Assert.AreEqual(expected.ParameterName, actual.ParameterName);
220          Assert.AreEqual(expected.DbType, actual.DbType);
221          Assert.AreEqual(expected.NpgsqlDbType, actual.NpgsqlDbType);
222          Assert.AreEqual(expected.DataTypeName, actual.DataTypeName);
223          Assert.AreEqual(expected.Direction, actual.Direction);
224          Assert.AreEqual(expected.IsNullable, actual.IsNullable);
225          Assert.AreEqual(expected.Precision, actual.Precision);
226          Assert.AreEqual(expected.Scale, actual.Scale);
227          Assert.AreEqual(expected.Size, actual.Size);
228          Assert.AreEqual(expected.SourceVersion, actual.SourceVersion);
229          Assert.AreEqual(expected.SourceColumn, actual.SourceColumn);
230          Assert.AreEqual(expected.SourceColumnNullMapping, actual.SourceColumnNullMapping);
231      }
232      [Test]
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    