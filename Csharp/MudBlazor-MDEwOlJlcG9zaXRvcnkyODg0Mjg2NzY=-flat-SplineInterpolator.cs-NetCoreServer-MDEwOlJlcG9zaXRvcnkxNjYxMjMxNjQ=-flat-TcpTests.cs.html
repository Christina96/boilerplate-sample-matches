
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 14.906832298136646%, Tokens: 36</h2>
        <div class="column">
            <h3>MudBlazor-MDEwOlJlcG9zaXRvcnkyODg0Mjg2NzY=-flat-SplineInterpolator.cs</h3>
            <pre><code>1  using System;
2  using MudBlazor.Components.Chart.Interpolation;
3  namespace MudBlazor.Components.Chart
4  {
5      public abstract class SplineInterpolator : ILineInterpolator
6      {
7          protected Matrix m;
8          protected MatrixSolver gauss;
9          protected readonly int n;
10          protected double[] a, b, c, d, h;
<span onclick='openModal()' class='match'>11          public double[] GivenYs { get; set; }
12          public double[] GivenXs { get; set; }
13          public double[] InterpolatedXs { get; set; }
14          public double[] InterpolatedYs { get; set; }
15          public bool InterpolationRequired { get; set; } = true;
16          public SplineInterpolator(double[] xs, double[] ys, int resolution = 10)
</span>17          {
18              if (xs is null || ys is null)
19                  throw new ArgumentException("xs and ys cannot be null");
20              if (xs.Length != ys.Length)
21                  throw new ArgumentException("xs and ys must have the same length");
22              if (xs.Length < 4)
23                  throw new ArgumentException("xs and ys must have a length of 4 or greater");
24              if (resolution < 1)
25                  throw new ArgumentException("resolution must be 1 or greater");
26              GivenXs = xs;
27              GivenYs = ys;
28              n = xs.Length;
29              InterpolatedXs = new double[n * resolution];
30              InterpolatedYs = new double[n * resolution];
31          }
32          public void Interpolate()
33          {
34              int resolution = InterpolatedXs.Length / n;
35              for (int i = 0; i < h.Length; i++)
36              {
37                  for (int k = 0; k < resolution; k++)
38                  {
39                      double deltaX = (double)k / resolution * h[i];
40                      double termA = a[i];
41                      double termB = b[i] * deltaX;
42                      double termC = c[i] * deltaX * deltaX;
43                      double termD = d[i] * deltaX * deltaX * deltaX;
44                      int interpolatedIndex = i * resolution + k;
45                      InterpolatedXs[interpolatedIndex] = deltaX + GivenXs[i];
46                      InterpolatedYs[interpolatedIndex] = termA + termB + termC + termD;
47                  }
48              }
49              int pointsToKeep = resolution * (n - 1) + 1;
50              double[] interpolatedXsCopy = new double[pointsToKeep];
51              double[] interpolatedYsCopy = new double[pointsToKeep];
52              Array.Copy(InterpolatedXs, 0, interpolatedXsCopy, 0, pointsToKeep - 1);
53              Array.Copy(InterpolatedYs, 0, interpolatedYsCopy, 0, pointsToKeep - 1);
54              InterpolatedXs = interpolatedXsCopy;
55              InterpolatedYs = interpolatedYsCopy;
56              InterpolatedXs[pointsToKeep - 1] = GivenXs[n - 1];
57              InterpolatedYs[pointsToKeep - 1] = GivenYs[n - 1];
58          }
59          public double Integrate()
60          {
61              double integral = 0;
62              for (int i = 0; i < h.Length; i++)
63              {
64                  double termA = a[i] * h[i];
65                  double termB = b[i] * Math.Pow(h[i], 2) / 2.0;
66                  double termC = c[i] * Math.Pow(h[i], 3) / 3.0;
67                  double termD = d[i] * Math.Pow(h[i], 4) / 4.0;
68                  integral += termA + termB + termC + termD;
69              }
70              return integral;
71          }
72      }
73  }
</code></pre>
        </div>
        <div class="column">
            <h3>NetCoreServer-MDEwOlJlcG9zaXRvcnkxNjYxMjMxNjQ=-flat-TcpTests.cs</h3>
            <pre><code>1  using System;
2  using System.Collections.Generic;
3  using System.Net;
4  using System.Net.Sockets;
5  using System.Threading;
6  using NetCoreServer;
7  using Xunit;
8  namespace tests
9  {
10      class EchoTcpClient : NetCoreServer.TcpClient
11      {
12          public bool Connected { get; set; }
13          public bool Disconnected { get; set; }
14          public bool Errors { get; set; }
15          public EchoTcpClient(string address, int port) : base(address, port) {}
16          protected override void OnConnected() { Connected = true; }
17          protected override void OnDisconnected() { Disconnected = true; }
18          protected override void OnError(SocketError error) { Errors = true; }
19      }
20      class EchoTcpSession : TcpSession
21      {
22          public bool Connected { get; set; }
23          public bool Disconnected { get; set; }
24          public bool Errors { get; set; }
25          public EchoTcpSession(TcpServer server) : base(server) {}
26          protected override void OnConnected() { Connected = true; }
27          protected override void OnDisconnected() { Disconnected = true; }
28          protected override void OnReceived(byte[] buffer, long offset, long size) { SendAsync(buffer, offset, size); }
29          protected override void OnError(SocketError error) { Errors = true; }
30      }
31      class EchoTcpServer : TcpServer
32      {
33          public bool Started { get; set; }
<span onclick='openModal()' class='match'>34          public bool Stopped { get; set; }
35          public bool Connected { get; set; }
36          public bool Disconnected { get; set; }
37          public int Clients { get; set; }
38          public bool Errors { get; set; }
39          public EchoTcpServer(IPAddress address, int port) : base(address, port) {}
</span>40          protected override TcpSession CreateSession() { return new EchoTcpSession(this); }
41          protected override void OnStarted() { Started = true; }
42          protected override void OnStopped() { Stopped = true; }
43          protected override void OnConnected(TcpSession session) { Connected = true; Clients++; }
44          protected override void OnDisconnected(TcpSession session) { Disconnected = true; Clients--; }
45          protected override void OnError(SocketError error) { Errors = true; }
46      }
47      public class TcpTests
48      {
49          [Fact(DisplayName = "TCP server test")]
50          public void TcpServerTest()
51          {
52              string address = "127.0.0.1";
53              int port = 1111;
54              var server = new EchoTcpServer(IPAddress.Any, port);
55              Assert.True(server.Start());
56              while (!server.IsStarted)
57                  Thread.Yield();
58              var client = new EchoTcpClient(address, port);
59              Assert.True(client.ConnectAsync());
60              while (!client.IsConnected || (server.Clients != 1))
61                  Thread.Yield();
62              client.SendAsync("test");
63              while (client.BytesReceived != 4)
64                  Thread.Yield();
65              Assert.True(client.DisconnectAsync());
66              while (client.IsConnected || (server.Clients != 0))
67                  Thread.Yield();
68              Assert.True(server.Stop());
69              while (server.IsStarted)
70                  Thread.Yield();
71              Assert.True(server.Started);
72              Assert.True(server.Stopped);
73              Assert.True(server.Connected);
74              Assert.True(server.Disconnected);
75              Assert.True(server.BytesSent == 4);
76              Assert.True(server.BytesReceived == 4);
77              Assert.True(!server.Errors);
78              Assert.True(client.Connected);
79              Assert.True(client.Disconnected);
80              Assert.True(client.BytesSent == 4);
81              Assert.True(client.BytesReceived == 4);
82              Assert.True(!client.Errors);
83          }
84          [Fact(DisplayName = "TCP server multicast test")]
85          public void TcpServerMulticastTest()
86          {
87              string address = "127.0.0.1";
88              int port = 1112;
89              var server = new EchoTcpServer(IPAddress.Any, port);
90              Assert.True(server.Start());
91              while (!server.IsStarted)
92                  Thread.Yield();
93              var client1 = new EchoTcpClient(address, port);
94              Assert.True(client1.ConnectAsync());
95              while (!client1.IsConnected || (server.Clients != 1))
96                  Thread.Yield();
97              server.Multicast("test");
98              while (client1.BytesReceived != 4)
99                  Thread.Yield();
100              var client2 = new EchoTcpClient(address, port);
101              Assert.True(client2.ConnectAsync());
102              while (!client2.IsConnected || (server.Clients != 2))
103                  Thread.Yield();
104              server.Multicast("test");
105              while ((client1.BytesReceived != 8) || (client2.BytesReceived != 4))
106                  Thread.Yield();
107              var client3 = new EchoTcpClient(address, port);
108              Assert.True(client3.ConnectAsync());
109              while (!client3.IsConnected || (server.Clients != 3))
110                  Thread.Yield();
111              server.Multicast("test");
112              while ((client1.BytesReceived != 12) || (client2.BytesReceived != 8) || (client3.BytesReceived != 4))
113                  Thread.Yield();
114              Assert.True(client1.DisconnectAsync());
115              while (client1.IsConnected || (server.Clients != 2))
116                  Thread.Yield();
117              server.Multicast("test");
118              while ((client1.BytesReceived != 12) || (client2.BytesReceived != 12) || (client3.BytesReceived != 8))
119                  Thread.Yield();
120              Assert.True(client2.DisconnectAsync());
121              while (client2.IsConnected || (server.Clients != 1))
122                  Thread.Yield();
123              server.Multicast("test");
124              while ((client1.BytesReceived != 12) || (client2.BytesReceived != 12) || (client3.BytesReceived != 12))
125                  Thread.Yield();
126              Assert.True(client3.DisconnectAsync());
127              while (client3.IsConnected || (server.Clients != 0))
128                  Thread.Yield();
129              Assert.True(server.Stop());
130              while (server.IsStarted)
131                  Thread.Yield();
132              Assert.True(server.Started);
133              Assert.True(server.Stopped);
134              Assert.True(server.Connected);
135              Assert.True(server.Disconnected);
136              Assert.True(server.BytesSent > 0);
137              Assert.True(server.BytesReceived == 0);
138              Assert.True(!server.Errors);
139              Assert.True(client1.BytesSent == 0);
140              Assert.True(client2.BytesSent == 0);
141              Assert.True(client3.BytesSent == 0);
142              Assert.True(client1.BytesReceived == 12);
143              Assert.True(client2.BytesReceived == 12);
144              Assert.True(client3.BytesReceived == 12);
145              Assert.True(!client1.Errors);
146              Assert.True(!client2.Errors);
147              Assert.True(!client3.Errors);
148          }
149          [Fact(DisplayName = "TCP server random test")]
150          public void TcpServerRandomTest()
151          {
152              string address = "127.0.0.1";
153              int port = 1113;
154              var server = new EchoTcpServer(IPAddress.Any, port);
155              Assert.True(server.Start());
156              while (!server.IsStarted)
157                  Thread.Yield();
158              int duration = 10;
159              var clients = new List<EchoTcpClient>();
160              var rand = new Random();
161              var start = DateTime.UtcNow;
162              while ((DateTime.UtcNow - start).TotalSeconds < duration)
163              {
164                  if ((rand.Next() % 1000) == 0)
165                  {
166                      server.DisconnectAll();
167                  }
168                  else if ((rand.Next() % 100) == 0)
169                  {
170                      if (clients.Count < 100)
171                      {
172                          var client = new EchoTcpClient(address, port);
173                          clients.Add(client);
174                          client.ConnectAsync();
175                          while (!client.IsConnected)
176                              Thread.Yield();
177                      }
178                  }
179                  else if ((rand.Next() % 100) == 0)
180                  {
181                      if (clients.Count > 0)
182                      {
183                          int index = rand.Next() % clients.Count;
184                          var client = clients[index];
185                          if (client.IsConnected)
186                          {
187                              client.DisconnectAsync();
188                              while (client.IsConnected)
189                                  Thread.Yield();
190                          }
191                          else
192                          {
193                              client.ConnectAsync();
194                              while (!client.IsConnected)
195                                  Thread.Yield();
196                          }
197                      }
198                  }
199                  else if ((rand.Next() % 100) == 0)
200                  {
201                      if (clients.Count > 0)
202                      {
203                          int index = rand.Next() % clients.Count;
204                          var client = clients[index];
205                          if (client.IsConnected)
206                          {
207                              client.ReconnectAsync();
208                              while (!client.IsConnected)
209                                  Thread.Yield();
210                          }
211                      }
212                  }
213                  else if ((rand.Next() % 10) == 0)
214                  {
215                      server.Multicast("test");
216                  }
217                  else if ((rand.Next() % 1) == 0)
218                  {
219                      if (clients.Count > 0)
220                      {
221                          int index = rand.Next() % clients.Count;
222                          var client = clients[index];
223                          if (client.IsConnected)
224                              client.SendAsync("test");
225                      }
226                  }
227                  Thread.Sleep(1);
228              }
229              foreach (var client in clients)
230              {
231                  client.DisconnectAsync();
232                  while (client.IsConnected)
233                      Thread.Yield();
234              }
235              Assert.True(server.Stop());
236              while (server.IsStarted)
237                  Thread.Yield();
238              Assert.True(server.Started);
239              Assert.True(server.Stopped);
240              Assert.True(server.Connected);
241              Assert.True(server.Disconnected);
242              Assert.True(server.BytesSent > 0);
243              Assert.True(server.BytesReceived > 0);
244              Assert.True(!server.Errors);
245          }
246      }
247  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from MudBlazor-MDEwOlJlcG9zaXRvcnkyODg0Mjg2NzY=-flat-SplineInterpolator.cs</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from NetCoreServer-MDEwOlJlcG9zaXRvcnkxNjYxMjMxNjQ=-flat-TcpTests.cs</div>
                </div>
                <div class="column column_space"><pre><code>11          public double[] GivenYs { get; set; }
12          public double[] GivenXs { get; set; }
13          public double[] InterpolatedXs { get; set; }
14          public double[] InterpolatedYs { get; set; }
15          public bool InterpolationRequired { get; set; } = true;
16          public SplineInterpolator(double[] xs, double[] ys, int resolution = 10)
</pre></code></div>
                <div class="column column_space"><pre><code>34          public bool Stopped { get; set; }
35          public bool Connected { get; set; }
36          public bool Disconnected { get; set; }
37          public int Clients { get; set; }
38          public bool Errors { get; set; }
39          public EchoTcpServer(IPAddress address, int port) : base(address, port) {}
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    