
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Tokens: 71, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>runner-MDEwOlJlcG9zaXRvcnkxODQyODY4NzU=-flat-TaskHttpClient.cs</h3>
            <pre><code>1  using GitHub.Services.Common;
2  using GitHub.Services.WebApi;
3  using System;
4  using System.Collections.Generic;
5  using System.Linq;
6  using System.Net.Http;
7  using System.Threading;
8  using System.Threading.Tasks;
9  namespace GitHub.DistributedTask.WebApi
10  {
11      public sealed class TaskHttpClient : TaskHttpClientBase
12      {
13          public TaskHttpClient(
14              Uri baseUrl,
15              VssCredentials credentials)
16              : base(baseUrl, credentials)
17          {
18          }
19          public TaskHttpClient(
20              Uri baseUrl,
21              VssCredentials credentials,
22              VssHttpRequestSettings settings)
23              : base(baseUrl, credentials, settings)
24          {
25          }
26          public TaskHttpClient(
27              Uri baseUrl,
28              VssCredentials credentials,
<span onclick='openModal()' class='match'>29              params DelegatingHandler[] handlers)
30              : base(baseUrl, credentials, handlers)
31          {
32          }
33          public TaskHttpClient(
34              Uri baseUrl,
35              VssCredentials credentials,
36              VssHttpRequestSettings settings,
37              params DelegatingHandler[] handlers)
38              : base(baseUrl, credentials, settings, handlers)
39          {
40          }
41          public TaskHttpClient(
42              Uri baseUrl,
43              HttpMessageHandler pipeline,
44              Boolean disposeHandler)
45              : base(baseUrl, pipeline, disposeHandler)
46          {
47          }
48          public Task AppendTimelineRecordFeedAsync(
</span>49              Guid scopeIdentifier,
50              String planType,
51              Guid planId,
52              Guid timelineId,
53              Guid recordId,
54              IEnumerable<String> lines,
55              CancellationToken cancellationToken = default(CancellationToken),
56              Object userState = null)
57          {
58              return AppendTimelineRecordFeedAsync(scopeIdentifier,
59                                                   planType,
60                                                   planId,
61                                                   timelineId,
62                                                   recordId,
63                                                   new TimelineRecordFeedLinesWrapper(Guid.Empty, lines.ToList()),
64                                                   userState,
65                                                   cancellationToken);
66          }
67          public Task AppendTimelineRecordFeedAsync(
68              Guid scopeIdentifier,
69              String planType,
70              Guid planId,
71              Guid timelineId,
72              Guid recordId,
73              Guid stepId,
74              IList<String> lines,
75              CancellationToken cancellationToken = default(CancellationToken),
76              Object userState = null)
77          {
78              return AppendTimelineRecordFeedAsync(scopeIdentifier,
79                                                   planType,
80                                                   planId,
81                                                   timelineId,
82                                                   recordId,
83                                                   new TimelineRecordFeedLinesWrapper(stepId, lines),
84                                                   userState,
85                                                   cancellationToken);
86          }
87          public Task AppendTimelineRecordFeedAsync(
88              Guid scopeIdentifier,
89              String planType,
90              Guid planId,
91              Guid timelineId,
92              Guid recordId,
93              Guid stepId,
94              IList<String> lines,
95              long startLine,
96              CancellationToken cancellationToken = default(CancellationToken),
97              Object userState = null)
98          {
99              return AppendTimelineRecordFeedAsync(scopeIdentifier,
100                                                   planType,
101                                                   planId,
102                                                   timelineId,
103                                                   recordId,
104                                                   new TimelineRecordFeedLinesWrapper(stepId, lines, startLine),
105                                                   userState,
106                                                   cancellationToken);
107          }
108          public async Task RaisePlanEventAsync<T>(
109              Guid scopeIdentifier,
110              String planType,
111              Guid planId,
112              T eventData,
113              CancellationToken cancellationToken = default(CancellationToken),
114              Object userState = null) where T : JobEvent
115          {
116              var routeValues = new { scopeIdentifier = scopeIdentifier, hubName = planType, planId = planId };
117              await base.PostAsync<T>(eventData,
118                                      TaskResourceIds.PlanEvents,
119                                      routeValues,
120                                      version: m_currentApiVersion,
121                                      cancellationToken: cancellationToken,
122                                      userState: userState).ConfigureAwait(false);
123          }
124          public Task<List<TimelineRecord>> UpdateTimelineRecordsAsync(
125              Guid scopeIdentifier,
126              String planType,
127              Guid planId,
128              Guid timelineId,
129              IEnumerable<TimelineRecord> records,
130              CancellationToken cancellationToken = default(CancellationToken),
131              Object userState = null)
132          {
133              return UpdateRecordsAsync(scopeIdentifier,
134                                        planType,
135                                        planId,
136                                        timelineId,
137                                        new VssJsonCollectionWrapper<IEnumerable<TimelineRecord>>(records),
138                                        userState,
139                                        cancellationToken);
140          }
141          private readonly ApiResourceVersion m_currentApiVersion = new ApiResourceVersion(2.0, 1);
142      }
143  }
</code></pre>
        </div>
        <div class="column">
            <h3>runner-MDEwOlJlcG9zaXRvcnkxODQyODY4NzU=-flat-RunServiceHttpClient.cs</h3>
            <pre><code>1  using System;
2  using System.Collections.Generic;
3  using System.Net;
4  using System.Net.Http;
5  using System.Threading;
6  using System.Threading.Tasks;
7  using GitHub.DistributedTask.Pipelines;
8  using GitHub.DistributedTask.WebApi;
9  using GitHub.Services.Common;
10  using GitHub.Services.OAuth;
11  using GitHub.Services.WebApi;
12  using Sdk.RSWebApi.Contracts;
13  using Sdk.WebApi.WebApi;
14  namespace GitHub.Actions.RunService.WebApi
15  {
16      public class RunServiceHttpClient : RawHttpClientBase
17      {
18          public RunServiceHttpClient(
19              Uri baseUrl,
20              VssOAuthCredential credentials)
21              : base(baseUrl, credentials)
22          {
23          }
24          public RunServiceHttpClient(
25              Uri baseUrl,
26              VssOAuthCredential credentials,
27              RawClientHttpRequestSettings settings)
28              : base(baseUrl, credentials, settings)
29          {
30          }
31          public RunServiceHttpClient(
32              Uri baseUrl,
33              VssOAuthCredential credentials,
<span onclick='openModal()' class='match'>34              params DelegatingHandler[] handlers)
35              : base(baseUrl, credentials, handlers)
36          {
37          }
38          public RunServiceHttpClient(
39              Uri baseUrl,
40              VssOAuthCredential credentials,
41              RawClientHttpRequestSettings settings,
42              params DelegatingHandler[] handlers)
43              : base(baseUrl, credentials, settings, handlers)
44          {
45          }
46          public RunServiceHttpClient(
47              Uri baseUrl,
48              HttpMessageHandler pipeline,
49              Boolean disposeHandler)
50              : base(baseUrl, pipeline, disposeHandler)
51          {
52          }
53          public async Task<AgentJobRequestMessage> GetJobMessageAsync(
</span>54              Uri requestUri,
55              string messageId,
56              CancellationToken cancellationToken = default)
57          {
58              HttpMethod httpMethod = new HttpMethod("POST");
59              var payload = new AcquireJobRequest
60              {
61                  JobMessageId = messageId,
62              };
63              requestUri = new Uri(requestUri, "acquirejob");
64              var requestContent = new ObjectContent<AcquireJobRequest>(payload, new VssJsonMediaTypeFormatter(true));
65              var result = await SendAsync<AgentJobRequestMessage>(
66                  httpMethod,
67                  requestUri: requestUri,
68                  content: requestContent,
69                  cancellationToken: cancellationToken);
70              if (result.IsSuccess)
71              {
72                  return result.Value;
73              }
74              switch (result.StatusCode)
75              {
76                  case HttpStatusCode.NotFound:
77                      throw new TaskOrchestrationJobNotFoundException($"Job message not found: {messageId}");
78                  case HttpStatusCode.Conflict:
79                      throw new TaskOrchestrationJobAlreadyAcquiredException($"Job message already acquired: {messageId}");
80                  default:
81                      throw new Exception($"Failed to get job message: {result.Error}");
82              }
83          }
84          public async Task CompleteJobAsync(
85              Uri requestUri,
86              Guid planId,
87              Guid jobId,
88              TaskResult result,
89              Dictionary<String, VariableValue> outputs,
90              IList<StepResult> stepResults,
91              IList<Annotation> jobAnnotations,
92              string environmentUrl,
93              CancellationToken cancellationToken = default)
94          {
95              HttpMethod httpMethod = new HttpMethod("POST");
96              var payload = new CompleteJobRequest()
97              {
98                  PlanID = planId,
99                  JobID = jobId,
100                  Conclusion = result,
101                  Outputs = outputs,
102                  StepResults = stepResults,
103                  Annotations = jobAnnotations,
104                  EnvironmentUrl = environmentUrl,
105              };
106              requestUri = new Uri(requestUri, "completejob");
107              var requestContent = new ObjectContent<CompleteJobRequest>(payload, new VssJsonMediaTypeFormatter(true));
108              var response = await SendAsync(
109                      httpMethod,
110                      requestUri,
111                      content: requestContent,
112                      cancellationToken: cancellationToken);
113              if (response.IsSuccessStatusCode)
114              {
115                  return;
116              }
117              switch (response.StatusCode)
118              {
119                  case HttpStatusCode.NotFound:
120                      throw new TaskOrchestrationJobNotFoundException($"Job not found: {jobId}");
121                  default:
122                      throw new Exception($"Failed to complete job: {response.ReasonPhrase}");
123              }
124          }
125          public async Task<RenewJobResponse> RenewJobAsync(
126              Uri requestUri,
127              Guid planId,
128              Guid jobId,
129              CancellationToken cancellationToken = default)
130          {
131              HttpMethod httpMethod = new HttpMethod("POST");
132              var payload = new RenewJobRequest()
133              {
134                  PlanID = planId,
135                  JobID = jobId
136              };
137              requestUri = new Uri(requestUri, "renewjob");
138              var requestContent = new ObjectContent<RenewJobRequest>(payload, new VssJsonMediaTypeFormatter(true));
139              var result = await SendAsync<RenewJobResponse>(
140                  httpMethod,
141                  requestUri,
142                  content: requestContent,
143                  cancellationToken: cancellationToken);
144              if (result.IsSuccess)
145              {
146                  return result.Value;
147              }
148              switch (result.StatusCode)
149              {
150                  case HttpStatusCode.NotFound:
151                      throw new TaskOrchestrationJobNotFoundException($"Job not found: {jobId}");
152                  default:
153                      throw new Exception($"Failed to renew job: {result.Error}");
154              }
155          }
156      }
157  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from runner-MDEwOlJlcG9zaXRvcnkxODQyODY4NzU=-flat-TaskHttpClient.cs</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from runner-MDEwOlJlcG9zaXRvcnkxODQyODY4NzU=-flat-RunServiceHttpClient.cs</div>
                </div>
                <div class="column column_space"><pre><code>29              params DelegatingHandler[] handlers)
30              : base(baseUrl, credentials, handlers)
31          {
32          }
33          public TaskHttpClient(
34              Uri baseUrl,
35              VssCredentials credentials,
36              VssHttpRequestSettings settings,
37              params DelegatingHandler[] handlers)
38              : base(baseUrl, credentials, settings, handlers)
39          {
40          }
41          public TaskHttpClient(
42              Uri baseUrl,
43              HttpMessageHandler pipeline,
44              Boolean disposeHandler)
45              : base(baseUrl, pipeline, disposeHandler)
46          {
47          }
48          public Task AppendTimelineRecordFeedAsync(
</pre></code></div>
                <div class="column column_space"><pre><code>34              params DelegatingHandler[] handlers)
35              : base(baseUrl, credentials, handlers)
36          {
37          }
38          public RunServiceHttpClient(
39              Uri baseUrl,
40              VssOAuthCredential credentials,
41              RawClientHttpRequestSettings settings,
42              params DelegatingHandler[] handlers)
43              : base(baseUrl, credentials, settings, handlers)
44          {
45          }
46          public RunServiceHttpClient(
47              Uri baseUrl,
48              HttpMessageHandler pipeline,
49              Boolean disposeHandler)
50              : base(baseUrl, pipeline, disposeHandler)
51          {
52          }
53          public async Task<AgentJobRequestMessage> GetJobMessageAsync(
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    