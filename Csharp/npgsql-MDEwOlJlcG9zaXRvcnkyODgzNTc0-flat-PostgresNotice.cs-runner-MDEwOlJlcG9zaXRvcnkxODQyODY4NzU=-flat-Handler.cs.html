
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 51.32743362831859%, Tokens: 11</h2>
        <div class="column">
            <h3>npgsql-MDEwOlJlcG9zaXRvcnkyODgzNTc0-flat-PostgresNotice.cs</h3>
            <pre><code>1  using System;
2  using Microsoft.Extensions.Logging;
3  using Npgsql.BackendMessages;
4  using Npgsql.Internal;
5  namespace Npgsql;
6  public sealed class PostgresNotice
7  {
8      #region Message Fields
<span onclick='openModal()' class='match'>9      public string Severity { get; set; }
10      public string InvariantSeverity { get; }
</span>11      public string SqlState { get; set; }
12      [Obsolete("Use SqlState instead")]
13      public string Code => SqlState;
14      public string MessageText { get; set; }
15      public string? Detail { get; set; }
16      public string? Hint { get; set; }
17      public int Position { get; set; }
18      public int InternalPosition { get; set; }
19      public string? InternalQuery { get; set; }
20      public string? Where { get; set; }
21      public string? SchemaName { get; set; }
22      public string? TableName { get; set; }
23      public string? ColumnName { get; set; }
24      public string? DataTypeName { get; set; }
25      public string? ConstraintName { get; set; }
26      public string? File { get; set; }
27      public string? Line { get; set; }
28      public string? Routine { get; set; }
29      #endregion
30      public PostgresNotice(string severity, string invariantSeverity, string sqlState, string messageText)
31          : this(messageText, severity, invariantSeverity, sqlState, detail: null) {}
32      public PostgresNotice(
33          string messageText, string severity, string invariantSeverity, string sqlState,
34          string? detail = null, string? hint = null, int position = 0, int internalPosition = 0,
35          string? internalQuery = null, string? where = null, string? schemaName = null, string? tableName = null,
36          string? columnName = null, string? dataTypeName = null, string? constraintName = null, string? file = null,
37          string? line = null, string? routine = null)
38      {
39          MessageText = messageText;
40          Severity = severity;
41          InvariantSeverity = invariantSeverity;
42          SqlState = sqlState;
43          Detail = detail;
44          Hint = hint;
45          Position = position;
46          InternalPosition = internalPosition;
47          InternalQuery = internalQuery;
48          Where = where;
49          SchemaName = schemaName;
50          TableName = tableName;
51          ColumnName = columnName;
52          DataTypeName = dataTypeName;
53          ConstraintName = constraintName;
54          File = file;
55          Line = line;
56          Routine = routine;
57      }
58      PostgresNotice(ErrorOrNoticeMessage msg)
59          : this(
60              msg.Message, msg.Severity, msg.InvariantSeverity, msg.SqlState,
61              msg.Detail, msg.Hint, msg.Position, msg.InternalPosition, msg.InternalQuery,
62              msg.Where, msg.SchemaName, msg.TableName, msg.ColumnName, msg.DataTypeName,
63              msg.ConstraintName, msg.File, msg.Line, msg.Routine) {}
64      internal static PostgresNotice Load(NpgsqlReadBuffer buf, bool includeDetail, ILogger exceptionLogger)
65          => new(ErrorOrNoticeMessage.Load(buf, includeDetail, exceptionLogger));
66  }
67  public sealed class NpgsqlNoticeEventArgs : EventArgs
68  {
69      public PostgresNotice Notice { get; }
70      internal NpgsqlNoticeEventArgs(PostgresNotice notice)
71      {
72          Notice = notice;
73      }
74  }
</code></pre>
        </div>
        <div class="column">
            <h3>runner-MDEwOlJlcG9zaXRvcnkxODQyODY4NzU=-flat-Handler.cs</h3>
            <pre><code>1  using System;
2  using System.Collections.Generic;
3  using System.IO;
4  using System.Linq;
5  using System.Threading.Tasks;
6  using GitHub.DistributedTask.WebApi;
7  using GitHub.Runner.Common;
8  using GitHub.Runner.Common.Util;
9  using GitHub.Runner.Sdk;
10  using Pipelines = GitHub.DistributedTask.Pipelines;
11  namespace GitHub.Runner.Worker.Handlers
12  {
13      public interface IHandler : IRunnerService
14      {
15          Pipelines.ActionStepDefinitionReference Action { get; set; }
16          Dictionary<string, string> Environment { get; set; }
17          IExecutionContext ExecutionContext { get; set; }
18          Variables RuntimeVariables { get; set; }
19          IStepHost StepHost { get; set; }
20          Dictionary<string, string> Inputs { get; set; }
21          string ActionDirectory { get; set; }
22          List<JobExtensionRunner> LocalActionContainerSetupSteps { get; set; }
23          Task RunAsync(ActionRunStage stage);
24          void PrepareExecution(ActionRunStage stage);
25      }
26      public abstract class Handler : RunnerService
27      {
28  #if OS_WINDOWS
29          private const int _environmentVariableMaximumSize = 32766;
30  #endif
<span onclick='openModal()' class='match'>31          protected IActionCommandManager ActionCommandManager { get; private set; }
32          public Pipelines.ActionStepDefinitionReference Action { get; set; }
</span>33          public bool IsActionStep => Action != null;
34          public Dictionary<string, string> Environment { get; set; }
35          public Variables RuntimeVariables { get; set; }
36          public IExecutionContext ExecutionContext { get; set; }
37          public IStepHost StepHost { get; set; }
38          public Dictionary<string, string> Inputs { get; set; }
39          public string ActionDirectory { get; set; }
40          public List<JobExtensionRunner> LocalActionContainerSetupSteps { get; set; }
41          public void PrepareExecution(ActionRunStage stage)
42          {
43              PrintActionDetails(stage);
44              PopulateActionTelemetry(stage);
45          }
46          protected void PopulateActionTelemetry(ActionRunStage stage)
47          {
48              if (!IsActionStep)
49              {
50                  ExecutionContext.StepTelemetry.Type = "runner";
51                  ExecutionContext.StepTelemetry.Action = $"{stage} Job Hook";
52              }
53              else if (Action.Type == Pipelines.ActionSourceType.ContainerRegistry)
54              {
55                  ExecutionContext.StepTelemetry.Type = "docker";
56                  var registryAction = Action as Pipelines.ContainerRegistryReference;
57                  ExecutionContext.StepTelemetry.Action = registryAction.Image;
58              }
59              else if (Action.Type == Pipelines.ActionSourceType.Script)
60              {
61                  ExecutionContext.StepTelemetry.Type = "run";
62              }
63              else if (Action.Type == Pipelines.ActionSourceType.Repository)
64              {
65                  ExecutionContext.StepTelemetry.Type = "repository";
66                  var repoAction = Action as Pipelines.RepositoryPathReference;
67                  if (string.Equals(repoAction.RepositoryType, Pipelines.PipelineConstants.SelfAlias, StringComparison.OrdinalIgnoreCase))
68                  {
69                      ExecutionContext.StepTelemetry.Action = repoAction.Path;
70                  }
71                  else
72                  {
73                      ExecutionContext.StepTelemetry.Ref = repoAction.Ref;
74                      if (string.IsNullOrEmpty(repoAction.Path))
75                      {
76                          ExecutionContext.StepTelemetry.Action = repoAction.Name;
77                      }
78                      else
79                      {
80                          ExecutionContext.StepTelemetry.Action = $"{repoAction.Name}/{repoAction.Path}";
81                      }
82                  }
83              }
84              else
85              {
86                  Trace.Error($"Can't generate ref for {Action.Type.ToString()}");
87              }
88          }
89          protected virtual void PrintActionDetails(ActionRunStage stage)
90          {
91              if (stage == ActionRunStage.Post)
92              {
93                  ExecutionContext.Output($"Post job cleanup.");
94                  return;
95              }
96              string groupName = "";
97              if (Action.Type == Pipelines.ActionSourceType.ContainerRegistry)
98              {
99                  var registryAction = Action as Pipelines.ContainerRegistryReference;
100                  groupName = $"Run docker:&bsol;&bsol;{registryAction.Image}";
101              }
102              else if (Action.Type == Pipelines.ActionSourceType.Repository)
103              {
104                  var repoAction = Action as Pipelines.RepositoryPathReference;
105                  if (string.Equals(repoAction.RepositoryType, Pipelines.PipelineConstants.SelfAlias, StringComparison.OrdinalIgnoreCase))
106                  {
107                      groupName = $"Run {repoAction.Path}";
108                  }
109                  else
110                  {
111                      if (string.IsNullOrEmpty(repoAction.Path))
112                      {
113                          groupName = $"Run {repoAction.Name}@{repoAction.Ref}";
114                      }
115                      else
116                      {
117                          groupName = $"Run {repoAction.Name}/{repoAction.Path}@{repoAction.Ref}";
118                      }
119                  }
120              }
121              else
122              {
123                  Trace.Error($"Can't generate default folding group name for action {Action.Type.ToString()}");
124                  groupName = "Action details";
125              }
126              ExecutionContext.Output($"##[group]{groupName}");
127              if (this.Inputs?.Count > 0)
128              {
129                  ExecutionContext.Output("with:");
130                  foreach (var input in this.Inputs)
131                  {
132                      if (!string.IsNullOrEmpty(input.Value))
133                      {
134                          ExecutionContext.Output($"  {input.Key}: {input.Value}");
135                      }
136                  }
137              }
138              if (this.Environment?.Count > 0)
139              {
140                  ExecutionContext.Output("env:");
141                  foreach (var env in this.Environment)
142                  {
143                      ExecutionContext.Output($"  {env.Key}: {env.Value}");
144                  }
145              }
146              ExecutionContext.Output("##[endgroup]");
147          }
148          public override void Initialize(IHostContext hostContext)
149          {
150              base.Initialize(hostContext);
151              ActionCommandManager = hostContext.CreateService<IActionCommandManager>();
152          }
153          protected void AddInputsToEnvironment()
154          {
155              Trace.Entering();
156              ArgUtil.NotNull(Inputs, nameof(Inputs));
157              foreach (KeyValuePair<string, string> pair in Inputs)
158              {
159                  AddEnvironmentVariable(
160                      key: $"INPUT_{pair.Key?.Replace(' ', '_').ToUpperInvariant()}",
161                      value: pair.Value);
162              }
163          }
164          protected void AddEnvironmentVariable(string key, string value)
165          {
166              ArgUtil.NotNullOrEmpty(key, nameof(key));
167              Trace.Verbose($"Setting env '{key}' to '{value}'.");
168              Environment[key] = value ?? string.Empty;
169  #if OS_WINDOWS
170              if (Environment[key].Length > _environmentVariableMaximumSize)
171              {
172                  ExecutionContext.Warning($"Environment variable '{key}' exceeds the maximum supported length. Environment variable length: {value.Length} , Maximum supported length: {_environmentVariableMaximumSize}");
173              }
174  #endif
175          }
176          protected void AddPrependPathToEnvironment()
177          {
178              Trace.Entering();
179              ArgUtil.NotNull(ExecutionContext.Global.PrependPath, nameof(ExecutionContext.Global.PrependPath));
180              if (ExecutionContext.Global.PrependPath.Count == 0)
181              {
182                  return;
183              }
184              string prepend = string.Join(Path.PathSeparator.ToString(), ExecutionContext.Global.PrependPath.Reverse<string>());
185              var containerStepHost = StepHost as ContainerStepHost;
186              if (containerStepHost != null)
187              {
188                  containerStepHost.PrependPath = prepend;
189              }
190              else
191              {
192                  string taskEnvPATH;
193                  Environment.TryGetValue(Constants.PathVariable, out taskEnvPATH);
194                  string originalPath = RuntimeVariables.Get(Constants.PathVariable) ?? 
195                      taskEnvPATH ?? 
196                      System.Environment.GetEnvironmentVariable(Constants.PathVariable) ?? 
197                      string.Empty;
198                  string newPath = PathUtil.PrependPath(prepend, originalPath);
199                  AddEnvironmentVariable(Constants.PathVariable, newPath);
200              }
201          }
202      }
203  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from npgsql-MDEwOlJlcG9zaXRvcnkyODgzNTc0-flat-PostgresNotice.cs</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from runner-MDEwOlJlcG9zaXRvcnkxODQyODY4NzU=-flat-Handler.cs</div>
                </div>
                <div class="column column_space"><pre><code>9      public string Severity { get; set; }
10      public string InvariantSeverity { get; }
</pre></code></div>
                <div class="column column_space"><pre><code>31          protected IActionCommandManager ActionCommandManager { get; private set; }
32          public Pipelines.ActionStepDefinitionReference Action { get; set; }
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    