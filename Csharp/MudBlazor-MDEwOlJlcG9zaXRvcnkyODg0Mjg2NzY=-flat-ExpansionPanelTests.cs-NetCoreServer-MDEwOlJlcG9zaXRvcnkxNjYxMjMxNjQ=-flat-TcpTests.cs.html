
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 15.332197614991482%, Tokens: 11, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>MudBlazor-MDEwOlJlcG9zaXRvcnkyODg0Mjg2NzY=-flat-ExpansionPanelTests.cs</h3>
            <pre><code>1  using System.Collections.Generic;
2  using System.Linq;
3  using System.Threading.Tasks;
4  using Bunit;
5  using FluentAssertions;
6  using MudBlazor.UnitTests.TestComponents;
7  using NUnit.Framework;
8  namespace MudBlazor.UnitTests.Components
9  {
10      [TestFixture]
11      public class ExpansionPanelTests : BunitTest
12      {
13          [OneTimeSetUp]
14          public void Init()
15          {
16              AssertionOptions.FormattingOptions.MaxDepth = 100;
17              AssertionOptions.FormattingOptions.MaxLines = 5000;
18          }
19          [OneTimeTearDown]
20          public void Cleanup()
21          {
22              AssertionOptions.FormattingOptions.MaxDepth = 5;
23              AssertionOptions.FormattingOptions.MaxLines = 100;
24          }
25          [Test]
26          public async Task MudExpansionPanel_Respects_Collapsing_Order()
27          {
28              var comp = Context.RenderComponent<ExpansionPanelExpansionsTest>();
29              var sequence = new List<int> { 0, 2, 1 };
30              foreach (var item in sequence)
31              {
32                  await comp.InvokeAsync(() => comp.FindAll(".mud-expand-panel-header")[item].Click());
33                  var panels = comp.FindAll(".mud-expand-panel").ToList();
34                  panels[item].OuterHtml.Should().Contain("mud-panel-expanded");
35                  foreach (var other in sequence.Where(it => it != item))
36                  {
37                      panels[other].OuterHtml.Should().NotContain("mud-panel-expanded");
38                  }
39              }
40          }
41          [Test]
42          public void MudExpansionPanel_Without_MultiExpansion_Doesnt_Crash_With_Multiple_Expanded_Tabs()
43          {
44              var comp = Context.RenderComponent<ExpansionPanelExpandedMultipleWithoutMultipleExpansionSetTest>();
45              var allPanels = comp.FindAll(".mud-expand-panel").ToList();
46              var expandedPanels = comp.FindAll(".mud-panel-expanded").ToList();
47              expandedPanels.Count.Should().Be(1);
48              expandedPanels.First().Should().Be(allPanels.First());
49          }
50          [Test]
51          public async Task MudExpansionPanel_MultiExpansion_Doesnt_Collapse_Others()
52          {
53              var comp = Context.RenderComponent<ExpansionPanelMultiExpansionTest>();
54              foreach (var header in comp.FindAll(".mud-expand-panel-header"))
55              {
56                  await comp.InvokeAsync(() => header.Click());
57              }
58              var panels = comp.FindAll(".mud-panel-expanded").ToList();
59              panels.Count.Should().Be(3);
60          }
61          [Test]
62          public void MudExpansionPanel_IsInitiallyExpanded_Expands()
63          {
64              var comp = Context.RenderComponent<ExpansionPanelStartExpandedTest>();
65              var panels = comp.FindAll(".mud-panel-expanded").ToList();
66              panels.Count.Should().Be(1);
67              var header = comp.FindAll(".panel-two > .mud-expand-panel-header").First();
68              header.Click();
69              panels = comp.FindAll(".mud-panel-expanded").ToList();
70              panels.Count.Should().Be(0);
71          }
72          [Test]
73          public async Task MudExpansionPanel_IsInitiallyExpanded_Works_With_Multi_Expanded()
74          {
75              var comp = Context.RenderComponent<ExpansionPanelStartExpandedMultipleTest>();
76              var panels = comp.FindAll(".mud-panel-expanded").ToList();
77              panels.Count.Should().Be(3);
78              foreach (var header in comp.FindAll(".mud-expand-panel-header"))
79              {
80                  await comp.InvokeAsync(() => header.Click());
81              }
82              panels = comp.FindAll(".mud-panel-expanded").ToList();
83              panels.Count.Should().Be(0);
84          }
85          [Test]
86          public async Task MudExpansionPanel_Other()
87          {
88              var comp = Context.RenderComponent<ExpansionPanelStartExpandedTest>();
89              var panel = comp.FindComponent<MudExpansionPanel>();
90  #pragma warning disable BL0005
91              await comp.InvokeAsync(() => panel.Instance.Disabled = true);
92              await comp.InvokeAsync(() => panel.Instance.ToggleExpansion());
93              await comp.InvokeAsync(() => panel.Instance.Expand());
94              comp.WaitForAssertion(() => panel.Instance.IsExpanded.Should().BeTrue());
95              await comp.InvokeAsync(() => panel.Instance.Collapse());
96              comp.WaitForAssertion(() => panel.Instance.IsExpanded.Should().BeFalse());
97          }
98          [Test]
99          public void MudExpansionPanel_ExpandAll()
100          {
101              var panels = Context.RenderComponent<MudExpansionPanels>();
102              var panel1 = new MudExpansionPanel();
103              var panel2 = new MudExpansionPanel();
104              var panel3 = new MudExpansionPanel();
105              panels.Instance.AddPanel(panel1);
106              panels.Instance.AddPanel(panel2);
107              panels.Instance.AddPanel(panel3);
108              panel1.IsExpanded.Should().BeFalse();
109              panel2.IsExpanded.Should().BeFalse();
110              panel3.IsExpanded.Should().BeFalse();
111              panels.Instance.ExpandAll();
112              panel1.IsExpanded.Should().BeTrue();
113              panel2.IsExpanded.Should().BeTrue();
114              panel3.IsExpanded.Should().BeTrue();
115          }
116          [Test]
117          public void MudExpansionPanel_CollapseAll()
118          {
119              var panels = Context.RenderComponent<MudExpansionPanels>();
120              var panel1 = new MudExpansionPanel();
121              var panel2 = new MudExpansionPanel();
122              var panel3 = new MudExpansionPanel();
123              panels.Instance.AddPanel(panel1);
124              panels.Instance.AddPanel(panel2);
125              panels.Instance.AddPanel(panel3);
126              panel1.Expand(false);
127              panel2.Expand(false);
128              panel3.Expand(false);
129              panel1.IsExpanded.Should().BeTrue();
130              panel2.IsExpanded.Should().BeTrue();
131              panel3.IsExpanded.Should().BeTrue();
132              panels.Instance.CollapseAll();
133              panel1.IsExpanded.Should().BeFalse();
134              panel2.IsExpanded.Should().BeFalse();
135              panel3.IsExpanded.Should().BeFalse();
136          }
137          [Test]
138          public void MudExpansionPanel_CollapseAllExcept()
139          {
140              var panels = Context.RenderComponent<MudExpansionPanels>();
141              var panel1 = new MudExpansionPanel();
142              var panel2 = new MudExpansionPanel();
143              var panel3 = new MudExpansionPanel();
144              panels.Instance.AddPanel(panel1);
145              panels.Instance.AddPanel(panel2);
146              panels.Instance.AddPanel(panel3);
147              panel1.Expand(false);
148              panel2.Expand(false);
149              panel3.Expand(false);
150              panel1.IsExpanded.Should().BeTrue();
151              panel2.IsExpanded.Should().BeTrue();
<span onclick='openModal()' class='match'>152              panel3.IsExpanded.Should().BeTrue();
153              panels.Instance.CollapseAllExcept(panel2);
154              panel1.IsExpanded.Should().BeFalse();
155              panel2.IsExpanded.Should().BeTrue();
156              panel3.IsExpanded.Should().BeFalse();
157          }
158      }
159  }
</span></code></pre>
        </div>
        <div class="column">
            <h3>NetCoreServer-MDEwOlJlcG9zaXRvcnkxNjYxMjMxNjQ=-flat-TcpTests.cs</h3>
            <pre><code>1  using System;
2  using System.Collections.Generic;
3  using System.Net;
4  using System.Net.Sockets;
5  using System.Threading;
6  using NetCoreServer;
7  using Xunit;
8  namespace tests
9  {
10      class EchoTcpClient : NetCoreServer.TcpClient
11      {
12          public bool Connected { get; set; }
13          public bool Disconnected { get; set; }
14          public bool Errors { get; set; }
15          public EchoTcpClient(string address, int port) : base(address, port) {}
16          protected override void OnConnected() { Connected = true; }
17          protected override void OnDisconnected() { Disconnected = true; }
18          protected override void OnError(SocketError error) { Errors = true; }
19      }
20      class EchoTcpSession : TcpSession
21      {
22          public bool Connected { get; set; }
23          public bool Disconnected { get; set; }
24          public bool Errors { get; set; }
25          public EchoTcpSession(TcpServer server) : base(server) {}
26          protected override void OnConnected() { Connected = true; }
27          protected override void OnDisconnected() { Disconnected = true; }
28          protected override void OnReceived(byte[] buffer, long offset, long size) { SendAsync(buffer, offset, size); }
29          protected override void OnError(SocketError error) { Errors = true; }
30      }
31      class EchoTcpServer : TcpServer
32      {
33          public bool Started { get; set; }
34          public bool Stopped { get; set; }
35          public bool Connected { get; set; }
36          public bool Disconnected { get; set; }
37          public int Clients { get; set; }
38          public bool Errors { get; set; }
39          public EchoTcpServer(IPAddress address, int port) : base(address, port) {}
40          protected override TcpSession CreateSession() { return new EchoTcpSession(this); }
41          protected override void OnStarted() { Started = true; }
42          protected override void OnStopped() { Stopped = true; }
43          protected override void OnConnected(TcpSession session) { Connected = true; Clients++; }
44          protected override void OnDisconnected(TcpSession session) { Disconnected = true; Clients--; }
45          protected override void OnError(SocketError error) { Errors = true; }
46      }
47      public class TcpTests
48      {
49          [Fact(DisplayName = "TCP server test")]
50          public void TcpServerTest()
51          {
52              string address = "127.0.0.1";
53              int port = 1111;
54              var server = new EchoTcpServer(IPAddress.Any, port);
55              Assert.True(server.Start());
56              while (!server.IsStarted)
57                  Thread.Yield();
58              var client = new EchoTcpClient(address, port);
59              Assert.True(client.ConnectAsync());
60              while (!client.IsConnected || (server.Clients != 1))
61                  Thread.Yield();
62              client.SendAsync("test");
63              while (client.BytesReceived != 4)
64                  Thread.Yield();
65              Assert.True(client.DisconnectAsync());
66              while (client.IsConnected || (server.Clients != 0))
67                  Thread.Yield();
68              Assert.True(server.Stop());
69              while (server.IsStarted)
70                  Thread.Yield();
71              Assert.True(server.Started);
72              Assert.True(server.Stopped);
73              Assert.True(server.Connected);
74              Assert.True(server.Disconnected);
75              Assert.True(server.BytesSent == 4);
76              Assert.True(server.BytesReceived == 4);
77              Assert.True(!server.Errors);
78              Assert.True(client.Connected);
79              Assert.True(client.Disconnected);
80              Assert.True(client.BytesSent == 4);
81              Assert.True(client.BytesReceived == 4);
82              Assert.True(!client.Errors);
83          }
84          [Fact(DisplayName = "TCP server multicast test")]
85          public void TcpServerMulticastTest()
86          {
87              string address = "127.0.0.1";
88              int port = 1112;
89              var server = new EchoTcpServer(IPAddress.Any, port);
90              Assert.True(server.Start());
91              while (!server.IsStarted)
92                  Thread.Yield();
93              var client1 = new EchoTcpClient(address, port);
94              Assert.True(client1.ConnectAsync());
95              while (!client1.IsConnected || (server.Clients != 1))
96                  Thread.Yield();
97              server.Multicast("test");
98              while (client1.BytesReceived != 4)
99                  Thread.Yield();
100              var client2 = new EchoTcpClient(address, port);
101              Assert.True(client2.ConnectAsync());
102              while (!client2.IsConnected || (server.Clients != 2))
103                  Thread.Yield();
104              server.Multicast("test");
105              while ((client1.BytesReceived != 8) || (client2.BytesReceived != 4))
106                  Thread.Yield();
107              var client3 = new EchoTcpClient(address, port);
108              Assert.True(client3.ConnectAsync());
109              while (!client3.IsConnected || (server.Clients != 3))
110                  Thread.Yield();
111              server.Multicast("test");
112              while ((client1.BytesReceived != 12) || (client2.BytesReceived != 8) || (client3.BytesReceived != 4))
113                  Thread.Yield();
114              Assert.True(client1.DisconnectAsync());
115              while (client1.IsConnected || (server.Clients != 2))
116                  Thread.Yield();
117              server.Multicast("test");
118              while ((client1.BytesReceived != 12) || (client2.BytesReceived != 12) || (client3.BytesReceived != 8))
119                  Thread.Yield();
120              Assert.True(client2.DisconnectAsync());
121              while (client2.IsConnected || (server.Clients != 1))
122                  Thread.Yield();
123              server.Multicast("test");
124              while ((client1.BytesReceived != 12) || (client2.BytesReceived != 12) || (client3.BytesReceived != 12))
125                  Thread.Yield();
126              Assert.True(client3.DisconnectAsync());
127              while (client3.IsConnected || (server.Clients != 0))
128                  Thread.Yield();
129              Assert.True(server.Stop());
130              while (server.IsStarted)
131                  Thread.Yield();
132              Assert.True(server.Started);
133              Assert.True(server.Stopped);
134              Assert.True(server.Connected);
135              Assert.True(server.Disconnected);
136              Assert.True(server.BytesSent > 0);
137              Assert.True(server.BytesReceived == 0);
138              Assert.True(!server.Errors);
139              Assert.True(client1.BytesSent == 0);
140              Assert.True(client2.BytesSent == 0);
141              Assert.True(client3.BytesSent == 0);
142              Assert.True(client1.BytesReceived == 12);
143              Assert.True(client2.BytesReceived == 12);
144              Assert.True(client3.BytesReceived == 12);
145              Assert.True(!client1.Errors);
146              Assert.True(!client2.Errors);
147              Assert.True(!client3.Errors);
148          }
149          [Fact(DisplayName = "TCP server random test")]
150          public void TcpServerRandomTest()
151          {
152              string address = "127.0.0.1";
153              int port = 1113;
154              var server = new EchoTcpServer(IPAddress.Any, port);
155              Assert.True(server.Start());
156              while (!server.IsStarted)
157                  Thread.Yield();
158              int duration = 10;
159              var clients = new List<EchoTcpClient>();
160              var rand = new Random();
161              var start = DateTime.UtcNow;
162              while ((DateTime.UtcNow - start).TotalSeconds < duration)
163              {
164                  if ((rand.Next() % 1000) == 0)
165                  {
166                      server.DisconnectAll();
167                  }
168                  else if ((rand.Next() % 100) == 0)
169                  {
170                      if (clients.Count < 100)
171                      {
172                          var client = new EchoTcpClient(address, port);
173                          clients.Add(client);
174                          client.ConnectAsync();
175                          while (!client.IsConnected)
176                              Thread.Yield();
177                      }
178                  }
179                  else if ((rand.Next() % 100) == 0)
180                  {
181                      if (clients.Count > 0)
182                      {
183                          int index = rand.Next() % clients.Count;
184                          var client = clients[index];
185                          if (client.IsConnected)
186                          {
187                              client.DisconnectAsync();
188                              while (client.IsConnected)
189                                  Thread.Yield();
190                          }
191                          else
192                          {
193                              client.ConnectAsync();
194                              while (!client.IsConnected)
195                                  Thread.Yield();
196                          }
197                      }
198                  }
199                  else if ((rand.Next() % 100) == 0)
200                  {
201                      if (clients.Count > 0)
202                      {
203                          int index = rand.Next() % clients.Count;
204                          var client = clients[index];
205                          if (client.IsConnected)
206                          {
207                              client.ReconnectAsync();
208                              while (!client.IsConnected)
209                                  Thread.Yield();
210                          }
211                      }
212                  }
213                  else if ((rand.Next() % 10) == 0)
214                  {
215                      server.Multicast("test");
216                  }
217                  else if ((rand.Next() % 1) == 0)
218                  {
219                      if (clients.Count > 0)
220                      {
221                          int index = rand.Next() % clients.Count;
222                          var client = clients[index];
223                          if (client.IsConnected)
224                              client.SendAsync("test");
225                      }
226                  }
227                  Thread.Sleep(1);
228              }
229              foreach (var client in clients)
230              {
231                  client.DisconnectAsync();
232                  while (client.IsConnected)
233                      Thread.Yield();
234              }
235              Assert.True(server.Stop());
236              while (server.IsStarted)
<span onclick='openModal()' class='match'>237                  Thread.Yield();
238              Assert.True(server.Started);
239              Assert.True(server.Stopped);
240              Assert.True(server.Connected);
241              Assert.True(server.Disconnected);
242              Assert.True(server.BytesSent > 0);
243              Assert.True(server.BytesReceived > 0);
244              Assert.True(!server.Errors);
245          }
246      }
247  }
</span></code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from MudBlazor-MDEwOlJlcG9zaXRvcnkyODg0Mjg2NzY=-flat-ExpansionPanelTests.cs</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from NetCoreServer-MDEwOlJlcG9zaXRvcnkxNjYxMjMxNjQ=-flat-TcpTests.cs</div>
                </div>
                <div class="column column_space"><pre><code>152              panel3.IsExpanded.Should().BeTrue();
153              panels.Instance.CollapseAllExcept(panel2);
154              panel1.IsExpanded.Should().BeFalse();
155              panel2.IsExpanded.Should().BeTrue();
156              panel3.IsExpanded.Should().BeFalse();
157          }
158      }
159  }
</pre></code></div>
                <div class="column column_space"><pre><code>237                  Thread.Yield();
238              Assert.True(server.Started);
239              Assert.True(server.Stopped);
240              Assert.True(server.Connected);
241              Assert.True(server.Disconnected);
242              Assert.True(server.BytesSent > 0);
243              Assert.True(server.BytesReceived > 0);
244              Assert.True(!server.Errors);
245          }
246      }
247  }
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    