
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Tokens: 24, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>runner-MDEwOlJlcG9zaXRvcnkxODQyODY4NzU=-flat-HandlerFactory.cs</h3>
            <pre><code>1  using System;
2  using System.Collections.Generic;
3  using GitHub.DistributedTask.WebApi;
4  using GitHub.Runner.Common.Util;
5  using Pipelines = GitHub.DistributedTask.Pipelines;
6  using GitHub.Runner.Common;
7  using GitHub.Runner.Sdk;
8  namespace GitHub.Runner.Worker.Handlers
9  {
10      [ServiceLocator(Default = typeof(HandlerFactory))]
11      public interface IHandlerFactory : IRunnerService
12      {
13          IHandler Create(
14              IExecutionContext executionContext,
15              Pipelines.ActionStepDefinitionReference action,
16              IStepHost stepHost,
17              ActionExecutionData data,
18              Dictionary<string, string> inputs,
19              Dictionary<string, string> environment,
20              Variables runtimeVariables,
21              string actionDirectory,
22              List<JobExtensionRunner> localActionContainerSetupSteps);
23      }
24      public sealed class HandlerFactory : RunnerService, IHandlerFactory
25      {
26          public IHandler Create(
27              IExecutionContext executionContext,
28              Pipelines.ActionStepDefinitionReference action,
29              IStepHost stepHost,
30              ActionExecutionData data,
31              Dictionary<string, string> inputs,
32              Dictionary<string, string> environment,
33              Variables runtimeVariables,
34              string actionDirectory,
35              List<JobExtensionRunner> localActionContainerSetupSteps)
36          {
37              Trace.Entering();
38              ArgUtil.NotNull(executionContext, nameof(executionContext));
39              ArgUtil.NotNull(stepHost, nameof(stepHost));
40              ArgUtil.NotNull(data, nameof(data));
41              ArgUtil.NotNull(inputs, nameof(inputs));
42              ArgUtil.NotNull(environment, nameof(environment));
43              ArgUtil.NotNull(runtimeVariables, nameof(runtimeVariables));
44              IHandler handler;
45              if (data.ExecutionType == ActionExecutionType.Container)
46              {
47                  handler = HostContext.CreateService<IContainerActionHandler>();
48                  (handler as IContainerActionHandler).Data = data as ContainerActionExecutionData;
49              }
50              else if (data.ExecutionType == ActionExecutionType.NodeJS)
51              {
52                  handler = HostContext.CreateService<INodeScriptActionHandler>();
53                  var nodeData = data as NodeJSActionExecutionData;
54                  if (string.Equals(nodeData.NodeVersion, "node12", StringComparison.InvariantCultureIgnoreCase) &&
55                      (executionContext.Global.Variables.GetBoolean("DistributedTask.ForceGithubJavascriptActionsToNode16") ?? false))
56                  {
57                      executionContext.Global.EnvironmentVariables.TryGetValue(Constants.Variables.Actions.AllowActionsUseUnsecureNodeVersion, out var workflowOptOut);
58                      var isWorkflowOptOutSet = !string.IsNullOrEmpty(workflowOptOut);
59                      var isLocalOptOut = StringUtil.ConvertToBoolean(Environment.GetEnvironmentVariable(Constants.Variables.Actions.AllowActionsUseUnsecureNodeVersion));
60                      bool isOptOut = isWorkflowOptOutSet ? StringUtil.ConvertToBoolean(workflowOptOut) : isLocalOptOut;
61                      if (!isOptOut)
62                      {
63                          nodeData.NodeVersion = "node16";
64                      }
65                  }
66                  (handler as INodeScriptActionHandler).Data = nodeData;
67              }
68              else if (data.ExecutionType == ActionExecutionType.Script)
69              {
70                  handler = HostContext.CreateService<IScriptHandler>();
71                  (handler as IScriptHandler).Data = data as ScriptActionExecutionData;
72              }
73              else if (data.ExecutionType == ActionExecutionType.Plugin)
74              {
75                  handler = HostContext.CreateService<IRunnerPluginHandler>();
76                  (handler as IRunnerPluginHandler).Data = data as PluginActionExecutionData;
77              }
78              else if (data.ExecutionType == ActionExecutionType.Composite)
79              {
<span onclick='openModal()' class='match'>80                  handler = HostContext.CreateService<ICompositeActionHandler>();
81                  (handler as ICompositeActionHandler).Data = data as CompositeActionExecutionData;
82              }
83              else
84              {
</span>85                  throw new NotSupportedException(data.ExecutionType.ToString());
86              }
87              handler.Action = action;
88              handler.Environment = environment;
89              handler.RuntimeVariables = runtimeVariables;
90              handler.ExecutionContext = executionContext;
91              handler.StepHost = stepHost;
92              handler.Inputs = inputs;
93              handler.ActionDirectory = actionDirectory;
94              handler.LocalActionContainerSetupSteps = localActionContainerSetupSteps;
95              return handler;
96          }
97      }
98  }
</code></pre>
        </div>
        <div class="column">
            <h3>runner-MDEwOlJlcG9zaXRvcnkxODQyODY4NzU=-flat-HandlerFactory.cs</h3>
            <pre><code>1  using System;
2  using System.Collections.Generic;
3  using GitHub.DistributedTask.WebApi;
4  using GitHub.Runner.Common.Util;
5  using Pipelines = GitHub.DistributedTask.Pipelines;
6  using GitHub.Runner.Common;
7  using GitHub.Runner.Sdk;
8  namespace GitHub.Runner.Worker.Handlers
9  {
10      [ServiceLocator(Default = typeof(HandlerFactory))]
11      public interface IHandlerFactory : IRunnerService
12      {
13          IHandler Create(
14              IExecutionContext executionContext,
15              Pipelines.ActionStepDefinitionReference action,
16              IStepHost stepHost,
17              ActionExecutionData data,
18              Dictionary<string, string> inputs,
19              Dictionary<string, string> environment,
20              Variables runtimeVariables,
21              string actionDirectory,
22              List<JobExtensionRunner> localActionContainerSetupSteps);
23      }
24      public sealed class HandlerFactory : RunnerService, IHandlerFactory
25      {
26          public IHandler Create(
27              IExecutionContext executionContext,
28              Pipelines.ActionStepDefinitionReference action,
29              IStepHost stepHost,
30              ActionExecutionData data,
31              Dictionary<string, string> inputs,
32              Dictionary<string, string> environment,
33              Variables runtimeVariables,
34              string actionDirectory,
35              List<JobExtensionRunner> localActionContainerSetupSteps)
36          {
37              Trace.Entering();
38              ArgUtil.NotNull(executionContext, nameof(executionContext));
39              ArgUtil.NotNull(stepHost, nameof(stepHost));
40              ArgUtil.NotNull(data, nameof(data));
41              ArgUtil.NotNull(inputs, nameof(inputs));
42              ArgUtil.NotNull(environment, nameof(environment));
43              ArgUtil.NotNull(runtimeVariables, nameof(runtimeVariables));
44              IHandler handler;
45              if (data.ExecutionType == ActionExecutionType.Container)
46              {
<span onclick='openModal()' class='match'>47                  handler = HostContext.CreateService<IContainerActionHandler>();
48                  (handler as IContainerActionHandler).Data = data as ContainerActionExecutionData;
49              }
50              else if (data.ExecutionType == ActionExecutionType.NodeJS)
</span>51              {
52                  handler = HostContext.CreateService<INodeScriptActionHandler>();
53                  var nodeData = data as NodeJSActionExecutionData;
54                  if (string.Equals(nodeData.NodeVersion, "node12", StringComparison.InvariantCultureIgnoreCase) &&
55                      (executionContext.Global.Variables.GetBoolean("DistributedTask.ForceGithubJavascriptActionsToNode16") ?? false))
56                  {
57                      executionContext.Global.EnvironmentVariables.TryGetValue(Constants.Variables.Actions.AllowActionsUseUnsecureNodeVersion, out var workflowOptOut);
58                      var isWorkflowOptOutSet = !string.IsNullOrEmpty(workflowOptOut);
59                      var isLocalOptOut = StringUtil.ConvertToBoolean(Environment.GetEnvironmentVariable(Constants.Variables.Actions.AllowActionsUseUnsecureNodeVersion));
60                      bool isOptOut = isWorkflowOptOutSet ? StringUtil.ConvertToBoolean(workflowOptOut) : isLocalOptOut;
61                      if (!isOptOut)
62                      {
63                          nodeData.NodeVersion = "node16";
64                      }
65                  }
66                  (handler as INodeScriptActionHandler).Data = nodeData;
67              }
68              else if (data.ExecutionType == ActionExecutionType.Script)
69              {
70                  handler = HostContext.CreateService<IScriptHandler>();
71                  (handler as IScriptHandler).Data = data as ScriptActionExecutionData;
72              }
73              else if (data.ExecutionType == ActionExecutionType.Plugin)
74              {
75                  handler = HostContext.CreateService<IRunnerPluginHandler>();
76                  (handler as IRunnerPluginHandler).Data = data as PluginActionExecutionData;
77              }
78              else if (data.ExecutionType == ActionExecutionType.Composite)
79              {
80                  handler = HostContext.CreateService<ICompositeActionHandler>();
81                  (handler as ICompositeActionHandler).Data = data as CompositeActionExecutionData;
82              }
83              else
84              {
85                  throw new NotSupportedException(data.ExecutionType.ToString());
86              }
87              handler.Action = action;
88              handler.Environment = environment;
89              handler.RuntimeVariables = runtimeVariables;
90              handler.ExecutionContext = executionContext;
91              handler.StepHost = stepHost;
92              handler.Inputs = inputs;
93              handler.ActionDirectory = actionDirectory;
94              handler.LocalActionContainerSetupSteps = localActionContainerSetupSteps;
95              return handler;
96          }
97      }
98  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from runner-MDEwOlJlcG9zaXRvcnkxODQyODY4NzU=-flat-HandlerFactory.cs</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from runner-MDEwOlJlcG9zaXRvcnkxODQyODY4NzU=-flat-HandlerFactory.cs</div>
                </div>
                <div class="column column_space"><pre><code>80                  handler = HostContext.CreateService<ICompositeActionHandler>();
81                  (handler as ICompositeActionHandler).Data = data as CompositeActionExecutionData;
82              }
83              else
84              {
</pre></code></div>
                <div class="column column_space"><pre><code>47                  handler = HostContext.CreateService<IContainerActionHandler>();
48                  (handler as IContainerActionHandler).Data = data as ContainerActionExecutionData;
49              }
50              else if (data.ExecutionType == ActionExecutionType.NodeJS)
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    