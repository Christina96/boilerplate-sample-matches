
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Tokens: 32, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>runner-MDEwOlJlcG9zaXRvcnkxODQyODY4NzU=-flat-ServiceDefinition.cs</h3>
            <pre><code>1  using System;
2  using System.Collections.Generic;
3  using System.ComponentModel;
4  using System.Diagnostics;
5  using System.Runtime.Serialization;
6  using System.Xml;
7  using System.Xml.Serialization;
8  using GitHub.Services.Common;
9  using GitHub.Services.WebApi;
10  using GitHub.Services.Common.Internal;
11  namespace GitHub.Services.Location
12  {
13      [DebuggerDisplay("{ServiceType}:{Identifier}")]
14      [DataContract]
15      public class ServiceDefinition : ISecuredObject
16      {
17          public ServiceDefinition()
18          {
19              LocationMappings = new List<LocationMapping>();
20              Status = ServiceStatus.Active;
21              Properties = new PropertiesCollection();
22          }
23          [EditorBrowsable(EditorBrowsableState.Never)]
24          public ServiceDefinition(
25              String serviceType,
26              Guid identifier,
27              String displayName,
28              String relativePath,
29              RelativeToSetting relativeToSetting,
30              String description,
31              String toolId,
32              List<LocationMapping> locationMappings = null,
33              Guid serviceOwner = new Guid())
34          {
35              ServiceType = serviceType;
36              Identifier = identifier;
37              DisplayName = displayName;
38              RelativePath = relativePath;
39              RelativeToSetting = relativeToSetting;
40              Description = description;
41              ToolId = toolId;
42              if (locationMappings == null)
43              {
44                  locationMappings = new List<LocationMapping>();
45              }
46              LocationMappings = locationMappings;
47              ServiceOwner = serviceOwner;
48              Properties = new PropertiesCollection();
49              Status = ServiceStatus.Active;
50          }
51          [DataMember(IsRequired = false, EmitDefaultValue = false)]
52          [XmlAttribute("serviceType")] 
53          public String ServiceType
54          {
55              get;
56              set;
57          }
58          [DataMember(IsRequired = false, EmitDefaultValue = false)]
59          [XmlAttribute("identifier")] 
60          public Guid Identifier
61          {
62              get;
63              set;
64          }
65          [DataMember(IsRequired = false, EmitDefaultValue = false)]
66          [XmlAttribute("displayName")] 
67          public String DisplayName
68          {
69              get;
70              set;
71          }
72          [DataMember(IsRequired = false, EmitDefaultValue = false)]
73          public RelativeToSetting RelativeToSetting
74          {
75              get;
76              set;
77          }
78          [XmlAttribute("relativeToSetting")] 
79          [EditorBrowsable(EditorBrowsableState.Never)]
80          public Int32 RelativeToSettingValue
81          {
82              get
83              {
84                  return (Int32)RelativeToSetting;
85              }
86              set
87              {
88                  RelativeToSetting = (RelativeToSetting)value;
89              }
90          }
91          [DataMember(IsRequired = false, EmitDefaultValue = false)]
92          [XmlAttribute("relativePath")] 
93          public String RelativePath
94          {
95              get;
96              set;
97          }
98          [DataMember(IsRequired = false, EmitDefaultValue = false)]
99          [XmlAttribute("description")] 
100          public String Description
101          {
102              get;
103              set;
104          }
105          [DataMember]
106          public Guid ServiceOwner
107          {
108              get;
109              set;
110          }
111          [DataMember(IsRequired = false, EmitDefaultValue = false)]
112          public List<LocationMapping> LocationMappings
113          {
114              get;
115              set;
116          }
117          [EditorBrowsable(EditorBrowsableState.Never)]
118          [XmlAttribute("toolId")] 
119          [DataMember(IsRequired = false, EmitDefaultValue = false)]
120          public String ToolId { get; set; }
121          [DataMember(IsRequired = false, EmitDefaultValue = false)]
122          public String ParentServiceType
123          {
124              get;
125              set;
126          }
127          [DataMember(IsRequired = false, EmitDefaultValue = false)]
128          public Guid ParentIdentifier
129          {
130              get;
131              set;
132          }
133          [DefaultValue(ServiceStatus.Active)]
134          [DataMember(IsRequired = false, EmitDefaultValue = false)]
135          public ServiceStatus Status
136          {
137              get;
138              set;
139          }
140          [EditorBrowsable(EditorBrowsableState.Never)]
141          [DataMember(IsRequired = false, EmitDefaultValue = false)]
142          [XmlAttribute("inheritLevel")]
143          public InheritLevel InheritLevel
144          {
145              get;
146              set;
147          }
148          [DataMember(IsRequired = false, EmitDefaultValue = false)]
149          [XmlIgnore]
150          public PropertiesCollection Properties
151          {
152              get;
153              set;
154          }
155          /&bsol;*****************************************************************************************************************
156          /&bsol;*****************************************************************************************************************
157          public T GetProperty<T>(String name, T defaultValue)
158          {
159              T value;
160              if (Properties != null && Properties.TryGetValue<T>(name, out value))
161              {
162                  return value;
163              }
164              else
165              {
166                  return defaultValue;
167              }
168          }
169          /&bsol;*****************************************************************************************************************
170          /&bsol;*****************************************************************************************************************
171          public Boolean TryGetProperty(String name, out Object value)
172          {
173              value = null;
174              return Properties == null ? false : Properties.TryGetValue(name, out value);
175          }
176          /&bsol;*****************************************************************************************************************
177          /&bsol;*****************************************************************************************************************
178          public void SetProperty(String name, Object value)
179          {
180              m_hasModifiedProperties = true;
181              Properties[name] = value;
182          }
183          /&bsol;*****************************************************************************************************************
184          /&bsol;*****************************************************************************************************************
185          [EditorBrowsable(EditorBrowsableState.Never)]
186          public Boolean HasModifiedProperties
187          {
188              get
189              {
190                  return m_hasModifiedProperties;
191              }
192          }
193          /&bsol;*****************************************************************************************************************
194          /&bsol;*****************************************************************************************************************
195          [EditorBrowsable(EditorBrowsableState.Never)]
196          public void ResetModifiedProperties()
197          {
198              m_hasModifiedProperties = false;
199          }
200          [XmlAttribute("resourceVersion")]
201          [DefaultValue(0)]
202          [DataMember(IsRequired = false, EmitDefaultValue = false)]
203          public Int32 ResourceVersion { get; set; }
204          [XmlIgnore]
205          public Version MinVersion { get; set; }
206          [XmlAttribute("minVersion")]
207          [DefaultValue(null)]
208          [DataMember(IsRequired = false, EmitDefaultValue = false, Name = "MinVersion")]
209          public String MinVersionString
210          {
211              get
212              {
213                  if (MinVersion == null)
214                  {
215                      return null;
216                  }
217                  else
218                  {
219                      return MinVersion.ToString(2);
220                  }
221              }
222              set
223              {
224                  if (String.IsNullOrEmpty(value))
225                  {
226                      MinVersion = null;
227                  }
228                  else
229                  {
230                      MinVersion = new Version(value);
231                  }
232              }
233          }
234          [XmlIgnore]
235          public Version MaxVersion { get; set; }
236          [XmlAttribute("maxVersion")]
237          [DefaultValue(null)]
238          [DataMember(IsRequired = false, EmitDefaultValue = false, Name = "MaxVersion")]
239          public String MaxVersionString
240          {
241              get
242              {
243                  if (MaxVersion == null)
244                  {
245                      return null;
246                  }
247                  else
248                  {
249                      return MaxVersion.ToString(2);
<span onclick='openModal()' class='match'>250                  }
251              }
252              set
253              {
254                  if (String.IsNullOrEmpty(value))
255                  {
256                      MaxVersion = null;
257                  }
258                  else
259                  {
260                      MaxVersion = new Version(value);
261                  }
262              }
263          }
264          [XmlIgnore]
</span>265          public Version ReleasedVersion { get; set; }
266          [XmlAttribute("releasedVersion")]
267          [DefaultValue(null)]
268          [DataMember(IsRequired = false, EmitDefaultValue = false, Name = "ReleasedVersion")]
269          public String ReleasedVersionString
270          {
271              get
272              {
273                  if (ReleasedVersion == null)
274                  {
275                      return null;
276                  }
277                  else
278                  {
279                      return ReleasedVersion.ToString(2);
280                  }
281              }
282              set
283              {
284                  if (String.IsNullOrEmpty(value))
285                  {
286                      ReleasedVersion = null;
287                  }
288                  else
289                  {
290                      ReleasedVersion = new Version(value);
291                  }
292              }
293          }
294          public ServiceDefinition Clone()
295          {
296              return Clone(true);
297          }
298          public ServiceDefinition Clone(Boolean includeLocationMappings)
299          {
300              List<LocationMapping> locationMappings = null;
301              if (LocationMappings != null && includeLocationMappings)
302              {
303                  locationMappings = new List<LocationMapping>(LocationMappings.Count);
304                  foreach (LocationMapping mapping in LocationMappings)
305                  {
306                      locationMappings.Add(new LocationMapping()
307                      {
308                          AccessMappingMoniker = mapping.AccessMappingMoniker,
309                          Location = mapping.Location
310                      });
311                  }
312              }
313              else
314              {
315                  locationMappings = new List<LocationMapping>();
316              }
317              PropertiesCollection properties = null;
318              if (Properties != null)
319              {
320                  properties = new PropertiesCollection(Properties, validateExisting: false);
321              }
322              else
323              {
324                  properties = new PropertiesCollection();
325              }
326              ServiceDefinition serviceDefinition = new ServiceDefinition()
327              {
328                  ServiceType = ServiceType,
329                  Identifier = Identifier,
330                  DisplayName = DisplayName,
331                  RelativePath = RelativePath,
332                  RelativeToSetting = RelativeToSetting,
333                  Description = Description,
334                  LocationMappings = locationMappings,
335                  ServiceOwner = ServiceOwner,
336                  ToolId = ToolId,
337                  ParentServiceType = ParentServiceType,
338                  ParentIdentifier = ParentIdentifier,
339                  Status = Status,
340                  Properties = properties,
341                  ResourceVersion = ResourceVersion,
342                  MinVersion = MinVersion,
343                  MaxVersion = MaxVersion,
344                  ReleasedVersion = ReleasedVersion
345              };
346              serviceDefinition.ResetModifiedProperties();
347              return serviceDefinition;
348          }
349          internal static ServiceDefinition FromXml(IServiceProvider serviceProvider, XmlReader reader)
350          {
351              ServiceDefinition obj = new ServiceDefinition();
352              Debug.Assert(reader.NodeType == XmlNodeType.Element, "Expected a node.");
353              Boolean empty = reader.IsEmptyElement;
354              if (reader.HasAttributes)
355              {
356                  while (reader.MoveToNextAttribute())
357                  {
358                      switch (reader.Name)
359                      {
360                          case "description":
361                              obj.Description = reader.Value;
362                              break;
363                          case "displayName":
364                              obj.DisplayName = reader.Value;
365                              break;
366                          case "identifier":
367                              obj.Identifier = XmlConvert.ToGuid(reader.Value);
368                              break;
369                          case "isSingleton":
370                              obj.m_isSingleton = XmlConvert.ToBoolean(reader.Value);
371                              break;
372                          case "relativePath":
373                              obj.RelativePath = reader.Value;
374                              break;
375                          case "relativeToSetting":
376                              obj.RelativeToSetting = (RelativeToSetting)XmlConvert.ToInt32(reader.Value);
377                              break;
378                          case "serviceType":
379                              obj.ServiceType = reader.Value;
380                              break;
381                          case "toolId":
382                              obj.ToolId = reader.Value;
383                              break;
384                          case "resourceVersion":
385                              obj.ResourceVersion = XmlConvert.ToInt32(reader.Value);
386                              break;
387                          case "minVersion":
388                              obj.MinVersionString = reader.Value;
389                              break;
390                          case "maxVersion":
391                              obj.MaxVersionString = reader.Value;
392                              break;
393                          case "releasedVersion":
394                              obj.ReleasedVersionString = reader.Value;
395                              break;
396                          default:
397                              break;
398                      }
399                  }
400              }
401              reader.Read();
402              if (!empty)
403              {
404                  while (reader.NodeType == XmlNodeType.Element)
405                  {
406                      switch (reader.Name)
407                      {
408                          case "LocationMappings":
409                              obj.LocationMappings = new List<LocationMapping>(XmlUtility.ArrayOfObjectFromXml<LocationMapping>(serviceProvider, reader, "LocationMapping", false, LocationMapping.FromXml));
410                              break;
411                          case "Properties":
412                              reader.ReadOuterXml();
413                              break;
414                          default:
415                              reader.ReadOuterXml();
416                              break;
417                      }
418                  }
419                  reader.ReadEndElement();
420              }
421              return obj;
422          }
423          public LocationMapping GetLocationMapping(AccessMapping accessMapping)
424          {
425              ArgumentUtility.CheckForNull(accessMapping, "accessMapping");
426              return GetLocationMapping(accessMapping.Moniker);
427          }
428          public LocationMapping GetLocationMapping(String accessMappingMoniker)
429          {
430              ArgumentUtility.CheckForNull(accessMappingMoniker, "accessMappingMoniker");
431              if (RelativeToSetting == RelativeToSetting.FullyQualified)
432              {
433                  foreach (LocationMapping locationMapping in LocationMappings)
434                  {
435                      if (VssStringComparer.AccessMappingMoniker.Equals(locationMapping.AccessMappingMoniker, accessMappingMoniker))
436                      {
437                          return locationMapping;
438                      }
439                  }
440              }
441              return null;
442          }
443          public void AddLocationMapping(AccessMapping accessMapping, String location)
444          {
445              if (RelativeToSetting != RelativeToSetting.FullyQualified)
446              {
447                  throw new InvalidOperationException(WebApiResources.RelativeLocationMappingErrorMessage());
448              }
449              if (location == null)
450              {
451                  throw new ArgumentException(WebApiResources.FullyQualifiedLocationParameter());
452              }
453              foreach (LocationMapping mapping in LocationMappings)
454              {
455                  if (VssStringComparer.AccessMappingMoniker.Equals(mapping.AccessMappingMoniker, accessMapping.Moniker))
456                  {
457                      mapping.Location = location;
458                      return;
459                  }
460              }
461              LocationMappings.Add(new LocationMapping() { AccessMappingMoniker = accessMapping.Moniker, Location = location });
462          }
463          #region ISecuredObject
464          Guid ISecuredObject.NamespaceId => LocationSecurityConstants.NamespaceId;
465          int ISecuredObject.RequiredPermissions => LocationSecurityConstants.Read;
466          string ISecuredObject.GetToken()
467          {
468              return LocationSecurityConstants.ServiceDefinitionsToken;
469          }
470          #endregion
471          private Boolean m_isSingleton;
472          private Boolean m_hasModifiedProperties = true;
473      }
474  }
</code></pre>
        </div>
        <div class="column">
            <h3>runner-MDEwOlJlcG9zaXRvcnkxODQyODY4NzU=-flat-ServiceDefinition.cs</h3>
            <pre><code>1  using System;
2  using System.Collections.Generic;
3  using System.ComponentModel;
4  using System.Diagnostics;
5  using System.Runtime.Serialization;
6  using System.Xml;
7  using System.Xml.Serialization;
8  using GitHub.Services.Common;
9  using GitHub.Services.WebApi;
10  using GitHub.Services.Common.Internal;
11  namespace GitHub.Services.Location
12  {
13      [DebuggerDisplay("{ServiceType}:{Identifier}")]
14      [DataContract]
15      public class ServiceDefinition : ISecuredObject
16      {
17          public ServiceDefinition()
18          {
19              LocationMappings = new List<LocationMapping>();
20              Status = ServiceStatus.Active;
21              Properties = new PropertiesCollection();
22          }
23          [EditorBrowsable(EditorBrowsableState.Never)]
24          public ServiceDefinition(
25              String serviceType,
26              Guid identifier,
27              String displayName,
28              String relativePath,
29              RelativeToSetting relativeToSetting,
30              String description,
31              String toolId,
32              List<LocationMapping> locationMappings = null,
33              Guid serviceOwner = new Guid())
34          {
35              ServiceType = serviceType;
36              Identifier = identifier;
37              DisplayName = displayName;
38              RelativePath = relativePath;
39              RelativeToSetting = relativeToSetting;
40              Description = description;
41              ToolId = toolId;
42              if (locationMappings == null)
43              {
44                  locationMappings = new List<LocationMapping>();
45              }
46              LocationMappings = locationMappings;
47              ServiceOwner = serviceOwner;
48              Properties = new PropertiesCollection();
49              Status = ServiceStatus.Active;
50          }
51          [DataMember(IsRequired = false, EmitDefaultValue = false)]
52          [XmlAttribute("serviceType")] 
53          public String ServiceType
54          {
55              get;
56              set;
57          }
58          [DataMember(IsRequired = false, EmitDefaultValue = false)]
59          [XmlAttribute("identifier")] 
60          public Guid Identifier
61          {
62              get;
63              set;
64          }
65          [DataMember(IsRequired = false, EmitDefaultValue = false)]
66          [XmlAttribute("displayName")] 
67          public String DisplayName
68          {
69              get;
70              set;
71          }
72          [DataMember(IsRequired = false, EmitDefaultValue = false)]
73          public RelativeToSetting RelativeToSetting
74          {
75              get;
76              set;
77          }
78          [XmlAttribute("relativeToSetting")] 
79          [EditorBrowsable(EditorBrowsableState.Never)]
80          public Int32 RelativeToSettingValue
81          {
82              get
83              {
84                  return (Int32)RelativeToSetting;
85              }
86              set
87              {
88                  RelativeToSetting = (RelativeToSetting)value;
89              }
90          }
91          [DataMember(IsRequired = false, EmitDefaultValue = false)]
92          [XmlAttribute("relativePath")] 
93          public String RelativePath
94          {
95              get;
96              set;
97          }
98          [DataMember(IsRequired = false, EmitDefaultValue = false)]
99          [XmlAttribute("description")] 
100          public String Description
101          {
102              get;
103              set;
104          }
105          [DataMember]
106          public Guid ServiceOwner
107          {
108              get;
109              set;
110          }
111          [DataMember(IsRequired = false, EmitDefaultValue = false)]
112          public List<LocationMapping> LocationMappings
113          {
114              get;
115              set;
116          }
117          [EditorBrowsable(EditorBrowsableState.Never)]
118          [XmlAttribute("toolId")] 
119          [DataMember(IsRequired = false, EmitDefaultValue = false)]
120          public String ToolId { get; set; }
121          [DataMember(IsRequired = false, EmitDefaultValue = false)]
122          public String ParentServiceType
123          {
124              get;
125              set;
126          }
127          [DataMember(IsRequired = false, EmitDefaultValue = false)]
128          public Guid ParentIdentifier
129          {
130              get;
131              set;
132          }
133          [DefaultValue(ServiceStatus.Active)]
134          [DataMember(IsRequired = false, EmitDefaultValue = false)]
135          public ServiceStatus Status
136          {
137              get;
138              set;
139          }
140          [EditorBrowsable(EditorBrowsableState.Never)]
141          [DataMember(IsRequired = false, EmitDefaultValue = false)]
142          [XmlAttribute("inheritLevel")]
143          public InheritLevel InheritLevel
144          {
145              get;
146              set;
147          }
148          [DataMember(IsRequired = false, EmitDefaultValue = false)]
149          [XmlIgnore]
150          public PropertiesCollection Properties
151          {
152              get;
153              set;
154          }
155          /&bsol;*****************************************************************************************************************
156          /&bsol;*****************************************************************************************************************
157          public T GetProperty<T>(String name, T defaultValue)
158          {
159              T value;
160              if (Properties != null && Properties.TryGetValue<T>(name, out value))
161              {
162                  return value;
163              }
164              else
165              {
166                  return defaultValue;
167              }
168          }
169          /&bsol;*****************************************************************************************************************
170          /&bsol;*****************************************************************************************************************
171          public Boolean TryGetProperty(String name, out Object value)
172          {
173              value = null;
174              return Properties == null ? false : Properties.TryGetValue(name, out value);
175          }
176          /&bsol;*****************************************************************************************************************
177          /&bsol;*****************************************************************************************************************
178          public void SetProperty(String name, Object value)
179          {
180              m_hasModifiedProperties = true;
181              Properties[name] = value;
182          }
183          /&bsol;*****************************************************************************************************************
184          /&bsol;*****************************************************************************************************************
185          [EditorBrowsable(EditorBrowsableState.Never)]
186          public Boolean HasModifiedProperties
187          {
188              get
189              {
190                  return m_hasModifiedProperties;
191              }
192          }
193          /&bsol;*****************************************************************************************************************
194          /&bsol;*****************************************************************************************************************
195          [EditorBrowsable(EditorBrowsableState.Never)]
196          public void ResetModifiedProperties()
197          {
198              m_hasModifiedProperties = false;
199          }
200          [XmlAttribute("resourceVersion")]
201          [DefaultValue(0)]
202          [DataMember(IsRequired = false, EmitDefaultValue = false)]
203          public Int32 ResourceVersion { get; set; }
204          [XmlIgnore]
205          public Version MinVersion { get; set; }
206          [XmlAttribute("minVersion")]
207          [DefaultValue(null)]
208          [DataMember(IsRequired = false, EmitDefaultValue = false, Name = "MinVersion")]
209          public String MinVersionString
210          {
211              get
212              {
213                  if (MinVersion == null)
214                  {
215                      return null;
216                  }
217                  else
218                  {
219                      return MinVersion.ToString(2);
<span onclick='openModal()' class='match'>220                  }
221              }
222              set
223              {
224                  if (String.IsNullOrEmpty(value))
225                  {
226                      MinVersion = null;
227                  }
228                  else
229                  {
230                      MinVersion = new Version(value);
231                  }
232              }
233          }
234          [XmlIgnore]
</span>235          public Version MaxVersion { get; set; }
236          [XmlAttribute("maxVersion")]
237          [DefaultValue(null)]
238          [DataMember(IsRequired = false, EmitDefaultValue = false, Name = "MaxVersion")]
239          public String MaxVersionString
240          {
241              get
242              {
243                  if (MaxVersion == null)
244                  {
245                      return null;
246                  }
247                  else
248                  {
249                      return MaxVersion.ToString(2);
250                  }
251              }
252              set
253              {
254                  if (String.IsNullOrEmpty(value))
255                  {
256                      MaxVersion = null;
257                  }
258                  else
259                  {
260                      MaxVersion = new Version(value);
261                  }
262              }
263          }
264          [XmlIgnore]
265          public Version ReleasedVersion { get; set; }
266          [XmlAttribute("releasedVersion")]
267          [DefaultValue(null)]
268          [DataMember(IsRequired = false, EmitDefaultValue = false, Name = "ReleasedVersion")]
269          public String ReleasedVersionString
270          {
271              get
272              {
273                  if (ReleasedVersion == null)
274                  {
275                      return null;
276                  }
277                  else
278                  {
279                      return ReleasedVersion.ToString(2);
280                  }
281              }
282              set
283              {
284                  if (String.IsNullOrEmpty(value))
285                  {
286                      ReleasedVersion = null;
287                  }
288                  else
289                  {
290                      ReleasedVersion = new Version(value);
291                  }
292              }
293          }
294          public ServiceDefinition Clone()
295          {
296              return Clone(true);
297          }
298          public ServiceDefinition Clone(Boolean includeLocationMappings)
299          {
300              List<LocationMapping> locationMappings = null;
301              if (LocationMappings != null && includeLocationMappings)
302              {
303                  locationMappings = new List<LocationMapping>(LocationMappings.Count);
304                  foreach (LocationMapping mapping in LocationMappings)
305                  {
306                      locationMappings.Add(new LocationMapping()
307                      {
308                          AccessMappingMoniker = mapping.AccessMappingMoniker,
309                          Location = mapping.Location
310                      });
311                  }
312              }
313              else
314              {
315                  locationMappings = new List<LocationMapping>();
316              }
317              PropertiesCollection properties = null;
318              if (Properties != null)
319              {
320                  properties = new PropertiesCollection(Properties, validateExisting: false);
321              }
322              else
323              {
324                  properties = new PropertiesCollection();
325              }
326              ServiceDefinition serviceDefinition = new ServiceDefinition()
327              {
328                  ServiceType = ServiceType,
329                  Identifier = Identifier,
330                  DisplayName = DisplayName,
331                  RelativePath = RelativePath,
332                  RelativeToSetting = RelativeToSetting,
333                  Description = Description,
334                  LocationMappings = locationMappings,
335                  ServiceOwner = ServiceOwner,
336                  ToolId = ToolId,
337                  ParentServiceType = ParentServiceType,
338                  ParentIdentifier = ParentIdentifier,
339                  Status = Status,
340                  Properties = properties,
341                  ResourceVersion = ResourceVersion,
342                  MinVersion = MinVersion,
343                  MaxVersion = MaxVersion,
344                  ReleasedVersion = ReleasedVersion
345              };
346              serviceDefinition.ResetModifiedProperties();
347              return serviceDefinition;
348          }
349          internal static ServiceDefinition FromXml(IServiceProvider serviceProvider, XmlReader reader)
350          {
351              ServiceDefinition obj = new ServiceDefinition();
352              Debug.Assert(reader.NodeType == XmlNodeType.Element, "Expected a node.");
353              Boolean empty = reader.IsEmptyElement;
354              if (reader.HasAttributes)
355              {
356                  while (reader.MoveToNextAttribute())
357                  {
358                      switch (reader.Name)
359                      {
360                          case "description":
361                              obj.Description = reader.Value;
362                              break;
363                          case "displayName":
364                              obj.DisplayName = reader.Value;
365                              break;
366                          case "identifier":
367                              obj.Identifier = XmlConvert.ToGuid(reader.Value);
368                              break;
369                          case "isSingleton":
370                              obj.m_isSingleton = XmlConvert.ToBoolean(reader.Value);
371                              break;
372                          case "relativePath":
373                              obj.RelativePath = reader.Value;
374                              break;
375                          case "relativeToSetting":
376                              obj.RelativeToSetting = (RelativeToSetting)XmlConvert.ToInt32(reader.Value);
377                              break;
378                          case "serviceType":
379                              obj.ServiceType = reader.Value;
380                              break;
381                          case "toolId":
382                              obj.ToolId = reader.Value;
383                              break;
384                          case "resourceVersion":
385                              obj.ResourceVersion = XmlConvert.ToInt32(reader.Value);
386                              break;
387                          case "minVersion":
388                              obj.MinVersionString = reader.Value;
389                              break;
390                          case "maxVersion":
391                              obj.MaxVersionString = reader.Value;
392                              break;
393                          case "releasedVersion":
394                              obj.ReleasedVersionString = reader.Value;
395                              break;
396                          default:
397                              break;
398                      }
399                  }
400              }
401              reader.Read();
402              if (!empty)
403              {
404                  while (reader.NodeType == XmlNodeType.Element)
405                  {
406                      switch (reader.Name)
407                      {
408                          case "LocationMappings":
409                              obj.LocationMappings = new List<LocationMapping>(XmlUtility.ArrayOfObjectFromXml<LocationMapping>(serviceProvider, reader, "LocationMapping", false, LocationMapping.FromXml));
410                              break;
411                          case "Properties":
412                              reader.ReadOuterXml();
413                              break;
414                          default:
415                              reader.ReadOuterXml();
416                              break;
417                      }
418                  }
419                  reader.ReadEndElement();
420              }
421              return obj;
422          }
423          public LocationMapping GetLocationMapping(AccessMapping accessMapping)
424          {
425              ArgumentUtility.CheckForNull(accessMapping, "accessMapping");
426              return GetLocationMapping(accessMapping.Moniker);
427          }
428          public LocationMapping GetLocationMapping(String accessMappingMoniker)
429          {
430              ArgumentUtility.CheckForNull(accessMappingMoniker, "accessMappingMoniker");
431              if (RelativeToSetting == RelativeToSetting.FullyQualified)
432              {
433                  foreach (LocationMapping locationMapping in LocationMappings)
434                  {
435                      if (VssStringComparer.AccessMappingMoniker.Equals(locationMapping.AccessMappingMoniker, accessMappingMoniker))
436                      {
437                          return locationMapping;
438                      }
439                  }
440              }
441              return null;
442          }
443          public void AddLocationMapping(AccessMapping accessMapping, String location)
444          {
445              if (RelativeToSetting != RelativeToSetting.FullyQualified)
446              {
447                  throw new InvalidOperationException(WebApiResources.RelativeLocationMappingErrorMessage());
448              }
449              if (location == null)
450              {
451                  throw new ArgumentException(WebApiResources.FullyQualifiedLocationParameter());
452              }
453              foreach (LocationMapping mapping in LocationMappings)
454              {
455                  if (VssStringComparer.AccessMappingMoniker.Equals(mapping.AccessMappingMoniker, accessMapping.Moniker))
456                  {
457                      mapping.Location = location;
458                      return;
459                  }
460              }
461              LocationMappings.Add(new LocationMapping() { AccessMappingMoniker = accessMapping.Moniker, Location = location });
462          }
463          #region ISecuredObject
464          Guid ISecuredObject.NamespaceId => LocationSecurityConstants.NamespaceId;
465          int ISecuredObject.RequiredPermissions => LocationSecurityConstants.Read;
466          string ISecuredObject.GetToken()
467          {
468              return LocationSecurityConstants.ServiceDefinitionsToken;
469          }
470          #endregion
471          private Boolean m_isSingleton;
472          private Boolean m_hasModifiedProperties = true;
473      }
474  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from runner-MDEwOlJlcG9zaXRvcnkxODQyODY4NzU=-flat-ServiceDefinition.cs</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from runner-MDEwOlJlcG9zaXRvcnkxODQyODY4NzU=-flat-ServiceDefinition.cs</div>
                </div>
                <div class="column column_space"><pre><code>250                  }
251              }
252              set
253              {
254                  if (String.IsNullOrEmpty(value))
255                  {
256                      MaxVersion = null;
257                  }
258                  else
259                  {
260                      MaxVersion = new Version(value);
261                  }
262              }
263          }
264          [XmlIgnore]
</pre></code></div>
                <div class="column column_space"><pre><code>220                  }
221              }
222              set
223              {
224                  if (String.IsNullOrEmpty(value))
225                  {
226                      MinVersion = null;
227                  }
228                  else
229                  {
230                      MinVersion = new Version(value);
231                  }
232              }
233          }
234          [XmlIgnore]
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    