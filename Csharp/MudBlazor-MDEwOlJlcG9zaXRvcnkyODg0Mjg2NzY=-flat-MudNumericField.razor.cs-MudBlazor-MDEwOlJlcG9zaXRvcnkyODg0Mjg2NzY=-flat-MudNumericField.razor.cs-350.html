
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Tokens: 12, <button onclick='openModal()' class='match'>CODE CLONE</button></h2>
        <div class="column">
            <h3>MudBlazor-MDEwOlJlcG9zaXRvcnkyODg0Mjg2NzY=-flat-MudNumericField.razor.cs</h3>
            <pre><code>1  using System;
2  using System.Collections;
3  using System.Diagnostics.CodeAnalysis;
4  using System.Globalization;
5  using System.Text.RegularExpressions;
6  using System.Threading.Tasks;
7  using Microsoft.AspNetCore.Components;
8  using Microsoft.AspNetCore.Components.Web;
9  using MudBlazor.Services;
10  using MudBlazor.Utilities;
11  namespace MudBlazor
12  {
13      public partial class MudNumericField&lt;T&gt; : MudDebouncedInput&lt;T&gt;
14      {
15          private IKeyInterceptor _keyInterceptor;
16          private Comparer _comparer = new(CultureInfo.InvariantCulture);
17          public MudNumericField() : base()
18          {
19              Validation = new Func&lt;T, Task&lt;bool&gt;&gt;(ValidateInput);
20              #region parameters default depending on T
21              if (typeof(T) == typeof(sbyte) || typeof(T) == typeof(sbyte?))
22              {
23                  _minDefault = (T)(object)sbyte.MinValue;
24                  _maxDefault = (T)(object)sbyte.MaxValue;
25                  _stepDefault = (T)(object)(sbyte)1;
26              }
27              else if (typeof(T) == typeof(byte) || typeof(T) == typeof(byte?))
28              {
29                  _minDefault = (T)(object)byte.MinValue;
30                  _maxDefault = (T)(object)byte.MaxValue;
31                  _stepDefault = (T)(object)(byte)1;
32              }
33              else if (typeof(T) == typeof(short) || typeof(T) == typeof(short?))
34              {
35                  _minDefault = (T)(object)short.MinValue;
36                  _maxDefault = (T)(object)short.MaxValue;
37                  _stepDefault = (T)(object)(short)1;
38              }
39              else if (typeof(T) == typeof(ushort) || typeof(T) == typeof(ushort?))
40              {
41                  _minDefault = (T)(object)ushort.MinValue;
42                  _maxDefault = (T)(object)ushort.MaxValue;
43                  _stepDefault = (T)(object)(ushort)1;
44              }
45              else if (typeof(T) == typeof(int) || typeof(T) == typeof(int?))
46              {
47                  _minDefault = (T)(object)int.MinValue;
48                  _maxDefault = (T)(object)int.MaxValue;
49                  _stepDefault = (T)(object)1;
50              }
51              else if (typeof(T) == typeof(uint) || typeof(T) == typeof(uint?))
52              {
53                  _minDefault = (T)(object)uint.MinValue;
54                  _maxDefault = (T)(object)uint.MaxValue;
55                  _stepDefault = (T)(object)1u;
56              }
57              else if (typeof(T) == typeof(long) || typeof(T) == typeof(long?))
58              {
59                  _minDefault = (T)(object)long.MinValue;
60                  _maxDefault = (T)(object)long.MaxValue;
61                  _stepDefault = (T)(object)1L;
62              }
63              else if (typeof(T) == typeof(ulong) || typeof(T) == typeof(ulong?))
64              {
65                  _minDefault = (T)(object)ulong.MinValue;
66                  _maxDefault = (T)(object)ulong.MaxValue;
67                  _stepDefault = (T)(object)1ul;
68              }
69              else if (typeof(T) == typeof(float) || typeof(T) == typeof(float?))
70              {
71                  _minDefault = (T)(object)float.MinValue;
72                  _maxDefault = (T)(object)float.MaxValue;
73                  _stepDefault = (T)(object)1.0f;
74              }
75              else if (typeof(T) == typeof(double) || typeof(T) == typeof(double?))
76              {
77                  _minDefault = (T)(object)double.MinValue;
78                  _maxDefault = (T)(object)double.MaxValue;
79                  _stepDefault = (T)(object)1.0;
80              }
81              else if (typeof(T) == typeof(decimal) || typeof(T) == typeof(decimal?))
82              {
<span onclick='openModal()' class='match'>83                  _minDefault = (T)(object)decimal.MinValue;
84                  _maxDefault = (T)(object)decimal.MaxValue;
</span>85                  _stepDefault = (T)(object)1M;
86              }
87              #endregion parameters default depending on T
88          }
89          protected string Classname =&gt;
90              new CssBuilder(&quot;mud-input-input-control mud-input-number-control &quot; +
91                             (HideSpinButtons ? &quot;mud-input-nospin&quot; : &quot;mud-input-showspin&quot;))
92                  .AddClass(Class)
93                  .Build();
94          [Inject] private IKeyInterceptorFactory _keyInterceptorFactory { get; set; }
95          private string _elementId = &quot;numericField_&quot; + Guid.NewGuid().ToString().Substring(0, 8);
96          private MudInput&lt;string&gt; _elementReference;
97          [ExcludeFromCodeCoverage]
98          public override ValueTask FocusAsync()
99          {
100              return _elementReference.FocusAsync();
101          }
102          [ExcludeFromCodeCoverage]
103          public override ValueTask BlurAsync()
104          {
105              return _elementReference.BlurAsync();
106          }
107          [ExcludeFromCodeCoverage]
108          public override ValueTask SelectAsync()
109          {
110              return _elementReference.SelectAsync();
111          }
112          [ExcludeFromCodeCoverage]
113          public override ValueTask SelectRangeAsync(int pos1, int pos2)
114          {
115              return _elementReference.SelectRangeAsync(pos1, pos2);
116          }
117          protected override Task SetValueAsync(T value, bool updateText = true, bool force = false)
118          {
119              bool valueChanged;
120              (value, valueChanged) = ConstrainBoundaries(value);
121              return base.SetValueAsync(value, valueChanged || updateText);
122          }
123          protected internal override async Task OnBlurredAsync(FocusEventArgs obj)
124          {
125              await base.OnBlurredAsync(obj);
126              await UpdateValuePropertyAsync(true); 
127              await UpdateTextPropertyAsync(false); 
128          }
129          protected async Task&lt;bool&gt; ValidateInput(T value)
130          {
131              bool valueChanged;
132              (value, valueChanged) = ConstrainBoundaries(value);
133              if (valueChanged)
134                  await SetValueAsync(value, true);
135              return true; 
136          }
137          [Parameter]
138          [Category(CategoryTypes.FormComponent.Behavior)]
139          public bool Clearable { get; set; } = false;
140          private async Task Change(double factor = 1)
141          {
142              try
143              {
144                  var nextValue = GetNextValue(factor);
145                  if (typeof(T).IsValueType)
146                  {
147                      if (factor &gt; 0 &amp;&amp; _comparer.Compare(nextValue, Value) &lt; 0)
148                          nextValue = Max;
149                      else if (factor &lt; 0 &amp;&amp; (_comparer.Compare(nextValue, Value) &gt; 0 || nextValue is null))
150                          nextValue = Min;
151                  }
152                  await SetValueAsync(ConstrainBoundaries(nextValue).value);
153                  _elementReference.SetText(Text).AndForget();
154              }
155              catch (OverflowException)
156              {
157                  await SetValueAsync(factor &gt; 0 ? Max : Min, true);
158              }
159          }
160          private T GetNextValue(double factor)
161          {
162              if (typeof(T) == typeof(decimal) || typeof(T) == typeof(decimal?))
163                  return (T)(object)Convert.ToDecimal(FromDecimal(Value) + FromDecimal(Step) * (decimal)factor);
164              if (typeof(T) == typeof(long) || typeof(T) == typeof(long?))
165                  return (T)(object)Convert.ToInt64(FromInt64(Value) + FromInt64(Step) * factor);
166              if (typeof(T) == typeof(ulong) || typeof(T) == typeof(ulong?))
167                  return (T)(object)Convert.ToUInt64(FromUInt64(Value) + FromUInt64(Step) * factor);
168              return Num.To&lt;T&gt;(Num.From(Value) + Num.From(Step) * factor);
169          }
170          public Task Increment() =&gt; Change(factor: 1);
171          public Task Decrement() =&gt; Change(factor: -1);
172          protected (T value, bool changed) ConstrainBoundaries(T value)
173          {
174              if (value == null)
175                  return (default(T), false);
176              if (typeof(T).IsValueType)
177              {
178                  if (_comparer.Compare(value, Max) &gt; 0)
179                      return (Max, true);
180                  if (_comparer.Compare(value, Min) &lt; 0)
181                      return (Min, true);
182              };
183              return (value, false);
184          }
185          protected override async Task OnAfterRenderAsync(bool firstRender)
186          {
187              if (firstRender)
188              {
189                  _keyInterceptor = _keyInterceptorFactory.Create();
190                  await _keyInterceptor.Connect(_elementId, new KeyInterceptorOptions()
191                  {
192                      TargetClass = &quot;mud-input-slot&quot;,
193                      Keys = {
194                          new KeyOptions { Key=&quot;ArrowUp&quot;, PreventDown = &quot;key+none&quot; }, 
195                          new KeyOptions { Key=&quot;ArrowDown&quot;, PreventDown = &quot;key+none&quot; }, 
196                          new KeyOptions { Key=&quot;Dead&quot;, PreventDown = &quot;key+any&quot; }, 
197                          new KeyOptions { Key=&quot;/^(?!&quot;+(Pattern ?? &quot;[0-9]&quot;).TrimEnd(&#x27;*&#x27;)+&quot;).$/&quot;, PreventDown = &quot;key+none|key+shift|key+alt&quot; }, 
198                      },
199                  });
200              }
201              await base.OnAfterRenderAsync(firstRender);
202          }
203          protected async Task HandleKeydown(KeyboardEventArgs obj)
204          {
205              if (GetDisabledState() || GetReadOnlyState())
206                  return;
207              switch (obj.Key)
208              {
209                  case &quot;ArrowUp&quot;:
210                      await Increment();
211                      break;
212                  case &quot;ArrowDown&quot;:
213                      await Decrement();
214                      break;
215              }
216              OnKeyDown.InvokeAsync(obj).AndForget();
217          }
218          protected Task HandleKeyUp(KeyboardEventArgs obj)
219          {
220              if (GetDisabledState() || GetReadOnlyState())
221                  return Task.CompletedTask;
222              OnKeyUp.InvokeAsync(obj).AndForget();
223              return Task.CompletedTask;
224          }
225          protected async Task OnMouseWheel(WheelEventArgs obj)
226          {
227              if (!obj.ShiftKey || GetDisabledState() || GetReadOnlyState())
228                  return;
229              if (obj.DeltaY &lt; 0)
230              {
231                  if (InvertMouseWheel == false)
232                      await Increment();
233                  else
234                      await Decrement();
235              }
236              else if (obj.DeltaY &gt; 0)
237              {
238                  if (InvertMouseWheel == false)
239                      await Decrement();
240                  else
241                      await Increment();
242              }
243          }
244          private bool _minHasValue = false;
245          [Parameter]
246          [Category(CategoryTypes.FormComponent.Behavior)]
247          public bool InvertMouseWheel { get; set; } = false;
248          private T _minDefault;
249          private T _min;
250          [Parameter]
251          [Category(CategoryTypes.FormComponent.Validation)]
252          public T Min
253          {
254              get =&gt; _minHasValue ? _min : _minDefault;
255              set
256              {
257                  _minHasValue = value != null;
258                  _min = value;
259              }
260          }
261          private bool _maxHasValue = false;
262          private T _maxDefault;
263          private T _max;
264          [Parameter]
265          [Category(CategoryTypes.FormComponent.Validation)]
266          public T Max
267          {
268              get =&gt; _maxHasValue ? _max : _maxDefault;
269              set
270              {
271                  _maxHasValue = value != null;
272                  _max = value;
273              }
274          }
275          private bool _stepHasValue = false;
276          private T _stepDefault;
277          private T _step;
278          [Parameter]
279          [Category(CategoryTypes.FormComponent.Behavior)]
280          public T Step
281          {
282              get =&gt; _stepHasValue ? _step : _stepDefault;
283              set
284              {
285                  _stepHasValue = value != null;
286                  _step = value;
287              }
288          }
289          [Parameter]
290          [Category(CategoryTypes.FormComponent.Appearance)]
291          public bool HideSpinButtons { get; set; }
292          [Parameter]
293          public override InputMode InputMode { get; set; } = InputMode.numeric;
294          [Parameter]
295          public override string Pattern { get; set; } = @&quot;[0-9,.\-]&quot;;
296          private string GetCounterText() =&gt; Counter == null ? string.Empty : (Counter == 0 ? (string.IsNullOrEmpty(Text) ? &quot;0&quot; : $&quot;{Text.Length}&quot;) : ((string.IsNullOrEmpty(Text) ? &quot;0&quot; : $&quot;{Text.Length}&quot;) + $&quot; / {Counter}&quot;));
297          private Task OnInputValueChanged(string text)
298          {
299              return SetTextAsync(text);
300          }
301          private const string TagFormat = &quot;0.###################################################################################################################################################################################################################################################################################################################################################&quot;;
302          private string FormatParam(T value)
303          {
304              if (value is IFormattable f)
305                  return f.ToString(TagFormat, CultureInfo.InvariantCulture.NumberFormat);
306              else
307                  return null;
308          }
309          private decimal FromDecimal(T v)
310              =&gt; Convert.ToDecimal((decimal?)(object)v);
311          private long FromInt64(T v)
312              =&gt; Convert.ToInt64((long?)(object)v);
313          private ulong FromUInt64(T v)
314              =&gt; Convert.ToUInt64((ulong?)(object)v);
315          protected override void Dispose(bool disposing)
316          {
317              base.Dispose(disposing);
318              if (disposing == true)
319              {
320                  _keyInterceptor?.Dispose();
321              }
322          }
323      }
324  }
</code></pre>
        </div>
        <div class="column">
            <h3>MudBlazor-MDEwOlJlcG9zaXRvcnkyODg0Mjg2NzY=-flat-MudNumericField.razor.cs</h3>
            <pre><code>1  using System;
2  using System.Collections;
3  using System.Diagnostics.CodeAnalysis;
4  using System.Globalization;
5  using System.Text.RegularExpressions;
6  using System.Threading.Tasks;
7  using Microsoft.AspNetCore.Components;
8  using Microsoft.AspNetCore.Components.Web;
9  using MudBlazor.Services;
10  using MudBlazor.Utilities;
11  namespace MudBlazor
12  {
13      public partial class MudNumericField&lt;T&gt; : MudDebouncedInput&lt;T&gt;
14      {
15          private IKeyInterceptor _keyInterceptor;
16          private Comparer _comparer = new(CultureInfo.InvariantCulture);
17          public MudNumericField() : base()
18          {
19              Validation = new Func&lt;T, Task&lt;bool&gt;&gt;(ValidateInput);
20              #region parameters default depending on T
21              if (typeof(T) == typeof(sbyte) || typeof(T) == typeof(sbyte?))
22              {
23                  _minDefault = (T)(object)sbyte.MinValue;
24                  _maxDefault = (T)(object)sbyte.MaxValue;
25                  _stepDefault = (T)(object)(sbyte)1;
26              }
27              else if (typeof(T) == typeof(byte) || typeof(T) == typeof(byte?))
28              {
29                  _minDefault = (T)(object)byte.MinValue;
30                  _maxDefault = (T)(object)byte.MaxValue;
31                  _stepDefault = (T)(object)(byte)1;
32              }
33              else if (typeof(T) == typeof(short) || typeof(T) == typeof(short?))
34              {
35                  _minDefault = (T)(object)short.MinValue;
36                  _maxDefault = (T)(object)short.MaxValue;
37                  _stepDefault = (T)(object)(short)1;
38              }
39              else if (typeof(T) == typeof(ushort) || typeof(T) == typeof(ushort?))
40              {
41                  _minDefault = (T)(object)ushort.MinValue;
42                  _maxDefault = (T)(object)ushort.MaxValue;
43                  _stepDefault = (T)(object)(ushort)1;
44              }
45              else if (typeof(T) == typeof(int) || typeof(T) == typeof(int?))
46              {
47                  _minDefault = (T)(object)int.MinValue;
48                  _maxDefault = (T)(object)int.MaxValue;
49                  _stepDefault = (T)(object)1;
50              }
51              else if (typeof(T) == typeof(uint) || typeof(T) == typeof(uint?))
52              {
53                  _minDefault = (T)(object)uint.MinValue;
54                  _maxDefault = (T)(object)uint.MaxValue;
55                  _stepDefault = (T)(object)1u;
56              }
57              else if (typeof(T) == typeof(long) || typeof(T) == typeof(long?))
58              {
59                  _minDefault = (T)(object)long.MinValue;
60                  _maxDefault = (T)(object)long.MaxValue;
61                  _stepDefault = (T)(object)1L;
62              }
63              else if (typeof(T) == typeof(ulong) || typeof(T) == typeof(ulong?))
64              {
65                  _minDefault = (T)(object)ulong.MinValue;
66                  _maxDefault = (T)(object)ulong.MaxValue;
67                  _stepDefault = (T)(object)1ul;
68              }
69              else if (typeof(T) == typeof(float) || typeof(T) == typeof(float?))
70              {
71                  _minDefault = (T)(object)float.MinValue;
72                  _maxDefault = (T)(object)float.MaxValue;
73                  _stepDefault = (T)(object)1.0f;
74              }
75              else if (typeof(T) == typeof(double) || typeof(T) == typeof(double?))
76              {
77                  _minDefault = (T)(object)double.MinValue;
78                  _maxDefault = (T)(object)double.MaxValue;
79                  _stepDefault = (T)(object)1.0;
80              }
81              else if (typeof(T) == typeof(decimal) || typeof(T) == typeof(decimal?))
82              {
83                  _minDefault = (T)(object)decimal.MinValue;
<span onclick='openModal()' class='match'>84                  _maxDefault = (T)(object)decimal.MaxValue;
85                  _stepDefault = (T)(object)1M;
</span>86              }
87              #endregion parameters default depending on T
88          }
89          protected string Classname =&gt;
90              new CssBuilder(&quot;mud-input-input-control mud-input-number-control &quot; +
91                             (HideSpinButtons ? &quot;mud-input-nospin&quot; : &quot;mud-input-showspin&quot;))
92                  .AddClass(Class)
93                  .Build();
94          [Inject] private IKeyInterceptorFactory _keyInterceptorFactory { get; set; }
95          private string _elementId = &quot;numericField_&quot; + Guid.NewGuid().ToString().Substring(0, 8);
96          private MudInput&lt;string&gt; _elementReference;
97          [ExcludeFromCodeCoverage]
98          public override ValueTask FocusAsync()
99          {
100              return _elementReference.FocusAsync();
101          }
102          [ExcludeFromCodeCoverage]
103          public override ValueTask BlurAsync()
104          {
105              return _elementReference.BlurAsync();
106          }
107          [ExcludeFromCodeCoverage]
108          public override ValueTask SelectAsync()
109          {
110              return _elementReference.SelectAsync();
111          }
112          [ExcludeFromCodeCoverage]
113          public override ValueTask SelectRangeAsync(int pos1, int pos2)
114          {
115              return _elementReference.SelectRangeAsync(pos1, pos2);
116          }
117          protected override Task SetValueAsync(T value, bool updateText = true, bool force = false)
118          {
119              bool valueChanged;
120              (value, valueChanged) = ConstrainBoundaries(value);
121              return base.SetValueAsync(value, valueChanged || updateText);
122          }
123          protected internal override async Task OnBlurredAsync(FocusEventArgs obj)
124          {
125              await base.OnBlurredAsync(obj);
126              await UpdateValuePropertyAsync(true); 
127              await UpdateTextPropertyAsync(false); 
128          }
129          protected async Task&lt;bool&gt; ValidateInput(T value)
130          {
131              bool valueChanged;
132              (value, valueChanged) = ConstrainBoundaries(value);
133              if (valueChanged)
134                  await SetValueAsync(value, true);
135              return true; 
136          }
137          [Parameter]
138          [Category(CategoryTypes.FormComponent.Behavior)]
139          public bool Clearable { get; set; } = false;
140          private async Task Change(double factor = 1)
141          {
142              try
143              {
144                  var nextValue = GetNextValue(factor);
145                  if (typeof(T).IsValueType)
146                  {
147                      if (factor &gt; 0 &amp;&amp; _comparer.Compare(nextValue, Value) &lt; 0)
148                          nextValue = Max;
149                      else if (factor &lt; 0 &amp;&amp; (_comparer.Compare(nextValue, Value) &gt; 0 || nextValue is null))
150                          nextValue = Min;
151                  }
152                  await SetValueAsync(ConstrainBoundaries(nextValue).value);
153                  _elementReference.SetText(Text).AndForget();
154              }
155              catch (OverflowException)
156              {
157                  await SetValueAsync(factor &gt; 0 ? Max : Min, true);
158              }
159          }
160          private T GetNextValue(double factor)
161          {
162              if (typeof(T) == typeof(decimal) || typeof(T) == typeof(decimal?))
163                  return (T)(object)Convert.ToDecimal(FromDecimal(Value) + FromDecimal(Step) * (decimal)factor);
164              if (typeof(T) == typeof(long) || typeof(T) == typeof(long?))
165                  return (T)(object)Convert.ToInt64(FromInt64(Value) + FromInt64(Step) * factor);
166              if (typeof(T) == typeof(ulong) || typeof(T) == typeof(ulong?))
167                  return (T)(object)Convert.ToUInt64(FromUInt64(Value) + FromUInt64(Step) * factor);
168              return Num.To&lt;T&gt;(Num.From(Value) + Num.From(Step) * factor);
169          }
170          public Task Increment() =&gt; Change(factor: 1);
171          public Task Decrement() =&gt; Change(factor: -1);
172          protected (T value, bool changed) ConstrainBoundaries(T value)
173          {
174              if (value == null)
175                  return (default(T), false);
176              if (typeof(T).IsValueType)
177              {
178                  if (_comparer.Compare(value, Max) &gt; 0)
179                      return (Max, true);
180                  if (_comparer.Compare(value, Min) &lt; 0)
181                      return (Min, true);
182              };
183              return (value, false);
184          }
185          protected override async Task OnAfterRenderAsync(bool firstRender)
186          {
187              if (firstRender)
188              {
189                  _keyInterceptor = _keyInterceptorFactory.Create();
190                  await _keyInterceptor.Connect(_elementId, new KeyInterceptorOptions()
191                  {
192                      TargetClass = &quot;mud-input-slot&quot;,
193                      Keys = {
194                          new KeyOptions { Key=&quot;ArrowUp&quot;, PreventDown = &quot;key+none&quot; }, 
195                          new KeyOptions { Key=&quot;ArrowDown&quot;, PreventDown = &quot;key+none&quot; }, 
196                          new KeyOptions { Key=&quot;Dead&quot;, PreventDown = &quot;key+any&quot; }, 
197                          new KeyOptions { Key=&quot;/^(?!&quot;+(Pattern ?? &quot;[0-9]&quot;).TrimEnd(&#x27;*&#x27;)+&quot;).$/&quot;, PreventDown = &quot;key+none|key+shift|key+alt&quot; }, 
198                      },
199                  });
200              }
201              await base.OnAfterRenderAsync(firstRender);
202          }
203          protected async Task HandleKeydown(KeyboardEventArgs obj)
204          {
205              if (GetDisabledState() || GetReadOnlyState())
206                  return;
207              switch (obj.Key)
208              {
209                  case &quot;ArrowUp&quot;:
210                      await Increment();
211                      break;
212                  case &quot;ArrowDown&quot;:
213                      await Decrement();
214                      break;
215              }
216              OnKeyDown.InvokeAsync(obj).AndForget();
217          }
218          protected Task HandleKeyUp(KeyboardEventArgs obj)
219          {
220              if (GetDisabledState() || GetReadOnlyState())
221                  return Task.CompletedTask;
222              OnKeyUp.InvokeAsync(obj).AndForget();
223              return Task.CompletedTask;
224          }
225          protected async Task OnMouseWheel(WheelEventArgs obj)
226          {
227              if (!obj.ShiftKey || GetDisabledState() || GetReadOnlyState())
228                  return;
229              if (obj.DeltaY &lt; 0)
230              {
231                  if (InvertMouseWheel == false)
232                      await Increment();
233                  else
234                      await Decrement();
235              }
236              else if (obj.DeltaY &gt; 0)
237              {
238                  if (InvertMouseWheel == false)
239                      await Decrement();
240                  else
241                      await Increment();
242              }
243          }
244          private bool _minHasValue = false;
245          [Parameter]
246          [Category(CategoryTypes.FormComponent.Behavior)]
247          public bool InvertMouseWheel { get; set; } = false;
248          private T _minDefault;
249          private T _min;
250          [Parameter]
251          [Category(CategoryTypes.FormComponent.Validation)]
252          public T Min
253          {
254              get =&gt; _minHasValue ? _min : _minDefault;
255              set
256              {
257                  _minHasValue = value != null;
258                  _min = value;
259              }
260          }
261          private bool _maxHasValue = false;
262          private T _maxDefault;
263          private T _max;
264          [Parameter]
265          [Category(CategoryTypes.FormComponent.Validation)]
266          public T Max
267          {
268              get =&gt; _maxHasValue ? _max : _maxDefault;
269              set
270              {
271                  _maxHasValue = value != null;
272                  _max = value;
273              }
274          }
275          private bool _stepHasValue = false;
276          private T _stepDefault;
277          private T _step;
278          [Parameter]
279          [Category(CategoryTypes.FormComponent.Behavior)]
280          public T Step
281          {
282              get =&gt; _stepHasValue ? _step : _stepDefault;
283              set
284              {
285                  _stepHasValue = value != null;
286                  _step = value;
287              }
288          }
289          [Parameter]
290          [Category(CategoryTypes.FormComponent.Appearance)]
291          public bool HideSpinButtons { get; set; }
292          [Parameter]
293          public override InputMode InputMode { get; set; } = InputMode.numeric;
294          [Parameter]
295          public override string Pattern { get; set; } = @&quot;[0-9,.\-]&quot;;
296          private string GetCounterText() =&gt; Counter == null ? string.Empty : (Counter == 0 ? (string.IsNullOrEmpty(Text) ? &quot;0&quot; : $&quot;{Text.Length}&quot;) : ((string.IsNullOrEmpty(Text) ? &quot;0&quot; : $&quot;{Text.Length}&quot;) + $&quot; / {Counter}&quot;));
297          private Task OnInputValueChanged(string text)
298          {
299              return SetTextAsync(text);
300          }
301          private const string TagFormat = &quot;0.###################################################################################################################################################################################################################################################################################################################################################&quot;;
302          private string FormatParam(T value)
303          {
304              if (value is IFormattable f)
305                  return f.ToString(TagFormat, CultureInfo.InvariantCulture.NumberFormat);
306              else
307                  return null;
308          }
309          private decimal FromDecimal(T v)
310              =&gt; Convert.ToDecimal((decimal?)(object)v);
311          private long FromInt64(T v)
312              =&gt; Convert.ToInt64((long?)(object)v);
313          private ulong FromUInt64(T v)
314              =&gt; Convert.ToUInt64((ulong?)(object)v);
315          protected override void Dispose(bool disposing)
316          {
317              base.Dispose(disposing);
318              if (disposing == true)
319              {
320                  _keyInterceptor?.Dispose();
321              }
322          }
323      }
324  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from MudBlazor-MDEwOlJlcG9zaXRvcnkyODg0Mjg2NzY=-flat-MudNumericField.razor.cs</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from MudBlazor-MDEwOlJlcG9zaXRvcnkyODg0Mjg2NzY=-flat-MudNumericField.razor.cs</div>
                </div>
                <div class="column column_space"><pre><code>83                  _minDefault = (T)(object)decimal.MinValue;
84                  _maxDefault = (T)(object)decimal.MaxValue;
</pre></code></div>
                <div class="column column_space"><pre><code>84                  _maxDefault = (T)(object)decimal.MaxValue;
85                  _stepDefault = (T)(object)1M;
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    