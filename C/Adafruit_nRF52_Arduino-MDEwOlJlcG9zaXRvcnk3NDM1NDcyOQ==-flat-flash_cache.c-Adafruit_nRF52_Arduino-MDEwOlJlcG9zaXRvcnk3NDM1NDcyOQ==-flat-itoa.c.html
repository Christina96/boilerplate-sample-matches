
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 8.51063829787234%, Tokens: 8</h2>
        <div class="column">
            <h3>Adafruit_nRF52_Arduino-MDEwOlJlcG9zaXRvcnk3NDM1NDcyOQ==-flat-flash_cache.c</h3>
            <pre><code>1  #include <string.h>
2  #include "flash_cache.h"
3  #include "common_func.h"
4  #include "variant.h"
5  #include "wiring_digital.h"
6  static inline uint32_t page_addr_of (uint32_t addr)
7  {
8    return addr & ~(FLASH_CACHE_SIZE - 1);
9  }
10  static inline uint32_t page_offset_of (uint32_t addr)
11  {
12    return addr & (FLASH_CACHE_SIZE - 1);
13  }
14  int flash_cache_write (flash_cache_t* fc, uint32_t dst, void const * src, uint32_t len)
15  {
16    uint8_t const * src8 = (uint8_t const *) src;
17    uint32_t remain = len;
18    while ( remain )
19    {
20      uint32_t const page_addr = page_addr_of(dst);
21      uint32_t const offset = page_offset_of(dst);
22      uint32_t wr_bytes = FLASH_CACHE_SIZE - offset;
23      wr_bytes = min32(remain, wr_bytes);
24      if ( page_addr != fc->cache_addr )
25      {
26        flash_cache_flush(fc);
27        fc->cache_addr = page_addr;
28        fc->read(fc->cache_buf, page_addr, FLASH_CACHE_SIZE);
29      }
30      memcpy(fc->cache_buf + offset, src8, wr_bytes);
31      src8 += wr_bytes;
32      remain -= wr_bytes;
33      dst += wr_bytes;
34    }
35    return len - remain;
36  }
37  void flash_cache_flush (flash_cache_t* fc)
38  {
39    if ( fc->cache_addr == FLASH_CACHE_INVALID_ADDR ) return;
40    if ( !(fc->verify && fc->verify(fc->cache_addr, fc->cache_buf, FLASH_CACHE_SIZE)) )
41    {
42      ledOn(LED_BUILTIN);
43      fc->erase(fc->cache_addr);
44      fc->program(fc->cache_addr, fc->cache_buf, FLASH_CACHE_SIZE);
45      ledOff(LED_BUILTIN);
46    }
47    fc->cache_addr = FLASH_CACHE_INVALID_ADDR;
48  }
49  int flash_cache_read (flash_cache_t* fc, void* dst, uint32_t addr, uint32_t count)
50  {
51    if ( (fc->cache_addr != FLASH_CACHE_INVALID_ADDR) &&               
52         !(addr < fc->cache_addr && addr + count <= fc->cache_addr) && 
53         !(addr >= fc->cache_addr + FLASH_CACHE_SIZE) )                
54    {
55      uint32_t dst_off = 0;
<span onclick='openModal()' class='match'>56      uint32_t src_off = 0;
57      if (addr < fc->cache_addr)
58      {
59        dst_off = fc->cache_addr - addr;
60        fc->read(dst, addr, dst_off);
61      }
62      else
63      {
64        src_off = addr - fc->cache_addr;      
</span>65      }
66      uint32_t cache_bytes = minof(FLASH_CACHE_SIZE-src_off, count - dst_off);
67      memcpy(dst + dst_off, fc->cache_buf + src_off, cache_bytes);
68      uint32_t copied = dst_off + cache_bytes;
69      if ( copied < count )
70      {
71        fc->read(dst + copied, addr + copied, count - copied);
72      }
73    }
74    else
75    {
76      fc->read(dst, addr, count);
77    }
78    return (int) count;
79  }
</code></pre>
        </div>
        <div class="column">
            <h3>Adafruit_nRF52_Arduino-MDEwOlJlcG9zaXRvcnk3NDM1NDcyOQ==-flat-itoa.c</h3>
            <pre><code>1  #include "itoa.h"
2  #include <string.h>
3  #ifdef __cplusplus
4  extern "C" {
5  #endif
6  extern char* itoa( int value, char *string, int radix )
7  {
8    return ltoa( value, string, radix ) ;
9  }
10  extern char* ltoa( long value, char *string, int radix )
11  {
12    char tmp[33];
13    char *tp = tmp;
14    long i;
15    unsigned long v;
16    int sign;
17    char *sp;
18    if ( string == NULL )
19    {
20      return 0 ;
21    }
22    if (radix > 36 || radix <= 1)
23    {
24      return 0 ;
25    }
<span onclick='openModal()' class='match'>26    sign = (radix == 10 && value < 0);
27    if (sign)
28    {
29      v = -value;
30    }
31    else
32    {
33      v = (unsigned long)value;
</span>34    }
35    while (v || tp == tmp)
36    {
37      i = v % radix;
38      v = v / radix;
39      if (i < 10)
40        *tp++ = i+'0';
41      else
42        *tp++ = i + 'a' - 10;
43    }
44    sp = string;
45    if (sign)
46      *sp++ = '-';
47    while (tp > tmp)
48      *sp++ = *--tp;
49    *sp = 0;
50    return string;
51  }
52  extern char* utoa( unsigned int value, char *string, int radix )
53  {
54    return ultoa( value, string, radix ) ;
55  }
56  extern char* ultoa( unsigned long value, char *string, int radix )
57  {
58    char tmp[33];
59    char *tp = tmp;
60    long i;
61    unsigned long v = value;
62    char *sp;
63    if ( string == NULL )
64    {
65      return 0;
66    }
67    if (radix > 36 || radix <= 1)
68    {
69      return 0;
70    }
71    while (v || tp == tmp)
72    {
73      i = v % radix;
74      v = v / radix;
75      if (i < 10)
76        *tp++ = i+'0';
77      else
78        *tp++ = i + 'a' - 10;
79    }
80    sp = string;
81    while (tp > tmp)
82      *sp++ = *--tp;
83    *sp = 0;
84    return string;
85  }
86  #ifdef __cplusplus
87  } 
88  #endif
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from Adafruit_nRF52_Arduino-MDEwOlJlcG9zaXRvcnk3NDM1NDcyOQ==-flat-flash_cache.c</div>
                <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from Adafruit_nRF52_Arduino-MDEwOlJlcG9zaXRvcnk3NDM1NDcyOQ==-flat-itoa.c</div>
                <div class="column column_space"><pre><code>56      uint32_t src_off = 0;
57      if (addr < fc->cache_addr)
58      {
59        dst_off = fc->cache_addr - addr;
60        fc->read(dst, addr, dst_off);
61      }
62      else
63      {
64        src_off = addr - fc->cache_addr;      
</pre></code></div>
                <div class="column column_space"><pre><code>26    sign = (radix == 10 && value < 0);
27    if (sign)
28    {
29      v = -value;
30    }
31    else
32    {
33      v = (unsigned long)value;
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    