
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 6.593406593406594%, Tokens: 9, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>xmrig-MDEwOlJlcG9zaXRvcnk4ODMyNzQwNg==-flat-FailoverStrategy.h</h3>
            <pre><code>1  #ifndef XMRIG_FAILOVERSTRATEGY_H
2  #define XMRIG_FAILOVERSTRATEGY_H
3  #include <vector>
4  #include "base/kernel/interfaces/IClientListener.h"
5  #include "base/kernel/interfaces/IStrategy.h"
6  #include "base/net/stratum/Pool.h"
7  #include "base/tools/Object.h"
8  namespace xmrig {
9  class Client;
10  class IStrategyListener;
11  class FailoverStrategy : public IStrategy, public IClientListener
12  {
13  public:
14      XMRIG_DISABLE_COPY_MOVE_DEFAULT(FailoverStrategy)
15      FailoverStrategy(const std::vector<Pool> &pool, int retryPause, int retries, IStrategyListener *listener, bool quiet = false);
16      FailoverStrategy(int retryPause, int retries, IStrategyListener *listener, bool quiet = false);
17      ~FailoverStrategy() override;
18      void add(const Pool &pool);
19  protected:
<span onclick='openModal()' class='match'>20      inline bool isActive() const override           { return m_active >= 0; }
21      inline IClient *client() const override         { return isActive() ? active() : m_pools[m_index]; }
</span>22      int64_t submit(const JobResult &result) override;
23      void connect() override;
24      void resume() override;
25      void setAlgo(const Algorithm &algo) override;
26      void setProxy(const ProxyUrl &proxy) override;
27      void stop() override;
28      void tick(uint64_t now) override;
29      void onClose(IClient *client, int failures) override;
30      void onJobReceived(IClient *client, const Job &job, const rapidjson::Value &params) override;
31      void onLogin(IClient *client, rapidjson::Document &doc, rapidjson::Value &params) override;
32      void onLoginSuccess(IClient *client) override;
33      void onResultAccepted(IClient *client, const SubmitResult &result, const char *error) override;
34      void onVerifyAlgorithm(const IClient *client, const Algorithm &algorithm, bool *ok) override;
35  private:
36      inline IClient *active() const { return m_pools[static_cast<size_t>(m_active)]; }
37      const bool m_quiet;
38      const int m_retries;
39      const int m_retryPause;
40      int m_active            = -1;
41      IStrategyListener *m_listener;
42      size_t m_index          = 0;
43      std::vector<IClient*> m_pools;
44  };
45  } &bsol;* namespace xmrig */
46  #endif &bsol;* XMRIG_FAILOVERSTRATEGY_H */
</code></pre>
        </div>
        <div class="column">
            <h3>xmrig-MDEwOlJlcG9zaXRvcnk4ODMyNzQwNg==-flat-BlockTemplate.h</h3>
            <pre><code>1  #ifndef XMRIG_BLOCKTEMPLATE_H
2  #define XMRIG_BLOCKTEMPLATE_H
3  #include "3rdparty/rapidjson/fwd.h"
4  #include "base/crypto/Coin.h"
5  #include "base/tools/Buffer.h"
6  #include "base/tools/String.h"
7  #include "base/tools/Span.h"
8  namespace xmrig {
9  class BlockTemplate
10  {
11  public:
12      static constexpr size_t kHashSize       = 32;
13      static constexpr size_t kKeySize        = 32;
14      static constexpr size_t kNonceSize      = 4;
15      static constexpr size_t kSignatureSize  = 64;
16  #   ifdef XMRIG_PROXY_PROJECT
17      static constexpr bool kCalcHashes       = true;
18  #   else
19      static constexpr bool kCalcHashes       = false;
20  #   endif
21      enum Offset : uint32_t {
22          NONCE_OFFSET,
23          MINER_TX_PREFIX_OFFSET,
24          MINER_TX_PREFIX_END_OFFSET,
25          EPH_PUBLIC_KEY_OFFSET,
26          TX_EXTRA_OFFSET,
27          TX_PUBKEY_OFFSET,
28          TX_EXTRA_NONCE_OFFSET,
29          TX_EXTRA_MERGE_MINING_TAG_OFFSET,
30          OFFSET_COUNT
31      };
32      inline const Coin &coin() const                         { return m_coin; }
33      inline const uint8_t *blob() const                      { return m_blob.data(); }
34      inline const uint8_t *blob(Offset offset) const         { return m_blob.data() + m_offsets[offset]; }
<span onclick='openModal()' class='match'>35      inline size_t offset(Offset offset) const               { return m_offsets[offset]; }
36      inline size_t size() const                              { return m_blob.size(); }
</span>37      inline uint8_t majorVersion() const                     { return m_version.first; }
38      inline uint8_t minorVersion() const                     { return m_version.second; }
39      inline uint64_t timestamp() const                       { return m_timestamp; }
40      inline const Span &prevId() const                       { return m_prevId; }
41      inline const uint8_t *nonce() const                     { return blob(NONCE_OFFSET); }
42      inline bool hasMinerSignature() const                   { return !m_minerSignature.empty(); }
43      inline const Span &minerSignature() const               { return m_minerSignature; }
44      inline const uint8_t *vote() const                      { return m_vote; }
45      inline uint64_t txVersion() const                       { return m_txVersion; }
46      inline uint64_t unlockTime() const                      { return m_unlockTime; }
47      inline uint64_t numInputs() const                       { return m_numInputs; }
48      inline uint8_t inputType() const                        { return m_inputType; }
49      inline uint64_t height() const                          { return m_height; }
50      inline uint64_t numOutputs() const                      { return m_numOutputs; }
51      inline uint64_t amount() const                          { return m_amount; }
52      inline uint64_t outputType() const                      { return m_outputType; }
53      inline const Span &ephPublicKey() const                 { return m_ephPublicKey; }
54      inline const Span &txExtraNonce() const                 { return m_txExtraNonce; }
55      inline const Span &txMergeMiningTag() const             { return m_txMergeMiningTag; }
56      inline uint64_t numHashes() const                       { return m_numHashes; }
57      inline const Buffer &hashes() const                     { return m_hashes; }
58      inline const Buffer &minerTxMerkleTreeBranch() const    { return m_minerTxMerkleTreeBranch; }
59      inline const uint8_t *rootHash() const                  { return m_rootHash; }
60      inline Buffer generateHashingBlob() const
61      {
62          Buffer out;
63          generateHashingBlob(out);
64          return out;
65      }
66      static void calculateMinerTxHash(const uint8_t *prefix_begin, const uint8_t *prefix_end, uint8_t *hash);
67      static void calculateRootHash(const uint8_t *prefix_begin, const uint8_t *prefix_end, const Buffer &miner_tx_merkle_tree_branch, uint8_t *root_hash);
68      bool parse(const Buffer &blocktemplate, const Coin &coin, bool hashes = kCalcHashes);
69      bool parse(const char *blocktemplate, size_t size, const Coin &coin, bool hashes);
70      bool parse(const rapidjson::Value &blocktemplate, const Coin &coin, bool hashes = kCalcHashes);
71      bool parse(const String &blocktemplate, const Coin &coin, bool hashes = kCalcHashes);
72      void calculateMerkleTreeHash();
73      void generateHashingBlob(Buffer &out) const;
74  private:
75      static constexpr size_t kMinSize = 76;
76      inline void setOffset(Offset offset, size_t value)  { m_offsets[offset] = static_cast<uint32_t>(value); }
77      bool parse(bool hashes);
78      Buffer m_blob;
79      Coin m_coin;
80      uint32_t m_offsets[OFFSET_COUNT]{};
81      std::pair<uint8_t, uint8_t> m_version;
82      uint64_t m_timestamp    = 0;
83      Span m_prevId;
84      Span m_minerSignature;
85      uint8_t m_vote[2]{};
86      uint64_t m_txVersion    = 0;
87      uint64_t m_unlockTime   = 0;
88      uint64_t m_numInputs    = 0;
89      uint8_t m_inputType     = 0;
90      uint64_t m_height       = 0;
91      uint64_t m_numOutputs   = 0;
92      uint64_t m_amount       = 0;
93      uint8_t m_outputType    = 0;
94      Span m_ephPublicKey;
95      uint8_t m_viewTag       = 0;
96      uint64_t m_extraSize    = 0;
97      Span m_txExtraNonce;
98      Span m_txMergeMiningTag = 0;
99      uint64_t m_numHashes    = 0;
100      Buffer m_hashes;
101      Buffer m_minerTxMerkleTreeBranch;
102      uint8_t m_rootHash[kHashSize]{};
103  };
104  } &bsol;* namespace xmrig */
105  #endif &bsol;* XMRIG_BLOCKTEMPLATE_H */
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from xmrig-MDEwOlJlcG9zaXRvcnk4ODMyNzQwNg==-flat-FailoverStrategy.h</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from xmrig-MDEwOlJlcG9zaXRvcnk4ODMyNzQwNg==-flat-BlockTemplate.h</div>
                </div>
                <div class="column column_space"><pre><code>20      inline bool isActive() const override           { return m_active >= 0; }
21      inline IClient *client() const override         { return isActive() ? active() : m_pools[m_index]; }
</pre></code></div>
                <div class="column column_space"><pre><code>35      inline size_t offset(Offset offset) const               { return m_offsets[offset]; }
36      inline size_t size() const                              { return m_blob.size(); }
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    