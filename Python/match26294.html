<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for test_macpackage_1.py &amp; test_lvm.py</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for test_macpackage_1.py &amp; test_lvm.py
      </h3>
<h1 align="center">
        8.7%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>test_macpackage_1.py (10.989011%)<th>test_lvm.py (7.207207%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(125-129)<td><a href="#" name="0">(187-210)</a><td align="center"><font color="#ff0000">15</font>
<tr onclick='openModal("#f63526")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f63526"><font color="#f63526">-</font><td><a href="#" name="1">(245-248)<td><a href="#" name="1">(224-228)</a><td align="center"><font color="#dd0000">13</font>
<tr onclick='openModal("#980517")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#980517"><font color="#980517">-</font><td><a href="#" name="2">(261-264)<td><a href="#" name="2">(257-260)</a><td align="center"><font color="#cc0000">12</font>
</td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>test_macpackage_1.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 import pytest
2 import salt.modules.macpackage as macpackage
3 from tests.support.mock import MagicMock, call, patch
4 @pytest.fixture
5 def configure_loader_modules():
6     return {macpackage: {}}
7 def test_install():
8     mock = MagicMock()
9     with patch.dict(macpackage.__salt__, {"cmd.run_all": mock}):
10         macpackage.install("/path/to/file.pkg")
11         mock.assert_called_once_with(
12             "installer -pkg /path/to/file.pkg -target LocalSystem",
13             python_shell=False,
14         )
15 def test_install_wildcard():
16     mock = MagicMock()
17     with patch.dict(macpackage.__salt__, {"cmd.run_all": mock}):
18         macpackage.install("/path/to/*.pkg")
19         mock.assert_called_once_with(
20             "installer -pkg /path/to/*.pkg -target LocalSystem", python_shell=True
21         )
22 def test_install_with_extras():
23     mock = MagicMock()
24     with patch.dict(macpackage.__salt__, {"cmd.run_all": mock}):
25         macpackage.install("/path/to/file.pkg", store=True, allow_untrusted=True)
26         mock.assert_called_once_with(
27             "installer -pkg /path/to/file.pkg -target LocalSystem -store"
28             " -allowUntrusted",
29             python_shell=False,
30         )
31 def test_install_app():
32     mock = MagicMock()
33     with patch.dict(macpackage.__salt__, {"cmd.run": mock}):
34         macpackage.install_app("/path/to/file.app")
35         mock.assert_called_once_with(
36             'rsync -a --delete "/path/to/file.app/" "/Applications/file.app"'
37         )
38 def test_install_app_specify_target():
39     mock = MagicMock()
40     with patch.dict(macpackage.__salt__, {"cmd.run": mock}):
41         macpackage.install_app("/path/to/file.app", "/Applications/new.app")
42         mock.assert_called_once_with(
43             'rsync -a --delete "/path/to/file.app/" "/Applications/new.app"'
44         )
45 def test_install_app_with_slash():
46     mock = MagicMock()
47     with patch.dict(macpackage.__salt__, {"cmd.run": mock}):
48         macpackage.install_app("/path/to/file.app/")
49         mock.assert_called_once_with(
50             'rsync -a --delete "/path/to/file.app/" "/Applications/file.app"'
51         )
52 def test_uninstall():
53     mock = MagicMock()
54     with patch.dict(macpackage.__salt__, {"file.remove": mock}):
55         macpackage.uninstall_app("/path/to/file.app")
56         mock.assert_called_once_with("/path/to/file.app")
57 def test_mount():
58     cmd_mock = MagicMock()
59     temp_mock = MagicMock(return_value="dmg-ABCDEF")
60     with patch.dict(macpackage.__salt__, {"cmd.run": cmd_mock, "temp.dir": temp_mock}):
61         macpackage.mount("/path/to/file.dmg")
62         temp_mock.assert_called_once_with(prefix="dmg-")
63         cmd_mock.assert_called_once_with(
64             "hdiutil attach -readonly -nobrowse -mountpoint "
65             'dmg-ABCDEF "/path/to/file.dmg"'
66         )
67 def test_unmount():
68     mock = MagicMock()
69     with patch.dict(macpackage.__salt__, {"cmd.run": mock}):
70         macpackage.unmount("/path/to/file.dmg")
71         mock.assert_called_once_with('hdiutil detach "/path/to/file.dmg"')
72 def test_installed_pkgs():
73 <a name="0"></a>    """
74     Test getting a list of the installed packages
75     expected <font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>= ["com.apple.this", "com.salt.that"]
76     mock = MagicMock(return_value="com.apple.this\ncom.salt.that")
77     with patch.dict(macpackage.__salt__, {"cmd.run": mock}):
78         out = macpackage.installed_pkgs()
79         mock.assert_called_once_with(</b></font>"pkgutil --pkgs")
80         assert out == expected
81 def test_get_pkg_id_with_files():
82     with patch(
83         "salt.modules.macpackage._get_pkg_id_from_pkginfo"
84     ) as pkg_id_pkginfo_mock:
85         expected = ["com.apple.this"]
86         cmd_mock = MagicMock(
87             side_effect=[
88                 "/path/to/PackageInfo\n/path/to/some/other/fake/PackageInfo",
89                 "",
90                 "",
91             ]
92         )
93         pkg_id_pkginfo_mock.side_effect = [["com.apple.this"], []]
94         temp_mock = MagicMock(return_value="/tmp/dmg-ABCDEF")
95         remove_mock = MagicMock()
96         with patch.dict(
97             macpackage.__salt__,
98             {
99                 "cmd.run": cmd_mock,
100                 "temp.dir": temp_mock,
101                 "file.remove": remove_mock,
102             },
103         ):
104             out = macpackage.get_pkg_id("/path/to/file.pkg")
105             temp_mock.assert_called_once_with(prefix="pkg-")
106             cmd_calls = [
107                 call(
108                     "xar -t -f /path/to/file.pkg | grep PackageInfo",
109                     python_shell=True,
110                     output_loglevel="quiet",
111                 ),
112                 call(
113                     "xar -x -f /path/to/file.pkg /path/to/PackageInfo"
114                     " /path/to/some/other/fake/PackageInfo",
115                     cwd="/tmp/dmg-ABCDEF",
116                     output_loglevel="quiet",
117                 ),
118             ]
119             cmd_mock.assert_has_calls(cmd_calls)
120             pkg_id_pkginfo_calls = [
121                 call("/path/to/PackageInfo"),
122                 call("/path/to/some/other/fake/PackageInfo"),
123             ]
124             pkg_id_pkginfo_mock.assert_has_calls(pkg_id_pkginfo_calls)
125             remove_mock.assert_called_once_with("/tmp/dmg-ABCDEF")
126             assert out == expected
127 def test_get_pkg_id_with_dir():
128     with patch("salt.modules.macpackage._get_pkg_id_dir") as pkg_id_dir_mock:
129         expected = ["com.apple.this"]
130         pkg_id_dir_mock.return_value = ["com.apple.this"]
131         cmd_mock = MagicMock(return_value="Error opening /path/to/file.pkg")
132         temp_mock = MagicMock(return_value="/tmp/dmg-ABCDEF")
133         remove_mock = MagicMock()
134         with patch.dict(
135             macpackage.__salt__,
136             {
137                 "cmd.run": cmd_mock,
138                 "temp.dir": temp_mock,
139                 "file.remove": remove_mock,
140             },
141         ):
142             out = macpackage.get_pkg_id("/path/to/file.pkg")
143             temp_mock.assert_called_once_with(prefix="pkg-")
144             cmd_mock.assert_called_once_with(
145                 "xar -t -f /path/to/file.pkg | grep PackageInfo",
146                 python_shell=True,
147                 output_loglevel="quiet",
148             )
149             pkg_id_dir_mock.assert_called_once_with("/path/to/file.pkg")
150             remove_mock.assert_called_once_with("/tmp/dmg-ABCDEF")
151             assert out == expected
152 def test_get_mpkg_ids():
153     with patch("salt.modules.macpackage.get_pkg_id") as get_pkg_id_mock:
154         expected = ["com.apple.this", "com.salt.other"]
155         mock = MagicMock(return_value="/tmp/dmg-X/file.pkg\n/tmp/dmg-X/other.pkg")
156         get_pkg_id_mock.side_effect = [["com.apple.this"], ["com.salt.other"]]
157         with patch.dict(macpackage.__salt__, {"cmd.run": mock}):
158             out = macpackage.get_mpkg_ids("/path/to/file.mpkg")
159             mock.assert_called_once_with("find /path/to -name *.pkg", python_shell=True)
160             calls = [call("/tmp/dmg-X/file.pkg"), call("/tmp/dmg-X/other.pkg")]
161             get_pkg_id_mock.assert_has_calls(calls)
162             assert out == expected
163 def test_get_pkg_id_from_pkginfo():
164 <a name="1"></a>    """
165     Test getting a package id from pkginfo files
166     expected <font color="#f63526"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>= ["com.apple.this", "com.apple.that"]
167     mock = MagicMock(return_value="com.apple.this\ncom.apple.that")
168     with patch.dict(macpackage.__salt__, {"cmd.run": mock}):
169         out = macpackage._get_pkg_id_from_pkginfo(</b></font>"/tmp/dmg-X/PackageInfo")
170         cmd = (
171             "cat /tmp/dmg-X/PackageInfo | grep -Eo"
172             " 'identifier=\"[a-zA-Z.0-9\\-]*\"' | cut -c 13- | tr -d '\"'"
173         )
174         mock.assert_called_once_with(cmd, python_shell=True)
175         assert out == expected
176 def test_get_pkg_id_from_pkginfo_no_file():
177 <a name="2"></a>    """
178     Test getting a package id from pkginfo file when it doesn't exist
179     expected <font color="#980517"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>= []
180     mock = MagicMock(return_value="No such file")
181     with patch.dict(macpackage.__salt__, {"cmd.run": mock}):
182         out = macpackage._get_pkg_id_from_pkginfo(</b></font>"/tmp/dmg-X/PackageInfo")
183         cmd = (
184             "cat /tmp/dmg-X/PackageInfo | grep -Eo"
185             " 'identifier=\"[a-zA-Z.0-9\\-]*\"' | cut -c 13- | tr -d '\"'"
186         )
187         mock.assert_called_once_with(cmd, python_shell=True)
188         assert out == expected
189 def test_get_pkg_id_dir():
190     expected = ["com.apple.this"]
191     mock = MagicMock(return_value="com.apple.this")
192     with patch.dict(macpackage.__salt__, {"cmd.run": mock}):
193         out = macpackage._get_pkg_id_dir("/tmp/dmg-X/")
194         cmd = (
195             '/usr/libexec/PlistBuddy -c "print :CFBundleIdentifier"'
196             " /tmp/dmg-X/Contents/Info.plist"
197         )
198         mock.assert_called_once_with(cmd, python_shell=False)
199         assert out == expected
200 def test_get_pkg_id_dir_wildcard():
201     expected = ["com.apple.this"]
202     mock = MagicMock(return_value="com.apple.this")
203     with patch.dict(macpackage.__salt__, {"cmd.run": mock}):
204         out = macpackage._get_pkg_id_dir("/tmp/dmg-X/*.pkg/")
205         cmd = (
206             '/usr/libexec/PlistBuddy -c "print :CFBundleIdentifier"'
207             " '/tmp/dmg-X/*.pkg/Contents/Info.plist'"
208         )
209         mock.assert_called_once_with(cmd, python_shell=True)
210         assert out == expected
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>test_lvm.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 import pytest
2 import salt.states.lvm as lvm
3 from salt.exceptions import ArgumentValueError
4 from tests.support.mock import MagicMock, patch
5 @pytest.fixture
6 def lv01():
7     return {
8         "/dev/testvg01/testlv01": {
9             "Logical Volume Name": "/dev/testvg01/testlv01",
10             "Volume Group Name": "testvg01",
11             "Logical Volume Access": "3",
12             "Logical Volume Status": "1",
13             "Internal Logical Volume Number": "-1",
14             "Open Logical Volumes": "0",
15             "Logical Volume Size": "4194304",
16             "Current Logical Extents Associated": "512",
17             "Allocated Logical Extents": "-1",
18             "Allocation Policy": "0",
19             "Read Ahead Sectors": "-1",
20             "Major Device Number": "253",
21             "Minor Device Number": "9",
22         }
23     }
24 @pytest.fixture
25 def lv02():
26     return {
27         "/dev/testvg01/testlv02": {
28             "Logical Volume Name": "/dev/testvg01/testlv02",
29             "Volume Group Name": "testvg01",
30             "Logical Volume Access": "3",
31             "Logical Volume Status": "1",
32             "Internal Logical Volume Number": "-1",
33             "Open Logical Volumes": "0",
34             "Logical Volume Size": "4194304",
35             "Current Logical Extents Associated": "512",
36             "Allocated Logical Extents": "-1",
37             "Allocation Policy": "0",
38             "Read Ahead Sectors": "-1",
39             "Major Device Number": "253",
40             "Minor Device Number": "9",
41         }
42     }
43 @pytest.fixture
44 def configure_loader_modules():
45     return {lvm: {}}
46 def test_pv_present():
47     name = "/dev/sda5"
48     comt = "Physical Volume {} already present".format(name)
49     ret = {"name": name, "changes": {}, "result": True, "comment": comt}
50     mock = MagicMock(side_effect=[True, False])
51     with patch.dict(lvm.__salt__, {"lvm.pvdisplay": mock}):
52         assert lvm.pv_present(name) == ret
53         comt = "Physical Volume {} is set to be created".format(name)
54         ret.update({"comment": comt, "result": None})
55         with patch.dict(lvm.__opts__, {"test": True}):
56             assert lvm.pv_present(name) == ret
57 def test_pv_absent():
58     name = "/dev/sda5"
59     comt = "Physical Volume {} does not exist".format(name)
60     ret = {"name": name, "changes": {}, "result": True, "comment": comt}
61     mock = MagicMock(side_effect=[False, True])
62     with patch.dict(lvm.__salt__, {"lvm.pvdisplay": mock}):
63         assert lvm.pv_absent(name) == ret
64         comt = "Physical Volume {} is set to be removed".format(name)
65         ret.update({"comment": comt, "result": None})
66         with patch.dict(lvm.__opts__, {"test": True}):
67             assert lvm.pv_absent(name) == ret
68 def test_vg_present():
69     name = "testvg00"
70     comt = "Failed to create Volume Group {}".format(name)
71     ret = {"name": name, "changes": {}, "result": False, "comment": comt}
72     mock = MagicMock(return_value=False)
73     with patch.dict(lvm.__salt__, {"lvm.vgdisplay": mock, "lvm.vgcreate": mock}):
74         with patch.dict(lvm.__opts__, {"test": False}):
75             assert lvm.vg_present(name) == ret
76         comt = "Volume Group {} is set to be created".format(name)
77         ret.update({"comment": comt, "result": None})
78         with patch.dict(lvm.__opts__, {"test": True}):
79             assert lvm.vg_present(name) == ret
80 def test_vg_absent():
81     name = "testvg00"
82     comt = "Volume Group {} already absent".format(name)
83     ret = {"name": name, "changes": {}, "result": True, "comment": comt}
84     mock = MagicMock(side_effect=[False, True])
85     with patch.dict(lvm.__salt__, {"lvm.vgdisplay": mock}):
86         assert lvm.vg_absent(name) == ret
87         comt = "Volume Group {} is set to be removed".format(name)
88         ret.update({"comment": comt, "result": None})
89         with patch.dict(lvm.__opts__, {"test": True}):
90             assert lvm.vg_absent(name) == ret
91 def test_lv_present(lv01, lv02):
92     name = "testlv01"
93     vgname = "testvg01"
94     comt = "Logical Volume {} already present".format(name)
95     ret = {"name": name, "changes": {}, "result": True, "comment": comt}
96     mock = MagicMock(return_value=lv01)
97     with patch.dict(lvm.__salt__, {"lvm.lvdisplay": mock}):
98         assert lvm.lv_present(name, vgname=vgname) == ret
99     mock = MagicMock(return_value=lv02)
100     with patch.dict(lvm.__salt__, {"lvm.lvdisplay": mock}):
101         comt = "Logical Volume {} is set to be created".format(name)
102         ret.update({"comment": comt, "result": None})
103         with patch.dict(lvm.__opts__, {"test": True}):
104             assert lvm.lv_present(name, vgname=vgname) == ret
105 def test_lv_present_with_valid_suffixes(lv01, lv02):
106     name = "testlv01"
107     vgname = "testvg01"
108     sizes_list = [
109         "2048",
110         "2048m",
111         "2048M",
112         "2048MB",
113         "2048mb",
114         "2g",
115         "2G",
116         "2GB",
117         "2gb",
118         "4194304s",
119         "4194304S",
120     ]
121     comt = "Logical Volume {} already present".format(name)
122     ret = {"name": name, "changes": {}, "result": True, "comment": comt}
123     mock = MagicMock(return_value=lv01)
124     with patch.dict(lvm.__salt__, {"lvm.lvdisplay": mock}):
125 <a name="0"></a>        for size in sizes_list:
126             assert lvm.lv_present(name, vgname=vgname, size=size) == ret
127     sizes_list <font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>= [
128         "1G",
129         "1g",
130         "2M",
131         "2m",
132         "3T",
133         "3t",
134         "4P",
135         "4p",
136         "5s",
137         "5S",
138         "1GB",
139         "1gb",
140         "2MB",
141         "2mb",
142         "3TB",
143         "3tb",
144         "4PB",
145         "4pb",
146     ]
147     mock = MagicMock(return_value=lv02)
148     with patch.dict(lvm.__salt__, {"lvm.lvdisplay": mock}):
149         comt = "Logical Volume {} is set to be created".format(name)
150         ret.update(</b></font>{"comment": comt, "result": None})
151         with patch.dict(lvm.__opts__, {"test": True}):
152             for size in sizes_list:
153                 assert lvm.lv_present(name, vgname=vgname, size=size) == ret
154 def test_lv_present_with_invalid_suffixes(lv02):
155     name = "testlv01"
156 <a name="1"></a>    vgname = "testvg01"
157     sizes_list = ["1B", "1b", "2K", "2k", "2KB", "2kb", "3BB", "3Bb", "4JKL", "YJK"]
158     comt = "Logical Volume {} already present".format(name)
159     ret <font color="#f63526"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>= {"name": name, "changes": {}, "result": True, "comment": comt}
160     mock = MagicMock(return_value=lv02)
161     with patch.dict(lvm.__salt__, {"lvm.lvdisplay": mock}):
162         comt = "Logical Volume {} is set to be created".format(</b></font>name)
163         ret.update({"comment": comt, "result": None})
164         with patch.dict(lvm.__opts__, {"test": True}):
165             for size in sizes_list:
166                 pytest.raises(
167                     ArgumentValueError,
168                     lvm.lv_present,
169                     name,
170                     vgname=vgname,
171                     size=size,
172                 )
173 def test_lv_present_with_percentage_extents(lv01, lv02):
174     name = "testlv01"
175     vgname = "testvg01"
176     extents = "42%FREE"
177     comt = "Logical Volume {} already present, {} won't be resized.".format(
178         name, extents
179     )
180     ret = {"name": name, "changes": {}, "result": True, "comment": comt}
181     mock = MagicMock(return_value=lv01)
182 <a name="2"></a>    with patch.dict(lvm.__salt__, {"lvm.lvdisplay": mock}):
183         assert lvm.lv_present(name, vgname=vgname, extents=extents) == ret
184     extents <font color="#980517"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>= "42%VG"
185     mock = MagicMock(return_value=lv02)
186     with patch.dict(lvm.__salt__, {"lvm.lvdisplay": mock}):
187         comt = "Logical Volume {} is set to be created".format(</b></font>name)
188         ret.update({"comment": comt, "result": None})
189         with patch.dict(lvm.__opts__, {"test": True}):
190             assert lvm.lv_present(name, vgname=vgname, extents=extents) == ret
191 def test_lv_present_with_force(lv01, lv02):
192     name = "testlv01"
193     vgname = "testvg01"
194     comt = "Logical Volume {} already present".format(name)
195     ret = {"name": name, "changes": {}, "result": True, "comment": comt}
196     mock = MagicMock(return_value=lv01)
197     with patch.dict(lvm.__salt__, {"lvm.lvdisplay": mock}):
198         assert lvm.lv_present(name, vgname=vgname, force=True) == ret
199     mock = MagicMock(return_value=lv02)
200     with patch.dict(lvm.__salt__, {"lvm.lvdisplay": mock}):
201         comt = "Logical Volume {} is set to be created".format(name)
202         ret.update({"comment": comt, "result": None})
203         with patch.dict(lvm.__opts__, {"test": True}):
204             assert lvm.lv_present(name, vgname=vgname, force=True) == ret
205 def test_lv_present_with_same_size(lv01):
206     name = "testlv01"
207     vgname = "testvg01"
208     comt = "Logical Volume {} already present".format(name)
209     ret = {"name": name, "changes": {}, "result": True, "comment": comt}
210     mock = MagicMock(return_value=lv01)
211     with patch.dict(lvm.__salt__, {"lvm.lvdisplay": mock}):
212         assert lvm.lv_present(name, vgname=vgname, size="2G") == ret
213 def test_lv_present_with_increase(lv01):
214     name = "testlv01"
215     vgname = "testvg01"
216     comt = "Logical Volume {} is set to be resized".format(name)
217     ret = {"name": name, "changes": {}, "result": None, "comment": comt}
218     mock = MagicMock(return_value=lv01)
219     with patch.dict(lvm.__salt__, {"lvm.lvdisplay": mock}):
220         with patch.dict(lvm.__opts__, {"test": True}):
221             assert lvm.lv_present(name, vgname=vgname, size="10G") == ret
222 def test_lv_present_with_reduce_without_force(lv01):
223     name = "testlv01"
224     vgname = "testvg01"
225     comt = "To reduce a Logical Volume option 'force' must be True."
226     ret = {"name": name, "changes": {}, "result": False, "comment": comt}
227     mock = MagicMock(return_value=lv01)
228     with patch.dict(lvm.__salt__, {"lvm.lvdisplay": mock}):
229         assert lvm.lv_present(name, vgname=vgname, size="1G") == ret
230 def test_lv_present_with_reduce_with_force(lv01):
231     name = "testlv01"
232     vgname = "testvg01"
233     comt = "Logical Volume {} is set to be resized".format(name)
234     ret = {"name": name, "changes": {}, "result": None, "comment": comt}
235     mock = MagicMock(return_value=lv01)
236     with patch.dict(lvm.__salt__, {"lvm.lvdisplay": mock}):
237         with patch.dict(lvm.__opts__, {"test": True}):
238             assert lvm.lv_present(name, vgname=vgname, size="1G", force=True) == ret
239 def test_lv_absent():
240     name = "testlv00"
241     comt = "Logical Volume {} already absent".format(name)
242     ret = {"name": name, "changes": {}, "result": True, "comment": comt}
243     mock = MagicMock(side_effect=[False, True])
244     with patch.dict(lvm.__salt__, {"lvm.lvdisplay": mock}):
245         assert lvm.lv_absent(name) == ret
246         comt = "Logical Volume {} is set to be removed".format(name)
247         ret.update({"comment": comt, "result": None})
248         with patch.dict(lvm.__opts__, {"test": True}):
249             assert lvm.lv_absent(name) == ret
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
