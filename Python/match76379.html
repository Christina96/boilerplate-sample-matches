<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Matches for test_win_dotnet.py & test_saltcheck.py</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
</HEAD>
<body>
  <div style="align-items: center; display: flex; justify-content: space-around;">
    <div>
      <h3 align="center">
Matches for test_win_dotnet.py & test_saltcheck.py
      </h3>
      <h1 align="center">
        4.2%
      </h1>
      <center>
        <a href="index.html" target="_top">
          INDEX
        </a>
        <span>-</span>
        <a href="help-en.html" target="_top">
          HELP
        </a>
      </center>
    </div>
    <div>
<TABLE BORDER="1" CELLSPACING="0" BGCOLOR="#d0d0d0">
<TR><TH><TH>test_win_dotnet.py (17.834394%)<TH>test_saltcheck.py (2.413793%)<TH>Tokens
<TR><TD BGCOLOR="#0000ff"><FONT COLOR="#0000ff">-</FONT><TD><A HREF="javascript:ZweiFrames('match76379-0.html#0',2,'match76379-1.html#0',3)" NAME="0">(83-103)<TD><A HREF="javascript:ZweiFrames('match76379-0.html#0',2,'match76379-1.html#0',3)" NAME="0">(777-789)</A><TD ALIGN=center><FONT COLOR="#ff0000">14</FONT>
<TR><TD BGCOLOR="#f63526"><FONT COLOR="#f63526">-</FONT><TD><A HREF="javascript:ZweiFrames('match76379-0.html#1',2,'match76379-1.html#1',3)" NAME="1">(28-44)<TD><A HREF="javascript:ZweiFrames('match76379-0.html#1',2,'match76379-1.html#1',3)" NAME="1">(893-926)</A><TD ALIGN=center><FONT COLOR="#ff0000">14</FONT>
</TABLE>
    </div>
  </div>
  <hr>
  <div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>test_win_dotnet.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<HR>
<PRE>
import salt.utils.platform
import salt.utils.win_dotnet as win_dotnet
from tests.support.mock import MagicMock, patch
from tests.support.unit import TestCase, skipIf


@skipIf(not salt.utils.platform.is_windows(), &quot;System is not Windows&quot;)
class WinDotNetTestCase(TestCase):
    &quot;&quot;&quot;
    Test cases for salt.utils.win_dotnet
    &quot;&quot;&quot;

    def setUp(self):
        self.mock_reg_list = MagicMock(
            return_value=[&quot;CDF&quot;, &quot;v2.0.50727&quot;, &quot;v3.0&quot;, &quot;v3.5&quot;, &quot;v4&quot;, &quot;v4.0&quot;]
        )
        self.mock_reg_exists = MagicMock(
            side_effect=[
                True,  # Version exists in v2.0.50727
                True,  # Version exists in v3.0
                True,  # Version exists in v3.5
                False,  # Version not in v4
                True,  # Release exists in v4
                False,  # Version not in v4.0
<A NAME="1"></A>                False,  # Release not in v4.0
            ]
        )
        self.mock_reg_read = MagicMock<FONT color="#f63526"><A HREF="javascript:ZweiFrames('match76379-1.html#1',3,'match76379-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>(
            side_effect=[
                # v2.0.50727
                {&quot;vdata&quot;: 1},
                {&quot;vdata&quot;: &quot;2.0.50727.4927&quot;},
                {&quot;vdata&quot;: 2},
                # v3.0
                {&quot;vdata&quot;: 1},
                {&quot;vdata&quot;: &quot;3.0.30729.4926&quot;},
                {&quot;vdata&quot;: 2},
                # v3.5
                {&quot;vdata&quot;: 1},
                {&quot;vdata&quot;: &quot;3.5.30729.4926&quot;},
                {&quot;vdata&quot;: 1},
                # v4
                {&quot;vdata&quot;: 1},
                {&quot;vdata&quot;</B></FONT>: 461814},
            ]
        )

    def test_versions(self):
        &quot;&quot;&quot;
        Test the versions function
        &quot;&quot;&quot;
        expected = {
            &quot;details&quot;: {
                &quot;v2.0.50727&quot;: {
                    &quot;full&quot;: &quot;2.0.50727.4927 SP2&quot;,
                    &quot;service_pack&quot;: 2,
                    &quot;version&quot;: &quot;2.0.50727.4927&quot;,
                },
                &quot;v3.0&quot;: {
                    &quot;full&quot;: &quot;3.0.30729.4926 SP2&quot;,
                    &quot;service_pack&quot;: 2,
                    &quot;version&quot;: &quot;3.0.30729.4926&quot;,
                },
                &quot;v3.5&quot;: {
                    &quot;full&quot;: &quot;3.5.30729.4926 SP1&quot;,
                    &quot;service_pack&quot;: 1,
                    &quot;version&quot;: &quot;3.5.30729.4926&quot;,
                },
                &quot;v4&quot;: {&quot;full&quot;: &quot;4.7.2&quot;, &quot;service_pack&quot;: &quot;N/A&quot;, &quot;version&quot;: &quot;4.7.2&quot;},
            },
            &quot;versions&quot;: [&quot;2.0.50727.4927&quot;, &quot;3.0.30729.4926&quot;, &quot;3.5.30729.4926&quot;, &quot;4.7.2&quot;],
        }
        with patch(&quot;salt.utils.win_reg.list_keys&quot;, self.mock_reg_list), patch(
            &quot;salt.utils.win_reg.value_exists&quot;, self.mock_reg_exists
        ), patch(&quot;salt.utils.win_reg.read_value&quot;, self.mock_reg_read):
            result = win_dotnet.versions()
            self.assertDictEqual(result, expected)

    def test_versions_list(self):
<A NAME="0"></A>        expected = [&quot;2.0.50727.4927&quot;, &quot;3.0.30729.4926&quot;, &quot;3.5.30729.4926&quot;, &quot;4.7.2&quot;]
        with patch(&quot;salt.utils.win_reg.list_keys&quot;, self.mock_reg_list), patch(
            &quot;salt.utils.win_reg.value_exists&quot;, self.mock_reg_exists
        ), patch(&quot;salt.utils.win_reg.read_value&quot;, self<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match76379-1.html#0',3,'match76379-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>.mock_reg_read):
            result = win_dotnet.versions_list()
            self.assertListEqual(result, expected)

    def test_versions_details(self):
        &quot;&quot;&quot;
        Test the versions function
        &quot;&quot;&quot;
        expected = {
            &quot;v2.0.50727&quot;: {
                &quot;full&quot;: &quot;2.0.50727.4927 SP2&quot;,
                &quot;service_pack&quot;: 2,
                &quot;version&quot;: &quot;2.0.50727.4927&quot;,
            },
            &quot;v3.0&quot;: {
                &quot;full&quot;: &quot;3.0.30729.4926 SP2&quot;,
                &quot;service_pack&quot;: 2,
                &quot;version&quot;: &quot;3.0.30729.4926&quot;,
            },
            &quot;v3.5&quot;: {
                &quot;full&quot;</B></FONT>: &quot;3.5.30729.4926 SP1&quot;,
                &quot;service_pack&quot;: 1,
                &quot;version&quot;: &quot;3.5.30729.4926&quot;,
            },
            &quot;v4&quot;: {&quot;full&quot;: &quot;4.7.2&quot;, &quot;service_pack&quot;: &quot;N/A&quot;, &quot;version&quot;: &quot;4.7.2&quot;},
        }
        with patch(&quot;salt.utils.win_reg.list_keys&quot;, self.mock_reg_list), patch(
            &quot;salt.utils.win_reg.value_exists&quot;, self.mock_reg_exists
        ), patch(&quot;salt.utils.win_reg.read_value&quot;, self.mock_reg_read):
            result = win_dotnet.versions_details()
            self.assertDictEqual(result, expected)

    def test_version_atleast_35(self):
        with patch(&quot;salt.utils.win_reg.list_keys&quot;, self.mock_reg_list), patch(
            &quot;salt.utils.win_reg.value_exists&quot;, self.mock_reg_exists
        ), patch(&quot;salt.utils.win_reg.read_value&quot;, self.mock_reg_read):
            self.assertTrue(win_dotnet.version_at_least(&quot;3.5&quot;))

    def test_version_atleast_47(self):
        with patch(&quot;salt.utils.win_reg.list_keys&quot;, self.mock_reg_list), patch(
            &quot;salt.utils.win_reg.value_exists&quot;, self.mock_reg_exists
        ), patch(&quot;salt.utils.win_reg.read_value&quot;, self.mock_reg_read):
            self.assertTrue(win_dotnet.version_at_least(&quot;4.7&quot;))

    def test_version_atleast_472(self):
        with patch(&quot;salt.utils.win_reg.list_keys&quot;, self.mock_reg_list), patch(
            &quot;salt.utils.win_reg.value_exists&quot;, self.mock_reg_exists
        ), patch(&quot;salt.utils.win_reg.read_value&quot;, self.mock_reg_read):
            self.assertTrue(win_dotnet.version_at_least(&quot;4.7.2&quot;))

    def test_version_not_atleast_473(self):
        with patch(&quot;salt.utils.win_reg.list_keys&quot;, self.mock_reg_list), patch(
            &quot;salt.utils.win_reg.value_exists&quot;, self.mock_reg_exists
        ), patch(&quot;salt.utils.win_reg.read_value&quot;, self.mock_reg_read):
            self.assertFalse(win_dotnet.version_at_least(&quot;4.7.3&quot;))
</PRE>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>test_saltcheck.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<HR>
<PRE>
&quot;&quot;&quot;Unit test for saltcheck execution module&quot;&quot;&quot;

import os.path

import pytest
import salt.config
import salt.modules.saltcheck as saltcheck
import salt.syspaths as syspaths
from tests.support.mixins import LoaderModuleMockMixin
from tests.support.mock import MagicMock, patch
from tests.support.unit import TestCase


class SaltcheckTestCase(TestCase, LoaderModuleMockMixin):
    &quot;&quot;&quot;
    TestCase for salt.modules.saltcheck module
    &quot;&quot;&quot;

    def setup_loader_modules(self):
        # Setting the environment to be local
        local_opts = salt.config.minion_config(
            os.path.join(syspaths.CONFIG_DIR, &quot;minion&quot;)
        )
        local_opts[&quot;file_client&quot;] = &quot;local&quot;
        local_opts[&quot;conf_file&quot;] = &quot;/etc/salt/minion&quot;
        patcher = patch(&quot;salt.config.minion_config&quot;, MagicMock(return_value=local_opts))
        patcher.start()
        self.addCleanup(patcher.stop)
        return {saltcheck: {&quot;__opts__&quot;: local_opts}}

    @pytest.mark.slow_test
    def test_call_salt_command(self):
        &quot;&quot;&quot;test simple test.echo module&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;sys.list_modules&quot;: MagicMock(return_value=[&quot;module1&quot;]),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ):
            sc_instance = saltcheck.SaltCheck()
            returned = sc_instance._call_salt_command(
                fun=&quot;test.echo&quot;, args=[&quot;hello&quot;], kwargs=None
            )
            self.assertEqual(returned, &quot;hello&quot;)

    @pytest.mark.slow_test
    def test_call_salt_command2(self):
        &quot;&quot;&quot;test simple test.echo module again&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;sys.list_modules&quot;: MagicMock(return_value=[&quot;module1&quot;]),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ):
            sc_instance = saltcheck.SaltCheck()
            returned = sc_instance._call_salt_command(
                fun=&quot;test.echo&quot;, args=[&quot;hello&quot;], kwargs=None
            )
            self.assertNotEqual(returned, &quot;not-hello&quot;)

    def test_call_saltcheck_with_proxy(self):
        &quot;&quot;&quot;test fail to load saltcheck module if proxy&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;sys.list_modules&quot;: MagicMock(return_value=[&quot;module1&quot;]),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ), patch(&quot;salt.utils.platform.is_proxy&quot;, MagicMock(return_value=[True])):
            ret, message = saltcheck.__virtual__()
            self.assertFalse(ret)
            self.assertEqual(
                message,
                &quot;The saltcheck execution module failed to load: only available on&quot;
                &quot; minions.&quot;,
            )

    def test__assert_equal1(self):
        &quot;&quot;&quot;test&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ):
            sc_instance = saltcheck.SaltCheck()
            aaa = {&quot;a&quot;: 1, &quot;b&quot;: 2}
            bbb = {&quot;a&quot;: 1, &quot;b&quot;: 2}
            mybool = sc_instance._SaltCheck__assert_equal(aaa, bbb)
            self.assertTrue(mybool)

    def test__assert_equal2(self):
        &quot;&quot;&quot;test&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ):
            sc_instance = saltcheck.SaltCheck()
            mybool = sc_instance._SaltCheck__assert_equal(False, True)
            self.assertNotEqual(mybool, True)

    def test__assert_not_equal1(self):
        &quot;&quot;&quot;test&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ):
            sc_instance = saltcheck.SaltCheck()
            aaa = {&quot;a&quot;: 1, &quot;b&quot;: 2}
            bbb = {&quot;a&quot;: 1, &quot;b&quot;: 2, &quot;c&quot;: 3}
            mybool = sc_instance._SaltCheck__assert_not_equal(aaa, bbb)
            self.assertTrue(mybool)

    def test__assert_not_equal2(self):
        &quot;&quot;&quot;test&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ):
            sc_instance = saltcheck.SaltCheck()
            aaa = {&quot;a&quot;: 1, &quot;b&quot;: 2}
            bbb = {&quot;a&quot;: 1, &quot;b&quot;: 2}
            mybool = sc_instance._SaltCheck__assert_not_equal(aaa, bbb)
            self.assertNotEqual(mybool, True)

    def test__assert_true1(self):
        &quot;&quot;&quot;test&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ):
            sc_instance = saltcheck.SaltCheck()
            mybool = sc_instance._SaltCheck__assert_equal(True, True)
            self.assertTrue(mybool)

    def test__assert_true2(self):
        &quot;&quot;&quot;test&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ):
            sc_instance = saltcheck.SaltCheck()
            mybool = sc_instance._SaltCheck__assert_equal(False, True)
            self.assertNotEqual(mybool, True)

    def test__assert_false1(self):
        &quot;&quot;&quot;test&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ):
            sc_instance = saltcheck.SaltCheck()
            mybool = sc_instance._SaltCheck__assert_false(False)
            self.assertTrue(mybool)

    def test__assert_false2(self):
        &quot;&quot;&quot;test&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ):
            sc_instance = saltcheck.SaltCheck()
            mybool = sc_instance._SaltCheck__assert_false(True)
            self.assertNotEqual(mybool, True)

    def test__assert_in1(self):
        &quot;&quot;&quot;test&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ):
            sc_instance = saltcheck.SaltCheck()
            aaa = &quot;bob&quot;
            mylist = [&quot;alice&quot;, &quot;bob&quot;, &quot;charles&quot;, &quot;dana&quot;]
            mybool = sc_instance._SaltCheck__assert_in(aaa, mylist)
            self.assertTrue(mybool, True)

    def test__assert_in2(self):
        &quot;&quot;&quot;test&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ):
            sc_instance = saltcheck.SaltCheck()
            aaa = &quot;elaine&quot;
            mylist = [&quot;alice&quot;, &quot;bob&quot;, &quot;charles&quot;, &quot;dana&quot;]
            mybool = sc_instance._SaltCheck__assert_in(aaa, mylist)
            self.assertNotEqual(mybool, True)

    def test__assert_not_in1(self):
        &quot;&quot;&quot;test&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ):
            sc_instance = saltcheck.SaltCheck()
            aaa = &quot;elaine&quot;
            mylist = [&quot;alice&quot;, &quot;bob&quot;, &quot;charles&quot;, &quot;dana&quot;]
            mybool = sc_instance._SaltCheck__assert_not_in(aaa, mylist)
            self.assertTrue(mybool, True)

    def test__assert_not_in2(self):
        &quot;&quot;&quot;test&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ):
            sc_instance = saltcheck.SaltCheck()
            aaa = &quot;bob&quot;
            mylist = [&quot;alice&quot;, &quot;bob&quot;, &quot;charles&quot;, &quot;dana&quot;]
            mybool = sc_instance._SaltCheck__assert_not_in(aaa, mylist)
            self.assertNotEqual(mybool, True)

    def test__assert_greater1(self):
        &quot;&quot;&quot;test&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ):
            sc_instance = saltcheck.SaltCheck()
            aaa = 110
            bbb = 100
            mybool = sc_instance._SaltCheck__assert_greater(aaa, bbb)
            self.assertTrue(mybool, True)

    def test__assert_greater2(self):
        &quot;&quot;&quot;test&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ):
            sc_instance = saltcheck.SaltCheck()
            aaa = 100
            bbb = 110
            mybool = sc_instance._SaltCheck__assert_greater(aaa, bbb)
            self.assertNotEqual(mybool, True)

    def test__assert_greater3(self):
        &quot;&quot;&quot;test&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ):
            sc_instance = saltcheck.SaltCheck()
            aaa = 100
            bbb = 100
            mybool = sc_instance._SaltCheck__assert_greater(aaa, bbb)
            self.assertNotEqual(mybool, True)

    def test__assert_greater_equal1(self):
        &quot;&quot;&quot;test&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ):
            sc_instance = saltcheck.SaltCheck()
            aaa = 110
            bbb = 100
            mybool = sc_instance._SaltCheck__assert_greater_equal(aaa, bbb)
            self.assertTrue(mybool, True)

    def test__assert_greater_equal2(self):
        &quot;&quot;&quot;test&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ):
            sc_instance = saltcheck.SaltCheck()
            aaa = 100
            bbb = 110
            mybool = sc_instance._SaltCheck__assert_greater_equal(aaa, bbb)
            self.assertNotEqual(mybool, True)

    def test__assert_greater_equal3(self):
        &quot;&quot;&quot;test&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ):
            sc_instance = saltcheck.SaltCheck()
            aaa = 100
            bbb = 100
            mybool = sc_instance._SaltCheck__assert_greater_equal(aaa, bbb)
            self.assertEqual(mybool, &quot;Pass&quot;)

    def test__assert_less1(self):
        &quot;&quot;&quot;test&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ):
            sc_instance = saltcheck.SaltCheck()
            aaa = 99
            bbb = 100
            mybool = sc_instance._SaltCheck__assert_less(aaa, bbb)
            self.assertTrue(mybool, True)

    def test__assert_less2(self):
        &quot;&quot;&quot;test&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ):
            sc_instance = saltcheck.SaltCheck()
            aaa = 110
            bbb = 99
            mybool = sc_instance._SaltCheck__assert_less(aaa, bbb)
            self.assertNotEqual(mybool, True)

    def test__assert_less3(self):
        &quot;&quot;&quot;test&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ):
            sc_instance = saltcheck.SaltCheck()
            aaa = 100
            bbb = 100
            mybool = sc_instance._SaltCheck__assert_less(aaa, bbb)
            self.assertNotEqual(mybool, True)

    def test__assert_less_equal1(self):
        &quot;&quot;&quot;test&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ):
            sc_instance = saltcheck.SaltCheck()
            aaa = 99
            bbb = 100
            mybool = sc_instance._SaltCheck__assert_less_equal(aaa, bbb)
            self.assertTrue(mybool, True)

    def test__assert_less_equal2(self):
        &quot;&quot;&quot;test&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ):
            sc_instance = saltcheck.SaltCheck()
            aaa = 110
            bbb = 99
            mybool = sc_instance._SaltCheck__assert_less_equal(aaa, bbb)
            self.assertNotEqual(mybool, True)

    def test__assert_less_equal3(self):
        &quot;&quot;&quot;test&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ):
            sc_instance = saltcheck.SaltCheck()
            aaa = 100
            bbb = 100
            mybool = sc_instance._SaltCheck__assert_less_equal(aaa, bbb)
            self.assertEqual(mybool, &quot;Pass&quot;)

    def test__assert_empty(self):
        &quot;&quot;&quot;test&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ):
            sc_instance = saltcheck.SaltCheck()
            mybool = sc_instance._SaltCheck__assert_empty(&quot;&quot;)
            self.assertEqual(mybool, &quot;Pass&quot;)

    def test__assert_empty_fail(self):
        &quot;&quot;&quot;test&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ):
            sc_instance = saltcheck.SaltCheck()
            mybool = sc_instance._SaltCheck__assert_empty(&quot;data&quot;)
            self.assertNotEqual(mybool, &quot;Pass&quot;)

    def test__assert__not_empty(self):
        &quot;&quot;&quot;test&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ):
            sc_instance = saltcheck.SaltCheck()
            mybool = sc_instance._SaltCheck__assert_not_empty(&quot;data&quot;)
            self.assertEqual(mybool, &quot;Pass&quot;)

    def test__assert__not_empty_fail(self):
        &quot;&quot;&quot;test&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ):
            sc_instance = saltcheck.SaltCheck()
            mybool = sc_instance._SaltCheck__assert_not_empty(&quot;&quot;)
            self.assertNotEqual(mybool, &quot;Pass&quot;)

    @pytest.mark.slow_test
    def test_run_test_1(self):
        &quot;&quot;&quot;test&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;sys.list_modules&quot;: MagicMock(return_value=[&quot;test&quot;]),
                &quot;sys.list_functions&quot;: MagicMock(return_value=[&quot;test.echo&quot;]),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ):
            returned = saltcheck.run_test(
                test={
                    &quot;module_and_function&quot;: &quot;test.echo&quot;,
                    &quot;assertion&quot;: &quot;assertEqual&quot;,
                    &quot;expected_return&quot;: &quot;This works!&quot;,
                    &quot;args&quot;: [&quot;This works!&quot;],
                }
            )
            self.assertEqual(returned[&quot;status&quot;], &quot;Pass&quot;)

    def test_run_test_muliassert(self):
        &quot;&quot;&quot;test&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;sys.list_modules&quot;: MagicMock(return_value=[&quot;test&quot;]),
                &quot;sys.list_functions&quot;: MagicMock(return_value=[&quot;test.echo&quot;]),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ):
            returned = saltcheck.run_test(
                test={
                    &quot;module_and_function&quot;: &quot;test.echo&quot;,
                    &quot;assertions&quot;: [
                        {&quot;assertion&quot;: &quot;assertEqual&quot;, &quot;expected_return&quot;: &quot;This works!&quot;},
                        {&quot;assertion&quot;: &quot;assertEqual&quot;, &quot;expected_return&quot;: &quot;This works!&quot;},
                    ],
                    &quot;args&quot;: [&quot;This works!&quot;],
                }
            )
            self.assertEqual(returned[&quot;status&quot;], &quot;Pass&quot;)

    def test_run_test_muliassert_failure(self):
        &quot;&quot;&quot;test&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;config.get&quot;: MagicMock(return_value=True),
                &quot;sys.list_modules&quot;: MagicMock(return_value=[&quot;test&quot;]),
                &quot;sys.list_functions&quot;: MagicMock(return_value=[&quot;test.echo&quot;]),
                &quot;cp.cache_master&quot;: MagicMock(return_value=[True]),
            },
        ):
            returned = saltcheck.run_test(
                test={
                    &quot;module_and_function&quot;: &quot;test.echo&quot;,
                    &quot;assertions&quot;: [
                        {&quot;assertion&quot;: &quot;assertEqual&quot;, &quot;expected_return&quot;: &quot;WRONG&quot;},
                        {&quot;assertion&quot;: &quot;assertEqual&quot;, &quot;expected_return&quot;: &quot;This works!&quot;},
                    ],
                    &quot;args&quot;: [&quot;This works!&quot;],
                }
            )
            self.assertEqual(returned[&quot;status&quot;], &quot;Fail&quot;)

    def test_report_highstate_tests(self):
        &quot;&quot;&quot;test report_highstate_tests&quot;&quot;&quot;
        expected_output = {
            &quot;TEST REPORT RESULTS&quot;: {
                &quot;States missing tests&quot;: [&quot;state1&quot;],
                &quot;Missing Tests&quot;: 1,
                &quot;States with tests&quot;: [&quot;found&quot;],
            }
        }
        with patch(&quot;salt.modules.saltcheck._get_top_states&quot;) as mocked_get_top:
            mocked_get_top.return_value = [&quot;state1&quot;, &quot;found&quot;]
            with patch(&quot;salt.modules.saltcheck.StateTestLoader&quot;) as mocked_stl:
                instance = mocked_stl.return_value
                instance.found_states = [&quot;found&quot;]
                returned = saltcheck.report_highstate_tests()
                self.assertEqual(returned, expected_output)

    def test_validation(self):
        &quot;&quot;&quot;test validation of tests&quot;&quot;&quot;
        sc_instance = saltcheck.SaltCheck()

        # Fail on empty test
        test_dict = {}
        expected_return = False
        val_ret = sc_instance._SaltCheck__is_valid_test(test_dict)
        self.assertEqual(val_ret, expected_return)

        # Succeed on standard test
        test_dict = {
            &quot;module_and_function&quot;: &quot;test.echo&quot;,
            &quot;args&quot;: [&quot;hello&quot;],
            &quot;kwargs&quot;: {},
            &quot;assertion&quot;: &quot;assertEqual&quot;,
            &quot;expected_return&quot;: &quot;hello&quot;,
        }
        expected_return = True
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;sys.list_modules&quot;: MagicMock(return_value=[&quot;test&quot;]),
                &quot;sys.list_functions&quot;: MagicMock(return_value=[&quot;test.echo&quot;]),
            },
        ):
            val_ret = sc_instance._SaltCheck__is_valid_test(test_dict)
            self.assertEqual(val_ret, expected_return)

        # Succeed on standard test with older expected-return syntax
        test_dict = {
            &quot;module_and_function&quot;: &quot;test.echo&quot;,
            &quot;args&quot;: [&quot;hello&quot;],
            &quot;kwargs&quot;: {},
            &quot;assertion&quot;: &quot;assertEqual&quot;,
            &quot;expected-return&quot;: &quot;hello&quot;,
        }
        expected_return = True
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;sys.list_modules&quot;: MagicMock(return_value=[&quot;test&quot;]),
                &quot;sys.list_functions&quot;: MagicMock(return_value=[&quot;test.echo&quot;]),
            },
        ):
            val_ret = sc_instance._SaltCheck__is_valid_test(test_dict)
            self.assertEqual(val_ret, expected_return)

        # Do not require expected_return for some assertions
        assertions = [&quot;assertEmpty&quot;, &quot;assertNotEmpty&quot;, &quot;assertTrue&quot;, &quot;assertFalse&quot;]
        for assertion in assertions:
            test_dict = {&quot;module_and_function&quot;: &quot;test.echo&quot;, &quot;args&quot;: [&quot;hello&quot;]}
            test_dict[&quot;assertion&quot;] = assertion
            expected_return = True
            with patch.dict(
                saltcheck.__salt__,
                {
                    &quot;sys.list_modules&quot;: MagicMock(return_value=[&quot;test&quot;]),
                    &quot;sys.list_functions&quot;: MagicMock(return_value=[&quot;test.echo&quot;]),
                },
            ):
                val_ret = sc_instance._SaltCheck__is_valid_test(test_dict)
                self.assertEqual(val_ret, expected_return)

        # Fail on invalid module
        test_dict = {
            &quot;module_and_function&quot;: &quot;broken.echo&quot;,
            &quot;args&quot;: [&quot;hello&quot;],
            &quot;kwargs&quot;: {},
            &quot;assertion&quot;: &quot;assertEqual&quot;,
            &quot;expected_return&quot;: &quot;hello&quot;,
        }
        expected_return = False
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;sys.list_modules&quot;: MagicMock(return_value=[&quot;test&quot;]),
                &quot;sys.list_functions&quot;: MagicMock(return_value=[&quot;test.echo&quot;]),
            },
        ):
            val_ret = sc_instance._SaltCheck__is_valid_test(test_dict)
            self.assertEqual(val_ret, expected_return)

        # Fail on invalid function
        test_dict = {
            &quot;module_and_function&quot;: &quot;test.broken&quot;,
            &quot;args&quot;: [&quot;hello&quot;],
            &quot;kwargs&quot;: {},
            &quot;assertion&quot;: &quot;assertEqual&quot;,
            &quot;expected_return&quot;: &quot;hello&quot;,
        }
        expected_return = False
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;sys.list_modules&quot;: MagicMock(return_value=[&quot;test&quot;]),
                &quot;sys.list_functions&quot;: MagicMock(return_value=[&quot;test.echo&quot;]),
            },
        ):
            val_ret = sc_instance._SaltCheck__is_valid_test(test_dict)
            self.assertEqual(val_ret, expected_return)

        # Fail on missing expected_return
        test_dict = {
            &quot;module_and_function&quot;: &quot;test.echo&quot;,
            &quot;args&quot;: [&quot;hello&quot;],
            &quot;kwargs&quot;: {},
            &quot;assertion&quot;: &quot;assertEqual&quot;,
        }
        expected_return = False
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;sys.list_modules&quot;: MagicMock(return_value=[&quot;test&quot;]),
                &quot;sys.list_functions&quot;: MagicMock(return_value=[&quot;test.echo&quot;]),
            },
        ):
            val_ret = sc_instance._SaltCheck__is_valid_test(test_dict)
            self.assertEqual(val_ret, expected_return)

        # Fail on empty expected_return
        test_dict = {
            &quot;module_and_function&quot;: &quot;test.echo&quot;,
            &quot;args&quot;: [&quot;hello&quot;],
            &quot;kwargs&quot;: {},
            &quot;assertion&quot;: &quot;assertEqual&quot;,
            &quot;expected_return&quot;: None,
        }
        expected_return = False
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;sys.list_modules&quot;: MagicMock(return_value=[&quot;test&quot;]),
                &quot;sys.list_functions&quot;: MagicMock(return_value=[&quot;test.echo&quot;]),
            },
        ):
            val_ret = sc_instance._SaltCheck__is_valid_test(test_dict)
            self.assertEqual(val_ret, expected_return)

        # Succeed on m_and_f saltcheck.state_apply with only args
        test_dict = {&quot;module_and_function&quot;: &quot;saltcheck.state_apply&quot;, &quot;args&quot;: [&quot;common&quot;]}
        expected_return = True
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;sys.list_modules&quot;: MagicMock(return_value=[&quot;saltcheck&quot;]),
                &quot;sys.list_functions&quot;: MagicMock(return_value=[&quot;saltcheck.state_apply&quot;]),
            },
        ):
            val_ret = sc_instance._SaltCheck__is_valid_test(test_dict)
            self.assertEqual(val_ret, expected_return)

        # Succeed on multiple assertions
        test_dict = {
            &quot;module_and_function&quot;: &quot;test.echo&quot;,
            &quot;args&quot;: [&quot;somearg&quot;],
            &quot;assertions&quot;: [
                {
                    &quot;assertion&quot;: &quot;assertEqual&quot;,
                    &quot;assertion_section&quot;: &quot;0:program&quot;,
                    &quot;expected_return&quot;: &quot;systemd-resolve&quot;,
                },
                {
                    &quot;assertion&quot;: &quot;assertEqual&quot;,
                    &quot;assertion_section&quot;: &quot;0:proto&quot;,
                    &quot;expected_return&quot;: &quot;udp&quot;,
                },
            ],
        }
        expected_return = True
        with patch.dict(
            saltcheck.__salt__,
            {
                &quot;sys.list_modules&quot;: MagicMock(return_value=[&quot;test&quot;]),
                &quot;sys.list_functions&quot;: MagicMock(return_value=[&quot;test.echo&quot;]),
            },
        ):
            val_ret = sc_instance._SaltCheck__is_valid_test(test_dict)
            self.assertEqual(val_ret, expected_return)

    def test_sls_path_generation(self):
        &quot;&quot;&quot;test generation of sls paths&quot;&quot;&quot;
        with patch.dict(
            saltcheck.__salt__,
            {&quot;config.get&quot;: MagicMock(return_value=&quot;saltcheck-tests&quot;)},
        ):
            testLoader = saltcheck.StateTestLoader()

            state_name = &quot;teststate&quot;
            expected_return = [
                &quot;salt://teststate/saltcheck-tests&quot;,
                &quot;salt:///saltcheck-tests&quot;,
            ]
            ret = testLoader._generate_sls_path(state_name)
            self.assertEqual(ret, expected_return)

            state_name = &quot;teststate.long.path&quot;
            expected_return = [
                &quot;salt://teststate/long/path/saltcheck-tests&quot;,
                &quot;salt://teststate/long/saltcheck-tests&quot;,
                &quot;salt://teststate/saltcheck-tests&quot;,
            ]
            ret = testLoader._generate_sls_path(state_name)
            self.assertEqual(ret, expected_return)
<A NAME="0"></A>
            state_name = &quot;teststate.really.long.path&quot;
            expected_return = [
                <FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match76379-0.html#0',2,'match76379-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>&quot;salt://teststate/really/long/path/saltcheck-tests&quot;,
                &quot;salt://teststate/really/long/saltcheck-tests&quot;,
                &quot;salt://teststate/saltcheck-tests&quot;,
            ]
            ret = testLoader._generate_sls_path(state_name)
            self.assertEqual(ret, expected_return)

    def test_generate_output(self):
        # passing states
        sc_results = {
            &quot;a_state&quot;: {
                &quot;test_id1&quot;: {&quot;status&quot;: &quot;Pass&quot;, &quot;duration&quot;: 1.987},
                &quot;test_id2&quot;: {&quot;status&quot;</B></FONT>: &quot;Pass&quot;, &quot;duration&quot;: 1.123},
            }
        }
        expected_output = [
            {
                &quot;a_state&quot;: {
                    &quot;test_id1&quot;: {&quot;status&quot;: &quot;Pass&quot;, &quot;duration&quot;: 1.987},
                    &quot;test_id2&quot;: {&quot;status&quot;: &quot;Pass&quot;, &quot;duration&quot;: 1.123},
                }
            },
            {
                &quot;TEST RESULTS&quot;: {
                    &quot;Execution Time&quot;: 3.11,
                    &quot;Passed&quot;: 2,
                    &quot;Failed&quot;: 0,
                    &quot;Skipped&quot;: 0,
                    &quot;Missing Tests&quot;: 0,
                }
            },
        ]
        ret = saltcheck._generate_out_list(sc_results)
        self.assertEqual(ret, expected_output)

        # Skipped
        sc_results = {
            &quot;a_state&quot;: {
                &quot;test_id1&quot;: {&quot;status&quot;: &quot;Skip&quot;, &quot;duration&quot;: 1.987},
                &quot;test_id2&quot;: {&quot;status&quot;: &quot;Pass&quot;, &quot;duration&quot;: 1.123},
            }
        }
        expected_output = [
            {
                &quot;a_state&quot;: {
                    &quot;test_id1&quot;: {&quot;status&quot;: &quot;Skip&quot;, &quot;duration&quot;: 1.987},
                    &quot;test_id2&quot;: {&quot;status&quot;: &quot;Pass&quot;, &quot;duration&quot;: 1.123},
                }
            },
            {
                &quot;TEST RESULTS&quot;: {
                    &quot;Execution Time&quot;: 3.11,
                    &quot;Passed&quot;: 1,
                    &quot;Failed&quot;: 0,
                    &quot;Skipped&quot;: 1,
                    &quot;Missing Tests&quot;: 0,
                }
            },
        ]
        ret = saltcheck._generate_out_list(sc_results)
        self.assertEqual(ret, expected_output)

        # Failed (does not test setting __context__)
        sc_results = {
            &quot;a_state&quot;: {
                &quot;test_id1&quot;: {&quot;status&quot;: &quot;Failed&quot;, &quot;duration&quot;: 1.987},
                &quot;test_id2&quot;: {&quot;status&quot;: &quot;Pass&quot;, &quot;duration&quot;: 1.123},
            }
        }
        expected_output = [
            {
                &quot;a_state&quot;: {
                    &quot;test_id1&quot;: {&quot;status&quot;: &quot;Failed&quot;, &quot;duration&quot;: 1.987},
                    &quot;test_id2&quot;: {&quot;status&quot;: &quot;Pass&quot;, &quot;duration&quot;: 1.123},
                }
            },
            {
                &quot;TEST RESULTS&quot;: {
                    &quot;Execution Time&quot;: 3.11,
                    &quot;Passed&quot;: 1,
                    &quot;Failed&quot;: 1,
                    &quot;Skipped&quot;: 0,
                    &quot;Missing Tests&quot;: 0,
                }
            },
        ]
        ret = saltcheck._generate_out_list(sc_results)
        self.assertEqual(ret, expected_output)

        # missing states
        sc_results = {
            &quot;a_state&quot;: {
                &quot;test_id1&quot;: {&quot;status&quot;: &quot;Pass&quot;, &quot;duration&quot;: 1.987},
                &quot;test_id2&quot;: {&quot;status&quot;: &quot;Pass&quot;, &quot;duration&quot;: 1.123},
            },
            &quot;b_state&quot;: {},
        }
        expected_output = [
            {
                &quot;a_state&quot;: {
                    &quot;test_id1&quot;: {&quot;status&quot;: &quot;Pass&quot;, &quot;duration&quot;: 1.987},
                    &quot;test_id2&quot;: {&quot;status&quot;: &quot;Pass&quot;, &quot;duration&quot;: 1.123},
                }
            },
            {&quot;b_state&quot;: {}},
            {
                &quot;TEST RESULTS&quot;: {
                    &quot;Execution Time&quot;: 3.11,
                    &quot;Passed&quot;: 2,
                    &quot;Failed&quot;: 0,
                    &quot;Skipped&quot;: 0,
                    &quot;Missing Tests&quot;: 1,
                }
<A NAME="1"></A>            },
        ]
        ret = saltcheck._generate_out_list(sc_results)
        self.assertEqual<FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match76379-0.html#1',2,'match76379-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>(ret, expected_output)

        # Failed with only_fails
        sc_results = {
            &quot;a_state&quot;: {
                &quot;test_id1&quot;: {
                    &quot;assertion1&quot;: {
                        &quot;status&quot;: &quot;Pass&quot;,
                        &quot;module.function [args]&quot;: 'cmd.run [&quot;ls /etc/salt/master&quot;]',
                        &quot;saltcheck assertion&quot;: &quot;IS NOT EMPTY /etc/salt/master&quot;,
                    },
                    &quot;assertion2&quot;: {
                        &quot;status&quot;: &quot;Pass&quot;,
                        &quot;module.function [args]&quot;: 'cmd.run [&quot;ls /etc/salt/master&quot;]',
                        &quot;saltcheck assertion&quot;: &quot;master IN /etc/salt/master&quot;,
                    },
                    &quot;status&quot;: &quot;Pass&quot;,
                    &quot;duration&quot;: 1.4383,
                },
                &quot;test_id2&quot;: {
                    &quot;assertion1&quot;: {&quot;status&quot;: &quot;Fail: /etc/salt/master is not empty&quot;},
                    &quot;status&quot;: &quot;Fail&quot;,
                    &quot;duration&quot;: 0.308,
                },
                &quot;test_id3&quot;: {
                    &quot;assertion1&quot;: {&quot;status&quot;: &quot;Fail: /etc/salt/master is not empty&quot;},
                    &quot;status&quot;: &quot;Fail&quot;,
                    &quot;duration&quot;: 0.3073,
                },
            },
            &quot;b_state&quot;: {
                &quot;test_id4&quot;: {
                    &quot;assertion1&quot;: {
                        &quot;status&quot;</B></FONT>: &quot;Pass&quot;,
                        &quot;module.function [args]&quot;: 'cmd.run [&quot;ls /etc/salt/master&quot;]',
                        &quot;saltcheck assertion&quot;: &quot;IS NOT EMPTY /etc/salt/master&quot;,
                    },
                    &quot;assertion2&quot;: {
                        &quot;status&quot;: &quot;Pass&quot;,
                        &quot;module.function [args]&quot;: 'cmd.run [&quot;ls /etc/salt/master&quot;]',
                        &quot;saltcheck assertion&quot;: &quot;master IN /etc/salt/master&quot;,
                    },
                    &quot;status&quot;: &quot;Pass&quot;,
                    &quot;duration&quot;: 0.3057,
                },
                &quot;test_id5&quot;: {
                    &quot;assertion1&quot;: {&quot;status&quot;: &quot;Fail: /etc/salt/master is not empty&quot;},
                    &quot;status&quot;: &quot;Fail&quot;,
                    &quot;duration&quot;: 0.3066,
                },
                &quot;test_id6&quot;: {
                    &quot;assertion1&quot;: {&quot;status&quot;: &quot;Fail: /etc/salt/master is not empty&quot;},
                    &quot;status&quot;: &quot;Fail&quot;,
                    &quot;duration&quot;: 0.3076,
                },
            },
        }
        expected_output = [
            {
                &quot;a_state&quot;: {
                    &quot;test_id2&quot;: {
                        &quot;assertion1&quot;: {&quot;status&quot;: &quot;Fail: /etc/salt/master is not empty&quot;},
                        &quot;status&quot;: &quot;Fail&quot;,
                        &quot;duration&quot;: 0.308,
                    },
                    &quot;test_id3&quot;: {
                        &quot;assertion1&quot;: {&quot;status&quot;: &quot;Fail: /etc/salt/master is not empty&quot;},
                        &quot;status&quot;: &quot;Fail&quot;,
                        &quot;duration&quot;: 0.3073,
                    },
                }
            },
            {
                &quot;b_state&quot;: {
                    &quot;test_id5&quot;: {
                        &quot;assertion1&quot;: {&quot;status&quot;: &quot;Fail: /etc/salt/master is not empty&quot;},
                        &quot;status&quot;: &quot;Fail&quot;,
                        &quot;duration&quot;: 0.3066,
                    },
                    &quot;test_id6&quot;: {
                        &quot;assertion1&quot;: {&quot;status&quot;: &quot;Fail: /etc/salt/master is not empty&quot;},
                        &quot;status&quot;: &quot;Fail&quot;,
                        &quot;duration&quot;: 0.3076,
                    },
                }
            },
            {
                &quot;TEST RESULTS&quot;: {
                    &quot;Execution Time&quot;: 2.9735,
                    &quot;Passed&quot;: 2,
                    &quot;Failed&quot;: 4,
                    &quot;Skipped&quot;: 0,
                    &quot;Missing Tests&quot;: 0,
                }
            },
        ]
        ret = saltcheck._generate_out_list(sc_results, only_fails=True)
        self.assertEqual(ret, expected_output)
</PRE>
</div>
  </div>
</body>
</html>
