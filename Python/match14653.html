<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for connection_15.py &amp; test_layer2_domain.py</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for connection_15.py &amp; test_layer2_domain.py
      </h3>
<h1 align="center">
        2.0%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>connection_15.py (1.1494253%)<th>test_layer2_domain.py (8.648648%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(34-57)<td><a href="#" name="0">(21-43)</a><td align="center"><font color="#ff0000">16</font>
</td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>connection_15.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 import xml.sax
2 import hashlib
3 import string
4 import collections
5 from boto.connection import AWSQueryConnection
6 from boto.exception import BotoServerError
7 import boto.mws.exception
8 import boto.mws.response
9 from boto.handler import XmlHandler
10 from boto.compat import filter, map, six, encodebytes
11 __all__ = ['MWSConnection']
12 api_version_path <font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>= {
13     'Feeds':             ('2009-01-01', 'Merchant', '/'),
14     'Reports':           ('2009-01-01', 'Merchant', '/'),
15     'Orders':            ('2013-09-01', 'SellerId', '/Orders/2013-09-01'),
16     'Products':          ('2011-10-01', 'SellerId', '/Products/2011-10-01'),
17     'Sellers':           ('2011-07-01', 'SellerId', '/Sellers/2011-07-01'),
18     'Inbound':           ('2010-10-01', 'SellerId',
19                           '/FulfillmentInboundShipment/2010-10-01'),
20     'Outbound':          ('2010-10-01', 'SellerId',
21                           '/FulfillmentOutboundShipment/2010-10-01'),
22     'Inventory':         ('2010-10-01', 'SellerId',
23                           '/FulfillmentInventory/2010-10-01'),
24     'Recommendations':   ('2013-04-01', 'SellerId',
25                           '/Recommendations/2013-04-01'),
26     'CustomerInfo':      ('2014-03-01', 'SellerId',
27                           '/CustomerInformation/2014-03-01'),
28     'CartInfo':          ('2014-03-01', 'SellerId',
29                           '/CartInformation/2014-03-01'),
30     'Subscriptions':     ('2013-07-01', 'SellerId',
31                           '/Subscriptions/2013-07-01'),
32     'OffAmazonPayments': ('2013-01-01', 'SellerId',
33                           '/OffAmazonPayments/2013-01-01'),
34 }
35 content_md5 =</b></font> lambda c: encodebytes(hashlib.md5(c).digest()).strip()
36 decorated_attrs = ('action', 'response', 'section',
37                    'quota', 'restore', 'version')
38 api_call_map = {}
39 def add_attrs_from(func, to):
40     for attr in decorated_attrs:
41         setattr(to, attr, getattr(func, attr, None))
42     to.__wrapped__ = func
43     return to
44 def structured_lists(*fields):
45     def decorator(func):
46         def wrapper(self, *args, **kw):
47             for key, acc in [f.split('.') for f in fields]:
48                 if key in kw:
49                     newkey = key + '.' + acc + (acc and '.' or '')
50                     for i in range(len(kw[key])):
51                         kw[newkey + str(i + 1)] = kw[key][i]
52                     kw.pop(key)
53             return func(self, *args, **kw)
54         wrapper.__doc__ = "{0}\nLists: {1}".format(func.__doc__,
55                                                    ', '.join(fields))
56         return add_attrs_from(func, to=wrapper)
57     return decorator
58 def http_body(field):
59     def decorator(func):
60         def wrapper(*args, **kw):
61             if any([f not in kw for f in (field, 'content_type')]):
62                 message = "{0} requires {1} and content_type arguments for " \
63                           "building HTTP body".format(func.action, field)
64                 raise KeyError(message)
65             kw['body'] = kw.pop(field)
66             kw['headers'] = {
67                 'Content-Type': kw.pop('content_type'),
68                 'Content-MD5':  content_md5(kw['body']),
69             }
70             return func(*args, **kw)
71         wrapper.__doc__ = "{0}\nRequired HTTP Body: " \
72                           "{1}".format(func.__doc__, field)
73         return add_attrs_from(func, to=wrapper)
74     return decorator
75 def destructure_object(value, into, prefix, members=False):
76     if isinstance(value, boto.mws.response.ResponseElement):
77         destructure_object(value.__dict__, into, prefix, members=members)
78     elif isinstance(value, collections.Mapping):
79         for name in value:
80             if name.startswith('_'):
81                 continue
82             destructure_object(value[name], into, prefix + '.' + name,
83                                members=members)
84     elif isinstance(value, six.string_types):
85         into[prefix] = value
86     elif isinstance(value, collections.Iterable):
87         for index, element in enumerate(value):
88             suffix = (members and '.member.' or '.') + str(index + 1)
89             destructure_object(element, into, prefix + suffix,
90                                members=members)
91     elif isinstance(value, bool):
92         into[prefix] = str(value).lower()
93     else:
94         into[prefix] = value
95 def structured_objects(*fields, **kwargs):
96     def decorator(func):
97         def wrapper(*args, **kw):
98             members = kwargs.get('members', False)
99             for field in filter(lambda i: i in kw, fields):
100                 destructure_object(kw.pop(field), kw, field, members=members)
101             return func(*args, **kw)
102         wrapper.__doc__ = "{0}\nElement|Iter|Map: {1}\n" \
103                           "(ResponseElement or anything iterable/dict-like)" \
104                           .format(func.__doc__, ', '.join(fields))
105         return add_attrs_from(func, to=wrapper)
106     return decorator
107 def requires(*groups):
108     def decorator(func):
109         def requires(*args, **kw):
110             hasgroup = lambda group: all(key in kw for key in group)
111             if 1 != len(list(filter(hasgroup, groups))):
112                 message = ' OR '.join(['+'.join(g) for g in groups])
113                 message = "{0} requires {1} argument(s)" \
114                           "".format(func.action, message)
115                 raise KeyError(message)
116             return func(*args, **kw)
117         message = ' OR '.join(['+'.join(g) for g in groups])
118         requires.__doc__ = "{0}\nRequired: {1}".format(func.__doc__,
119                                                        message)
120         return add_attrs_from(func, to=requires)
121     return decorator
122 def exclusive(*groups):
123     def decorator(func):
124         def wrapper(*args, **kw):
125             hasgroup = lambda group: all(key in kw for key in group)
126             if len(list(filter(hasgroup, groups))) not in (0, 1):
127                 message = ' OR '.join(['+'.join(g) for g in groups])
128                 message = "{0} requires either {1}" \
129                           "".format(func.action, message)
130                 raise KeyError(message)
131             return func(*args, **kw)
132         message = ' OR '.join(['+'.join(g) for g in groups])
133         wrapper.__doc__ = "{0}\nEither: {1}".format(func.__doc__,
134                                                     message)
135         return add_attrs_from(func, to=wrapper)
136     return decorator
137 def dependent(field, *groups):
138     def decorator(func):
139         def wrapper(*args, **kw):
140             hasgroup = lambda group: all(key in kw for key in group)
141             if field in kw and not any(hasgroup(g) for g in groups):
142                 message = ' OR '.join(['+'.join(g) for g in groups])
143                 message = "{0} argument {1} requires {2}" \
144                           "".format(func.action, field, message)
145                 raise KeyError(message)
146             return func(*args, **kw)
147         message = ' OR '.join(['+'.join(g) for g in groups])
148         wrapper.__doc__ = "{0}\n{1} requires: {2}".format(func.__doc__,
149                                                           field,
150                                                           message)
151         return add_attrs_from(func, to=wrapper)
152     return decorator
153 def requires_some_of(*fields):
154     def decorator(func):
155         def requires(*args, **kw):
156             if not any(i in kw for i in fields):
157                 message = "{0} requires at least one of {1} argument(s)" \
158                           "".format(func.action, ', '.join(fields))
159                 raise KeyError(message)
160             return func(*args, **kw)
161         requires.__doc__ = "{0}\nSome Required: {1}".format(func.__doc__,
162                                                             ', '.join(fields))
163         return add_attrs_from(func, to=requires)
164     return decorator
165 def boolean_arguments(*fields):
166     def decorator(func):
167         def wrapper(*args, **kw):
168             for field in [f for f in fields if isinstance(kw.get(f), bool)]:
169                 kw[field] = str(kw[field]).lower()
170             return func(*args, **kw)
171         wrapper.__doc__ = "{0}\nBooleans: {1}".format(func.__doc__,
172                                                       ', '.join(fields))
173         return add_attrs_from(func, to=wrapper)
174     return decorator
175 def api_action(section, quota, restore, *api):
176     def decorator(func, quota=int(quota), restore=float(restore)):
177         version, accesskey, path = api_version_path[section]
178         action = ''.join(api or map(str.capitalize, func.__name__.split('_')))
179         def wrapper(self, *args, **kw):
180             kw.setdefault(accesskey, getattr(self, accesskey, None))
181             if kw[accesskey] is None:
182                 message = "{0} requires {1} argument. Set the " \
183                           "MWSConnection.{2} attribute?" \
184                           "".format(action, accesskey, accesskey)
185                 raise KeyError(message)
186             kw['Action'] = action
187             kw['Version'] = version
188             response = self._response_factory(action, connection=self)
189             request = dict(path=path, quota=quota, restore=restore)
190             return func(self, request, response, *args, **kw)
191         for attr in decorated_attrs:
192             setattr(wrapper, attr, locals().get(attr))
193         wrapper.__doc__ = "MWS {0}/{1} API call; quota={2} restore={3:.2f}\n" \
194                           "{4}".format(action, version, quota, restore,
195                                        func.__doc__)
196         api_call_map[action] = func.__name__
197         return wrapper
198     return decorator
199 class MWSConnection(AWSQueryConnection):
200     ResponseFactory = boto.mws.response.ResponseFactory
201     ResponseErrorFactory = boto.mws.exception.ResponseErrorFactory
202     def __init__(self, *args, **kw):
203         kw.setdefault('host', 'mws.amazonservices.com')
204         self._sandboxed = kw.pop('sandbox', False)
205         self.Merchant = kw.pop('Merchant', None) or kw.get('SellerId')
206         self.SellerId = kw.pop('SellerId', None) or self.Merchant
207         kw = self._setup_factories(kw.pop('factory_scopes', []), **kw)
208         super(MWSConnection, self).__init__(*args, **kw)
209     def _setup_factories(self, extrascopes, **kw):
210         for factory, (scope, Default) in {
211             'response_factory':
212                 (boto.mws.response, self.ResponseFactory),
213             'response_error_factory':
214                 (boto.mws.exception, self.ResponseErrorFactory),
215         }.items():
216             if factory in kw:
217                 setattr(self, '_' + factory, kw.pop(factory))
218             else:
219                 scopes = extrascopes + [scope]
220                 setattr(self, '_' + factory, Default(scopes=scopes))
221         return kw
222     def _sandboxify(self, path):
223         if not self._sandboxed:
224             return path
225         splat = path.split('/')
226         splat[-2] += '_Sandbox'
227         return '/'.join(splat)
228     def _required_auth_capability(self):
229         return ['mws']
230     def _post_request(self, request, params, parser, body='', headers=None):
231         headers = headers or {}
232         path = self._sandboxify(request['path'])
233         request = self.build_base_http_request('POST', path, None, data=body,
234                                                params=params, headers=headers,
235                                                host=self.host)
236         try:
237             response = self._mexe(request, override_num_retries=None)
238         except BotoServerError as bs:
239             raise self._response_error_factory(bs.status, bs.reason, bs.body)
240         body = response.read()
241         boto.log.debug(body)
242         if not body:
243             boto.log.error('Null body %s' % body)
244             raise self._response_error_factory(response.status,
245                                                response.reason, body)
246         if response.status != 200:
247             boto.log.error('%s %s' % (response.status, response.reason))
248             boto.log.error('%s' % body)
249             raise self._response_error_factory(response.status,
250                                                response.reason, body)
251         digest = response.getheader('Content-MD5')
252         if digest is not None:
253             assert content_md5(body) == digest
254         contenttype = response.getheader('Content-Type')
255         return self._parse_response(parser, contenttype, body)
256     def _parse_response(self, parser, contenttype, body):
257         if not contenttype.startswith('text/xml'):
258             return body
259         handler = XmlHandler(parser, self)
260         xml.sax.parseString(body, handler)
261         return parser
262     def method_for(self, name):
263         action = '_' in name and string.capwords(name, '_') or name
264         if action in api_call_map:
265             return getattr(self, api_call_map[action])
266         return None
267     def iter_call(self, call, *args, **kw):
268         method = self.method_for(call)
269         assert method, 'No call named "{0}"'.format(call)
270         return self.iter_response(method(*args, **kw))
271     def iter_response(self, response):
272         yield response
273         more = self.method_for(response._action + 'ByNextToken')
274         while more and response._result.HasNext == 'true':
275             response = more(NextToken=response._result.NextToken)
276             yield response
277     @requires(['FeedType'])
278     @boolean_arguments('PurgeAndReplace')
279     @http_body('FeedContent')
280     @structured_lists('MarketplaceIdList.Id')
281     @api_action('Feeds', 15, 120)
282     def submit_feed(self, request, response, headers=None, body='', **kw):
283         headers = headers or {}
284         return self._post_request(request, kw, response, body=body,
285                                   headers=headers)
286     @structured_lists('FeedSubmissionIdList.Id', 'FeedTypeList.Type',
287                       'FeedProcessingStatusList.Status')
288     @api_action('Feeds', 10, 45)
289     def get_feed_submission_list(self, request, response, **kw):
290         return self._post_request(request, kw, response)
291     @requires(['NextToken'])
292     @api_action('Feeds', 0, 0)
293     def get_feed_submission_list_by_next_token(self, request, response, **kw):
294         return self._post_request(request, kw, response)
295     @structured_lists('FeedTypeList.Type', 'FeedProcessingStatusList.Status')
296     @api_action('Feeds', 10, 45)
297     def get_feed_submission_count(self, request, response, **kw):
298         return self._post_request(request, kw, response)
299     @structured_lists('FeedSubmissionIdList.Id', 'FeedTypeList.Type')
300     @api_action('Feeds', 10, 45)
301     def cancel_feed_submissions(self, request, response, **kw):
302         return self._post_request(request, kw, response)
303     @requires(['FeedSubmissionId'])
304     @api_action('Feeds', 15, 60)
305     def get_feed_submission_result(self, request, response, **kw):
306         return self._post_request(request, kw, response)
307     def get_service_status(self, **kw):
308         sections = ', '.join(map(str.lower, api_version_path.keys()))
309         message = "Use {0}.get_(section)_service_status(), " \
310                   "where (section) is one of the following: " \
311                   "{1}".format(self.__class__.__name__, sections)
312         raise AttributeError(message)
313     @requires(['ReportType'])
314     @structured_lists('MarketplaceIdList.Id')
315     @boolean_arguments('ReportOptions=ShowSalesChannel')
316     @api_action('Reports', 15, 60)
317     def request_report(self, request, response, **kw):
318         return self._post_request(request, kw, response)
319     @structured_lists('ReportRequestIdList.Id', 'ReportTypeList.Type',
320                       'ReportProcessingStatusList.Status')
321     @api_action('Reports', 10, 45)
322     def get_report_request_list(self, request, response, **kw):
323         return self._post_request(request, kw, response)
324     @requires(['NextToken'])
325     @api_action('Reports', 0, 0)
326     def get_report_request_list_by_next_token(self, request, response, **kw):
327         return self._post_request(request, kw, response)
328     @structured_lists('ReportTypeList.Type',
329                       'ReportProcessingStatusList.Status')
330     @api_action('Reports', 10, 45)
331     def get_report_request_count(self, request, response, **kw):
332         return self._post_request(request, kw, response)
333     @api_action('Reports', 10, 45)
334     def cancel_report_requests(self, request, response, **kw):
335         return self._post_request(request, kw, response)
336     @boolean_arguments('Acknowledged')
337     @structured_lists('ReportRequestIdList.Id', 'ReportTypeList.Type')
338     @api_action('Reports', 10, 60)
339     def get_report_list(self, request, response, **kw):
340         return self._post_request(request, kw, response)
341     @requires(['NextToken'])
342     @api_action('Reports', 0, 0)
343     def get_report_list_by_next_token(self, request, response, **kw):
344         return self._post_request(request, kw, response)
345     @boolean_arguments('Acknowledged')
346     @structured_lists('ReportTypeList.Type')
347     @api_action('Reports', 10, 45)
348     def get_report_count(self, request, response, **kw):
349         return self._post_request(request, kw, response)
350     @requires(['ReportId'])
351     @api_action('Reports', 15, 60)
352     def get_report(self, request, response, **kw):
353         return self._post_request(request, kw, response)
354     @requires(['ReportType', 'Schedule'])
355     @api_action('Reports', 10, 45)
356     def manage_report_schedule(self, request, response, **kw):
357         return self._post_request(request, kw, response)
358     @structured_lists('ReportTypeList.Type')
359     @api_action('Reports', 10, 45)
360     def get_report_schedule_list(self, request, response, **kw):
361         return self._post_request(request, kw, response)
362     @requires(['NextToken'])
363     @api_action('Reports', 0, 0)
364     def get_report_schedule_list_by_next_token(self, request, response, **kw):
365         return self._post_request(request, kw, response)
366     @structured_lists('ReportTypeList.Type')
367     @api_action('Reports', 10, 45)
368     def get_report_schedule_count(self, request, response, **kw):
369         return self._post_request(request, kw, response)
370     @requires(['ReportIdList'])
371     @boolean_arguments('Acknowledged')
372     @structured_lists('ReportIdList.Id')
373     @api_action('Reports', 10, 45)
374     def update_report_acknowledgements(self, request, response, **kw):
375         return self._post_request(request, kw, response)
376     @requires(['ShipFromAddress', 'InboundShipmentPlanRequestItems'])
377     @structured_objects('ShipFromAddress', 'InboundShipmentPlanRequestItems')
378     @api_action('Inbound', 30, 0.5)
379     def create_inbound_shipment_plan(self, request, response, **kw):
380         return self._post_request(request, kw, response)
381     @requires(['ShipmentId', 'InboundShipmentHeader', 'InboundShipmentItems'])
382     @structured_objects('InboundShipmentHeader', 'InboundShipmentItems')
383     @api_action('Inbound', 30, 0.5)
384     def create_inbound_shipment(self, request, response, **kw):
385         return self._post_request(request, kw, response)
386     @requires(['ShipmentId'])
387     @structured_objects('InboundShipmentHeader', 'InboundShipmentItems')
388     @api_action('Inbound', 30, 0.5)
389     def update_inbound_shipment(self, request, response, **kw):
390         return self._post_request(request, kw, response)
391     @requires_some_of('ShipmentIdList', 'ShipmentStatusList')
392     @structured_lists('ShipmentIdList.Id', 'ShipmentStatusList.Status')
393     @api_action('Inbound', 30, 0.5)
394     def list_inbound_shipments(self, request, response, **kw):
395         return self._post_request(request, kw, response)
396     @requires(['NextToken'])
397     @api_action('Inbound', 30, 0.5)
398     def list_inbound_shipments_by_next_token(self, request, response, **kw):
399         return self._post_request(request, kw, response)
400     @requires(['ShipmentId'], ['LastUpdatedAfter', 'LastUpdatedBefore'])
401     @api_action('Inbound', 30, 0.5)
402     def list_inbound_shipment_items(self, request, response, **kw):
403         return self._post_request(request, kw, response)
404     @requires(['NextToken'])
405     @api_action('Inbound', 30, 0.5)
406     def list_inbound_shipment_items_by_next_token(self, request, response, **kw):
407         return self._post_request(request, kw, response)
408     @api_action('Inbound', 2, 300, 'GetServiceStatus')
409     def get_inbound_service_status(self, request, response, **kw):
410         return self._post_request(request, kw, response)
411     @requires(['SellerSkus'], ['QueryStartDateTime'])
412     @structured_lists('SellerSkus.member')
413     @api_action('Inventory', 30, 0.5)
414     def list_inventory_supply(self, request, response, **kw):
415         return self._post_request(request, kw, response)
416     @requires(['NextToken'])
417     @api_action('Inventory', 30, 0.5)
418     def list_inventory_supply_by_next_token(self, request, response, **kw):
419         return self._post_request(request, kw, response)
420     @api_action('Inventory', 2, 300, 'GetServiceStatus')
421     def get_inventory_service_status(self, request, response, **kw):
422         return self._post_request(request, kw, response)
423     @requires(['PackageNumber'])
424     @api_action('Outbound', 30, 0.5)
425     def get_package_tracking_details(self, request, response, **kw):
426         return self._post_request(request, kw, response)
427     @requires(['Address', 'Items'])
428     @structured_objects('Address', 'Items')
429     @api_action('Outbound', 30, 0.5)
430     def get_fulfillment_preview(self, request, response, **kw):
431         return self._post_request(request, kw, response)
432     @requires(['SellerFulfillmentOrderId', 'DisplayableOrderId',
433                'ShippingSpeedCategory',    'DisplayableOrderDateTime',
434                'DestinationAddress',       'DisplayableOrderComment',
435                'Items'])
436     @structured_objects('DestinationAddress', 'Items')
437     @api_action('Outbound', 30, 0.5)
438     def create_fulfillment_order(self, request, response, **kw):
439         return self._post_request(request, kw, response)
440     @requires(['SellerFulfillmentOrderId'])
441     @api_action('Outbound', 30, 0.5)
442     def get_fulfillment_order(self, request, response, **kw):
443         return self._post_request(request, kw, response)
444     @api_action('Outbound', 30, 0.5)
445     def list_all_fulfillment_orders(self, request, response, **kw):
446         return self._post_request(request, kw, response)
447     @requires(['NextToken'])
448     @api_action('Outbound', 30, 0.5)
449     def list_all_fulfillment_orders_by_next_token(self, request, response, **kw):
450         return self._post_request(request, kw, response)
451     @requires(['SellerFulfillmentOrderId'])
452     @api_action('Outbound', 30, 0.5)
453     def cancel_fulfillment_order(self, request, response, **kw):
454         return self._post_request(request, kw, response)
455     @api_action('Outbound', 2, 300, 'GetServiceStatus')
456     def get_outbound_service_status(self, request, response, **kw):
457         return self._post_request(request, kw, response)
458     @requires(['CreatedAfter'], ['LastUpdatedAfter'])
459     @requires(['MarketplaceId'])
460     @exclusive(['CreatedAfter'], ['LastUpdatedAfter'])
461     @dependent('CreatedBefore', ['CreatedAfter'])
462     @exclusive(['LastUpdatedAfter'], ['BuyerEmail'], ['SellerOrderId'])
463     @dependent('LastUpdatedBefore', ['LastUpdatedAfter'])
464     @exclusive(['CreatedAfter'], ['LastUpdatedBefore'])
465     @structured_objects('OrderTotal', 'ShippingAddress',
466                         'PaymentExecutionDetail')
467     @structured_lists('MarketplaceId.Id', 'OrderStatus.Status',
468                       'FulfillmentChannel.Channel', 'PaymentMethod.')
469     @api_action('Orders', 6, 60)
470     def list_orders(self, request, response, **kw):
471         toggle = set(('FulfillmentChannel.Channel.1',
472                       'OrderStatus.Status.1', 'PaymentMethod.1',
473                       'LastUpdatedAfter', 'LastUpdatedBefore'))
474         for do, dont in {
475             'BuyerEmail': toggle.union(['SellerOrderId']),
476             'SellerOrderId': toggle.union(['BuyerEmail']),
477         }.items():
478             if do in kw and any(i in dont for i in kw):
479                 message = "Don't include {0} when specifying " \
480                           "{1}".format(' or '.join(dont), do)
481                 raise AssertionError(message)
482         return self._post_request(request, kw, response)
483     @requires(['NextToken'])
484     @api_action('Orders', 6, 60)
485     def list_orders_by_next_token(self, request, response, **kw):
486         return self._post_request(request, kw, response)
487     @requires(['AmazonOrderId'])
488     @structured_lists('AmazonOrderId.Id')
489     @api_action('Orders', 6, 60)
490     def get_order(self, request, response, **kw):
491         return self._post_request(request, kw, response)
492     @requires(['AmazonOrderId'])
493     @api_action('Orders', 30, 2)
494     def list_order_items(self, request, response, **kw):
495         return self._post_request(request, kw, response)
496     @requires(['NextToken'])
497     @api_action('Orders', 30, 2)
498     def list_order_items_by_next_token(self, request, response, **kw):
499         return self._post_request(request, kw, response)
500     @api_action('Orders', 2, 300, 'GetServiceStatus')
501     def get_orders_service_status(self, request, response, **kw):
502         return self._post_request(request, kw, response)
503     @requires(['MarketplaceId', 'Query'])
504     @api_action('Products', 20, 20)
505     def list_matching_products(self, request, response, **kw):
506         return self._post_request(request, kw, response)
507     @requires(['MarketplaceId', 'ASINList'])
508     @structured_lists('ASINList.ASIN')
509     @api_action('Products', 20, 20)
510     def get_matching_product(self, request, response, **kw):
511         return self._post_request(request, kw, response)
512     @requires(['MarketplaceId', 'IdType', 'IdList'])
513     @structured_lists('IdList.Id')
514     @api_action('Products', 20, 20)
515     def get_matching_product_for_id(self, request, response, **kw):
516         return self._post_request(request, kw, response)
517     @requires(['MarketplaceId', 'SellerSKUList'])
518     @structured_lists('SellerSKUList.SellerSKU')
519     @api_action('Products', 20, 10, 'GetCompetitivePricingForSKU')
520     def get_competitive_pricing_for_sku(self, request, response, **kw):
521         return self._post_request(request, kw, response)
522     @requires(['MarketplaceId', 'ASINList'])
523     @structured_lists('ASINList.ASIN')
524     @api_action('Products', 20, 10, 'GetCompetitivePricingForASIN')
525     def get_competitive_pricing_for_asin(self, request, response, **kw):
526         return self._post_request(request, kw, response)
527     @requires(['MarketplaceId', 'SellerSKUList'])
528     @structured_lists('SellerSKUList.SellerSKU')
529     @api_action('Products', 20, 5, 'GetLowestOfferListingsForSKU')
530     def get_lowest_offer_listings_for_sku(self, request, response, **kw):
531         return self._post_request(request, kw, response)
532     @requires(['MarketplaceId', 'ASINList'])
533     @structured_lists('ASINList.ASIN')
534     @api_action('Products', 20, 5, 'GetLowestOfferListingsForASIN')
535     def get_lowest_offer_listings_for_asin(self, request, response, **kw):
536         return self._post_request(request, kw, response)
537     @requires(['MarketplaceId', 'SellerSKU'])
538     @api_action('Products', 20, 20, 'GetProductCategoriesForSKU')
539     def get_product_categories_for_sku(self, request, response, **kw):
540         return self._post_request(request, kw, response)
541     @requires(['MarketplaceId', 'ASIN'])
542     @api_action('Products', 20, 20, 'GetProductCategoriesForASIN')
543     def get_product_categories_for_asin(self, request, response, **kw):
544         return self._post_request(request, kw, response)
545     @api_action('Products', 2, 300, 'GetServiceStatus')
546     def get_products_service_status(self, request, response, **kw):
547         return self._post_request(request, kw, response)
548     @requires(['MarketplaceId', 'SellerSKUList'])
549     @structured_lists('SellerSKUList.SellerSKU')
550     @api_action('Products', 20, 10, 'GetMyPriceForSKU')
551     def get_my_price_for_sku(self, request, response, **kw):
552         return self._post_request(request, kw, response)
553     @requires(['MarketplaceId', 'ASINList'])
554     @structured_lists('ASINList.ASIN')
555     @api_action('Products', 20, 10, 'GetMyPriceForASIN')
556     def get_my_price_for_asin(self, request, response, **kw):
557         return self._post_request(request, kw, response)
558     @api_action('Sellers', 15, 60)
559     def list_marketplace_participations(self, request, response, **kw):
560         return self._post_request(request, kw, response)
561     @requires(['NextToken'])
562     @api_action('Sellers', 15, 60)
563     def list_marketplace_participations_by_next_token(self, request, response,
564                                                       **kw):
565         return self._post_request(request, kw, response)
566     @requires(['MarketplaceId'])
567     @api_action('Recommendations', 5, 2)
568     def get_last_updated_time_for_recommendations(self, request, response,
569                                                   **kw):
570         return self._post_request(request, kw, response)
571     @requires(['MarketplaceId'])
572     @structured_lists('CategoryQueryList.CategoryQuery')
573     @api_action('Recommendations', 5, 2)
574     def list_recommendations(self, request, response, **kw):
575         return self._post_request(request, kw, response)
576     @requires(['NextToken'])
577     @api_action('Recommendations', 5, 2)
578     def list_recommendations_by_next_token(self, request, response, **kw):
579         return self._post_request(request, kw, response)
580     @api_action('Recommendations', 2, 300, 'GetServiceStatus')
581     def get_recommendations_service_status(self, request, response, **kw):
582         return self._post_request(request, kw, response)
583     @api_action('CustomerInfo', 15, 12)
584     def list_customers(self, request, response, **kw):
585         return self._post_request(request, kw, response)
586     @requires(['NextToken'])
587     @api_action('CustomerInfo', 50, 3)
588     def list_customers_by_next_token(self, request, response, **kw):
589         return self._post_request(request, kw, response)
590     @requires(['CustomerIdList'])
591     @structured_lists('CustomerIdList.CustomerId')
592     @api_action('CustomerInfo', 15, 12)
593     def get_customers_for_customer_id(self, request, response, **kw):
594         return self._post_request(request, kw, response)
595     @api_action('CustomerInfo', 2, 300, 'GetServiceStatus')
596     def get_customerinfo_service_status(self, request, response, **kw):
597         return self._post_request(request, kw, response)
598     @requires(['DateRangeStart'])
599     @api_action('CartInfo', 15, 12)
600     def list_carts(self, request, response, **kw):
601         return self._post_request(request, kw, response)
602     @requires(['NextToken'])
603     @api_action('CartInfo', 50, 3)
604     def list_carts_by_next_token(self, request, response, **kw):
605         return self._post_request(request, kw, response)
606     @requires(['CartIdList'])
607     @structured_lists('CartIdList.CartId')
608     @api_action('CartInfo', 15, 12)
609     def get_carts(self, request, response, **kw):
610         return self._post_request(request, kw, response)
611     @api_action('CartInfo', 2, 300, 'GetServiceStatus')
612     def get_cartinfo_service_status(self, request, response, **kw):
613         return self._post_request(request, kw, response)
614     @requires(['MarketplaceId', 'Destination'])
615     @structured_objects('Destination', members=True)
616     @api_action('Subscriptions', 25, 0.5)
617     def register_destination(self, request, response, **kw):
618         return self._post_request(request, kw, response)
619     @requires(['MarketplaceId', 'Destination'])
620     @structured_objects('Destination', members=True)
621     @api_action('Subscriptions', 25, 0.5)
622     def deregister_destination(self, request, response, **kw):
623         return self._post_request(request, kw, response)
624     @requires(['MarketplaceId'])
625     @api_action('Subscriptions', 25, 0.5)
626     def list_registered_destinations(self, request, response, **kw):
627         return self._post_request(request, kw, response)
628     @requires(['MarketplaceId', 'Destination'])
629     @structured_objects('Destination', members=True)
630     @api_action('Subscriptions', 25, 0.5)
631     def send_test_notification_to_destination(self, request, response, **kw):
632         return self._post_request(request, kw, response)
633     @requires(['MarketplaceId', 'Subscription'])
634     @structured_objects('Subscription', members=True)
635     @api_action('Subscriptions', 25, 0.5)
636     def create_subscription(self, request, response, **kw):
637         return self._post_request(request, kw, response)
638     @requires(['MarketplaceId', 'NotificationType', 'Destination'])
639     @structured_objects('Destination', members=True)
640     @api_action('Subscriptions', 25, 0.5)
641     def get_subscription(self, request, response, **kw):
642         return self._post_request(request, kw, response)
643     @requires(['MarketplaceId', 'NotificationType', 'Destination'])
644     @structured_objects('Destination', members=True)
645     @api_action('Subscriptions', 25, 0.5)
646     def delete_subscription(self, request, response, **kw):
647         return self._post_request(request, kw, response)
648     @requires(['MarketplaceId'])
649     @api_action('Subscriptions', 25, 0.5)
650     def list_subscriptions(self, request, response, **kw):
651         return self._post_request(request, kw, response)
652     @requires(['MarketplaceId', 'Subscription'])
653     @structured_objects('Subscription', members=True)
654     @api_action('Subscriptions', 25, 0.5)
655     def update_subscription(self, request, response, **kw):
656         return self._post_request(request, kw, response)
657     @api_action('Subscriptions', 2, 300, 'GetServiceStatus')
658     def get_subscriptions_service_status(self, request, response, **kw):
659         return self._post_request(request, kw, response)
660     @requires(['AmazonOrderReferenceId', 'OrderReferenceAttributes'])
661     @structured_objects('OrderReferenceAttributes')
662     @api_action('OffAmazonPayments', 10, 1)
663     def set_order_reference_details(self, request, response, **kw):
664         return self._post_request(request, kw, response)
665     @requires(['AmazonOrderReferenceId'])
666     @api_action('OffAmazonPayments', 20, 2)
667     def get_order_reference_details(self, request, response, **kw):
668         return self._post_request(request, kw, response)
669     @requires(['AmazonOrderReferenceId'])
670     @api_action('OffAmazonPayments', 10, 1)
671     def confirm_order_reference(self, request, response, **kw):
672         return self._post_request(request, kw, response)
673     @requires(['AmazonOrderReferenceId'])
674     @api_action('OffAmazonPayments', 10, 1)
675     def cancel_order_reference(self, request, response, **kw):
676         return self._post_request(request, kw, response)
677     @requires(['AmazonOrderReferenceId'])
678     @api_action('OffAmazonPayments', 10, 1)
679     def close_order_reference(self, request, response, **kw):
680         return self._post_request(request, kw, response)
681     @requires(['AmazonOrderReferenceId', 'AuthorizationReferenceId',
682                'AuthorizationAmount'])
683     @structured_objects('AuthorizationAmount')
684     @api_action('OffAmazonPayments', 10, 1)
685     def authorize(self, request, response, **kw):
686         return self._post_request(request, kw, response)
687     @requires(['AmazonAuthorizationId'])
688     @api_action('OffAmazonPayments', 20, 2)
689     def get_authorization_details(self, request, response, **kw):
690         return self._post_request(request, kw, response)
691     @requires(['AmazonAuthorizationId', 'CaptureReferenceId', 'CaptureAmount'])
692     @structured_objects('CaptureAmount')
693     @api_action('OffAmazonPayments', 10, 1)
694     def capture(self, request, response, **kw):
695         return self._post_request(request, kw, response)
696     @requires(['AmazonCaptureId'])
697     @api_action('OffAmazonPayments', 20, 2)
698     def get_capture_details(self, request, response, **kw):
699         return self._post_request(request, kw, response)
700     @requires(['AmazonAuthorizationId'])
701     @api_action('OffAmazonPayments', 10, 1)
702     def close_authorization(self, request, response, **kw):
703         return self._post_request(request, kw, response)
704     @requires(['AmazonCaptureId', 'RefundReferenceId', 'RefundAmount'])
705     @structured_objects('RefundAmount')
706     @api_action('OffAmazonPayments', 10, 1)
707     def refund(self, request, response, **kw):
708         return self._post_request(request, kw, response)
709     @requires(['AmazonRefundId'])
710     @api_action('OffAmazonPayments', 20, 2)
711     def get_refund_details(self, request, response, **kw):
712         return self._post_request(request, kw, response)
713     @api_action('OffAmazonPayments', 2, 300, 'GetServiceStatus')
714     def get_offamazonpayments_service_status(self, request, response, **kw):
715         return self._post_request(request, kw, response)
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>test_layer2_domain.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 import boto.swf.layer2
2 from boto.swf.layer2 import Domain, ActivityType, WorkflowType, WorkflowExecution
3 from tests.unit import unittest
4 from mock import Mock
5 class TestDomain(unittest.TestCase):
6     def setUp(self):
7         boto.swf.layer2.Layer1 = Mock()
8         self.domain = Domain(name='test-domain', description='My test domain')
9         self.domain.aws_access_key_id = 'inheritable access key'
10         self.domain.aws_secret_access_key = 'inheritable secret key'
11         self.domain.region = 'test-region'
12     def test_domain_instantiation(self):
13         self.assertEquals('test-domain', self.domain.name)
14     def test_domain_list_activities(self):
15         self.domain._swf.list_activity_types.return_value <font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>= {
16             'typeInfos': [{'activityType': {'name': 'DeleteLocalFile',
17                              'version': '1.0'},
18             'creationDate': 1332853651.235,
19             'status': 'REGISTERED'},
20            {'activityType': {'name': 'DoUpdate', 'version': 'test'},
21             'creationDate': 1333463734.528,
22             'status': 'REGISTERED'},
23            {'activityType': {'name': 'GrayscaleTransform',
24                              'version': '1.0'},
25             'creationDate': 1332853651.18,
26             'status': 'REGISTERED'},
27            {'activityType': {'name': 'S3Download', 'version': '1.0'},
28             'creationDate': 1332853651.264,
29             'status': 'REGISTERED'},
30            {'activityType': {'name': 'S3Upload', 'version': '1.0'},
31             'creationDate': 1332853651.314,
32             'status': 'REGISTERED'},
33            {'activityType': {'name': 'SepiaTransform', 'version': '1.1'},
34             'creationDate': 1333373797.734,
35             'status': 'REGISTERED'}]} 
36         expected_names =</b></font> ('DeleteLocalFile', 'GrayscaleTransform', 'S3Download', 
37                           'S3Upload', 'SepiaTransform', 'DoUpdate')
38         activity_types = self.domain.activities()
39         self.assertEquals(6, len(activity_types))
40         for activity_type in activity_types:
41             self.assertIsInstance(activity_type, ActivityType)
42             self.assertTrue(activity_type.name in expected_names)
43             self.assertEquals(self.domain.region, activity_type.region)
44     def test_domain_list_workflows(self):
45         self.domain._swf.list_workflow_types.return_value = {
46             'typeInfos': [{'creationDate': 1332853651.136,
47                 'description': 'Image processing sample workflow type',
48                 'status': 'REGISTERED',
49                 'workflowType': {'name': 'ProcessFile', 'version': '1.0'}},
50                {'creationDate': 1333551719.89,
51                 'status': 'REGISTERED',
52                 'workflowType': {'name': 'test_workflow_name',
53                                  'version': 'v1'}}]}
54         expected_names = ('ProcessFile', 'test_workflow_name') 
55         workflow_types = self.domain.workflows()
56         self.assertEquals(2, len(workflow_types))
57         for workflow_type in workflow_types:
58             self.assertIsInstance(workflow_type, WorkflowType)
59             self.assertTrue(workflow_type.name in expected_names)
60             self.assertEquals(self.domain.aws_access_key_id, workflow_type.aws_access_key_id)
61             self.assertEquals(self.domain.aws_secret_access_key, workflow_type.aws_secret_access_key)
62             self.assertEquals(self.domain.name, workflow_type.domain)
63             self.assertEquals(self.domain.region, workflow_type.region)
64     def test_domain_list_executions(self):
65         self.domain._swf.list_open_workflow_executions.return_value = {
66             'executionInfos': [{'cancelRequested': False,
67                      'execution': {'runId': '12OeDTyoD27TDaafViz/QIlCHrYzspZmDgj0coIfjm868=',
68                                    'workflowId': 'ProcessFile-1.0-1378933928'},
69                      'executionStatus': 'OPEN',
70                      'startTimestamp': 1378933928.676,
71                      'workflowType': {'name': 'ProcessFile',
72                                       'version': '1.0'}},
73                     {'cancelRequested': False,
74                      'execution': {'runId': '12GwBkx4hH6t2yaIh8LYxy5HyCM6HcyhDKePJCg0/ciJk=',
75                                    'workflowId': 'ProcessFile-1.0-1378933927'},
76                      'executionStatus': 'OPEN',
77                      'startTimestamp': 1378933927.919,
78                      'workflowType': {'name': 'ProcessFile',
79                                       'version': '1.0'}},
80                     {'cancelRequested': False,
81                      'execution': {'runId': '12oRG3vEWrQ7oYBV+Bqi33Fht+ZRCYTt+tOdn5kLVcwKI=',
82                                    'workflowId': 'ProcessFile-1.0-1378933926'},
83                      'executionStatus': 'OPEN',
84                      'startTimestamp': 1378933927.04,
85                      'workflowType': {'name': 'ProcessFile',
86                                       'version': '1.0'}},
87                     {'cancelRequested': False,
88                      'execution': {'runId': '12qrdcpYmad2cjnqJcM4Njm3qrCGvmRFR1wwQEt+a2ako=',
89                                    'workflowId': 'ProcessFile-1.0-1378933874'},
90                      'executionStatus': 'OPEN',
91                      'startTimestamp': 1378933874.956,
92                      'workflowType': {'name': 'ProcessFile',
93                                       'version': '1.0'}}]}
94         executions = self.domain.executions()
95         self.assertEquals(4, len(executions))
96         for wf_execution in executions:
97             self.assertIsInstance(wf_execution, WorkflowExecution)
98             self.assertEquals(self.domain.aws_access_key_id, wf_execution.aws_access_key_id)
99             self.assertEquals(self.domain.aws_secret_access_key, wf_execution.aws_secret_access_key)
100             self.assertEquals(self.domain.name, wf_execution.domain)
101             self.assertEquals(self.domain.region, wf_execution.region)
102 if __name__ == '__main__':
103     unittest.main()
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
