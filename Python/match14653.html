<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for connection_15.py &amp; test_layer2_domain.py</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for connection_15.py &amp; test_layer2_domain.py
      </h3>
<h1 align="center">
        2.0%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>connection_15.py (1.1494253%)<th>test_layer2_domain.py (8.648648%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(34-57)<td><a href="#" name="0">(21-43)</a><td align="center"><font color="#ff0000">16</font>
</td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>connection_15.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 import xml.sax
2 import hashlib
3 import string
4 import collections
5 from boto.connection import AWSQueryConnection
6 from boto.exception import BotoServerError
7 import boto.mws.exception
8 import boto.mws.response
9 from boto.handler import XmlHandler
10 from boto.compat import filter, map, six, encodebytes
11 <a name="0"></a>
12 __all__ = ['MWSConnection']
13 api_version_path <font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>= {
14     'Feeds':             ('2009-01-01', 'Merchant', '/'),
15     'Reports':           ('2009-01-01', 'Merchant', '/'),
16     'Orders':            ('2013-09-01', 'SellerId', '/Orders/2013-09-01'),
17     'Products':          ('2011-10-01', 'SellerId', '/Products/2011-10-01'),
18     'Sellers':           ('2011-07-01', 'SellerId', '/Sellers/2011-07-01'),
19     'Inbound':           ('2010-10-01', 'SellerId',
20                           '/FulfillmentInboundShipment/2010-10-01'),
21     'Outbound':          ('2010-10-01', 'SellerId',
22                           '/FulfillmentOutboundShipment/2010-10-01'),
23     'Inventory':         ('2010-10-01', 'SellerId',
24                           '/FulfillmentInventory/2010-10-01'),
25     'Recommendations':   ('2013-04-01', 'SellerId',
26                           '/Recommendations/2013-04-01'),
27     'CustomerInfo':      ('2014-03-01', 'SellerId',
28                           '/CustomerInformation/2014-03-01'),
29     'CartInfo':          ('2014-03-01', 'SellerId',
30                           '/CartInformation/2014-03-01'),
31     'Subscriptions':     ('2013-07-01', 'SellerId',
32                           '/Subscriptions/2013-07-01'),
33     'OffAmazonPayments': ('2013-01-01', 'SellerId',
34                           '/OffAmazonPayments/2013-01-01'),
35 }
36 content_md5 =</b></font> lambda c: encodebytes(hashlib.md5(c).digest()).strip()
37 decorated_attrs = ('action', 'response', 'section',
38                    'quota', 'restore', 'version')
39 api_call_map = {}
40 def add_attrs_from(func, to):
41     for attr in decorated_attrs:
42         setattr(to, attr, getattr(func, attr, None))
43     to.__wrapped__ = func
44     return to
45 def structured_lists(*fields):
46     def decorator(func):
47         def wrapper(self, *args, **kw):
48             for key, acc in [f.split('.') for f in fields]:
49                 if key in kw:
50                     newkey = key + '.' + acc + (acc and '.' or '')
51                     for i in range(len(kw[key])):
52                         kw[newkey + str(i + 1)] = kw[key][i]
53                     kw.pop(key)
54             return func(self, *args, **kw)
55         wrapper.__doc__ = "{0}\nLists: {1}".format(func.__doc__,
56                                                    ', '.join(fields))
57         return add_attrs_from(func, to=wrapper)
58     return decorator
59 def http_body(field):
60     def decorator(func):
61         def wrapper(*args, **kw):
62             if any([f not in kw for f in (field, 'content_type')]):
63                 message = "{0} requires {1} and content_type arguments for " \
64                           "building HTTP body".format(func.action, field)
65                 raise KeyError(message)
66             kw['body'] = kw.pop(field)
67             kw['headers'] = {
68                 'Content-Type': kw.pop('content_type'),
69                 'Content-MD5':  content_md5(kw['body']),
70             }
71             return func(*args, **kw)
72         wrapper.__doc__ = "{0}\nRequired HTTP Body: " \
73                           "{1}".format(func.__doc__, field)
74         return add_attrs_from(func, to=wrapper)
75     return decorator
76 def destructure_object(value, into, prefix, members=False):
77     if isinstance(value, boto.mws.response.ResponseElement):
78         destructure_object(value.__dict__, into, prefix, members=members)
79     elif isinstance(value, collections.Mapping):
80         for name in value:
81             if name.startswith('_'):
82                 continue
83             destructure_object(value[name], into, prefix + '.' + name,
84                                members=members)
85     elif isinstance(value, six.string_types):
86         into[prefix] = value
87     elif isinstance(value, collections.Iterable):
88         for index, element in enumerate(value):
89             suffix = (members and '.member.' or '.') + str(index + 1)
90             destructure_object(element, into, prefix + suffix,
91                                members=members)
92     elif isinstance(value, bool):
93         into[prefix] = str(value).lower()
94     else:
95         into[prefix] = value
96 def structured_objects(*fields, **kwargs):
97     def decorator(func):
98         def wrapper(*args, **kw):
99             members = kwargs.get('members', False)
100             for field in filter(lambda i: i in kw, fields):
101                 destructure_object(kw.pop(field), kw, field, members=members)
102             return func(*args, **kw)
103         wrapper.__doc__ = "{0}\nElement|Iter|Map: {1}\n" \
104                           "(ResponseElement or anything iterable/dict-like)" \
105                           .format(func.__doc__, ', '.join(fields))
106         return add_attrs_from(func, to=wrapper)
107     return decorator
108 def requires(*groups):
109     def decorator(func):
110         def requires(*args, **kw):
111             hasgroup = lambda group: all(key in kw for key in group)
112             if 1 != len(list(filter(hasgroup, groups))):
113                 message = ' OR '.join(['+'.join(g) for g in groups])
114                 message = "{0} requires {1} argument(s)" \
115                           "".format(func.action, message)
116                 raise KeyError(message)
117             return func(*args, **kw)
118         message = ' OR '.join(['+'.join(g) for g in groups])
119         requires.__doc__ = "{0}\nRequired: {1}".format(func.__doc__,
120                                                        message)
121         return add_attrs_from(func, to=requires)
122     return decorator
123 def exclusive(*groups):
124     def decorator(func):
125         def wrapper(*args, **kw):
126             hasgroup = lambda group: all(key in kw for key in group)
127             if len(list(filter(hasgroup, groups))) not in (0, 1):
128                 message = ' OR '.join(['+'.join(g) for g in groups])
129                 message = "{0} requires either {1}" \
130                           "".format(func.action, message)
131                 raise KeyError(message)
132             return func(*args, **kw)
133         message = ' OR '.join(['+'.join(g) for g in groups])
134         wrapper.__doc__ = "{0}\nEither: {1}".format(func.__doc__,
135                                                     message)
136         return add_attrs_from(func, to=wrapper)
137     return decorator
138 def dependent(field, *groups):
139     def decorator(func):
140         def wrapper(*args, **kw):
141             hasgroup = lambda group: all(key in kw for key in group)
142             if field in kw and not any(hasgroup(g) for g in groups):
143                 message = ' OR '.join(['+'.join(g) for g in groups])
144                 message = "{0} argument {1} requires {2}" \
145                           "".format(func.action, field, message)
146                 raise KeyError(message)
147             return func(*args, **kw)
148         message = ' OR '.join(['+'.join(g) for g in groups])
149         wrapper.__doc__ = "{0}\n{1} requires: {2}".format(func.__doc__,
150                                                           field,
151                                                           message)
152         return add_attrs_from(func, to=wrapper)
153     return decorator
154 def requires_some_of(*fields):
155     def decorator(func):
156         def requires(*args, **kw):
157             if not any(i in kw for i in fields):
158                 message = "{0} requires at least one of {1} argument(s)" \
159                           "".format(func.action, ', '.join(fields))
160                 raise KeyError(message)
161             return func(*args, **kw)
162         requires.__doc__ = "{0}\nSome Required: {1}".format(func.__doc__,
163                                                             ', '.join(fields))
164         return add_attrs_from(func, to=requires)
165     return decorator
166 def boolean_arguments(*fields):
167     def decorator(func):
168         def wrapper(*args, **kw):
169             for field in [f for f in fields if isinstance(kw.get(f), bool)]:
170                 kw[field] = str(kw[field]).lower()
171             return func(*args, **kw)
172         wrapper.__doc__ = "{0}\nBooleans: {1}".format(func.__doc__,
173                                                       ', '.join(fields))
174         return add_attrs_from(func, to=wrapper)
175     return decorator
176 def api_action(section, quota, restore, *api):
177     def decorator(func, quota=int(quota), restore=float(restore)):
178         version, accesskey, path = api_version_path[section]
179         action = ''.join(api or map(str.capitalize, func.__name__.split('_')))
180         def wrapper(self, *args, **kw):
181             kw.setdefault(accesskey, getattr(self, accesskey, None))
182             if kw[accesskey] is None:
183                 message = "{0} requires {1} argument. Set the " \
184                           "MWSConnection.{2} attribute?" \
185                           "".format(action, accesskey, accesskey)
186                 raise KeyError(message)
187             kw['Action'] = action
188             kw['Version'] = version
189             response = self._response_factory(action, connection=self)
190             request = dict(path=path, quota=quota, restore=restore)
191             return func(self, request, response, *args, **kw)
192         for attr in decorated_attrs:
193             setattr(wrapper, attr, locals().get(attr))
194         wrapper.__doc__ = "MWS {0}/{1} API call; quota={2} restore={3:.2f}\n" \
195                           "{4}".format(action, version, quota, restore,
196                                        func.__doc__)
197         api_call_map[action] = func.__name__
198         return wrapper
199     return decorator
200 class MWSConnection(AWSQueryConnection):
201     ResponseFactory = boto.mws.response.ResponseFactory
202     ResponseErrorFactory = boto.mws.exception.ResponseErrorFactory
203     def __init__(self, *args, **kw):
204         kw.setdefault('host', 'mws.amazonservices.com')
205         self._sandboxed = kw.pop('sandbox', False)
206         self.Merchant = kw.pop('Merchant', None) or kw.get('SellerId')
207         self.SellerId = kw.pop('SellerId', None) or self.Merchant
208         kw = self._setup_factories(kw.pop('factory_scopes', []), **kw)
209         super(MWSConnection, self).__init__(*args, **kw)
210     def _setup_factories(self, extrascopes, **kw):
211         for factory, (scope, Default) in {
212             'response_factory':
213                 (boto.mws.response, self.ResponseFactory),
214             'response_error_factory':
215                 (boto.mws.exception, self.ResponseErrorFactory),
216         }.items():
217             if factory in kw:
218                 setattr(self, '_' + factory, kw.pop(factory))
219             else:
220                 scopes = extrascopes + [scope]
221                 setattr(self, '_' + factory, Default(scopes=scopes))
222         return kw
223     def _sandboxify(self, path):
224         if not self._sandboxed:
225             return path
226         splat = path.split('/')
227         splat[-2] += '_Sandbox'
228         return '/'.join(splat)
229     def _required_auth_capability(self):
230         return ['mws']
231     def _post_request(self, request, params, parser, body='', headers=None):
232         headers = headers or {}
233         path = self._sandboxify(request['path'])
234         request = self.build_base_http_request('POST', path, None, data=body,
235                                                params=params, headers=headers,
236                                                host=self.host)
237         try:
238             response = self._mexe(request, override_num_retries=None)
239         except BotoServerError as bs:
240             raise self._response_error_factory(bs.status, bs.reason, bs.body)
241         body = response.read()
242         boto.log.debug(body)
243         if not body:
244             boto.log.error('Null body %s' % body)
245             raise self._response_error_factory(response.status,
246                                                response.reason, body)
247         if response.status != 200:
248             boto.log.error('%s %s' % (response.status, response.reason))
249             boto.log.error('%s' % body)
250             raise self._response_error_factory(response.status,
251                                                response.reason, body)
252         digest = response.getheader('Content-MD5')
253         if digest is not None:
254             assert content_md5(body) == digest
255         contenttype = response.getheader('Content-Type')
256         return self._parse_response(parser, contenttype, body)
257     def _parse_response(self, parser, contenttype, body):
258         if not contenttype.startswith('text/xml'):
259             return body
260         handler = XmlHandler(parser, self)
261         xml.sax.parseString(body, handler)
262         return parser
263     def method_for(self, name):
264         action = '_' in name and string.capwords(name, '_') or name
265         if action in api_call_map:
266             return getattr(self, api_call_map[action])
267         return None
268     def iter_call(self, call, *args, **kw):
269         method = self.method_for(call)
270         assert method, 'No call named "{0}"'.format(call)
271         return self.iter_response(method(*args, **kw))
272     def iter_response(self, response):
273         yield response
274         more = self.method_for(response._action + 'ByNextToken')
275         while more and response._result.HasNext == 'true':
276             response = more(NextToken=response._result.NextToken)
277             yield response
278     @requires(['FeedType'])
279     @boolean_arguments('PurgeAndReplace')
280     @http_body('FeedContent')
281     @structured_lists('MarketplaceIdList.Id')
282     @api_action('Feeds', 15, 120)
283     def submit_feed(self, request, response, headers=None, body='', **kw):
284         headers = headers or {}
285         return self._post_request(request, kw, response, body=body,
286                                   headers=headers)
287     @structured_lists('FeedSubmissionIdList.Id', 'FeedTypeList.Type',
288                       'FeedProcessingStatusList.Status')
289     @api_action('Feeds', 10, 45)
290     def get_feed_submission_list(self, request, response, **kw):
291         return self._post_request(request, kw, response)
292     @requires(['NextToken'])
293     @api_action('Feeds', 0, 0)
294     def get_feed_submission_list_by_next_token(self, request, response, **kw):
295         return self._post_request(request, kw, response)
296     @structured_lists('FeedTypeList.Type', 'FeedProcessingStatusList.Status')
297     @api_action('Feeds', 10, 45)
298     def get_feed_submission_count(self, request, response, **kw):
299         return self._post_request(request, kw, response)
300     @structured_lists('FeedSubmissionIdList.Id', 'FeedTypeList.Type')
301     @api_action('Feeds', 10, 45)
302     def cancel_feed_submissions(self, request, response, **kw):
303         return self._post_request(request, kw, response)
304     @requires(['FeedSubmissionId'])
305     @api_action('Feeds', 15, 60)
306     def get_feed_submission_result(self, request, response, **kw):
307         return self._post_request(request, kw, response)
308     def get_service_status(self, **kw):
309         sections = ', '.join(map(str.lower, api_version_path.keys()))
310         message = "Use {0}.get_(section)_service_status(), " \
311                   "where (section) is one of the following: " \
312                   "{1}".format(self.__class__.__name__, sections)
313         raise AttributeError(message)
314     @requires(['ReportType'])
315     @structured_lists('MarketplaceIdList.Id')
316     @boolean_arguments('ReportOptions=ShowSalesChannel')
317     @api_action('Reports', 15, 60)
318     def request_report(self, request, response, **kw):
319         return self._post_request(request, kw, response)
320     @structured_lists('ReportRequestIdList.Id', 'ReportTypeList.Type',
321                       'ReportProcessingStatusList.Status')
322     @api_action('Reports', 10, 45)
323     def get_report_request_list(self, request, response, **kw):
324         return self._post_request(request, kw, response)
325     @requires(['NextToken'])
326     @api_action('Reports', 0, 0)
327     def get_report_request_list_by_next_token(self, request, response, **kw):
328         return self._post_request(request, kw, response)
329     @structured_lists('ReportTypeList.Type',
330                       'ReportProcessingStatusList.Status')
331     @api_action('Reports', 10, 45)
332     def get_report_request_count(self, request, response, **kw):
333         return self._post_request(request, kw, response)
334     @api_action('Reports', 10, 45)
335     def cancel_report_requests(self, request, response, **kw):
336         return self._post_request(request, kw, response)
337     @boolean_arguments('Acknowledged')
338     @structured_lists('ReportRequestIdList.Id', 'ReportTypeList.Type')
339     @api_action('Reports', 10, 60)
340     def get_report_list(self, request, response, **kw):
341         return self._post_request(request, kw, response)
342     @requires(['NextToken'])
343     @api_action('Reports', 0, 0)
344     def get_report_list_by_next_token(self, request, response, **kw):
345         return self._post_request(request, kw, response)
346     @boolean_arguments('Acknowledged')
347     @structured_lists('ReportTypeList.Type')
348     @api_action('Reports', 10, 45)
349     def get_report_count(self, request, response, **kw):
350         return self._post_request(request, kw, response)
351     @requires(['ReportId'])
352     @api_action('Reports', 15, 60)
353     def get_report(self, request, response, **kw):
354         return self._post_request(request, kw, response)
355     @requires(['ReportType', 'Schedule'])
356     @api_action('Reports', 10, 45)
357     def manage_report_schedule(self, request, response, **kw):
358         return self._post_request(request, kw, response)
359     @structured_lists('ReportTypeList.Type')
360     @api_action('Reports', 10, 45)
361     def get_report_schedule_list(self, request, response, **kw):
362         return self._post_request(request, kw, response)
363     @requires(['NextToken'])
364     @api_action('Reports', 0, 0)
365     def get_report_schedule_list_by_next_token(self, request, response, **kw):
366         return self._post_request(request, kw, response)
367     @structured_lists('ReportTypeList.Type')
368     @api_action('Reports', 10, 45)
369     def get_report_schedule_count(self, request, response, **kw):
370         return self._post_request(request, kw, response)
371     @requires(['ReportIdList'])
372     @boolean_arguments('Acknowledged')
373     @structured_lists('ReportIdList.Id')
374     @api_action('Reports', 10, 45)
375     def update_report_acknowledgements(self, request, response, **kw):
376         return self._post_request(request, kw, response)
377     @requires(['ShipFromAddress', 'InboundShipmentPlanRequestItems'])
378     @structured_objects('ShipFromAddress', 'InboundShipmentPlanRequestItems')
379     @api_action('Inbound', 30, 0.5)
380     def create_inbound_shipment_plan(self, request, response, **kw):
381         return self._post_request(request, kw, response)
382     @requires(['ShipmentId', 'InboundShipmentHeader', 'InboundShipmentItems'])
383     @structured_objects('InboundShipmentHeader', 'InboundShipmentItems')
384     @api_action('Inbound', 30, 0.5)
385     def create_inbound_shipment(self, request, response, **kw):
386         return self._post_request(request, kw, response)
387     @requires(['ShipmentId'])
388     @structured_objects('InboundShipmentHeader', 'InboundShipmentItems')
389     @api_action('Inbound', 30, 0.5)
390     def update_inbound_shipment(self, request, response, **kw):
391         return self._post_request(request, kw, response)
392     @requires_some_of('ShipmentIdList', 'ShipmentStatusList')
393     @structured_lists('ShipmentIdList.Id', 'ShipmentStatusList.Status')
394     @api_action('Inbound', 30, 0.5)
395     def list_inbound_shipments(self, request, response, **kw):
396         return self._post_request(request, kw, response)
397     @requires(['NextToken'])
398     @api_action('Inbound', 30, 0.5)
399     def list_inbound_shipments_by_next_token(self, request, response, **kw):
400         return self._post_request(request, kw, response)
401     @requires(['ShipmentId'], ['LastUpdatedAfter', 'LastUpdatedBefore'])
402     @api_action('Inbound', 30, 0.5)
403     def list_inbound_shipment_items(self, request, response, **kw):
404         return self._post_request(request, kw, response)
405     @requires(['NextToken'])
406     @api_action('Inbound', 30, 0.5)
407     def list_inbound_shipment_items_by_next_token(self, request, response, **kw):
408         return self._post_request(request, kw, response)
409     @api_action('Inbound', 2, 300, 'GetServiceStatus')
410     def get_inbound_service_status(self, request, response, **kw):
411         return self._post_request(request, kw, response)
412     @requires(['SellerSkus'], ['QueryStartDateTime'])
413     @structured_lists('SellerSkus.member')
414     @api_action('Inventory', 30, 0.5)
415     def list_inventory_supply(self, request, response, **kw):
416         return self._post_request(request, kw, response)
417     @requires(['NextToken'])
418     @api_action('Inventory', 30, 0.5)
419     def list_inventory_supply_by_next_token(self, request, response, **kw):
420         return self._post_request(request, kw, response)
421     @api_action('Inventory', 2, 300, 'GetServiceStatus')
422     def get_inventory_service_status(self, request, response, **kw):
423         return self._post_request(request, kw, response)
424     @requires(['PackageNumber'])
425     @api_action('Outbound', 30, 0.5)
426     def get_package_tracking_details(self, request, response, **kw):
427         return self._post_request(request, kw, response)
428     @requires(['Address', 'Items'])
429     @structured_objects('Address', 'Items')
430     @api_action('Outbound', 30, 0.5)
431     def get_fulfillment_preview(self, request, response, **kw):
432         return self._post_request(request, kw, response)
433     @requires(['SellerFulfillmentOrderId', 'DisplayableOrderId',
434                'ShippingSpeedCategory',    'DisplayableOrderDateTime',
435                'DestinationAddress',       'DisplayableOrderComment',
436                'Items'])
437     @structured_objects('DestinationAddress', 'Items')
438     @api_action('Outbound', 30, 0.5)
439     def create_fulfillment_order(self, request, response, **kw):
440         return self._post_request(request, kw, response)
441     @requires(['SellerFulfillmentOrderId'])
442     @api_action('Outbound', 30, 0.5)
443     def get_fulfillment_order(self, request, response, **kw):
444         return self._post_request(request, kw, response)
445     @api_action('Outbound', 30, 0.5)
446     def list_all_fulfillment_orders(self, request, response, **kw):
447         return self._post_request(request, kw, response)
448     @requires(['NextToken'])
449     @api_action('Outbound', 30, 0.5)
450     def list_all_fulfillment_orders_by_next_token(self, request, response, **kw):
451         return self._post_request(request, kw, response)
452     @requires(['SellerFulfillmentOrderId'])
453     @api_action('Outbound', 30, 0.5)
454     def cancel_fulfillment_order(self, request, response, **kw):
455         return self._post_request(request, kw, response)
456     @api_action('Outbound', 2, 300, 'GetServiceStatus')
457     def get_outbound_service_status(self, request, response, **kw):
458         return self._post_request(request, kw, response)
459     @requires(['CreatedAfter'], ['LastUpdatedAfter'])
460     @requires(['MarketplaceId'])
461     @exclusive(['CreatedAfter'], ['LastUpdatedAfter'])
462     @dependent('CreatedBefore', ['CreatedAfter'])
463     @exclusive(['LastUpdatedAfter'], ['BuyerEmail'], ['SellerOrderId'])
464     @dependent('LastUpdatedBefore', ['LastUpdatedAfter'])
465     @exclusive(['CreatedAfter'], ['LastUpdatedBefore'])
466     @structured_objects('OrderTotal', 'ShippingAddress',
467                         'PaymentExecutionDetail')
468     @structured_lists('MarketplaceId.Id', 'OrderStatus.Status',
469                       'FulfillmentChannel.Channel', 'PaymentMethod.')
470     @api_action('Orders', 6, 60)
471     def list_orders(self, request, response, **kw):
472         toggle = set(('FulfillmentChannel.Channel.1',
473                       'OrderStatus.Status.1', 'PaymentMethod.1',
474                       'LastUpdatedAfter', 'LastUpdatedBefore'))
475         for do, dont in {
476             'BuyerEmail': toggle.union(['SellerOrderId']),
477             'SellerOrderId': toggle.union(['BuyerEmail']),
478         }.items():
479             if do in kw and any(i in dont for i in kw):
480                 message = "Don't include {0} when specifying " \
481                           "{1}".format(' or '.join(dont), do)
482                 raise AssertionError(message)
483         return self._post_request(request, kw, response)
484     @requires(['NextToken'])
485     @api_action('Orders', 6, 60)
486     def list_orders_by_next_token(self, request, response, **kw):
487         return self._post_request(request, kw, response)
488     @requires(['AmazonOrderId'])
489     @structured_lists('AmazonOrderId.Id')
490     @api_action('Orders', 6, 60)
491     def get_order(self, request, response, **kw):
492         return self._post_request(request, kw, response)
493     @requires(['AmazonOrderId'])
494     @api_action('Orders', 30, 2)
495     def list_order_items(self, request, response, **kw):
496         return self._post_request(request, kw, response)
497     @requires(['NextToken'])
498     @api_action('Orders', 30, 2)
499     def list_order_items_by_next_token(self, request, response, **kw):
500         return self._post_request(request, kw, response)
501     @api_action('Orders', 2, 300, 'GetServiceStatus')
502     def get_orders_service_status(self, request, response, **kw):
503         return self._post_request(request, kw, response)
504     @requires(['MarketplaceId', 'Query'])
505     @api_action('Products', 20, 20)
506     def list_matching_products(self, request, response, **kw):
507         return self._post_request(request, kw, response)
508     @requires(['MarketplaceId', 'ASINList'])
509     @structured_lists('ASINList.ASIN')
510     @api_action('Products', 20, 20)
511     def get_matching_product(self, request, response, **kw):
512         return self._post_request(request, kw, response)
513     @requires(['MarketplaceId', 'IdType', 'IdList'])
514     @structured_lists('IdList.Id')
515     @api_action('Products', 20, 20)
516     def get_matching_product_for_id(self, request, response, **kw):
517         return self._post_request(request, kw, response)
518     @requires(['MarketplaceId', 'SellerSKUList'])
519     @structured_lists('SellerSKUList.SellerSKU')
520     @api_action('Products', 20, 10, 'GetCompetitivePricingForSKU')
521     def get_competitive_pricing_for_sku(self, request, response, **kw):
522         return self._post_request(request, kw, response)
523     @requires(['MarketplaceId', 'ASINList'])
524     @structured_lists('ASINList.ASIN')
525     @api_action('Products', 20, 10, 'GetCompetitivePricingForASIN')
526     def get_competitive_pricing_for_asin(self, request, response, **kw):
527         return self._post_request(request, kw, response)
528     @requires(['MarketplaceId', 'SellerSKUList'])
529     @structured_lists('SellerSKUList.SellerSKU')
530     @api_action('Products', 20, 5, 'GetLowestOfferListingsForSKU')
531     def get_lowest_offer_listings_for_sku(self, request, response, **kw):
532         return self._post_request(request, kw, response)
533     @requires(['MarketplaceId', 'ASINList'])
534     @structured_lists('ASINList.ASIN')
535     @api_action('Products', 20, 5, 'GetLowestOfferListingsForASIN')
536     def get_lowest_offer_listings_for_asin(self, request, response, **kw):
537         return self._post_request(request, kw, response)
538     @requires(['MarketplaceId', 'SellerSKU'])
539     @api_action('Products', 20, 20, 'GetProductCategoriesForSKU')
540     def get_product_categories_for_sku(self, request, response, **kw):
541         return self._post_request(request, kw, response)
542     @requires(['MarketplaceId', 'ASIN'])
543     @api_action('Products', 20, 20, 'GetProductCategoriesForASIN')
544     def get_product_categories_for_asin(self, request, response, **kw):
545         return self._post_request(request, kw, response)
546     @api_action('Products', 2, 300, 'GetServiceStatus')
547     def get_products_service_status(self, request, response, **kw):
548         return self._post_request(request, kw, response)
549     @requires(['MarketplaceId', 'SellerSKUList'])
550     @structured_lists('SellerSKUList.SellerSKU')
551     @api_action('Products', 20, 10, 'GetMyPriceForSKU')
552     def get_my_price_for_sku(self, request, response, **kw):
553         return self._post_request(request, kw, response)
554     @requires(['MarketplaceId', 'ASINList'])
555     @structured_lists('ASINList.ASIN')
556     @api_action('Products', 20, 10, 'GetMyPriceForASIN')
557     def get_my_price_for_asin(self, request, response, **kw):
558         return self._post_request(request, kw, response)
559     @api_action('Sellers', 15, 60)
560     def list_marketplace_participations(self, request, response, **kw):
561         return self._post_request(request, kw, response)
562     @requires(['NextToken'])
563     @api_action('Sellers', 15, 60)
564     def list_marketplace_participations_by_next_token(self, request, response,
565                                                       **kw):
566         return self._post_request(request, kw, response)
567     @requires(['MarketplaceId'])
568     @api_action('Recommendations', 5, 2)
569     def get_last_updated_time_for_recommendations(self, request, response,
570                                                   **kw):
571         return self._post_request(request, kw, response)
572     @requires(['MarketplaceId'])
573     @structured_lists('CategoryQueryList.CategoryQuery')
574     @api_action('Recommendations', 5, 2)
575     def list_recommendations(self, request, response, **kw):
576         return self._post_request(request, kw, response)
577     @requires(['NextToken'])
578     @api_action('Recommendations', 5, 2)
579     def list_recommendations_by_next_token(self, request, response, **kw):
580         return self._post_request(request, kw, response)
581     @api_action('Recommendations', 2, 300, 'GetServiceStatus')
582     def get_recommendations_service_status(self, request, response, **kw):
583         return self._post_request(request, kw, response)
584     @api_action('CustomerInfo', 15, 12)
585     def list_customers(self, request, response, **kw):
586         return self._post_request(request, kw, response)
587     @requires(['NextToken'])
588     @api_action('CustomerInfo', 50, 3)
589     def list_customers_by_next_token(self, request, response, **kw):
590         return self._post_request(request, kw, response)
591     @requires(['CustomerIdList'])
592     @structured_lists('CustomerIdList.CustomerId')
593     @api_action('CustomerInfo', 15, 12)
594     def get_customers_for_customer_id(self, request, response, **kw):
595         return self._post_request(request, kw, response)
596     @api_action('CustomerInfo', 2, 300, 'GetServiceStatus')
597     def get_customerinfo_service_status(self, request, response, **kw):
598         return self._post_request(request, kw, response)
599     @requires(['DateRangeStart'])
600     @api_action('CartInfo', 15, 12)
601     def list_carts(self, request, response, **kw):
602         return self._post_request(request, kw, response)
603     @requires(['NextToken'])
604     @api_action('CartInfo', 50, 3)
605     def list_carts_by_next_token(self, request, response, **kw):
606         return self._post_request(request, kw, response)
607     @requires(['CartIdList'])
608     @structured_lists('CartIdList.CartId')
609     @api_action('CartInfo', 15, 12)
610     def get_carts(self, request, response, **kw):
611         return self._post_request(request, kw, response)
612     @api_action('CartInfo', 2, 300, 'GetServiceStatus')
613     def get_cartinfo_service_status(self, request, response, **kw):
614         return self._post_request(request, kw, response)
615     @requires(['MarketplaceId', 'Destination'])
616     @structured_objects('Destination', members=True)
617     @api_action('Subscriptions', 25, 0.5)
618     def register_destination(self, request, response, **kw):
619         return self._post_request(request, kw, response)
620     @requires(['MarketplaceId', 'Destination'])
621     @structured_objects('Destination', members=True)
622     @api_action('Subscriptions', 25, 0.5)
623     def deregister_destination(self, request, response, **kw):
624         return self._post_request(request, kw, response)
625     @requires(['MarketplaceId'])
626     @api_action('Subscriptions', 25, 0.5)
627     def list_registered_destinations(self, request, response, **kw):
628         return self._post_request(request, kw, response)
629     @requires(['MarketplaceId', 'Destination'])
630     @structured_objects('Destination', members=True)
631     @api_action('Subscriptions', 25, 0.5)
632     def send_test_notification_to_destination(self, request, response, **kw):
633         return self._post_request(request, kw, response)
634     @requires(['MarketplaceId', 'Subscription'])
635     @structured_objects('Subscription', members=True)
636     @api_action('Subscriptions', 25, 0.5)
637     def create_subscription(self, request, response, **kw):
638         return self._post_request(request, kw, response)
639     @requires(['MarketplaceId', 'NotificationType', 'Destination'])
640     @structured_objects('Destination', members=True)
641     @api_action('Subscriptions', 25, 0.5)
642     def get_subscription(self, request, response, **kw):
643         return self._post_request(request, kw, response)
644     @requires(['MarketplaceId', 'NotificationType', 'Destination'])
645     @structured_objects('Destination', members=True)
646     @api_action('Subscriptions', 25, 0.5)
647     def delete_subscription(self, request, response, **kw):
648         return self._post_request(request, kw, response)
649     @requires(['MarketplaceId'])
650     @api_action('Subscriptions', 25, 0.5)
651     def list_subscriptions(self, request, response, **kw):
652         return self._post_request(request, kw, response)
653     @requires(['MarketplaceId', 'Subscription'])
654     @structured_objects('Subscription', members=True)
655     @api_action('Subscriptions', 25, 0.5)
656     def update_subscription(self, request, response, **kw):
657         return self._post_request(request, kw, response)
658     @api_action('Subscriptions', 2, 300, 'GetServiceStatus')
659     def get_subscriptions_service_status(self, request, response, **kw):
660         return self._post_request(request, kw, response)
661     @requires(['AmazonOrderReferenceId', 'OrderReferenceAttributes'])
662     @structured_objects('OrderReferenceAttributes')
663     @api_action('OffAmazonPayments', 10, 1)
664     def set_order_reference_details(self, request, response, **kw):
665         return self._post_request(request, kw, response)
666     @requires(['AmazonOrderReferenceId'])
667     @api_action('OffAmazonPayments', 20, 2)
668     def get_order_reference_details(self, request, response, **kw):
669         return self._post_request(request, kw, response)
670     @requires(['AmazonOrderReferenceId'])
671     @api_action('OffAmazonPayments', 10, 1)
672     def confirm_order_reference(self, request, response, **kw):
673         return self._post_request(request, kw, response)
674     @requires(['AmazonOrderReferenceId'])
675     @api_action('OffAmazonPayments', 10, 1)
676     def cancel_order_reference(self, request, response, **kw):
677         return self._post_request(request, kw, response)
678     @requires(['AmazonOrderReferenceId'])
679     @api_action('OffAmazonPayments', 10, 1)
680     def close_order_reference(self, request, response, **kw):
681         return self._post_request(request, kw, response)
682     @requires(['AmazonOrderReferenceId', 'AuthorizationReferenceId',
683                'AuthorizationAmount'])
684     @structured_objects('AuthorizationAmount')
685     @api_action('OffAmazonPayments', 10, 1)
686     def authorize(self, request, response, **kw):
687         return self._post_request(request, kw, response)
688     @requires(['AmazonAuthorizationId'])
689     @api_action('OffAmazonPayments', 20, 2)
690     def get_authorization_details(self, request, response, **kw):
691         return self._post_request(request, kw, response)
692     @requires(['AmazonAuthorizationId', 'CaptureReferenceId', 'CaptureAmount'])
693     @structured_objects('CaptureAmount')
694     @api_action('OffAmazonPayments', 10, 1)
695     def capture(self, request, response, **kw):
696         return self._post_request(request, kw, response)
697     @requires(['AmazonCaptureId'])
698     @api_action('OffAmazonPayments', 20, 2)
699     def get_capture_details(self, request, response, **kw):
700         return self._post_request(request, kw, response)
701     @requires(['AmazonAuthorizationId'])
702     @api_action('OffAmazonPayments', 10, 1)
703     def close_authorization(self, request, response, **kw):
704         return self._post_request(request, kw, response)
705     @requires(['AmazonCaptureId', 'RefundReferenceId', 'RefundAmount'])
706     @structured_objects('RefundAmount')
707     @api_action('OffAmazonPayments', 10, 1)
708     def refund(self, request, response, **kw):
709         return self._post_request(request, kw, response)
710     @requires(['AmazonRefundId'])
711     @api_action('OffAmazonPayments', 20, 2)
712     def get_refund_details(self, request, response, **kw):
713         return self._post_request(request, kw, response)
714     @api_action('OffAmazonPayments', 2, 300, 'GetServiceStatus')
715     def get_offamazonpayments_service_status(self, request, response, **kw):
716         return self._post_request(request, kw, response)
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>test_layer2_domain.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 import boto.swf.layer2
2 from boto.swf.layer2 import Domain, ActivityType, WorkflowType, WorkflowExecution
3 from tests.unit import unittest
4 from mock import Mock
5 class TestDomain(unittest.TestCase):
6     def setUp(self):
7         boto.swf.layer2.Layer1 = Mock()
8         self.domain = Domain(name='test-domain', description='My test domain')
9         self.domain.aws_access_key_id = 'inheritable access key'
10         self.domain.aws_secret_access_key = 'inheritable secret key'
11         self.domain.region = 'test-region'
12     def test_domain_instantiation(self):
13         self.assertEquals('test-domain', self.domain.name)
14 <a name="0"></a>        self.assertEquals('My test domain', self.domain.description)
15     def test_domain_list_activities(self):
16         self.domain._swf.list_activity_types.return_value <font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>= {
17             'typeInfos': [{'activityType': {'name': 'DeleteLocalFile',
18                              'version': '1.0'},
19             'creationDate': 1332853651.235,
20             'status': 'REGISTERED'},
21            {'activityType': {'name': 'DoUpdate', 'version': 'test'},
22             'creationDate': 1333463734.528,
23             'status': 'REGISTERED'},
24            {'activityType': {'name': 'GrayscaleTransform',
25                              'version': '1.0'},
26             'creationDate': 1332853651.18,
27             'status': 'REGISTERED'},
28            {'activityType': {'name': 'S3Download', 'version': '1.0'},
29             'creationDate': 1332853651.264,
30             'status': 'REGISTERED'},
31            {'activityType': {'name': 'S3Upload', 'version': '1.0'},
32             'creationDate': 1332853651.314,
33             'status': 'REGISTERED'},
34            {'activityType': {'name': 'SepiaTransform', 'version': '1.1'},
35             'creationDate': 1333373797.734,
36             'status': 'REGISTERED'}]} 
37         expected_names =</b></font> ('DeleteLocalFile', 'GrayscaleTransform', 'S3Download', 
38                           'S3Upload', 'SepiaTransform', 'DoUpdate')
39         activity_types = self.domain.activities()
40         self.assertEquals(6, len(activity_types))
41         for activity_type in activity_types:
42             self.assertIsInstance(activity_type, ActivityType)
43             self.assertTrue(activity_type.name in expected_names)
44             self.assertEquals(self.domain.region, activity_type.region)
45     def test_domain_list_workflows(self):
46         self.domain._swf.list_workflow_types.return_value = {
47             'typeInfos': [{'creationDate': 1332853651.136,
48                 'description': 'Image processing sample workflow type',
49                 'status': 'REGISTERED',
50                 'workflowType': {'name': 'ProcessFile', 'version': '1.0'}},
51                {'creationDate': 1333551719.89,
52                 'status': 'REGISTERED',
53                 'workflowType': {'name': 'test_workflow_name',
54                                  'version': 'v1'}}]}
55         expected_names = ('ProcessFile', 'test_workflow_name') 
56         workflow_types = self.domain.workflows()
57         self.assertEquals(2, len(workflow_types))
58         for workflow_type in workflow_types:
59             self.assertIsInstance(workflow_type, WorkflowType)
60             self.assertTrue(workflow_type.name in expected_names)
61             self.assertEquals(self.domain.aws_access_key_id, workflow_type.aws_access_key_id)
62             self.assertEquals(self.domain.aws_secret_access_key, workflow_type.aws_secret_access_key)
63             self.assertEquals(self.domain.name, workflow_type.domain)
64             self.assertEquals(self.domain.region, workflow_type.region)
65     def test_domain_list_executions(self):
66         self.domain._swf.list_open_workflow_executions.return_value = {
67             'executionInfos': [{'cancelRequested': False,
68                      'execution': {'runId': '12OeDTyoD27TDaafViz/QIlCHrYzspZmDgj0coIfjm868=',
69                                    'workflowId': 'ProcessFile-1.0-1378933928'},
70                      'executionStatus': 'OPEN',
71                      'startTimestamp': 1378933928.676,
72                      'workflowType': {'name': 'ProcessFile',
73                                       'version': '1.0'}},
74                     {'cancelRequested': False,
75                      'execution': {'runId': '12GwBkx4hH6t2yaIh8LYxy5HyCM6HcyhDKePJCg0/ciJk=',
76                                    'workflowId': 'ProcessFile-1.0-1378933927'},
77                      'executionStatus': 'OPEN',
78                      'startTimestamp': 1378933927.919,
79                      'workflowType': {'name': 'ProcessFile',
80                                       'version': '1.0'}},
81                     {'cancelRequested': False,
82                      'execution': {'runId': '12oRG3vEWrQ7oYBV+Bqi33Fht+ZRCYTt+tOdn5kLVcwKI=',
83                                    'workflowId': 'ProcessFile-1.0-1378933926'},
84                      'executionStatus': 'OPEN',
85                      'startTimestamp': 1378933927.04,
86                      'workflowType': {'name': 'ProcessFile',
87                                       'version': '1.0'}},
88                     {'cancelRequested': False,
89                      'execution': {'runId': '12qrdcpYmad2cjnqJcM4Njm3qrCGvmRFR1wwQEt+a2ako=',
90                                    'workflowId': 'ProcessFile-1.0-1378933874'},
91                      'executionStatus': 'OPEN',
92                      'startTimestamp': 1378933874.956,
93                      'workflowType': {'name': 'ProcessFile',
94                                       'version': '1.0'}}]}
95         executions = self.domain.executions()
96         self.assertEquals(4, len(executions))
97         for wf_execution in executions:
98             self.assertIsInstance(wf_execution, WorkflowExecution)
99             self.assertEquals(self.domain.aws_access_key_id, wf_execution.aws_access_key_id)
100             self.assertEquals(self.domain.aws_secret_access_key, wf_execution.aws_secret_access_key)
101             self.assertEquals(self.domain.name, wf_execution.domain)
102             self.assertEquals(self.domain.region, wf_execution.region)
103 if __name__ == '__main__':
104     unittest.main()
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
