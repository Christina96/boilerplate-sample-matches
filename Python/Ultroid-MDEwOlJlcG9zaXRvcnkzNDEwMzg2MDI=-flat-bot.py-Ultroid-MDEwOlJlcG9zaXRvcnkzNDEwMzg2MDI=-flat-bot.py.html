
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Tokens: 24, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>Ultroid-MDEwOlJlcG9zaXRvcnkzNDEwMzg2MDI=-flat-bot.py</h3>
            <pre><code>1  from . import get_help
2  __doc__ = get_help("help_bot")
3  import os
4  import sys
5  import time
6  from platform import python_version as pyver
7  from random import choice
8  from telethon import __version__
9  from telethon.errors.rpcerrorlist import (
10      BotMethodInvalidError,
11      ChatSendMediaForbiddenError,
12  )
13  from pyUltroid.version import __version__ as UltVer
14  from . import HOSTED_ON, LOGS
15  try:
16      from git import Repo
17  except ImportError:
18      LOGS.error("bot: 'gitpython' module not found!")
19      Repo = None
20  from telethon.utils import resolve_bot_file_id
21  from . import (
22      ATRA_COL,
23      LOGS,
24      OWNER_NAME,
25      ULTROID_IMAGES,
26      Button,
27      Carbon,
28      Telegraph,
29      Var,
30      allcmds,
31      asst,
32      bash,
33      call_back,
34      callback,
35      def_logs,
36      eor,
37      get_string,
38      heroku_logs,
39      in_pattern,
40      inline_pic,
41      restart,
42      shutdown,
43      start_time,
44      time_formatter,
45      udB,
46      ultroid_cmd,
47      ultroid_version,
48      updater,
49  )
50  def ULTPIC():
51      return inline_pic() or choice(ULTROID_IMAGES)
52  buttons = [
53      [
54          Button.url(get_string("bot_3"), "https://github.com/TeamUltroid/Ultroid"),
55          Button.url(get_string("bot_4"), "t.me/UltroidSupportChat"),
56      ]
57  ]
58  alive_txt = 
59  in_alive = "{}\n\nðŸŒ€ <b>Ultroid Version -><b> <code>{}</code>\nðŸŒ€ <b>PyUltroid -></b> <code>{}</code>\nðŸŒ€ <b>Python -></b> <code>{}</code>\nðŸŒ€ <b>Uptime -></b> <code>{}</code>\nðŸŒ€ <b>Branch -></b>[ {} ]\n\nâ€¢ <b>Join @TeamUltroid</b>"
60  @callback("alive")
61  async def alive(event):
62      text = alive_txt.format(ultroid_version, UltVer, __version__)
63      await event.answer(text, alert=True)
64  @ultroid_cmd(
65      pattern="alive( (.*)|$)",
66  )
67  async def lol(ult):
68      match = ult.pattern_match.group(1).strip()
69      inline = None
70      if match in ["inline", "i"]:
71          try:
72              res = await ult.client.inline_query(asst.me.username, "alive")
73              return await res[0].click(ult.chat_id)
74          except BotMethodInvalidError:
75              pass
76          except BaseException as er:
77              LOGS.exception(er)
78          inline = True
79      pic = udB.get_key("ALIVE_PIC")
80      if isinstance(pic, list):
81          pic = choice(pic)
82      uptime = time_formatter((time.time() - start_time) * 1000)
83      header = udB.get_key("ALIVE_TEXT") or get_string("bot_1")
84      y = Repo().active_branch
85      xx = Repo().remotes[0].config_reader.get("url")
86      rep = xx.replace(".git", f"/tree/{y}")
87      kk = f" `[{y}]({rep})` "
88      if inline:
89          kk = f"<a href={rep}>{y}</a>"
90          parse = "html"
91          als = in_alive.format(
92              header,
93              f"{ultroid_version} [{HOSTED_ON}]",
94              UltVer,
95              pyver(),
96              uptime,
<span onclick='openModal()' class='match'>97              kk,
98          )
99          if _e := udB.get_key("ALIVE_EMOJI"):
100              als = als.replace("ðŸŒ€", _e)
101      else:
</span>102          parse = "md"
103          als = (get_string("alive_1")).format(
104              header,
105              OWNER_NAME,
106              f"{ultroid_version} [{HOSTED_ON}]",
107              UltVer,
108              uptime,
109              pyver(),
110              __version__,
111              kk,
112          )
113          if a := udB.get_key("ALIVE_EMOJI"):
114              als = als.replace("âœµ", a)
115      if pic:
116          try:
117              await ult.reply(
118                  als,
119                  file=pic,
120                  parse_mode=parse,
121                  link_preview=False,
122                  buttons=buttons if inline else None,
123              )
124              return await ult.try_delete()
125          except ChatSendMediaForbiddenError:
126              pass
127          except BaseException as er:
128              LOGS.exception(er)
129              try:
130                  await ult.reply(file=pic)
131                  await ult.reply(
132                      als,
133                      parse_mode=parse,
134                      buttons=buttons if inline else None,
135                      link_preview=False,
136                  )
137                  return await ult.try_delete()
138              except BaseException as er:
139                  LOGS.exception(er)
140      await eor(
141          ult,
142          als,
143          parse_mode=parse,
144          link_preview=False,
145          buttons=buttons if inline else None,
146      )
147  @ultroid_cmd(pattern="ping$", chats=[], type=["official", "assistant"])
148  async def _(event):
149      start = time.time()
150      x = await event.eor("Pong !")
151      end = round((time.time() - start) * 1000)
152      uptime = time_formatter((time.time() - start_time) * 1000)
153      await x.edit(get_string("ping").format(end, uptime))
154  @ultroid_cmd(
155      pattern="cmds$",
156  )
157  async def cmds(event):
158      await allcmds(event, Telegraph)
159  heroku_api = Var.HEROKU_API
160  @ultroid_cmd(
161      pattern="restart$",
162      fullsudo=True,
163  )
164  async def restartbt(ult):
165      ok = await ult.eor(get_string("bot_5"))
166      call_back()
167      who = "bot" if ult.client._bot else "user"
168      udB.set_key("_RESTART", f"{who}_{ult.chat_id}_{ok.id}")
169      if heroku_api:
170          return await restart(ok)
171      await bash("git pull && pip3 install -r requirements.txt")
172      if len(sys.argv) > 1:
173          os.execl(sys.executable, sys.executable, "main.py")
174      else:
175          os.execl(sys.executable, sys.executable, "-m", "pyUltroid")
176  @ultroid_cmd(
177      pattern="shutdown$",
178      fullsudo=True,
179  )
180  async def shutdownbot(ult):
181      await shutdown(ult)
182  @ultroid_cmd(
183      pattern="logs( (.*)|$)",
184      chats=[],
185  )
186  async def _(event):
187      opt = event.pattern_match.group(1).strip()
188      file = f"ultroid{sys.argv[-1]}.log" if len(sys.argv) > 1 else "ultroid.log"
189      if opt == "heroku":
190          await heroku_logs(event)
191      elif opt == "carbon" and Carbon:
192          event = await event.eor(get_string("com_1"))
193          with open(file, "r") as f:
194              code = f.read()[-2500:]
195          file = await Carbon(
196              file_name="ultroid-logs",
197              code=code,
198              backgroundColor=choice(ATRA_COL),
199          )
200          if isinstance(file, dict):
201              await event.eor(f"`{file}`")
202              return
203          await event.reply("**Ultroid Logs.**", file=file)
204      elif opt == "open":
205          with open("ultroid.log", "r") as f:
206              file = f.read()[-4000:]
207          return await event.eor(f"`{file}`")
208      else:
209          await def_logs(event, file)
210      await event.try_delete()
211  @in_pattern("alive", owner=True)
212  async def inline_alive(ult):
213      pic = udB.get_key("ALIVE_PIC")
214      if isinstance(pic, list):
215          pic = choice(pic)
216      uptime = time_formatter((time.time() - start_time) * 1000)
217      header = udB.get_key("ALIVE_TEXT") or get_string("bot_1")
218      y = Repo().active_branch
219      xx = Repo().remotes[0].config_reader.get("url")
220      rep = xx.replace(".git", f"/tree/{y}")
221      kk = f"<a href={rep}>{y}</a>"
222      als = in_alive.format(
223          header, f"{ultroid_version} [{HOSTED_ON}]", UltVer, pyver(), uptime, kk
224      )
225      if _e := udB.get_key("ALIVE_EMOJI"):
226          als = als.replace("ðŸŒ€", _e)
227      builder = ult.builder
228      if pic:
229          try:
230              if ".jpg" in pic:
231                  results = [
232                      await builder.photo(
233                          pic, text=als, parse_mode="html", buttons=buttons
234                      )
235                  ]
236              else:
237                  if _pic := resolve_bot_file_id(pic):
238                      pic = _pic
239                      buttons.insert(
240                          0, [Button.inline(get_string("bot_2"), data="alive")]
241                      )
242                  results = [
243                      await builder.document(
244                          pic,
245                          title="Inline Alive",
246                          description="@TeamUltroid",
247                          parse_mode="html",
248                          buttons=buttons,
249                      )
250                  ]
251              return await ult.answer(results)
252          except BaseException as er:
253              LOGS.exception(er)
254      result = [
255          await builder.article(
256              "Alive", text=als, parse_mode="html", link_preview=False, buttons=buttons
257          )
258      ]
259      await ult.answer(result)
260  @ultroid_cmd(pattern="update( (.*)|$)")
261  async def _(e):
262      xx = await e.eor(get_string("upd_1"))
263      if e.pattern_match.group(1).strip() and (
264          "fast" in e.pattern_match.group(1).strip()
265          or "soft" in e.pattern_match.group(1).strip()
266      ):
267          await bash("git pull -f && pip3 install -r requirements.txt")
268          call_back()
269          await xx.edit(get_string("upd_7"))
270          os.execl(sys.executable, "python3", "-m", "pyUltroid")
271      m = await updater()
272      branch = (Repo.init()).active_branch
273      if m:
274          x = await asst.send_file(
275              udB.get_key("LOG_CHANNEL"),
276              ULTPIC(),
277              caption="â€¢ **Update Available** â€¢",
278              force_document=False,
279              buttons=Button.inline("Changelogs", data="changes"),
280          )
281          Link = x.message_link
282          await xx.edit(
283              f'<strong><a href="{Link}">[ChangeLogs]</a></strong>',
284              parse_mode="html",
285              link_preview=False,
286          )
287      else:
288          await xx.edit(
289              f'<code>Your BOT is </code><strong>up-to-date</strong><code> with </code><strong><a href="https://github.com/TeamUltroid/Ultroid/tree/{branch}">[{branch}]</a></strong>',
290              parse_mode="html",
291              link_preview=False,
292          )
293  @callback("updtavail", owner=True)
294  async def updava(event):
295      await event.delete()
296      await asst.send_file(
297          udB.get_key("LOG_CHANNEL"),
298          ULTPIC(),
299          caption="â€¢ **Update Available** â€¢",
300          force_document=False,
301          buttons=Button.inline("Changelogs", data="changes"),
302      )
</code></pre>
        </div>
        <div class="column">
            <h3>Ultroid-MDEwOlJlcG9zaXRvcnkzNDEwMzg2MDI=-flat-bot.py</h3>
            <pre><code>1  from . import get_help
2  __doc__ = get_help("help_bot")
3  import os
4  import sys
5  import time
6  from platform import python_version as pyver
7  from random import choice
8  from telethon import __version__
9  from telethon.errors.rpcerrorlist import (
10      BotMethodInvalidError,
11      ChatSendMediaForbiddenError,
12  )
13  from pyUltroid.version import __version__ as UltVer
14  from . import HOSTED_ON, LOGS
15  try:
16      from git import Repo
17  except ImportError:
18      LOGS.error("bot: 'gitpython' module not found!")
19      Repo = None
20  from telethon.utils import resolve_bot_file_id
21  from . import (
22      ATRA_COL,
23      LOGS,
24      OWNER_NAME,
25      ULTROID_IMAGES,
26      Button,
27      Carbon,
28      Telegraph,
29      Var,
30      allcmds,
31      asst,
32      bash,
33      call_back,
34      callback,
35      def_logs,
36      eor,
37      get_string,
38      heroku_logs,
39      in_pattern,
40      inline_pic,
41      restart,
42      shutdown,
43      start_time,
44      time_formatter,
45      udB,
46      ultroid_cmd,
47      ultroid_version,
48      updater,
49  )
50  def ULTPIC():
51      return inline_pic() or choice(ULTROID_IMAGES)
52  buttons = [
53      [
54          Button.url(get_string("bot_3"), "https://github.com/TeamUltroid/Ultroid"),
55          Button.url(get_string("bot_4"), "t.me/UltroidSupportChat"),
56      ]
57  ]
58  alive_txt = 
59  in_alive = "{}\n\nðŸŒ€ <b>Ultroid Version -><b> <code>{}</code>\nðŸŒ€ <b>PyUltroid -></b> <code>{}</code>\nðŸŒ€ <b>Python -></b> <code>{}</code>\nðŸŒ€ <b>Uptime -></b> <code>{}</code>\nðŸŒ€ <b>Branch -></b>[ {} ]\n\nâ€¢ <b>Join @TeamUltroid</b>"
60  @callback("alive")
61  async def alive(event):
62      text = alive_txt.format(ultroid_version, UltVer, __version__)
63      await event.answer(text, alert=True)
64  @ultroid_cmd(
65      pattern="alive( (.*)|$)",
66  )
67  async def lol(ult):
68      match = ult.pattern_match.group(1).strip()
69      inline = None
70      if match in ["inline", "i"]:
71          try:
72              res = await ult.client.inline_query(asst.me.username, "alive")
73              return await res[0].click(ult.chat_id)
74          except BotMethodInvalidError:
75              pass
76          except BaseException as er:
77              LOGS.exception(er)
78          inline = True
79      pic = udB.get_key("ALIVE_PIC")
80      if isinstance(pic, list):
81          pic = choice(pic)
82      uptime = time_formatter((time.time() - start_time) * 1000)
83      header = udB.get_key("ALIVE_TEXT") or get_string("bot_1")
84      y = Repo().active_branch
85      xx = Repo().remotes[0].config_reader.get("url")
86      rep = xx.replace(".git", f"/tree/{y}")
87      kk = f" `[{y}]({rep})` "
88      if inline:
89          kk = f"<a href={rep}>{y}</a>"
90          parse = "html"
91          als = in_alive.format(
92              header,
93              f"{ultroid_version} [{HOSTED_ON}]",
94              UltVer,
95              pyver(),
96              uptime,
97              kk,
98          )
99          if _e := udB.get_key("ALIVE_EMOJI"):
100              als = als.replace("ðŸŒ€", _e)
101      else:
102          parse = "md"
103          als = (get_string("alive_1")).format(
104              header,
105              OWNER_NAME,
106              f"{ultroid_version} [{HOSTED_ON}]",
107              UltVer,
108              uptime,
109              pyver(),
110              __version__,
<span onclick='openModal()' class='match'>111              kk,
112          )
113          if a := udB.get_key("ALIVE_EMOJI"):
114              als = als.replace("âœµ", a)
115      if pic:
</span>116          try:
117              await ult.reply(
118                  als,
119                  file=pic,
120                  parse_mode=parse,
121                  link_preview=False,
122                  buttons=buttons if inline else None,
123              )
124              return await ult.try_delete()
125          except ChatSendMediaForbiddenError:
126              pass
127          except BaseException as er:
128              LOGS.exception(er)
129              try:
130                  await ult.reply(file=pic)
131                  await ult.reply(
132                      als,
133                      parse_mode=parse,
134                      buttons=buttons if inline else None,
135                      link_preview=False,
136                  )
137                  return await ult.try_delete()
138              except BaseException as er:
139                  LOGS.exception(er)
140      await eor(
141          ult,
142          als,
143          parse_mode=parse,
144          link_preview=False,
145          buttons=buttons if inline else None,
146      )
147  @ultroid_cmd(pattern="ping$", chats=[], type=["official", "assistant"])
148  async def _(event):
149      start = time.time()
150      x = await event.eor("Pong !")
151      end = round((time.time() - start) * 1000)
152      uptime = time_formatter((time.time() - start_time) * 1000)
153      await x.edit(get_string("ping").format(end, uptime))
154  @ultroid_cmd(
155      pattern="cmds$",
156  )
157  async def cmds(event):
158      await allcmds(event, Telegraph)
159  heroku_api = Var.HEROKU_API
160  @ultroid_cmd(
161      pattern="restart$",
162      fullsudo=True,
163  )
164  async def restartbt(ult):
165      ok = await ult.eor(get_string("bot_5"))
166      call_back()
167      who = "bot" if ult.client._bot else "user"
168      udB.set_key("_RESTART", f"{who}_{ult.chat_id}_{ok.id}")
169      if heroku_api:
170          return await restart(ok)
171      await bash("git pull && pip3 install -r requirements.txt")
172      if len(sys.argv) > 1:
173          os.execl(sys.executable, sys.executable, "main.py")
174      else:
175          os.execl(sys.executable, sys.executable, "-m", "pyUltroid")
176  @ultroid_cmd(
177      pattern="shutdown$",
178      fullsudo=True,
179  )
180  async def shutdownbot(ult):
181      await shutdown(ult)
182  @ultroid_cmd(
183      pattern="logs( (.*)|$)",
184      chats=[],
185  )
186  async def _(event):
187      opt = event.pattern_match.group(1).strip()
188      file = f"ultroid{sys.argv[-1]}.log" if len(sys.argv) > 1 else "ultroid.log"
189      if opt == "heroku":
190          await heroku_logs(event)
191      elif opt == "carbon" and Carbon:
192          event = await event.eor(get_string("com_1"))
193          with open(file, "r") as f:
194              code = f.read()[-2500:]
195          file = await Carbon(
196              file_name="ultroid-logs",
197              code=code,
198              backgroundColor=choice(ATRA_COL),
199          )
200          if isinstance(file, dict):
201              await event.eor(f"`{file}`")
202              return
203          await event.reply("**Ultroid Logs.**", file=file)
204      elif opt == "open":
205          with open("ultroid.log", "r") as f:
206              file = f.read()[-4000:]
207          return await event.eor(f"`{file}`")
208      else:
209          await def_logs(event, file)
210      await event.try_delete()
211  @in_pattern("alive", owner=True)
212  async def inline_alive(ult):
213      pic = udB.get_key("ALIVE_PIC")
214      if isinstance(pic, list):
215          pic = choice(pic)
216      uptime = time_formatter((time.time() - start_time) * 1000)
217      header = udB.get_key("ALIVE_TEXT") or get_string("bot_1")
218      y = Repo().active_branch
219      xx = Repo().remotes[0].config_reader.get("url")
220      rep = xx.replace(".git", f"/tree/{y}")
221      kk = f"<a href={rep}>{y}</a>"
222      als = in_alive.format(
223          header, f"{ultroid_version} [{HOSTED_ON}]", UltVer, pyver(), uptime, kk
224      )
225      if _e := udB.get_key("ALIVE_EMOJI"):
226          als = als.replace("ðŸŒ€", _e)
227      builder = ult.builder
228      if pic:
229          try:
230              if ".jpg" in pic:
231                  results = [
232                      await builder.photo(
233                          pic, text=als, parse_mode="html", buttons=buttons
234                      )
235                  ]
236              else:
237                  if _pic := resolve_bot_file_id(pic):
238                      pic = _pic
239                      buttons.insert(
240                          0, [Button.inline(get_string("bot_2"), data="alive")]
241                      )
242                  results = [
243                      await builder.document(
244                          pic,
245                          title="Inline Alive",
246                          description="@TeamUltroid",
247                          parse_mode="html",
248                          buttons=buttons,
249                      )
250                  ]
251              return await ult.answer(results)
252          except BaseException as er:
253              LOGS.exception(er)
254      result = [
255          await builder.article(
256              "Alive", text=als, parse_mode="html", link_preview=False, buttons=buttons
257          )
258      ]
259      await ult.answer(result)
260  @ultroid_cmd(pattern="update( (.*)|$)")
261  async def _(e):
262      xx = await e.eor(get_string("upd_1"))
263      if e.pattern_match.group(1).strip() and (
264          "fast" in e.pattern_match.group(1).strip()
265          or "soft" in e.pattern_match.group(1).strip()
266      ):
267          await bash("git pull -f && pip3 install -r requirements.txt")
268          call_back()
269          await xx.edit(get_string("upd_7"))
270          os.execl(sys.executable, "python3", "-m", "pyUltroid")
271      m = await updater()
272      branch = (Repo.init()).active_branch
273      if m:
274          x = await asst.send_file(
275              udB.get_key("LOG_CHANNEL"),
276              ULTPIC(),
277              caption="â€¢ **Update Available** â€¢",
278              force_document=False,
279              buttons=Button.inline("Changelogs", data="changes"),
280          )
281          Link = x.message_link
282          await xx.edit(
283              f'<strong><a href="{Link}">[ChangeLogs]</a></strong>',
284              parse_mode="html",
285              link_preview=False,
286          )
287      else:
288          await xx.edit(
289              f'<code>Your BOT is </code><strong>up-to-date</strong><code> with </code><strong><a href="https://github.com/TeamUltroid/Ultroid/tree/{branch}">[{branch}]</a></strong>',
290              parse_mode="html",
291              link_preview=False,
292          )
293  @callback("updtavail", owner=True)
294  async def updava(event):
295      await event.delete()
296      await asst.send_file(
297          udB.get_key("LOG_CHANNEL"),
298          ULTPIC(),
299          caption="â€¢ **Update Available** â€¢",
300          force_document=False,
301          buttons=Button.inline("Changelogs", data="changes"),
302      )
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from Ultroid-MDEwOlJlcG9zaXRvcnkzNDEwMzg2MDI=-flat-bot.py</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from Ultroid-MDEwOlJlcG9zaXRvcnkzNDEwMzg2MDI=-flat-bot.py</div>
                </div>
                <div class="column column_space"><pre><code>97              kk,
98          )
99          if _e := udB.get_key("ALIVE_EMOJI"):
100              als = als.replace("ðŸŒ€", _e)
101      else:
</pre></code></div>
                <div class="column column_space"><pre><code>111              kk,
112          )
113          if a := udB.get_key("ALIVE_EMOJI"):
114              als = als.replace("âœµ", a)
115      if pic:
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    