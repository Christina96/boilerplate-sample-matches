
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 3.79746835443038%, Tokens: 9</h2>
        <div class="column">
            <h3>sonnet-MDEwOlJlcG9zaXRvcnk4NzA2NzIxMg==-flat-cifar10_convnet_test.py</h3>
            <pre><code>1  from absl.testing import parameterized
2  import numpy as np
3  from sonnet.src import test_utils
4  from sonnet.src.nets import cifar10_convnet
5  import tensorflow as tf
6  class ModelTest(parameterized.TestCase, test_utils.TestCase):
7    def testModelCreation(self):
8      convnet = cifar10_convnet.Cifar10ConvNet()
9      self.assertLen(convnet.submodules, 45)
10    def testFailedModelCreation(self):
11      with self.assertRaisesRegex(
12          ValueError,
13          'The length of `output_channels` and `strides` must be equal.'):
14        cifar10_convnet.Cifar10ConvNet(strides=(1, 2, 3), output_channels=(1,))
15    @parameterized.parameters({'batch_size': 1}, {'batch_size': 4},
16                              {'batch_size': 128})
17    def testModelForwards(self, batch_size):
<span onclick='openModal()' class='match'>18      image_batch = tf.constant(
19          np.random.randn(batch_size, 24, 24, 3), dtype=tf.float32)
20      convnet = cifar10_convnet.Cifar10ConvNet()
</span>21      output = convnet(image_batch, is_training=True)
22      self.assertLen(convnet.variables, 112)
23      self.assertEqual(output['logits'].shape, [batch_size, 10])
24      self.assertLen(output['activations'], 12)
25    @parameterized.parameters({'batch_size': 1}, {'batch_size': 4},
26                              {'batch_size': 128})
27    def testModelForwardsFunction(self, batch_size):
28      image_batch = tf.constant(
29          np.random.randn(batch_size, 24, 24, 3), dtype=tf.float32)
30      convnet = cifar10_convnet.Cifar10ConvNet()
31      convnet_function = tf.function(convnet)
32      output = convnet_function(image_batch, is_training=True)
33      self.assertLen(convnet.variables, 112)
34      self.assertEqual(output['logits'].shape, [batch_size, 10])
35      self.assertLen(output['activations'], 12)
36    def testDifferentSizedImages(self):
37      convnet = cifar10_convnet.Cifar10ConvNet()
38      small_image = tf.constant(np.random.randn(4, 32, 32, 3), dtype=tf.float32)
39      small_output = convnet(small_image, is_training=True)
40      self.assertEqual(small_output['logits'].shape, [4, 10])
41      big_image = tf.constant(np.random.randn(12, 64, 64, 3), dtype=tf.float32)
42      big_output = convnet(big_image, is_training=True)
43      self.assertEqual(big_output['logits'].shape, [12, 10])
44    def testDefunBackProp(self):
45      convnet = cifar10_convnet.Cifar10ConvNet()
46      @tf.function
47      def do_training_step(image, labels):
48        with tf.GradientTape() as tape:
49          logits = convnet(image, is_training=True)['logits']
50          loss = tf.reduce_mean(
51              tf.nn.sparse_softmax_cross_entropy_with_logits(
52                  logits=logits, labels=labels))
53        grads = tape.gradient(loss, convnet.trainable_variables)
54        return loss, grads
55      image = tf.random.normal([4, 32, 32, 3])
56      labels = np.random.randint(low=0, high=10, size=[4], dtype=np.int64)
57      loss, grads = do_training_step(image, labels)
58      self.assertEqual(loss.numpy().shape, ())
59      for grad, var in zip(grads, convnet.trainable_variables):
60        self.assertIsNotNone(grad)
61        self.assertEqual(grad.numpy().shape, var.shape)
62  if __name__ == '__main__':
63    tf.test.main()
</code></pre>
        </div>
        <div class="column">
            <h3>Ultroid-MDEwOlJlcG9zaXRvcnkzNDEwMzg2MDI=-flat-ziptools.py</h3>
            <pre><code>1  import os
2  import time
3  from . import (
4      HNDLR,
5      ULTConfig,
6      asyncio,
7      bash,
8      downloader,
9      get_all_files,
10      get_string,
11      ultroid_cmd,
12      uploader,
13  )
14  @ultroid_cmd(pattern="zip( (.*)|$)")
15  async def zipp(event):
16      reply = await event.get_reply_message()
17      t = time.time()
18      if not reply:
19          await event.eor(get_string("zip_1"))
20          return
21      xx = await event.eor(get_string("com_1"))
22      if reply.media:
23          if hasattr(reply.media, "document"):
24              file = reply.media.document
25              image = await downloader(
26                  reply.file.name, reply.media.document, xx, t, get_string("com_5")
27              )
28              file = image.name
29          else:
30              file = await event.download_media(reply)
31      inp = file.replace(file.split(".")[-1], "zip")
32      if event.pattern_match.group(1).strip():
33          await bash(
34              f"zip -r --password {event.pattern_match.group(1).strip()} {inp} {file}"
35          )
36      else:
37          await bash(f"zip -r {inp} {file}")
38      k = time.time()
39      xxx = await uploader(inp, inp, k, xx, get_string("com_6"))
40      await event.client.send_file(
41          event.chat_id,
42          xxx,
43          force_document=True,
44          thumb=ULTConfig.thumb,
45          caption=f"`{xxx.name}`",
46          reply_to=reply,
47      )
48      os.remove(inp)
49      os.remove(file)
50      await xx.delete()
51  @ultroid_cmd(pattern="unzip( (.*)|$)")
52  async def unzipp(event):
53      reply = await event.get_reply_message()
54      file = event.pattern_match.group(1).strip()
55      t = time.time()
56      if not ((reply and reply.media) or file):
57          await event.eor(get_string("zip_1"))
58          return
59      xx = await event.eor(get_string("com_1"))
60      if reply.media:
61          if not hasattr(reply.media, "document"):
62              return await xx.edit(get_string("zip_3"))
63          file = reply.media.document
64          if not reply.file.name.endswith(("zip", "rar", "exe")):
65              return await xx.edit(get_string("zip_3"))
66          image = await downloader(
67              reply.file.name, reply.media.document, xx, t, get_string("com_5")
68          )
69          file = image.name
70      if os.path.isdir("unzip"):
71          await bash("rm -rf unzip")
72      os.mkdir("unzip")
73      await bash(f"7z x {file} -aoa -ounzip")
74      await asyncio.sleep(4)
75      ok = get_all_files("unzip")
76      for x in ok:
77          k = time.time()
78          xxx = await uploader(x, x, k, xx, get_string("com_6"))
79          await event.client.send_file(
80              event.chat_id,
81              xxx,
82              force_document=True,
83              thumb=ULTConfig.thumb,
84              caption=f"`{xxx.name}`",
85          )
86      await xx.delete()
87  @ultroid_cmd(pattern="addzip$")
88  async def azipp(event):
89      reply = await event.get_reply_message()
90      t = time.time()
91      if not (reply and reply.media):
92          await event.eor(get_string("zip_1"))
93          return
94      xx = await event.eor(get_string("com_1"))
95      if not os.path.isdir("zip"):
96          os.mkdir("zip")
97      if reply.media:
98          if hasattr(reply.media, "document"):
99              file = reply.media.document
<span onclick='openModal()' class='match'>100              image = await downloader(
101                  f"zip/{reply.file.name}",
102                  reply.media.document,
103                  xx,
104                  t,
105                  get_string("com_5"),
106              )
107              file = image.name
108          else:
109              file = await event.download_media(reply.media, "zip/")
</span>110      await xx.edit(
111          f"Downloaded `{file}` succesfully\nNow Reply To Other Files To Add And Zip all at once"
112      )
113  @ultroid_cmd(pattern="dozip( (.*)|$)")
114  async def do_zip(event):
115      if not os.path.isdir("zip"):
116          return await event.eor(get_string("zip_2").format(HNDLR))
117      xx = await event.eor(get_string("com_1"))
118      if event.pattern_match.group(1).strip():
119          await bash(
120          )
121      else:
122      k = time.time()
123      xxx = await uploader("ultroid.zip", "ultroid.zip", k, xx, get_string("com_6"))
124      await event.client.send_file(
125          event.chat_id,
126          xxx,
127          force_document=True,
128          thumb=ULTConfig.thumb,
129      )
130      await bash("rm -rf zip")
131      os.remove("ultroid.zip")
132      await xx.delete()
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from sonnet-MDEwOlJlcG9zaXRvcnk4NzA2NzIxMg==-flat-cifar10_convnet_test.py</div>
                <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from Ultroid-MDEwOlJlcG9zaXRvcnkzNDEwMzg2MDI=-flat-ziptools.py</div>
                <div class="column column_space"><pre><code>18      image_batch = tf.constant(
19          np.random.randn(batch_size, 24, 24, 3), dtype=tf.float32)
20      convnet = cifar10_convnet.Cifar10ConvNet()
</pre></code></div>
                <div class="column column_space"><pre><code>100              image = await downloader(
101                  f"zip/{reply.file.name}",
102                  reply.media.document,
103                  xx,
104                  t,
105                  get_string("com_5"),
106              )
107              file = image.name
108          else:
109              file = await event.download_media(reply.media, "zip/")
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    