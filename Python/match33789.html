<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for vcenter_1.py &amp; test_slackware_service.py</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for vcenter_1.py &amp; test_slackware_service.py
      </h3>
<h1 align="center">
        7.4%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>vcenter_1.py (21.052631%)<th>test_slackware_service.py (4.5283017%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(41-43)<td><a href="#" name="0">(40-42)</a><td align="center"><font color="#ff0000">12</font>
</td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>vcenter_1.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
from salt.utils.schema import ArrayItem, BooleanItem, IntegerItem, Schema, StringItem
class VCenterEntitySchema(Schema):
    title = "VCenter Entity Schema"
    description = "VCenter entity schema"
    type = StringItem(
        title="Type",
        description="Specifies the entity type",
        required=True,
        enum=["vcenter"],
    )
    vcenter = StringItem(
        title="vCenter", description="Specifies the vcenter hostname", required=True
    )
class VCenterProxySchema(Schema):
<a name="0"></a>    title = "VCenter Proxy Connection Schema"
    description = "Schema that describes the connection to a VCenter"
    additional_properties = False
    proxytype <font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>= StringItem(required=True, enum=["vcenter"])
    vcenter = StringItem(required=True, pattern=r"[^\s]+")
    mechanism = StringItem(required=True, enum=</b></font>["userpass", "sspi"])
    username = StringItem()
    passwords = ArrayItem(min_items=1, items=StringItem(), unique_items=True)
    verify_ssl = BooleanItem()
    ca_bundle = StringItem()
    domain = StringItem()
    principal = StringItem(default="host")
    protocol = StringItem(default="https")
    port = IntegerItem(minimum=1)
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>test_slackware_service.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
import os
import pytest
import salt.modules.slackware_service as slackware_service
from tests.support.mock import MagicMock, patch
@pytest.fixture
def configure_loader_modules():
    return {slackware_service: {}}
@pytest.fixture
def mocked_rcd():
    glob_output = [
        "/etc/rc.d/rc.S",  # system rc file
        "/etc/rc.d/rc.M",  # system rc file
        "/etc/rc.d/rc.lxc",  # enabled
        "/etc/rc.d/rc.modules",  # system rc file
        "/etc/rc.d/rc.ntpd",  # enabled
        "/etc/rc.d/rc.rpc",  # disabled
        "/etc/rc.d/rc.salt-master",  # enabled
        "/etc/rc.d/rc.salt-minion",  # disabled
        "/etc/rc.d/rc.something.conf",  # config rc file
        "/etc/rc.d/rc.sshd",  # disabled
    ]
    access_output = [
        True,  # lxc
        True,  # ntpd
        False,  # rpc
        True,  # salt-master
        False,  # salt-minion
    ]
    glob_mock <font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>= patch("glob.glob", autospec=True, return_value=glob_output)
    os_path_exists_mock = patch("os.path.exists", autospec=True, return_value=True)
    os_access_mock = patch("os.access", autospec=True, side_effect=</b></font>access_output)
    return glob_mock, os_path_exists_mock, os_access_mock
def test_get_all_rc_services_minus_system_and_config_files(mocked_rcd):
    services_all = ["lxc", "ntpd", "rpc", "salt-master", "salt-minion", "sshd"]
    glob_mock, os_path_exists_mock, os_access_mock = mocked_rcd
    with glob_mock, os_path_exists_mock, os_access_mock:
        assert slackware_service.get_all() == services_all
def test_if_only_executable_rc_files_are_returned_by_get_enabled(mocked_rcd):
    services_enabled = ["lxc", "ntpd", "salt-master"]
    glob_mock, os_path_exists_mock, os_access_mock = mocked_rcd
    with glob_mock, os_path_exists_mock, os_access_mock:
        assert slackware_service.get_enabled() == services_enabled
def test_if_only_not_executable_rc_files_are_returned_by_get_disabled(mocked_rcd):
    services_disabled = ["rpc", "salt-minion", "sshd"]
    glob_mock, os_path_exists_mock, os_access_mock = mocked_rcd
    with glob_mock, os_path_exists_mock, os_access_mock:
        assert slackware_service.get_disabled() == services_disabled
def test_if_a_rc_service_file_in_rcd_is_listed_as_available(mocked_rcd):
    glob_mock, os_path_exists_mock, os_access_mock = mocked_rcd
    with glob_mock, os_path_exists_mock, os_access_mock:
        assert slackware_service.available("lxc")
def test_if_a_rc_service_file_not_in_rcd_is_not_listed_as_available(mocked_rcd):
    glob_mock, os_path_exists_mock, os_access_mock = mocked_rcd
    with glob_mock, os_path_exists_mock, os_access_mock:
        assert not slackware_service.available("docker")
def test_if_a_rc_service_file_not_in_rcd_is_listed_as_missing(mocked_rcd):
    glob_mock, os_path_exists_mock, os_access_mock = mocked_rcd
    with glob_mock, os_path_exists_mock, os_access_mock:
        assert slackware_service.missing("docker")
def test_if_a_rc_service_file_in_rcd_is_not_listed_as_missing(mocked_rcd):
    glob_mock, os_path_exists_mock, os_access_mock = mocked_rcd
    with glob_mock, os_path_exists_mock, os_access_mock:
        assert not slackware_service.missing("lxc")
def test_service_start():
    mock = MagicMock(return_value=True)
    with patch.dict(slackware_service.__salt__, {"cmd.retcode": mock}):
        assert not slackware_service.start("name")
def test_service_stop():
    mock = MagicMock(return_value=True)
    with patch.dict(slackware_service.__salt__, {"cmd.retcode": mock}):
        assert not slackware_service.stop("name")
def test_service_restart():
    mock = MagicMock(return_value=True)
    with patch.dict(slackware_service.__salt__, {"cmd.retcode": mock}):
        assert not slackware_service.restart("name")
def test_service_reload_():
    mock = MagicMock(return_value=True)
    with patch.dict(slackware_service.__salt__, {"cmd.retcode": mock}):
        assert not slackware_service.reload_("name")
def test_service_force_reload():
    mock = MagicMock(return_value=True)
    with patch.dict(slackware_service.__salt__, {"cmd.retcode": mock}):
        assert not slackware_service.force_reload("name")
def test_service_status():
    mock = MagicMock(return_value=True)
    with patch.dict(slackware_service.__salt__, {"cmd.retcode": mock}):
        assert not slackware_service.status("name")
def test_if_executable_bit_is_set_when_enable_a_disabled_service():
    os_path_exists_mock = patch("os.path.exists", autospec=True, return_value=True)
    os_chmod = MagicMock(autospec=True, return_value=True)
    os_chmod_mock = patch("os.chmod", os_chmod)
    os_stat_result = os.stat_result(
        (0o100644, 142555, 64770, 1, 0, 0, 1340, 1597376187, 1597376188, 1597376189)
    )
    os_stat_mock = patch("os.stat", autospec=True, return_value=os_stat_result)
    with os_path_exists_mock, os_chmod_mock, os_stat_mock:
        slackware_service.enable("svc_to_enable")
        os_chmod.assert_called_with("/etc/rc.d/rc.svc_to_enable", 0o100755)
def test_if_executable_bit_is_unset_when_disable_an_enabled_service():
    os_path_exists_mock = patch("os.path.exists", autospec=True, return_value=True)
    os_chmod = MagicMock(autospec=True, return_value=True)
    os_chmod_mock = patch("os.chmod", os_chmod)
    os_stat_result = os.stat_result(
        (0o100755, 142555, 64770, 1, 0, 0, 1340, 1597376187, 1597376188, 1597376189)
    )
    os_stat_mock = patch("os.stat", autospec=True, return_value=os_stat_result)
    with os_path_exists_mock, os_chmod_mock, os_stat_mock:
        slackware_service.disable("svc_to_disable")
        os_chmod.assert_called_with("/etc/rc.d/rc.svc_to_disable", 0o100644)
def test_if_an_enabled_service_is_not_disabled():
    os_path_exists_mock = patch("os.path.exists", autospec=True, return_value=True)
    os_access_mock = patch("os.access", autospec=True, return_value=True)
    with os_path_exists_mock, os_access_mock:
        assert slackware_service.enabled("lxc")
        assert not slackware_service.disabled("lxc")
def test_if_a_disabled_service_is_not_enabled():
    os_path_exists_mock = patch("os.path.exists", autospec=True, return_value=True)
    os_access_mock = patch("os.access", autospec=True, return_value=False)
    with os_path_exists_mock, os_access_mock:
        assert slackware_service.disabled("rpc")
        assert not slackware_service.enabled("rpc")
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
