<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for test_postgres.py &amp; win_reg.py</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for test_postgres.py &amp; win_reg.py
      </h3>
<h1 align="center">
        2.9%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>test_postgres.py (26.086956%)<th>win_reg.py (1.5564202%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(24-34)<td><a href="#" name="0">(105-116)</a><td align="center"><font color="#ff0000">12</font>
</td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>test_postgres.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 import pytest
2 import salt.modules.postgres as postgres
3 md5_pw = "md55a231fcdb710d73268c4f44283487ba2"
4 scram_pw = (
5     "SCRAM-SHA-256$4096:wLr5nqC+3F+r7FdQPnB+nA==$"
6     "0hn08ZdX8kirGaL4TM0j13digH9Wl365OOzCtAuF2pE=:"
7     "LzAh/MGUdjYkdbDzcOKpfGwa3WwPUsyGcY+TEnSpcto="
8 )
9 def idfn(val):
10     if val == md5_pw:
11         return "md5_pw"
12     if val == scram_pw:
13         return "scram_pw"
14     "role,password,verifier,method,result",
15     [
16         <font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>("username", "password", md5_pw, "md5", True),
17         ("another", "password", md5_pw, "md5", False),
18         ("username", "another", md5_pw, "md5", False),
19         ("username", md5_pw, md5_pw, "md5", True),
20         ("username", "md5another", md5_pw, "md5", False),
21         ("username", "password", md5_pw, True, True),
22         ("another", "password", md5_pw, True, False),
23         ("username", "another", md5_pw, True, False),
24         ("username", md5_pw, md5_pw, True, True),
25         ("username", "md5another", md5_pw, True, False),
26         (None</b></font>, "password", scram_pw, "scram-sha-256", True),
27         (None, "another", scram_pw, "scram-sha-256", False),
28         (None, scram_pw, scram_pw, "scram-sha-256", True),
29         (None, "SCRAM-SHA-256$4096:AAAA$AAAA:AAAA", scram_pw, "scram-sha-256", False),
30         (None, "SCRAM-SHA-256$foo", scram_pw, "scram-sha-256", False),
31         (None, "password", "password", False, True),
32         (None, "another", "password", False, False),
33         (None, "password", "password", "foo", False),
34         ("username", "password", md5_pw, "scram-sha-256", False),
35         ("username", "password", scram_pw, "md5", False),
36         pytest.param("another", md5_pw, md5_pw, "md5", False, marks=pytest.mark.xfail),
37     ],
38     ids=idfn,
39 )
40 def test_verify_password(role, password, verifier, method, result):
41     assert postgres._verify_password(role, password, verifier, method) == result
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>win_reg.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 import logging
2 import sys
3 import salt.utils.platform
4 import salt.utils.stringutils
5 from salt.exceptions import CommandExecutionError
6 try:
7     import win32gui
8     import win32api
9     import win32con
10     HAS_WINDOWS_MODULES = True
11 except ImportError:
12     HAS_WINDOWS_MODULES = False
13 PY2 = sys.version_info[0] == 2
14 log = logging.getLogger(__name__)
15 __virtualname__ = "reg"
16 def __virtual__():
17     if not salt.utils.platform.is_windows():
18         return (
19             False,
20             "reg execution module failed to load: "
21             "The module will only run on Windows systems",
22         )
23     if not HAS_WINDOWS_MODULES:
24         return (
25             False,
26             "reg execution module failed to load: "
27             "One of the following libraries did not load: "
28             "win32gui, win32con, win32api",
29         )
30     return __virtualname__
31 def _to_mbcs(vdata):
32     return salt.utils.stringutils.to_unicode(vdata, "mbcs")
33 def _to_unicode(vdata):
34     if vdata is None:
35         vdata = ""
36     if isinstance(vdata, int):
37         vdata = str(vdata)
38     return salt.utils.stringutils.to_unicode(vdata, "utf-8")
39 class Registry:  # pylint: disable=R0903
40     def __init__(self):
41         self.hkeys = {
42             <font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>"HKEY_CURRENT_CONFIG": win32con.HKEY_CURRENT_CONFIG,
43             "HKEY_CLASSES_ROOT": win32con.HKEY_CLASSES_ROOT,
44             "HKEY_CURRENT_USER": win32con.HKEY_CURRENT_USER,
45             "HKEY_LOCAL_MACHINE": win32con.HKEY_LOCAL_MACHINE,
46             "HKEY_USERS": win32con.HKEY_USERS,
47             "HKCC": win32con.HKEY_CURRENT_CONFIG,
48             "HKCR": win32con.HKEY_CLASSES_ROOT,
49             "HKCU": win32con.HKEY_CURRENT_USER,
50             "HKLM": win32con.HKEY_LOCAL_MACHINE,
51             "HKU": win32con.HKEY_USERS,
52         }
53         self.</b></font>vtype = {
54             "REG_BINARY": win32con.REG_BINARY,
55             "REG_DWORD": win32con.REG_DWORD,
56             "REG_EXPAND_SZ": win32con.REG_EXPAND_SZ,
57             "REG_MULTI_SZ": win32con.REG_MULTI_SZ,
58             "REG_SZ": win32con.REG_SZ,
59             "REG_QWORD": win32con.REG_QWORD,
60         }
61         self.opttype = {"REG_OPTION_NON_VOLATILE": 0, "REG_OPTION_VOLATILE": 1}
62         self.vtype_reverse = {
63             win32con.REG_BINARY: "REG_BINARY",
64             win32con.REG_DWORD: "REG_DWORD",
65             win32con.REG_EXPAND_SZ: "REG_EXPAND_SZ",
66             win32con.REG_MULTI_SZ: "REG_MULTI_SZ",
67             win32con.REG_SZ: "REG_SZ",
68             win32con.REG_QWORD: "REG_QWORD",
69         }
70         self.opttype_reverse = {0: "REG_OPTION_NON_VOLATILE", 1: "REG_OPTION_VOLATILE"}
71         self.subkey_slash_check = {
72             win32con.HKEY_CURRENT_USER: 0,
73             win32con.HKEY_LOCAL_MACHINE: 1,
74             win32con.HKEY_USERS: 1,
75             win32con.HKEY_CURRENT_CONFIG: 1,
76             win32con.HKEY_CLASSES_ROOT: 1,
77         }
78         self.registry_32 = {
79             True: win32con.KEY_READ | win32con.KEY_WOW64_32KEY,
80             False: win32con.KEY_READ,
81         }
82     def __getattr__(self, k):
83         try:
84             return self.hkeys[k]
85         except KeyError:
86             msg = "No hkey named '{0}. Try one of {1}'"
87             hkeys = ", ".join(self.hkeys)
88             raise CommandExecutionError(msg.format(k, hkeys))
89 def key_exists(hive, key, use_32bit_registry=False):
90     local_hive = _to_unicode(hive)
91     local_key = _to_unicode(key)
92     registry = Registry()
93     try:
94         hkey = registry.hkeys[local_hive]
95     except KeyError:
96         raise CommandExecutionError("Invalid Hive: {}".format(local_hive))
97     access_mask = registry.registry_32[use_32bit_registry]
98     handle = None
99     try:
100         handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask)
101         return True
102     except win32api.error as exc:
103         if exc.winerror == 2:
104             return False
105         raise
106     finally:
107         if handle:
108             win32api.RegCloseKey(handle)
109 def value_exists(hive, key, vname, use_32bit_registry=False):
110     local_hive = _to_unicode(hive)
111     local_key = _to_unicode(key)
112     local_vname = _to_unicode(vname)
113     registry = Registry()
114     try:
115         hkey = registry.hkeys[local_hive]
116     except KeyError:
117         raise CommandExecutionError("Invalid Hive: {}".format(local_hive))
118     access_mask = registry.registry_32[use_32bit_registry]
119     try:
120         handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask)
121     except win32api.error as exc:
122         if exc.winerror == 2:
123             return False
124         raise
125     try:
126         _, _ = win32api.RegQueryValueEx(handle, local_vname)
127         return True
128     except win32api.error as exc:
129         if exc.winerror == 2 and vname is None:
130             return True
131         else:
132             return False
133     finally:
134         win32api.RegCloseKey(handle)
135 def broadcast_change():
136     _, res = win32gui.SendMessageTimeout(
137         win32con.HWND_BROADCAST,
138         win32con.WM_SETTINGCHANGE,
139         0,
140         0,
141         win32con.SMTO_ABORTIFHUNG,
142         5000,
143     )
144     return not bool(res)
145 def list_keys(hive, key=None, use_32bit_registry=False):
146     local_hive = _to_unicode(hive)
147     local_key = _to_unicode(key)
148     registry = Registry()
149     try:
150         hkey = registry.hkeys[local_hive]
151     except KeyError:
152         raise CommandExecutionError("Invalid Hive: {}".format(local_hive))
153     access_mask = registry.registry_32[use_32bit_registry]
154     subkeys = []
155     handle = None
156     try:
157         handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask)
158         for i in range(win32api.RegQueryInfoKey(handle)[0]):
159             subkey = win32api.RegEnumKey(handle, i)
160             if PY2:
161                 subkeys.append(_to_mbcs(subkey))
162             else:
163                 subkeys.append(subkey)
164     except win32api.error as exc:
165         if exc.winerror == 2:
166             log.debug(r"Cannot find key: %s\%s", hive, key, exc_info=True)
167             return False, r"Cannot find key: {}\{}".format(hive, key)
168         raise
169     finally:
170         if handle:
171             handle.Close()
172     return subkeys
173 def list_values(hive, key=None, use_32bit_registry=False):
174     local_hive = _to_unicode(hive)
175     local_key = _to_unicode(key)
176     registry = Registry()
177     try:
178         hkey = registry.hkeys[local_hive]
179     except KeyError:
180         raise CommandExecutionError("Invalid Hive: {}".format(local_hive))
181     access_mask = registry.registry_32[use_32bit_registry]
182     handle = None
183     values = list()
184     try:
185         handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask)
186         for i in range(win32api.RegQueryInfoKey(handle)[1]):
187             vname, vdata, vtype = win32api.RegEnumValue(handle, i)
188             if not vname:
189                 vname = "(Default)"
190             value = {
191                 "hive": local_hive,
192                 "key": local_key,
193                 "vname": _to_mbcs(vname),
194                 "vtype": registry.vtype_reverse[vtype],
195                 "success": True,
196             }
197             if vtype == win32con.REG_MULTI_SZ:
198                 value["vdata"] = [_to_mbcs(i) for i in vdata]
199             elif vtype in [win32con.REG_SZ, win32con.REG_EXPAND_SZ]:
200                 value["vdata"] = _to_mbcs(vdata)
201             else:
202                 value["vdata"] = vdata
203             values.append(value)
204     except win32api.error as exc:
205         if exc.winerror == 2:
206             log.debug(r"Cannot find key: %s\%s", hive, key)
207             return False, r"Cannot find key: {}\{}".format(hive, key)
208         raise
209     finally:
210         if handle:
211             handle.Close()
212     return values
213 def read_value(hive, key, vname=None, use_32bit_registry=False):
214     r"""
215     Reads a registry value entry or the default value for a key. To read the
216     default value, don't pass ``vname``
217     Args:
218         hive (str): The name of the hive. Can be one of the following:
219             - HKEY_LOCAL_MACHINE or HKLM
220             - HKEY_CURRENT_USER or HKCU
221             - HKEY_USER or HKU
222             - HKEY_CLASSES_ROOT or HKCR
223             - HKEY_CURRENT_CONFIG or HKCC
224         key (str):
225             The key (looks like a path) to the value name.
226         vname (str):
227             The value name. These are the individual name/data pairs under the
228             key. If not passed, the key (Default) value will be returned.
229         use_32bit_registry (bool):
230             Accesses the 32bit portion of the registry on 64bit installations.
231             On 32bit machines this is ignored.
232     Returns:
233         dict: A dictionary containing the passed settings as well as the
234             value_data if successful. If unsuccessful, sets success to False.
235         bool: Returns False if the key is not found
236         If vname is not passed:
237             - Returns the first unnamed value (Default) as a string.
238             - Returns none if first unnamed value is empty.
239     Usage:
240         The following will get the value of the ``version`` value name in the
241         ``HKEY_LOCAL_MACHINE\\SOFTWARE\\Salt`` key
242         .. code-block:: python
243             import salt.utils.win_reg as reg
244             reg.read_value(hive='HKLM', key='SOFTWARE\\Salt', vname='version')
245     Usage:
246         The following will get the default value of the
247         ``HKEY_LOCAL_MACHINE\\SOFTWARE\\Salt`` key
248         .. code-block:: python
249             import salt.utils.win_reg as reg
250             reg.read_value(hive='HKLM', key='SOFTWARE\\Salt')
251     Sets a value in the registry. If ``vname`` is passed, it will be the value
252     for that value name, otherwise it will be the default value for the
253     specified key
254     Args:
255         hive (str):
256             The name of the hive. Can be one of the following
257                 - HKEY_LOCAL_MACHINE or HKLM
258                 - HKEY_CURRENT_USER or HKCU
259                 - HKEY_USER or HKU
260                 - HKEY_CLASSES_ROOT or HKCR
261                 - HKEY_CURRENT_CONFIG or HKCC
262         key (str):
263             The key (looks like a path) to the value name.
264         vname (str):
265             The value name. These are the individual name/data pairs under the
266             key. If not passed, the key (Default) value will be set.
267         vdata (str, int, list, bytes):
268             The value you'd like to set. If a value name (vname) is passed, this
269             will be the data for that value name. If not, this will be the
270             (Default) value for the key.
271             The type of data this parameter expects is determined by the value
272             type specified in ``vtype``. The correspondence is as follows:
273                 - REG_BINARY: Binary data (str in Py2, bytes in Py3)
274                 - REG_DWORD: int
275                 - REG_EXPAND_SZ: str
276                 - REG_MULTI_SZ: list of str
277                 - REG_QWORD: int
278                 - REG_SZ: str
279                 .. note::
280                     When setting REG_BINARY, string data will be converted to
281                     binary. You can pass base64 encoded using the ``binascii``
282                     built-in module. Use ``binascii.b2a_base64('your data')``
283             .. note::
284                 The type for the (Default) value is always REG_SZ and cannot be
285                 changed.
286             .. note::
287                 This parameter is optional. If not passed, the Key will be
288                 created with no associated item/value pairs.
289         vtype (str):
290             The value type. The possible values of the vtype parameter are
291             indicated above in the description of the vdata parameter.
292         use_32bit_registry (bool):
293             Sets the 32bit portion of the registry on 64bit installations. On
294             32bit machines this is ignored.
295         volatile (bool):
296             When this parameter has a value of True, the registry key will be
297             made volatile (i.e. it will not persist beyond a system reset or
298             shutdown). This parameter only has an effect when a key is being
299             created and at no other time.
300     Returns:
301         bool: True if successful, otherwise False
302     Usage:
303         This will set the version value to 2015.5.2 in the SOFTWARE\\Salt key in
304         the HKEY_LOCAL_MACHINE hive
305         .. code-block:: python
306             import salt.utils.win_reg
307             winreg.set_value(hive='HKLM', key='SOFTWARE\\Salt', vname='version', vdata='2015.5.2')
308     Usage:
309         This function is strict about the type of vdata. For instance this
310         example will fail because vtype has a value of REG_SZ and vdata has a
311         type of int (as opposed to str as expected).
312         .. code-block:: python
313             import salt.utils.win_reg
314             winreg.set_value(hive='HKLM', key='SOFTWARE\\Salt', vname='str_data', vdata=1.2)
315     Usage:
316         In this next example vdata is properly quoted and should succeed.
317         .. code-block:: python
318             import salt.utils.win_reg
319             winreg.set_value(hive='HKLM', key='SOFTWARE\\Salt', vname='str_data', vdata='1.2')
320     Usage:
321         This is an example of using vtype REG_BINARY. Both ``set_value``
322         commands will set the same value ``Salty Test``
323         .. code-block:: python
324             import salt.utils.win_reg
325             winreg.set_value(hive='HKLM', key='SOFTWARE\\Salt', vname='bin_data', vdata='Salty Test', vtype='REG_BINARY')
326             import binascii
327             bin_data = binascii.b2a_base64('Salty Test')
328             winreg.set_value(hive='HKLM', key='SOFTWARE\\Salt', vname='bin_data_encoded', vdata=bin_data, vtype='REG_BINARY')
329     Usage:
330         An example using vtype REG_MULTI_SZ is as follows:
331         .. code-block:: python
332             import salt.utils.win_reg
333             winreg.set_value(hive='HKLM', key='SOFTWARE\\Salt', vname='list_data', vdata=['Salt', 'is', 'great'], vtype='REG_MULTI_SZ')
334     Cast the ``vdata` value to the appropriate data type for the registry type
335     specified in ``vtype``
336     Args:
337         vdata (str, int, list, bytes): The data to cast
338         vtype (str):
339             The type of data to be written to the registry. Must be one of the
340             following:
341                 - REG_BINARY
342                 - REG_DWORD
343                 - REG_EXPAND_SZ
344                 - REG_MULTI_SZ
345                 - REG_QWORD
346                 - REG_SZ
347     Returns:
348         The vdata cast to the appropriate type. Will be unicode string, binary,
349         list of unicode strings, or int
350     Usage:
351         .. code-block:: python
352             import salt.utils.win_reg
353             winreg.cast_vdata(vdata='This is the string', vtype='REG_SZ')
354     .. versionadded:: 2015.5.4
355     Delete a registry key to include all subkeys and value/data pairs.
356     Args:
357         hive (str):
358             The name of the hive. Can be one of the following
359                 - HKEY_LOCAL_MACHINE or HKLM
360                 - HKEY_CURRENT_USER or HKCU
361                 - HKEY_USER or HKU
362                 - HKEY_CLASSES_ROOT or HKCR
363                 - HKEY_CURRENT_CONFIG or HKCC
364             key (str):
365                 The key to remove (looks like a path)
366             use_32bit_registry (bool):
367                 Deletes the 32bit portion of the registry on 64bit
368                 installations. On 32bit machines this is ignored.
369     Returns:
370         dict: A dictionary listing the keys that deleted successfully as well as
371             those that failed to delete.
372     Usage:
373         The following example will remove ``salt`` and all its subkeys from the
374         ``SOFTWARE`` key in ``HKEY_LOCAL_MACHINE``:
375         .. code-block:: python
376             import salt.utils.win_reg
377             winreg.delete_key_recursive(hive='HKLM', key='SOFTWARE\\DeleteMe')
378         Enumerate keys
379         Traverse the registry tree i.e. dive into the tree
380     Delete a registry value entry or the default value for a key.
381     Args:
382         hive (str):
383             The name of the hive. Can be one of the following
384                 - HKEY_LOCAL_MACHINE or HKLM
385                 - HKEY_CURRENT_USER or HKCU
386                 - HKEY_USER or HKU
387                 - HKEY_CLASSES_ROOT or HKCR
388                 - HKEY_CURRENT_CONFIG or HKCC
389         key (str):
390             The key (looks like a path) to the value name.
391         vname (str):
392             The value name. These are the individual name/data pairs under the
393             key. If not passed, the key (Default) value will be deleted.
394         use_32bit_registry (bool):
395             Deletes the 32bit portion of the registry on 64bit installations. On
396             32bit machines this is ignored.
397     Return:
398         bool: True if successful, otherwise False
399     Usage:
400         .. code-block:: python
401             import salt.utils.win_reg
402             winreg.delete_value(hive='HKLM', key='SOFTWARE\\SaltTest', vname='version')
403     """
404     local_hive = _to_unicode(hive)
405     local_key = _to_unicode(key)
406     local_vname = _to_unicode(vname)
407     registry = Registry()
408     try:
409         hkey = registry.hkeys[local_hive]
410     except KeyError:
411         raise CommandExecutionError("Invalid Hive: {}".format(local_hive))
412     access_mask = registry.registry_32[use_32bit_registry] | win32con.KEY_ALL_ACCESS
413     handle = None
414     try:
415         handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask)
416         win32api.RegDeleteValue(handle, local_vname)
417         broadcast_change()
418         return True
419     except win32api.error as exc:
420         if exc.winerror == 2:
421             return None
422         raise
423     finally:
424         if handle:
425             win32api.RegCloseKey(handle)
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
