<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for test_postgres.py &amp; win_reg.py</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for test_postgres.py &amp; win_reg.py
      </h3>
<h1 align="center">
        2.9%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>test_postgres.py (26.086956%)<th>win_reg.py (1.5564202%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(24-34)<td><a href="#" name="0">(105-116)</a><td align="center"><font color="#ff0000">12</font>
</td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>test_postgres.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 import pytest
2 import salt.modules.postgres as postgres
3 md5_pw = "md55a231fcdb710d73268c4f44283487ba2"
4 scram_pw = (
5     "SCRAM-SHA-256$4096:wLr5nqC+3F+r7FdQPnB+nA==$"
6     "0hn08ZdX8kirGaL4TM0j13digH9Wl365OOzCtAuF2pE=:"
7     "LzAh/MGUdjYkdbDzcOKpfGwa3WwPUsyGcY+TEnSpcto="
8 )
9 def idfn(val):
10     if val == md5_pw:
11         return "md5_pw"
12     if val == scram_pw:
13         return "scram_pw"
14 <a name="0"></a>@pytest.mark.parametrize(
15     "role,password,verifier,method,result",
16     [
17         <font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>("username", "password", md5_pw, "md5", True),
18         ("another", "password", md5_pw, "md5", False),
19         ("username", "another", md5_pw, "md5", False),
20         ("username", md5_pw, md5_pw, "md5", True),
21         ("username", "md5another", md5_pw, "md5", False),
22         ("username", "password", md5_pw, True, True),
23         ("another", "password", md5_pw, True, False),
24         ("username", "another", md5_pw, True, False),
25         ("username", md5_pw, md5_pw, True, True),
26         ("username", "md5another", md5_pw, True, False),
27         (None</b></font>, "password", scram_pw, "scram-sha-256", True),
28         (None, "another", scram_pw, "scram-sha-256", False),
29         (None, scram_pw, scram_pw, "scram-sha-256", True),
30         (None, "SCRAM-SHA-256$4096:AAAA$AAAA:AAAA", scram_pw, "scram-sha-256", False),
31         (None, "SCRAM-SHA-256$foo", scram_pw, "scram-sha-256", False),
32         (None, "password", "password", False, True),
33         (None, "another", "password", False, False),
34         (None, "password", "password", "foo", False),
35         ("username", "password", md5_pw, "scram-sha-256", False),
36         ("username", "password", scram_pw, "md5", False),
37         pytest.param("another", md5_pw, md5_pw, "md5", False, marks=pytest.mark.xfail),
38     ],
39     ids=idfn,
40 )
41 def test_verify_password(role, password, verifier, method, result):
42     assert postgres._verify_password(role, password, verifier, method) == result
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>win_reg.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 import logging
2 import sys
3 import salt.utils.platform
4 import salt.utils.stringutils
5 from salt.exceptions import CommandExecutionError
6 try:
7     import win32gui
8     import win32api
9     import win32con
10     HAS_WINDOWS_MODULES = True
11 except ImportError:
12     HAS_WINDOWS_MODULES = False
13 PY2 = sys.version_info[0] == 2
14 log = logging.getLogger(__name__)
15 __virtualname__ = "reg"
16 def __virtual__():
17     if not salt.utils.platform.is_windows():
18         return (
19             False,
20             "reg execution module failed to load: "
21             "The module will only run on Windows systems",
22         )
23     if not HAS_WINDOWS_MODULES:
24         return (
25             False,
26             "reg execution module failed to load: "
27             "One of the following libraries did not load: "
28             "win32gui, win32con, win32api",
29         )
30     return __virtualname__
31 def _to_mbcs(vdata):
32     return salt.utils.stringutils.to_unicode(vdata, "mbcs")
33 def _to_unicode(vdata):
34     if vdata is None:
35         vdata = ""
36     if isinstance(vdata, int):
37         vdata = str(vdata)
38     return salt.utils.stringutils.to_unicode(vdata, "utf-8")
39 class Registry:  # pylint: disable=R0903
40 <a name="0"></a>
41     def __init__(self):
42         self.hkeys = {
43             <font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>"HKEY_CURRENT_CONFIG": win32con.HKEY_CURRENT_CONFIG,
44             "HKEY_CLASSES_ROOT": win32con.HKEY_CLASSES_ROOT,
45             "HKEY_CURRENT_USER": win32con.HKEY_CURRENT_USER,
46             "HKEY_LOCAL_MACHINE": win32con.HKEY_LOCAL_MACHINE,
47             "HKEY_USERS": win32con.HKEY_USERS,
48             "HKCC": win32con.HKEY_CURRENT_CONFIG,
49             "HKCR": win32con.HKEY_CLASSES_ROOT,
50             "HKCU": win32con.HKEY_CURRENT_USER,
51             "HKLM": win32con.HKEY_LOCAL_MACHINE,
52             "HKU": win32con.HKEY_USERS,
53         }
54         self.</b></font>vtype = {
55             "REG_BINARY": win32con.REG_BINARY,
56             "REG_DWORD": win32con.REG_DWORD,
57             "REG_EXPAND_SZ": win32con.REG_EXPAND_SZ,
58             "REG_MULTI_SZ": win32con.REG_MULTI_SZ,
59             "REG_SZ": win32con.REG_SZ,
60             "REG_QWORD": win32con.REG_QWORD,
61         }
62         self.opttype = {"REG_OPTION_NON_VOLATILE": 0, "REG_OPTION_VOLATILE": 1}
63         self.vtype_reverse = {
64             win32con.REG_BINARY: "REG_BINARY",
65             win32con.REG_DWORD: "REG_DWORD",
66             win32con.REG_EXPAND_SZ: "REG_EXPAND_SZ",
67             win32con.REG_MULTI_SZ: "REG_MULTI_SZ",
68             win32con.REG_SZ: "REG_SZ",
69             win32con.REG_QWORD: "REG_QWORD",
70         }
71         self.opttype_reverse = {0: "REG_OPTION_NON_VOLATILE", 1: "REG_OPTION_VOLATILE"}
72         self.subkey_slash_check = {
73             win32con.HKEY_CURRENT_USER: 0,
74             win32con.HKEY_LOCAL_MACHINE: 1,
75             win32con.HKEY_USERS: 1,
76             win32con.HKEY_CURRENT_CONFIG: 1,
77             win32con.HKEY_CLASSES_ROOT: 1,
78         }
79         self.registry_32 = {
80             True: win32con.KEY_READ | win32con.KEY_WOW64_32KEY,
81             False: win32con.KEY_READ,
82         }
83     def __getattr__(self, k):
84         try:
85             return self.hkeys[k]
86         except KeyError:
87             msg = "No hkey named '{0}. Try one of {1}'"
88             hkeys = ", ".join(self.hkeys)
89             raise CommandExecutionError(msg.format(k, hkeys))
90 def key_exists(hive, key, use_32bit_registry=False):
91     local_hive = _to_unicode(hive)
92     local_key = _to_unicode(key)
93     registry = Registry()
94     try:
95         hkey = registry.hkeys[local_hive]
96     except KeyError:
97         raise CommandExecutionError("Invalid Hive: {}".format(local_hive))
98     access_mask = registry.registry_32[use_32bit_registry]
99     handle = None
100     try:
101         handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask)
102         return True
103     except win32api.error as exc:
104         if exc.winerror == 2:
105             return False
106         raise
107     finally:
108         if handle:
109             win32api.RegCloseKey(handle)
110 def value_exists(hive, key, vname, use_32bit_registry=False):
111     local_hive = _to_unicode(hive)
112     local_key = _to_unicode(key)
113     local_vname = _to_unicode(vname)
114     registry = Registry()
115     try:
116         hkey = registry.hkeys[local_hive]
117     except KeyError:
118         raise CommandExecutionError("Invalid Hive: {}".format(local_hive))
119     access_mask = registry.registry_32[use_32bit_registry]
120     try:
121         handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask)
122     except win32api.error as exc:
123         if exc.winerror == 2:
124             return False
125         raise
126     try:
127         _, _ = win32api.RegQueryValueEx(handle, local_vname)
128         return True
129     except win32api.error as exc:
130         if exc.winerror == 2 and vname is None:
131             return True
132         else:
133             return False
134     finally:
135         win32api.RegCloseKey(handle)
136 def broadcast_change():
137     _, res = win32gui.SendMessageTimeout(
138         win32con.HWND_BROADCAST,
139         win32con.WM_SETTINGCHANGE,
140         0,
141         0,
142         win32con.SMTO_ABORTIFHUNG,
143         5000,
144     )
145     return not bool(res)
146 def list_keys(hive, key=None, use_32bit_registry=False):
147     local_hive = _to_unicode(hive)
148     local_key = _to_unicode(key)
149     registry = Registry()
150     try:
151         hkey = registry.hkeys[local_hive]
152     except KeyError:
153         raise CommandExecutionError("Invalid Hive: {}".format(local_hive))
154     access_mask = registry.registry_32[use_32bit_registry]
155     subkeys = []
156     handle = None
157     try:
158         handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask)
159         for i in range(win32api.RegQueryInfoKey(handle)[0]):
160             subkey = win32api.RegEnumKey(handle, i)
161             if PY2:
162                 subkeys.append(_to_mbcs(subkey))
163             else:
164                 subkeys.append(subkey)
165     except win32api.error as exc:
166         if exc.winerror == 2:
167             log.debug(r"Cannot find key: %s\%s", hive, key, exc_info=True)
168             return False, r"Cannot find key: {}\{}".format(hive, key)
169         raise
170     finally:
171         if handle:
172             handle.Close()
173     return subkeys
174 def list_values(hive, key=None, use_32bit_registry=False):
175     local_hive = _to_unicode(hive)
176     local_key = _to_unicode(key)
177     registry = Registry()
178     try:
179         hkey = registry.hkeys[local_hive]
180     except KeyError:
181         raise CommandExecutionError("Invalid Hive: {}".format(local_hive))
182     access_mask = registry.registry_32[use_32bit_registry]
183     handle = None
184     values = list()
185     try:
186         handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask)
187         for i in range(win32api.RegQueryInfoKey(handle)[1]):
188             vname, vdata, vtype = win32api.RegEnumValue(handle, i)
189             if not vname:
190                 vname = "(Default)"
191             value = {
192                 "hive": local_hive,
193                 "key": local_key,
194                 "vname": _to_mbcs(vname),
195                 "vtype": registry.vtype_reverse[vtype],
196                 "success": True,
197             }
198             if vtype == win32con.REG_MULTI_SZ:
199                 value["vdata"] = [_to_mbcs(i) for i in vdata]
200             elif vtype in [win32con.REG_SZ, win32con.REG_EXPAND_SZ]:
201                 value["vdata"] = _to_mbcs(vdata)
202             else:
203                 value["vdata"] = vdata
204             values.append(value)
205     except win32api.error as exc:
206         if exc.winerror == 2:
207             log.debug(r"Cannot find key: %s\%s", hive, key)
208             return False, r"Cannot find key: {}\{}".format(hive, key)
209         raise
210     finally:
211         if handle:
212             handle.Close()
213     return values
214 def read_value(hive, key, vname=None, use_32bit_registry=False):
215     r"""
216     Reads a registry value entry or the default value for a key. To read the
217     default value, don't pass ``vname``
218     Args:
219         hive (str): The name of the hive. Can be one of the following:
220             - HKEY_LOCAL_MACHINE or HKLM
221             - HKEY_CURRENT_USER or HKCU
222             - HKEY_USER or HKU
223             - HKEY_CLASSES_ROOT or HKCR
224             - HKEY_CURRENT_CONFIG or HKCC
225         key (str):
226             The key (looks like a path) to the value name.
227         vname (str):
228             The value name. These are the individual name/data pairs under the
229             key. If not passed, the key (Default) value will be returned.
230         use_32bit_registry (bool):
231             Accesses the 32bit portion of the registry on 64bit installations.
232             On 32bit machines this is ignored.
233     Returns:
234         dict: A dictionary containing the passed settings as well as the
235             value_data if successful. If unsuccessful, sets success to False.
236         bool: Returns False if the key is not found
237         If vname is not passed:
238             - Returns the first unnamed value (Default) as a string.
239             - Returns none if first unnamed value is empty.
240     Usage:
241         The following will get the value of the ``version`` value name in the
242         ``HKEY_LOCAL_MACHINE\\SOFTWARE\\Salt`` key
243         .. code-block:: python
244             import salt.utils.win_reg as reg
245             reg.read_value(hive='HKLM', key='SOFTWARE\\Salt', vname='version')
246     Usage:
247         The following will get the default value of the
248         ``HKEY_LOCAL_MACHINE\\SOFTWARE\\Salt`` key
249         .. code-block:: python
250             import salt.utils.win_reg as reg
251             reg.read_value(hive='HKLM', key='SOFTWARE\\Salt')
252     Sets a value in the registry. If ``vname`` is passed, it will be the value
253     for that value name, otherwise it will be the default value for the
254     specified key
255     Args:
256         hive (str):
257             The name of the hive. Can be one of the following
258                 - HKEY_LOCAL_MACHINE or HKLM
259                 - HKEY_CURRENT_USER or HKCU
260                 - HKEY_USER or HKU
261                 - HKEY_CLASSES_ROOT or HKCR
262                 - HKEY_CURRENT_CONFIG or HKCC
263         key (str):
264             The key (looks like a path) to the value name.
265         vname (str):
266             The value name. These are the individual name/data pairs under the
267             key. If not passed, the key (Default) value will be set.
268         vdata (str, int, list, bytes):
269             The value you'd like to set. If a value name (vname) is passed, this
270             will be the data for that value name. If not, this will be the
271             (Default) value for the key.
272             The type of data this parameter expects is determined by the value
273             type specified in ``vtype``. The correspondence is as follows:
274                 - REG_BINARY: Binary data (str in Py2, bytes in Py3)
275                 - REG_DWORD: int
276                 - REG_EXPAND_SZ: str
277                 - REG_MULTI_SZ: list of str
278                 - REG_QWORD: int
279                 - REG_SZ: str
280                 .. note::
281                     When setting REG_BINARY, string data will be converted to
282                     binary. You can pass base64 encoded using the ``binascii``
283                     built-in module. Use ``binascii.b2a_base64('your data')``
284             .. note::
285                 The type for the (Default) value is always REG_SZ and cannot be
286                 changed.
287             .. note::
288                 This parameter is optional. If not passed, the Key will be
289                 created with no associated item/value pairs.
290         vtype (str):
291             The value type. The possible values of the vtype parameter are
292             indicated above in the description of the vdata parameter.
293         use_32bit_registry (bool):
294             Sets the 32bit portion of the registry on 64bit installations. On
295             32bit machines this is ignored.
296         volatile (bool):
297             When this parameter has a value of True, the registry key will be
298             made volatile (i.e. it will not persist beyond a system reset or
299             shutdown). This parameter only has an effect when a key is being
300             created and at no other time.
301     Returns:
302         bool: True if successful, otherwise False
303     Usage:
304         This will set the version value to 2015.5.2 in the SOFTWARE\\Salt key in
305         the HKEY_LOCAL_MACHINE hive
306         .. code-block:: python
307             import salt.utils.win_reg
308             winreg.set_value(hive='HKLM', key='SOFTWARE\\Salt', vname='version', vdata='2015.5.2')
309     Usage:
310         This function is strict about the type of vdata. For instance this
311         example will fail because vtype has a value of REG_SZ and vdata has a
312         type of int (as opposed to str as expected).
313         .. code-block:: python
314             import salt.utils.win_reg
315             winreg.set_value(hive='HKLM', key='SOFTWARE\\Salt', vname='str_data', vdata=1.2)
316     Usage:
317         In this next example vdata is properly quoted and should succeed.
318         .. code-block:: python
319             import salt.utils.win_reg
320             winreg.set_value(hive='HKLM', key='SOFTWARE\\Salt', vname='str_data', vdata='1.2')
321     Usage:
322         This is an example of using vtype REG_BINARY. Both ``set_value``
323         commands will set the same value ``Salty Test``
324         .. code-block:: python
325             import salt.utils.win_reg
326             winreg.set_value(hive='HKLM', key='SOFTWARE\\Salt', vname='bin_data', vdata='Salty Test', vtype='REG_BINARY')
327             import binascii
328             bin_data = binascii.b2a_base64('Salty Test')
329             winreg.set_value(hive='HKLM', key='SOFTWARE\\Salt', vname='bin_data_encoded', vdata=bin_data, vtype='REG_BINARY')
330     Usage:
331         An example using vtype REG_MULTI_SZ is as follows:
332         .. code-block:: python
333             import salt.utils.win_reg
334             winreg.set_value(hive='HKLM', key='SOFTWARE\\Salt', vname='list_data', vdata=['Salt', 'is', 'great'], vtype='REG_MULTI_SZ')
335     Cast the ``vdata` value to the appropriate data type for the registry type
336     specified in ``vtype``
337     Args:
338         vdata (str, int, list, bytes): The data to cast
339         vtype (str):
340             The type of data to be written to the registry. Must be one of the
341             following:
342                 - REG_BINARY
343                 - REG_DWORD
344                 - REG_EXPAND_SZ
345                 - REG_MULTI_SZ
346                 - REG_QWORD
347                 - REG_SZ
348     Returns:
349         The vdata cast to the appropriate type. Will be unicode string, binary,
350         list of unicode strings, or int
351     Usage:
352         .. code-block:: python
353             import salt.utils.win_reg
354             winreg.cast_vdata(vdata='This is the string', vtype='REG_SZ')
355     .. versionadded:: 2015.5.4
356     Delete a registry key to include all subkeys and value/data pairs.
357     Args:
358         hive (str):
359             The name of the hive. Can be one of the following
360                 - HKEY_LOCAL_MACHINE or HKLM
361                 - HKEY_CURRENT_USER or HKCU
362                 - HKEY_USER or HKU
363                 - HKEY_CLASSES_ROOT or HKCR
364                 - HKEY_CURRENT_CONFIG or HKCC
365             key (str):
366                 The key to remove (looks like a path)
367             use_32bit_registry (bool):
368                 Deletes the 32bit portion of the registry on 64bit
369                 installations. On 32bit machines this is ignored.
370     Returns:
371         dict: A dictionary listing the keys that deleted successfully as well as
372             those that failed to delete.
373     Usage:
374         The following example will remove ``salt`` and all its subkeys from the
375         ``SOFTWARE`` key in ``HKEY_LOCAL_MACHINE``:
376         .. code-block:: python
377             import salt.utils.win_reg
378             winreg.delete_key_recursive(hive='HKLM', key='SOFTWARE\\DeleteMe')
379         Enumerate keys
380         Traverse the registry tree i.e. dive into the tree
381     Delete a registry value entry or the default value for a key.
382     Args:
383         hive (str):
384             The name of the hive. Can be one of the following
385                 - HKEY_LOCAL_MACHINE or HKLM
386                 - HKEY_CURRENT_USER or HKCU
387                 - HKEY_USER or HKU
388                 - HKEY_CLASSES_ROOT or HKCR
389                 - HKEY_CURRENT_CONFIG or HKCC
390         key (str):
391             The key (looks like a path) to the value name.
392         vname (str):
393             The value name. These are the individual name/data pairs under the
394             key. If not passed, the key (Default) value will be deleted.
395         use_32bit_registry (bool):
396             Deletes the 32bit portion of the registry on 64bit installations. On
397             32bit machines this is ignored.
398     Return:
399         bool: True if successful, otherwise False
400     Usage:
401         .. code-block:: python
402             import salt.utils.win_reg
403             winreg.delete_value(hive='HKLM', key='SOFTWARE\\SaltTest', vname='version')
404     """
405     local_hive = _to_unicode(hive)
406     local_key = _to_unicode(key)
407     local_vname = _to_unicode(vname)
408     registry = Registry()
409     try:
410         hkey = registry.hkeys[local_hive]
411     except KeyError:
412         raise CommandExecutionError("Invalid Hive: {}".format(local_hive))
413     access_mask = registry.registry_32[use_32bit_registry] | win32con.KEY_ALL_ACCESS
414     handle = None
415     try:
416         handle = win32api.RegOpenKeyEx(hkey, local_key, 0, access_mask)
417         win32api.RegDeleteValue(handle, local_vname)
418         broadcast_change()
419         return True
420     except win32api.error as exc:
421         if exc.winerror == 2:
422             return None
423         raise
424     finally:
425         if handle:
426             win32api.RegCloseKey(handle)
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
