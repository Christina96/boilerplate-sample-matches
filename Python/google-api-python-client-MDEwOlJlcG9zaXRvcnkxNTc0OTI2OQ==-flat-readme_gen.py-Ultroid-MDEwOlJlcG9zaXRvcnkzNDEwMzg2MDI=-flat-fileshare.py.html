
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 6.642066420664207%, Tokens: 9, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>google-api-python-client-MDEwOlJlcG9zaXRvcnkxNTc0OTI2OQ==-flat-readme_gen.py</h3>
            <pre><code>1  #!/usr/bin/env python
2  import argparse
3  import io
4  import os
5  import subprocess
6  import jinja2
7  import yaml
8  jinja_env = jinja2.Environment(
9      trim_blocks=True,
10      loader=jinja2.FileSystemLoader(
<span onclick='openModal()' class='match'>11          os.path.abspath(os.path.join(os.path.dirname(__file__), "templates"))
12      ),
13      autoescape=True,
14  )
15  README_TMPL = jinja_env.get_template("README.tmpl.rst")
</span>16  def get_help(file):
17      return subprocess.check_output(["python", file, "--help"]).decode()
18  def main():
19      parser = argparse.ArgumentParser()
20      parser.add_argument("source")
21      parser.add_argument("--destination", default="README.rst")
22      args = parser.parse_args()
23      source = os.path.abspath(args.source)
24      root = os.path.dirname(source)
25      destination = os.path.join(root, args.destination)
26      jinja_env.globals["get_help"] = get_help
27      with io.open(source, "r") as f:
28          config = yaml.load(f)
29      os.chdir(root)
30      output = README_TMPL.render(config)
31      with io.open(destination, "w") as f:
32          f.write(output)
33  if __name__ == "__main__":
34      main()
</code></pre>
        </div>
        <div class="column">
            <h3>Ultroid-MDEwOlJlcG9zaXRvcnkzNDEwMzg2MDI=-flat-fileshare.py</h3>
            <pre><code>1  from . import get_help
2  __doc__ = get_help("help_fileshare")
3  import os
4  from pyUltroid.dB.filestore_db import del_stored, get_stored_msg, list_all_stored_msgs
5  from pyUltroid.fns.tools import get_file_link
6  from . import HNDLR, asst, get_string, in_pattern, udB, ultroid_bot, ultroid_cmd
7  @ultroid_cmd(pattern="store$")
8  async def filestoreplg(event):
9      msg = await event.get_reply_message()
10      if not msg:
11          return await event.eor(get_string("fsh_3"), time=10)
12      filehash = await get_file_link(msg)
13      link_to_file = f"https://t.me/{asst.me.username}?start={filehash}"
14      await event.eor(
15          get_string("fsh_2").format(link_to_file),
16          link_preview=False,
17      )
18  @ultroid_cmd("delstored ?(.*)")
19  async def _(event):
20      match = event.pattern_match.group(1)
21      if not match:
22          return await event.eor("`Give stored film's link to delete.`", time=5)
23      match = match.split("?start=")
24      botusername = match[0].split("/")[-1]
25      if botusername != asst.me.username:
26          return await event.eor(
27              "`Message/Media of provided link was not stored by this bot.`", time=5
28          )
29      msg_id = get_stored_msg(match[1])
30      if not msg_id:
31          return await event.eor(
32              "`Message/Media of provided link was already deleted.`", time=5
33          )
34      del_stored(match[1])
35      await ultroid_bot.delete_messages(udB.get_key("LOG_CHANNEL"), int(msg_id))
36      await event.eor("__Deleted__")
37  @ultroid_cmd("liststored$")
38  async def liststored(event):
39      files = list_all_stored_msgs()
40      if not files:
41          return await event.eor(get_string("fsh_4"), time=5)
42      msg = "**Stored files:**\n"
43      for c, i in enumerate(files, start=1):
44          msg += f"`{c}`. https://t.me/{asst.me.username}?start={i}\n"
45      if len(msg) > 4095:
46          with open("liststored.txt", "w") as f:
47              f.write(msg.replace("**", "").replace("`", ""))
48          await event.reply(get_string("fsh_1"), file="liststored.txt")
49          os.remove("liststored.txt")
50          return
51      await event.eor(msg, link_preview=False)
52  @in_pattern("filestore", owner=True)
53  async def file_short(event):
54      all_ = list_all_stored_msgs()
55      res = []
56      if all_:
57          LOG_CHA = udB.get_key("LOG_CHANNEL")
58          for msg in all_[:50]:
59              m_id = get_stored_msg(msg)
60              if not m_id:
61                  continue
62              message = await asst.get_messages(LOG_CHA, ids=m_id)
63              if not message:
64                  continue
<span onclick='openModal()' class='match'>65              if message.media:
66                  res.append(await event.builder.document(title=msg, file=message.media))
</span>67              elif message.text:
68                  res.append(
69                      await event.builder.article(title=message.text, text=message.text)
70                  )
71      if not res:
72          title = "You have no stored file :("
73          text = f"{title}\n\nRead `{HNDLR}help fileshare` to know how to store."
74          return await event.answer([await event.builder.article(title=title, text=text)])
75      await event.answer(res, switch_pm="• File Store •", switch_pm_param="start")
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from google-api-python-client-MDEwOlJlcG9zaXRvcnkxNTc0OTI2OQ==-flat-readme_gen.py</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from Ultroid-MDEwOlJlcG9zaXRvcnkzNDEwMzg2MDI=-flat-fileshare.py</div>
                </div>
                <div class="column column_space"><pre><code>11          os.path.abspath(os.path.join(os.path.dirname(__file__), "templates"))
12      ),
13      autoescape=True,
14  )
15  README_TMPL = jinja_env.get_template("README.tmpl.rst")
</pre></code></div>
                <div class="column column_space"><pre><code>65              if message.media:
66                  res.append(await event.builder.document(title=msg, file=message.media))
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    