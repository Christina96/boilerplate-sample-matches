<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for test_networksimplex.py &amp; test_mincost.py</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for test_networksimplex.py &amp; test_mincost.py
      </h3>
<h1 align="center">
        57.2%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>test_networksimplex.py (69.68912%)<th>test_mincost.py (48.64376%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(172-213)<td><a href="#" name="0">(65-105)</a><td align="center"><font color="#ff0000">93</font>
<tr onclick='openModal("#f63526")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f63526"><font color="#f63526">-</font><td><a href="#" name="1">(288-316)<td><a href="#" name="1">(323-349)</a><td align="center"><font color="#9c0000">57</font>
<tr onclick='openModal("#980517")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#980517"><font color="#980517">-</font><td><a href="#" name="2">(347-368)<td><a href="#" name="2">(403-423)</a><td align="center"><font color="#960000">55</font>
<tr onclick='openModal("#53858b")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#53858b"><font color="#53858b">-</font><td><a href="#" name="3">(213-246)<td><a href="#" name="3">(142-174)</a><td align="center"><font color="#890000">50</font>
<tr onclick='openModal("#6cc417")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#6cc417"><font color="#6cc417">-</font><td><a href="#" name="4">(246-271)<td><a href="#" name="4">(267-291)</a><td align="center"><font color="#830000">48</font>
<tr onclick='openModal("#151b8d")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#151b8d"><font color="#151b8d">-</font><td><a href="#" name="5">(147-159)<td><a href="#" name="5">(7-19)</a><td align="center"><font color="#6a0000">39</font>
<tr onclick='openModal("#8c8774")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#8c8774"><font color="#8c8774">-</font><td><a href="#" name="6">(271-288)<td><a href="#" name="6">(298-314)</a><td align="center"><font color="#5a0000">33</font>
<tr onclick='openModal("#38a4a5")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#38a4a5"><font color="#38a4a5">-</font><td><a href="#" name="7">(159-171)<td><a href="#" name="7">(26-37)</a><td align="center"><font color="#550000">31</font>
<tr onclick='openModal("#c58917")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#c58917"><font color="#c58917">-</font><td><a href="#" name="8">(21-30)<td><a href="#" name="8">(41-50)</a><td align="center"><font color="#520000">30</font>
<tr onclick='openModal("#83a33a")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#83a33a"><font color="#83a33a">-</font><td><a href="#" name="9">(10-16)<td><a href="#" name="9">(187-193)</a><td align="center"><font color="#440000">25</font>
<tr onclick='openModal("#ad5910")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#ad5910"><font color="#ad5910">-</font><td><a href="#" name="10">(323-336)<td><a href="#" name="10">(374-385)</a><td align="center"><font color="#3f0000">23</font>
<tr onclick='openModal("#b041ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#b041ff"><font color="#b041ff">-</font><td><a href="#" name="11">(337-346)<td><a href="#" name="11">(390-398)</a><td align="center"><font color="#390000">21</font>
<tr onclick='openModal("#571b7e")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#571b7e"><font color="#571b7e">-</font><td><a href="#" name="12">(136-144)<td><a href="#" name="12">(456-464)</a><td align="center"><font color="#340000">19</font>
<tr onclick='openModal("#3b9c9c")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#3b9c9c"><font color="#3b9c9c">-</font><td><a href="#" name="13">(68-74)<td><a href="#" name="13">(51-56)</a><td align="center"><font color="#260000">14</font>
</td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>test_networksimplex.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 import pytest
2 import networkx as nx
3 import os
4 @pytest.fixture
5     G = nx.DiGraph()
6     G.add_node("a", demand=0)
7     G<font color="#83a33a"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>.add_node("b", demand=-5)
8     G.add_node("c", demand=50000000)
9     G.add_node("d", demand=-49999995)
10     G.add_edge("a", "b", weight=3, capacity=4)
11     G.add_edge("a", "c", weight=6, capacity=10)
12     G.add_edge("b", "d", weight=1, capacity=9)
13     G.add_edge("c", "d", weight=2, capacity=</b></font>5)
14     return G
15 @pytest.fixture
16 <font color="#c58917"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>def simple_no_flow_graph():
17     G = nx.DiGraph()
18     G.add_node("s", demand=-5)
19     G.add_node("t", demand=5)
20     G.add_edge("s", "a", weight=1, capacity=3)
21     G.add_edge("a", "b", weight=3)
22     G.add_edge("a", "c", weight=-6)
23     G.add_edge("b", "d", weight=1)
24     G.add_edge("c", "d", weight=-2)
25     G.add_edge("d", "t", weight=1, capacity=</b></font>3)
26     return G
27 def get_flowcost_from_flowdict(G, flowDict):
28     flowCost = 0
29     for u in flowDict.keys():
30         for v in flowDict[u].keys():
31             flowCost += flowDict[u][v] * G[u][v]["weight"]
32     return flowCost
33 def test_infinite_demand_raise(simple_flow_graph):
34     G = simple_flow_graph
35     inf = float("inf")
36     nx.set_node_attributes(G, {"a": {"demand": inf}})
37     pytest.raises(nx.NetworkXError, nx.network_simplex, G)
38 def test_neg_infinite_demand_raise(simple_flow_graph):
39     G = simple_flow_graph
40     inf = float("inf")
41     nx.set_node_attributes(G, {"a": {"demand": -inf}})
42     pytest.raises(nx.NetworkXError, nx.network_simplex, G)
43 def test_infinite_weight_raise(simple_flow_graph):
44     G = simple_flow_graph
45     inf = float("inf")
46     nx.set_edge_attributes(
47         G, {("a", "b"): {"weight": inf}, ("b", "d"): {"weight": inf}}
48     )
49     pytest.raises(nx.NetworkXError, nx.network_simplex, G)
50 def test_nonzero_net_demand_raise(simple_flow_graph):
51     G = simple_flow_graph
52     nx<font color="#3b9c9c"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>.set_node_attributes(G, {"b": {"demand": -4}})
53     pytest.raises(nx.NetworkXUnfeasible, nx.network_simplex, G)
54 def test_negative_capacity_raise(simple_flow_graph):
55     G = simple_flow_graph
56     nx.set_edge_attributes(G, {(</b></font>"a", "b"): {"weight": 1}, ("b", "d"): {"capacity": -9}})
57     pytest.raises(nx.NetworkXUnfeasible, nx.network_simplex, G)
58 def test_no_flow_satisfying_demands(simple_no_flow_graph):
59     G = simple_no_flow_graph
60     pytest.raises(nx.NetworkXUnfeasible, nx.network_simplex, G)
61 def test_sum_demands_not_zero(simple_no_flow_graph):
62     G = simple_no_flow_graph
63     nx.set_node_attributes(G, {"t": {"demand": 4}})
64     pytest.raises(nx.NetworkXUnfeasible, nx.network_simplex, G)
65 def test_google_or_tools_example():
66     G = nx.DiGraph()
67     start_nodes = [0, 0, 1, 1, 1, 2, 2, 3, 4]
68     end_nodes = [1, 2, 2, 3, 4, 3, 4, 4, 2]
69     capacities = [15, 8, 20, 4, 10, 15, 4, 20, 5]
70     unit_costs = [4, 4, 2, 2, 6, 1, 3, 2, 3]
71     supplies = [20, 0, 0, -5, -15]
72     answer = 150
73     for i in range(len(supplies)):
74         G.add_node(i, demand=(-1) * supplies[i])  # supplies are negative of demand
75     for i in range(len(start_nodes)):
76         G.add_edge(
77             start_nodes[i], end_nodes[i], weight=unit_costs[i], capacity=capacities[i]
78         )
79     flowCost, flowDict = nx.network_simplex(G)
80     assert flowCost == answer
81     assert flowCost == get_flowcost_from_flowdict(G, flowDict)
82 def test_google_or_tools_example2():
83     G = nx.DiGraph()
84     start_nodes = [0, 0, 1, 1, 1, 2, 2, 3, 4, 3]
85     end_nodes = [1, 2, 2, 3, 4, 3, 4, 4, 2, 5]
86     capacities = [15, 8, 20, 4, 10, 15, 4, 20, 5, 10]
87     unit_costs = [4, 4, 2, 2, 6, 1, 3, 2, 3, 4]
88     supplies = [23, 0, 0, -5, -15, -3]
89     answer = 183
90     for i in range(len(supplies)):
91         G.add_node(i, demand=(-1) * supplies[i])  # supplies are negative of demand
92     for i in range(len(start_nodes)):
93         G.add_edge(
94             start_nodes[i], end_nodes[i], weight=unit_costs[i], capacity=capacities[i]
95         )
96     flowCost, flowDict = nx.network_simplex(G)
97     assert flowCost == answer
98     assert flowCost == get_flowcost_from_flowdict(<font color="#571b7e"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>G, flowDict)
99 def test_large():
100     fname = os.path.join(os.path.dirname(__file__), "netgen-2.gpickle.bz2")
101     G = nx.read_gpickle(fname)
102     flowCost, flowDict = nx.network_simplex(G)
103     assert 6749969302 == flowCost
104 <font color="#151b8d"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>def test_simple_digraph():
105     G = nx.DiGraph()
106     G.add_node("a", demand=-5)
107     G.add_node("d", demand=5)
108     G.add_edge("a", "b", weight=3, capacity=4)
109     G.add_edge("a", "c", weight=6, capacity=10)
110     G.add_edge("b", "d", weight=1, capacity=9)
111     G.add_edge("c", "d", weight=2, capacity=5)
112     flowCost, H = nx.network_simplex(G)
113     assert flowCost == 24
114     assert nx.min_cost_flow_cost(G) == 24
115     a<font color="#38a4a5"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>ssert</b></font> H == soln
116 def test_negcycle_infcap():
117     G = nx.DiGraph()
118     G.add_node("s", demand=-5)
119     G.add_node("t", demand=5)
120     G.add_edge("s", "a", weight=1, capacity=3)
121     G.add_edge("a", "b", weight=3)
122     G.add_edge("c", "a", weight=-6)
123     G.add_edge("d", "c", weight=-2)
124     G.add_edge("d", "t", weight=1, capacity=</b></font>3)
125     pytest<font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>.raises(nx.NetworkXUnfeasible, nx.network_simplex, G)
126 def test_transshipment():
127     G = nx.DiGraph()
128     G.add_node("a", demand=1)
129     G.add_node("b", demand=-2)
130     G.add_node("c", demand=-2)
131     G.add_node("d", demand=3)
132     G.add_node("e", demand=-4)
133     G.add_node("f", demand=-4)
134     G.add_node("g", demand=3)
135     G.add_node("h", demand=2)
136     G.add_node("r", demand=3)
137     G.add_edge("a", "c", weight=3)
138     G.add_edge("r", "a", weight=2)
139     G.add_edge("b", "a", weight=9)
140     G.add_edge("r", "c", weight=0)
141     G.add_edge("b", "r", weight=-6)
142     G.add_edge("c", "d", weight=5)
143     G.add_edge("e", "r", weight=4)
144     G.add_edge("e", "f", weight=3)
145     G.add_edge("h", "b", weight=4)
146     G.add_edge("f", "d", weight=7)
147     G.add_edge("f", "h", weight=12)
148     G.add_edge("g", "d", weight=12)
149     G.add_edge("f", "g", weight=-1)
150     G.add_edge("h", "g", weight=-10)
151     flowCost, H = nx.network_simplex(G)
152     soln = {
153         "a": {"c": 0},
154         "b": {"a": 0, "r": 2},
155         "c": {"d": 3},
156         "d": {},
157         "e": {"r": 3, "f": 1},
158         "f": {"d": 0, "g": 3, "h": 2},
159         "g": {"d": 0},
160         "h": {"b": 0, "g": 0},
161     }
162     assert flowCost == 41
163     a<font color="#53858b"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>ssert</b></font> H == soln
164 def test_digraph1():
165     G = nx.DiGraph()
166     G.add_node(1, demand=-20)
167     G.add_node(4, demand=5)
168     G.add_node(5, demand=15)
169     G.add_edges_from(
170         [
171             (1, 2, {"capacity": 15, "weight": 4}),
172             (1, 3, {"capacity": 8, "weight": 4}),
173             (2, 3, {"weight": 2}),
174             (2, 4, {"capacity": 4, "weight": 2}),
175             (2, 5, {"capacity": 10, "weight": 6}),
176             (3, 4, {"capacity": 15, "weight": 1}),
177             (3, 5, {"capacity": 5, "weight": 3}),
178             (4, 5, {"weight": 2}),
179             (5, 3, {"capacity": 4, "weight": 1}),
180         ]
181     )
182     flowCost, H = nx.network_simplex(G)
183     soln = {
184         1: {2: 12, 3: 8},
185         2: {3: 8, 4: 4, 5: 0},
186         3: {4: 11, 5: 5},
187         4: {5: 10},
188         5: {3: 0},
189     assert flowCost == 150
190     assert nx.min_cost_flow_cost(G) == 150
191     a<font color="#6cc417"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>ssert</b></font> H == soln
192 def test_zero_capacity_edges():
193     G = nx.DiGraph()
194     G.add_edges_from(
195         [
196             (1, 2, {"capacity": 1, "weight": 1}),
197             (1, 5, {"capacity": 1, "weight": 1}),
198             (2, 3, {"capacity": 0, "weight": 1}),
199             (2, 5, {"capacity": 1, "weight": 1}),
200             (5, 3, {"capacity": 2, "weight": 1}),
201             (5, 4, {"capacity": 0, "weight": 1}),
202             (3, 4, {"capacity": 2, "weight": 1}),
203         ]
204     )
205     G.nodes[1]["demand"] = -1
206     G.nodes[2]["demand"] = -1
207     G.nodes[4]["demand"] = 2
208     flowCost, H = nx.network_simplex(G)
209     assert flowCost == 6
210     assert nx.min_cost_flow_cost(G) == 6
211     a<font color="#8c8774"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>ssert</b></font> H == soln
212 def test_digon():
213     """Check if digons are handled properly. Taken from ticket
214     a<font color="#f63526"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>ssert</b></font> flowCost == 2857140
215 def test_deadend():
216     """Check if one-node cycles are handled properly. Taken from ticket
217     G = nx.DiGraph()
218     G.add_nodes_from(range(5), demand=0)
219     G.nodes[4]["demand"] = -13
220     G.nodes[3]["demand"] = 13
221     G.add_edges_from([(0, 2), (0, 3), (2, 1)], capacity=20, weight=0.1)
222     pytest.raises(nx.NetworkXUnfeasible, nx.network_simplex, G)
223 def test_infinite_capacity_neg_digon():
224     """An infinite capacity negative cost digon results in an unbounded
225     instance."""
226     nodes = [(1, {}), (2, {"demand": -4}), (3, {"demand": 4})]
227     edges = [
228         (1, 2, {"weight": -600}),
229         (2, 1, {"weight": 0}),
230         (2, 3, {"capacity": 5, "weight": 714285}),
231         (3, 2, {"capacity": 2, "weight": 0}),
232     ]
233     G = nx.DiGraph(edges)
234     G.add_nodes_from(nodes)
235     pytest.raises(nx.NetworkXUnbounded, nx.</b></font>network_simplex, G)
236 def test_multidigraph():
237     G = nx.MultiDiGraph()
238     G.add_weighted_edges_from([(1, 2, 1), (2, 3, 2)], weight="capacity")
239     flowCost, H <font color="#ad5910"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>= nx.network_simplex(G)
240     assert flowCost == 0
241     assert H == {1: {2: {0: 0}}, 2: {3: {0: 0}}, 3: {}}
242 def test_negative_selfloops():
243     """Negative selfloops should cause an exception if uncapacitated and
244     always be saturated otherwise.
245     """
246     G = nx.DiGraph()
247     G.add_edge(1, 1, weight=-1)
248     G[</b></font>1][1]["capacity"] = 2
249     flowCost, H <font color="#b041ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>= nx.network_simplex(G)
250     assert flowCost == -2
251     assert H == {1: {1: 2}}
252     G = nx.MultiDiGraph()
253     G.add_edge(1, 1, "x", weight=-1)
254     G.add_edge(1, 1, "y", weight=1)
255     G[</b></font>1][1]["x"]["capacity"] = 2
256     flowCost, H <font color="#980517"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>= nx.network_simplex(G)
257     assert flowCost == -2
258     assert H == {1: {1: {"x": 2, "y": 0}}}
259 def test_bone_shaped():
260     G = nx.DiGraph()
261     G.add_node(0, demand=-4)
262     G.add_node(1, demand=2)
263     G.add_node(2, demand=2)
264     G.add_node(3, demand=4)
265     G.add_node(4, demand=-2)
266     G.add_node(5, demand=-2)
267     G.add_edge(0, 1, capacity=4)
268     G.add_edge(0, 2, capacity=4)
269     G.add_edge(4, 3, capacity=4)
270     G.add_edge(5, 3, capacity=4)
271     G.add_edge(0, 3, capacity=0)
272     flowCost, H = nx.network_simplex(G)
273     assert flowCost == 0
274     assert H == {0: {1: 2, 2: 2, 3: 0}, 1: {}, 2: {}, 3: {}, 4: {3: 2}, 5: {3</b></font>: 2}}
275 def test_graphs_type_exceptions():
276     G = nx.Graph()
277     pytest.raises(nx.NetworkXNotImplemented, nx.network_simplex, G)
278     G = nx.MultiGraph()
279     pytest.raises(nx.NetworkXNotImplemented, nx.network_simplex, G)
280     G = nx.DiGraph()
281     pytest.raises(nx.NetworkXError, nx.network_simplex, G)
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>test_mincost.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 import networkx as nx
2 import pytest
3 import os
4 class TestMinCostFlow:
5     <font color="#151b8d"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>def test_simple_digraph(self):
6         G = nx.DiGraph()
7         G.add_node("a", demand=-5)
8         G.add_node("d", demand=5)
9         G.add_edge("a", "b", weight=3, capacity=4)
10         G.add_edge("a", "c", weight=6, capacity=10)
11         G.add_edge("b", "d", weight=1, capacity=9)
12         G.add_edge("c", "d", weight=2, capacity=5)
13         flowCost, H = nx.network_simplex(G)
14         soln = {"a": {"b": 4, "c": 1}, "b": {"d": 4}, "c": {"d": 1}, "d": {}}
15         assert flowCost == 24
16         assert nx.min_cost_flow_cost(G) == 24
17         assert</b></font> H == soln
18         assert nx.min_cost_flow(G) == soln
19         assert nx.cost_of_flow(G, H) == 24
20         assert flowCost == 24
21         assert nx.cost_of_flow(G, H) == 24
22         a<font color="#38a4a5"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>ssert H == soln
23     def test_negcycle_infcap(self):
24         G = nx.DiGraph()
25         G.add_node("s", demand=-5)
26         G.add_node("t", demand=5)
27         G.add_edge("s", "a", weight=1, capacity=3)
28         G.add_edge("a", "b", weight=3)
29         G.add_edge("c", "a", weight=-6)
30         G.add_edge("b", "d", weight=1)
31         G.add_edge("d", "c", weight=-2)
32         G.add_edge("d", "t", weight=1, capacity=</b></font>3)
33         pytest.raises(nx.NetworkXUnbounded, nx.capacity_scaling, G)
34     <font color="#c58917"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>def test_sum_demands_not_zero(self):
35         G = nx.DiGraph()
36         G.add_node("s", demand=-5)
37         G.add_node("t", demand=4)
38         G.add_edge("s", "a", weight=1, capacity=3)
39         G.add_edge("a", "b", weight=3)
40         G.add_edge("a", "c", weight=-6)
41         G.add_edge("c", "d", weight=-2)
42         G.add_edge("d", "t", weight=1, capacity=</b></font>3)
43         pytest<font color="#3b9c9c"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>.raises(nx.NetworkXUnfeasible, nx.network_simplex, G)
44         pytest.raises(nx.NetworkXUnfeasible, nx.capacity_scaling, G)
45     def test_no_flow_satisfying_demands(self):
46         G = nx.DiGraph()
47         G.</b></font>add_node("s", demand=-5)
48         G.add_node("t", demand=5)
49         G.add_edge("s", "a", weight=1, capacity=3)
50         G.add_edge("a", "b", weight=3)
51         G.add_edge("a", "c", weight=-6)
52         G.add_edge("b", "d", weight=1)
53         G.add_edge("d", "t", weight=1, capacity=3)
54         pytest.raises(nx.NetworkXUnfeasible, nx.network_simplex, G)
55         pytest<font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>.raises(nx.NetworkXUnfeasible, nx.capacity_scaling, G)
56     def test_transshipment(self):
57         G = nx.DiGraph()
58         G.add_node("a", demand=1)
59         G.add_node("b", demand=-2)
60         G.add_node("c", demand=-2)
61         G.add_node("d", demand=3)
62         G.add_node("e", demand=-4)
63         G.add_node("f", demand=-4)
64         G.add_node("g", demand=3)
65         G.add_node("h", demand=2)
66         G.add_node("r", demand=3)
67         G.add_edge("a", "c", weight=3)
68         G.add_edge("r", "a", weight=2)
69         G.add_edge("b", "a", weight=9)
70         G.add_edge("r", "c", weight=0)
71         G.add_edge("b", "r", weight=-6)
72         G.add_edge("c", "d", weight=5)
73         G.add_edge("e", "r", weight=4)
74         G.add_edge("e", "f", weight=3)
75         G.add_edge("h", "b", weight=4)
76         G.add_edge("f", "d", weight=7)
77         G.add_edge("f", "h", weight=12)
78         G.add_edge("g", "d", weight=12)
79         G.add_edge("f", "g", weight=-1)
80         G.add_edge("h", "g", weight=-10)
81         flowCost, H = nx.network_simplex(G)
82         soln = {
83             "a": {"c": 0},
84             "b": {"a": 0, "r": 2},
85             "c": {"d": 3},
86             "d": {},
87             "e": {"r": 3, "f": 1},
88             "f": {"d": 0, "g": 3, "h": 2},
89             "g": {"d": 0},
90             "h": {"b": 0, "g": 0},
91             "r": {"a": 1, "c": 1},
92         }
93         assert flowCost == 41
94         assert</b></font> nx.min_cost_flow_cost(G) == 41
95         assert H == soln
96         assert nx.min_cost_flow(G) == soln
97         assert nx.cost_of_flow(G, H) == 41
98         flowCost, H = nx.capacity_scaling(G)
99         assert flowCost == 41
100         assert nx.cost_of_flow(G, H) == 41
101         assert H == soln
102     def test_max_flow_min_cost(self):
103         G = nx.DiGraph()
104         G.add_edge("s", "a", bandwidth=6)
105         G.add_edge("s", "c", bandwidth=10, cost=10)
106         G.add_edge("a", "b", cost=6)
107         G.add_edge("b", "d", bandwidth=8, cost=7)
108         G.add_edge("c", "d", cost=10)
109         G.add_edge("d", "t", bandwidth=5, cost=5)
110         soln = {
111             "s": {"a": 5, "c": 0},
112             "a": {"b": 5},
113             "b": {"d": 5},
114             "c": {"d": 0},
115             "d": {"t": 5},
116             "t": {},
117         }
118         flow = nx.max_flow_min_cost(G, "s", "t", capacity="bandwidth", weight="cost")
119         assert flow == soln
120         assert nx.cost_of_flow(G, flow, weight="cost") == 90
121         G.add_edge("t", "s", cost=-100)
122         flowCost, flow = nx.capacity_scaling(G, capacity="bandwidth", weight="cost")
123         G.remove_edge("t", "s")
124         assert flowCost == -410
125         del flow["t"]["s"]
126         assert flow == soln
127         assert nx.cost_of_flow(G, flow, weight=<font color="#53858b"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>"cost") == 90
128     def test_digraph1(self):
129         G = nx.DiGraph()
130         G.add_node(1, demand=-20)
131         G.add_node(4, demand=5)
132         G.add_node(5, demand=15)
133         G.add_edges_from(
134             [
135                 (1, 2, {"capacity": 15, "weight": 4}),
136                 (1, 3, {"capacity": 8, "weight": 4}),
137                 (2, 3, {"weight": 2}),
138                 (2, 4, {"capacity": 4, "weight": 2}),
139                 (2, 5, {"capacity": 10, "weight": 6}),
140                 (3, 4, {"capacity": 15, "weight": 1}),
141                 (3, 5, {"capacity": 5, "weight": 3}),
142                 (4, 5, {"weight": 2}),
143                 (5, 3, {"capacity": 4, "weight": 1}),
144             ]
145         )
146         flowCost, H = nx.network_simplex(G)
147         soln = {
148             1: {2: 12, 3: 8},
149             2: {3: 8, 4: 4, 5: 0},
150             3: {4: 11, 5: 5},
151             4: {5: 10},
152             5: {3: 0},
153         }
154         assert flowCost == 150
155         assert nx.min_cost_flow_cost(G) == 150
156         assert</b></font> H == soln
157         assert nx.min_cost_flow(G) == soln
158         assert nx.cost_of_flow(G, H) == 150
159         flowCost, H = nx.capacity_scaling(G)
160         assert flowCost == 150
161         assert H == soln
162         assert nx.cost_of_flow(G, H) == 150
163     def test_digraph2(self):
164         G = nx.DiGraph()
165         G<font color="#83a33a"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>.add_edge("s", 1, capacity=12)
166         G.add_edge("s", 2, capacity=6)
167         G.add_edge("s", 3, capacity=14)
168         G.add_edge(1, 2, capacity=11, weight=4)
169         G.add_edge(2, 3, capacity=9, weight=6)
170         G.add_edge(1, 4, capacity=5, weight=5)
171         G.add_edge(1, 5, capacity=2, weight=</b></font>12)
172         G.add_edge(2, 5, capacity=4, weight=4)
173         G.add_edge(2, 6, capacity=2, weight=6)
174         G.add_edge(3, 6, capacity=31, weight=3)
175         G.add_edge(4, 5, capacity=18, weight=4)
176         G.add_edge(5, 6, capacity=9, weight=5)
177         G.add_edge(4, "t", capacity=3)
178         G.add_edge(5, "t", capacity=7)
179         G.add_edge(6, "t", capacity=22)
180         flow = nx.max_flow_min_cost(G, "s", "t")
181         soln = {
182             1: {2: 6, 4: 5, 5: 1},
183             2: {3: 6, 5: 4, 6: 2},
184             3: {6: 20},
185             4: {5: 2, "t": 3},
186             5: {6: 0, "t": 7},
187             6: {"t": 22},
188             "s": {1: 12, 2: 6, 3: 14},
189             "t": {},
190         }
191         assert flow == soln
192         G.add_edge("t", "s", weight=-100)
193         flowCost, flow = nx.capacity_scaling(G)
194         G.remove_edge("t", "s")
195         assert flow["t"]["s"] == 32
196         assert flowCost == -3007
197         del flow["t"]["s"]
198         assert flow == soln
199         assert nx.cost_of_flow(G, flow) == 193
200     def test_digraph3(self):
201         """Combinatorial Optimization: Algorithms and Complexity,
202         Papadimitriou Steiglitz at page 140 has an example, 7.1, but that
203         admits multiple solutions, so I alter it a bit. From ticket #430
204         by mfrasca."""
205         G = nx.DiGraph()
206         G.add_edge("s", "a")
207         G["s"]["a"].update({0: 2, 1: 4})
208         G.add_edge("s", "b")
209         G["s"]["b"].update({0: 2, 1: 1})
210         G.add_edge("a", "b")
211         G["a"]["b"].update({0: 5, 1: 2})
212         G.add_edge("a", "t")
213         G["a"]["t"].update({0: 1, 1: 5})
214         G.add_edge("b", "a")
215         G["b"]["a"].update({0: 1, 1: 3})
216         G.add_edge("b", "t")
217         G["b"]["t"].update({0: 3, 1: 2})
218         "PS.ex.7.1: testing main function"
219         sol = nx.max_flow_min_cost(G, "s", "t", capacity=0, weight=1)
220         flow = sum(v for v in sol["s"].values())
221         assert 4 == flow
222         assert 23 == nx.cost_of_flow(G, sol, weight=1)
223         assert sol["s"] == {"a": 2, "b": 2}
224         assert sol["a"] == {"b": 1, "t": 1}
225         assert sol["b"] == {"a": 0, "t": 3}
226         assert sol["t"] == {}
227         G.add_edge("t", "s")
228         G["t"]["s"].update({1: -100})
229         flowCost, sol = nx.capacity_scaling(G, capacity=0, weight=1)
230         G.remove_edge("t", "s")
231         flow = sum(v for v in sol["s"].values())
232         assert 4 == flow
233         assert sol["t"]["s"] == 4
234         assert flowCost == -377
235         del sol["t"]["s"]
236         assert sol["s"] == {"a": 2, "b": 2}
237         assert sol["b"] == {"a": 0, "t": 3}
238         assert sol["t"] == {}
239         assert nx.cost_of_flow(G, sol, weight=<font color="#6cc417"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>1) == 23
240     def test_zero_capacity_edges(self):
241         G = nx.DiGraph()
242         G.add_edges_from(
243             [
244                 (1, 2, {"capacity": 1, "weight": 1}),
245                 (1, 5, {"capacity": 1, "weight": 1}),
246                 (2, 3, {"capacity": 0, "weight": 1}),
247                 (2, 5, {"capacity": 1, "weight": 1}),
248                 (5, 3, {"capacity": 2, "weight": 1}),
249                 (5, 4, {"capacity": 0, "weight": 1}),
250                 (3, 4, {"capacity": 2, "weight": 1}),
251             ]
252         )
253         G.nodes[1]["demand"] = -1
254         G.nodes[2]["demand"] = -1
255         G.nodes[4]["demand"] = 2
256         flowCost, H = nx.network_simplex(G)
257         soln = {1: {2: 0, 5: 1}, 2: {3: 0, 5: 1}, 3: {4: 2}, 4: {}, 5: {3: 2, 4: 0}}
258         assert flowCost == 6
259         assert nx.min_cost_flow_cost(G) == 6
260         assert</b></font> H == soln
261         assert nx.min_cost_flow(G) == soln
262         assert nx.cost_of_flow(G, H) == 6
263         assert flowCost == 6
264         assert H == soln
265         assert nx.cost_of_flow(<font color="#8c8774"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>G, H) == 6
266     def test_digon(self):
267         """Check if digons are handled properly. Taken from ticket
268         nodes = [(1, {}), (2, {"demand": -4}), (3, {"demand": 4})]
269         edges = [
270             (1, 2, {"capacity": 3, "weight": 600000}),
271             (2, 1, {"capacity": 2, "weight": 0}),
272             (2, 3, {"capacity": 5, "weight": 714285}),
273             (3, 2, {"capacity": 2, "weight": 0}),
274         ]
275         G = nx.DiGraph(edges)
276         G.add_nodes_from(nodes)
277         flowCost, H = nx.network_simplex(G)
278         soln = {1: {2: 0}, 2: {1: 0, 3: 4}, 3: {2: 0}}
279         assert</b></font> flowCost == 2857140
280         assert nx.min_cost_flow_cost(G) == 2857140
281         assert H == soln
282         assert nx.min_cost_flow(G) == soln
283         assert nx.cost_of_flow(G, H) == 2857140
284         assert flowCost == 2857140
285         assert H == soln
286         assert nx.cost_of_flow(<font color="#f63526"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>G, H) == 2857140
287     def test_deadend(self):
288         """Check if one-node cycles are handled properly. Taken from ticket
289         G = nx.DiGraph()
290         G.add_nodes_from(range(5), demand=0)
291         G.nodes[4]["demand"] = -13
292         G.nodes[3]["demand"] = 13
293         G.add_edges_from([(0, 2), (0, 3), (2, 1)], capacity=20, weight=0.1)
294         pytest.raises(nx.NetworkXUnfeasible, nx.min_cost_flow, G)
295     def test_infinite_capacity_neg_digon(self):
296         """An infinite capacity negative cost digon results in an unbounded
297         instance."""
298         nodes = [(1, {}), (2, {"demand": -4}), (3, {"demand": 4})]
299         edges = [
300             (1, 2, {"weight": -600}),
301             (2, 1, {"weight": 0}),
302             (2, 3, {"capacity": 5, "weight": 714285}),
303             (3, 2, {"capacity": 2, "weight": 0}),
304         ]
305         G = nx.DiGraph(edges)
306         G.add_nodes_from(nodes)
307         pytest.raises(nx.NetworkXUnbounded, nx.</b></font>network_simplex, G)
308         pytest.raises(nx.NetworkXUnbounded, nx.capacity_scaling, G)
309     def test_finite_capacity_neg_digon(self):
310         """The digon should receive the maximum amount of flow it can handle.
311         Taken from ticket #749 by @chuongdo."""
312         G = nx.DiGraph()
313         G.add_edge("a", "b", capacity=1, weight=-1)
314         G.add_edge("b", "a", capacity=1, weight=-1)
315         min_cost = -2
316         assert nx.min_cost_flow_cost(G) == min_cost
317         flowCost, H = nx.capacity_scaling(G)
318         assert flowCost == -2
319         assert H == {"a": {"b": 1}, "b": {"a": 1}}
320         assert nx.cost_of_flow(G, H) == -2
321     def test_multidigraph(self):
322         G = nx.MultiDiGraph()
323         G.add_weighted_edges_from([(1, 2, 1), (2, 3, 2)], weight="capacity")
324         flowCost, H = nx.network_simplex(G)
325         assert H == {1: {2: {0: 0}}, 2: {3: {0: 0}}, 3: {}}
326         flowCost, H <font color="#ad5910"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>= nx.capacity_scaling(G)
327         assert flowCost == 0
328         assert H == {1: {2: {0: 0}}, 2: {3: {0: 0}}, 3: {}}
329     def test_negative_selfloops(self):
330         """Negative selfloops should cause an exception if uncapacitated and
331         always be saturated otherwise.
332         """
333         G = nx.DiGraph()
334         G.add_edge(1, 1, weight=-1)
335         pytest.raises(nx.NetworkXUnbounded, nx.network_simplex, G)
336         pytest.</b></font>raises(nx.NetworkXUnbounded, nx.capacity_scaling, G)
337         G[1][1]["capacity"] = 2
338         assert flowCost == -2
339         assert H == {1: {1: 2}}
340         flowCost, H <font color="#b041ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>= nx.capacity_scaling(G)
341         assert flowCost == -2
342         assert H == {1: {1: 2}}
343         G = nx.MultiDiGraph()
344         G.add_edge(1, 1, "x", weight=-1)
345         G.add_edge(1, 1, "y", weight=1)
346         pytest.raises(nx.NetworkXUnbounded, nx.network_simplex, G)
347         pytest.</b></font>raises(nx.NetworkXUnbounded, nx.capacity_scaling, G)
348         G[1][1]["x"]["capacity"] = 2
349         assert flowCost == -2
350         assert H == {1: {1: {"x": 2, "y": 0}}}
351         flowCost, H <font color="#980517"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>= nx.capacity_scaling(G)
352         assert flowCost == -2
353         assert H == {1: {1: {"x": 2, "y": 0}}}
354     def test_bone_shaped(self):
355         G = nx.DiGraph()
356         G.add_node(0, demand=-4)
357         G.add_node(1, demand=2)
358         G.add_node(2, demand=2)
359         G.add_node(3, demand=4)
360         G.add_node(4, demand=-2)
361         G.add_node(5, demand=-2)
362         G.add_edge(0, 1, capacity=4)
363         G.add_edge(0, 2, capacity=4)
364         G.add_edge(4, 3, capacity=4)
365         G.add_edge(5, 3, capacity=4)
366         G.add_edge(0, 3, capacity=0)
367         flowCost, H = nx.network_simplex(G)
368         assert flowCost == 0
369         assert H == {0: {1: 2, 2: 2, 3: 0}, 1: {}, 2: {}, 3: {}, 4: {3: 2}, 5: {3</b></font>: 2}}
370         flowCost, H = nx.capacity_scaling(G)
371         assert flowCost == 0
372         assert H == {0: {1: 2, 2: 2, 3: 0}, 1: {}, 2: {}, 3: {}, 4: {3: 2}, 5: {3: 2}}
373     def test_exceptions(self):
374         G = nx.Graph()
375         pytest.raises(nx.NetworkXNotImplemented, nx.network_simplex, G)
376         pytest.raises(nx.NetworkXNotImplemented, nx.capacity_scaling, G)
377         G = nx.MultiGraph()
378         pytest.raises(nx.NetworkXNotImplemented, nx.network_simplex, G)
379         pytest.raises(nx.NetworkXNotImplemented, nx.capacity_scaling, G)
380         G = nx.DiGraph()
381         pytest.raises(nx.NetworkXError, nx.network_simplex, G)
382         pytest.raises(nx.NetworkXError, nx.capacity_scaling, G)
383         G.add_node(0, demand=float("inf"))
384         pytest.raises(nx.NetworkXError, nx.network_simplex, G)
385         pytest.raises(nx.NetworkXUnfeasible, nx.capacity_scaling, G)
386         G.nodes[0]["demand"] = 0
387         G.add_node(1, demand=0)
388         G.add_edge(0, 1, weight=-float("inf"))
389         pytest.raises(nx.NetworkXError, nx.network_simplex, G)
390         pytest.raises(nx.NetworkXUnfeasible, nx.capacity_scaling, G)
391         G[0][1]["weight"] = 0
392         G.add_edge(0, 0, weight=float("inf"))
393         pytest.raises(nx.NetworkXError, nx.network_simplex, G)
394         G[0][0]["weight"] = 0
395         G[0][1]["capacity"] = -1
396         pytest.raises(nx.NetworkXUnfeasible, nx.network_simplex, G)
397         G[0][1]["capacity"] = 0
398         G[0][0]["capacity"] = -1
399         pytest.raises(nx.NetworkXUnfeasible, nx.<font color="#571b7e"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>network_simplex, G)
400     def test_large(self):
401         fname = os.path.join(os.path.dirname(__file__), "netgen-2.gpickle.bz2")
402         G = nx.read_gpickle(fname)
403         flowCost, flowDict = nx.network_simplex(G)
404         assert 6749969302 == flowCost
405         assert 6749969302 == nx.cost_of_flow(</b></font>G, flowDict)
406         flowCost, flowDict = nx.capacity_scaling(G)
407         assert 6749969302 == flowCost
408         assert 6749969302 == nx.cost_of_flow(G, flowDict)
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
