<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for neteasemusic.py &amp; test_jsinterp.py</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for neteasemusic.py &amp; test_jsinterp.py
      </h3>
<h1 align="center">
        3.5%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>neteasemusic.py (2.6565466%)<th>test_jsinterp.py (5.426357%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(180-182)<td><a href="#" name="0">(123-134)</a><td align="center"><font color="#ff0000">14</font>
</td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>neteasemusic.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 from __future__ import unicode_literals
2 from hashlib import md5
3 from base64 import b64encode
4 from datetime import datetime
5 import re
6 from .common import InfoExtractor
7 from ..compat import (
8     compat_urllib_parse_urlencode,
9     compat_str,
10     compat_itertools_count,
11 )
12 from ..utils import (
13     sanitized_Request,
14     float_or_none,
15 )
16 class NetEaseMusicBaseIE(InfoExtractor):
17     _FORMATS = ['bMusic', 'mMusic', 'hMusic']
18     _NETEASE_SALT = '3go8&amp;$8*3*3h0k(2)2'
19     _API_BASE = 'http://music.163.com/api/'
20     @classmethod
21     def _encrypt(cls, dfsid):
22         salt_bytes = bytearray(cls._NETEASE_SALT.encode('utf-8'))
23         string_bytes = bytearray(compat_str(dfsid).encode('ascii'))
24         salt_len = len(salt_bytes)
25         for i in range(len(string_bytes)):
26             string_bytes[i] = string_bytes[i] ^ salt_bytes[i % salt_len]
27         m = md5()
28         m.update(bytes(string_bytes))
29         result = b64encode(m.digest()).decode('ascii')
30         return result.replace('/', '_').replace('+', '-')
31     def extract_formats(self, info):
32         formats = []
33         for song_format in self._FORMATS:
34             details = info.get(song_format)
35             if not details:
36                 continue
37             song_file_path = '/%s/%s.%s' % (
38                 self._encrypt(details['dfsId']), details['dfsId'], details['extension'])
39             for host in ('http://m5.music.126.net', 'http://115.231.74.139/m1.music.126.net',
40                          'http://124.40.233.182/m1.music.126.net', 'http://203.130.59.9/m1.music.126.net'):
41                 song_url = host + song_file_path
42                 if self._is_valid_url(song_url, info['id'], 'song'):
43                     formats.append({
44                         'url': song_url,
45                         'ext': details.get('extension'),
46                         'abr': float_or_none(details.get('bitrate'), scale=1000),
47                         'format_id': song_format,
48                         'filesize': details.get('size'),
49                         'asr': details.get('sr')
50                     })
51                     break
52         return formats
53     @classmethod
54     def convert_milliseconds(cls, ms):
55         return int(round(ms / 1000.0))
56     def query_api(self, endpoint, video_id, note):
57         req = sanitized_Request('%s%s' % (self._API_BASE, endpoint))
58         req.add_header('Referer', self._API_BASE)
59         return self._download_json(req, video_id, note)
60 class NetEaseMusicIE(NetEaseMusicBaseIE):
61     IE_NAME = 'netease:song'
62     IE_DESC = '网易云音乐'
63     _VALID_URL = r'https?://music\.163\.com/(#/)?song\?id=(?P&lt;id&gt;[0-9]+)'
64     _TESTS = [{
65         'url': 'http://music.163.com/#/song?id=32102397',
66         'md5': 'f2e97280e6345c74ba9d5677dd5dcb45',
67         'info_dict': {
68             'id': '32102397',
69             'ext': 'mp3',
70             'title': 'Bad Blood (feat. Kendrick Lamar)',
71             'creator': 'Taylor Swift / Kendrick Lamar',
72             'upload_date': '20150517',
73             'timestamp': 1431878400,
74             'description': 'md5:a10a54589c2860300d02e1de821eb2ef',
75         },
76         'skip': 'Blocked outside Mainland China',
77     }, {
78         'note': 'No lyrics translation.',
79         'url': 'http://music.163.com/#/song?id=29822014',
80         'info_dict': {
81             'id': '29822014',
82             'ext': 'mp3',
83             'title': '听见下雨的声音',
84             'creator': '周杰伦',
85             'upload_date': '20141225',
86             'timestamp': 1419523200,
87             'description': 'md5:a4d8d89f44656af206b7b2555c0bce6c',
88         },
89         'skip': 'Blocked outside Mainland China',
90     }, {
91         'note': 'No lyrics.',
92         'url': 'http://music.163.com/song?id=17241424',
93         'info_dict': {
94             'id': '17241424',
95             'ext': 'mp3',
96             'title': 'Opus 28',
97             'creator': 'Dustin O\'Halloran',
98             'upload_date': '20080211',
99             'timestamp': 1202745600,
100         },
101         'skip': 'Blocked outside Mainland China',
102     }, {
103         'note': 'Has translated name.',
104         'url': 'http://music.163.com/#/song?id=22735043',
105         'info_dict': {
106             'id': '22735043',
107             'ext': 'mp3',
108             'title': '소원을 말해봐 (Genie)',
109             'creator': '少女时代',
110             'description': 'md5:79d99cc560e4ca97e0c4d86800ee4184',
111             'upload_date': '20100127',
112             'timestamp': 1264608000,
113             'alt_title': '说出愿望吧(Genie)',
114         },
115         'skip': 'Blocked outside Mainland China',
116     }]
117     def _process_lyrics(self, lyrics_info):
118         original = lyrics_info.get('lrc', {}).get('lyric')
119         translated = lyrics_info.get('tlyric', {}).get('lyric')
120         if not translated:
121             return original
122         lyrics_expr = r'(\[[0-9]{2}:[0-9]{2}\.[0-9]{2,}\])([^\n]+)'
123         original_ts_texts = re.findall(lyrics_expr, original)
124         translation_ts_dict = dict(
125             (time_stamp, text) for time_stamp, text in re.findall(lyrics_expr, translated)
126         )
127         lyrics = '\n'.join([
128             '%s%s / %s' % (time_stamp, text, translation_ts_dict.get(time_stamp, ''))
129             for time_stamp, text in original_ts_texts
130         ])
131         return lyrics
132     def _real_extract(self, url):
133         song_id = self._match_id(url)
134         params = {
135             'id': song_id,
136             'ids': '[%s]' % song_id
137         }
138         info = self.query_api(
139             'song/detail?' + compat_urllib_parse_urlencode(params),
140             song_id, 'Downloading song info')['songs'][0]
141         formats = self.extract_formats(info)
142         self._sort_formats(formats)
143         lyrics_info = self.query_api(
144             'song/lyric?id=%s&amp;lv=-1&amp;tv=-1' % song_id,
145             song_id, 'Downloading lyrics data')
146         lyrics = self._process_lyrics(lyrics_info)
147         alt_title = None
148         if info.get('transNames'):
149             alt_title = '/'.join(info.get('transNames'))
150         return {
151             'id': song_id,
152             'alt_title': alt_title,
153             'creator': ' / '.join([artist['name'] for artist in info.get('artists', [])]),
154             'timestamp': self.convert_milliseconds<font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>(info.get('album', {}).get('publishTime')),
155             'thumbnail': info.get('album', {}).get('picUrl'),
156             'duration': self.convert_milliseconds(info.get(</b></font>'duration', 0)),
157             'description': lyrics,
158             'formats': formats,
159         }
160 class NetEaseMusicAlbumIE(NetEaseMusicBaseIE):
161     IE_NAME = 'netease:album'
162     IE_DESC = '网易云音乐 - 专辑'
163     _VALID_URL = r'https?://music\.163\.com/(#/)?album\?id=(?P&lt;id&gt;[0-9]+)'
164     _TEST = {
165         'url': 'http://music.163.com/#/album?id=220780',
166         'info_dict': {
167             'id': '220780',
168             'title': 'B\'day',
169         },
170         'playlist_count': 23,
171         'skip': 'Blocked outside Mainland China',
172     }
173     def _real_extract(self, url):
174         album_id = self._match_id(url)
175         info = self.query_api(
176             'album/%s?id=%s' % (album_id, album_id),
177             album_id, 'Downloading album data')['album']
178         name = info['name']
179         desc = info.get('description')
180         entries = [
181             self.url_result('http://music.163.com/#/song?id=%s' % song['id'],
182                             'NetEaseMusic', song['id'])
183             for song in info['songs']
184         ]
185         return self.playlist_result(entries, album_id, name, desc)
186 class NetEaseMusicSingerIE(NetEaseMusicBaseIE):
187     IE_NAME = 'netease:singer'
188     IE_DESC = '网易云音乐 - 歌手'
189     _VALID_URL = r'https?://music\.163\.com/(#/)?artist\?id=(?P&lt;id&gt;[0-9]+)'
190     _TESTS = [{
191         'note': 'Singer has aliases.',
192         'url': 'http://music.163.com/#/artist?id=10559',
193         'info_dict': {
194             'id': '10559',
195             'title': '张惠妹 - aMEI;阿密特',
196         },
197         'playlist_count': 50,
198         'skip': 'Blocked outside Mainland China',
199     }, {
200         'note': 'Singer has translated name.',
201         'url': 'http://music.163.com/#/artist?id=124098',
202         'info_dict': {
203             'id': '124098',
204             'title': '李昇基 - 이승기',
205         },
206         'playlist_count': 50,
207         'skip': 'Blocked outside Mainland China',
208     }]
209     def _real_extract(self, url):
210         singer_id = self._match_id(url)
211         info = self.query_api(
212             'artist/%s?id=%s' % (singer_id, singer_id),
213             singer_id, 'Downloading singer data')
214         name = info['artist']['name']
215         if info['artist']['trans']:
216             name = '%s - %s' % (name, info['artist']['trans'])
217         if info['artist']['alias']:
218             name = '%s - %s' % (name, ';'.join(info['artist']['alias']))
219         entries = [
220             self.url_result('http://music.163.com/#/song?id=%s' % song['id'],
221                             'NetEaseMusic', song['id'])
222             for song in info['hotSongs']
223         ]
224         return self.playlist_result(entries, singer_id, name)
225 class NetEaseMusicListIE(NetEaseMusicBaseIE):
226     IE_NAME = 'netease:playlist'
227     IE_DESC = '网易云音乐 - 歌单'
228     _VALID_URL = r'https?://music\.163\.com/(#/)?(playlist|discover/toplist)\?id=(?P&lt;id&gt;[0-9]+)'
229     _TESTS = [{
230         'url': 'http://music.163.com/#/playlist?id=79177352',
231         'info_dict': {
232             'id': '79177352',
233             'title': 'Billboard 2007 Top 100',
234             'description': 'md5:12fd0819cab2965b9583ace0f8b7b022'
235         },
236         'playlist_count': 99,
237         'skip': 'Blocked outside Mainland China',
238     }, {
239         'note': 'Toplist/Charts sample',
240         'url': 'http://music.163.com/#/discover/toplist?id=3733003',
241         'info_dict': {
242             'id': '3733003',
243             'title': 're:韩国Melon排行榜周榜 [0-9]{4}-[0-9]{2}-[0-9]{2}',
244             'description': 'md5:73ec782a612711cadc7872d9c1e134fc',
245         },
246         'playlist_count': 50,
247         'skip': 'Blocked outside Mainland China',
248     }]
249     def _real_extract(self, url):
250         list_id = self._match_id(url)
251         info = self.query_api(
252             'playlist/detail?id=%s&amp;lv=-1&amp;tv=-1' % list_id,
253             list_id, 'Downloading playlist data')['result']
254         name = info['name']
255         desc = info.get('description')
256         if info.get('specialType') == 10:  # is a chart/toplist
257             datestamp = datetime.fromtimestamp(
258                 self.convert_milliseconds(info['updateTime'])).strftime('%Y-%m-%d')
259             name = '%s %s' % (name, datestamp)
260         entries = [
261             self.url_result('http://music.163.com/#/song?id=%s' % song['id'],
262                             'NetEaseMusic', song['id'])
263             for song in info['tracks']
264         ]
265         return self.playlist_result(entries, list_id, name, desc)
266 class NetEaseMusicMvIE(NetEaseMusicBaseIE):
267     IE_NAME = 'netease:mv'
268     IE_DESC = '网易云音乐 - MV'
269     _VALID_URL = r'https?://music\.163\.com/(#/)?mv\?id=(?P&lt;id&gt;[0-9]+)'
270     _TEST = {
271         'url': 'http://music.163.com/#/mv?id=415350',
272         'info_dict': {
273             'id': '415350',
274             'ext': 'mp4',
275             'title': '이럴거면 그러지말지',
276             'description': '白雅言自作曲唱甜蜜爱情',
277             'creator': '白雅言',
278             'upload_date': '20150520',
279         },
280         'skip': 'Blocked outside Mainland China',
281     }
282     def _real_extract(self, url):
283         mv_id = self._match_id(url)
284         info = self.query_api(
285             'mv/detail?id=%s&amp;type=mp4' % mv_id,
286             mv_id, 'Downloading mv info')['data']
287         formats = [
288             {'url': mv_url, 'ext': 'mp4', 'format_id': '%sp' % brs, 'height': int(brs)}
289             for brs, mv_url in info['brs'].items()
290         ]
291         self._sort_formats(formats)
292         return {
293             'id': mv_id,
294             'title': info['name'],
295             'description': info.get('desc') or info.get('briefDesc'),
296             'creator': info['artistName'],
297             'upload_date': info['publishTime'].replace('-', ''),
298             'formats': formats,
299             'thumbnail': info.get('cover'),
300             'duration': self.convert_milliseconds(info.get('duration', 0)),
301         }
302 class NetEaseMusicProgramIE(NetEaseMusicBaseIE):
303     IE_NAME = 'netease:program'
304     IE_DESC = '网易云音乐 - 电台节目'
305     _VALID_URL = r'https?://music\.163\.com/(#/?)program\?id=(?P&lt;id&gt;[0-9]+)'
306     _TESTS = [{
307         'url': 'http://music.163.com/#/program?id=10109055',
308         'info_dict': {
309             'id': '10109055',
310             'ext': 'mp3',
311             'title': '不丹足球背后的故事',
312             'description': '喜马拉雅人的足球梦 ...',
313             'creator': '大话西藏',
314             'timestamp': 1434179342,
315             'upload_date': '20150613',
316             'duration': 900,
317         },
318         'skip': 'Blocked outside Mainland China',
319     }, {
320         'note': 'This program has accompanying songs.',
321         'url': 'http://music.163.com/#/program?id=10141022',
322         'info_dict': {
323             'id': '10141022',
324             'title': '25岁，你是自在如风的少年&lt;27°C&gt;',
325             'description': 'md5:8d594db46cc3e6509107ede70a4aaa3b',
326         },
327         'playlist_count': 4,
328         'skip': 'Blocked outside Mainland China',
329     }, {
330         'note': 'This program has accompanying songs.',
331         'url': 'http://music.163.com/#/program?id=10141022',
332         'info_dict': {
333             'id': '10141022',
334             'ext': 'mp3',
335             'title': '25岁，你是自在如风的少年&lt;27°C&gt;',
336             'description': 'md5:8d594db46cc3e6509107ede70a4aaa3b',
337             'timestamp': 1434450841,
338             'upload_date': '20150616',
339         },
340         'params': {
341             'noplaylist': True
342         },
343         'skip': 'Blocked outside Mainland China',
344     }]
345     def _real_extract(self, url):
346         program_id = self._match_id(url)
347         info = self.query_api(
348             'dj/program/detail?id=%s' % program_id,
349             program_id, 'Downloading program info')['program']
350         name = info['name']
351         description = info['description']
352         if not info['songs'] or self._downloader.params.get('noplaylist'):
353             if info['songs']:
354                 self.to_screen(
355                     'Downloading just the main audio %s because of --no-playlist'
356                     % info['mainSong']['id'])
357             formats = self.extract_formats(info['mainSong'])
358             self._sort_formats(formats)
359             return {
360                 'id': program_id,
361                 'title': name,
362                 'description': description,
363                 'creator': info['dj']['brand'],
364                 'timestamp': self.convert_milliseconds(info['createTime']),
365                 'thumbnail': info['coverUrl'],
366                 'duration': self.convert_milliseconds(info.get('duration', 0)),
367                 'formats': formats,
368             }
369         self.to_screen(
370             'Downloading playlist %s - add --no-playlist to just download the main audio %s'
371             % (program_id, info['mainSong']['id']))
372         song_ids = [info['mainSong']['id']]
373         song_ids.extend([song['id'] for song in info['songs']])
374         entries = [
375             self.url_result('http://music.163.com/#/song?id=%s' % song_id,
376                             'NetEaseMusic', song_id)
377             for song_id in song_ids
378         ]
379         return self.playlist_result(entries, program_id, name, description)
380 class NetEaseMusicDjRadioIE(NetEaseMusicBaseIE):
381     IE_NAME = 'netease:djradio'
382     IE_DESC = '网易云音乐 - 电台'
383     _VALID_URL = r'https?://music\.163\.com/(#/)?djradio\?id=(?P&lt;id&gt;[0-9]+)'
384     _TEST = {
385         'url': 'http://music.163.com/#/djradio?id=42',
386         'info_dict': {
387             'id': '42',
388             'title': '声音蔓延',
389             'description': 'md5:766220985cbd16fdd552f64c578a6b15'
390         },
391         'playlist_mincount': 40,
392         'skip': 'Blocked outside Mainland China',
393     }
394     _PAGE_SIZE = 1000
395     def _real_extract(self, url):
396         dj_id = self._match_id(url)
397         name = None
398         desc = None
399         entries = []
400         for offset in compat_itertools_count(start=0, step=self._PAGE_SIZE):
401             info = self.query_api(
402                 'dj/program/byradio?asc=false&amp;limit=%d&amp;radioId=%s&amp;offset=%d'
403                 % (self._PAGE_SIZE, dj_id, offset),
404                 dj_id, 'Downloading dj programs - %d' % offset)
405             entries.extend([
406                 self.url_result(
407                     'http://music.163.com/#/program?id=%s' % program['id'],
408                     'NetEaseMusicProgram', program['id'])
409                 for program in info['programs']
410             ])
411             if name is None:
412                 radio = info['programs'][0]['radio']
413                 name = radio['name']
414                 desc = radio['desc']
415             if not info['more']:
416                 break
417         return self.playlist_result(entries, dj_id, name, desc)
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>test_jsinterp.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 from __future__ import unicode_literals
2 import os
3 import sys
4 import unittest
5 sys.path.insert(0, os.path.dirname(os.path.dirname(os.path.abspath(__file__))))
6 from youtube_dl.jsinterp import JSInterpreter
7 class TestJSInterpreter(unittest.TestCase):
8     def test_basic(self):
9         jsi = JSInterpreter('function x(){;}')
10         self.assertEqual(jsi.call_function('x'), None)
11         jsi = JSInterpreter('function x3(){return 42;}')
12         self.assertEqual(jsi.call_function('x3'), 42)
13         jsi = JSInterpreter('var x5 = function(){return 42;}')
14         self.assertEqual(jsi.call_function('x5'), 42)
15     def test_calc(self):
16         jsi = JSInterpreter('function x4(a){return 2*a+1;}')
17         self.assertEqual(jsi.call_function('x4', 3), 7)
18     def test_empty_return(self):
19         jsi = JSInterpreter('function f(){return; y()}')
20         self.assertEqual(jsi.call_function('f'), None)
21     def test_morespace(self):
22         jsi = JSInterpreter('function x (a) { return 2 * a + 1 ; }')
23         self.assertEqual(jsi.call_function('x', 3), 7)
24         jsi = JSInterpreter('function f () { x =  2  ; return x; }')
25         self.assertEqual(jsi.call_function('f'), 2)
26     def test_strange_chars(self):
27         jsi = JSInterpreter('function $_xY1 ($_axY1) { var $_axY2 = $_axY1 + 1; return $_axY2; }')
28         self.assertEqual(jsi.call_function('$_xY1', 20), 21)
29     def test_operators(self):
30         jsi = JSInterpreter('function f(){return 1 &lt;&lt; 5;}')
31         self.assertEqual(jsi.call_function('f'), 32)
32         jsi = JSInterpreter('function f(){return 19 &amp; 21;}')
33         self.assertEqual(jsi.call_function('f'), 17)
34         jsi = JSInterpreter('function f(){return 11 &gt;&gt; 2;}')
35         self.assertEqual(jsi.call_function('f'), 2)
36     def test_array_access(self):
37         jsi = JSInterpreter('function f(){var x = [1,2,3]; x[0] = 4; x[0] = 5; x[2] = 7; return x;}')
38         self.assertEqual(jsi.call_function('f'), [5, 2, 7])
39     def test_parens(self):
40         jsi = JSInterpreter('function f(){return (1) + (2) * ((( (( (((((3)))))) )) ));}')
41         self.assertEqual(jsi.call_function('f'), 7)
42         jsi = JSInterpreter('function f(){return (1 + 2) * 3;}')
43         self.assertEqual(jsi.call_function('f'), 9)
44     def test_assignments(self):
45         jsi = JSInterpreter('function f(){var x = 20; x = 30 + 1; return x;}')
46         self.assertEqual(jsi.call_function('f'), 31)
47         jsi = JSInterpreter('function f(){var x = 20; x += 30 + 1; return x;}')
48         self.assertEqual(jsi.call_function('f'), 51)
49         jsi = JSInterpreter('function f(){var x = 20; x -= 30 + 1; return x;}')
50         self.assertEqual(jsi.call_function('f'), -11)
51     def test_comments(self):
52         'Skipping: Not yet fully implemented'
53         return
54         jsi = JSInterpreter('''
55         function x() {
56             var x = /* 1 + */ 2;
57             var y = /* 30
58             * 40 */ 50;
59             return x + y;
60         }
61         self.assertEqual(jsi.call_function('f'), 3)
62     def test_precedence(self):
63         jsi = JSInterpreter('''
64         function x() {
65             var a = [10, 20, 30, 40, 50];
66             var b = 6;
67             a[0]=a[b%a.length];
68             return a;
69         }''')
70         self.assertEqual(jsi.call_function('x'), [20, 20, 30, 40, 50])
71     def test_call(self):
72         jsi = JSInterpreter('''
73         function x() { return 2; }
74         function y(a) { return x() + a; }
75         function z() { return y(3); }
76     def test_switch(self):
77         jsi = JSInterpreter<font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>('''
78         function x(f) { switch(f){
79             case 1:f+=1;
80             case 2:f+=2;
81             case 3:f+=3;break;
82             case 4:f+=4;
83             default:f=0;
84         } return f }
85         ''')
86         self.assertEqual(jsi.call_function(</b></font>'x', 5), 0)
87     def test_switch_default(self):
88         jsi = JSInterpreter('''
89         function x(f) { switch(f){
90             case 2: f+=2;
91             default: f-=1;
92             case 5:
93             case 6: f+=6;
94             case 0: break;
95             case 1: f+=1;
96         } return f }
97         ''')
98         self.assertEqual(jsi.call_function('x', 1), 2)
99         self.assertEqual(jsi.call_function('x', 5), 11)
100         self.assertEqual(jsi.call_function('x', 9), 14)
101     def test_try(self):
102         jsi = JSInterpreter('''
103         function x() { try{return 10} catch(e){return 5} }
104         ''')
105         self.assertEqual(jsi.call_function('x'), 10)
106     def test_for_loop_continue(self):
107         jsi = JSInterpreter('''
108         function x() { a=0; for (i=0; i-10; i++) { continue; a++ } a }
109         ''')
110         self.assertEqual(jsi.call_function('x'), 0)
111     def test_for_loop_break(self):
112         jsi = JSInterpreter('''
113         function x() { a=0; for (i=0; i-10; i++) { break; a++ } a }
114         ''')
115         self.assertEqual(jsi.call_function('x'), 0)
116     def test_literal_list(self):
117         jsi = JSInterpreter('''
118         function x() { [1, 2, "asdf", [5, 6, 7]][3] }
119         ''')
120         self.assertEqual(jsi.call_function('x'), [5, 6, 7])
121     def test_comma(self):
122         jsi = JSInterpreter('''
123         function x() { a=5; a -= 1, a+=3; return a }
124         ''')
125         self.assertEqual(jsi.call_function('x'), 7)
126 if __name__ == '__main__':
127     unittest.main()
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
