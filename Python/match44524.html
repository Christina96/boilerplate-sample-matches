<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for medialaan.py &amp; viu.py</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for medialaan.py &amp; viu.py
      </h3>
<h1 align="center">
        14.0%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>medialaan.py (30.681818%)<th>viu.py (9.121622%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(88-95)<td><a href="#" name="0">(154-162)</a><td align="center"><font color="#ff0000">15</font>
<tr onclick='openModal("#f63526")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f63526"><font color="#f63526">-</font><td><a href="#" name="1">(83-88)<td><a href="#" name="1">(81-91)</a><td align="center"><font color="#cc0000">12</font>
</td></td></a></td></td></tr></td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>medialaan.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 from __future__ import unicode_literals
2 import re
3 from .common import InfoExtractor
4 from ..utils import (
5     extract_attributes,
6     int_or_none,
7     mimetype2ext,
8     parse_iso8601,
9 )
10 class MedialaanIE(InfoExtractor):
11     _VALID_URL = r'''(?x)
12                     https?://
13                         (?:
14                             (?:embed\.)?mychannels.video/embed/|
15                             embed\.mychannels\.video/(?:s(?:dk|cript)/)?production/|
16                             (?:www\.)?(?:
17                                 (?:
18                                     7sur7|
19                                     demorgen|
20                                     hln|
21                                     joe|
22                                     qmusic
23                                 )\.be|
24                                 (?:
25                                     [abe]d|
26                                     bndestem|
27                                     destentor|
28                                     gelderlander|
29                                     pzc|
30                                     tubantia|
31                                     volkskrant
32                                 )\.nl
33                             )/video/(?:[^/]+/)*[^/?&amp;#]+~p
34                         )
35                         (?P&lt;id&gt;\d+)
36                     '''
37     _TESTS = [{
38         'url': 'https://www.bndestem.nl/video/de-terugkeer-van-ally-de-aap-en-wie-vertrekt-er-nog-bij-nac~p193993',
39         'info_dict': {
40             'id': '193993',
41             'ext': 'mp4',
42             'title': 'De terugkeer van Ally de Aap en wie vertrekt er nog bij NAC?',
43             'timestamp': 1611663540,
44             'upload_date': '20210126',
45             'duration': 238,
46         },
47         'params': {
48             'skip_download': True,
49         },
50     }, {
51         'url': 'https://www.gelderlander.nl/video/kanalen/degelderlander~c320/series/snel-nieuws~s984/noodbevel-in-doetinchem-politie-stuurt-mensen-centrum-uit~p194093',
52         'only_matching': True,
53     }, {
54         'url': 'https://embed.mychannels.video/sdk/production/193993?options=TFTFF_default',
55         'only_matching': True,
56     }, {
57         'url': 'https://embed.mychannels.video/script/production/193993',
58         'only_matching': True,
59     }, {
60         'url': 'https://embed.mychannels.video/production/193993',
61         'only_matching': True,
62     }, {
63         'url': 'https://mychannels.video/embed/193993',
64         'only_matching': True,
65     }, {
66         'url': 'https://embed.mychannels.video/embed/193993',
67         'only_matching': True,
68     }]
69     @staticmethod
70     def _extract_urls(webpage):
71         entries = []
72         for element in re.findall(r'(&lt;div[^&gt;]+data-mychannels-type="video"[^&gt;]*&gt;)', webpage):
73             mychannels_id = extract_attributes(element).get('data-mychannels-id')
74             if mychannels_id:
75 <a name="1"></a>                entries.append('https://mychannels.video/embed/' + mychannels_id)
76         return entries
77     <font color="#f63526"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>def _real_extract(self, url):
78         production_id = self._match_id(url)
79 <a name="0"></a>        production = self._download_json(
80             'https://embed.mychannels.video/sdk/production/' + production_id,
81             production_id, query={'options': 'UUUU_default'})['productions'][0]
82         title =</b></font> production<font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>['title']
83         formats = []
84         for source in (production.get('sources') or []):
85             src = source.get('src')
86             if not src:
87                 continue
88             ext = mimetype2ext(source.get(</b></font>'type'))
89             if ext == 'm3u8':
90                 formats.extend(self._extract_m3u8_formats(
91                     src, production_id, 'mp4', 'm3u8_native',
92                     m3u8_id='hls', fatal=False))
93             else:
94                 formats.append({
95                     'ext': ext,
96                     'url': src,
97                 })
98         self._sort_formats(formats)
99         return {
100             'id': production_id,
101             'title': title,
102             'formats': formats,
103             'thumbnail': production.get('posterUrl'),
104             'timestamp': parse_iso8601(production.get('publicationDate'), ' '),
105             'duration': int_or_none(production.get('duration')) or None,
106         }
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>viu.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 from __future__ import unicode_literals
2 import re
3 from .common import InfoExtractor
4 from ..compat import (
5     compat_kwargs,
6     compat_str,
7 )
8 from ..utils import (
9     ExtractorError,
10     int_or_none,
11 )
12 class ViuBaseIE(InfoExtractor):
13     def _real_initialize(self):
14         viu_auth_res = self._request_webpage(
15             'https://www.viu.com/api/apps/v2/authenticate', None,
16             'Requesting Viu auth', query={
17                 'acct': 'test',
18                 'appid': 'viu_desktop',
19                 'fmt': 'json',
20                 'iid': 'guest',
21                 'languageid': 'default',
22                 'platform': 'desktop',
23                 'userid': 'guest',
24                 'useridtype': 'guest',
25                 'ver': '1.0'
26             }, headers=self.geo_verification_headers())
27         self._auth_token = viu_auth_res.info()['X-VIU-AUTH']
28     def _call_api(self, path, *args, **kwargs):
29         headers = self.geo_verification_headers()
30         headers.update({
31             'X-VIU-AUTH': self._auth_token
32         })
33         headers.update(kwargs.get('headers', {}))
34         kwargs['headers'] = headers
35         response = self._download_json(
36             'https://www.viu.com/api/' + path, *args,
37             **compat_kwargs(kwargs))['response']
38         if response.get('status') != 'success':
39             raise ExtractorError('%s said: %s' % (
40                 self.IE_NAME, response['message']), expected=True)
41         return response
42 class ViuIE(ViuBaseIE):
43     _VALID_URL = r'(?:viu:|https?://[^/]+\.viu\.com/[a-z]{2}/media/)(?P&lt;id&gt;\d+)'
44     _TESTS = [{
45         'url': 'https://www.viu.com/en/media/1116705532?containerId=playlist-22168059',
46         'info_dict': {
47             'id': '1116705532',
48             'ext': 'mp4',
49             'title': 'Citizen Khan - Ep 1',
50             'description': 'md5:d7ea1604f49e5ba79c212c551ce2110e',
51         },
52         'params': {
53             'skip_download': 'm3u8 download',
54         },
55         'skip': 'Geo-restricted to India',
56     }, {
57         'url': 'https://www.viu.com/en/media/1130599965',
58         'info_dict': {
59             'id': '1130599965',
60             'ext': 'mp4',
61             'title': 'Jealousy Incarnate - Episode 1',
62             'description': 'md5:d3d82375cab969415d2720b6894361e9',
63         },
64         'params': {
65             'skip_download': 'm3u8 download',
66         },
67         'skip': 'Geo-restricted to Indonesia',
68     }, {
69         'url': 'https://india.viu.com/en/media/1126286865',
70 <a name="1"></a>        'only_matching': True,
71     }]
72     <font color="#f63526"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>def _real_extract(self, url):
73         video_id = self._match_id(url)
74         video_data = self._call_api(
75             'clip/load', video_id, 'Downloading video data', query={
76                 'appid': 'viu_desktop',
77                 'fmt': 'json',
78                 'id': video_id
79             })['item'][0]
80         title =</b></font> video_data['title']
81         m3u8_url = None
82         url_path = video_data.get('urlpathd') or video_data.get('urlpath')
83         tdirforwhole = video_data.get('tdirforwhole')
84         hls_file = video_data.get('jwhlsfile')
85         if url_path and tdirforwhole and hls_file:
86             m3u8_url = '%s/%s/%s' % (url_path, tdirforwhole, hls_file)
87         else:
88             m3u8_url = video_data['href']
89         formats = self._extract_m3u8_formats(m3u8_url, video_id, 'mp4')
90         self._sort_formats(formats)
91         subtitles = {}
92         for key, value in video_data.items():
93             mobj = re.match(r'^subtitle_(?P&lt;lang&gt;[^_]+)_(?P&lt;ext&gt;(vtt|srt))', key)
94             if not mobj:
95                 continue
96             subtitles.setdefault(mobj.group('lang'), []).append({
97                 'url': value,
98                 'ext': mobj.group('ext')
99             })
100         return {
101             'id': video_id,
102             'title': title,
103             'description': video_data.get('description'),
104             'series': video_data.get('moviealbumshowname'),
105             'episode': title,
106             'episode_number': int_or_none(video_data.get('episodeno')),
107             'duration': int_or_none(video_data.get('duration')),
108             'formats': formats,
109             'subtitles': subtitles,
110         }
111 class ViuPlaylistIE(ViuBaseIE):
112     IE_NAME = 'viu:playlist'
113     _VALID_URL = r'https?://www\.viu\.com/[^/]+/listing/playlist-(?P&lt;id&gt;\d+)'
114     _TEST = {
115         'url': 'https://www.viu.com/en/listing/playlist-22461380',
116         'info_dict': {
117             'id': '22461380',
118             'title': 'The Good Wife',
119         },
120         'playlist_count': 16,
121         'skip': 'Geo-restricted to Indonesia',
122     }
123     def _real_extract(self, url):
124         playlist_id = self._match_id(url)
125         playlist_data = self._call_api(
126             'container/load', playlist_id,
127             'Downloading playlist info', query={
128 <a name="0"></a>                'appid': 'viu_desktop',
129                 'fmt': 'json',
130                 'id': 'playlist-' + playlist_id
131             })<font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>['container']
132         entries = []
133         for item in playlist_data.get('item', []):
134             item_id = item.get('id')
135             if not item_id:
136                 continue
137             item_id = compat_str(item_id)
138             entries.append(</b></font>self.url_result(
139                 'viu:' + item_id, 'Viu', item_id))
140         return self.playlist_result(
141             entries, playlist_id, playlist_data.get('title'))
142 class ViuOTTIE(InfoExtractor):
143     IE_NAME = 'viu:ott'
144     _VALID_URL = r'https?://(?:www\.)?viu\.com/ott/(?P&lt;country_code&gt;[a-z]{2})/[a-z]{2}-[a-z]{2}/vod/(?P&lt;id&gt;\d+)'
145     _TESTS = [{
146         'url': 'http://www.viu.com/ott/sg/en-us/vod/3421/The%20Prime%20Minister%20and%20I',
147         'info_dict': {
148             'id': '3421',
149             'ext': 'mp4',
150             'title': 'A New Beginning',
151             'description': 'md5:1e7486a619b6399b25ba6a41c0fe5b2c',
152         },
153         'params': {
154             'skip_download': 'm3u8 download',
155         },
156         'skip': 'Geo-restricted to Singapore',
157     }, {
158         'url': 'http://www.viu.com/ott/hk/zh-hk/vod/7123/%E5%A4%A7%E4%BA%BA%E5%A5%B3%E5%AD%90',
159         'info_dict': {
160             'id': '7123',
161             'ext': 'mp4',
162             'title': '這就是我的生活之道',
163             'description': 'md5:4eb0d8b08cf04fcdc6bbbeb16043434f',
164         },
165         'params': {
166             'skip_download': 'm3u8 download',
167         },
168         'skip': 'Geo-restricted to Hong Kong',
169     }]
170     _AREA_ID = {
171         'HK': 1,
172         'SG': 2,
173         'TH': 4,
174         'PH': 5,
175     }
176     def _real_extract(self, url):
177         country_code, video_id = re.match(self._VALID_URL, url).groups()
178         query = {
179             'r': 'vod/ajax-detail',
180             'platform_flag_label': 'web',
181             'product_id': video_id,
182         }
183         area_id = self._AREA_ID.get(country_code.upper())
184         if area_id:
185             query['area_id'] = area_id
186         product_data = self._download_json(
187             'http://www.viu.com/ott/%s/index.php' % country_code, video_id,
188             'Downloading video info', query=query)['data']
189         video_data = product_data.get('current_product')
190         if not video_data:
191             raise ExtractorError('This video is not available in your region.', expected=True)
192         stream_data = self._download_json(
193             'https://d1k2us671qcoau.cloudfront.net/distribute_web_%s.php' % country_code,
194             video_id, 'Downloading stream info', query={
195                 'ccs_product_id': video_data['ccs_product_id'],
196             }, headers={
197                 'Referer': url,
198                 'Origin': re.search(r'https?://[^/]+', url).group(0),
199             })['data']['stream']
200         stream_sizes = stream_data.get('size', {})
201         formats = []
202         for vid_format, stream_url in stream_data.get('url', {}).items():
203             height = int_or_none(self._search_regex(
204                 r's(\d+)p', vid_format, 'height', default=None))
205             formats.append({
206                 'format_id': vid_format,
207                 'url': stream_url,
208                 'height': height,
209                 'ext': 'mp4',
210                 'filesize': int_or_none(stream_sizes.get(vid_format))
211             })
212         self._sort_formats(formats)
213         subtitles = {}
214         for sub in video_data.get('subtitle', []):
215             sub_url = sub.get('url')
216             if not sub_url:
217                 continue
218             subtitles.setdefault(sub.get('name'), []).append({
219                 'url': sub_url,
220                 'ext': 'srt',
221             })
222         title = video_data['synopsis'].strip()
223         return {
224             'id': video_id,
225             'title': title,
226             'description': video_data.get('description'),
227             'series': product_data.get('series', {}).get('name'),
228             'episode': title,
229             'episode_number': int_or_none(video_data.get('number')),
230             'duration': int_or_none(stream_data.get('duration')),
231             'thumbnail': video_data.get('cover_image_url'),
232             'formats': formats,
233             'subtitles': subtitles,
234         }
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
