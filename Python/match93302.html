<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for vgtv.py &amp; nba.py</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for vgtv.py &amp; nba.py
      </h3>
<h1 align="center">
        6.7%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>vgtv.py (10.416667%)<th>nba.py (5.0%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(129-168)<td><a href="#" name="0">(127-167)</a><td align="center"><font color="#ff0000">13</font>
<tr onclick='openModal("#f63526")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f63526"><font color="#f63526">-</font><td><a href="#" name="1">(223-226)<td><a href="#" name="1">(208-212)</a><td align="center"><font color="#eb0000">12</font>
</td></td></a></td></td></tr></td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>vgtv.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 from __future__ import unicode_literals
2 import re
3 from .common import InfoExtractor
4 from .xstream import XstreamIE
5 from ..utils import (
6     ExtractorError,
7     float_or_none,
8     try_get,
9 )
10 class VGTVIE(XstreamIE):
11     IE_DESC = 'VGTV, BTTV, FTV, Aftenposten and Aftonbladet'
12     _GEO_BYPASS = False
13     _HOST_TO_APPNAME = {
14         'vgtv.no': 'vgtv',
15         'bt.no/tv': 'bttv',
16         'aftenbladet.no/tv': 'satv',
17         'fvn.no/fvntv': 'fvntv',
18         'aftenposten.no/webtv': 'aptv',
19         'ap.vgtv.no/webtv': 'aptv',
20         'tv.aftonbladet.se': 'abtv',
21         'tv.aftonbladet.se/abtv': 'abtv',
22         'www.aftonbladet.se/tv': 'abtv',
23     }
24     _APP_NAME_TO_VENDOR = {
25         'vgtv': 'vgtv',
26         'bttv': 'bt',
27         'satv': 'sa',
28         'fvntv': 'fvn',
29         'aptv': 'ap',
30         'abtv': 'ab',
31     }
32     _VALID_URL = r'''(?x)
33                     (?:https?://(?:www\.)?
34                     (?P&lt;host&gt;
35                         %s
36                     )
37                     /?
38                     (?:
39                         (?:\#!/)?(?:video|live)/|
40                         embed?.*id=|
41                         a(?:rticles)?/
42                     )|
43                     (?P&lt;appname&gt;
44                         %s
45                     ):)
46                     (?P&lt;id&gt;\d+)
47                     ''' % ('|'.join(_HOST_TO_APPNAME.keys()), '|'.join(_APP_NAME_TO_VENDOR.keys()))
48     _TESTS = [
49         {
50             'url': 'http://www.vgtv.no/#!/video/84196/hevnen-er-soet-episode-10-abu',
51             'md5': 'b8be7a234cebb840c0d512c78013e02f',
52             'info_dict': {
53                 'id': '84196',
54                 'ext': 'mp4',
55                 'title': 'Hevnen er søt: Episode 10 - Abu',
56                 'description': 'md5:e25e4badb5f544b04341e14abdc72234',
57                 'thumbnail': r're:^https?://.*\.jpg',
58                 'duration': 648.000,
59                 'timestamp': 1404626400,
60                 'upload_date': '20140706',
61                 'view_count': int,
62             },
63         },
64         {
65             'url': 'http://www.vgtv.no/#!/live/100764/opptak-vgtv-foelger-em-kvalifiseringen',
66             'info_dict': {
67                 'id': '100764',
68                 'ext': 'flv',
69                 'title': 'OPPTAK: VGTV følger EM-kvalifiseringen',
70                 'description': 'md5:3772d9c0dc2dff92a886b60039a7d4d3',
71                 'thumbnail': r're:^https?://.*\.jpg',
72                 'duration': 9103.0,
73                 'timestamp': 1410113864,
74                 'upload_date': '20140907',
75                 'view_count': int,
76             },
77             'params': {
78                 'skip_download': True,
79             },
80             'skip': 'Video is no longer available',
81         },
82         {
83             'url': 'http://www.vgtv.no/#!/live/113063/direkte-v75-fra-solvalla',
84             'info_dict': {
85                 'id': '113063',
86                 'ext': 'mp4',
87                 'title': 'V75 fra Solvalla 30.05.15',
88                 'description': 'md5:b3743425765355855f88e096acc93231',
89                 'thumbnail': r're:^https?://.*\.jpg',
90                 'duration': 25966,
91                 'timestamp': 1432975582,
92                 'upload_date': '20150530',
93                 'view_count': int,
94             },
95             'params': {
96                 'skip_download': True,
97             },
98         },
99         {
100             'url': 'http://www.aftenposten.no/webtv/#!/video/21039/trailer-sweatshop-i-can-t-take-any-more',
101             'md5': 'fd828cd29774a729bf4d4425fe192972',
102             'info_dict': {
103                 'id': '21039',
104                 'ext': 'mp4',
105                 'title': 'TRAILER: «SWEATSHOP» - I can´t take any more',
106                 'description': 'md5:21891f2b0dd7ec2f78d84a50e54f8238',
107                 'duration': 66,
108                 'timestamp': 1417002452,
109                 'upload_date': '20141126',
110                 'view_count': int,
111             'params': {
112                 <font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>'skip_download': True,
113             },
114         },
115         {
116             'url': 'http://www.bt.no/tv/#!/video/100250/norling-dette-er-forskjellen-paa-1-divisjon-og-eliteserien',
117             'only_matching': True,
118         },
119         {
120             'url': 'http://ap.vgtv.no/webtv#!/video/111084/de-nye-bysyklene-lettere-bedre-gir-stoerre-hjul-og-feste-til-mobil',
121             'only_matching': True,
122         },
123         {
124             'url': 'http://www.vgtv.no/#!/video/127205/inside-the-mind-of-favela-funk',
125             'only_matching': True,
126         },
127         {
128             'url': 'https://tv.aftonbladet.se/video/36015/vulkanutbrott-i-rymden-nu-slapper-nasa-bilderna',
129             'only_matching': True,
130         },
131         {
132             'url': 'http://tv.aftonbladet.se/abtv/articles/36015',
133             'only_matching': True,
134         },
135         {
136             'url': 'https://www.aftonbladet.se/tv/a/36015',
137             'only_matching': True,
138         },
139         {
140             'url': 'abtv:140026',
141             'only_matching': True,
142         },
143         {
144             'url': 'http://www.vgtv.no/video/84196/hevnen-er-soet-episode-10-abu',
145             'only_matching': True,
146         },
147     ]
148     def _real_extract(self, url):
149         mobj = re.match(</b></font>self._VALID_URL, url)
150         video_id = mobj.group('id')
151         host = mobj.group('host')
152         appname = self._HOST_TO_APPNAME[host] if host else mobj.group('appname')
153         vendor = self._APP_NAME_TO_VENDOR[appname]
154         data = self._download_json(
155             'http://svp.vg.no/svp/api/v1/%s/assets/%s?appName=%s-website'
156             % (vendor, video_id, appname),
157             video_id, 'Downloading media JSON')
158         if data.get('status') == 'inactive':
159             raise ExtractorError(
160                 'Video %s is no longer available' % video_id, expected=True)
161         info = {
162             'formats': [],
163         }
164         if len(video_id) == 5:
165             if appname == 'bttv':
166                 info = self._extract_video_info('btno', video_id)
167         streams = data['streamUrls']
168         stream_type = data.get('streamType')
169         is_live = stream_type == 'live'
170         formats = []
171         hls_url = streams.get('hls')
172         if hls_url:
173             formats.extend(self._extract_m3u8_formats(
174                 hls_url, video_id, 'mp4',
175                 entry_protocol='m3u8' if is_live else 'm3u8_native',
176                 m3u8_id='hls', fatal=False))
177         hds_url = streams.get('hds')
178         if hds_url:
179             hdcore_sign = 'hdcore=3.7.0'
180             f4m_formats = self._extract_f4m_formats(
181                 hds_url + '?%s' % hdcore_sign, video_id, f4m_id='hds', fatal=False)
182             if f4m_formats:
183                 for entry in f4m_formats:
184                     entry.update({'extra_param_to_segment_url': hdcore_sign})
185                     formats.append(entry)
186         mp4_urls = streams.get('pseudostreaming') or []
187         mp4_url = streams.get('mp4')
188         if mp4_url:
189             mp4_urls.append(mp4_url)
190         for mp4_url in mp4_urls:
191             format_info = {
192                 'url': mp4_url,
193             mobj = re.search(r'(\d+)_(\d+)_(\d+)', mp4_url)
194             if mobj:
195                 tbr = int<font color="#f63526"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>(mobj.group(3))
196                 format_info.update({
197                     'width': int(mobj.group(1)),
198                     'height': int(mobj.group(</b></font>2)),
199                     'tbr': tbr,
200                     'format_id': 'mp4-%s' % tbr,
201                 })
202             formats.append(format_info)
203         info['formats'].extend(formats)
204         if not info['formats']:
205             properties = try_get(
206                 data, lambda x: x['streamConfiguration']['properties'], list)
207             if properties and 'geoblocked' in properties:
208                 raise self.raise_geo_restricted(
209                     countries=[host.rpartition('.')[-1].partition('/')[0].upper()])
210         self._sort_formats(info['formats'])
211         info.update({
212             'id': video_id,
213             'title': self._live_title(data['title']) if is_live else data['title'],
214             'description': data['description'],
215             'thumbnail': data['images']['main'] + '?t[]=900x506q80',
216             'timestamp': data['published'],
217             'duration': float_or_none(data['duration'], 1000),
218             'view_count': data['displays'],
219             'is_live': is_live,
220         })
221         return info
222 class BTArticleIE(InfoExtractor):
223     IE_NAME = 'bt:article'
224     IE_DESC = 'Bergens Tidende Articles'
225     _VALID_URL = r'https?://(?:www\.)?bt\.no/(?:[^/]+/)+(?P&lt;id&gt;[^/]+)-\d+\.html'
226     _TEST = {
227         'url': 'http://www.bt.no/nyheter/lokalt/Kjemper-for-internatet-1788214.html',
228         'md5': '2acbe8ad129b3469d5ae51b1158878df',
229         'info_dict': {
230             'id': '23199',
231             'ext': 'mp4',
232             'title': 'Alrekstad internat',
233             'description': 'md5:dc81a9056c874fedb62fc48a300dac58',
234             'thumbnail': r're:^https?://.*\.jpg',
235             'duration': 191,
236             'timestamp': 1289991323,
237             'upload_date': '20101117',
238             'view_count': int,
239         },
240     }
241     def _real_extract(self, url):
242         webpage = self._download_webpage(url, self._match_id(url))
243         video_id = self._search_regex(
244             r'&lt;video[^&gt;]+data-id="(\d+)"', webpage, 'video id')
245         return self.url_result('bttv:%s' % video_id, 'VGTV')
246 class BTVestlendingenIE(InfoExtractor):
247     IE_NAME = 'bt:vestlendingen'
248     IE_DESC = 'Bergens Tidende - Vestlendingen'
249     _VALID_URL = r'https?://(?:www\.)?bt\.no/spesial/vestlendingen/#!/(?P&lt;id&gt;\d+)'
250     _TESTS = [{
251         'url': 'http://www.bt.no/spesial/vestlendingen/#!/86588',
252         'md5': 'd7d17e3337dc80de6d3a540aefbe441b',
253         'info_dict': {
254             'id': '86588',
255             'ext': 'mov',
256             'title': 'Otto Wollertsen',
257             'description': 'Vestlendingen Otto Fredrik Wollertsen',
258             'timestamp': 1430473209,
259             'upload_date': '20150501',
260         },
261         'skip': '404 Error',
262     }, {
263         'url': 'http://www.bt.no/spesial/vestlendingen/#!/86255',
264         'md5': 'a2893f8632e96389f4bdf36aa9463ceb',
265         'info_dict': {
266             'id': '86255',
267             'ext': 'mov',
268             'title': 'Du må tåle å fryse og være sulten',
269             'description': 'md5:b8046f4d022d5830ddab04865791d063',
270             'upload_date': '20150321',
271             'timestamp': 1426942023,
272         },
273     }]
274     def _real_extract(self, url):
275         return self.url_result('bttv:%s' % self._match_id(url), 'VGTV')
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>nba.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 from __future__ import unicode_literals
2 import functools
3 import re
4 from .turner import TurnerBaseIE
5 from ..compat import (
6     compat_parse_qs,
7     compat_str,
8     compat_urllib_parse_unquote,
9     compat_urllib_parse_urlparse,
10 )
11 from ..utils import (
12     int_or_none,
13     merge_dicts,
14     OnDemandPagedList,
15     parse_duration,
16     parse_iso8601,
17     try_get,
18     update_url_query,
19     urljoin,
20 )
21 class NBACVPBaseIE(TurnerBaseIE):
22     def _extract_nba_cvp_info(self, path, video_id, fatal=False):
23         return self._extract_cvp_info(
24             'http://secure.nba.com/%s' % path, video_id, {
25                 'default': {
26                     'media_src': 'http://nba.cdn.turner.com/nba/big',
27                 },
28                 'm3u8': {
29                     'media_src': 'http://nbavod-f.akamaihd.net',
30                 },
31             }, fatal=fatal)
32 class NBAWatchBaseIE(NBACVPBaseIE):
33     _VALID_URL_BASE = r'https?://(?:(?:www\.)?nba\.com(?:/watch)?|watch\.nba\.com)/'
34     def _extract_video(self, filter_key, filter_value):
35         video = self._download_json(
36             'https://neulionscnbav2-a.akamaihd.net/solr/nbad_program/usersearch',
37             filter_value, query={
38                 'fl': 'description,image,name,pid,releaseDate,runtime,tags,seoName',
39                 'q': filter_key + ':' + filter_value,
40                 'wt': 'json',
41             })['response']['docs'][0]
42         video_id = str(video['pid'])
43         title = video['name']
44         formats = []
45         m3u8_url = (self._download_json(
46             'https://watch.nba.com/service/publishpoint', video_id, query={
47                 'type': 'video',
48                 'format': 'json',
49                 'id': video_id,
50             }, headers={
51                 'User-Agent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0_1 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A402 Safari/604.1',
52             }, fatal=False) or {}).get('path')
53         if m3u8_url:
54             m3u8_formats = self._extract_m3u8_formats(
55                 re.sub(r'_(?:pc|iphone)\.', '.', m3u8_url), video_id, 'mp4',
56                 'm3u8_native', m3u8_id='hls', fatal=False)
57             formats.extend(m3u8_formats)
58             for f in m3u8_formats:
59                 http_f = f.copy()
60                 http_f.update({
61                     'format_id': http_f['format_id'].replace('hls-', 'http-'),
62                     'protocol': 'http',
63                     'url': http_f['url'].replace('.m3u8', ''),
64                 })
65                 formats.append(http_f)
66         info = {
67             'id': video_id,
68             'title': title,
69             'thumbnail': urljoin('https://nbadsdmt.akamaized.net/media/nba/nba/thumbs/', video.get('image')),
70             'description': video.get('description'),
71             'duration': int_or_none(video.get('runtime')),
72             'timestamp': parse_iso8601(video.get('releaseDate')),
73             'tags': video.get('tags'),
74         }
75         seo_name = video.get('seoName')
76         if seo_name and re.search(r'\d{4}/\d{2}/\d{2}/', seo_name):
77             base_path = ''
78             if seo_name.startswith('teams/'):
79                 base_path += seo_name.split('/')[1] + '/'
80             base_path += 'video/'
81             cvp_info = self._extract_nba_cvp_info(
82                 base_path + seo_name + '.xml', video_id, False)
83             if cvp_info:
84                 formats.extend(cvp_info['formats'])
85                 info = merge_dicts(info, cvp_info)
86         self._sort_formats(formats)
87         info['formats'] = formats
88         return info
89 class NBAWatchEmbedIE(NBAWatchBaseIE):
90     IENAME = 'nba:watch:embed'
91     _VALID_URL = NBAWatchBaseIE._VALID_URL_BASE + r'embed\?.*?\bid=(?P&lt;id&gt;\d+)'
92     _TESTS = [{
93         'url': 'http://watch.nba.com/embed?id=659395',
94         'md5': 'b7e3f9946595f4ca0a13903ce5edd120',
95         'info_dict': {
96             'id': '659395',
97             'ext': 'mp4',
98             'title': 'Mix clip: More than 7 points of  Joe Ingles, Luc Mbah a Moute, Blake Griffin and 6 more in Utah Jazz vs. the Clippers, 4/15/2017',
99             'description': 'Mix clip: More than 7 points of  Joe Ingles, Luc Mbah a Moute, Blake Griffin and 6 more in Utah Jazz vs. the Clippers, 4/15/2017',
100             'timestamp': 1492228800,
101             'upload_date': '20170415',
102         },
103     }]
104     def _real_extract(self, url):
105         video_id = self._match_id(url)
106         return self._extract_video('pid', video_id)
107     IE_NAME = 'nba:watch'
108     _VALID_URL = NBAWatchBaseIE._VALID_URL_BASE + r'(?:nba/)?video/(?P&lt;id&gt;.+?(?=/index\.html)|(?:[^/]+/)*[^/?#&amp;]+)'
109     _TESTS = [<font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>{
110         'url': 'http://www.nba.com/video/games/nets/2012/12/04/0021200253-okc-bkn-recap.nba/index.html',
111         'md5': '9d902940d2a127af3f7f9d2f3dc79c96',
112         'info_dict': {
113             'id': '70946',
114             'ext': 'mp4',
115             'title': 'Thunder vs. Nets',
116             'description': 'Kevin Durant scores 32 points and dishes out six assists as the Thunder beat the Nets in Brooklyn.',
117             'duration': 181,
118             'timestamp': 1354597200,
119             'upload_date': '20121204',
120         },
121     }, {
122         'url': 'http://www.nba.com/video/games/hornets/2014/12/05/0021400276-nyk-cha-play5.nba/',
123         'only_matching': True,
124     }, {
125         'url': 'http://watch.nba.com/video/channels/playoffs/2015/05/20/0041400301-cle-atl-recap.nba',
126         'md5': 'b2b39b81cf28615ae0c3360a3f9668c4',
127         'info_dict': {
128             'id': '330865',
129             'ext': 'mp4',
130             'title': 'Hawks vs. Cavaliers Game 1',
131             'description': 'md5:8094c3498d35a9bd6b1a8c396a071b4d',
132             'duration': 228,
133             'timestamp': 1432094400,
134             'upload_date': '20150521',
135         },
136     }, {
137         'url': 'http://watch.nba.com/nba/video/channels/nba_tv/2015/06/11/YT_go_big_go_home_Game4_061115',
138         'only_matching': True,
139     }, {
140         'url': 'https://watch.nba.com/video/teams/cavaliers/2012/10/15/sloan121015mov-2249106',
141         'only_matching': True,
142     }, {
143         'url': 'https://watch.nba.com/video/top-100-dunks-from-the-2019-20-season?plsrc=nba&amp;collection=2019-20-season-highlights',
144         'only_matching': True,
145     }]
146     def _real_extract(self, url):
147         display_id = self._match_id(</b></font>url)
148         collection_id = compat_parse_qs(compat_urllib_parse_urlparse(url).query).get('collection', [None])[0]
149         if collection_id:
150             if self._downloader.params.get('noplaylist'):
151                 self.to_screen('Downloading just video %s because of --no-playlist' % display_id)
152             else:
153                 self.to_screen('Downloading playlist %s - add --no-playlist to just download video' % collection_id)
154                 return self.url_result(
155                     'https://www.nba.com/watch/list/collection/' + collection_id,
156                     NBAWatchCollectionIE.ie_key(), collection_id)
157         return self._extract_video('seoName', display_id)
158 class NBAWatchCollectionIE(NBAWatchBaseIE):
159     IE_NAME = 'nba:watch:collection'
160     _VALID_URL = NBAWatchBaseIE._VALID_URL_BASE + r'list/collection/(?P&lt;id&gt;[^/?#&amp;]+)'
161     _TESTS = [{
162         'url': 'https://watch.nba.com/list/collection/season-preview-2020',
163         'info_dict': {
164             'id': 'season-preview-2020',
165         },
166         'playlist_mincount': 43,
167     }]
168     _PAGE_SIZE = 100
169     def _fetch_page(self, collection_id, page):
170         page += 1
171         videos = self._download_json(
172             'https://content-api-prod.nba.com/public/1/endeavor/video-list/collection/' + collection_id,
173             collection_id, 'Downloading page %d JSON metadata' % page, query={
174                 'count': self._PAGE_SIZE,
175                 'page': page,
176             })['results']['videos']
177         for video in videos:
178             program = video.get('program') or {}
179             seo_name = program.get('seoName') or program.get('slug')
180             if not seo_name:
181                 continue
182                 '_type': 'url',
183                 'id': program.get('id'),
184                 'title': program.get<font color="#f63526"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>('title') or video.get('title'),
185                 'url': 'https://www.nba.com/watch/video/' + seo_name,
186                 'thumbnail': video.get('image'),
187                 'description': program.get('description') or video.get('description'),
188                 'duration': parse_duration(program.get(</b></font>'runtimeHours')),
189                 'timestamp': parse_iso8601(video.get('releaseDate')),
190             }
191     def _real_extract(self, url):
192         collection_id = self._match_id(url)
193         entries = OnDemandPagedList(
194             functools.partial(self._fetch_page, collection_id),
195             self._PAGE_SIZE)
196         return self.playlist_result(entries, collection_id)
197 class NBABaseIE(NBACVPBaseIE):
198     _VALID_URL_BASE = r'''(?x)
199         https?://(?:www\.)?nba\.com/
200             (?P&lt;team&gt;
201                 blazers|
202                 bucks|
203                 bulls|
204                 cavaliers|
205                 celtics|
206                 clippers|
207                 grizzlies|
208                 hawks|
209                 heat|
210                 hornets|
211                 jazz|
212                 kings|
213                 knicks|
214                 lakers|
215                 magic|
216                 mavericks|
217                 nets|
218                 nuggets|
219                 pacers|
220                 pelicans|
221                 pistons|
222                 raptors|
223                 rockets|
224                 sixers|
225                 spurs|
226                 suns|
227                 thunder|
228                 timberwolves|
229                 warriors|
230                 wizards
231             )
232         (?:/play\#)?/'''
233     _CHANNEL_PATH_REGEX = r'video/channel|series'
234     def _embed_url_result(self, team, content_id):
235         return self.url_result(update_url_query(
236             'https://secure.nba.com/assets/amp/include/video/iframe.html', {
237                 'contentId': content_id,
238                 'team': team,
239             }), NBAEmbedIE.ie_key())
240     def _call_api(self, team, content_id, query, resource):
241         return self._download_json(
242             'https://api.nba.net/2/%s/video,imported_video,wsc/' % team,
243             content_id, 'Download %s JSON metadata' % resource,
244             query=query, headers={
245                 'accessToken': 'internal|bb88df6b4c2244e78822812cecf1ee1b',
246             })['response']['result']
247     def _extract_video(self, video, team, extract_all=True):
248         video_id = compat_str(video['nid'])
249         team = video['brand']
250         info = {
251             'id': video_id,
252             'title': video.get('title') or video.get('headline') or video['shortHeadline'],
253             'description': video.get('description'),
254             'timestamp': parse_iso8601(video.get('published')),
255         }
256         subtitles = {}
257         captions = try_get(video, lambda x: x['videoCaptions']['sidecars'], dict) or {}
258         for caption_url in captions.values():
259             subtitles.setdefault('en', []).append({'url': caption_url})
260         formats = []
261         mp4_url = video.get('mp4')
262         if mp4_url:
263             formats.append({
264                 'url': mp4_url,
265             })
266         if extract_all:
267             source_url = video.get('videoSource')
268             if source_url and not source_url.startswith('s3://') and self._is_valid_url(source_url, video_id, 'source'):
269                 formats.append({
270                     'format_id': 'source',
271                     'url': source_url,
272                     'preference': 1,
273                 })
274             m3u8_url = video.get('m3u8')
275             if m3u8_url:
276                 if '.akamaihd.net/i/' in m3u8_url:
277                     formats.extend(self._extract_akamai_formats(
278                         m3u8_url, video_id, {'http': 'pmd.cdn.turner.com'}))
279                 else:
280                     formats.extend(self._extract_m3u8_formats(
281                         m3u8_url, video_id, 'mp4',
282                         'm3u8_native', m3u8_id='hls', fatal=False))
283             content_xml = video.get('contentXml')
284             if team and content_xml:
285                 cvp_info = self._extract_nba_cvp_info(
286                     team + content_xml, video_id, fatal=False)
287                 if cvp_info:
288                     formats.extend(cvp_info['formats'])
289                     subtitles = self._merge_subtitles(subtitles, cvp_info['subtitles'])
290                     info = merge_dicts(info, cvp_info)
291             self._sort_formats(formats)
292         else:
293             info.update(self._embed_url_result(team, video['videoId']))
294         info.update({
295             'formats': formats,
296             'subtitles': subtitles,
297         })
298         return info
299     def _real_extract(self, url):
300         team, display_id = re.match(self._VALID_URL, url).groups()
301         if '/play#/' in url:
302             display_id = compat_urllib_parse_unquote(display_id)
303         else:
304             webpage = self._download_webpage(url, display_id)
305             display_id = self._search_regex(
306                 self._CONTENT_ID_REGEX + r'\s*:\s*"([^"]+)"', webpage, 'video id')
307         return self._extract_url_results(team, display_id)
308 class NBAEmbedIE(NBABaseIE):
309     IENAME = 'nba:embed'
310     _VALID_URL = r'https?://secure\.nba\.com/assets/amp/include/video/(?:topI|i)frame\.html\?.*?\bcontentId=(?P&lt;id&gt;[^?#&amp;]+)'
311     _TESTS = [{
312         'url': 'https://secure.nba.com/assets/amp/include/video/topIframe.html?contentId=teams/bulls/2020/12/04/3478774/1607105587854-20201204_SCHEDULE_RELEASE_FINAL_DRUPAL-3478774&amp;team=bulls&amp;adFree=false&amp;profile=71&amp;videoPlayerName=TAMPCVP&amp;baseUrl=&amp;videoAdsection=nba.com_mobile_web_teamsites_chicagobulls&amp;ampEnv=',
313         'only_matching': True,
314     }, {
315         'url': 'https://secure.nba.com/assets/amp/include/video/iframe.html?contentId=2016/10/29/0021600027boschaplay7&amp;adFree=false&amp;profile=71&amp;team=&amp;videoPlayerName=LAMPCVP',
316         'only_matching': True,
317     }]
318     def _real_extract(self, url):
319         qs = compat_parse_qs(compat_urllib_parse_urlparse(url).query)
320         content_id = qs['contentId'][0]
321         team = qs.get('team', [None])[0]
322         if not team:
323             return self.url_result(
324                 'https://watch.nba.com/video/' + content_id, NBAWatchIE.ie_key())
325         video = self._call_api(team, content_id, {'videoid': content_id}, 'video')[0]
326         return self._extract_video(video, team)
327 class NBAIE(NBABaseIE):
328     IENAME = 'nba'
329     _VALID_URL = NBABaseIE._VALID_URL_BASE + '(?!%s)video/(?P&lt;id&gt;(?:[^/]+/)*[^/?#&amp;]+)' % NBABaseIE._CHANNEL_PATH_REGEX
330     _TESTS = [{
331         'url': 'https://www.nba.com/bulls/video/teams/bulls/2020/12/04/3478774/1607105587854-20201204schedulereleasefinaldrupal-3478774',
332         'info_dict': {
333             'id': '45039',
334             'ext': 'mp4',
335             'title': 'AND WE BACK.',
336             'description': 'Part 1 of our 2020-21 schedule is here! Watch our games on NBC Sports Chicago.',
337             'duration': 94,
338             'timestamp': 1607112000,
339             'upload_date': '20201218',
340         },
341     }, {
342         'url': 'https://www.nba.com/bucks/play#/video/teams%2Fbucks%2F2020%2F12%2F17%2F64860%2F1608252863446-Op_Dream_16x9-64860',
343         'only_matching': True,
344     }, {
345         'url': 'https://www.nba.com/bucks/play#/video/wsc%2Fteams%2F2787C911AA1ACD154B5377F7577CCC7134B2A4B0',
346         'only_matching': True,
347     }]
348     _CONTENT_ID_REGEX = r'videoID'
349     def _extract_url_results(self, team, content_id):
350         return self._embed_url_result(team, content_id)
351 class NBAChannelIE(NBABaseIE):
352     IENAME = 'nba:channel'
353     _VALID_URL = NBABaseIE._VALID_URL_BASE + '(?:%s)/(?P&lt;id&gt;[^/?#&amp;]+)' % NBABaseIE._CHANNEL_PATH_REGEX
354     _TESTS = [{
355         'url': 'https://www.nba.com/blazers/video/channel/summer_league',
356         'info_dict': {
357             'title': 'Summer League',
358         },
359         'playlist_mincount': 138,
360     }, {
361         'url': 'https://www.nba.com/bucks/play#/series/On%20This%20Date',
362         'only_matching': True,
363     }]
364     _CONTENT_ID_REGEX = r'videoSubCategory'
365     _PAGE_SIZE = 100
366     def _fetch_page(self, team, channel, page):
367         results = self._call_api(team, channel, {
368             'channels': channel,
369             'count': self._PAGE_SIZE,
370             'offset': page * self._PAGE_SIZE,
371         }, 'page %d' % (page + 1))
372         for video in results:
373             yield self._extract_video(video, team, False)
374     def _extract_url_results(self, team, content_id):
375         entries = OnDemandPagedList(
376             functools.partial(self._fetch_page, team, content_id),
377             self._PAGE_SIZE)
378         return self.playlist_result(entries, playlist_title=content_id)
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
