<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for vgtv.py &amp; nba.py</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for vgtv.py &amp; nba.py
      </h3>
<h1 align="center">
        6.7%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>vgtv.py (10.416667%)<th>nba.py (5.0%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(129-168)<td><a href="#" name="0">(127-167)</a><td align="center"><font color="#ff0000">13</font>
<tr onclick='openModal("#f63526")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f63526"><font color="#f63526">-</font><td><a href="#" name="1">(223-226)<td><a href="#" name="1">(208-212)</a><td align="center"><font color="#eb0000">12</font>
</td></td></a></td></td></tr></td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>vgtv.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 from __future__ import unicode_literals
2 import re
3 from .common import InfoExtractor
4 from .xstream import XstreamIE
5 from ..utils import (
6     ExtractorError,
7     float_or_none,
8     try_get,
9 )
10 class VGTVIE(XstreamIE):
11     IE_DESC = 'VGTV, BTTV, FTV, Aftenposten and Aftonbladet'
12     _GEO_BYPASS = False
13     _HOST_TO_APPNAME = {
14         'vgtv.no': 'vgtv',
15         'bt.no/tv': 'bttv',
16         'aftenbladet.no/tv': 'satv',
17         'fvn.no/fvntv': 'fvntv',
18         'aftenposten.no/webtv': 'aptv',
19         'ap.vgtv.no/webtv': 'aptv',
20         'tv.aftonbladet.se': 'abtv',
21         'tv.aftonbladet.se/abtv': 'abtv',
22         'www.aftonbladet.se/tv': 'abtv',
23     }
24     _APP_NAME_TO_VENDOR = {
25         'vgtv': 'vgtv',
26         'bttv': 'bt',
27         'satv': 'sa',
28         'fvntv': 'fvn',
29         'aptv': 'ap',
30         'abtv': 'ab',
31     }
32     _VALID_URL = r'''(?x)
33                     (?:https?://(?:www\.)?
34                     (?P&lt;host&gt;
35                         %s
36                     )
37                     /?
38                     (?:
39                         (?:\#!/)?(?:video|live)/|
40                         embed?.*id=|
41                         a(?:rticles)?/
42                     )|
43                     (?P&lt;appname&gt;
44                         %s
45                     ):)
46                     (?P&lt;id&gt;\d+)
47                     ''' % ('|'.join(_HOST_TO_APPNAME.keys()), '|'.join(_APP_NAME_TO_VENDOR.keys()))
48     _TESTS = [
49         {
50             'url': 'http://www.vgtv.no/#!/video/84196/hevnen-er-soet-episode-10-abu',
51             'md5': 'b8be7a234cebb840c0d512c78013e02f',
52             'info_dict': {
53                 'id': '84196',
54                 'ext': 'mp4',
55                 'title': 'Hevnen er søt: Episode 10 - Abu',
56                 'description': 'md5:e25e4badb5f544b04341e14abdc72234',
57                 'thumbnail': r're:^https?://.*\.jpg',
58                 'duration': 648.000,
59                 'timestamp': 1404626400,
60                 'upload_date': '20140706',
61                 'view_count': int,
62             },
63         },
64         {
65             'url': 'http://www.vgtv.no/#!/live/100764/opptak-vgtv-foelger-em-kvalifiseringen',
66             'info_dict': {
67                 'id': '100764',
68                 'ext': 'flv',
69                 'title': 'OPPTAK: VGTV følger EM-kvalifiseringen',
70                 'description': 'md5:3772d9c0dc2dff92a886b60039a7d4d3',
71                 'thumbnail': r're:^https?://.*\.jpg',
72                 'duration': 9103.0,
73                 'timestamp': 1410113864,
74                 'upload_date': '20140907',
75                 'view_count': int,
76             },
77             'params': {
78                 'skip_download': True,
79             },
80             'skip': 'Video is no longer available',
81         },
82         {
83             'url': 'http://www.vgtv.no/#!/live/113063/direkte-v75-fra-solvalla',
84             'info_dict': {
85                 'id': '113063',
86                 'ext': 'mp4',
87                 'title': 'V75 fra Solvalla 30.05.15',
88                 'description': 'md5:b3743425765355855f88e096acc93231',
89                 'thumbnail': r're:^https?://.*\.jpg',
90                 'duration': 25966,
91                 'timestamp': 1432975582,
92                 'upload_date': '20150530',
93                 'view_count': int,
94             },
95             'params': {
96                 'skip_download': True,
97             },
98         },
99         {
100             'url': 'http://www.aftenposten.no/webtv/#!/video/21039/trailer-sweatshop-i-can-t-take-any-more',
101             'md5': 'fd828cd29774a729bf4d4425fe192972',
102             'info_dict': {
103                 'id': '21039',
104                 'ext': 'mp4',
105                 'title': 'TRAILER: «SWEATSHOP» - I can´t take any more',
106                 'description': 'md5:21891f2b0dd7ec2f78d84a50e54f8238',
107                 'duration': 66,
108                 'timestamp': 1417002452,
109                 'upload_date': '20141126',
110                 'view_count': int,
111 <a name="0"></a>            },
112             'params': {
113                 <font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>'skip_download': True,
114             },
115         },
116         {
117             'url': 'http://www.bt.no/tv/#!/video/100250/norling-dette-er-forskjellen-paa-1-divisjon-og-eliteserien',
118             'only_matching': True,
119         },
120         {
121             'url': 'http://ap.vgtv.no/webtv#!/video/111084/de-nye-bysyklene-lettere-bedre-gir-stoerre-hjul-og-feste-til-mobil',
122             'only_matching': True,
123         },
124         {
125             'url': 'http://www.vgtv.no/#!/video/127205/inside-the-mind-of-favela-funk',
126             'only_matching': True,
127         },
128         {
129             'url': 'https://tv.aftonbladet.se/video/36015/vulkanutbrott-i-rymden-nu-slapper-nasa-bilderna',
130             'only_matching': True,
131         },
132         {
133             'url': 'http://tv.aftonbladet.se/abtv/articles/36015',
134             'only_matching': True,
135         },
136         {
137             'url': 'https://www.aftonbladet.se/tv/a/36015',
138             'only_matching': True,
139         },
140         {
141             'url': 'abtv:140026',
142             'only_matching': True,
143         },
144         {
145             'url': 'http://www.vgtv.no/video/84196/hevnen-er-soet-episode-10-abu',
146             'only_matching': True,
147         },
148     ]
149     def _real_extract(self, url):
150         mobj = re.match(</b></font>self._VALID_URL, url)
151         video_id = mobj.group('id')
152         host = mobj.group('host')
153         appname = self._HOST_TO_APPNAME[host] if host else mobj.group('appname')
154         vendor = self._APP_NAME_TO_VENDOR[appname]
155         data = self._download_json(
156             'http://svp.vg.no/svp/api/v1/%s/assets/%s?appName=%s-website'
157             % (vendor, video_id, appname),
158             video_id, 'Downloading media JSON')
159         if data.get('status') == 'inactive':
160             raise ExtractorError(
161                 'Video %s is no longer available' % video_id, expected=True)
162         info = {
163             'formats': [],
164         }
165         if len(video_id) == 5:
166             if appname == 'bttv':
167                 info = self._extract_video_info('btno', video_id)
168         streams = data['streamUrls']
169         stream_type = data.get('streamType')
170         is_live = stream_type == 'live'
171         formats = []
172         hls_url = streams.get('hls')
173         if hls_url:
174             formats.extend(self._extract_m3u8_formats(
175                 hls_url, video_id, 'mp4',
176                 entry_protocol='m3u8' if is_live else 'm3u8_native',
177                 m3u8_id='hls', fatal=False))
178         hds_url = streams.get('hds')
179         if hds_url:
180             hdcore_sign = 'hdcore=3.7.0'
181             f4m_formats = self._extract_f4m_formats(
182                 hds_url + '?%s' % hdcore_sign, video_id, f4m_id='hds', fatal=False)
183             if f4m_formats:
184                 for entry in f4m_formats:
185                     entry.update({'extra_param_to_segment_url': hdcore_sign})
186                     formats.append(entry)
187         mp4_urls = streams.get('pseudostreaming') or []
188         mp4_url = streams.get('mp4')
189         if mp4_url:
190             mp4_urls.append(mp4_url)
191         for mp4_url in mp4_urls:
192             format_info = {
193                 'url': mp4_url,
194 <a name="1"></a>            }
195             mobj = re.search(r'(\d+)_(\d+)_(\d+)', mp4_url)
196             if mobj:
197                 tbr = int<font color="#f63526"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>(mobj.group(3))
198                 format_info.update({
199                     'width': int(mobj.group(1)),
200                     'height': int(mobj.group(</b></font>2)),
201                     'tbr': tbr,
202                     'format_id': 'mp4-%s' % tbr,
203                 })
204             formats.append(format_info)
205         info['formats'].extend(formats)
206         if not info['formats']:
207             properties = try_get(
208                 data, lambda x: x['streamConfiguration']['properties'], list)
209             if properties and 'geoblocked' in properties:
210                 raise self.raise_geo_restricted(
211                     countries=[host.rpartition('.')[-1].partition('/')[0].upper()])
212         self._sort_formats(info['formats'])
213         info.update({
214             'id': video_id,
215             'title': self._live_title(data['title']) if is_live else data['title'],
216             'description': data['description'],
217             'thumbnail': data['images']['main'] + '?t[]=900x506q80',
218             'timestamp': data['published'],
219             'duration': float_or_none(data['duration'], 1000),
220             'view_count': data['displays'],
221             'is_live': is_live,
222         })
223         return info
224 class BTArticleIE(InfoExtractor):
225     IE_NAME = 'bt:article'
226     IE_DESC = 'Bergens Tidende Articles'
227     _VALID_URL = r'https?://(?:www\.)?bt\.no/(?:[^/]+/)+(?P&lt;id&gt;[^/]+)-\d+\.html'
228     _TEST = {
229         'url': 'http://www.bt.no/nyheter/lokalt/Kjemper-for-internatet-1788214.html',
230         'md5': '2acbe8ad129b3469d5ae51b1158878df',
231         'info_dict': {
232             'id': '23199',
233             'ext': 'mp4',
234             'title': 'Alrekstad internat',
235             'description': 'md5:dc81a9056c874fedb62fc48a300dac58',
236             'thumbnail': r're:^https?://.*\.jpg',
237             'duration': 191,
238             'timestamp': 1289991323,
239             'upload_date': '20101117',
240             'view_count': int,
241         },
242     }
243     def _real_extract(self, url):
244         webpage = self._download_webpage(url, self._match_id(url))
245         video_id = self._search_regex(
246             r'&lt;video[^&gt;]+data-id="(\d+)"', webpage, 'video id')
247         return self.url_result('bttv:%s' % video_id, 'VGTV')
248 class BTVestlendingenIE(InfoExtractor):
249     IE_NAME = 'bt:vestlendingen'
250     IE_DESC = 'Bergens Tidende - Vestlendingen'
251     _VALID_URL = r'https?://(?:www\.)?bt\.no/spesial/vestlendingen/#!/(?P&lt;id&gt;\d+)'
252     _TESTS = [{
253         'url': 'http://www.bt.no/spesial/vestlendingen/#!/86588',
254         'md5': 'd7d17e3337dc80de6d3a540aefbe441b',
255         'info_dict': {
256             'id': '86588',
257             'ext': 'mov',
258             'title': 'Otto Wollertsen',
259             'description': 'Vestlendingen Otto Fredrik Wollertsen',
260             'timestamp': 1430473209,
261             'upload_date': '20150501',
262         },
263         'skip': '404 Error',
264     }, {
265         'url': 'http://www.bt.no/spesial/vestlendingen/#!/86255',
266         'md5': 'a2893f8632e96389f4bdf36aa9463ceb',
267         'info_dict': {
268             'id': '86255',
269             'ext': 'mov',
270             'title': 'Du må tåle å fryse og være sulten',
271             'description': 'md5:b8046f4d022d5830ddab04865791d063',
272             'upload_date': '20150321',
273             'timestamp': 1426942023,
274         },
275     }]
276     def _real_extract(self, url):
277         return self.url_result('bttv:%s' % self._match_id(url), 'VGTV')
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>nba.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 from __future__ import unicode_literals
2 import functools
3 import re
4 from .turner import TurnerBaseIE
5 from ..compat import (
6     compat_parse_qs,
7     compat_str,
8     compat_urllib_parse_unquote,
9     compat_urllib_parse_urlparse,
10 )
11 from ..utils import (
12     int_or_none,
13     merge_dicts,
14     OnDemandPagedList,
15     parse_duration,
16     parse_iso8601,
17     try_get,
18     update_url_query,
19     urljoin,
20 )
21 class NBACVPBaseIE(TurnerBaseIE):
22     def _extract_nba_cvp_info(self, path, video_id, fatal=False):
23         return self._extract_cvp_info(
24             'http://secure.nba.com/%s' % path, video_id, {
25                 'default': {
26                     'media_src': 'http://nba.cdn.turner.com/nba/big',
27                 },
28                 'm3u8': {
29                     'media_src': 'http://nbavod-f.akamaihd.net',
30                 },
31             }, fatal=fatal)
32 class NBAWatchBaseIE(NBACVPBaseIE):
33     _VALID_URL_BASE = r'https?://(?:(?:www\.)?nba\.com(?:/watch)?|watch\.nba\.com)/'
34     def _extract_video(self, filter_key, filter_value):
35         video = self._download_json(
36             'https://neulionscnbav2-a.akamaihd.net/solr/nbad_program/usersearch',
37             filter_value, query={
38                 'fl': 'description,image,name,pid,releaseDate,runtime,tags,seoName',
39                 'q': filter_key + ':' + filter_value,
40                 'wt': 'json',
41             })['response']['docs'][0]
42         video_id = str(video['pid'])
43         title = video['name']
44         formats = []
45         m3u8_url = (self._download_json(
46             'https://watch.nba.com/service/publishpoint', video_id, query={
47                 'type': 'video',
48                 'format': 'json',
49                 'id': video_id,
50             }, headers={
51                 'User-Agent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 11_0_1 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A402 Safari/604.1',
52             }, fatal=False) or {}).get('path')
53         if m3u8_url:
54             m3u8_formats = self._extract_m3u8_formats(
55                 re.sub(r'_(?:pc|iphone)\.', '.', m3u8_url), video_id, 'mp4',
56                 'm3u8_native', m3u8_id='hls', fatal=False)
57             formats.extend(m3u8_formats)
58             for f in m3u8_formats:
59                 http_f = f.copy()
60                 http_f.update({
61                     'format_id': http_f['format_id'].replace('hls-', 'http-'),
62                     'protocol': 'http',
63                     'url': http_f['url'].replace('.m3u8', ''),
64                 })
65                 formats.append(http_f)
66         info = {
67             'id': video_id,
68             'title': title,
69             'thumbnail': urljoin('https://nbadsdmt.akamaized.net/media/nba/nba/thumbs/', video.get('image')),
70             'description': video.get('description'),
71             'duration': int_or_none(video.get('runtime')),
72             'timestamp': parse_iso8601(video.get('releaseDate')),
73             'tags': video.get('tags'),
74         }
75         seo_name = video.get('seoName')
76         if seo_name and re.search(r'\d{4}/\d{2}/\d{2}/', seo_name):
77             base_path = ''
78             if seo_name.startswith('teams/'):
79                 base_path += seo_name.split('/')[1] + '/'
80             base_path += 'video/'
81             cvp_info = self._extract_nba_cvp_info(
82                 base_path + seo_name + '.xml', video_id, False)
83             if cvp_info:
84                 formats.extend(cvp_info['formats'])
85                 info = merge_dicts(info, cvp_info)
86         self._sort_formats(formats)
87         info['formats'] = formats
88         return info
89 class NBAWatchEmbedIE(NBAWatchBaseIE):
90     IENAME = 'nba:watch:embed'
91     _VALID_URL = NBAWatchBaseIE._VALID_URL_BASE + r'embed\?.*?\bid=(?P&lt;id&gt;\d+)'
92     _TESTS = [{
93         'url': 'http://watch.nba.com/embed?id=659395',
94         'md5': 'b7e3f9946595f4ca0a13903ce5edd120',
95         'info_dict': {
96             'id': '659395',
97             'ext': 'mp4',
98             'title': 'Mix clip: More than 7 points of  Joe Ingles, Luc Mbah a Moute, Blake Griffin and 6 more in Utah Jazz vs. the Clippers, 4/15/2017',
99             'description': 'Mix clip: More than 7 points of  Joe Ingles, Luc Mbah a Moute, Blake Griffin and 6 more in Utah Jazz vs. the Clippers, 4/15/2017',
100             'timestamp': 1492228800,
101             'upload_date': '20170415',
102         },
103     }]
104     def _real_extract(self, url):
105         video_id = self._match_id(url)
106         return self._extract_video('pid', video_id)
107 <a name="0"></a>class NBAWatchIE(NBAWatchBaseIE):
108     IE_NAME = 'nba:watch'
109     _VALID_URL = NBAWatchBaseIE._VALID_URL_BASE + r'(?:nba/)?video/(?P&lt;id&gt;.+?(?=/index\.html)|(?:[^/]+/)*[^/?#&amp;]+)'
110     _TESTS = [<font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>{
111         'url': 'http://www.nba.com/video/games/nets/2012/12/04/0021200253-okc-bkn-recap.nba/index.html',
112         'md5': '9d902940d2a127af3f7f9d2f3dc79c96',
113         'info_dict': {
114             'id': '70946',
115             'ext': 'mp4',
116             'title': 'Thunder vs. Nets',
117             'description': 'Kevin Durant scores 32 points and dishes out six assists as the Thunder beat the Nets in Brooklyn.',
118             'duration': 181,
119             'timestamp': 1354597200,
120             'upload_date': '20121204',
121         },
122     }, {
123         'url': 'http://www.nba.com/video/games/hornets/2014/12/05/0021400276-nyk-cha-play5.nba/',
124         'only_matching': True,
125     }, {
126         'url': 'http://watch.nba.com/video/channels/playoffs/2015/05/20/0041400301-cle-atl-recap.nba',
127         'md5': 'b2b39b81cf28615ae0c3360a3f9668c4',
128         'info_dict': {
129             'id': '330865',
130             'ext': 'mp4',
131             'title': 'Hawks vs. Cavaliers Game 1',
132             'description': 'md5:8094c3498d35a9bd6b1a8c396a071b4d',
133             'duration': 228,
134             'timestamp': 1432094400,
135             'upload_date': '20150521',
136         },
137     }, {
138         'url': 'http://watch.nba.com/nba/video/channels/nba_tv/2015/06/11/YT_go_big_go_home_Game4_061115',
139         'only_matching': True,
140     }, {
141         'url': 'https://watch.nba.com/video/teams/cavaliers/2012/10/15/sloan121015mov-2249106',
142         'only_matching': True,
143     }, {
144         'url': 'https://watch.nba.com/video/top-100-dunks-from-the-2019-20-season?plsrc=nba&amp;collection=2019-20-season-highlights',
145         'only_matching': True,
146     }]
147     def _real_extract(self, url):
148         display_id = self._match_id(</b></font>url)
149         collection_id = compat_parse_qs(compat_urllib_parse_urlparse(url).query).get('collection', [None])[0]
150         if collection_id:
151             if self._downloader.params.get('noplaylist'):
152                 self.to_screen('Downloading just video %s because of --no-playlist' % display_id)
153             else:
154                 self.to_screen('Downloading playlist %s - add --no-playlist to just download video' % collection_id)
155                 return self.url_result(
156                     'https://www.nba.com/watch/list/collection/' + collection_id,
157                     NBAWatchCollectionIE.ie_key(), collection_id)
158         return self._extract_video('seoName', display_id)
159 class NBAWatchCollectionIE(NBAWatchBaseIE):
160     IE_NAME = 'nba:watch:collection'
161     _VALID_URL = NBAWatchBaseIE._VALID_URL_BASE + r'list/collection/(?P&lt;id&gt;[^/?#&amp;]+)'
162     _TESTS = [{
163         'url': 'https://watch.nba.com/list/collection/season-preview-2020',
164         'info_dict': {
165             'id': 'season-preview-2020',
166         },
167         'playlist_mincount': 43,
168     }]
169     _PAGE_SIZE = 100
170     def _fetch_page(self, collection_id, page):
171         page += 1
172         videos = self._download_json(
173             'https://content-api-prod.nba.com/public/1/endeavor/video-list/collection/' + collection_id,
174             collection_id, 'Downloading page %d JSON metadata' % page, query={
175                 'count': self._PAGE_SIZE,
176                 'page': page,
177             })['results']['videos']
178         for video in videos:
179             program = video.get('program') or {}
180             seo_name = program.get('seoName') or program.get('slug')
181             if not seo_name:
182                 continue
183 <a name="1"></a>            yield {
184                 '_type': 'url',
185                 'id': program.get('id'),
186                 'title': program.get<font color="#f63526"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>('title') or video.get('title'),
187                 'url': 'https://www.nba.com/watch/video/' + seo_name,
188                 'thumbnail': video.get('image'),
189                 'description': program.get('description') or video.get('description'),
190                 'duration': parse_duration(program.get(</b></font>'runtimeHours')),
191                 'timestamp': parse_iso8601(video.get('releaseDate')),
192             }
193     def _real_extract(self, url):
194         collection_id = self._match_id(url)
195         entries = OnDemandPagedList(
196             functools.partial(self._fetch_page, collection_id),
197             self._PAGE_SIZE)
198         return self.playlist_result(entries, collection_id)
199 class NBABaseIE(NBACVPBaseIE):
200     _VALID_URL_BASE = r'''(?x)
201         https?://(?:www\.)?nba\.com/
202             (?P&lt;team&gt;
203                 blazers|
204                 bucks|
205                 bulls|
206                 cavaliers|
207                 celtics|
208                 clippers|
209                 grizzlies|
210                 hawks|
211                 heat|
212                 hornets|
213                 jazz|
214                 kings|
215                 knicks|
216                 lakers|
217                 magic|
218                 mavericks|
219                 nets|
220                 nuggets|
221                 pacers|
222                 pelicans|
223                 pistons|
224                 raptors|
225                 rockets|
226                 sixers|
227                 spurs|
228                 suns|
229                 thunder|
230                 timberwolves|
231                 warriors|
232                 wizards
233             )
234         (?:/play\#)?/'''
235     _CHANNEL_PATH_REGEX = r'video/channel|series'
236     def _embed_url_result(self, team, content_id):
237         return self.url_result(update_url_query(
238             'https://secure.nba.com/assets/amp/include/video/iframe.html', {
239                 'contentId': content_id,
240                 'team': team,
241             }), NBAEmbedIE.ie_key())
242     def _call_api(self, team, content_id, query, resource):
243         return self._download_json(
244             'https://api.nba.net/2/%s/video,imported_video,wsc/' % team,
245             content_id, 'Download %s JSON metadata' % resource,
246             query=query, headers={
247                 'accessToken': 'internal|bb88df6b4c2244e78822812cecf1ee1b',
248             })['response']['result']
249     def _extract_video(self, video, team, extract_all=True):
250         video_id = compat_str(video['nid'])
251         team = video['brand']
252         info = {
253             'id': video_id,
254             'title': video.get('title') or video.get('headline') or video['shortHeadline'],
255             'description': video.get('description'),
256             'timestamp': parse_iso8601(video.get('published')),
257         }
258         subtitles = {}
259         captions = try_get(video, lambda x: x['videoCaptions']['sidecars'], dict) or {}
260         for caption_url in captions.values():
261             subtitles.setdefault('en', []).append({'url': caption_url})
262         formats = []
263         mp4_url = video.get('mp4')
264         if mp4_url:
265             formats.append({
266                 'url': mp4_url,
267             })
268         if extract_all:
269             source_url = video.get('videoSource')
270             if source_url and not source_url.startswith('s3://') and self._is_valid_url(source_url, video_id, 'source'):
271                 formats.append({
272                     'format_id': 'source',
273                     'url': source_url,
274                     'preference': 1,
275                 })
276             m3u8_url = video.get('m3u8')
277             if m3u8_url:
278                 if '.akamaihd.net/i/' in m3u8_url:
279                     formats.extend(self._extract_akamai_formats(
280                         m3u8_url, video_id, {'http': 'pmd.cdn.turner.com'}))
281                 else:
282                     formats.extend(self._extract_m3u8_formats(
283                         m3u8_url, video_id, 'mp4',
284                         'm3u8_native', m3u8_id='hls', fatal=False))
285             content_xml = video.get('contentXml')
286             if team and content_xml:
287                 cvp_info = self._extract_nba_cvp_info(
288                     team + content_xml, video_id, fatal=False)
289                 if cvp_info:
290                     formats.extend(cvp_info['formats'])
291                     subtitles = self._merge_subtitles(subtitles, cvp_info['subtitles'])
292                     info = merge_dicts(info, cvp_info)
293             self._sort_formats(formats)
294         else:
295             info.update(self._embed_url_result(team, video['videoId']))
296         info.update({
297             'formats': formats,
298             'subtitles': subtitles,
299         })
300         return info
301     def _real_extract(self, url):
302         team, display_id = re.match(self._VALID_URL, url).groups()
303         if '/play#/' in url:
304             display_id = compat_urllib_parse_unquote(display_id)
305         else:
306             webpage = self._download_webpage(url, display_id)
307             display_id = self._search_regex(
308                 self._CONTENT_ID_REGEX + r'\s*:\s*"([^"]+)"', webpage, 'video id')
309         return self._extract_url_results(team, display_id)
310 class NBAEmbedIE(NBABaseIE):
311     IENAME = 'nba:embed'
312     _VALID_URL = r'https?://secure\.nba\.com/assets/amp/include/video/(?:topI|i)frame\.html\?.*?\bcontentId=(?P&lt;id&gt;[^?#&amp;]+)'
313     _TESTS = [{
314         'url': 'https://secure.nba.com/assets/amp/include/video/topIframe.html?contentId=teams/bulls/2020/12/04/3478774/1607105587854-20201204_SCHEDULE_RELEASE_FINAL_DRUPAL-3478774&amp;team=bulls&amp;adFree=false&amp;profile=71&amp;videoPlayerName=TAMPCVP&amp;baseUrl=&amp;videoAdsection=nba.com_mobile_web_teamsites_chicagobulls&amp;ampEnv=',
315         'only_matching': True,
316     }, {
317         'url': 'https://secure.nba.com/assets/amp/include/video/iframe.html?contentId=2016/10/29/0021600027boschaplay7&amp;adFree=false&amp;profile=71&amp;team=&amp;videoPlayerName=LAMPCVP',
318         'only_matching': True,
319     }]
320     def _real_extract(self, url):
321         qs = compat_parse_qs(compat_urllib_parse_urlparse(url).query)
322         content_id = qs['contentId'][0]
323         team = qs.get('team', [None])[0]
324         if not team:
325             return self.url_result(
326                 'https://watch.nba.com/video/' + content_id, NBAWatchIE.ie_key())
327         video = self._call_api(team, content_id, {'videoid': content_id}, 'video')[0]
328         return self._extract_video(video, team)
329 class NBAIE(NBABaseIE):
330     IENAME = 'nba'
331     _VALID_URL = NBABaseIE._VALID_URL_BASE + '(?!%s)video/(?P&lt;id&gt;(?:[^/]+/)*[^/?#&amp;]+)' % NBABaseIE._CHANNEL_PATH_REGEX
332     _TESTS = [{
333         'url': 'https://www.nba.com/bulls/video/teams/bulls/2020/12/04/3478774/1607105587854-20201204schedulereleasefinaldrupal-3478774',
334         'info_dict': {
335             'id': '45039',
336             'ext': 'mp4',
337             'title': 'AND WE BACK.',
338             'description': 'Part 1 of our 2020-21 schedule is here! Watch our games on NBC Sports Chicago.',
339             'duration': 94,
340             'timestamp': 1607112000,
341             'upload_date': '20201218',
342         },
343     }, {
344         'url': 'https://www.nba.com/bucks/play#/video/teams%2Fbucks%2F2020%2F12%2F17%2F64860%2F1608252863446-Op_Dream_16x9-64860',
345         'only_matching': True,
346     }, {
347         'url': 'https://www.nba.com/bucks/play#/video/wsc%2Fteams%2F2787C911AA1ACD154B5377F7577CCC7134B2A4B0',
348         'only_matching': True,
349     }]
350     _CONTENT_ID_REGEX = r'videoID'
351     def _extract_url_results(self, team, content_id):
352         return self._embed_url_result(team, content_id)
353 class NBAChannelIE(NBABaseIE):
354     IENAME = 'nba:channel'
355     _VALID_URL = NBABaseIE._VALID_URL_BASE + '(?:%s)/(?P&lt;id&gt;[^/?#&amp;]+)' % NBABaseIE._CHANNEL_PATH_REGEX
356     _TESTS = [{
357         'url': 'https://www.nba.com/blazers/video/channel/summer_league',
358         'info_dict': {
359             'title': 'Summer League',
360         },
361         'playlist_mincount': 138,
362     }, {
363         'url': 'https://www.nba.com/bucks/play#/series/On%20This%20Date',
364         'only_matching': True,
365     }]
366     _CONTENT_ID_REGEX = r'videoSubCategory'
367     _PAGE_SIZE = 100
368     def _fetch_page(self, team, channel, page):
369         results = self._call_api(team, channel, {
370             'channels': channel,
371             'count': self._PAGE_SIZE,
372             'offset': page * self._PAGE_SIZE,
373         }, 'page %d' % (page + 1))
374         for video in results:
375             yield self._extract_video(video, team, False)
376     def _extract_url_results(self, team, content_id):
377         entries = OnDemandPagedList(
378             functools.partial(self._fetch_page, team, content_id),
379             self._PAGE_SIZE)
380         return self.playlist_result(entries, playlist_title=content_id)
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
