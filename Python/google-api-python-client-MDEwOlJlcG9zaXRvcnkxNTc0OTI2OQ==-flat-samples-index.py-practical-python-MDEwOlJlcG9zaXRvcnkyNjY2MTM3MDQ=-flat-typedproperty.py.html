
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Tokens: 16, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>google-api-python-client-MDEwOlJlcG9zaXRvcnkxNTc0OTI2OQ==-flat-samples-index.py</h3>
            <pre><code>1  #!/usr/bin/python
2  from __future__ import print_function
3  import httplib2
4  import itertools
5  import json
6  import os
7  import re
8  BASE_HG_URI = "http://code.google.com/p/google-api-python-client/source/" "browse/#hg"
9  http = httplib2.Http(".cache")
10  r, c = http.request("https://www.googleapis.com/discovery/v1/apis")
11  if r.status != 200:
12      raise ValueError("Received non-200 response when retrieving Discovery.")
13  DIRECTORY = {}
14  for item in json.loads(c)["items"]:
15      if item["preferred"]:
16          DIRECTORY[item["name"]] = item
17  KEYWORDS = {
18      "appengine": "Google App Engine",
19      "oauth2": "OAuth 2.0",
20      "cmdline": "Command-line",
21      "django": "Django",
22      "threading": "Threading",
23      "pagination": "Pagination",
24      "media": "Media Upload and Download",
25  }
26  def get_lines(name, lines):
27      retval = []
28      matches = itertools.ifilter(lambda x: x.startswith(name + ":"), lines)
29      for line in matches:
30          retval.extend(line[len(name) + 1 :].split())
31      return retval
32  def wiki_escape(s):
33      ret = []
34      for word in s.split():
35          if re.match(r"[A-Z]+[a-z]+[A-Z]", word):
36              word = "!%s" % word
37          ret.append(word)
38      return " ".join(ret)
39  def context_from_sample(api, keywords, dirname, desc, uri):
40      if uri is None:
41          uri = BASE_HG_URI + dirname.replace("/", "%2F")
42      else:
43          uri = "".join(uri)
44      if api is None:
45          return None
46      else:
47          entry = DIRECTORY[api]
48          context = {
49              "api": api,
50              "version": entry["version"],
51              "api_name": wiki_escape(entry.get("title", entry.get("description"))),
52              "api_desc": wiki_escape(entry["description"]),
53              "api_icon": entry["icons"]["x32"],
54              "keywords": keywords,
55              "dir": dirname,
56              "uri": uri,
57              "desc": wiki_escape(desc),
58          }
59          return context
60  def keyword_context_from_sample(keywords, dirname, desc, uri):
61      if uri is None:
62          uri = BASE_HG_URI + dirname.replace("/", "%2F")
63      else:
64          uri = "".join(uri)
65      context = {
66          "keywords": keywords,
67          "dir": dirname,
68          "uri": uri,
69          "desc": wiki_escape(desc),
70      }
71      return context
72  def scan_readme_files(dirname):
73      samples = []
74      keyword_set = set()
75      for root, dirs, files in os.walk(dirname):
76          if "README" in files:
77              filename = os.path.join(root, "README")
78              with open(filename, "r") as f:
79                  content = f.read()
80                  lines = content.splitlines()
81                  desc = " ".join(itertools.takewhile(lambda x: x, lines))
<span onclick='openModal()' class='match'>82                  api = get_lines("api", lines)
83                  keywords = get_lines("keywords", lines)
84                  uri = get_lines("uri", lines)
</span>85                  if not uri:
86                      uri = None
87                  for k in keywords:
88                      if k not in KEYWORDS:
89                          raise ValueError(
90                              "%s is not a valid keyword in file %s" % (k, filename)
91                          )
92                  keyword_set.update(keywords)
93                  if not api:
94                      api = [None]
95                  samples.append((api[0], keywords, root[1:], desc, uri))
96      samples.sort()
97      return samples, keyword_set
98  def main():
99      samples, keyword_set = scan_readme_files("./samples")
100      page = ['<wiki:toc max_depth="3" />\n= Samples By API =\n']
101      current_api = None
102      for api, keywords, dirname, desc, uri in samples:
103          context = context_from_sample(api, keywords, dirname, desc, uri)
104          if context is None:
105              continue
106          if current_api != api:
107              page.append(
108                  % context
109              )
110              current_api = api
111          page.append("|| [%(uri)s %(dir)s] || %(desc)s ||\n" % context)
112      for keyword, keyword_name in KEYWORDS.iteritems():
113          if keyword not in keyword_set:
114              continue
115          page.append("\n= %s Samples =\n\n" % keyword_name)
116          page.append("<table border=1 cellspacing=0 cellpadding=8px>\n")
117          for _, keywords, dirname, desc, uri in samples:
118              context = keyword_context_from_sample(keywords, dirname, desc, uri)
119              if keyword not in keywords:
120                  continue
121              page.append(
122                  % context
123              )
124          page.append("</table>\n")
125      print("".join(page))
126  if __name__ == "__main__":
127      main()
</code></pre>
        </div>
        <div class="column">
            <h3>practical-python-MDEwOlJlcG9zaXRvcnkyNjY2MTM3MDQ=-flat-typedproperty.py</h3>
            <pre><code>1  def typedproperty(name, expected_type):
2      private_name = '_' + name
3      @property
4      def prop(self):
5          return getattr(self, private_name)
6      @prop.setter
7      def prop(self, value):
8          if not isinstance(value, expected_type):
9              raise TypeError(f'Expected {expected_type}')
10          setattr(self, private_name, value)
11      return prop
12  String = lambda name: typedproperty(name, str)
13  Integer = lambda name: typedproperty(name, int)
14  Float = lambda name: typedproperty(name, float)
15  if __name__ == '__main__':
16      class Stock:
17          name = typedproperty('name', str)
<span onclick='openModal()' class='match'>18          shares = typedproperty('shares', int)
19          price = typedproperty('price', float)
20          def __init__(self, name, shares, price):
</span>21              self.name = name
22              self.shares = shares
23              self.price = price
24      class Stock2:
25          name = String('name')
26          shares = Integer('shares')
27          price = Float('price')
28          def __init__(self, name, shares, price):
29              self.name = name
30              self.shares = shares
31              self.price = price
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from google-api-python-client-MDEwOlJlcG9zaXRvcnkxNTc0OTI2OQ==-flat-samples-index.py</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from practical-python-MDEwOlJlcG9zaXRvcnkyNjY2MTM3MDQ=-flat-typedproperty.py</div>
                </div>
                <div class="column column_space"><pre><code>82                  api = get_lines("api", lines)
83                  keywords = get_lines("keywords", lines)
84                  uri = get_lines("uri", lines)
</pre></code></div>
                <div class="column column_space"><pre><code>18          shares = typedproperty('shares', int)
19          price = typedproperty('price', float)
20          def __init__(self, name, shares, price):
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    