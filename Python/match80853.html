<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for helm_1.py &amp; localfs.py</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for helm_1.py &amp; localfs.py
      </h3>
<h1 align="center">
        4.0%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>helm_1.py (2.6824033%)<th>localfs.py (8.417508%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(1069-1073)<td><a href="#" name="0">(150-154)</a><td align="center"><font color="#ff0000">13</font>
<tr onclick='openModal("#f63526")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f63526"><font color="#f63526">-</font><td><a href="#" name="1">(36-52)<td><a href="#" name="1">(18-30)</a><td align="center"><font color="#eb0000">12</font>
</td></td></a></td></td></tr></td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>helm_1.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
<font color="#f63526"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>import copy
import logging
import re
from salt.exceptions import CommandExecutionError
from salt.serializers import json
log = logging.getLogger(__name__)
__func_alias__ = {
    "help_": "help",
    "list_": "list",
}
def _prepare_cmd(binary=</b></font>"helm", commands=None, flags=None, kvflags=None):
    if commands is None:
        commands = []
    if flags is None:
        flags = []
    else:
        flags = copy.deepcopy(flags)
    if kvflags is None:
        kvflags = {}
    else:
        kvflags = copy.deepcopy(kvflags)
    cmd = (binary,)
    for command in commands:
        cmd += (command,)
    for arg in flags:
        if not re.search(r"^--.*", arg):
            arg = "--" + arg
        cmd += (arg,)
    for key, val in kvflags.items():
        if not re.search(r"^--.*", key):
            key = "--" + key
        if key == "--set" and isinstance(val, list):
            for set_val in val:
                cmd += (
                    key,
                    set_val,
                )
        else:
            cmd += (
                key,
                val,
            )
    return cmd
def _exec_cmd(commands=None, flags=None, kvflags=None):
    cmd = _prepare_cmd(commands=commands, flags=flags, kvflags=kvflags)
    cmd_string = " ".join(cmd)
    try:
        result = __salt__["cmd.run_all"](cmd=cmd)
        result.update({"cmd": cmd_string})
    except CommandExecutionError as err:
        result = {"retcode": -1, "stdout": "", "stderr": err, "cmd": cmd_string}
        log.error(result)
    return result
def _exec_true_return(commands=None, flags=None, kvflags=None):
    cmd_result = _exec_cmd(commands=commands, flags=flags, kvflags=kvflags)
    if cmd_result.get("retcode", -1) == 0:
        result = True
    else:
        result = cmd_result.get("stderr", "")
    return result
def _exec_string_return(commands=None, flags=None, kvflags=None):
    cmd_result = _exec_cmd(commands=commands, flags=flags, kvflags=kvflags)
    if cmd_result.get("retcode", -1) == 0:
        result = cmd_result.get("stdout", "")
    else:
        result = cmd_result.get("stderr", "")
    return result
def _exec_dict_return(commands=None, flags=None, kvflags=None):
    if kvflags is None:
        kvflags = {}
    if not ("output" in kvflags.keys() or "--output" in kvflags.keys()):
        kvflags.update({"output": "json"})
    cmd_result = _exec_cmd(commands=commands, flags=flags, kvflags=kvflags)
    if cmd_result.get("retcode", -1) == 0:
        if kvflags.get("output") == "json" or kvflags.get("--output") == "json":
            result = json.deserialize(cmd_result.get("stdout", ""))
        else:
            result = cmd_result.get("stdout", "")
    else:
        result = cmd_result.get("stderr", "")
    return result
def completion(shell, flags=None, kvflags=None):
    return _exec_string_return(
        commands=["completion", shell], flags=flags, kvflags=kvflags
    )
def create(name, flags=None, kvflags=None):
    return _exec_true_return(commands=["create", name], flags=flags, kvflags=kvflags)
def dependency_build(chart, flags=None, kvflags=None):
    return _exec_true_return(
        commands=["dependency", "build", chart], flags=flags, kvflags=kvflags
    )
def dependency_list(chart, flags=None, kvflags=None):
    return _exec_string_return(
        commands=["dependency", "list", chart], flags=flags, kvflags=kvflags
    )
def dependency_update(chart, flags=None, kvflags=None):
    return _exec_true_return(
        commands=["dependency", "update", chart], flags=flags, kvflags=kvflags
    )
def env(flags=None, kvflags=None):
    return _exec_string_return(commands=["env"], flags=flags, kvflags=kvflags)
def get_all(release, flags=None, kvflags=None):
    return _exec_string_return(
        commands=["get", "all", release], flags=flags, kvflags=kvflags
    )
def get_hooks(release, flags=None, kvflags=None):
    return _exec_string_return(
        commands=["get", "hooks", release], flags=flags, kvflags=kvflags
    )
def get_manifest(release, flags=None, kvflags=None):
    return _exec_string_return(
        commands=["get", "manifest", release], flags=flags, kvflags=kvflags
    )
def get_notes(release, flags=None, kvflags=None):
    return _exec_string_return(
        commands=["get", "notes", release], flags=flags, kvflags=kvflags
    )
def get_values(release, flags=None, kvflags=None):
    return _exec_dict_return(
        commands=["get", "values", release], flags=flags, kvflags=kvflags
    )
def help_(command, flags=None, kvflags=None):
    return _exec_string_return(commands=["help", command], flags=flags, kvflags=kvflags)
def history(release, flags=None, kvflags=None):
    return _exec_dict_return(
        commands=["history", release], flags=flags, kvflags=kvflags
    )
def install(
    release,
    chart,
    values=None,
    version=None,
    namespace=None,
    set=None,
    flags=None,
    kvflags=None,
):
    if values:
        if kvflags:
            kvflags.update({"values": values})
        else:
            kvflags = {"values": values}
    if version:
        if kvflags:
            kvflags.update({"version": version})
        else:
            kvflags = {"version": version}
    if namespace:
        if kvflags:
            kvflags.update({"namespace": namespace})
        else:
            kvflags = {"namespace": namespace}
    if set:
        if kvflags:
            kvflags.update({"set": set})
        else:
            kvflags = {"set": set}
    return _exec_true_return(
        commands=["install", release, chart], flags=flags, kvflags=kvflags
    )
def lint(path, values=None, namespace=None, set=None, flags=None, kvflags=None):
    if values:
        if kvflags:
            kvflags.update({"values": values})
        else:
            kvflags = {"values": values}
    if namespace:
        if kvflags:
            kvflags.update({"namespace": namespace})
        else:
            kvflags = {"namespace": namespace}
    if set:
        if kvflags:
            kvflags.update({"set": set})
        else:
            kvflags = {"set": set}
    return _exec_true_return(commands=["lint", path], flags=flags, kvflags=kvflags)
def list_(namespace=None, flags=None, kvflags=None):
    if namespace:
        if kvflags:
            kvflags.update({"namespace": namespace})
        else:
            kvflags = {"namespace": namespace}
    return _exec_dict_return(commands=["list"], flags=flags, kvflags=kvflags)
def package(chart, flags=None, kvflags=None):
    return _exec_true_return(commands=["package", chart], flags=flags, kvflags=kvflags)
def plugin_install(path, flags=None, kvflags=None):
    return _exec_true_return(
        commands=["plugin", "install", path], flags=flags, kvflags=kvflags
    )
def plugin_list(flags=None, kvflags=None):
    return _exec_string_return(
        commands=["plugin", "list"], flags=flags, kvflags=kvflags
    )
def plugin_uninstall(plugin, flags=None, kvflags=None):
    return _exec_true_return(
        commands=["plugin", "uninstall", plugin], flags=flags, kvflags=kvflags
    )
def plugin_update(plugin, flags=None, kvflags=None):
    return _exec_true_return(
        commands=["plugin", "update", plugin], flags=flags, kvflags=kvflags
    )
def pull(pkg, flags=None, kvflags=None):
    return _exec_true_return(commands=["pull", pkg], flags=flags, kvflags=kvflags)
def repo_add(name, url, namespace=None, flags=None, kvflags=None):
    if namespace:
        if kvflags:
            kvflags.update({"namespace": namespace})
        else:
            kvflags = {"namespace": namespace}
    return _exec_true_return(
        commands=["repo", "add", name, url], flags=flags, kvflags=kvflags
    )
def repo_index(directory, namespace=None, flags=None, kvflags=None):
    if namespace:
        if kvflags:
            kvflags.update({"namespace": namespace})
        else:
            kvflags = {"namespace": namespace}
    return _exec_true_return(
        commands=["repo", "index", directory], flags=flags, kvflags=kvflags
    )
def repo_list(namespace=None, flags=None, kvflags=None):
    if namespace:
        if kvflags:
            kvflags.update({"namespace": namespace})
        else:
            kvflags = {"namespace": namespace}
    return _exec_dict_return(commands=["repo", "list"], flags=flags, kvflags=kvflags)
def repo_remove(name, namespace=None, flags=None, kvflags=None):
    if namespace:
        if kvflags:
            kvflags.update({"namespace": namespace})
        else:
            kvflags = {"namespace": namespace}
    return _exec_true_return(
        commands=["repo", "remove", name], flags=flags, kvflags=kvflags
    )
def repo_update(namespace=None, flags=None, kvflags=None):
    if namespace:
        if kvflags:
            kvflags.update({"namespace": namespace})
        else:
            kvflags = {"namespace": namespace}
    return _exec_true_return(commands=["repo", "update"], flags=flags, kvflags=kvflags)
def repo_manage(
    present=None, absent=None, prune=False, namespace=None, flags=None, kvflags=None
):
    if present is None:
        present = []
    else:
        present = copy.deepcopy(present)
    if absent is None:
        absent = []
    else:
        absent = copy.deepcopy(absent)
    if namespace:
        if kvflags:
            kvflags.update({"namespace": namespace})
        else:
            kvflags = {"namespace": namespace}
    repos_present = repo_list(namespace=namespace, flags=flags, kvflags=kvflags)
    if not isinstance(repos_present, list):
        repos_present = []
    result = {"present": [], "added": [], "absent": [], "removed": [], "failed": []}
    for repo in present:
        if not (
            isinstance(repo, dict) and "name" in repo.keys() and "url" in repo.keys()
        ):
            raise CommandExecutionError(
                "Parameter present have to be formatted like "
                "[{'name': '&lt;myRepoName&gt;', 'url': '&lt;myRepoUrl&gt;'}]"
            )
        already_present = False
        for (index, repo_present) in enumerate(repos_present):
            if repo.get("name") == repo_present.get("name") and repo.get(
                "url"
            ) == repo_present.get("url"):
                result["present"].append(repo)
                repos_present.pop(index)
                already_present = True
                break
        if not already_present:
            repo_add_status = repo_add(
                repo.get("name"),
                repo.get("url"),
                namespace=namespace,
                flags=flags,
                kvflags=kvflags,
            )
            if isinstance(repo_add_status, bool) and repo_add_status:
                result["added"].append(repo)
<a name="0"></a>            else:
                result["failed"].append(repo)
    <font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>for repo in repos_present:
        if prune:
            absent.append(repo.get("name"))
        elif not repo.get("name") in absent:
            result["present"].append(r</b></font>epo)
    for name in absent:
        remove_status = repo_remove(name, namespace=namespace)
        if isinstance(remove_status, bool) and remove_status:
            result["removed"].append(name)
        else:
            result["absent"].append(name)
    return result
def rollback(release, revision, namespace=None, flags=None, kvflags=None):
    if namespace:
        if kvflags:
            kvflags.update({"namespace": namespace})
        else:
            kvflags = {"namespace": namespace}
    return _exec_true_return(
        commands=["rollback", release, revision], flags=flags, kvflags=kvflags
    )
def search_hub(keyword, flags=None, kvflags=None):
    return _exec_dict_return(
        commands=["search", "hub", keyword], flags=flags, kvflags=kvflags
    )
def search_repo(keyword, flags=None, kvflags=None):
    return _exec_dict_return(
        commands=["search", "repo", keyword], flags=flags, kvflags=kvflags
    )
def show_all(chart, flags=None, kvflags=None):
    return _exec_string_return(
        commands=["show", "all", chart], flags=flags, kvflags=kvflags
    )
def show_chart(chart, flags=None, kvflags=None):
    return _exec_string_return(
        commands=["show", "chart", chart], flags=flags, kvflags=kvflags
    )
def show_readme(chart, flags=None, kvflags=None):
    return _exec_string_return(
        commands=["show", "readme", chart], flags=flags, kvflags=kvflags
    )
def show_values(chart, flags=None, kvflags=None):
    return _exec_string_return(
        commands=["show", "values", chart], flags=flags, kvflags=kvflags
    )
def status(release, namespace=None, flags=None, kvflags=None):
    if namespace:
        if kvflags:
            kvflags.update({"namespace": namespace})
        else:
            kvflags = {"namespace": namespace}
    return _exec_dict_return(commands=["status", release], flags=flags, kvflags=kvflags)
def template(
    name, chart, values=None, output_dir=None, set=None, flags=None, kvflags=None
):
    if values:
        if kvflags:
            kvflags.update({"values": values})
        else:
            kvflags = {"values": values}
    if set:
        if kvflags:
            kvflags.update({"set": set})
        else:
            kvflags = {"set": set}
    if output_dir:
        kvflags.update({"output-dir": output_dir})
    return _exec_string_return(
        commands=["template", name, chart], flags=flags, kvflags=kvflags
    )
def test(release, flags=None, kvflags=None):
    return _exec_string_return(commands=["test", release], flags=flags, kvflags=kvflags)
def uninstall(release, namespace=None, flags=None, kvflags=None):
    if namespace:
        if kvflags:
            kvflags.update({"namespace": namespace})
        else:
            kvflags = {"namespace": namespace}
    return _exec_true_return(
        commands=["uninstall", release], flags=flags, kvflags=kvflags
    )
def upgrade(
    release,
    chart,
    values=None,
    version=None,
    namespace=None,
    set=None,
    flags=None,
    kvflags=None,
):
    if values:
        if kvflags:
            kvflags.update({"values": values})
        else:
            kvflags = {"values": values}
    if version:
        if kvflags:
            kvflags.update({"version": version})
        else:
            kvflags = {"version": version}
    if namespace:
        if kvflags:
            kvflags.update({"namespace": namespace})
        else:
            kvflags = {"namespace": namespace}
    if set:
        if kvflags:
            kvflags.update({"set": set})
        else:
            kvflags = {"set": set}
    return _exec_true_return(
        commands=["upgrade", release, chart], flags=flags, kvflags=kvflags
    )
def verify(path, flags=None, kvflags=None):
    return _exec_true_return(commands=["verify", path], flags=flags, kvflags=kvflags)
def version(flags=None, kvflags=None):
    return _exec_string_return(commands=["version"], flags=flags, kvflags=kvflags)
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>localfs.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
import errno
import logging
<a name="1"></a>import os
import os.path
import shutil
<font color="#f63526"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>import tempfile
import salt.payload
import salt.utils.atomicfile
import salt.utils.files
from salt.exceptions import SaltCacheError
log = logging.getLogger(__name__)
__func_alias__ = {"list_": "list"}
def __cachedir(kwargs=</b></font>None):
    if kwargs and "cachedir" in kwargs:
        return kwargs["cachedir"]
    return __opts__.get("cachedir", salt.syspaths.CACHE_DIR)
def init_kwargs(kwargs):
    return {"cachedir": __cachedir(kwargs)}
def get_storage_id(kwargs):
    return ("localfs", __cachedir(kwargs))
def store(bank, key, data, cachedir):
    base = os.path.join(cachedir, os.path.normpath(bank))
    try:
        os.makedirs(base)
    except OSError as exc:
        if exc.errno != errno.EEXIST:
            raise SaltCacheError(
                "The cache directory, {}, could not be created: {}".format(base, exc)
            )
    outfile = os.path.join(base, "{}.p".format(key))
    tmpfh, tmpfname = tempfile.mkstemp(dir=base)
    os.close(tmpfh)
    try:
        with salt.utils.files.fopen(tmpfname, "w+b") as fh_:
            salt.payload.dump(data, fh_)
        salt.utils.atomicfile.atomic_rename(tmpfname, outfile)
    except OSError as exc:
        raise SaltCacheError(
            "There was an error writing the cache file, {}: {}".format(base, exc)
        )
def fetch(bank, key, cachedir):
    inkey = False
    key_file = os.path.join(cachedir, os.path.normpath(bank), "{}.p".format(key))
    if not os.path.isfile(key_file):
        key_file = os.path.join(cachedir, os.path.normpath(bank) + ".p")
        inkey = True
    if not os.path.isfile(key_file):
        log.debug('Cache file "%s" does not exist', key_file)
        return {}
    try:
        with salt.utils.files.fopen(key_file, "rb") as fh_:
            if inkey:
                return salt.payload.load(fh_)[key]
            else:
                return salt.payload.load(fh_)
    except OSError as exc:
        raise SaltCacheError(
            'There was an error reading the cache file "{}": {}'.format(key_file, exc)
        )
def updated(bank, key, cachedir):
    key_file = os.path.join(cachedir, os.path.normpath(bank), "{}.p".format(key))
    if not os.path.isfile(key_file):
        log.warning('Cache file "%s" does not exist', key_file)
        return None
    try:
        return int(os.path.getmtime(key_file))
    except OSError as exc:
        raise SaltCacheError(
            'There was an error reading the mtime for "{}": {}'.format(key_file, exc)
        )
def flush(bank, key=None, cachedir=None):
    if cachedir is None:
        cachedir = __cachedir()
    try:
        if key is None:
            target = os.path.join(cachedir, os.path.normpath(bank))
            if not os.path.isdir(target):
                return False
            shutil.rmtree(target)
        else:
            target = os.path.join(cachedir, os.path.normpath(bank), "{}.p".format(key))
            if not os.path.isfile(target):
                return False
            os.remove(target)
    except OSError as exc:
        raise SaltCacheError('There was an error removing "{}": {}'.format(target, exc))
    return True
def list_(bank, cachedir):
    base = os.path.join(cachedir, os.path.normpath(bank))
    if not os.path.isdir(base):
        return []
    try:
        items = os.listdir(base)
    except OSError as exc:
        raise SaltCacheError(
<a name="0"></a>            'There was an error accessing directory "{}": {}'.format(base, exc)
        )
    ret = []
    <font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>for item in items:
        if item.endswith(".p"):
            ret.append(item.rstrip(item[-2:]))
        else:
            ret.append(i</b></font>tem)
    return ret
def contains(bank, key, cachedir):
    if key is None:
        base = os.path.join(cachedir, os.path.normpath(bank))
        return os.path.isdir(base)
    else:
        keyfile = os.path.join(cachedir, os.path.normpath(bank), "{}.p".format(key))
        return os.path.isfile(keyfile)
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
