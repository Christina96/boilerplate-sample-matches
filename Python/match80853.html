<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for helm_1.py &amp; localfs.py</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for helm_1.py &amp; localfs.py
      </h3>
<h1 align="center">
        4.0%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>helm_1.py (2.6824033%)<th>localfs.py (8.417508%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(1069-1073)<td><a href="#" name="0">(150-154)</a><td align="center"><font color="#ff0000">13</font>
<tr onclick='openModal("#f63526")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f63526"><font color="#f63526">-</font><td><a href="#" name="1">(36-52)<td><a href="#" name="1">(18-30)</a><td align="center"><font color="#eb0000">12</font>
</td></td></a></td></td></tr></td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>helm_1.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 """
2 <font color="#f63526"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>import copy
3 import logging
4 import re
5 from salt.exceptions import CommandExecutionError
6 from salt.serializers import json
7 log = logging.getLogger(__name__)
8 __func_alias__ = {
9     "help_": "help",
10     "list_": "list",
11 }
12 def _prepare_cmd(binary=</b></font>"helm", commands=None, flags=None, kvflags=None):
13     """
14     :param binary:
15     :param commands:
16     :param flags:
17     :param kvflags:
18     :return:
19     """
20     if commands is None:
21         commands = []
22     if flags is None:
23         flags = []
24     else:
25         flags = copy.deepcopy(flags)
26     if kvflags is None:
27         kvflags = {}
28     else:
29         kvflags = copy.deepcopy(kvflags)
30     cmd = (binary,)
31     for command in commands:
32         cmd += (command,)
33     for arg in flags:
34         if not re.search(r"^--.*", arg):
35             arg = "--" + arg
36         cmd += (arg,)
37     for key, val in kvflags.items():
38         if not re.search(r"^--.*", key):
39             key = "--" + key
40         if key == "--set" and isinstance(val, list):
41             for set_val in val:
42                 cmd += (
43                     key,
44                     set_val,
45                 )
46         else:
47             cmd += (
48                 key,
49                 val,
50             )
51     return cmd
52 def _exec_cmd(commands=None, flags=None, kvflags=None):
53     """
54     :param commands:
55     :param flags:
56     :param kvflags:
57     :return:
58     """
59     cmd = _prepare_cmd(commands=commands, flags=flags, kvflags=kvflags)
60     cmd_string = " ".join(cmd)
61     try:
62         result = __salt__["cmd.run_all"](cmd=cmd)
63         result.update({"cmd": cmd_string})
64     except CommandExecutionError as err:
65         result = {"retcode": -1, "stdout": "", "stderr": err, "cmd": cmd_string}
66         log.error(result)
67     return result
68 def _exec_true_return(commands=None, flags=None, kvflags=None):
69     """
70     :param commands:
71     :param flags:
72     :param kvflags:
73     :return:
74     """
75     cmd_result = _exec_cmd(commands=commands, flags=flags, kvflags=kvflags)
76     if cmd_result.get("retcode", -1) == 0:
77         result = True
78     else:
79         result = cmd_result.get("stderr", "")
80     return result
81 def _exec_string_return(commands=None, flags=None, kvflags=None):
82     """
83     :param commands:
84     :param flags:
85     :param kvflags:
86     :return:
87     """
88     cmd_result = _exec_cmd(commands=commands, flags=flags, kvflags=kvflags)
89     if cmd_result.get("retcode", -1) == 0:
90         result = cmd_result.get("stdout", "")
91     else:
92         result = cmd_result.get("stderr", "")
93     return result
94 def _exec_dict_return(commands=None, flags=None, kvflags=None):
95     """
96     :param commands:
97     :param flags:
98     :param kvflags:
99     :return:
100     """
101     if kvflags is None:
102         kvflags = {}
103     if not ("output" in kvflags.keys() or "--output" in kvflags.keys()):
104         kvflags.update({"output": "json"})
105     cmd_result = _exec_cmd(commands=commands, flags=flags, kvflags=kvflags)
106     if cmd_result.get("retcode", -1) == 0:
107         if kvflags.get("output") == "json" or kvflags.get("--output") == "json":
108             result = json.deserialize(cmd_result.get("stdout", ""))
109         else:
110             result = cmd_result.get("stdout", "")
111     else:
112         result = cmd_result.get("stderr", "")
113     return result
114 def completion(shell, flags=None, kvflags=None):
115     """
116     Generate auto-completions script for Helm for the specified shell (bash or zsh).
117     Return the shell auto-completion content.
118     shell
119         (string) One of ['bash', 'zsh'].
120     flags
121         (list) Flags in argument of the command without values. ex: ['help', '--help']
122     kvflags
123         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
124     CLI Example:
125     .. code-block:: bash
126         salt '*' helm.completion bash
127     """
128     return _exec_string_return(
129         commands=["completion", shell], flags=flags, kvflags=kvflags
130     )
131 def create(name, flags=None, kvflags=None):
132     """
133     Creates a chart directory along with the common files and directories used in a chart.
134     Return True if succeed, else the error message.
135     name
136         (string) The chart name to create.
137     flags
138         (list) Flags in argument of the command without values. ex: ['help', '--help']
139     kvflags
140         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
141     CLI Example:
142     .. code-block:: bash
143         salt '*' helm.create NAME
144     """
145     return _exec_true_return(commands=["create", name], flags=flags, kvflags=kvflags)
146 def dependency_build(chart, flags=None, kvflags=None):
147     """
148     Build out the charts/ directory from the Chart.lock file.
149     Return True if succeed, else the error message.
150     chart
151         (string) The chart name to build dependency.
152     flags
153         (list) Flags in argument of the command without values. ex: ['help', '--help']
154     kvflags
155         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
156     CLI Example:
157     .. code-block:: bash
158         salt '*' helm.dependency_build CHART
159     """
160     return _exec_true_return(
161         commands=["dependency", "build", chart], flags=flags, kvflags=kvflags
162     )
163 def dependency_list(chart, flags=None, kvflags=None):
164     """
165     List all of the dependencies declared in a chart.
166     Return chart dependencies if succeed, else the error message.
167     chart
168         (string) The chart name to list dependency.
169     flags
170         (list) Flags in argument of the command without values. ex: ['help', '--help']
171     kvflags
172         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
173     CLI Example:
174     .. code-block:: bash
175         salt '*' helm.dependency_list CHART
176     """
177     return _exec_string_return(
178         commands=["dependency", "list", chart], flags=flags, kvflags=kvflags
179     )
180 def dependency_update(chart, flags=None, kvflags=None):
181     """
182     Update the on-disk dependencies to mirror Chart.yaml.
183     Return True if succeed, else the error message.
184     chart
185         (string) The chart name to update dependency.
186     flags
187         (list) Flags in argument of the command without values. ex: ['help', '--help']
188     kvflags
189         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
190     CLI Example:
191     .. code-block:: bash
192         salt '*' helm.dependency_update CHART
193     """
194     return _exec_true_return(
195         commands=["dependency", "update", chart], flags=flags, kvflags=kvflags
196     )
197 def env(flags=None, kvflags=None):
198     """
199     Prints out all the environment information in use by Helm.
200     Return Helm environments variables if succeed, else the error message.
201     flags
202         (list) Flags in argument of the command without values. ex: ['help', '--help']
203     kvflags
204         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
205     CLI Example:
206     .. code-block:: bash
207         salt '*' helm.env
208     """
209     return _exec_string_return(commands=["env"], flags=flags, kvflags=kvflags)
210 def get_all(release, flags=None, kvflags=None):
211     """
212     Prints a human readable collection of information about the notes, hooks, supplied values, and generated manifest file of the given release.
213     Return release information if succeed, else the error message.
214     release
215         (string) Release name to get information from.
216     flags
217         (list) Flags in argument of the command without values. ex: ['help', '--help']
218     kvflags
219         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
220     CLI Example:
221     .. code-block:: bash
222         salt '*' helm.get_all RELEASE
223     """
224     return _exec_string_return(
225         commands=["get", "all", release], flags=flags, kvflags=kvflags
226     )
227 def get_hooks(release, flags=None, kvflags=None):
228     """
229     Prints a human readable collection of information about the hooks of the given release.
230     Return release hooks information if succeed, else the error message.
231     release
232         (string) Release name to get hooks information from.
233     flags
234         (list) Flags in argument of the command without values. ex: ['help', '--help']
235     kvflags
236         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
237     CLI Example:
238     .. code-block:: bash
239         salt '*' helm.get_hooks RELEASE
240     """
241     return _exec_string_return(
242         commands=["get", "hooks", release], flags=flags, kvflags=kvflags
243     )
244 def get_manifest(release, flags=None, kvflags=None):
245     """
246     Prints a human readable collection of information about the manifest of the given release.
247     Return release manifest information if succeed, else the error message.
248     release
249         (string) Release name to get manifest information from.
250     flags
251         (list) Flags in argument of the command without values. ex: ['help', '--help']
252     kvflags
253         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
254     CLI Example:
255     .. code-block:: bash
256         salt '*' helm.get_manifest RELEASE
257     """
258     return _exec_string_return(
259         commands=["get", "manifest", release], flags=flags, kvflags=kvflags
260     )
261 def get_notes(release, flags=None, kvflags=None):
262     """
263     Prints a human readable collection of information about the notes of the given release.
264     Return release notes information if succeed, else the error message.
265     release
266         (string) Release name to get notes information from.
267     flags
268         (list) Flags in argument of the command without values. ex: ['help', '--help']
269     kvflags
270         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
271     CLI Example:
272     .. code-block:: bash
273         salt '*' helm.get_notes RELEASE
274     """
275     return _exec_string_return(
276         commands=["get", "notes", release], flags=flags, kvflags=kvflags
277     )
278 def get_values(release, flags=None, kvflags=None):
279     """
280     Prints a human readable collection of information about the values of the given release.
281     Return release values information if succeed, else the error message.
282     release
283         (string) Release name to get values information from.
284     flags
285         (list) Flags in argument of the command without values. ex: ['help', '--help']
286     kvflags
287         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
288     CLI Example:
289     .. code-block:: bash
290         salt '*' helm.get_values RELEASE
291         salt '*' helm.get_values RELEASE kvflags="{'output': 'yaml'}"
292     """
293     return _exec_dict_return(
294         commands=["get", "values", release], flags=flags, kvflags=kvflags
295     )
296 def help_(command, flags=None, kvflags=None):
297     """
298     Provides help for any command in the application.
299     Return the full help if succeed, else the error message.
300     command
301         (string) Command to get help. ex: 'get'
302     flags
303         (list) Flags in argument of the command without values. ex: ['help', '--help']
304     kvflags
305         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
306     CLI Example:
307     .. code-block:: bash
308         salt '*' helm.help COMMAND
309     """
310     return _exec_string_return(commands=["help", command], flags=flags, kvflags=kvflags)
311 def history(release, flags=None, kvflags=None):
312     """
313     Prints historical revisions for a given release.
314     Return release historic if succeed, else the error message.
315     release
316         (string) Release name to get history from.
317     flags
318         (list) Flags in argument of the command without values. ex: ['help', '--help']
319     kvflags
320         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
321     CLI Example:
322     .. code-block:: bash
323         salt '*' helm.history RELEASE
324         salt '*' helm.history RELEASE kvflags="{'output': 'yaml'}"
325     """
326     return _exec_dict_return(
327         commands=["history", release], flags=flags, kvflags=kvflags
328     )
329 def install(
330     release,
331     chart,
332     values=None,
333     version=None,
334     namespace=None,
335     set=None,
336     flags=None,
337     kvflags=None,
338 ):
339     """
340     Installs a chart archive.
341     Return True if succeed, else the error message.
342     release
343         (string) Release name to get values information from.
344     chart
345         (string) Chart name to install.
346     values
347         (string) Absolute path to the values.yaml file.
348     version
349         (string) The exact chart version to install. If this is not specified, the latest version is installed.
350     namespace
351         (string) The namespace scope for this request.
352     set
353         (string or list) Set a values on the command line.
354     flags
355         (list) Flags in argument of the command without values. ex: ['help', '--help']
356     kvflags
357         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
358     CLI Example:
359     .. code-block:: bash
360         salt '*' helm.install RELEASE CHART
361         salt '*' helm.install RELEASE CHART values='/path/to/values.yaml'
362     """
363     if values:
364         if kvflags:
365             kvflags.update({"values": values})
366         else:
367             kvflags = {"values": values}
368     if version:
369         if kvflags:
370             kvflags.update({"version": version})
371         else:
372             kvflags = {"version": version}
373     if namespace:
374         if kvflags:
375             kvflags.update({"namespace": namespace})
376         else:
377             kvflags = {"namespace": namespace}
378     if set:
379         if kvflags:
380             kvflags.update({"set": set})
381         else:
382             kvflags = {"set": set}
383     return _exec_true_return(
384         commands=["install", release, chart], flags=flags, kvflags=kvflags
385     )
386 def lint(path, values=None, namespace=None, set=None, flags=None, kvflags=None):
387     """
388     Takes a path to a chart and runs a series of tests to verify that the chart is well-formed.
389     Return True if succeed, else the error message.
390     path
391         (string) The path to the chart to lint.
392     values
393         (string) Absolute path to the values.yaml file.
394     namespace
395         (string) The namespace scope for this request.
396     set
397         (string or list) Set a values on the command line.
398     flags
399         (list) Flags in argument of the command without values. ex: ['help', '--help']
400     kvflags
401         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
402     CLI Example:
403     .. code-block:: bash
404         salt '*' helm.lint PATH
405     """
406     if values:
407         if kvflags:
408             kvflags.update({"values": values})
409         else:
410             kvflags = {"values": values}
411     if namespace:
412         if kvflags:
413             kvflags.update({"namespace": namespace})
414         else:
415             kvflags = {"namespace": namespace}
416     if set:
417         if kvflags:
418             kvflags.update({"set": set})
419         else:
420             kvflags = {"set": set}
421     return _exec_true_return(commands=["lint", path], flags=flags, kvflags=kvflags)
422 def list_(namespace=None, flags=None, kvflags=None):
423     """
424     Lists all of the releases. By default, it lists only releases that are deployed or failed.
425     Return the list of release if succeed, else the error message.
426     namespace
427         (string) The namespace scope for this request.
428     flags
429         (list) Flags in argument of the command without values. ex: ['help', '--help']
430     kvflags
431         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
432     CLI Example:
433     .. code-block:: bash
434         salt '*' helm.list
435         salt '*' helm.list kvflags="{'output': 'yaml'}"
436     """
437     if namespace:
438         if kvflags:
439             kvflags.update({"namespace": namespace})
440         else:
441             kvflags = {"namespace": namespace}
442     return _exec_dict_return(commands=["list"], flags=flags, kvflags=kvflags)
443 def package(chart, flags=None, kvflags=None):
444     """
445     Packages a chart into a versioned chart archive file. If a path is given, this will look at that path for a chart
446     (which must contain a Chart.yaml file) and then package that directory.
447     Return True if succeed, else the error message.
448     chart
449         (string) Chart name to package. Can be an absolute path.
450     flags
451         (list) Flags in argument of the command without values. ex: ['help', '--help']
452     kvflags
453         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
454     CLI Example:
455     .. code-block:: bash
456         salt '*' helm.package CHART
457         salt '*' helm.package CHART kvflags="{'destination': '/path/to/the/package'}"
458     """
459     return _exec_true_return(commands=["package", chart], flags=flags, kvflags=kvflags)
460 def plugin_install(path, flags=None, kvflags=None):
461     """
462     Install a Helm plugin from a url to a VCS repo or a local path.
463     Return True if succeed, else the error message.
464     path
465         (string) Path to the local plugin. Can be an url.
466     flags
467         (list) Flags in argument of the command without values. ex: ['help', '--help']
468     kvflags
469         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
470     CLI Example:
471     .. code-block:: bash
472         salt '*' helm.plugin_install PATH
473     """
474     return _exec_true_return(
475         commands=["plugin", "install", path], flags=flags, kvflags=kvflags
476     )
477 def plugin_list(flags=None, kvflags=None):
478     """
479     List installed Helm plugins.
480     Return the plugin list if succeed, else the error message.
481     flags
482         (list) Flags in argument of the command without values. ex: ['help', '--help']
483     kvflags
484         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
485     CLI Example:
486     .. code-block:: bash
487         salt '*' helm.plugin_list
488     """
489     return _exec_string_return(
490         commands=["plugin", "list"], flags=flags, kvflags=kvflags
491     )
492 def plugin_uninstall(plugin, flags=None, kvflags=None):
493     """
494     Uninstall a Helm plugin.
495     Return True if succeed, else the error message.
496     plugin
497         (string) The plugin to uninstall.
498     flags
499         (list) Flags in argument of the command without values. ex: ['help', '--help']
500     kvflags
501         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
502     CLI Example:
503     .. code-block:: bash
504         salt '*' helm.plugin_uninstall PLUGIN
505     """
506     return _exec_true_return(
507         commands=["plugin", "uninstall", plugin], flags=flags, kvflags=kvflags
508     )
509 def plugin_update(plugin, flags=None, kvflags=None):
510     """
511     Update a Helm plugin.
512     Return True if succeed, else the error message.
513     plugin
514         (string) The plugin to update.
515     flags
516         (list) Flags in argument of the command without values. ex: ['help', '--help']
517     kvflags
518         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
519     CLI Example:
520     .. code-block:: bash
521         salt '*' helm.plugin_update PLUGIN
522     """
523     return _exec_true_return(
524         commands=["plugin", "update", plugin], flags=flags, kvflags=kvflags
525     )
526 def pull(pkg, flags=None, kvflags=None):
527     """
528     Retrieve a package from a package repository, and download it locally.
529     Return True if succeed, else the error message.
530     pkg
531         (string) The package to pull. Can be url or repo/chartname.
532     flags
533         (list) Flags in argument of the command without values. ex: ['help', '--help']
534     kvflags
535         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
536     CLI Example:
537     .. code-block:: bash
538         salt '*' helm.pull PKG
539         salt '*' helm.pull PKG kvflags="{'destination': '/path/to/the/chart'}"
540     """
541     return _exec_true_return(commands=["pull", pkg], flags=flags, kvflags=kvflags)
542 def repo_add(name, url, namespace=None, flags=None, kvflags=None):
543     """
544     Add a chart repository.
545     Return True if succeed, else the error message.
546     name
547         (string) The local name of the repository to install. Have to be unique.
548     url
549         (string) The url to the repository.
550     namespace
551         (string) The namespace scope for this request.
552     flags
553         (list) Flags in argument of the command without values. ex: ['help', '--help']
554     kvflags
555         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
556     CLI Example:
557     .. code-block:: bash
558         salt '*' helm.repo_add NAME URL
559     """
560     if namespace:
561         if kvflags:
562             kvflags.update({"namespace": namespace})
563         else:
564             kvflags = {"namespace": namespace}
565     return _exec_true_return(
566         commands=["repo", "add", name, url], flags=flags, kvflags=kvflags
567     )
568 def repo_index(directory, namespace=None, flags=None, kvflags=None):
569     """
570     Read the current directory and generate an index file based on the charts found.
571     Return True if succeed, else the error message.
572     directory
573         (string) The path to the index.
574     namespace
575         (string) The namespace scope for this request.
576     flags
577         (list) Flags in argument of the command without values. ex: ['help', '--help']
578     kvflags
579         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
580     CLI Example:
581     .. code-block:: bash
582         salt '*' helm.index DIRECTORY
583     """
584     if namespace:
585         if kvflags:
586             kvflags.update({"namespace": namespace})
587         else:
588             kvflags = {"namespace": namespace}
589     return _exec_true_return(
590         commands=["repo", "index", directory], flags=flags, kvflags=kvflags
591     )
592 def repo_list(namespace=None, flags=None, kvflags=None):
593     """
594     List a chart repository.
595     Return the repository list if succeed, else the error message.
596     namespace
597         (string) The namespace scope for this request.
598     flags
599         (list) Flags in argument of the command without values. ex: ['help', '--help']
600     kvflags
601         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
602     CLI Example:
603     .. code-block:: bash
604         salt '*' helm.repo_list
605         salt '*' helm.repo_list kvflags="{'output': 'yaml'}"
606     """
607     if namespace:
608         if kvflags:
609             kvflags.update({"namespace": namespace})
610         else:
611             kvflags = {"namespace": namespace}
612     return _exec_dict_return(commands=["repo", "list"], flags=flags, kvflags=kvflags)
613 def repo_remove(name, namespace=None, flags=None, kvflags=None):
614     """
615     Remove a chart repository.
616     Return True if succeed, else the error message.
617     name
618         (string) The local name of the repository to remove.
619     namespace
620         (string) The namespace scope for this request.
621     flags
622         (list) Flags in argument of the command without values. ex: ['help', '--help']
623     kvflags
624         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
625     CLI Example:
626     .. code-block:: bash
627         salt '*' helm.repo_remove NAME
628     """
629     if namespace:
630         if kvflags:
631             kvflags.update({"namespace": namespace})
632         else:
633             kvflags = {"namespace": namespace}
634     return _exec_true_return(
635         commands=["repo", "remove", name], flags=flags, kvflags=kvflags
636     )
637 def repo_update(namespace=None, flags=None, kvflags=None):
638     """
639     Update all charts repository.
640     Return True if succeed, else the error message.
641     namespace
642         (string) The namespace scope for this request.
643     flags
644         (list) Flags in argument of the command without values. ex: ['help', '--help']
645     kvflags
646         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
647     CLI Example:
648     .. code-block:: bash
649         salt '*' helm.repo_update
650     """
651     if namespace:
652         if kvflags:
653             kvflags.update({"namespace": namespace})
654         else:
655             kvflags = {"namespace": namespace}
656     return _exec_true_return(commands=["repo", "update"], flags=flags, kvflags=kvflags)
657 def repo_manage(
658     present=None, absent=None, prune=False, namespace=None, flags=None, kvflags=None
659 ):
660     """
661     Manage charts repository.
662     Return the summery of all actions.
663     present
664         (list) List of repository to be present. It's a list of dict: [{'name': 'local_name', 'url': 'repository_url'}]
665     absent
666         (list) List of local name repository to be absent.
667     prune
668         (boolean - default: False) If True, all repository already present but not in the present list would be removed.
669     namespace
670         (string) The namespace scope for this request.
671     flags
672         (list) Flags in argument of the command without values. ex: ['help', '--help']
673     kvflags
674         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
675     CLI Example:
676     .. code-block:: bash
677         salt '*' helm.repo_manage present="[{'name': 'LOCAL_NAME', 'url': 'REPO_URL'}]" absent="['LOCAL_NAME']"
678     """
679     if present is None:
680         present = []
681     else:
682         present = copy.deepcopy(present)
683     if absent is None:
684         absent = []
685     else:
686         absent = copy.deepcopy(absent)
687     if namespace:
688         if kvflags:
689             kvflags.update({"namespace": namespace})
690         else:
691             kvflags = {"namespace": namespace}
692     repos_present = repo_list(namespace=namespace, flags=flags, kvflags=kvflags)
693     if not isinstance(repos_present, list):
694         repos_present = []
695     result = {"present": [], "added": [], "absent": [], "removed": [], "failed": []}
696     for repo in present:
697         if not (
698             isinstance(repo, dict) and "name" in repo.keys() and "url" in repo.keys()
699         ):
700             raise CommandExecutionError(
701                 "Parameter present have to be formatted like "
702                 "[{'name': '&lt;myRepoName&gt;', 'url': '&lt;myRepoUrl&gt;'}]"
703             )
704         already_present = False
705         for (index, repo_present) in enumerate(repos_present):
706             if repo.get("name") == repo_present.get("name") and repo.get(
707                 "url"
708             ) == repo_present.get("url"):
709                 result["present"].append(repo)
710                 repos_present.pop(index)
711                 already_present = True
712                 break
713         if not already_present:
714             repo_add_status = repo_add(
715                 repo.get("name"),
716                 repo.get("url"),
717                 namespace=namespace,
718                 flags=flags,
719                 kvflags=kvflags,
720             )
721             if isinstance(repo_add_status, bool) and repo_add_status:
722                 result["added"].append(repo)
723                 result["failed"].append(repo)
724     <font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>for repo in repos_present:
725         if prune:
726             absent.append(repo.get("name"))
727         elif not repo.get("name") in absent:
728             result["present"].append(r</b></font>epo)
729     for name in absent:
730         remove_status = repo_remove(name, namespace=namespace)
731         if isinstance(remove_status, bool) and remove_status:
732             result["removed"].append(name)
733         else:
734             result["absent"].append(name)
735     return result
736 def rollback(release, revision, namespace=None, flags=None, kvflags=None):
737     """
738     Rolls back a release to a previous revision.
739     To see release revision number, execute the history module.
740     Return True if succeed, else the error message.
741     release
742         (string) The name of the release to managed.
743     revision
744         (string) The revision number to roll back to.
745     namespace
746         (string) The namespace scope for this request.
747     flags
748         (list) Flags in argument of the command without values. ex: ['help', '--help']
749     kvflags
750         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
751     CLI Example:
752     .. code-block:: bash
753         salt '*' helm.rollback RELEASE REVISION
754         salt '*' helm.rollback RELEASE REVISION flags=['dry-run']
755     """
756     if namespace:
757         if kvflags:
758             kvflags.update({"namespace": namespace})
759         else:
760             kvflags = {"namespace": namespace}
761     return _exec_true_return(
762         commands=["rollback", release, revision], flags=flags, kvflags=kvflags
763     )
764 def search_hub(keyword, flags=None, kvflags=None):
765     """
766     Search the Helm Hub or an instance of Monocular for Helm charts.
767     Return the research result if succeed, else the error message.
768     keyword
769         (string) The keyword to search in the hub.
770     flags
771         (list) Flags in argument of the command without values. ex: ['help', '--help']
772     kvflags
773         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
774     CLI Example:
775     .. code-block:: bash
776         salt '*' helm.search_hub KEYWORD
777         salt '*' helm.search_hub KEYWORD kvflags="{'output': 'yaml'}"
778     """
779     return _exec_dict_return(
780         commands=["search", "hub", keyword], flags=flags, kvflags=kvflags
781     )
782 def search_repo(keyword, flags=None, kvflags=None):
783     """
784     Search reads through all of the repositories configured on the system, and looks for matches. Search of these
785     repositories uses the metadata stored on the system.
786     Return the research result if succeed, else the error message.
787     keyword
788         (string) The keyword to search in the repo.
789     flags
790         (list) Flags in argument of the command without values. ex: ['help', '--help']
791     kvflags
792         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
793     CLI Example:
794     .. code-block:: bash
795         salt '*' helm.search_hub KEYWORD
796         salt '*' helm.search_hub KEYWORD kvflags="{'output': 'yaml'}"
797     """
798     return _exec_dict_return(
799         commands=["search", "repo", keyword], flags=flags, kvflags=kvflags
800     )
801 def show_all(chart, flags=None, kvflags=None):
802     """
803     Inspects a chart (directory, file, or URL) and displays all its content (values.yaml, Charts.yaml, README).
804     Return chart information if succeed, else the error message.
805     chart
806         (string) The chart to inspect.
807     flags
808         (list) Flags in argument of the command without values. ex: ['help', '--help']
809     kvflags
810         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
811     CLI Example:
812     .. code-block:: bash
813         salt '*' helm.show_all CHART
814     """
815     return _exec_string_return(
816         commands=["show", "all", chart], flags=flags, kvflags=kvflags
817     )
818 def show_chart(chart, flags=None, kvflags=None):
819     """
820     Inspects a chart (directory, file, or URL) and displays the contents of the Charts.yaml file.
821     Return chart information if succeed, else the error message.
822     chart
823         (string) The chart to inspect.
824     flags
825         (list) Flags in argument of the command without values. ex: ['help', '--help']
826     kvflags
827         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
828     CLI Example:
829     .. code-block:: bash
830         salt '*' helm.show_chart CHART
831     """
832     return _exec_string_return(
833         commands=["show", "chart", chart], flags=flags, kvflags=kvflags
834     )
835 def show_readme(chart, flags=None, kvflags=None):
836     """
837     Inspects a chart (directory, file, or URL) and displays the contents of the README file.
838     Return chart information if succeed, else the error message.
839     chart
840         (string) The chart to inspect.
841     flags
842         (list) Flags in argument of the command without values. ex: ['help', '--help']
843     kvflags
844         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
845     CLI Example:
846     .. code-block:: bash
847         salt '*' helm.show_readme CHART
848     """
849     return _exec_string_return(
850         commands=["show", "readme", chart], flags=flags, kvflags=kvflags
851     )
852 def show_values(chart, flags=None, kvflags=None):
853     """
854     Inspects a chart (directory, file, or URL) and displays the contents of the values.yaml file.
855     Return chart information if succeed, else the error message.
856     chart
857         (string) The chart to inspect.
858     flags
859         (list) Flags in argument of the command without values. ex: ['help', '--help']
860     kvflags
861         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
862     CLI Example:
863     .. code-block:: bash
864         salt '*' helm.show_values CHART
865     """
866     return _exec_string_return(
867         commands=["show", "values", chart], flags=flags, kvflags=kvflags
868     )
869 def status(release, namespace=None, flags=None, kvflags=None):
870     """
871     Show the status of the release.
872     Return the release status if succeed, else the error message.
873     release
874         (string) The release to status.
875     namespace
876         (string) The namespace scope for this request.
877     flags
878         (list) Flags in argument of the command without values. ex: ['help', '--help']
879     kvflags
880         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
881     CLI Example:
882     .. code-block:: bash
883         salt '*' helm.status RELEASE
884         salt '*' helm.status RELEASE kvflags="{'output': 'yaml'}"
885     """
886     if namespace:
887         if kvflags:
888             kvflags.update({"namespace": namespace})
889         else:
890             kvflags = {"namespace": namespace}
891     return _exec_dict_return(commands=["status", release], flags=flags, kvflags=kvflags)
892 def template(
893     name, chart, values=None, output_dir=None, set=None, flags=None, kvflags=None
894 ):
895     """
896     Render chart templates locally and display the output.
897     Return the chart renderer if succeed, else the error message.
898     name
899         (string) The template name.
900     chart
901         (string) The chart to template.
902     values
903         (string) Absolute path to the values.yaml file.
904     output_dir
905         (string) Absolute path to the output directory.
906     set
907         (string or list) Set a values on the command line.
908     flags
909         (list) Flags in argument of the command without values. ex: ['help', '--help']
910     kvflags
911         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
912     CLI Example:
913     .. code-block:: bash
914         salt '*' helm.template NAME CHART
915         salt '*' helm.template NAME CHART values='/path/to/values.yaml' output_dir='path/to/output/dir'
916     """
917     if values:
918         if kvflags:
919             kvflags.update({"values": values})
920         else:
921             kvflags = {"values": values}
922     if set:
923         if kvflags:
924             kvflags.update({"set": set})
925         else:
926             kvflags = {"set": set}
927     if output_dir:
928         kvflags.update({"output-dir": output_dir})
929     return _exec_string_return(
930         commands=["template", name, chart], flags=flags, kvflags=kvflags
931     )
932 def test(release, flags=None, kvflags=None):
933     """
934     Runs the tests for a release.
935     Return the test result if succeed, else the error message.
936     release
937         (string) The release name to test.
938     flags
939         (list) Flags in argument of the command without values. ex: ['help', '--help']
940     kvflags
941         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
942     CLI Example:
943     .. code-block:: bash
944         salt '*' helm.test RELEASE
945     """
946     return _exec_string_return(commands=["test", release], flags=flags, kvflags=kvflags)
947 def uninstall(release, namespace=None, flags=None, kvflags=None):
948     """
949     Uninstall the release name.
950     Return True if succeed, else the error message.
951     release
952         (string) The name of the release to managed.
953     namespace
954         (string) The namespace scope for this request.
955     flags
956         (list) Flags in argument of the command without values. ex: ['help', '--help']
957     kvflags
958         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
959     CLI Example:
960     .. code-block:: bash
961         salt '*' helm.uninstall RELEASE
962         salt '*' helm.uninstall RELEASE flags=['dry-run']
963     """
964     if namespace:
965         if kvflags:
966             kvflags.update({"namespace": namespace})
967         else:
968             kvflags = {"namespace": namespace}
969     return _exec_true_return(
970         commands=["uninstall", release], flags=flags, kvflags=kvflags
971     )
972 def upgrade(
973     release,
974     chart,
975     values=None,
976     version=None,
977     namespace=None,
978     set=None,
979     flags=None,
980     kvflags=None,
981 ):
982     """
983     Upgrades a release to a new version of a chart.
984     Return True if succeed, else the error message.
985     release
986         (string) The name of the release to managed.
987     chart
988         (string) The chart to managed.
989     values
990         (string) Absolute path to the values.yaml file.
991     version
992         (string) The exact chart version to install. If this is not specified, the latest version is installed.
993     namespace
994         (string) The namespace scope for this request.
995     set
996         (string or list) Set a values on the command line.
997     flags
998         (list) Flags in argument of the command without values. ex: ['help', '--help']
999     kvflags
1000         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
1001     CLI Example:
1002     .. code-block:: bash
1003         salt '*' helm.upgrade RELEASE CHART
1004         salt '*' helm.upgrade RELEASE CHART flags=['dry-run']
1005         salt '*' helm.upgrade RELEASE CHART values='/path/to/values.yaml'
1006     """
1007     if values:
1008         if kvflags:
1009             kvflags.update({"values": values})
1010         else:
1011             kvflags = {"values": values}
1012     if version:
1013         if kvflags:
1014             kvflags.update({"version": version})
1015         else:
1016             kvflags = {"version": version}
1017     if namespace:
1018         if kvflags:
1019             kvflags.update({"namespace": namespace})
1020         else:
1021             kvflags = {"namespace": namespace}
1022     if set:
1023         if kvflags:
1024             kvflags.update({"set": set})
1025         else:
1026             kvflags = {"set": set}
1027     return _exec_true_return(
1028         commands=["upgrade", release, chart], flags=flags, kvflags=kvflags
1029     )
1030 def verify(path, flags=None, kvflags=None):
1031     """
1032     Verify that the given chart has a valid provenance file.
1033     Return True if succeed, else the error message.
1034     path
1035         (string) The path to the chart file.
1036     flags
1037         (list) Flags in argument of the command without values. ex: ['help', '--help']
1038     kvflags
1039         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
1040     CLI Example:
1041     .. code-block:: bash
1042         salt '*' helm.verify PATH
1043     """
1044     return _exec_true_return(commands=["verify", path], flags=flags, kvflags=kvflags)
1045 def version(flags=None, kvflags=None):
1046     """
1047     Show the version for Helm.
1048     Return version information if succeed, else the error message.
1049     flags
1050         (list) Flags in argument of the command without values. ex: ['help', '--help']
1051     kvflags
1052         (dict) Flags in argument of the command with values. ex: {'v': 2, '--v': 4}
1053     CLI Example:
1054     .. code-block:: bash
1055         salt '*' helm.version
1056     """
1057     return _exec_string_return(commands=["version"], flags=flags, kvflags=kvflags)
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>localfs.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 """
2 Cache data in filesystem.
3 .. versionadded:: 2016.11.0
4 The ``localfs`` Minion cache module is the default cache module and does not
5 require any configuration.
6 Expiration values can be set in the relevant config file (``/etc/salt/master`` for
7 the master, ``/etc/salt/cloud`` for Salt Cloud, etc).
8 """
9 import errno
10 import logging
11 import os.path
12 import shutil
13 <font color="#f63526"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>import tempfile
14 import salt.payload
15 import salt.utils.atomicfile
16 import salt.utils.files
17 from salt.exceptions import SaltCacheError
18 log = logging.getLogger(__name__)
19 __func_alias__ = {"list_": "list"}
20 def __cachedir(kwargs=</b></font>None):
21     if kwargs and "cachedir" in kwargs:
22         return kwargs["cachedir"]
23     return __opts__.get("cachedir", salt.syspaths.CACHE_DIR)
24 def init_kwargs(kwargs):
25     return {"cachedir": __cachedir(kwargs)}
26 def get_storage_id(kwargs):
27     return ("localfs", __cachedir(kwargs))
28 def store(bank, key, data, cachedir):
29     """
30     Store information in a file.
31     """
32     base = os.path.join(cachedir, os.path.normpath(bank))
33     try:
34         os.makedirs(base)
35     except OSError as exc:
36         if exc.errno != errno.EEXIST:
37             raise SaltCacheError(
38                 "The cache directory, {}, could not be created: {}".format(base, exc)
39             )
40     outfile = os.path.join(base, "{}.p".format(key))
41     tmpfh, tmpfname = tempfile.mkstemp(dir=base)
42     os.close(tmpfh)
43     try:
44         with salt.utils.files.fopen(tmpfname, "w+b") as fh_:
45             salt.payload.dump(data, fh_)
46         salt.utils.atomicfile.atomic_rename(tmpfname, outfile)
47     except OSError as exc:
48         raise SaltCacheError(
49             "There was an error writing the cache file, {}: {}".format(base, exc)
50         )
51 def fetch(bank, key, cachedir):
52     """
53     Fetch information from a file.
54     """
55     inkey = False
56     key_file = os.path.join(cachedir, os.path.normpath(bank), "{}.p".format(key))
57     if not os.path.isfile(key_file):
58         key_file = os.path.join(cachedir, os.path.normpath(bank) + ".p")
59         inkey = True
60     if not os.path.isfile(key_file):
61         log.debug('Cache file "%s" does not exist', key_file)
62         return {}
63     try:
64         with salt.utils.files.fopen(key_file, "rb") as fh_:
65             if inkey:
66                 return salt.payload.load(fh_)[key]
67             else:
68                 return salt.payload.load(fh_)
69     except OSError as exc:
70         raise SaltCacheError(
71             'There was an error reading the cache file "{}": {}'.format(key_file, exc)
72         )
73 def updated(bank, key, cachedir):
74     """
75     Return the epoch of the mtime for this cache file
76     """
77     key_file = os.path.join(cachedir, os.path.normpath(bank), "{}.p".format(key))
78     if not os.path.isfile(key_file):
79         log.warning('Cache file "%s" does not exist', key_file)
80         return None
81     try:
82         return int(os.path.getmtime(key_file))
83     except OSError as exc:
84         raise SaltCacheError(
85             'There was an error reading the mtime for "{}": {}'.format(key_file, exc)
86         )
87 def flush(bank, key=None, cachedir=None):
88     """
89     Remove the key from the cache bank with all the key content.
90     """
91     if cachedir is None:
92         cachedir = __cachedir()
93     try:
94         if key is None:
95             target = os.path.join(cachedir, os.path.normpath(bank))
96             if not os.path.isdir(target):
97                 return False
98             shutil.rmtree(target)
99         else:
100             target = os.path.join(cachedir, os.path.normpath(bank), "{}.p".format(key))
101             if not os.path.isfile(target):
102                 return False
103             os.remove(target)
104     except OSError as exc:
105         raise SaltCacheError('There was an error removing "{}": {}'.format(target, exc))
106     return True
107 def list_(bank, cachedir):
108     """
109     Return an iterable object containing all entries stored in the specified bank.
110     """
111     base = os.path.join(cachedir, os.path.normpath(bank))
112     if not os.path.isdir(base):
113         return []
114     try:
115         items = os.listdir(base)
116     except OSError as exc:
117         raise SaltCacheError(
118         )
119     ret = []
120     <font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>for item in items:
121         if item.endswith(".p"):
122             ret.append(item.rstrip(item[-2:]))
123         else:
124             ret.append(i</b></font>tem)
125     return ret
126 def contains(bank, key, cachedir):
127     """
128     Checks if the specified bank contains the specified key.
129     """
130     if key is None:
131         base = os.path.join(cachedir, os.path.normpath(bank))
132         return os.path.isdir(base)
133     else:
134         keyfile = os.path.join(cachedir, os.path.normpath(bank), "{}.p".format(key))
135         return os.path.isfile(keyfile)
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
