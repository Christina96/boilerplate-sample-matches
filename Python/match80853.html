<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for helm_1.py &amp; localfs.py</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for helm_1.py &amp; localfs.py
      </h3>
<h1 align="center">
        4.0%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>helm_1.py (2.6824033%)<th>localfs.py (8.417508%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(1069-1073)<td><a href="#" name="0">(150-154)</a><td align="center"><font color="#ff0000">13</font>
<tr onclick='openModal("#f63526")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f63526"><font color="#f63526">-</font><td><a href="#" name="1">(36-52)<td><a href="#" name="1">(18-30)</a><td align="center"><font color="#eb0000">12</font>
</td></td></a></td></td></tr></td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>helm_1.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 <font color="#f63526"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>import copy
2 import logging
3 import re
4 from salt.exceptions import CommandExecutionError
5 from salt.serializers import json
6 log = logging.getLogger(__name__)
7 __func_alias__ = {
8     "help_": "help",
9     "list_": "list",
10 }
11 def _prepare_cmd(binary=</b></font>"helm", commands=None, flags=None, kvflags=None):
12     if commands is None:
13         commands = []
14     if flags is None:
15         flags = []
16     else:
17         flags = copy.deepcopy(flags)
18     if kvflags is None:
19         kvflags = {}
20     else:
21         kvflags = copy.deepcopy(kvflags)
22     cmd = (binary,)
23     for command in commands:
24         cmd += (command,)
25     for arg in flags:
26         if not re.search(r"^--.*", arg):
27             arg = "--" + arg
28         cmd += (arg,)
29     for key, val in kvflags.items():
30         if not re.search(r"^--.*", key):
31             key = "--" + key
32         if key == "--set" and isinstance(val, list):
33             for set_val in val:
34                 cmd += (
35                     key,
36                     set_val,
37                 )
38         else:
39             cmd += (
40                 key,
41                 val,
42             )
43     return cmd
44 def _exec_cmd(commands=None, flags=None, kvflags=None):
45     cmd = _prepare_cmd(commands=commands, flags=flags, kvflags=kvflags)
46     cmd_string = " ".join(cmd)
47     try:
48         result = __salt__["cmd.run_all"](cmd=cmd)
49         result.update({"cmd": cmd_string})
50     except CommandExecutionError as err:
51         result = {"retcode": -1, "stdout": "", "stderr": err, "cmd": cmd_string}
52         log.error(result)
53     return result
54 def _exec_true_return(commands=None, flags=None, kvflags=None):
55     cmd_result = _exec_cmd(commands=commands, flags=flags, kvflags=kvflags)
56     if cmd_result.get("retcode", -1) == 0:
57         result = True
58     else:
59         result = cmd_result.get("stderr", "")
60     return result
61 def _exec_string_return(commands=None, flags=None, kvflags=None):
62     cmd_result = _exec_cmd(commands=commands, flags=flags, kvflags=kvflags)
63     if cmd_result.get("retcode", -1) == 0:
64         result = cmd_result.get("stdout", "")
65     else:
66         result = cmd_result.get("stderr", "")
67     return result
68 def _exec_dict_return(commands=None, flags=None, kvflags=None):
69     if kvflags is None:
70         kvflags = {}
71     if not ("output" in kvflags.keys() or "--output" in kvflags.keys()):
72         kvflags.update({"output": "json"})
73     cmd_result = _exec_cmd(commands=commands, flags=flags, kvflags=kvflags)
74     if cmd_result.get("retcode", -1) == 0:
75         if kvflags.get("output") == "json" or kvflags.get("--output") == "json":
76             result = json.deserialize(cmd_result.get("stdout", ""))
77         else:
78             result = cmd_result.get("stdout", "")
79     else:
80         result = cmd_result.get("stderr", "")
81     return result
82 def completion(shell, flags=None, kvflags=None):
83     return _exec_string_return(
84         commands=["completion", shell], flags=flags, kvflags=kvflags
85     )
86 def create(name, flags=None, kvflags=None):
87     return _exec_true_return(commands=["create", name], flags=flags, kvflags=kvflags)
88 def dependency_build(chart, flags=None, kvflags=None):
89     return _exec_true_return(
90         commands=["dependency", "build", chart], flags=flags, kvflags=kvflags
91     )
92 def dependency_list(chart, flags=None, kvflags=None):
93     return _exec_string_return(
94         commands=["dependency", "list", chart], flags=flags, kvflags=kvflags
95     )
96 def dependency_update(chart, flags=None, kvflags=None):
97     return _exec_true_return(
98         commands=["dependency", "update", chart], flags=flags, kvflags=kvflags
99     )
100 def env(flags=None, kvflags=None):
101     return _exec_string_return(commands=["env"], flags=flags, kvflags=kvflags)
102 def get_all(release, flags=None, kvflags=None):
103     return _exec_string_return(
104         commands=["get", "all", release], flags=flags, kvflags=kvflags
105     )
106 def get_hooks(release, flags=None, kvflags=None):
107     return _exec_string_return(
108         commands=["get", "hooks", release], flags=flags, kvflags=kvflags
109     )
110 def get_manifest(release, flags=None, kvflags=None):
111     return _exec_string_return(
112         commands=["get", "manifest", release], flags=flags, kvflags=kvflags
113     )
114 def get_notes(release, flags=None, kvflags=None):
115     return _exec_string_return(
116         commands=["get", "notes", release], flags=flags, kvflags=kvflags
117     )
118 def get_values(release, flags=None, kvflags=None):
119     return _exec_dict_return(
120         commands=["get", "values", release], flags=flags, kvflags=kvflags
121     )
122 def help_(command, flags=None, kvflags=None):
123     return _exec_string_return(commands=["help", command], flags=flags, kvflags=kvflags)
124 def history(release, flags=None, kvflags=None):
125     return _exec_dict_return(
126         commands=["history", release], flags=flags, kvflags=kvflags
127     )
128 def install(
129     release,
130     chart,
131     values=None,
132     version=None,
133     namespace=None,
134     set=None,
135     flags=None,
136     kvflags=None,
137 ):
138     if values:
139         if kvflags:
140             kvflags.update({"values": values})
141         else:
142             kvflags = {"values": values}
143     if version:
144         if kvflags:
145             kvflags.update({"version": version})
146         else:
147             kvflags = {"version": version}
148     if namespace:
149         if kvflags:
150             kvflags.update({"namespace": namespace})
151         else:
152             kvflags = {"namespace": namespace}
153     if set:
154         if kvflags:
155             kvflags.update({"set": set})
156         else:
157             kvflags = {"set": set}
158     return _exec_true_return(
159         commands=["install", release, chart], flags=flags, kvflags=kvflags
160     )
161 def lint(path, values=None, namespace=None, set=None, flags=None, kvflags=None):
162     if values:
163         if kvflags:
164             kvflags.update({"values": values})
165         else:
166             kvflags = {"values": values}
167     if namespace:
168         if kvflags:
169             kvflags.update({"namespace": namespace})
170         else:
171             kvflags = {"namespace": namespace}
172     if set:
173         if kvflags:
174             kvflags.update({"set": set})
175         else:
176             kvflags = {"set": set}
177     return _exec_true_return(commands=["lint", path], flags=flags, kvflags=kvflags)
178 def list_(namespace=None, flags=None, kvflags=None):
179     if namespace:
180         if kvflags:
181             kvflags.update({"namespace": namespace})
182         else:
183             kvflags = {"namespace": namespace}
184     return _exec_dict_return(commands=["list"], flags=flags, kvflags=kvflags)
185 def package(chart, flags=None, kvflags=None):
186     return _exec_true_return(commands=["package", chart], flags=flags, kvflags=kvflags)
187 def plugin_install(path, flags=None, kvflags=None):
188     return _exec_true_return(
189         commands=["plugin", "install", path], flags=flags, kvflags=kvflags
190     )
191 def plugin_list(flags=None, kvflags=None):
192     return _exec_string_return(
193         commands=["plugin", "list"], flags=flags, kvflags=kvflags
194     )
195 def plugin_uninstall(plugin, flags=None, kvflags=None):
196     return _exec_true_return(
197         commands=["plugin", "uninstall", plugin], flags=flags, kvflags=kvflags
198     )
199 def plugin_update(plugin, flags=None, kvflags=None):
200     return _exec_true_return(
201         commands=["plugin", "update", plugin], flags=flags, kvflags=kvflags
202     )
203 def pull(pkg, flags=None, kvflags=None):
204     return _exec_true_return(commands=["pull", pkg], flags=flags, kvflags=kvflags)
205 def repo_add(name, url, namespace=None, flags=None, kvflags=None):
206     if namespace:
207         if kvflags:
208             kvflags.update({"namespace": namespace})
209         else:
210             kvflags = {"namespace": namespace}
211     return _exec_true_return(
212         commands=["repo", "add", name, url], flags=flags, kvflags=kvflags
213     )
214 def repo_index(directory, namespace=None, flags=None, kvflags=None):
215     if namespace:
216         if kvflags:
217             kvflags.update({"namespace": namespace})
218         else:
219             kvflags = {"namespace": namespace}
220     return _exec_true_return(
221         commands=["repo", "index", directory], flags=flags, kvflags=kvflags
222     )
223 def repo_list(namespace=None, flags=None, kvflags=None):
224     if namespace:
225         if kvflags:
226             kvflags.update({"namespace": namespace})
227         else:
228             kvflags = {"namespace": namespace}
229     return _exec_dict_return(commands=["repo", "list"], flags=flags, kvflags=kvflags)
230 def repo_remove(name, namespace=None, flags=None, kvflags=None):
231     if namespace:
232         if kvflags:
233             kvflags.update({"namespace": namespace})
234         else:
235             kvflags = {"namespace": namespace}
236     return _exec_true_return(
237         commands=["repo", "remove", name], flags=flags, kvflags=kvflags
238     )
239 def repo_update(namespace=None, flags=None, kvflags=None):
240     if namespace:
241         if kvflags:
242             kvflags.update({"namespace": namespace})
243         else:
244             kvflags = {"namespace": namespace}
245     return _exec_true_return(commands=["repo", "update"], flags=flags, kvflags=kvflags)
246 def repo_manage(
247     present=None, absent=None, prune=False, namespace=None, flags=None, kvflags=None
248 ):
249     if present is None:
250         present = []
251     else:
252         present = copy.deepcopy(present)
253     if absent is None:
254         absent = []
255     else:
256         absent = copy.deepcopy(absent)
257     if namespace:
258         if kvflags:
259             kvflags.update({"namespace": namespace})
260         else:
261             kvflags = {"namespace": namespace}
262     repos_present = repo_list(namespace=namespace, flags=flags, kvflags=kvflags)
263     if not isinstance(repos_present, list):
264         repos_present = []
265     result = {"present": [], "added": [], "absent": [], "removed": [], "failed": []}
266     for repo in present:
267         if not (
268             isinstance(repo, dict) and "name" in repo.keys() and "url" in repo.keys()
269         ):
270             raise CommandExecutionError(
271                 "Parameter present have to be formatted like "
272                 "[{'name': '&lt;myRepoName&gt;', 'url': '&lt;myRepoUrl&gt;'}]"
273             )
274         already_present = False
275         for (index, repo_present) in enumerate(repos_present):
276             if repo.get("name") == repo_present.get("name") and repo.get(
277                 "url"
278             ) == repo_present.get("url"):
279                 result["present"].append(repo)
280                 repos_present.pop(index)
281                 already_present = True
282                 break
283         if not already_present:
284             repo_add_status = repo_add(
285                 repo.get("name"),
286                 repo.get("url"),
287                 namespace=namespace,
288                 flags=flags,
289                 kvflags=kvflags,
290             )
291             if isinstance(repo_add_status, bool) and repo_add_status:
292                 result["added"].append(repo)
293 <a name="0"></a>            else:
294                 result["failed"].append(repo)
295     <font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>for repo in repos_present:
296         if prune:
297             absent.append(repo.get("name"))
298         elif not repo.get("name") in absent:
299             result["present"].append(r</b></font>epo)
300     for name in absent:
301         remove_status = repo_remove(name, namespace=namespace)
302         if isinstance(remove_status, bool) and remove_status:
303             result["removed"].append(name)
304         else:
305             result["absent"].append(name)
306     return result
307 def rollback(release, revision, namespace=None, flags=None, kvflags=None):
308     if namespace:
309         if kvflags:
310             kvflags.update({"namespace": namespace})
311         else:
312             kvflags = {"namespace": namespace}
313     return _exec_true_return(
314         commands=["rollback", release, revision], flags=flags, kvflags=kvflags
315     )
316 def search_hub(keyword, flags=None, kvflags=None):
317     return _exec_dict_return(
318         commands=["search", "hub", keyword], flags=flags, kvflags=kvflags
319     )
320 def search_repo(keyword, flags=None, kvflags=None):
321     return _exec_dict_return(
322         commands=["search", "repo", keyword], flags=flags, kvflags=kvflags
323     )
324 def show_all(chart, flags=None, kvflags=None):
325     return _exec_string_return(
326         commands=["show", "all", chart], flags=flags, kvflags=kvflags
327     )
328 def show_chart(chart, flags=None, kvflags=None):
329     return _exec_string_return(
330         commands=["show", "chart", chart], flags=flags, kvflags=kvflags
331     )
332 def show_readme(chart, flags=None, kvflags=None):
333     return _exec_string_return(
334         commands=["show", "readme", chart], flags=flags, kvflags=kvflags
335     )
336 def show_values(chart, flags=None, kvflags=None):
337     return _exec_string_return(
338         commands=["show", "values", chart], flags=flags, kvflags=kvflags
339     )
340 def status(release, namespace=None, flags=None, kvflags=None):
341     if namespace:
342         if kvflags:
343             kvflags.update({"namespace": namespace})
344         else:
345             kvflags = {"namespace": namespace}
346     return _exec_dict_return(commands=["status", release], flags=flags, kvflags=kvflags)
347 def template(
348     name, chart, values=None, output_dir=None, set=None, flags=None, kvflags=None
349 ):
350     if values:
351         if kvflags:
352             kvflags.update({"values": values})
353         else:
354             kvflags = {"values": values}
355     if set:
356         if kvflags:
357             kvflags.update({"set": set})
358         else:
359             kvflags = {"set": set}
360     if output_dir:
361         kvflags.update({"output-dir": output_dir})
362     return _exec_string_return(
363         commands=["template", name, chart], flags=flags, kvflags=kvflags
364     )
365 def test(release, flags=None, kvflags=None):
366     return _exec_string_return(commands=["test", release], flags=flags, kvflags=kvflags)
367 def uninstall(release, namespace=None, flags=None, kvflags=None):
368     if namespace:
369         if kvflags:
370             kvflags.update({"namespace": namespace})
371         else:
372             kvflags = {"namespace": namespace}
373     return _exec_true_return(
374         commands=["uninstall", release], flags=flags, kvflags=kvflags
375     )
376 def upgrade(
377     release,
378     chart,
379     values=None,
380     version=None,
381     namespace=None,
382     set=None,
383     flags=None,
384     kvflags=None,
385 ):
386     if values:
387         if kvflags:
388             kvflags.update({"values": values})
389         else:
390             kvflags = {"values": values}
391     if version:
392         if kvflags:
393             kvflags.update({"version": version})
394         else:
395             kvflags = {"version": version}
396     if namespace:
397         if kvflags:
398             kvflags.update({"namespace": namespace})
399         else:
400             kvflags = {"namespace": namespace}
401     if set:
402         if kvflags:
403             kvflags.update({"set": set})
404         else:
405             kvflags = {"set": set}
406     return _exec_true_return(
407         commands=["upgrade", release, chart], flags=flags, kvflags=kvflags
408     )
409 def verify(path, flags=None, kvflags=None):
410     return _exec_true_return(commands=["verify", path], flags=flags, kvflags=kvflags)
411 def version(flags=None, kvflags=None):
412     return _exec_string_return(commands=["version"], flags=flags, kvflags=kvflags)
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>localfs.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 import errno
2 import logging
3 <a name="1"></a>import os
4 import os.path
5 import shutil
6 <font color="#f63526"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>import tempfile
7 import salt.payload
8 import salt.utils.atomicfile
9 import salt.utils.files
10 from salt.exceptions import SaltCacheError
11 log = logging.getLogger(__name__)
12 __func_alias__ = {"list_": "list"}
13 def __cachedir(kwargs=</b></font>None):
14     if kwargs and "cachedir" in kwargs:
15         return kwargs["cachedir"]
16     return __opts__.get("cachedir", salt.syspaths.CACHE_DIR)
17 def init_kwargs(kwargs):
18     return {"cachedir": __cachedir(kwargs)}
19 def get_storage_id(kwargs):
20     return ("localfs", __cachedir(kwargs))
21 def store(bank, key, data, cachedir):
22     base = os.path.join(cachedir, os.path.normpath(bank))
23     try:
24         os.makedirs(base)
25     except OSError as exc:
26         if exc.errno != errno.EEXIST:
27             raise SaltCacheError(
28                 "The cache directory, {}, could not be created: {}".format(base, exc)
29             )
30     outfile = os.path.join(base, "{}.p".format(key))
31     tmpfh, tmpfname = tempfile.mkstemp(dir=base)
32     os.close(tmpfh)
33     try:
34         with salt.utils.files.fopen(tmpfname, "w+b") as fh_:
35             salt.payload.dump(data, fh_)
36         salt.utils.atomicfile.atomic_rename(tmpfname, outfile)
37     except OSError as exc:
38         raise SaltCacheError(
39             "There was an error writing the cache file, {}: {}".format(base, exc)
40         )
41 def fetch(bank, key, cachedir):
42     inkey = False
43     key_file = os.path.join(cachedir, os.path.normpath(bank), "{}.p".format(key))
44     if not os.path.isfile(key_file):
45         key_file = os.path.join(cachedir, os.path.normpath(bank) + ".p")
46         inkey = True
47     if not os.path.isfile(key_file):
48         log.debug('Cache file "%s" does not exist', key_file)
49         return {}
50     try:
51         with salt.utils.files.fopen(key_file, "rb") as fh_:
52             if inkey:
53                 return salt.payload.load(fh_)[key]
54             else:
55                 return salt.payload.load(fh_)
56     except OSError as exc:
57         raise SaltCacheError(
58             'There was an error reading the cache file "{}": {}'.format(key_file, exc)
59         )
60 def updated(bank, key, cachedir):
61     key_file = os.path.join(cachedir, os.path.normpath(bank), "{}.p".format(key))
62     if not os.path.isfile(key_file):
63         log.warning('Cache file "%s" does not exist', key_file)
64         return None
65     try:
66         return int(os.path.getmtime(key_file))
67     except OSError as exc:
68         raise SaltCacheError(
69             'There was an error reading the mtime for "{}": {}'.format(key_file, exc)
70         )
71 def flush(bank, key=None, cachedir=None):
72     if cachedir is None:
73         cachedir = __cachedir()
74     try:
75         if key is None:
76             target = os.path.join(cachedir, os.path.normpath(bank))
77             if not os.path.isdir(target):
78                 return False
79             shutil.rmtree(target)
80         else:
81             target = os.path.join(cachedir, os.path.normpath(bank), "{}.p".format(key))
82             if not os.path.isfile(target):
83                 return False
84             os.remove(target)
85     except OSError as exc:
86         raise SaltCacheError('There was an error removing "{}": {}'.format(target, exc))
87     return True
88 def list_(bank, cachedir):
89     base = os.path.join(cachedir, os.path.normpath(bank))
90     if not os.path.isdir(base):
91         return []
92     try:
93         items = os.listdir(base)
94     except OSError as exc:
95         raise SaltCacheError(
96 <a name="0"></a>            'There was an error accessing directory "{}": {}'.format(base, exc)
97         )
98     ret = []
99     <font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>for item in items:
100         if item.endswith(".p"):
101             ret.append(item.rstrip(item[-2:]))
102         else:
103             ret.append(i</b></font>tem)
104     return ret
105 def contains(bank, key, cachedir):
106     if key is None:
107         base = os.path.join(cachedir, os.path.normpath(bank))
108         return os.path.isdir(base)
109     else:
110         keyfile = os.path.join(cachedir, os.path.normpath(bank), "{}.p".format(key))
111         return os.path.isfile(keyfile)
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
