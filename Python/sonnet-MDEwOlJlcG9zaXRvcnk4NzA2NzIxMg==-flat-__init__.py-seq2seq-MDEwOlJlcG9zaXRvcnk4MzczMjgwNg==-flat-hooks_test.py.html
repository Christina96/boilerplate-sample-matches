
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 6.970509383378016%, Tokens: 13</h2>
        <div class="column">
            <h3>sonnet-MDEwOlJlcG9zaXRvcnk4NzA2NzIxMg==-flat-__init__.py</h3>
            <pre><code><span onclick='openModal()' class='match'>1  from sonnet import distribute
2  from sonnet import functional
3  from sonnet import initializers
4  from sonnet import mixed_precision
5  from sonnet import nets
6  from sonnet import optimizers
7  from sonnet import pad
8  from sonnet import regularizers
9  from sonnet.src.axis_norm import InstanceNorm
10  from sonnet.src.axis_norm import LayerNorm
11  from sonnet.src.base import allow_empty_variables
12  from sonnet.src.base import Module
13  from sonnet.src.base import no_name_scope
</span>14  from sonnet.src.base import Optimizer
15  from sonnet.src.batch_apply import BatchApply
16  from sonnet.src.batch_apply import merge_leading_dims
17  from sonnet.src.batch_apply import split_leading_dim
18  from sonnet.src.batch_norm import BaseBatchNorm
19  from sonnet.src.batch_norm import BatchNorm
20  from sonnet.src.bias import Bias
21  from sonnet.src.build import build
22  from sonnet.src.conv import Conv1D
23  from sonnet.src.conv import Conv2D
24  from sonnet.src.conv import Conv3D
25  from sonnet.src.conv_transpose import Conv1DTranspose
26  from sonnet.src.conv_transpose import Conv2DTranspose
27  from sonnet.src.conv_transpose import Conv3DTranspose
28  from sonnet.src.custom_getter import custom_variable_getter
29  from sonnet.src.deferred import Deferred
30  from sonnet.src.depthwise_conv import DepthwiseConv2D
31  from sonnet.src.dropout import Dropout
32  from sonnet.src.embed import Embed
33  from sonnet.src.group_norm import GroupNorm
34  from sonnet.src.leaky_clip_by_value import leaky_clip_by_value
35  from sonnet.src.linear import Linear
36  from sonnet.src.metrics import Mean
37  from sonnet.src.metrics import Metric
38  from sonnet.src.metrics import Sum
39  from sonnet.src.moving_averages import ExponentialMovingAverage
40  from sonnet.src.once import once
41  from sonnet.src.recurrent import Conv1DLSTM
42  from sonnet.src.recurrent import Conv2DLSTM
43  from sonnet.src.recurrent import Conv3DLSTM
44  from sonnet.src.recurrent import deep_rnn_with_residual_connections
45  from sonnet.src.recurrent import deep_rnn_with_skip_connections
46  from sonnet.src.recurrent import DeepRNN
47  from sonnet.src.recurrent import dynamic_unroll
48  from sonnet.src.recurrent import GRU
49  from sonnet.src.recurrent import LSTM
50  from sonnet.src.recurrent import lstm_with_recurrent_dropout
51  from sonnet.src.recurrent import LSTMState
52  from sonnet.src.recurrent import RNNCore
53  from sonnet.src.recurrent import static_unroll
54  from sonnet.src.recurrent import TrainableState
55  from sonnet.src.recurrent import UnrolledLSTM
56  from sonnet.src.recurrent import UnrolledRNN
57  from sonnet.src.recurrent import VanillaRNN
58  from sonnet.src.reshape import flatten
59  from sonnet.src.reshape import Flatten
60  from sonnet.src.reshape import reshape
61  from sonnet.src.reshape import Reshape
62  from sonnet.src.scale_gradient import scale_gradient
63  from sonnet.src.sequential import Sequential
64  from sonnet.src.utils import format_variables
65  from sonnet.src.utils import log_variables
66  __all__ = (
67      "BaseBatchNorm",
68      "BatchApply",
69      "BatchNorm",
70      "Bias",
71      "Conv1D",
72      "Conv1DLSTM",
73      "Conv1DTranspose",
74      "Conv2D",
75      "Conv2DLSTM",
76      "Conv2DTranspose",
77      "Conv3D",
78      "Conv3DLSTM",
79      "Conv3DTranspose",
80      "DeepRNN",
81      "Deferred",
82      "DepthwiseConv2D",
83      "Dropout",
84      "Embed",
85      "ExponentialMovingAverage",
86      "flatten",
87      "Flatten",
88      "GroupNorm",
89      "InstanceNorm",
90      "GRU",
91      "LSTM",
92      "LSTMState",
93      "LayerNorm",
94      "Linear",
95      "Mean",
96      "Metric",
97      "Module",
98      "Optimizer",
99      "reshape",
100      "Reshape",
101      "RNNCore",
102      "Sequential",
103      "Sum",
104      "TrainableState",
105      "UnrolledLSTM",
106      "UnrolledRNN",
107      "VanillaRNN",
108      "allow_empty_variables",
109      "build",
110      "custom_variable_getter",
111      "deep_rnn_with_residual_connections",
112      "deep_rnn_with_skip_connections",
113      "distribute",
114      "dynamic_unroll",
115      "format_variables",
116      "functional",
117      "initializers",
118      "log_variables",
119      "lstm_with_recurrent_dropout",
120      "merge_leading_dims",
121      "no_name_scope",
122      "nets",
123      "once",
124      "leaky_clip_by_value",
125      "optimizers",
126      "pad",
127      "regularizers",
128      "scale_gradient",
129      "split_leading_dim",
130      "static_unroll",
131  )
132  __version__ = "2.0.2.dev"
133  try:
134    del src  # pylint: disable=undefined-variable
135  except NameError:
136    pass
</code></pre>
        </div>
        <div class="column">
            <h3>seq2seq-MDEwOlJlcG9zaXRvcnk4MzczMjgwNg==-flat-hooks_test.py</h3>
            <pre><code><span onclick='openModal()' class='match'>1  from __future__ import absolute_import
2  from __future__ import division
3  from __future__ import print_function
4  from __future__ import unicode_literals
5  import os
6  import tempfile
7  import shutil
8  import time
9  import tensorflow as tf
10  from tensorflow.python.training import monitored_session  # pylint: disable=E0611
11  from tensorflow import gfile
12  from seq2seq import graph_utils
13  from seq2seq.training import hooks
</span>14  class TestPrintModelAnalysisHook(tf.test.TestCase):
15    def test_begin(self):
16      model_dir = tempfile.mkdtemp()
17      outfile = tempfile.NamedTemporaryFile()
18      tf.get_variable("weigths", [128, 128])
19      hook = hooks.PrintModelAnalysisHook(
20          params={}, model_dir=model_dir, run_config=tf.contrib.learn.RunConfig())
21      hook.begin()
22      with gfile.GFile(os.path.join(model_dir, "model_analysis.txt")) as file:
23        file_contents = file.read().strip()
24      self.assertEqual(file_contents.decode(), "_TFProfRoot (--/16.38k params)\n"
25                       "  weigths (128x128, 16.38k/16.38k params)")
26      outfile.close()
27  class TestTrainSampleHook(tf.test.TestCase):
28    def setUp(self):
29      super(TestTrainSampleHook, self).setUp()
30      self.model_dir = tempfile.mkdtemp()
31      self.sample_dir = os.path.join(self.model_dir, "samples")
32      pred_dict = {}
33      pred_dict["predicted_tokens"] = tf.constant([["Hello", "World", "笑w"]])
34      pred_dict["labels.target_tokens"] = tf.constant([["Hello", "World", "笑w"]])
35      pred_dict["labels.target_len"] = tf.constant(2),
36      graph_utils.add_dict_to_collection(pred_dict, "predictions")
37    def tearDown(self):
38      super(TestTrainSampleHook, self).tearDown()
39      shutil.rmtree(self.model_dir)
40    def test_sampling(self):
41      hook = hooks.TrainSampleHook(
42          params={"every_n_steps": 10}, model_dir=self.model_dir,
43          run_config=tf.contrib.learn.RunConfig())
44      global_step = tf.contrib.framework.get_or_create_global_step()
45      no_op = tf.no_op()
46      hook.begin()
47      with self.test_session() as sess:
48        sess.run(tf.global_variables_initializer())
49        sess.run(tf.local_variables_initializer())
50        sess.run(tf.tables_initializer())
51        mon_sess = monitored_session._HookedSession(sess, [hook])
52        sess.run(tf.assign(global_step, 0))
53        mon_sess.run(no_op)
54        outfile = os.path.join(self.sample_dir, "samples_000000.txt")
55        with open(outfile, "rb") as readfile:
56          self.assertIn("Prediction followed by Target @ Step 0",
57                        readfile.read().decode("utf-8"))
58        sess.run(tf.assign(global_step, 9))
59        mon_sess.run(no_op)
60        outfile = os.path.join(self.sample_dir, "samples_000009.txt")
61        self.assertFalse(os.path.exists(outfile))
62        sess.run(tf.assign(global_step, 10))
63        mon_sess.run(no_op)
64        outfile = os.path.join(self.sample_dir, "samples_000010.txt")
65        with open(outfile, "rb") as readfile:
66          self.assertIn("Prediction followed by Target @ Step 10",
67                        readfile.read().decode("utf-8"))
68  class TestMetadataCaptureHook(tf.test.TestCase):
69    def setUp(self):
70      super(TestMetadataCaptureHook, self).setUp()
71      self.model_dir = tempfile.mkdtemp()
72    def tearDown(self):
73      super(TestMetadataCaptureHook, self).tearDown()
74      shutil.rmtree(self.model_dir)
75    def test_capture(self):
76      global_step = tf.contrib.framework.get_or_create_global_step()
77      some_weights = tf.get_variable("weigths", [2, 128])
78      computation = tf.nn.softmax(some_weights)
79      hook = hooks.MetadataCaptureHook(
80          params={"step": 5}, model_dir=self.model_dir,
81          run_config=tf.contrib.learn.RunConfig())
82      hook.begin()
83      with self.test_session() as sess:
84        sess.run(tf.global_variables_initializer())
85        mon_sess = monitored_session._HookedSession(sess, [hook])
86        sess.run(tf.assign(global_step, 0))
87        mon_sess.run(computation)
88        self.assertEqual(gfile.ListDirectory(self.model_dir), [])
89        sess.run(tf.assign(global_step, 5))
90        mon_sess.run(computation)
91        self.assertEqual(gfile.ListDirectory(self.model_dir), [])
92        mon_sess.run(computation)
93        self.assertEqual(
94            set(gfile.ListDirectory(self.model_dir)),
95            set(["run_meta", "tfprof_log", "timeline.json"]))
96  if __name__ == "__main__":
97    tf.test.main()
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from sonnet-MDEwOlJlcG9zaXRvcnk4NzA2NzIxMg==-flat-__init__.py</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from seq2seq-MDEwOlJlcG9zaXRvcnk4MzczMjgwNg==-flat-hooks_test.py</div>
                </div>
                <div class="column column_space"><pre><code>1  from sonnet import distribute
2  from sonnet import functional
3  from sonnet import initializers
4  from sonnet import mixed_precision
5  from sonnet import nets
6  from sonnet import optimizers
7  from sonnet import pad
8  from sonnet import regularizers
9  from sonnet.src.axis_norm import InstanceNorm
10  from sonnet.src.axis_norm import LayerNorm
11  from sonnet.src.base import allow_empty_variables
12  from sonnet.src.base import Module
13  from sonnet.src.base import no_name_scope
</pre></code></div>
                <div class="column column_space"><pre><code>1  from __future__ import absolute_import
2  from __future__ import division
3  from __future__ import print_function
4  from __future__ import unicode_literals
5  import os
6  import tempfile
7  import shutil
8  import time
9  import tensorflow as tf
10  from tensorflow.python.training import monitored_session  # pylint: disable=E0611
11  from tensorflow import gfile
12  from seq2seq import graph_utils
13  from seq2seq.training import hooks
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    