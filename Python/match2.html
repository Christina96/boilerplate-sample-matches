<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html><head><title>Matches for test_cdl.py &amp; test_cc.py</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for test_cdl.py &amp; test_cc.py
      </h3>
<h1 align="center">
        56.4%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>test_cdl.py (66.61184%)<th>test_cc.py (48.913044%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(1033-1092)<td><a href="#" name="0">(779-834)</a><td align="center"><font color="#ff0000">52</font>
<tr onclick='openModal("#f63526")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f63526"><font color="#f63526">-</font><td><a href="#" name="1">(961-1004)<td><a href="#" name="1">(648-683)</a><td align="center"><font color="#c40000">40</font>
<tr onclick='openModal("#980517")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#980517"><font color="#980517">-</font><td><a href="#" name="2">(719-752)<td><a href="#" name="2">(314-347)</a><td align="center"><font color="#b50000">37</font>
<tr onclick='openModal("#53858b")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#53858b"><font color="#53858b">-</font><td><a href="#" name="3">(15-629)<td><a href="#" name="3">(16-186)</a><td align="center"><font color="#9c0000">32</font>
<tr onclick='openModal("#6cc417")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#6cc417"><font color="#6cc417">-</font><td><a href="#" name="4">(752-784)<td><a href="#" name="4">(383-415)</a><td align="center"><font color="#700000">23</font>
<tr onclick='openModal("#151b8d")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#151b8d"><font color="#151b8d">-</font><td><a href="#" name="5">(631-655)<td><a href="#" name="5">(269-295)</a><td align="center"><font color="#660000">21</font>
<tr onclick='openModal("#8c8774")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#8c8774"><font color="#8c8774">-</font><td><a href="#" name="6">(1142-1150)<td><a href="#" name="6">(568-578)</a><td align="center"><font color="#620000">20</font>
<tr onclick='openModal("#38a4a5")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#38a4a5"><font color="#38a4a5">-</font><td><a href="#" name="7">(924-931)<td><a href="#" name="7">(451-460)</a><td align="center"><font color="#620000">20</font>
<tr onclick='openModal("#c58917")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#c58917"><font color="#c58917">-</font><td><a href="#" name="8">(1095-1100)<td><a href="#" name="8">(604-611)</a><td align="center"><font color="#5d0000">19</font>
<tr onclick='openModal("#83a33a")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#83a33a"><font color="#83a33a">-</font><td><a href="#" name="9">(1195-1202)<td><a href="#" name="9">(508-515)</a><td align="center"><font color="#580000">18</font>
<tr onclick='openModal("#ad5910")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#ad5910"><font color="#ad5910">-</font><td><a href="#" name="10">(1168-1175)<td><a href="#" name="10">(478-485)</a><td align="center"><font color="#580000">18</font>
<tr onclick='openModal("#b041ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#b041ff"><font color="#b041ff">-</font><td><a href="#" name="11">(1020-1024)<td><a href="#" name="11">(541-545)</a><td align="center"><font color="#530000">17</font>
<tr onclick='openModal("#571b7e")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#571b7e"><font color="#571b7e">-</font><td><a href="#" name="12">(1204-1211)<td><a href="#" name="12">(769-778)</a><td align="center"><font color="#4e0000">16</font>
<tr onclick='openModal("#3b9c9c")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#3b9c9c"><font color="#3b9c9c">-</font><td><a href="#" name="13">(1177-1195)<td><a href="#" name="13">(871-883)</a><td align="center"><font color="#4e0000">16</font>
<tr onclick='openModal("#842dce")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#842dce"><font color="#842dce">-</font><td><a href="#" name="14">(1152-1168)<td><a href="#" name="14">(853-865)</a><td align="center"><font color="#4e0000">16</font>
<tr onclick='openModal("#f52887")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f52887"><font color="#f52887">-</font><td><a href="#" name="15">(944-958)<td><a href="#" name="15">(710-723)</a><td align="center"><font color="#490000">15</font>
<tr onclick='openModal("#2981b2")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#2981b2"><font color="#2981b2">-</font><td><a href="#" name="16">(673-708)<td><a href="#" name="16">(845-851)</a><td align="center"><font color="#3f0000">13</font>
<tr onclick='openModal("#3090c7")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#3090c7"><font color="#3090c7">-</font><td><a href="#" name="17">(1026-1027)<td><a href="#" name="17">(890-891)</a><td align="center"><font color="#3a0000">12</font>
</td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>test_cdl.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
#!/usr/bin/env python
"""
Tests the cdl related functions of cdl_convert

REQUIREMENTS:

mock
"""

#==============================================================================
# IMPORTS
<a name="3"></a>#==============================================================================

# Standard Imports
<font color="#53858b"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>try:
    from unittest import mock
except ImportError:
    import mock
import os
import sys
import tempfile
import unittest
from xml.etree import ElementTree

# Grab our test's path and append the cdL_convert root directory

# There has to be a better method than:
# 1) Getting our current directory
# 2) Splitting into list
# 3) Splicing out the last 3 entries (filepath, test dir, tools dir)
# 4) Joining
# 5) Appending to our Python path.

sys.path.append('/'.join(os.path.realpath(__file__).split('/')[:-2]))

import cdl_convert

#==============================================================================
# GLOBALS
#==============================================================================

# parse_cdl ===================================================================

CDL_FULL = """&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ColorDecisionList xmlns="urn:ASC:CDL:v1.01"&gt;
    &lt;Description&gt;CDL description 1&lt;/Description&gt;
    &lt;InputDescription&gt;CDL Input Desc Text&lt;/InputDescription&gt;
    &lt;Description&gt;CDL description 2&lt;/Description&gt;
    &lt;ColorDecision&gt;
        &lt;Description&gt;CD description 1&lt;/Description&gt;
        &lt;InputDescription&gt;CD Input Desc Text&lt;/InputDescription&gt;
        &lt;Description&gt;CD description 2&lt;/Description&gt;
        &lt;MediaRef ref="/best/path/ever.dpx"/&gt;
        &lt;Description&gt;CD description 3&lt;/Description&gt;
        &lt;ColorCorrection id="014_xf_seqGrade_v01"&gt;
            &lt;Description&gt;CC description 1&lt;/Description&gt;
            &lt;InputDescription&gt;Input Desc Text&lt;/InputDescription&gt;
            &lt;Description&gt;CC description 2&lt;/Description&gt;
            &lt;SOPNode&gt;
                &lt;Description&gt;Sop description 1&lt;/Description&gt;
                &lt;Description&gt;Sop description 2&lt;/Description&gt;
                &lt;Slope&gt;1.014 1.0104 0.62&lt;/Slope&gt;
                &lt;Offset&gt;-0.00315 -0.00124 0.3103&lt;/Offset&gt;
                &lt;Power&gt;1.0 0.9983 1.0&lt;/Power&gt;
                &lt;Description&gt;Sop description 3&lt;/Description&gt;
            &lt;/SOPNode&gt;
            &lt;Description&gt;CC description 3&lt;/Description&gt;
            &lt;SATNode&gt;
                &lt;Description&gt;Sat description 1&lt;/Description&gt;
                &lt;Saturation&gt;1.09&lt;/Saturation&gt;
                &lt;Description&gt;Sat description 2&lt;/Description&gt;
            &lt;/SATNode&gt;
            &lt;Description&gt;CC description 4&lt;/Description&gt;
            &lt;ViewingDescription&gt;Viewing Desc Text&lt;/ViewingDescription&gt;
            &lt;Description&gt;CC description 5&lt;/Description&gt;
        &lt;/ColorCorrection&gt;
        &lt;ViewingDescription&gt;CD WOOD VIEWER!? ////&lt;/ViewingDescription&gt;
    &lt;/ColorDecision&gt;
    &lt;ColorDecision&gt;
        &lt;ColorCorrection id="f51.200"&gt;
            &lt;SopNode&gt;
                &lt;Slope&gt;0.2331 0.678669 1.0758&lt;/Slope&gt;
                &lt;Offset&gt;0.031 0.128 -0.096&lt;/Offset&gt;
                &lt;Power&gt;1.8 0.97 0.961&lt;/Power&gt;
            &lt;/SopNode&gt;
            &lt;SatNode&gt;
                &lt;Saturation&gt;1.01&lt;/Saturation&gt;
            &lt;/SatNode&gt;
        &lt;/ColorCorrection&gt;
    &lt;/ColorDecision&gt;
    &lt;ColorDecision&gt;
        &lt;MediaRef ref="relative/path/13.jpg"/&gt;
        &lt;ColorCorrectionRef ref="f51.200"/&gt;
    &lt;/ColorDecision&gt;
    &lt;ColorDecision&gt;
        &lt;ColorCorrection id="f55.100"&gt;
            &lt;Description&gt;Raised saturation a little!?! ag... \/Offset&lt;/Description&gt;
            &lt;Description&gt;Raised saturation a little!?! ag... \/Offset&lt;/Description&gt;
            &lt;InputDescription&gt;METAL VIEWER!!! \/\/&lt;/InputDescription&gt;
            &lt;ViewingDescription&gt;WOOD VIEWER!? ////&lt;/ViewingDescription&gt;
            &lt;SopNode&gt;
                &lt;Description&gt;Raised saturation a little!?! ag... \/Offset&lt;/Description&gt;
                &lt;Slope&gt;137829.329 4327890.9833 3489031.003&lt;/Slope&gt;
                &lt;Offset&gt;-3424.011 -342789423.013 -4238923.11&lt;/Offset&gt;
                &lt;Power&gt;3271893.993 .0000998 0.0000000000000000113&lt;/Power&gt;
            &lt;/SopNode&gt;
            &lt;SatNode&gt;
                &lt;Saturation&gt;1798787.01&lt;/Saturation&gt;
            &lt;/SatNode&gt;
        &lt;/ColorCorrection&gt;
    &lt;/ColorDecision&gt;
    &lt;ColorDecision&gt;
        &lt;ViewingDescription&gt;&lt;/ViewingDescription&gt;
        &lt;Description&gt;&lt;/Description&gt;
        &lt;Description&gt;CD description 1&lt;/Description&gt;
        &lt;ColorCorrection id="f54.112"&gt;
            &lt;ASC_SAT&gt;
                &lt;Saturation&gt;1.01&lt;/Saturation&gt;
            &lt;/ASC_SAT&gt;
            &lt;ASC_SOP&gt;
                &lt;Slope&gt;0.2331 0.678669 1.0758&lt;/Slope&gt;
                &lt;Offset&gt;0.031 0.128 -0.096&lt;/Offset&gt;
                &lt;Power&gt;1.8 0.97 0.961&lt;/Power&gt;
            &lt;/ASC_SOP&gt;
        &lt;/ColorCorrection&gt;
        &lt;Description&gt;CD description 2&lt;/Description&gt;
        &lt;InputDescription&gt;CD Input Desc Text 2&lt;/InputDescription&gt;
    &lt;/ColorDecision&gt;
    &lt;Description&gt;CDL description 3&lt;/Description&gt;
    &lt;ViewingDescription&gt;CDL Viewing Desc Text&lt;/ViewingDescription&gt;
    &lt;Description&gt;CDL description 4&lt;/Description&gt;
    &lt;ColorDecision&gt;
        &lt;ViewingDescription&gt;&lt;/ViewingDescription&gt;
        &lt;ColorCorrection id="burp_100.x12"&gt;
            &lt;ViewingDescription&gt;&lt;/ViewingDescription&gt;
            &lt;Description&gt;&lt;/Description&gt;
            &lt;SOPNode&gt;
                &lt;Description&gt;&lt;/Description&gt;
                &lt;Slope&gt;1.014 1.0104 0.62&lt;/Slope&gt;
                &lt;Offset&gt;-0.00315 -0.00124 0.3103&lt;/Offset&gt;
                &lt;Power&gt;1.0 0.9983 1.0&lt;/Power&gt;
            &lt;/SOPNode&gt;
            &lt;Description&gt;&lt;/Description&gt;
            &lt;InputDescription&gt;&lt;/InputDescription&gt;
            &lt;SatNode&gt;
                &lt;Saturation&gt;1.09&lt;/Saturation&gt;
                &lt;Description&gt;&lt;/Description&gt;
            &lt;/SatNode&gt;
            &lt;Description&gt;&lt;/Description&gt;
        &lt;/ColorCorrection&gt;
    &lt;/ColorDecision&gt;
    &lt;ColorDecision&gt;
        &lt;ViewingDescription&gt;12345&lt;/ViewingDescription&gt;
        &lt;ColorCorrectionRef ref="f54.112"/&gt;
    &lt;/ColorDecision&gt;
    &lt;Description&gt;CDL description 5&lt;/Description&gt;
&lt;/ColorDecisionList&gt;
"""

CDL_ODD = r"""&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ColorDecisionList&gt;
    &lt;Description&gt;&lt;/Description&gt;
    &lt;InputDescription&gt;&lt;/InputDescription&gt;
    &lt;Description&gt;CDL description 1&lt;/Description&gt;
    &lt;Description&gt;&lt;/Description&gt;
    &lt;Description&gt;&lt;/Description&gt;
    &lt;Description&gt;&lt;/Description&gt;
    &lt;ColorDecision&gt;
        &lt;MediaRef ref="C:\\Windows\File\Path"/&gt;
        &lt;ColorCorrection id="014_xf_seqGrade_v01"&gt;
            &lt;SOPNode&gt;
                &lt;Description&gt;Sop description 1&lt;/Description&gt;
                &lt;Description&gt;Sop description 2&lt;/Description&gt;
                &lt;Slope&gt;1.014 1.0104 0.62&lt;/Slope&gt;
                &lt;Offset&gt;-0.00315 -0.00124 0.3103&lt;/Offset&gt;
                &lt;Power&gt;1.0 0.9983 1.0&lt;/Power&gt;
                &lt;Description&gt;Sop description 3&lt;/Description&gt;
            &lt;/SOPNode&gt;
        &lt;/ColorCorrection&gt;
    &lt;/ColorDecision&gt;
    &lt;ColorDecision&gt;
        &lt;ColorCorrection id="f51.200"&gt;
            &lt;SopNode&gt;
                &lt;Slope&gt;0.2331 0.678669 1.0758&lt;/Slope&gt;
                &lt;Offset&gt;0.031 0.128 -0.096&lt;/Offset&gt;
                &lt;Power&gt;1.8 0.97 0.961&lt;/Power&gt;
            &lt;/SopNode&gt;
        &lt;/ColorCorrection&gt;
        &lt;MediaRef ref="relative\windows\path"/&gt;
    &lt;/ColorDecision&gt;
    &lt;Description&gt;Raised1 saturation a little!?! ag... \/Offset&lt;/Description&gt;
    &lt;Description&gt;Raised2 saturation a little!?! ag... \/Offset&lt;/Description&gt;
    &lt;ColorDecision&gt;
        &lt;Description&gt;&lt;/Description&gt;
        &lt;InputDescription&gt;&lt;/InputDescription&gt;
        &lt;Description&gt;CD description 1&lt;/Description&gt;
        &lt;Description&gt;&lt;/Description&gt;
        &lt;Description&gt;&lt;/Description&gt;
        &lt;Description&gt;&lt;/Description&gt;
        &lt;ColorCorrectionRef ref="014_xf_seqGrade_v01"/&gt;
        &lt;MediaRef ref="./sameDirectory/loser.####.fbx"/&gt;
    &lt;/ColorDecision&gt;
    &lt;ColorDecision&gt;
        &lt;MediaRef ref="../lateralDirectory/file.lives.here.0120.dpx"/&gt;
        &lt;ColorCorrectionRef ref="missingRef"/&gt;
    &lt;/ColorDecision&gt;
    &lt;ViewingDescription&gt;&lt;/ViewingDescription&gt;
    &lt;ColorDecision&gt;
        &lt;MediaRef ref="http://www.google.com/logo.jpg"/&gt;
        &lt;ColorCorrectionRef ref="alsoMissingRef"/&gt;
    &lt;/ColorDecision&gt;
    &lt;ColorDecision&gt;
        &lt;MediaRef ref="serv://proto/uri:area:full?query=result#fragment"/&gt;
        &lt;ColorCorrection id="burp_200.x15"&gt;
            &lt;SatNode&gt;
                &lt;Description&gt;I am a lovely sat node&lt;/Description&gt;
                &lt;Saturation&gt;1.01&lt;/Saturation&gt;
            &lt;/SatNode&gt;
        &lt;/ColorCorrection&gt;
    &lt;/ColorDecision&gt;
    &lt;ColorDecision&gt;
        &lt;Description&gt;Raised2 saturation a little!?! ag... \/Offset&lt;/Description&gt;
        &lt;MediaRef ref="..\.\..\..\..\This\should\not\be\legal\"/&gt;
        &lt;ColorCorrectionRef ref="f51.200"/&gt;
    &lt;/ColorDecision&gt;
&lt;/ColorDecisionList&gt;
"""

# write_cdl ===================================================================

CDL_FULL_WRITE = """&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ColorDecisionList xmlns="urn:ASC:CDL:v1.01"&gt;
    &lt;InputDescription&gt;CDL Input Desc Text&lt;/InputDescription&gt;
    &lt;ViewingDescription&gt;CDL Viewing Desc Text&lt;/ViewingDescription&gt;
    &lt;Description&gt;CDL description 1&lt;/Description&gt;
    &lt;Description&gt;CDL description 2&lt;/Description&gt;
    &lt;Description&gt;CDL description 3&lt;/Description&gt;
    &lt;Description&gt;CDL description 4&lt;/Description&gt;
    &lt;Description&gt;CDL description 5&lt;/Description&gt;
    &lt;ColorDecision&gt;
        &lt;InputDescription&gt;CD Input Desc Text&lt;/InputDescription&gt;
        &lt;ViewingDescription&gt;CD WOOD VIEWER!? ////&lt;/ViewingDescription&gt;
        &lt;Description&gt;CD description 1&lt;/Description&gt;
        &lt;Description&gt;CD description 2&lt;/Description&gt;
        &lt;Description&gt;CD description 3&lt;/Description&gt;
        &lt;MediaRef ref="/best/path/ever.dpx"/&gt;
        &lt;ColorCorrection id="014_xf_seqGrade_v01"&gt;
            &lt;InputDescription&gt;Input Desc Text&lt;/InputDescription&gt;
            &lt;ViewingDescription&gt;Viewing Desc Text&lt;/ViewingDescription&gt;
            &lt;Description&gt;CC description 1&lt;/Description&gt;
            &lt;Description&gt;CC description 2&lt;/Description&gt;
            &lt;Description&gt;CC description 3&lt;/Description&gt;
            &lt;Description&gt;CC description 4&lt;/Description&gt;
            &lt;Description&gt;CC description 5&lt;/Description&gt;
            &lt;SOPNode&gt;
                &lt;Description&gt;Sop description 1&lt;/Description&gt;
                &lt;Description&gt;Sop description 2&lt;/Description&gt;
                &lt;Description&gt;Sop description 3&lt;/Description&gt;
                &lt;Slope&gt;1.014 1.0104 0.62&lt;/Slope&gt;
                &lt;Offset&gt;-0.00315 -0.00124 0.3103&lt;/Offset&gt;
                &lt;Power&gt;1.0 0.9983 1.0&lt;/Power&gt;
            &lt;/SOPNode&gt;
            &lt;SATNode&gt;
                &lt;Description&gt;Sat description 1&lt;/Description&gt;
                &lt;Description&gt;Sat description 2&lt;/Description&gt;
                &lt;Saturation&gt;1.09&lt;/Saturation&gt;
            &lt;/SATNode&gt;
        &lt;/ColorCorrection&gt;
    &lt;/ColorDecision&gt;
    &lt;ColorDecision&gt;
        &lt;ColorCorrection id="f51.200"&gt;
            &lt;SOPNode&gt;
                &lt;Slope&gt;0.2331 0.678669 1.0758&lt;/Slope&gt;
                &lt;Offset&gt;0.031 0.128 -0.096&lt;/Offset&gt;
                &lt;Power&gt;1.8 0.97 0.961&lt;/Power&gt;
            &lt;/SOPNode&gt;
            &lt;SATNode&gt;
                &lt;Saturation&gt;1.01&lt;/Saturation&gt;
            &lt;/SATNode&gt;
        &lt;/ColorCorrection&gt;
    &lt;/ColorDecision&gt;
    &lt;ColorDecision&gt;
        &lt;MediaRef ref="relative/path/13.jpg"/&gt;
        &lt;ColorCorrectionRef ref="f51.200"/&gt;
    &lt;/ColorDecision&gt;
    &lt;ColorDecision&gt;
        &lt;ColorCorrection id="f55.100"&gt;
            &lt;InputDescription&gt;METAL VIEWER!!! \/\/&lt;/InputDescription&gt;
            &lt;ViewingDescription&gt;WOOD VIEWER!? ////&lt;/ViewingDescription&gt;
            &lt;Description&gt;Raised saturation a little!?! ag... \/Offset&lt;/Description&gt;
            &lt;Description&gt;Raised saturation a little!?! ag... \/Offset&lt;/Description&gt;
            &lt;SOPNode&gt;
                &lt;Description&gt;Raised saturation a little!?! ag... \/Offset&lt;/Description&gt;
                &lt;Slope&gt;137829.329 4327890.9833 3489031.003&lt;/Slope&gt;
                &lt;Offset&gt;-3424.011 -342789423.013 -4238923.11&lt;/Offset&gt;
                &lt;Power&gt;3271893.993 0.0000998 0.0000000000000000113&lt;/Power&gt;
            &lt;/SOPNode&gt;
            &lt;SATNode&gt;
                &lt;Saturation&gt;1798787.01&lt;/Saturation&gt;
            &lt;/SATNode&gt;
        &lt;/ColorCorrection&gt;
    &lt;/ColorDecision&gt;
    &lt;ColorDecision&gt;
        &lt;InputDescription&gt;CD Input Desc Text 2&lt;/InputDescription&gt;
        &lt;Description&gt;CD description 1&lt;/Description&gt;
        &lt;Description&gt;CD description 2&lt;/Description&gt;
        &lt;ColorCorrection id="f54.112"&gt;
            &lt;SOPNode&gt;
                &lt;Slope&gt;0.2331 0.678669 1.0758&lt;/Slope&gt;
                &lt;Offset&gt;0.031 0.128 -0.096&lt;/Offset&gt;
                &lt;Power&gt;1.8 0.97 0.961&lt;/Power&gt;
            &lt;/SOPNode&gt;
            &lt;SATNode&gt;
                &lt;Saturation&gt;1.01&lt;/Saturation&gt;
            &lt;/SATNode&gt;
        &lt;/ColorCorrection&gt;
    &lt;/ColorDecision&gt;
    &lt;ColorDecision&gt;
        &lt;ColorCorrection id="burp_100.x12"&gt;
            &lt;SOPNode&gt;
                &lt;Slope&gt;1.014 1.0104 0.62&lt;/Slope&gt;
                &lt;Offset&gt;-0.00315 -0.00124 0.3103&lt;/Offset&gt;
                &lt;Power&gt;1.0 0.9983 1.0&lt;/Power&gt;
            &lt;/SOPNode&gt;
            &lt;SATNode&gt;
                &lt;Saturation&gt;1.09&lt;/Saturation&gt;
            &lt;/SATNode&gt;
        &lt;/ColorCorrection&gt;
    &lt;/ColorDecision&gt;
    &lt;ColorDecision&gt;
        &lt;ViewingDescription&gt;12345&lt;/ViewingDescription&gt;
        &lt;ColorCorrectionRef ref="f54.112"/&gt;
    &lt;/ColorDecision&gt;
&lt;/ColorDecisionList&gt;
"""

CDL_FULL_WRITE_CCC = """&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ColorCorrectionCollection xmlns="urn:ASC:CDL:v1.01"&gt;
    &lt;InputDescription&gt;CDL Input Desc Text&lt;/InputDescription&gt;
    &lt;ViewingDescription&gt;CDL Viewing Desc Text&lt;/ViewingDescription&gt;
    &lt;Description&gt;CDL description 1&lt;/Description&gt;
    &lt;Description&gt;CDL description 2&lt;/Description&gt;
    &lt;Description&gt;CDL description 3&lt;/Description&gt;
    &lt;Description&gt;CDL description 4&lt;/Description&gt;
    &lt;Description&gt;CDL description 5&lt;/Description&gt;
    &lt;ColorCorrection id="014_xf_seqGrade_v01"&gt;
        &lt;InputDescription&gt;Input Desc Text&lt;/InputDescription&gt;
        &lt;ViewingDescription&gt;Viewing Desc Text&lt;/ViewingDescription&gt;
        &lt;Description&gt;CC description 1&lt;/Description&gt;
        &lt;Description&gt;CC description 2&lt;/Description&gt;
        &lt;Description&gt;CC description 3&lt;/Description&gt;
        &lt;Description&gt;CC description 4&lt;/Description&gt;
        &lt;Description&gt;CC description 5&lt;/Description&gt;
        &lt;SOPNode&gt;
            &lt;Description&gt;Sop description 1&lt;/Description&gt;
            &lt;Description&gt;Sop description 2&lt;/Description&gt;
            &lt;Description&gt;Sop description 3&lt;/Description&gt;
            &lt;Slope&gt;1.014 1.0104 0.62&lt;/Slope&gt;
            &lt;Offset&gt;-0.00315 -0.00124 0.3103&lt;/Offset&gt;
            &lt;Power&gt;1.0 0.9983 1.0&lt;/Power&gt;
        &lt;/SOPNode&gt;
        &lt;SATNode&gt;
            &lt;Description&gt;Sat description 1&lt;/Description&gt;
            &lt;Description&gt;Sat description 2&lt;/Description&gt;
            &lt;Saturation&gt;1.09&lt;/Saturation&gt;
        &lt;/SATNode&gt;
    &lt;/ColorCorrection&gt;
    &lt;ColorCorrection id="f51.200"&gt;
        &lt;SOPNode&gt;
            &lt;Slope&gt;0.2331 0.678669 1.0758&lt;/Slope&gt;
            &lt;Offset&gt;0.031 0.128 -0.096&lt;/Offset&gt;
            &lt;Power&gt;1.8 0.97 0.961&lt;/Power&gt;
        &lt;/SOPNode&gt;
        &lt;SATNode&gt;
            &lt;Saturation&gt;1.01&lt;/Saturation&gt;
        &lt;/SATNode&gt;
    &lt;/ColorCorrection&gt;
    &lt;ColorCorrection id="f51.200"&gt;
        &lt;SOPNode&gt;
            &lt;Slope&gt;0.2331 0.678669 1.0758&lt;/Slope&gt;
            &lt;Offset&gt;0.031 0.128 -0.096&lt;/Offset&gt;
            &lt;Power&gt;1.8 0.97 0.961&lt;/Power&gt;
        &lt;/SOPNode&gt;
        &lt;SATNode&gt;
            &lt;Saturation&gt;1.01&lt;/Saturation&gt;
        &lt;/SATNode&gt;
    &lt;/ColorCorrection&gt;
    &lt;ColorCorrection id="f55.100"&gt;
        &lt;InputDescription&gt;METAL VIEWER!!! \/\/&lt;/InputDescription&gt;
        &lt;ViewingDescription&gt;WOOD VIEWER!? ////&lt;/ViewingDescription&gt;
        &lt;Description&gt;Raised saturation a little!?! ag... \/Offset&lt;/Description&gt;
        &lt;Description&gt;Raised saturation a little!?! ag... \/Offset&lt;/Description&gt;
        &lt;SOPNode&gt;
            &lt;Description&gt;Raised saturation a little!?! ag... \/Offset&lt;/Description&gt;
            &lt;Slope&gt;137829.329 4327890.9833 3489031.003&lt;/Slope&gt;
            &lt;Offset&gt;-3424.011 -342789423.013 -4238923.11&lt;/Offset&gt;
            &lt;Power&gt;3271893.993 0.0000998 0.0000000000000000113&lt;/Power&gt;
        &lt;/SOPNode&gt;
        &lt;SATNode&gt;
            &lt;Saturation&gt;1798787.01&lt;/Saturation&gt;
        &lt;/SATNode&gt;
    &lt;/ColorCorrection&gt;
    &lt;ColorCorrection id="f54.112"&gt;
        &lt;SOPNode&gt;
            &lt;Slope&gt;0.2331 0.678669 1.0758&lt;/Slope&gt;
            &lt;Offset&gt;0.031 0.128 -0.096&lt;/Offset&gt;
            &lt;Power&gt;1.8 0.97 0.961&lt;/Power&gt;
        &lt;/SOPNode&gt;
        &lt;SATNode&gt;
            &lt;Saturation&gt;1.01&lt;/Saturation&gt;
        &lt;/SATNode&gt;
    &lt;/ColorCorrection&gt;
    &lt;ColorCorrection id="burp_100.x12"&gt;
        &lt;SOPNode&gt;
            &lt;Slope&gt;1.014 1.0104 0.62&lt;/Slope&gt;
            &lt;Offset&gt;-0.00315 -0.00124 0.3103&lt;/Offset&gt;
            &lt;Power&gt;1.0 0.9983 1.0&lt;/Power&gt;
        &lt;/SOPNode&gt;
        &lt;SATNode&gt;
            &lt;Saturation&gt;1.09&lt;/Saturation&gt;
        &lt;/SATNode&gt;
    &lt;/ColorCorrection&gt;
    &lt;ColorCorrection id="f54.112"&gt;
        &lt;SOPNode&gt;
            &lt;Slope&gt;0.2331 0.678669 1.0758&lt;/Slope&gt;
            &lt;Offset&gt;0.031 0.128 -0.096&lt;/Offset&gt;
            &lt;Power&gt;1.8 0.97 0.961&lt;/Power&gt;
        &lt;/SOPNode&gt;
        &lt;SATNode&gt;
            &lt;Saturation&gt;1.01&lt;/Saturation&gt;
        &lt;/SATNode&gt;
    &lt;/ColorCorrection&gt;
&lt;/ColorCorrectionCollection&gt;
"""

CDL_ODD_WRITE = r"""&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ColorDecisionList xmlns="urn:ASC:CDL:v1.01"&gt;
    &lt;Description&gt;CDL description 1&lt;/Description&gt;
    &lt;Description&gt;Raised1 saturation a little!?! ag... \/Offset&lt;/Description&gt;
    &lt;Description&gt;Raised2 saturation a little!?! ag... \/Offset&lt;/Description&gt;
    &lt;ColorDecision&gt;
        &lt;MediaRef ref="C:\\Windows\File\Path"/&gt;
        &lt;ColorCorrection id="014_xf_seqGrade_v01"&gt;
            &lt;SOPNode&gt;
                &lt;Description&gt;Sop description 1&lt;/Description&gt;
                &lt;Description&gt;Sop description 2&lt;/Description&gt;
                &lt;Description&gt;Sop description 3&lt;/Description&gt;
                &lt;Slope&gt;1.014 1.0104 0.62&lt;/Slope&gt;
                &lt;Offset&gt;-0.00315 -0.00124 0.3103&lt;/Offset&gt;
                &lt;Power&gt;1.0 0.9983 1.0&lt;/Power&gt;
            &lt;/SOPNode&gt;
        &lt;/ColorCorrection&gt;
    &lt;/ColorDecision&gt;
    &lt;ColorDecision&gt;
        &lt;MediaRef ref="relative\windows\path"/&gt;
        &lt;ColorCorrection id="f51.200"&gt;
            &lt;SOPNode&gt;
                &lt;Slope&gt;0.2331 0.678669 1.0758&lt;/Slope&gt;
                &lt;Offset&gt;0.031 0.128 -0.096&lt;/Offset&gt;
                &lt;Power&gt;1.8 0.97 0.961&lt;/Power&gt;
            &lt;/SOPNode&gt;
        &lt;/ColorCorrection&gt;
    &lt;/ColorDecision&gt;
    &lt;ColorDecision&gt;
        &lt;Description&gt;CD description 1&lt;/Description&gt;
        &lt;MediaRef ref="./sameDirectory/loser.####.fbx"/&gt;
        &lt;ColorCorrectionRef ref="014_xf_seqGrade_v01"/&gt;
    &lt;/ColorDecision&gt;
    &lt;ColorDecision&gt;
        &lt;MediaRef ref="../lateralDirectory/file.lives.here.0120.dpx"/&gt;
        &lt;ColorCorrectionRef ref="missingRef"/&gt;
    &lt;/ColorDecision&gt;
    &lt;ColorDecision&gt;
        &lt;MediaRef ref="http://www.google.com/logo.jpg"/&gt;
        &lt;ColorCorrectionRef ref="alsoMissingRef"/&gt;
    &lt;/ColorDecision&gt;
    &lt;ColorDecision&gt;
        &lt;MediaRef ref="serv://proto/uri:area:full?query=result#fragment"/&gt;
        &lt;ColorCorrection id="burp_200.x15"&gt;
            &lt;SATNode&gt;
                &lt;Description&gt;I am a lovely sat node&lt;/Description&gt;
                &lt;Saturation&gt;1.01&lt;/Saturation&gt;
            &lt;/SATNode&gt;
        &lt;/ColorCorrection&gt;
    &lt;/ColorDecision&gt;
    &lt;ColorDecision&gt;
        &lt;Description&gt;Raised2 saturation a little!?! ag... \/Offset&lt;/Description&gt;
        &lt;MediaRef ref="..\.\..\..\..\This\should\not\be\legal\"/&gt;
        &lt;ColorCorrectionRef ref="f51.200"/&gt;
    &lt;/ColorDecision&gt;
&lt;/ColorDecisionList&gt;
"""

CDL_ODD_WRITE_RESOLVED = r"""&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ColorDecisionList xmlns="urn:ASC:CDL:v1.01"&gt;
    &lt;Description&gt;CDL description 1&lt;/Description&gt;
    &lt;Description&gt;Raised1 saturation a little!?! ag... \/Offset&lt;/Description&gt;
    &lt;Description&gt;Raised2 saturation a little!?! ag... \/Offset&lt;/Description&gt;
    &lt;ColorDecision&gt;
        &lt;MediaRef ref="C:\\Windows\File\Path"/&gt;
        &lt;ColorCorrection id="014_xf_seqGrade_v01"&gt;
            &lt;SOPNode&gt;
                &lt;Description&gt;Sop description 1&lt;/Description&gt;
                &lt;Description&gt;Sop description 2&lt;/Description&gt;
                &lt;Description&gt;Sop description 3&lt;/Description&gt;
                &lt;Slope&gt;1.014 1.0104 0.62&lt;/Slope&gt;
                &lt;Offset&gt;-0.00315 -0.00124 0.3103&lt;/Offset&gt;
                &lt;Power&gt;1.0 0.9983 1.0&lt;/Power&gt;
            &lt;/SOPNode&gt;
        &lt;/ColorCorrection&gt;
    &lt;/ColorDecision&gt;
    &lt;ColorDecision&gt;
        &lt;MediaRef ref="relative\windows\path"/&gt;
        &lt;ColorCorrection id="f51.200"&gt;
            &lt;SOPNode&gt;
                &lt;Slope&gt;0.2331 0.678669 1.0758&lt;/Slope&gt;
                &lt;Offset&gt;0.031 0.128 -0.096&lt;/Offset&gt;
                &lt;Power&gt;1.8 0.97 0.961&lt;/Power&gt;
            &lt;/SOPNode&gt;
        &lt;/ColorCorrection&gt;
    &lt;/ColorDecision&gt;
    &lt;ColorDecision&gt;
        &lt;Description&gt;CD description 1&lt;/Description&gt;
        &lt;MediaRef ref="./sameDirectory/loser.####.fbx"/&gt;
        &lt;ColorCorrectionRef ref="014_xf_seqGrade_v01"/&gt;
    &lt;/ColorDecision&gt;
    &lt;ColorDecision&gt;
        &lt;MediaRef ref="../lateralDirectory/file.lives.here.0120.dpx"/&gt;
        &lt;ColorCorrection id="missingRef"&gt;
            &lt;SOPNode&gt;
                &lt;Slope&gt;1.0 2.0 1.0&lt;/Slope&gt;
                &lt;Offset&gt;0.0 0.0 0.0&lt;/Offset&gt;
                &lt;Power&gt;1.0 1.0 1.0&lt;/Power&gt;
            &lt;/SOPNode&gt;
        &lt;/ColorCorrection&gt;
    &lt;/ColorDecision&gt;
    &lt;ColorDecision&gt;
        &lt;MediaRef ref="http://www.google.com/logo.jpg"/&gt;
        &lt;ColorCorrectionRef ref="alsoMissingRef"/&gt;
    &lt;/ColorDecision&gt;
    &lt;ColorDecision&gt;
        &lt;MediaRef ref="serv://proto/uri:area:full?query=result#fragment"/&gt;
        &lt;ColorCorrection id="burp_200.x15"&gt;
            &lt;SATNode&gt;
                &lt;Description&gt;I am a lovely sat node&lt;/Description&gt;
                &lt;Saturation&gt;1.01&lt;/Saturation&gt;
            &lt;/SATNode&gt;
        &lt;/ColorCorrection&gt;
    &lt;/ColorDecision&gt;
    &lt;ColorDecision&gt;
        &lt;Description&gt;Raised2 saturation a little!?! ag... \/Offset&lt;/Description&gt;
        &lt;MediaRef ref="..\.\..\..\..\This\should\not\be\legal\"/&gt;
        &lt;ColorCorrectionRef ref="f51.200"/&gt;
    &lt;/ColorDecision&gt;
&lt;/ColorDecisionList&gt;
"""

CDL_ODD_WRITE_CCC = r"""&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ColorCorrectionCollection xmlns="urn:ASC:CDL:v1.01"&gt;
    &lt;Description&gt;CDL description 1&lt;/Description&gt;
    &lt;Description&gt;Raised1 saturation a little!?! ag... \/Offset&lt;/Description&gt;
    &lt;Description&gt;Raised2 saturation a little!?! ag... \/Offset&lt;/Description&gt;
    &lt;ColorCorrection id="014_xf_seqGrade_v01"&gt;
        &lt;SOPNode&gt;
            &lt;Description&gt;Sop description 1&lt;/Description&gt;
            &lt;Description&gt;Sop description 2&lt;/Description&gt;
            &lt;Description&gt;Sop description 3&lt;/Description&gt;
            &lt;Slope&gt;1.014 1.0104 0.62&lt;/Slope&gt;
            &lt;Offset&gt;-0.00315 -0.00124 0.3103&lt;/Offset&gt;
            &lt;Power&gt;1.0 0.9983 1.0&lt;/Power&gt;
        &lt;/SOPNode&gt;
    &lt;/ColorCorrection&gt;
    &lt;ColorCorrection id="f51.200"&gt;
        &lt;SOPNode&gt;
            &lt;Slope&gt;0.2331 0.678669 1.0758&lt;/Slope&gt;
            &lt;Offset&gt;0.031 0.128 -0.096&lt;/Offset&gt;
            &lt;Power&gt;1.8 0.97 0.961&lt;/Power&gt;
        &lt;/SOPNode&gt;
    &lt;/ColorCorrection&gt;
    &lt;ColorCorrection id="014_xf_seqGrade_v01"&gt;
        &lt;SOPNode&gt;
            &lt;Description&gt;Sop description 1&lt;/Description&gt;
            &lt;Description&gt;Sop description 2&lt;/Description&gt;
            &lt;Description&gt;Sop description 3&lt;/Description&gt;
            &lt;Slope&gt;1.014 1.0104 0.62&lt;/Slope&gt;
            &lt;Offset&gt;-0.00315 -0.00124 0.3103&lt;/Offset&gt;
            &lt;Power&gt;1.0 0.9983 1.0&lt;/Power&gt;
        &lt;/SOPNode&gt;
    &lt;/ColorCorrection&gt;
    &lt;ColorCorrection id="burp_200.x15"&gt;
        &lt;SATNode&gt;
            &lt;Description&gt;I am a lovely sat node&lt;/Description&gt;
            &lt;Saturation&gt;1.01&lt;/Saturation&gt;
        &lt;/SATNode&gt;
    &lt;/ColorCorrection&gt;
    &lt;ColorCorrection id="f51.200"&gt;
        &lt;SOPNode&gt;
            &lt;Slope&gt;0.2331 0.678669 1.0758&lt;/Slope&gt;
            &lt;Offset&gt;0.031 0.128 -0.096&lt;/Offset&gt;
            &lt;Power&gt;1.8 0.97 0.961&lt;/Power&gt;
        &lt;/SOPNode&gt;
    &lt;/ColorCorrection&gt;
&lt;/ColorCorrectionCollection&gt;
"""

CDL_BAD_TAG = """&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ColorDecisionBlist xmlns="urn:ASC:CDL:v1.01"&gt;
    &lt;Description&gt;CCC description 1&lt;/Description&gt;
    &lt;Description&gt;Raised1 saturation a little!?! ag... \/Offset&lt;/Description&gt;
    &lt;Description&gt;Raised2 saturation a little!?! ag... \/Offset&lt;/Description&gt;
    &lt;ColorDecision&gt;
        &lt;ColorCorrection id="014_xf_seqGrade_v01"&gt;
            &lt;SOPNode&gt;
                &lt;Description&gt;Sop description 1&lt;/Description&gt;
                &lt;Description&gt;Sop description 2&lt;/Description&gt;
                &lt;Description&gt;Sop description 3&lt;/Description&gt;
                &lt;Slope&gt;1.014 1.0104 0.62&lt;/Slope&gt;
                &lt;Offset&gt;-0.00315 -0.00124 0.3103&lt;/Offset&gt;
                &lt;Power&gt;1.0 0.9983 1.0&lt;/Power&gt;
            &lt;/SOPNode&gt;
        &lt;/ColorCorrection&gt;
    &lt;/ColorDecision&gt;
&lt;/ColorDecisionBlist&gt;
"""

# misc ========================================================================

<a name="5"></a>UPPER = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'
LOWER =</b></font> 'abcdefghijklmnopqrstuvwxyz'

<font color="#151b8d"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>if sys.version_info[0] &gt;= 3:
    enc = lambda x: bytes(x, 'UTF-8')
else:
    enc = lambda x: x

if sys.version_info[0] &gt;= 3:
    builtins = 'builtins'
else:
    builtins = '__builtin__'

#==============================================================================
# TEST CLASSES
#==============================================================================


class TestParseCDLFull(unittest.TestCase):
    """Tests a full CDL parse"""

    #==========================================================================
    # SETUP &amp; TEARDOWN
    #==========================================================================

    def setUp(self):
        self.desc = [
            'CDL description 1'</b></font>,
            'CDL description 2',
            'CDL description 3',
            'CDL description 4',
            'CDL description 5'
        ]
        self.input_desc = 'CDL Input Desc Text'
        self.viewing_desc = 'CDL Viewing Desc Text'
        self.color_correction_ids = [
            '014_xf_seqGrade_v01',
            'f51.200',
            'f51.200',
            'f55.100',
            'f54.112',
            'burp_100.x12',
<a name="16"></a>            'f54.112',
        ]
        self.media_ref_refs = [
            <font color="#2981b2"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>"/best/path/ever.dpx",
            None,
            "relative/path/13.jpg",
            None,
            None,
            None,
            None,
        ]
        self.color_decision_descs = [
            ['CD description 1', 'CD description 2', 'CD description 3'],
            [],
            [],
            [],
            ['CD description 1', 'CD description 2'],
            [],
            [],
        ]
        self.color_decision_input_descs = [
            'CD Input Desc Text',
            None,
            None,
            None,
            'CD Input Desc Text 2',
            None,
            None,
        ]
        self.color_decision_viewing_descs = [
            'CD WOOD VIEWER!? ////',
            None,
            None,
            None,
            None,
            None,
            '12345'
        ]
        self.</b></font>color_decision_is_ref = [
            False,
            False,
            True,
            False,
            False,
            False,
            True,
<a name="2"></a>        ]

        # Build our cdl
        <font color="#980517"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>with tempfile.NamedTemporaryFile(mode='wb', delete=False) as f:
            f.write(enc(CDL_FULL))
            self.filename = f.name

        self.node = cdl_convert.parse_cdl(self.filename)

    #==========================================================================

    def tearDown(self):
        # The system should clean these up automatically,
        # but we'll be neat.
        os.remove(self.filename)
        # We need to clear the ColorCorrection member dictionary so we don't
        # have to worry about non-unique ids.
        cdl_convert.reset_all()

    #==========================================================================
    # TESTS
    #==========================================================================

    def test_file_in(self):
        """Tests that the input_file has been set to the file in value"""
        self.assertEqual(
            self.filename,
            self.node.file_in
        )

    #==========================================================================

    def test_type(self):
<a name="4"></a>        """Makes sure type is still set to ccc"""
        self.assertEqual(
            'cdl',
            self.node.</b></font><font color="#6cc417"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>type
        )

    #==========================================================================

    def test_descs(self):
        """Tests that the desc fields have been set correctly"""
        self.assertEqual(
            self.desc,
            self.node.desc
        )

    #==========================================================================

    def test_viewing_desc(self):
        """Tests that the viewing desc has been set correctly"""
        self.assertEqual(
            self.viewing_desc,
            self.node.viewing_desc
        )

    #==========================================================================

    def test_input_desc(self):
        """Tests that the input desc has been set correctly"""
        self.assertEqual(
            self.input_desc,
            self.node.input_desc
        )

    #==========================================================================

    def</b></font> test_parse_cc_results(self):
        """Tests that the parser picked up all the cc's"""
        id_list = [i.cc.id for i in self.node.color_decisions]
        self.assertEqual(
            self.color_correction_ids,
            id_list
        )

    #==========================================================================

    def test_media_ref_refs(self):
        """Tests that all media ref refs were parsed correctly"""
        ref_list = [
            i.media_ref.ref if i.media_ref else None for i in self.node.color_decisions
        ]
        self.assertEqual(
            self.media_ref_refs,
            ref_list
        )

    #==========================================================================

    def test_color_decision_descs(self):
        """Tests that color decision descs are parsed correctly"""
        desc_list = [
            i.desc for i in self.node.color_decisions
        ]
        self.assertEqual(
            self.color_decision_descs,
            desc_list
        )

    #==========================================================================

    def test_color_decision_input_descs(self):
        """Tests that color decision input descs are parsed correctly"""
        desc_list = [
            i.input_desc for i in self.node.color_decisions
        ]
        self.assertEqual(
            self.color_decision_input_descs,
            desc_list
        )

    #==========================================================================

    def test_color_decision_viewing_descs(self):
        """Tests that color decision viewing descs are parsed correctly"""
        desc_list = [
            i.viewing_desc for i in self.node.color_decisions
        ]
        self.assertEqual(
            self.color_decision_viewing_descs,
            desc_list
        )

    #==========================================================================

    def test_color_decision_is_ref(self):
        """Tests that color decision references are parsed correctly"""
        ref_list = [
            i.is_ref for i in self.node.color_decisions
        ]
        self.assertEqual(
            self.color_decision_is_ref,
            ref_list
        )


class TestParseCDLOdd(TestParseCDLFull):
    """Tests an odd CDL parse"""

    #==========================================================================
    # SETUP &amp; TEARDOWN
    #==========================================================================

    def setUp(self):
        self.desc = [
            'CDL description 1',
            'Raised1 saturation a little!?! ag... \/Offset',
            'Raised2 saturation a little!?! ag... \/Offset',
        ]
        self.input_desc = None
        self.viewing_desc = None
        self.color_correction_ids = [
            '014_xf_seqGrade_v01',
            'f51.200',
            '014_xf_seqGrade_v01',
            'missingRef',
            'alsoMissingRef',
            'burp_200.x15',
            'f51.200'
        ]
        self.media_ref_refs = [
            "C:\\\\Windows\\File\\Path",
            "relative\\windows\\path",
            "./sameDirectory/loser.####.fbx",
            "../lateralDirectory/file.lives.here.0120.dpx",
            "http://www.google.com/logo.jpg",
            "serv://proto/uri:area:full?query=result#fragment",
            "..\\.\\..\\..\\..\\This\\should\\not\\be\\legal\\"
        ]
        self.color_decision_descs = [
            [],
            [],
            ['CD description 1'],
            [],
            [],
            [],
            ['Raised2 saturation a little!?! ag... \/Offset']
        ]
        self.color_decision_input_descs = [
            None,
            None,
            None,
            None,
            None,
            None,
            None,
        ]
        self.color_decision_viewing_descs = [
            None,
            None,
            None,
            None,
            None,
            None,
            None,
        ]
        self.color_decision_is_ref = [
            False,
            False,
            True,
            True,
            True,
            False,
            True,
<a name="7"></a>        ]

        # Build our ccc
        <font color="#38a4a5"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>with tempfile.NamedTemporaryFile(mode='wb', delete=False) as f:
            f.write(enc(CDL_ODD))
            self.filename = f.name

        self.node = cdl_convert.parse_cdl(self.filename)


class</b></font> TestParseCDLExceptions(unittest.TestCase):
    """Tests that we run into the correct exceptions with bad XMLs"""

    #==========================================================================
    # SETUP &amp; TEARDOWN
    #==========================================================================

    def setUp(self):
        self.filename = None

<a name="15"></a>    def tearDown(self):
        if self.filename:
            os.remove(self.filename)
        cdl_convert.reset_all(<font color="#f52887"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>)

    #==========================================================================
    # TESTS
    #==========================================================================

    def testBadTag(self):
        """Tests that a bad root tag raises a ValueError"""

        # Build our cdl
        with tempfile.NamedTemporaryFile(mode='wb', delete=False) as f:
            f.write(enc(CDL_BAD_TAG))
            self.filename = f.name

<a name="1"></a>        self.</b></font>assertRaises(
            ValueError,
            cdl_convert.parse_cdl,
            self<font color="#f63526"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>.filename,
        )

    #==========================================================================

    def testEmptyCDL(self):
        """Tests that an empty CCC file raises a ValueError"""

        emptyCDL = ('&lt;?xml version="1.0" encoding="UTF-8"?&gt;\n'
                    '&lt;ColorDecisionList xmlns="urn:ASC:CDL:v1.01"&gt;\n'
                    '&lt;/ColorDecisionList&gt;')

        # Build our cdl
        with tempfile.NamedTemporaryFile(mode='wb', delete=False) as f:
            f.write(enc(emptyCDL))
            self.filename = f.name

        self.assertRaises(
            ValueError,
            cdl_convert.parse_cdl,
            self.filename,
        )

    #==========================================================================

    def testEmptyCD(self):
        """Tests that an empty ColorDecision file raises a ValueError"""

        emptyCDL = ('&lt;?xml version="1.0" encoding="UTF-8"?&gt;\n'
                    '&lt;ColorDecisionList xmlns="urn:ASC:CDL:v1.01"&gt;\n'
                    '\t&lt;ColorDecision&gt;\n'
                    '\t\t&lt;MediaRef ref="bestref.dpx"/&gt;\n'
                    '\t&lt;/ColorDecision&gt;\n'
                    '&lt;/ColorDecisionList&gt;')

        # Build our ccc
        with tempfile.NamedTemporaryFile(mode='wb', delete=False) as f:
            f.write(enc(emptyCDL))
            self.filename = f.name

        self.assertRaises(
            ValueError,
            cdl_convert.parse_cdl,
            self.</b></font>filename,
        )

class TestWriteCDLFull(unittest.TestCase):
    """Tests a full write of the CDL file

    This is an integration style test. If parse_cdl stops working, this stops
    working.

    """
    #==========================================================================
    # SETUP &amp; TEARDOWN
    #==========================================================================
<a name="11"></a>
    def setUp(self):
        # Build our cdl
        <font color="#b041ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>with tempfile.NamedTemporaryFile(mode='wb', delete=False) as f:
            f.write(enc(CDL_FULL))
            self.filename = f.name
<a name="17"></a>
        self.cdl = cdl_convert.parse_cdl(self.</b></font>filename)

        self<font color="#3090c7"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>.target_xml_root = enc(CDL_FULL_WRITE)
        self.target_xml = enc('\n'.join(CDL_FULL_WRITE.split('\n')[</b></font>1:]))

    #==========================================================================
<a name="0"></a>
    def tearDown(self):
        os.remove(self.filename)
        cdl_convert<font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>.reset_all()

    #==========================================================================
    # TESTS
    #==========================================================================

    def test_root_xml(self):
        """Tests that root_xml returns the full XML as expected"""
        self.assertEqual(
            self.target_xml_root,
            self.cdl.xml_root
        )

    #==========================================================================

    def test_base_xml(self):
        """Tests that the xml atrib returns the XML minus root as expected"""
        self.assertEqual(
            self.target_xml,
            self.cdl.xml
        )

    #==========================================================================

    def test_element(self):
        """Tests that the element returned is an etree type"""
        self.assertEqual(
            'ColorDecisionList',
            self.cdl.element.tag
        )

    #==========================================================================

    def test_write(self):
        """Tests writing the cdl itself"""
        mockOpen = mock.mock_open()

        self.cdl._file_out = 'bobs_big_file.cdl'

        with mock.patch(builtins + '.open', mockOpen, create=True):
            cdl_convert.write_cdl(self.cdl)

        mockOpen.assert_called_once_with('bobs_big_file.cdl', 'wb')

        mockOpen().write.assert_called_once_with(self.target_xml_root)


class TestWriteCDLFullAsCCC(TestWriteCDLFull):
    """Tests an write of the CDL file as a CCC file

    This is an integration style test. If parse_cdl stops working, this stops
    working.

    """
    #==========================================================================
    # SETUP &amp; TEARDOWN
    #==========================================================================

    def setUp(self):
<a name="8"></a>        cdl_convert.reset_all(</b></font>)

        # Build our ccc
        <font color="#c58917"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>with tempfile.NamedTemporaryFile(mode='wb', delete=False) as f:
            f.write(enc(CDL_FULL))
            self.filename = f.name

        self.cdl = cdl_convert.parse_cdl(self.filename)
        self.cdl.</b></font>set_to_ccc()

        self.target_xml_root = enc(CDL_FULL_WRITE_CCC)
        self.target_xml = enc('\n'.join(CDL_FULL_WRITE_CCC.split('\n')[1:]))

    #==========================================================================

    def test_element(self):
        """Tests that the element returned is an etree type"""
        self.assertEqual(
            'ColorCorrectionCollection',
            self.cdl.element.tag
        )

    #==========================================================================

    def test_write(self):
        """Tests writing the cdl itself"""
        mockOpen = mock.mock_open()

        self.cdl._file_out = 'bobs_big_file.cdl'

        with mock.patch(builtins + '.open', mockOpen, create=True):
            cdl_convert.write_ccc(self.cdl)

        mockOpen.assert_called_once_with('bobs_big_file.cdl', 'wb')

        mockOpen().write.assert_called_once_with(self.target_xml_root)


class TestWriteCDLOddAsCCC(TestWriteCDLFullAsCCC):
    """Tests an write of the CDL file as a CCC file

    This is an integration style test. If parse_cdl stops working, this stops
    working.

    """
    #==========================================================================
    # SETUP &amp; TEARDOWN
<a name="6"></a>    #==========================================================================

    def setUp(self):
        cdl_convert.reset_all<font color="#8c8774"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>()

        # Build our ccc
        with tempfile.NamedTemporaryFile(mode='wb', delete=False) as f:
            f.write(enc(CDL_ODD))
            self.filename = f.name

<a name="14"></a>        self.cdl = cdl_convert.parse_cdl(self.filename)
        self.cdl.</b></font>set_to_ccc()

        self<font color="#842dce"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>.target_xml_root = enc(CDL_ODD_WRITE_CCC)
        self.target_xml = enc('\n'.join(CDL_ODD_WRITE_CCC.split('\n')[1:]))


class TestWriteCDLOdd(TestWriteCDLFull):
    """Tests an odd write of the CDL file

    This is an integration style test. If parse_cdl stops working, this stops
    working.

    """
    #==========================================================================
    # SETUP &amp; TEARDOWN
<a name="10"></a>    #==========================================================================

    def setUp(self):
        cdl_convert.</b></font>reset_all<font color="#ad5910"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>()

        # Build our ccc
        with tempfile.NamedTemporaryFile(mode='wb', delete=False) as f:
            f.write(enc(CDL_ODD))
            self.filename = f.name
<a name="13"></a>
        self.cdl = cdl_convert.parse_cdl(self.</b></font>filename)

        self<font color="#3b9c9c"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>.target_xml_root = enc(CDL_ODD_WRITE)
        self.target_xml = enc('\n'.join(CDL_ODD_WRITE.split('\n')[1:]))

class TestWriteCDLOddReferenceFix(TestWriteCDLFull):
    """Tests an odd write of the CDL file

    This is an integration style test. If parse_cdl stops working, this stops
    working.

    In this test, we'll create a ColorCorrection that matches the reference
    id.

    """
    #==========================================================================
    # SETUP &amp; TEARDOWN
<a name="9"></a>    #==========================================================================

    def setUp(self):
        cdl_convert.</b></font>reset_all<font color="#83a33a"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>()

        # Build our ccc
        with tempfile.NamedTemporaryFile(mode='wb', delete=False) as f:
            f.write(enc(CDL_ODD))
            self.filename = f.name
<a name="12"></a>
        self.cdl = cdl_convert.parse_cdl(self.</b></font>filename)
        cc = cdl_convert.ColorCorrection("missingRef")
        cc<font color="#571b7e"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>.slope = [1.0, 2.0, 1.0]

        self.target_xml_root = enc(CDL_ODD_WRITE_RESOLVED)
        self.target_xml = enc('\n'.join(CDL_ODD_WRITE_RESOLVED.split('\n')[1:]))

    #==========================================================================

    def</b></font> testMissingRef(self):
        """Tests what happens with a missing ref and HALT"""
        cdl_convert.config.HALT_ON_ERROR = True

        # We shouldn't stop just because a ref is missing
        mockOpen = mock.mock_open()

        self.cdl._file_out = 'bobs_big_file.cdl'

        with mock.patch(builtins + '.open', mockOpen, create=True):
            cdl_convert.write_cdl(self.cdl)

        mockOpen.assert_called_once_with('bobs_big_file.cdl', 'wb')

        mockOpen().write.assert_called_once_with(self.target_xml_root)

        cdl_convert.config.HALT_ON_ERROR = False

#==============================================================================
# RUNNER
#==============================================================================
if __name__ == '__main__':
    unittest.main()
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>test_cc.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
#!/usr/bin/env python
"""
Tests the cc related functions of cdl_convert

REQUIREMENTS:

mock
"""

#==============================================================================
# IMPORTS
#==============================================================================
<a name="3"></a>
# Standard Imports
from decimal import Decimal
<font color="#53858b"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>try:
    from unittest import mock
except ImportError:
    import mock
import os
import sys
import tempfile
import unittest
from xml.etree import ElementTree

# Grab our test's path and append the cdL_convert root directory

# There has to be a better method than:
# 1) Getting our current directory
# 2) Splitting into list
# 3) Splicing out the last 3 entries (filepath, test dir, tools dir)
# 4) Joining
# 5) Appending to our Python path.

sys.path.append('/'.join(os.path.realpath(__file__).split('/')[:-2]))

import cdl_convert

#==============================================================================
# GLOBALS
#==============================================================================

# We'll save out different and broken XMLs by hand.

# Parse XMLs ==================================================================

# Valid XMLs ==================================================================

CC_FULL = """&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ColorCorrection id="014_xf_seqGrade_v01"&gt;
    &lt;Description&gt;CC description 1&lt;/Description&gt;
    &lt;InputDescription&gt;Input Desc Text&lt;/InputDescription&gt;
    &lt;Description&gt;CC description 2&lt;/Description&gt;
    &lt;SOPNode&gt;
        &lt;Description&gt;Sop description 1&lt;/Description&gt;
        &lt;Description&gt;Sop description 2&lt;/Description&gt;
        &lt;Slope&gt;1.014 1.0104 0.62&lt;/Slope&gt;
        &lt;Offset&gt;-0.00315 -0.00124 0.3103&lt;/Offset&gt;
        &lt;Power&gt;1.0 0.9983 1.0&lt;/Power&gt;
        &lt;Description&gt;Sop description 3&lt;/Description&gt;
    &lt;/SOPNode&gt;
    &lt;Description&gt;CC description 3&lt;/Description&gt;
    &lt;SATNode&gt;
        &lt;Description&gt;Sat description 1&lt;/Description&gt;
        &lt;Saturation&gt;1.09&lt;/Saturation&gt;
        &lt;Description&gt;Sat description 2&lt;/Description&gt;
    &lt;/SATNode&gt;
    &lt;Description&gt;CC description 4&lt;/Description&gt;
    &lt;ViewingDescription&gt;Viewing Desc Text&lt;/ViewingDescription&gt;
    &lt;Description&gt;CC description 5&lt;/Description&gt;
&lt;/ColorCorrection&gt;
"""

CC_BASIC = """&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ColorCorrection id="f51.200"&gt;
    &lt;SopNode&gt;
        &lt;Slope&gt;0.2331 0.678669 1.0758&lt;/Slope&gt;
        &lt;Offset&gt;0.031 0.128 -0.096&lt;/Offset&gt;
        &lt;Power&gt;1.8 0.97 0.961&lt;/Power&gt;
    &lt;/SopNode&gt;
    &lt;SatNode&gt;
        &lt;Saturation&gt;1.01&lt;/Saturation&gt;
    &lt;/SatNode&gt;
&lt;/ColorCorrection&gt;
"""

# The following characters don't seem to be allowed in id fields:
CC_ODD = r"""&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ColorCorrection id="f55.100\\\\\//////"&gt;
    &lt;Description&gt;Raised saturation a little!?! ag... \/Offset&lt;/Description&gt;
    &lt;Description&gt;Raised saturation a little!?! ag... \/Offset&lt;/Description&gt;
    &lt;InputDescription&gt;METAL VIEWER!!! \/\/&lt;/InputDescription&gt;
    &lt;ViewingDescription&gt;WOOD VIEWER!? ////&lt;/ViewingDescription&gt;
    &lt;SopNode&gt;
        &lt;Description&gt;Raised saturation a little!?! ag... \/Offset&lt;/Description&gt;
        &lt;Slope&gt;137829.329 4327890.9833 3489031.003&lt;/Slope&gt;
        &lt;Offset&gt;-3424.011 -342789423.013 -4238923.11&lt;/Offset&gt;
        &lt;Power&gt;3271893.993 .0000998 0.0000000000000000113&lt;/Power&gt;
    &lt;/SopNode&gt;
    &lt;SatNode&gt;
        &lt;Saturation&gt;1798787.01&lt;/Saturation&gt;
    &lt;/SatNode&gt;
&lt;/ColorCorrection&gt;
"""

CC_BASIC_ORDER = """&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ColorCorrection id="f54.112"&gt;
    &lt;ASC_SAT&gt;
        &lt;Saturation&gt;1.01&lt;/Saturation&gt;
    &lt;/ASC_SAT&gt;
    &lt;ASC_SOP&gt;
        &lt;Slope&gt;0.2331 0.678669 1.0758&lt;/Slope&gt;
        &lt;Offset&gt;0.031 0.128 -0.096&lt;/Offset&gt;
        &lt;Power&gt;1.8 0.97 0.961&lt;/Power&gt;
    &lt;/ASC_SOP&gt;
&lt;/ColorCorrection&gt;
"""

CC_BLANK_METADATA = """&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ColorCorrection id="burp_100.x12"&gt;
    &lt;ViewingDescription&gt;&lt;/ViewingDescription&gt;
    &lt;Description&gt;&lt;/Description&gt;
    &lt;SOPNode&gt;
        &lt;Description&gt;&lt;/Description&gt;
        &lt;Slope&gt;1.014 1.0104 0.62&lt;/Slope&gt;
        &lt;Offset&gt;-0.00315 -0.00124 0.3103&lt;/Offset&gt;
        &lt;Power&gt;1.0 0.9983 1.0&lt;/Power&gt;
    &lt;/SOPNode&gt;
    &lt;Description&gt;&lt;/Description&gt;
    &lt;InputDescription&gt;&lt;/InputDescription&gt;
    &lt;SatNode&gt;
        &lt;Saturation&gt;1.09&lt;/Saturation&gt;
        &lt;Description&gt;&lt;/Description&gt;
    &lt;/SatNode&gt;
    &lt;Description&gt;&lt;/Description&gt;
&lt;/ColorCorrection&gt;
"""

CC_NO_SOP = """&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ColorCorrection id="burp_200.x15"&gt;
    &lt;SatNode&gt;
        &lt;Description&gt;I am a lovely sat node&lt;/Description&gt;
        &lt;Saturation&gt;1.01&lt;/Saturation&gt;
    &lt;/SatNode&gt;
&lt;/ColorCorrection&gt;
"""

CC_NO_SAT = """&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ColorCorrection id="burp_300.x35"&gt;
    &lt;SopNode&gt;
        &lt;Slope&gt;0.2331 0.678669 1.0758&lt;/Slope&gt;
        &lt;Offset&gt;0.031 0.128 -0.096&lt;/Offset&gt;
        &lt;Power&gt;1.8 0.97 0.961&lt;/Power&gt;
    &lt;/SopNode&gt;
&lt;/ColorCorrection&gt;
"""

# Bad XMLs ====================================================================

CC_NO_ID = """&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ColorCorrection&gt;
    &lt;SopNode&gt;
        &lt;Slope&gt;0.2331 0.678669 1.0758&lt;/Slope&gt;
        &lt;Offset&gt;0.031 0.128 -0.096&lt;/Offset&gt;
        &lt;Power&gt;1.8 0.97 0.961&lt;/Power&gt;
    &lt;/SopNode&gt;
    &lt;SatNode&gt;
        &lt;Saturation&gt;1.01&lt;/Saturation&gt;
    &lt;/SatNode&gt;
&lt;/ColorCorrection&gt;
"""

CC_BLANK_ID = """&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ColorCorrection id=""&gt;
    &lt;SopNode&gt;
        &lt;Slope&gt;0.2331 0.678669 1.0758&lt;/Slope&gt;
        &lt;Offset&gt;0.031 0.128 -0.096&lt;/Offset&gt;
        &lt;Power&gt;1.8 0.97 0.961&lt;/Power&gt;
    &lt;/SopNode&gt;
    &lt;SatNode&gt;
        &lt;Saturation&gt;1.01&lt;/Saturation&gt;
    &lt;/SatNode&gt;
&lt;/ColorCorrection&gt;
"""

CC_NEGATIVE_SLOPE =</b></font> """&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ColorCorrection id="dsds"&gt;
    &lt;SopNode&gt;
        &lt;Slope&gt;-0.2331 0.678669 1.0758&lt;/Slope&gt;
        &lt;Offset&gt;0.031 0.128 -0.096&lt;/Offset&gt;
        &lt;Power&gt;1.8 0.97 0.961&lt;/Power&gt;
    &lt;/SopNode&gt;
    &lt;SatNode&gt;
        &lt;Saturation&gt;1.01&lt;/Saturation&gt;
    &lt;/SatNode&gt;
&lt;/ColorCorrection&gt;
"""

# Write XMLs ==================================================================

CC_FULL_WRITE = """&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ColorCorrection id="014_xf_seqGrade_v01"&gt;
    &lt;InputDescription&gt;Input Desc Text&lt;/InputDescription&gt;
    &lt;ViewingDescription&gt;Viewing Desc Text&lt;/ViewingDescription&gt;
    &lt;Description&gt;CC description 1&lt;/Description&gt;
    &lt;Description&gt;CC description 2&lt;/Description&gt;
    &lt;Description&gt;CC description 3&lt;/Description&gt;
    &lt;Description&gt;CC description 4&lt;/Description&gt;
    &lt;Description&gt;CC description 5&lt;/Description&gt;
    &lt;SOPNode&gt;
        &lt;Description&gt;Sop description 1&lt;/Description&gt;
        &lt;Description&gt;Sop description 2&lt;/Description&gt;
        &lt;Description&gt;Sop description 3&lt;/Description&gt;
        &lt;Slope&gt;1.014 1.0104 0.62&lt;/Slope&gt;
        &lt;Offset&gt;-0.00315 -0.00124 0.3103&lt;/Offset&gt;
        &lt;Power&gt;1.0 0.9983 1.0&lt;/Power&gt;
    &lt;/SOPNode&gt;
    &lt;SATNode&gt;
        &lt;Description&gt;Sat description 1&lt;/Description&gt;
        &lt;Description&gt;Sat description 2&lt;/Description&gt;
        &lt;Saturation&gt;1.09&lt;/Saturation&gt;
    &lt;/SATNode&gt;
&lt;/ColorCorrection&gt;
"""

# The following characters don't seem to be allowed in id fields:
CC_ODD_WRITE = r"""&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ColorCorrection id="f55.100"&gt;
    &lt;InputDescription&gt;METAL VIEWER!!! \/\/&lt;/InputDescription&gt;
    &lt;ViewingDescription&gt;WOOD VIEWER!? ////&lt;/ViewingDescription&gt;
    &lt;Description&gt;Raised saturation1 a little!?! ag... \/Offset&lt;/Description&gt;
    &lt;Description&gt;Raised saturation2 a little!?! ag... \/Offset&lt;/Description&gt;
    &lt;SOPNode&gt;
        &lt;Description&gt;Raised saturation a little!?! ag... \/Offset&lt;/Description&gt;
        &lt;Slope&gt;137829.329 4327890.9833 3489031.003&lt;/Slope&gt;
        &lt;Offset&gt;-3424.011 -342789423.013 -4238923.11&lt;/Offset&gt;
        &lt;Power&gt;3271893.993 0.0000998 0.0000000000000000113&lt;/Power&gt;
    &lt;/SOPNode&gt;
    &lt;SATNode&gt;
        &lt;Saturation&gt;1798787.01&lt;/Saturation&gt;
    &lt;/SATNode&gt;
&lt;/ColorCorrection&gt;
"""

CC_NO_SOP_WRITE = """&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ColorCorrection id="burp_200.x15"&gt;
    &lt;SATNode&gt;
        &lt;Description&gt;I am a lovely sat node&lt;/Description&gt;
        &lt;Saturation&gt;1.0128109381&lt;/Saturation&gt;
    &lt;/SATNode&gt;
&lt;/ColorCorrection&gt;
"""

CC_NO_SAT_WRITE = """&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ColorCorrection id="burp_300.x35"&gt;
    &lt;SOPNode&gt;
        &lt;Slope&gt;1.233321 0.678669 1.0758&lt;/Slope&gt;
        &lt;Offset&gt;0.031 0.128 -0.096&lt;/Offset&gt;
        &lt;Power&gt;1.8 0.97 0.961&lt;/Power&gt;
    &lt;/SOPNode&gt;
&lt;/ColorCorrection&gt;
"""

# misc ========================================================================

<a name="5"></a>UPPER = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'
LOWER = 'abcdefghijklmnopqrstuvwxyz'

<font color="#151b8d"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>if sys.version_info[0] &gt;= 3:
    enc = lambda x: bytes(x, 'UTF-8')
else:
    enc = lambda x: x

if sys.version_info[0] &gt;= 3:
    builtins = 'builtins'
else:
    builtins = '__builtin__'

#==============================================================================
# TEST CLASSES
#==============================================================================

# parse_cc ====================================================================


class TestParseCCBasic(unittest.TestCase):
    """Tests parsing a cc xml"""

    #==========================================================================
    # SETUP &amp; TEARDOWN
    #==========================================================================

    def setUp(self):
        self.id = "014_xf_seqGrade_v01"
        self.</b></font>desc = [
            'CC description 1', 'CC description 2', 'CC description 3',
            'CC description 4', 'CC description 5'
        ]
        self.input_desc = 'Input Desc Text'
        self.viewing_desc = 'Viewing Desc Text'

        self.sop_node_desc = [
            'Sop description 1', 'Sop description 2', 'Sop description 3'
        ]
        self.slope = decimalize(1.014, 1.0104, 0.62)
        self.offset = decimalize(-0.00315, -0.00124, 0.3103)
        self.power = decimalize(1.0, 0.9983, 1.0)
        self.sat_node_desc = [
            'Sat description 1', 'Sat description 2'
        ]
<a name="2"></a>        self.sat = Decimal('1.09')

        # Build our cc
        <font color="#980517"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>with tempfile.NamedTemporaryFile(mode='wb', delete=False) as f:
            f.write(enc(CC_FULL))
            self.filename = f.name

        self.cdl = cdl_convert.parse_cc(self.filename)

    #==========================================================================

    def tearDown(self):
        # The system should clean these up automatically,
        # but we'll be neat.
        os.remove(self.filename)
        # We need to clear the ColorCorrection member dictionary so we don't
        # have to worry about non-unique ids.
        cdl_convert.reset_all()

    #==========================================================================
    # TESTS
    #==========================================================================

    def testId(self):
        """Tests that id was set to id attrib"""
        self.assertEqual(
            self.id,
            self.cdl.id
        )

    #==========================================================================

    def testDesc(self):
        """Tests that desc was set to desc element"""
        self.assertEqual(
            self.desc,
            self.</b></font>cdl.desc
        )

    #==========================================================================

    def testInputDesc(self):
        """Tests that input description was set"""
        self.assertEqual(
            self.input_desc,
            self.cdl.input_desc
        )

    #==========================================================================

    def testViewingDesc(self):
        """Tests that viewing description was set"""
        self.assertEqual(
            self.viewing_desc,
            self.cdl.viewing_desc
        )

    #==========================================================================

    def testSopDesc(self):
        """Tests that desc was set to sop node's desc element"""
        self.assertEqual(
            self.sop_node_desc,
            self.cdl.sop_node.desc
        )

    #==========================================================================

    def testSatDesc(self):
<a name="4"></a>        """Tests that desc was set to sat node's desc element"""
        self.assertEqual(
            self.sat_node_desc,
            self.cdl.sat_node.<font color="#6cc417"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>desc
        )

    #==========================================================================

    def testSlope(self):
        """Tests that slope was set correctly"""
        self.assertEqual(
            self.slope,
            self.cdl.slope
        )

    #==========================================================================

    def testOffset(self):
        """Tests that offset was set correctly"""
        self.assertEqual(
            self.offset,
            self.cdl.offset
        )

    #==========================================================================

    def testPower(self):
        """Tests that power was set correctly"""
        self.assertEqual(
            self.power,
            self.cdl.power
        )

    #==========================================================================

    def</b></font> testSat(self):
        """Tests that sat was set correctly"""
        self.assertEqual(
            self.sat,
            self.cdl.sat
        )

#==============================================================================


class TestParseCCOdd(TestParseCCBasic):
    """Tests parsing a cc xml with odd values"""

    #==========================================================================
    # SETUP &amp; TEARDOWN
    #==========================================================================

    def setUp(self):
        self.id = "f55.100"  # This will have been _sanitized()
        self.desc = [
            'Raised saturation a little!?! ag... \/Offset',
            'Raised saturation a little!?! ag... \/Offset',
        ]
        self.input_desc = 'METAL VIEWER!!! \/\/'
        self.viewing_desc = 'WOOD VIEWER!? ////'

        self.sop_node_desc = [
            'Raised saturation a little!?! ag... \/Offset'
        ]
        self.slope = decimalize(137829.329, 4327890.9833, 3489031.003)
        self.offset = decimalize(-3424.011, -342789423.013, -4238923.11)
        self.power = decimalize(3271893.993, .0000998, 0.0000000000000000113)
        self.sat_node_desc = []
<a name="7"></a>        self.sat = Decimal('1798787.01')

        # Build our cc
        <font color="#38a4a5"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>with tempfile.NamedTemporaryFile(mode='wb', delete=False) as f:
            f.write(enc(CC_ODD))
            self.filename = f.name

        self.cdl = cdl_convert.parse_cc(self.filename)

#==============================================================================


class</b></font> TestParseCCBasic(TestParseCCBasic):
    """Tests parsing a cc xml with minimal values"""

    #==========================================================================
    # SETUP &amp; TEARDOWN
    #==========================================================================

    def setUp(self):
        self.id = "f51.200"
        self.desc = []
        self.input_desc = None
        self.viewing_desc = None

        self.sop_node_desc = []
        self.slope = decimalize(0.2331, 0.678669, 1.0758)
<a name="10"></a>        self.offset = decimalize(0.031, 0.128, -0.096)
        self.power = decimalize(1.8, 0.97, 0.961)
        self.sat_node_desc = []
        self.sat = Decimal<font color="#ad5910"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>('1.01')

        # Build our cc
        with tempfile.NamedTemporaryFile(mode='wb', delete=False) as f:
            f.write(enc(CC_BASIC))
            self.filename = f.name

        self.cdl = cdl_convert.parse_cc(self.</b></font>filename)

#==============================================================================


class TestParseCCBasicOrder(TestParseCCBasic):
    """Tests parsing a cc xml with minimal, but out of order values"""

    #==========================================================================
    # SETUP &amp; TEARDOWN
    #==========================================================================

    def setUp(self):
        self.id = "f54.112"
        self.desc = []
        self.input_desc = None
        self.viewing_desc = None

        self.sop_node_desc = []
        self.slope = decimalize(0.2331, 0.678669, 1.0758)
<a name="9"></a>        self.offset = decimalize(0.031, 0.128, -0.096)
        self.power = decimalize(1.8, 0.97, 0.961)
        self.sat_node_desc = []
        self.sat = Decimal<font color="#83a33a"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>('1.01')

        # Build our cc
        with tempfile.NamedTemporaryFile(mode='wb', delete=False) as f:
            f.write(enc(CC_BASIC_ORDER))
            self.filename = f.name

        self.cdl = cdl_convert.parse_cc(self.</b></font>filename)

#==============================================================================


class TestParseCCBlankMetadata(TestParseCCBasic):
    """Tests parsing a cc xml with blank metadata fields"""

    #==========================================================================
    # SETUP &amp; TEARDOWN
    #==========================================================================

    def setUp(self):
        self.id = "burp_100.x12"
        self.desc = []
        self.input_desc = None
        self.viewing_desc = None

        self.sop_node_desc = []
        self.slope = decimalize(1.014, 1.0104, 0.62)
        self.offset = decimalize(-0.00315, -0.00124, 0.3103)
        self.power = decimalize(1.0, 0.9983, 1.0)
        self.sat_node_desc = []
<a name="11"></a>        self.sat = Decimal('1.09')

        # Build our cc
        <font color="#b041ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>with tempfile.NamedTemporaryFile(mode='wb', delete=False) as f:
            f.write(enc(CC_BLANK_METADATA))
            self.filename = f.name

        self.cdl = cdl_convert.parse_cc(self.</b></font>filename)

#==============================================================================


class TestParseCCNoSop(TestParseCCBasic):
    """Tests parsing a cc xml with no SOP data"""

    #==========================================================================
    # SETUP &amp; TEARDOWN
    #==========================================================================

    def setUp(self):
        self.id = "burp_200.x15"
        self.desc = []
        self.input_desc = None
        self.viewing_desc = None

        self.sop_node_desc = []
        self.slope = decimalize(1.0, 1.0, 1.0)
<a name="6"></a>        self.offset = decimalize(0.0, 0.0, 0.0)
        self.power = decimalize(1.0, 1.0, 1.0)
        self.sat_node_desc = ['I am a lovely sat node']
        self.sat = Decimal<font color="#8c8774"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>('1.01')

        # Build our cc
        with tempfile.NamedTemporaryFile(mode='wb', delete=False) as f:
            f.write(enc(CC_NO_SOP))
            self.filename = f.name

        self.cdl = cdl_convert.parse_cc(self.filename)

        # We need to call a SOP value to initialize the SOP subnode
        self.cdl.</b></font>slope

#==============================================================================


class TestParseCCNoSat(TestParseCCBasic):
    """Tests parsing a cc xml with no sat data"""

    #==========================================================================
    # SETUP &amp; TEARDOWN
    #==========================================================================

    def setUp(self):
        self.id = "burp_300.x35"
        self.desc = []
        self.input_desc = None
        self.viewing_desc = None

        self.sop_node_desc = []
        self.slope = decimalize(0.2331, 0.678669, 1.0758)
        self.offset = decimalize(0.031, 0.128, -0.096)
        self.power = decimalize(1.8, 0.97, 0.961)
        self.sat_node_desc = []
<a name="8"></a>        self.sat = Decimal('1.0')

        # Build our cc
        <font color="#c58917"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>with tempfile.NamedTemporaryFile(mode='wb', delete=False) as f:
            f.write(enc(CC_NO_SAT))
            self.filename = f.name

        self.cdl = cdl_convert.parse_cc(self.filename)

        # We need to call a SAT value to initialize the SAT subnode
        self.cdl.</b></font>sat

#==============================================================================


class TestParseCCExceptions(unittest.TestCase):
    """Tests parse_cc's response to some bad xml files"""

    #==========================================================================
    # SETUP &amp; TEARDOWN
    #==========================================================================

    def setUp(self):
        self.file = None

    #==========================================================================

    def tearDown(self):
        cdl_convert.reset_all()
        if self.file:
            os.remove(self.file)

    #==========================================================================
    # TESTS
    #==========================================================================

    def testNoId(self):
        """Tests that not finding an id attrib works"""

        # Build our cc
        with tempfile.NamedTemporaryFile(mode='wb', delete=False) as f:
            f.write(enc(CC_NO_ID))
            self.file = f.name

<a name="1"></a>        cc = cdl_convert.parse_cc(self.file)
        self.assertEqual(
            '001',
            cc<font color="#f63526"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>.id
        )

    #==========================================================================

    def testNotColorCorrection(self):
        """Tests that an XML with a root tag that's not ColorCorrection"""
        xml = "&lt;ColorBlurection&gt;\n&lt;/ColorBlurection&gt;\n"


        # Build our cc
        with tempfile.NamedTemporaryFile(mode='wb', delete=False) as f:
            f.write(enc(xml))
            self.file = f.name

        self.assertRaises(
            ValueError,
            cdl_convert.parse_cc,
            self.file
        )

    #==========================================================================

    def testEmptyColorCorrection(self):
        """Tests that an empty XML raises ValueError"""
        xml = '&lt;ColorCorrection id="hdjshd"&gt;\n&lt;/ColorCorrection&gt;\n'

        # Build our cc
        with tempfile.NamedTemporaryFile(mode='wb', delete=False) as f:
            f.write(enc(xml))
            self.file = f.name

        self.assertRaises(
            ValueError,
            cdl_convert.parse_cc,
            self.</b></font>file
        )

    #==========================================================================

    def testBlankId(self):
        """Tests that a blank id field ValueError"""

        # Build our cc
        with tempfile.NamedTemporaryFile(mode='wb', delete=False) as f:
            f.write(enc(CC_BLANK_ID))
            self.file = f.name

        cdl_convert.config.HALT_ON_ERROR = True

        self.assertRaises(
            ValueError,
            cdl_convert.parse_cc,
            self.file
        )

        cdl_convert.config.HALT_ON_ERROR = False

        cdl = cdl_convert.parse_cc(self.file)
<a name="15"></a>
        self.assertEqual(
            '001',
            cdl.<font color="#f52887"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>id
        )

    #==========================================================================

    def testNegativeSlope(self):
        """Tests that a negative slope raises a ValueError"""

        # Build our cc
        with tempfile.NamedTemporaryFile(mode='wb', delete=False) as f:
            f.write(enc(CC_NEGATIVE_SLOPE))
            self.file = f.name

        cdl_convert.</b></font>config.HALT_ON_ERROR = True

        self.assertRaises(
            ValueError,
            cdl_convert.parse_cc,
            self.file
        )

        cdl_convert.config.HALT_ON_ERROR = False
        cdl_convert.reset_all()

        cdl = cdl_convert.parse_cc(self.file)

        self.assertEqual(
            decimalize(0.0, 0.678669, 1.0758),
            cdl.slope,
        )

# write_cc ====================================================================


class TestWriteCCFull(unittest.TestCase):
    """Tests full writing of CC XML"""

    #==========================================================================
    # SETUP &amp; TEARDOWN
    #==========================================================================

    def setUp(self):
        cdl_convert.reset_all()
        self.cdl = cdl_convert.ColorCorrection("014_xf_seqGrade_v01", '')
        self.cdl.desc = [
            'CC description 1', 'CC description 2', 'CC description 3',
            'CC description 4', 'CC description 5'
        ]
        self.cdl.input_desc = 'Input Desc Text'
        self.cdl.viewing_desc = 'Viewing Desc Text'

        self.cdl.slope = (1.014, 1.0104, 0.62)
        self.cdl.offset = (-0.00315, -0.00124, 0.3103)
        self.cdl.power = (1.0, 0.9983, 1.0)
        self.cdl.sop_node.desc = [
            'Sop description 1', 'Sop description 2', 'Sop description 3'
<a name="12"></a>        ]

        self.cdl.sat = 1.09
        self.cdl.sat_node<font color="#571b7e"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>.desc = [
            'Sat description 1', 'Sat description 2'
        ]

        self.target_xml_root = enc(CC_FULL_WRITE)
        self.target_xml = enc('\n'.join(CC_FULL_WRITE.split('\n')[1:]))

<a name="0"></a>    #==========================================================================

    def</b></font> tearDown(self):
        cdl_convert<font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>.reset_all()

    #==========================================================================
    # TESTS
    #==========================================================================

    def test_root_xml(self):
        """Tests that root_xml returns the full XML as expected"""
        self.assertEqual(
            self.target_xml_root,
            self.cdl.xml_root
        )

    #==========================================================================

    def test_base_xml(self):
        """Tests that the xml atrib returns the XML minus root as expected"""
        self.assertEqual(
            self.target_xml,
            self.cdl.xml
        )

    #==========================================================================

    def test_element(self):
        """Tests that the element returned is an etree type"""
        self.assertEqual(
            'ColorCorrection',
            self.cdl.element.tag
        )

    #==========================================================================

    def test_write(self):
        """Tests writing the cc itself"""
        mockOpen = mock.mock_open()

        self.cdl._file_out = 'bobs_big_file.cc'

        with mock.patch(builtins + '.open', mockOpen, create=True):
            cdl_convert.write_cc(self.cdl)

        mockOpen.assert_called_once_with('bobs_big_file.cc', 'wb')

        mockOpen().write.assert_called_once_with(self.target_xml_root)


class TestWriteCCOdd(TestWriteCCFull):
    """Tests odd writing of CC XML"""

    #==========================================================================
    # SETUP &amp; TEARDOWN
    #==========================================================================

    def setUp(self):
        cdl_convert.reset_all(</b></font>)
        self.cdl = cdl_convert.ColorCorrection("f55.100", '')
        self.cdl.desc = [
            'Raised saturation1 a little!?! ag... \/Offset',
            'Raised saturation2 a little!?! ag... \/Offset',
        ]
        self.cdl.input_desc = 'METAL VIEWER!!! \/\/'
        self.cdl.viewing_desc = 'WOOD VIEWER!? ////'
<a name="16"></a>
        self.cdl.slope = (137829.329, 4327890.9833, 3489031.003)
        self.cdl.offset = (-3424.011, -342789423.013, -4238923.11)
        self<font color="#2981b2"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>.cdl.power = (3271893.993, .0000998, 0.0000000000000000113)
        self.cdl.sop_node.desc = [
            'Raised saturation a little!?! ag... \/Offset'
        ]

<a name="14"></a>        self.cdl.sat = 1798787.01
        self.cdl.</b></font>sat_node.desc = []

        self<font color="#842dce"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>.target_xml_root = enc(CC_ODD_WRITE)
        self.target_xml = enc('\n'.join(CC_ODD_WRITE.split('\n')[1:]))


class TestWriteCCNoSop(TestWriteCCFull):
    """Tests writing a CC XML with no SOP node"""

    #==========================================================================
    # SETUP &amp; TEARDOWN
    #==========================================================================

    def setUp(self):
        cdl_convert.</b></font>reset_all()
        self.cdl = cdl_convert.ColorCorrection("burp_200.x15", '')

<a name="13"></a>        self.cdl.sat = 1.0128109381
        self.cdl.sat_node.desc = ['I am a lovely sat node']

        self<font color="#3b9c9c"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>.target_xml_root = enc(CC_NO_SOP_WRITE)
        self.target_xml = enc('\n'.join(CC_NO_SOP_WRITE.split('\n')[1:]))


class TestWriteCCNoSat(TestWriteCCFull):
    """Tests writing a CC XML with no SAT node"""

    #==========================================================================
    # SETUP &amp; TEARDOWN
    #==========================================================================

    def setUp(self):
        cdl_convert.</b></font>reset_all()
        self.cdl = cdl_convert.ColorCorrection("burp_300.x35", '')

        self.cdl.slope = (1.233321, 0.678669, 1.0758)
<a name="17"></a>        self.cdl.offset = (0.031, 0.128, -0.096)
        self.cdl.power = (1.8, 0.97, 0.961)

        self<font color="#3090c7"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>.target_xml_root = enc(CC_NO_SAT_WRITE)
        self.target_xml = enc('\n'.join(CC_NO_SAT_WRITE.split('\n')[</b></font>1:]))

#==============================================================================
# FUNCTIONS
#==============================================================================


def decimalize(*args):
    """Converts a list of floats/ints to Decimal list"""
    return tuple([Decimal(str(i)) for i in args])

#==============================================================================
# RUNNER
#==============================================================================
if __name__ == '__main__':
    unittest.main()
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
