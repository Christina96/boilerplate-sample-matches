<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for brightcove.py &amp; iprima.py</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for brightcove.py &amp; iprima.py
      </h3>
<h1 align="center">
        8.5%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>brightcove.py (5.044136%)<th>iprima.py (27.39726%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(6-145)<td><a href="#" name="0">(2-67)</a><td align="center"><font color="#ff0000">25</font>
<tr onclick='openModal("#f63526")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f63526"><font color="#f63526">-</font><td><a href="#" name="1">(287-295)<td><a href="#" name="1">(79-95)</a><td align="center"><font color="#990000">15</font>
</td></td></a></td></td></tr></td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>brightcove.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 from __future__ import unicode_literals
2 <a name="0"></a>
3 import base64
4 import re
5 <font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>import struct
6 from .adobepass import AdobePassIE
7 from .common import InfoExtractor
8 from ..compat import (
9     compat_etree_fromstring,
10     compat_HTTPError,
11     compat_parse_qs,
12     compat_urllib_parse_urlparse,
13     compat_urlparse,
14     compat_xml_parse_error,
15 )
16 from ..utils import (
17     clean_html,
18     extract_attributes,
19     ExtractorError,
20     find_xpath_attr,
21     fix_xml_ampersands,
22     float_or_none,
23     int_or_none,
24     js_to_json,
25     mimetype2ext,
26     parse_iso8601,
27     smuggle_url,
28     str_or_none,
29     try_get,
30     unescapeHTML,
31     unsmuggle_url,
32     UnsupportedError,
33     update_url_query,
34     url_or_none,
35 )
36 class BrightcoveLegacyIE(InfoExtractor):
37     IE_NAME = 'brightcove:legacy'
38     _VALID_URL = r'(?:https?://.*brightcove\.com/(services|viewer).*?\?|brightcove:)(?P&lt;query&gt;.*)'
39     _TESTS = [
40         {
41             'url': 'http://c.brightcove.com/services/viewer/htmlFederated?playerID=1654948606001&amp;flashID=myExperience&amp;%40videoPlayer=2371591881001',
42             'md5': '5423e113865d26e40624dce2e4b45d95',
43             'note': 'Test Brightcove downloads and detection in GenericIE',
44             'info_dict': {
45                 'id': '2371591881001',
46                 'ext': 'mp4',
47                 'title': 'Xavier Sala i Martín: “Un banc que no presta és un banc zombi que no serveix per a res”',
48                 'uploader': '8TV',
49                 'description': 'md5:a950cc4285c43e44d763d036710cd9cd',
50                 'timestamp': 1368213670,
51                 'upload_date': '20130510',
52                 'uploader_id': '1589608506001',
53             },
54             'skip': 'The player has been deactivated by the content owner',
55         },
56         {
57             'url': 'http://c.brightcove.com/services/viewer/htmlFederated?playerID=1217746023001&amp;flashID=myPlayer&amp;%40videoPlayer=1785452137001',
58             'info_dict': {
59                 'id': '1785452137001',
60                 'ext': 'flv',
61                 'title': 'JVMLS 2012: Arrays 2.0 - Opportunities and Challenges',
62                 'description': 'John Rose speaks at the JVM Language Summit, August 1, 2012.',
63                 'uploader': 'Oracle',
64                 'timestamp': 1344975024,
65                 'upload_date': '20120814',
66                 'uploader_id': '1460825906',
67             },
68             'skip': 'video not playable',
69         },
70         {
71             'url': 'http://c.brightcove.com/services/viewer/federated_f9?&amp;playerID=1265504713001&amp;publisherID=AQ%7E%7E%2CAAABBzUwv1E%7E%2CxP-xFHVUstiMFlNYfvF4G9yFnNaqCw_9&amp;videoID=2750934548001',
72             'info_dict': {
73                 'id': '2750934548001',
74                 'ext': 'mp4',
75                 'title': 'This Bracelet Acts as a Personal Thermostat',
76                 'description': 'md5:547b78c64f4112766ccf4e151c20b6a0',
77                 'timestamp': 1382041798,
78                 'upload_date': '20131017',
79                 'uploader_id': '1130468786001',
80             },
81         },
82         {
83             'url': 'http://link.brightcove.com/services/player/bcpid756015033001?bckey=AQ~~,AAAApYJi_Ck~,GxhXCegT1Dp39ilhXuxMJxasUhVNZiil&amp;bctid=2878862109001',
84             'info_dict': {
85                 'id': '2878862109001',
86                 'ext': 'mp4',
87                 'title': 'Lost in Motion II',
88                 'description': 'md5:363109c02998fee92ec02211bd8000df',
89                 'uploader': 'National Ballet of Canada',
90             },
91             'skip': 'Video gone',
92         },
93         {
94             'url': 'http://c.brightcove.com/services/viewer/htmlFederated?%40videoPlayer=ref%3Aevent-stream-356&amp;linkBaseURL=http%3A%2F%2Fwww.redbull.com%2Fen%2Fbike%2Fvideos%2F1331655630249%2Freplay-uci-fort-william-2014-dh&amp;playerKey=AQ%7E%7E%2CAAAApYJ7UqE%7E%2Cxqr_zXk0I-zzNndy8NlHogrCb5QdyZRf&amp;playerID=1398061561001#__youtubedl_smuggle=%7B%22Referer%22%3A+%22http%3A%2F%2Fwww.redbull.com%2Fen%2Fbike%2Fstories%2F1331655643987%2Freplay-uci-dh-world-cup-2014-from-fort-william%22%7D',
95             'info_dict': {
96                 'id': '3750436379001',
97                 'ext': 'flv',
98                 'title': 'UCI MTB World Cup 2014: Fort William, UK - Downhill Finals',
99                 'uploader': 'RBTV Old (do not use)',
100                 'description': 'UCI MTB World Cup 2014: Fort William, UK - Downhill Finals',
101                 'timestamp': 1409122195,
102                 'upload_date': '20140827',
103                 'uploader_id': '710858724001',
104             },
105             'skip': 'Video gone',
106         },
107         {
108             'url': 'http://c.brightcove.com/services/viewer/htmlFederated?playerID=3550052898001&amp;playerKey=AQ%7E%7E%2CAAABmA9XpXk%7E%2C-Kp7jNgisre1fG5OdqpAFUTcs0lP_ZoL',
109             'info_dict': {
110                 'title': 'Sealife',
111                 'id': '3550319591001',
112             },
113             'playlist_mincount': 7,
114             'skip': 'Unsupported URL',
115         },
116         {
117             'url': 'http://c.brightcove.com/services/json/experience/runtime/?command=get_programming_for_experience&amp;playerKey=AQ%7E%7E,AAABXlLMdok%7E,NJ4EoMlZ4rZdx9eU1rkMVd8EaYPBBUlg',
118             'info_dict': {
119                 'id': '1522758701001',
120                 'title': 'Lesson 08',
121             },
122             'playlist_mincount': 10,
123             'skip': 'Unsupported URL',
124         },
125         {
126             'url'</b></font>: 'https://link.brightcove.com/services/player/bcpid1722935254001/?bctid=5360463607001&amp;autoStart=false&amp;secureConnections=true&amp;width=650&amp;height=350',
127             'only_matching': True,  # Tested in GenericIE
128         }
129     ]
130     @classmethod
131     def _build_brightcove_url(cls, object_str):
132         object_str = re.sub(r'(&lt;param(?:\s+[a-zA-Z0-9_]+="[^"]*")*)&gt;',
133                             lambda m: m.group(1) + '/&gt;', object_str)
134         object_str = object_str.replace('&lt;--', '&lt;!--')
135         object_str = re.sub(r'(&lt;object[^&gt;]*)(xmlns=".*?")', r'\1', object_str)
136         object_str = fix_xml_ampersands(object_str)
137         try:
138             object_doc = compat_etree_fromstring(object_str.encode('utf-8'))
139         except compat_xml_parse_error:
140             return
141         fv_el = find_xpath_attr(object_doc, './param', 'name', 'flashVars')
142         if fv_el is not None:
143             flashvars = dict(
144                 (k, v[0])
145                 for k, v in compat_parse_qs(fv_el.attrib['value']).items())
146         else:
147             flashvars = {}
148         data_url = object_doc.attrib.get('data', '')
149         data_url_params = compat_parse_qs(compat_urllib_parse_urlparse(data_url).query)
150         def find_param(name):
151             if name in flashvars:
152                 return flashvars[name]
153             node = find_xpath_attr(object_doc, './param', 'name', name)
154             if node is not None:
155                 return node.attrib['value']
156             return data_url_params.get(name)
157         params = {}
158         playerID = find_param('playerID') or find_param('playerId')
159         if playerID is None:
160             raise ExtractorError('Cannot find player ID')
161         params['playerID'] = playerID
162         playerKey = find_param('playerKey')
163         if playerKey is not None:
164             params['playerKey'] = playerKey
165         videoPlayer = find_param('@videoPlayer') or find_param('videoId') or find_param('videoID') or find_param('@videoList')
166         if videoPlayer is not None:
167             if isinstance(videoPlayer, list):
168                 videoPlayer = videoPlayer[0]
169             videoPlayer = videoPlayer.strip()
170             if not (re.match(
171                     r'^(?:\d+|[\da-fA-F]{8}-?[\da-fA-F]{4}-?[\da-fA-F]{4}-?[\da-fA-F]{4}-?[\da-fA-F]{12})$',
172                     videoPlayer) or videoPlayer.startswith('ref:')):
173                 return None
174             params['@videoPlayer'] = videoPlayer
175         linkBase = find_param('linkBaseURL')
176         if linkBase is not None:
177             params['linkBaseURL'] = linkBase
178         return cls._make_brightcove_url(params)
179     @classmethod
180     def _build_brightcove_url_from_js(cls, object_js):
181         m = re.search(
182             r'''(?x)customBC\.createVideo\(
183                 .*?                                                  # skipping width and height
184                 ["\'](?P&lt;playerID&gt;\d+)["\']\s*,\s*                   # playerID
185                 ["\'](?P&lt;playerKey&gt;AQ[^"\']{48})[^"\']*["\']\s*,\s*  # playerKey begins with AQ and is 50 characters
186                 ["\'](?P&lt;videoID&gt;\d+)["\']                           # @videoPlayer
187             ''', object_js)
188         if m:
189             return cls._make_brightcove_url(m.groupdict())
190     @classmethod
191     def _make_brightcove_url(cls, params):
192         return update_url_query(
193             'http://c.brightcove.com/services/viewer/htmlFederated', params)
194     @classmethod
195     def _extract_brightcove_url(cls, webpage):
196         urls = cls._extract_brightcove_urls(webpage)
197         return urls[0] if urls else None
198     @classmethod
199     def _extract_brightcove_urls(cls, webpage):
200         url_m = re.search(
201             r'''(?x)
202                 &lt;meta\s+
203                     (?:property|itemprop)=([\'"])(?:og:video|embedURL)\1[^&gt;]+
204                     content=([\'"])(?P&lt;url&gt;https?://(?:secure|c)\.brightcove.com/(?:(?!\2).)+)\2
205             ''', webpage)
206         if url_m:
207             url = unescapeHTML(url_m.group('url'))
208             if 'playerKey' in url or 'videoId' in url or 'idVideo' in url:
209                 return [url]
210         matches = re.findall(
211             r'''(?sx)&lt;object
212             (?:
213                 [^&gt;]+?class=[\'"][^&gt;]*?BrightcoveExperience.*?[\'"] |
214                 [^&gt;]*?&gt;\s*&lt;param\s+name="movie"\s+value="https?://[^/]*brightcove\.com/
215             ).+?&gt;\s*&lt;/object&gt;''',
216             webpage)
217         if matches:
218             return list(filter(None, [cls._build_brightcove_url(m) for m in matches]))
219         matches = re.findall(r'(customBC\.createVideo\(.+?\);)', webpage)
220         if matches:
221             return list(filter(None, [
222                 cls._build_brightcove_url_from_js(custom_bc)
223                 for custom_bc in matches]))
224         return [src for _, src in re.findall(
225 <a name="1"></a>            r'&lt;iframe[^&gt;]+src=([\'"])((?:https?:)?//link\.brightcove\.com/services/player/(?!\1).+)\1', webpage)]
226     def _real_extract(self, url):
227         url, smuggled_data = unsmuggle_url<font color="#f63526"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>(url, {})
228         url = re.sub(r'(?&lt;=[?&amp;])(videoI(d|D)|idVideo|bctid)', '%40videoPlayer', url)
229         url = re.sub(r'(?&lt;=[?&amp;])bckey', 'playerKey', url)
230         mobj = re.match(self._VALID_URL, url)
231         query_str = mobj.group('query')
232         query =</b></font> compat_urlparse.parse_qs(query_str)
233         videoPlayer = query.get('@videoPlayer')
234         if videoPlayer:
235             referer = query.get('linkBaseURL', [None])[0] or smuggled_data.get('Referer', url)
236             video_id = videoPlayer[0]
237             if 'playerID' not in query:
238                 mobj = re.search(r'/bcpid(\d+)', url)
239                 if mobj is not None:
240                     query['playerID'] = [mobj.group(1)]
241             publisher_id = query.get('publisherId')
242             if publisher_id and publisher_id[0].isdigit():
243                 publisher_id = publisher_id[0]
244             if not publisher_id:
245                 player_key = query.get('playerKey')
246                 if player_key and ',' in player_key[0]:
247                     player_key = player_key[0]
248                 else:
249                     player_id = query.get('playerID')
250                     if player_id and player_id[0].isdigit():
251                         headers = {}
252                         if referer:
253                             headers['Referer'] = referer
254                         player_page = self._download_webpage(
255                             'http://link.brightcove.com/services/player/bcpid' + player_id[0],
256                             video_id, headers=headers, fatal=False)
257                         if player_page:
258                             player_key = self._search_regex(
259                                 r'&lt;param\s+name="playerKey"\s+value="([\w~,-]+)"',
260                                 player_page, 'player key', fatal=False)
261                 if player_key:
262                     enc_pub_id = player_key.split(',')[1].replace('~', '=')
263                     publisher_id = struct.unpack('&gt;Q', base64.urlsafe_b64decode(enc_pub_id))[0]
264             if publisher_id:
265                 brightcove_new_url = 'http://players.brightcove.net/%s/default_default/index.html?videoId=%s' % (publisher_id, video_id)
266                 if referer:
267                     brightcove_new_url = smuggle_url(brightcove_new_url, {'referrer': referer})
268                 return self.url_result(brightcove_new_url, BrightcoveNewIE.ie_key(), video_id)
269         raise UnsupportedError(url)
270 class BrightcoveNewIE(AdobePassIE):
271     IE_NAME = 'brightcove:new'
272     _VALID_URL = r'https?://players\.brightcove\.net/(?P&lt;account_id&gt;\d+)/(?P&lt;player_id&gt;[^/]+)_(?P&lt;embed&gt;[^/]+)/index\.html\?.*(?P&lt;content_type&gt;video|playlist)Id=(?P&lt;video_id&gt;\d+|ref:[^&amp;]+)'
273     _TESTS = [{
274         'url': 'http://players.brightcove.net/929656772001/e41d32dc-ec74-459e-a845-6c69f7b724ea_default/index.html?videoId=4463358922001',
275         'md5': 'c8100925723840d4b0d243f7025703be',
276         'info_dict': {
277             'id': '4463358922001',
278             'ext': 'mp4',
279             'title': 'Meet the man behind Popcorn Time',
280             'description': 'md5:eac376a4fe366edc70279bfb681aea16',
281             'duration': 165.768,
282             'timestamp': 1441391203,
283             'upload_date': '20150904',
284             'uploader_id': '929656772001',
285             'formats': 'mincount:20',
286         },
287     }, {
288         'url': 'http://players.brightcove.net/4036320279001/5d112ed9-283f-485f-a7f9-33f42e8bc042_default/index.html?videoId=4279049078001',
289         'info_dict': {
290             'id': '4279049078001',
291             'ext': 'mp4',
292             'title': 'Titansgrave: Chapter 0',
293             'description': 'Titansgrave: Chapter 0',
294             'duration': 1242.058,
295             'timestamp': 1433556729,
296             'upload_date': '20150606',
297             'uploader_id': '4036320279001',
298             'formats': 'mincount:39',
299         },
300         'params': {
301             'skip_download': True,
302         }
303     }, {
304         'url': 'https://players.brightcove.net/1752604059001/S13cJdUBz_default/index.html?playlistId=5718313430001',
305         'info_dict': {
306             'id': '5718313430001',
307             'title': 'No Audio Playlist',
308         },
309         'playlist_count': 7,
310         'params': {
311             'skip_download': True,
312         }
313     }, {
314         'url': 'http://players.brightcove.net/5690807595001/HyZNerRl7_default/index.html?playlistId=5743160747001',
315         'only_matching': True,
316     }, {
317         'url': 'http://players.brightcove.net/3910869709001/21519b5c-4b3b-4363-accb-bdc8f358f823_default/index.html?videoId=ref:7069442',
318         'only_matching': True,
319     }, {
320         'url': 'http://players.brightcove.net/710858724001/default_default/index.html?videoId=ref:event-stream-356',
321         'only_matching': True,
322     }, {
323         'url': 'http://players.brightcove.net/1305187701/c832abfb-641b-44eb-9da0-2fe76786505f_default/index.html?videoId=4377407326001',
324         'only_matching': True,
325     }]
326     @staticmethod
327     def _extract_url(ie, webpage):
328         urls = BrightcoveNewIE._extract_urls(ie, webpage)
329         return urls[0] if urls else None
330     @staticmethod
331     def _extract_urls(ie, webpage):
332         entries = []
333         for _, url in re.findall(
334                 r'&lt;iframe[^&gt;]+src=(["\'])((?:https?:)?//players\.brightcove\.net/\d+/[^/]+/index\.html.+?)\1', webpage):
335             entries.append(url if url.startswith('http') else 'http:' + url)
336         for video, script_tag, account_id, player_id, embed in re.findall(
337                 r'''(?isx)
338                     (&lt;video(?:-js)?\s+[^&gt;]*\bdata-video-id\s*=\s*['"]?[^&gt;]+&gt;)
339                     (?:.*?
340                         (&lt;script[^&gt;]+
341                             src=["\'](?:https?:)?//players\.brightcove\.net/
342                             (\d+)/([^/]+)_([^/]+)/index(?:\.min)?\.js
343                         )
344                     )?
345 <font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>from __future__ import unicode_literals
346 import re
347 import time
348 from .common import InfoExtractor
349 from ..utils import (
350     determine_ext,
351     js_to_json,
352 )
353 class IPrimaIE(InfoExtractor):
354     _VALID_URL = r'https?://(?:[^/]+)\.iprima\.cz/(?:[^/]+/)*(?P&lt;id&gt;[^/?#&amp;]+)'
355     _GEO_BYPASS = False
356     _TESTS = [{
357         'url': 'https://prima.iprima.cz/particka/92-epizoda',
358         'info_dict': {
359             'id': 'p51388',
360             'ext': 'mp4',
361             'title': 'Partička (92)',
362             'description': 'md5:859d53beae4609e6dd7796413f1b6cac',
363         },
364         'params': {
365             'skip_download': True,  # m3u8 download
366         },
367     }, {
368         'url': 'https://cnn.iprima.cz/videa/70-epizoda',
369         'info_dict': {
370             'id': 'p681554',
371             'ext': 'mp4',
372             'title': 'HLAVNÍ ZPRÁVY 3.5.2020',
373         },
374         'params': {
375             'skip_download': True,  # m3u8 download
376         },
377     }, {
378         'url': 'http://play.iprima.cz/particka/particka-92',
379         'only_matching': True,
380     }, {
381         'url': 'http://play.iprima.cz/closer-nove-pripady/closer-nove-pripady-iv-1',
382         'only_matching': True,
383     }, {
384         'url': 'https://prima.iprima.cz/my-little-pony/mapa-znameni-2-2',
385         'only_matching': True,
386     }, {
387         'url': 'https://prima.iprima.cz/porady/jak-se-stavi-sen/rodina-rathousova-praha',
388         'only_matching': True,
389     }, {
390         'url': 'http://www.iprima.cz/filmy/desne-rande',
391         'only_matching': True,
392     }, {
393         'url': 'https://zoom.iprima.cz/10-nejvetsich-tajemstvi-zahad/posvatna-mista-a-stavby',
394         'only_matching': True,
395     }, {
396         'url': 'https://krimi.iprima.cz/mraz-0/sebevrazdy',
397         'only_matching': True,
398     }, {
399         'url': 'https://cool.iprima.cz/derava-silnice-nevadi',
400         'only_matching': True,
401     }, {
402         'url'</b></font>: 'https://love.iprima.cz/laska-az-za-hrob/slib-dany-bratrovi',
403         'only_matching': True,
404     }, {
405         'url': 'https://autosalon.iprima.cz/motorsport/7-epizoda-1',
406         'only_matching': True,
407     }]
408     def _real_extract(self, url):
409         video_id = self._match_id(url)
410 <a name="1"></a>
411         self._set_cookie('play.iprima.cz', 'ott_adult_confirmed', '1')
412         webpage = self._download_webpage<font color="#f63526"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>(url, video_id)
413         title = self._og_search_title(
414             webpage, default=None) or self._search_regex(
415             r'&lt;h1&gt;([^&lt;]+)', webpage, 'title')
416         video_id = self._search_regex(
417             (r'&lt;iframe[^&gt;]+\bsrc=["\'](?:https?:)?//(?:api\.play-backend\.iprima\.cz/prehravac/embedded|prima\.iprima\.cz/[^/]+/[^/]+)\?.*?\bid=(p\d+)',
418              r'data-product="([^"]+)"&gt;',
419              r'id=["\']player-(p\d+)"',
420              r'playerId\s*:\s*["\']player-(p\d+)',
421              r'\bvideos\s*=\s*["\'](p\d+)'),
422             webpage, 'real id')
423         playerpage = self._download_webpage(
424             'http://play.iprima.cz/prehravac/init',
425             video_id, note=</b></font>'Downloading player', query={
426                 '_infuse': 1,
427                 '_ts': round(time.time()),
428                 'productId': video_id,
429             }, headers={'Referer': url})
430         formats = []
431         def extract_formats(format_url, format_key=None, lang=None):
432             ext = determine_ext(format_url)
433             new_formats = []
434             if format_key == 'hls' or ext == 'm3u8':
435                 new_formats = self._extract_m3u8_formats(
436                     format_url, video_id, 'mp4', entry_protocol='m3u8_native',
437                     m3u8_id='hls', fatal=False)
438             elif format_key == 'dash' or ext == 'mpd':
439                 return
440                 new_formats = self._extract_mpd_formats(
441                     format_url, video_id, mpd_id='dash', fatal=False)
442             if lang:
443                 for f in new_formats:
444                     if not f.get('language'):
445                         f['language'] = lang
446             formats.extend(new_formats)
447         options = self._parse_json(
448             self._search_regex(
449                 r'(?s)(?:TDIPlayerOptions|playerOptions)\s*=\s*({.+?});\s*\]\]',
450                 playerpage, 'player options', default='{}'),
451             video_id, transform_source=js_to_json, fatal=False)
452         if options:
453             for key, tracks in options.get('tracks', {}).items():
454                 if not isinstance(tracks, list):
455                     continue
456                 for track in tracks:
457                     src = track.get('src')
458                     if src:
459                         extract_formats(src, key.lower(), track.get('lang'))
460         if not formats:
461             for _, src in re.findall(r'src["\']\s*:\s*(["\'])(.+?)\1', playerpage):
462                 extract_formats(src)
463         if not formats and '&gt;GEO_IP_NOT_ALLOWED&lt;' in playerpage:
464             self.raise_geo_restricted(countries=['CZ'])
465         self._sort_formats(formats)
466         return {
467             'id': video_id,
468             'title': title,
469             'thumbnail': self._og_search_thumbnail(webpage, default=None),
470             'formats': formats,
471             'description': self._og_search_description(webpage, default=None),
472         }
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
