<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for test_linux_lvm.py &amp; test_useradd_1.py</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for test_linux_lvm.py &amp; test_useradd_1.py
      </h3>
<h1 align="center">
        11.6%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>test_linux_lvm.py (14.375%)<th>test_useradd_1.py (9.808103%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(119-125)<td><a href="#" name="0">(204-210)</a><td align="center"><font color="#ff0000">27</font>
<tr onclick='openModal("#f63526")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f63526"><font color="#f63526">-</font><td><a href="#" name="1">(61-67)<td><a href="#" name="1">(56-62)</a><td align="center"><font color="#ff0000">27</font>
<tr onclick='openModal("#980517")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#980517"><font color="#980517">-</font><td><a href="#" name="2">(266-273)<td><a href="#" name="2">(240-249)</a><td align="center"><font color="#7a0000">13</font>
<tr onclick='openModal("#53858b")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#53858b"><font color="#53858b">-</font><td><a href="#" name="3">(165-170)<td><a href="#" name="3">(220-224)</a><td align="center"><font color="#7a0000">13</font>
<tr onclick='openModal("#6cc417")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#6cc417"><font color="#6cc417">-</font><td><a href="#" name="4">(370-379)<td><a href="#" name="4">(121-131)</a><td align="center"><font color="#710000">12</font>
</td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>test_linux_lvm.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 import os.path
2 import salt.modules.linux_lvm as linux_lvm
3 from tests.support.mixins import LoaderModuleMockMixin
4 from tests.support.mock import MagicMock, patch
5 from tests.support.unit import TestCase
6 class LinuxLVMTestCase(TestCase, LoaderModuleMockMixin):
7     def setup_loader_modules(self):
8         return {linux_lvm: {}}
9     def test_version(self):
10         mock = MagicMock(
11             return_value=(
12                 "  LVM version:     2.02.168(2) (2016-11-30)\n"
13                 "  Library version: 1.03.01 (2016-11-30)\n"
14                 "  Driver version:  4.35.0\n"
15             )
16         )
17         with patch.dict(linux_lvm.__salt__, {"cmd.run": mock}):
18             self.assertEqual(linux_lvm.version(), "2.02.168(2) (2016-11-30)")
19     def test_fullversion(self):
20         mock = MagicMock(
21             return_value=(
22                 "  LVM version:     2.02.168(2) (2016-11-30)\n"
23                 "  Library version: 1.03.01 (2016-11-30)\n"
24                 "  Driver version:  4.35.0\n"
25             )
26         )
27         with patch.dict(linux_lvm.__salt__, {"cmd.run": mock}):
28             self.assertDictEqual(
29                 linux_lvm.fullversion(),
30                 {
31                     "LVM version": "2.02.168(2) (2016-11-30)",
32                     "Library version": "1.03.01 (2016-11-30)",
33                     "Driver version": "4.35.0",
34                 },
35             )
36     def test_pvdisplay(self):
37 <a name="1"></a>        """
38         Tests information about the physical volume(s)
39         mock <font color="#f63526"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>= MagicMock(return_value={"retcode": 1})
40         with patch.dict(linux_lvm.__salt__, {"cmd.run_all": mock}):
41             self.assertDictEqual(linux_lvm.pvdisplay(), {})
42         mock = MagicMock(return_value={"retcode": 1})
43         with patch.dict(linux_lvm.__salt__, {"cmd.run_all": mock}):
44             self.assertDictEqual(linux_lvm.pvdisplay(</b></font>quiet=True), {})
45             mock.assert_called_with(
46                 ["pvdisplay", "-c"], ignore_retcode=True, python_shell=False
47             )
48         mock = MagicMock(return_value={"retcode": 0, "stdout": "A:B:C:D:E:F:G:H:I:J:K"})
49         with patch.dict(linux_lvm.__salt__, {"cmd.run_all": mock}):
50             self.assertDictEqual(
51                 linux_lvm.pvdisplay(),
52                 {
53                     "A": {
54                         "Allocated Physical Extents": "K",
55                         "Current Logical Volumes Here": "G",
56                         "Free Physical Extents": "J",
57                         "Internal Physical Volume Number": "D",
58                         "Physical Extent Size (kB)": "H",
59                         "Physical Volume (not) Allocatable": "F",
60                         "Physical Volume Device": "A",
61                         "Physical Volume Size (kB)": "C",
62                         "Physical Volume Status": "E",
63                         "Total Physical Extents": "I",
64                         "Volume Group Name": "B",
65                     }
66                 },
67             )
68             mockpath = MagicMock(return_value="Z")
69             with patch.object(os.path, "realpath", mockpath):
70                 self.assertDictEqual(
71                     linux_lvm.pvdisplay(real=True),
72                     {
73                         "Z": {
74                             "Allocated Physical Extents": "K",
75                             "Current Logical Volumes Here": "G",
76                             "Free Physical Extents": "J",
77                             "Internal Physical Volume Number": "D",
78                             "Physical Extent Size (kB)": "H",
79                             "Physical Volume (not) Allocatable": "F",
80                             "Physical Volume Device": "A",
81                             "Physical Volume Size (kB)": "C",
82                             "Physical Volume Status": "E",
83                             "Real Physical Volume Device": "Z",
84                             "Total Physical Extents": "I",
85                             "Volume Group Name": "B",
86                         }
87                     },
88                 )
89     def test_vgdisplay(self):
90 <a name="0"></a>        """
91         Tests information about the volume group(s)
92         mock <font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>= MagicMock(return_value={"retcode": 1})
93         with patch.dict(linux_lvm.__salt__, {"cmd.run_all": mock}):
94             self.assertDictEqual(linux_lvm.vgdisplay(), {})
95         mock = MagicMock(return_value={"retcode": 1})
96         with patch.dict(linux_lvm.__salt__, {"cmd.run_all": mock}):
97             self.assertDictEqual(linux_lvm.vgdisplay(</b></font>quiet=True), {})
98             mock.assert_called_with(
99                 ["vgdisplay", "-c"], ignore_retcode=True, python_shell=False
100             )
101         mock = MagicMock(
102             return_value={"retcode": 0, "stdout": "A:B:C:D:E:F:G:H:I:J:K:L:M:N:O:P:Q"}
103         )
104         with patch.dict(linux_lvm.__salt__, {"cmd.run_all": mock}):
105             self.assertDictEqual(
106                 linux_lvm.vgdisplay(),
107                 {
108                     "A": {
109                         "Actual Physical Volumes": "K",
110                         "Allocated Physical Extents": "O",
111                         "Current Logical Volumes": "F",
112                         "Current Physical Volumes": "J",
113                         "Free Physical Extents": "P",
114                         "Internal Volume Group Number": "D",
115                         "Maximum Logical Volume Size": "H",
116                         "Maximum Logical Volumes": "E",
117                         "Maximum Physical Volumes": "I",
118                         "Open Logical Volumes": "G",
119                         "Physical Extent Size (kB)": "M",
120                         "Total Physical Extents": "N",
121                         "UUID": "Q",
122                         "Volume Group Access": "B",
123                         "Volume Group Name": "A",
124                         "Volume Group Size (kB)": "L",
125                         "Volume Group Status": "C",
126                     }
127                 },
128             )
129     def test_lvdisplay(self):
130             self<font color="#53858b"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>.assertDictEqual(linux_lvm.lvdisplay(), {})
131         mock = MagicMock(
132             return_value={"retcode": 0, "stdout": "A:B:C:D:E:F:G:H:I:J:K:L:M"}
133         )
134         with patch.dict(linux_lvm.</b></font>__salt__, {"cmd.run_all": mock}):
135             self.assertDictEqual(
136                 linux_lvm.lvdisplay(),
137                 {
138                     "A": {
139                         "Allocated Logical Extents": "I",
140                         "Allocation Policy": "J",
141                         "Current Logical Extents Associated": "H",
142                         "Internal Logical Volume Number": "E",
143                         "Logical Volume Access": "C",
144                         "Logical Volume Name": "A",
145                         "Logical Volume Size": "G",
146                         "Logical Volume Status": "D",
147                         "Major Device Number": "L",
148                         "Minor Device Number": "M",
149                         "Open Logical Volumes": "F",
150                         "Read Ahead Sectors": "K",
151                         "Volume Group Name": "B",
152                     }
153                 },
154             )
155     def test_pvcreate(self):
156         self.assertEqual(
157             linux_lvm.pvcreate(""), "Error: at least one device is required"
158         )
159         self.assertEqual(linux_lvm.pvcreate("A"), "A does not exist")
160         pvdisplay = MagicMock(side_effect=[False, True])
161         with patch("salt.modules.linux_lvm.pvdisplay", pvdisplay):
162             with patch.object(os.path, "exists", return_value=True):
163                 ret = {
164                     "stdout": "saltines",
165                     "stderr": "cheese",
166                     "retcode": 0,
167                     "pid": "1337",
168                 }
169                 mock = MagicMock(return_value=ret)
170                 with patch.dict(linux_lvm.__salt__, {"cmd.run_all": mock}):
171                     self.assertEqual(linux_lvm.pvcreate("A", metadatasize=1000), True)
172     def test_pvcreate_existing_pvs(self):
173         pvdisplay = MagicMock(return_value=True)
174         with patch("salt.modules.linux_lvm.pvdisplay", pvdisplay):
175             with patch.object(os.path, "exists", return_value=True):
176                 ret = {
177                     "stdout": "saltines",
178                     "stderr": "cheese",
179                     "retcode": 0,
180                     "pid": "1337",
181                 }
182                 cmd_mock = MagicMock(return_value=ret)
183                 with patch.dict(linux_lvm.__salt__, {"cmd.run_all": cmd_mock}):
184                     self.assertEqual(linux_lvm.pvcreate("A", metadatasize=1000), True)
185                     self.assertTrue(cmd_mock.call_count == 0)
186     def test_pvremove_not_pv(self):
187         pvdisplay = MagicMock(return_value=False)
188         with patch("salt.modules.linux_lvm.pvdisplay", pvdisplay):
189             self.assertEqual(
190                 linux_lvm.pvremove("A", override=False), "A is not a physical volume"
191             )
192         pvdisplay = MagicMock(return_value=False)
193         with patch("salt.modules.linux_lvm.pvdisplay", pvdisplay):
194             self.assertEqual(linux_lvm.pvremove("A"), True)
195     def test_pvremove(self):
196         pvdisplay = MagicMock(return_value=False)
197         with patch("salt.modules.linux_lvm.pvdisplay", pvdisplay):
198             mock = MagicMock(return_value=True)
199             with patch.dict(linux_lvm.__salt__, {"lvm.pvdisplay": mock}):
200                 ret = {
201                     "stdout": "saltines",
202                     "stderr": "cheese",
203                     "retcode": 0,
204                     "pid": "1337",
205 <a name="2"></a>                }
206                 mock = MagicMock(return_value=ret)
207                 with patch.dict(linux_lvm.__salt__, {"cmd.run_all": mock}):
208                     self<font color="#980517"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>.assertEqual(linux_lvm.pvremove("A"), True)
209     def test_pvresize_not_pv(self):
210         pvdisplay = MagicMock(return_value=False)
211         with</b></font> patch("salt.modules.linux_lvm.pvdisplay", pvdisplay):
212             self.assertEqual(
213                 linux_lvm.pvresize("A", override=False), "A is not a physical volume"
214             )
215         pvdisplay = MagicMock(return_value=False)
216         with patch("salt.modules.linux_lvm.pvdisplay", pvdisplay):
217             self.assertEqual(linux_lvm.pvresize("A"), True)
218     def test_pvresize(self):
219         pvdisplay = MagicMock(return_value=False)
220         with patch("salt.modules.linux_lvm.pvdisplay", pvdisplay):
221             mock = MagicMock(return_value=True)
222             with patch.dict(linux_lvm.__salt__, {"lvm.pvdisplay": mock}):
223                 ret = {
224                     "stdout": "saltines",
225                     "stderr": "cheese",
226                     "retcode": 0,
227                     "pid": "1337",
228                 }
229                 mock = MagicMock(return_value=ret)
230                 with patch.dict(linux_lvm.__salt__, {"cmd.run_all": mock}):
231                     self.assertEqual(linux_lvm.pvresize("A"), True)
232     def test_vgcreate(self):
233         self.assertEqual(
234             linux_lvm.vgcreate("", ""), "Error: vgname and device(s) are both required"
235         )
236         mock = MagicMock(return_value={"retcode": 0, "stderr": ""})
237         with patch.dict(linux_lvm.__salt__, {"cmd.run_all": mock}):
238             with patch.object(linux_lvm, "vgdisplay", return_value={}):
239                 self.assertDictEqual(
240                     linux_lvm.vgcreate("fakevg", "B"),
241                     {
242                         "Output from vgcreate": (
243                             'Volume group "fakevg" successfully created'
244                         )
245                     },
246                 )
247     def test_vgextend(self):
248         self.assertEqual(
249             linux_lvm.vgextend("", ""), "Error: vgname and device(s) are both required"
250         )
251         mock = MagicMock(return_value={"retcode": 0, "stderr": ""})
252         with patch.dict(linux_lvm.__salt__, {"cmd.run_all": mock}):
253             with patch.object(linux_lvm, "vgdisplay", return_value={}):
254                 self.assertDictEqual(
255                     linux_lvm.vgextend("fakevg", "B"),
256                     {
257                         "Output from vgextend": (
258                             'Volume group "fakevg" successfully extended'
259                         )
260                     },
261                 )
262     def test_lvcreate(self):
263         self.assertEqual(
264             linux_lvm.lvcreate(None, None, 1, 1),
265             "Error: Please specify only one of size or extents",
266         )
267         self.assertEqual(
268             linux_lvm.lvcreate(None, None, None, None),
269             "Error: Either size or extents must be specified",
270         )
271         self.assertEqual(
272             linux_lvm.lvcreate(None, None, thinvolume=True, thinpool=True),
273             "Error: Please set only one of thinvolume or thinpool to True",
274         )
275         self.assertEqual(
276             linux_lvm.lvcreate(None, None, thinvolume=True, extents=1),
277             "Error: Thin volume size cannot be specified as extents",
278         )
279         mock = MagicMock(return_value={"retcode": 0, "stderr": ""})
280         with patch.dict(linux_lvm.__salt__, {"cmd.run_all": mock}):
281 <a name="4"></a>            with patch.object(linux_lvm, "lvdisplay", return_value={}):
282                 self.assertDictEqual(
283                     linux_lvm.lvcreate(None, None, None, 1),
284                     {"<font color="#6cc417"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>Output from lvcreate": 'Logical volume "None" created.'},
285                 )
286     def test_lvcreate_with_force(self):
287         mock = MagicMock(return_value={"retcode": 0, "stderr": ""})
288         with patch.dict(linux_lvm.</b></font>__salt__, {"cmd.run_all": mock}):
289             with patch.object(linux_lvm, "lvdisplay", return_value={}):
290                 self.assertDictEqual(
291                     linux_lvm.lvcreate(None, None, None, 1, force=True),
292                     {"Output from lvcreate": 'Logical volume "None" created.'},
293                 )
294     def test_lvcreate_extra_arguments_no_parameter(self):
295         extra_args = {
296             "nosync": None,
297             "noudevsync": None,
298             "ignoremonitoring": None,
299             "thin": None,
300         }
301         mock = MagicMock(return_value={"retcode": 0, "stderr": ""})
302         with patch.dict(linux_lvm.__salt__, {"cmd.run_all": mock}):
303             with patch.object(linux_lvm, "lvdisplay", return_value={}):
304                 self.assertDictEqual(
305                     linux_lvm.lvcreate(None, None, None, 1, **extra_args),
306                     {"Output from lvcreate": 'Logical volume "None" created.'},
307                 )
308         expected_args = ["--{}".format(arg) for arg in extra_args]
309         processed_extra_args = mock.call_args.args[0][-(len(extra_args) + 1) : -1]
310         self.assertTrue(all([arg in expected_args for arg in processed_extra_args]))
311     def test_lvcreate_invalid_extra_parameter(self):
312         invalid_parameter = {"foo": "bar"}
313         mock = MagicMock(return_value={"retcode": 0, "stderr": ""})
314         with patch.dict(linux_lvm.__salt__, {"cmd.run_all": mock}):
315             with patch.object(linux_lvm, "lvdisplay", return_value={}):
316                 self.assertDictEqual(
317                     linux_lvm.lvcreate(None, None, None, 1, **invalid_parameter),
318                     {"Output from lvcreate": 'Logical volume "None" created.'},
319                 )
320         processed_command = mock.call_args.args[0]
321         self.assertFalse("--foo" in processed_command)
322     def test_vgremove(self):
323         mock = MagicMock(
324             return_value={
325                 "retcode": 0,
326                 "stdout": '  Volume group "fakevg" successfully removed',
327             }
328         )
329         with patch.dict(linux_lvm.__salt__, {"cmd.run_all": mock}):
330             self.assertEqual(
331                 linux_lvm.vgremove("fakevg"),
332                 'Volume group "fakevg" successfully removed',
333             )
334     def test_lvremove(self):
335         mock = MagicMock(
336             return_value={
337                 "retcode": 0,
338                 "stdout": '  Logical volume "lvtest" successfully removed',
339             }
340         )
341         with patch.dict(linux_lvm.__salt__, {"cmd.run_all": mock}):
342             self.assertEqual(
343                 linux_lvm.lvremove("fakelv", "fakevg"),
344                 'Logical volume "fakelv" successfully removed',
345             )
346     def test_lvresize(self):
347         self.assertEqual(linux_lvm.lvresize(1, None, 1), {})
348         self.assertEqual(linux_lvm.lvresize(None, None, None), {})
349         mock = MagicMock(return_value={"retcode": 0, "stderr": ""})
350         with patch.dict(linux_lvm.__salt__, {"cmd.run_all": mock}):
351             self.assertDictEqual(
352                 linux_lvm.lvresize(12, "/dev/fakevg/fakelv"),
353                 {
354                     "Output from lvresize": (
355                         'Logical volume "/dev/fakevg/fakelv" successfully resized.'
356                     )
357                 },
358             )
359     def test_lvextend(self):
360         self.assertEqual(linux_lvm.lvextend(1, None, 1), {})
361         self.assertEqual(linux_lvm.lvextend(None, None, None), {})
362         mock = MagicMock(return_value={"retcode": 0, "stderr": ""})
363         with patch.dict(linux_lvm.__salt__, {"cmd.run_all": mock}):
364             self.assertDictEqual(
365                 linux_lvm.lvextend(12, "/dev/fakevg/fakelv"),
366                 {
367                     "Output from lvextend": (
368                         'Logical volume "/dev/fakevg/fakelv" successfully extended.'
369                     )
370                 },
371             )
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>test_useradd_1.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 import salt.modules.useradd as useradd
2 from salt.exceptions import CommandExecutionError
3 from tests.support.mixins import LoaderModuleMockMixin
4 from tests.support.mock import MagicMock, patch
5 from tests.support.unit import TestCase, skipIf
6 try:
7     import pwd
8     HAS_PWD = True
9 except ImportError:
10     HAS_PWD = False
11 class UserAddTestCase(TestCase, LoaderModuleMockMixin):
12     def setup_loader_modules(self):
13         return {useradd: {}}
14     @classmethod
15     def setUpClass(cls):
16         cls.mock_pwall = {
17             "gid": 0,
18             "groups": ["root"],
19             "home": "/root",
20             "name": "root",
21             "passwd": "x",
22             "shell": "/bin/bash",
23             "uid": 0,
24             "fullname": "root",
25             "roomnumber": "",
26             "workphone": "",
27             "homephone": "",
28             "other": "",
29         }
30     @classmethod
31     def tearDownClass(cls):
32         del cls.mock_pwall
33     def test_add(self):
34         with patch.dict(useradd.__grains__, {"kernel": "OpenBSD"}):
35             mock <font color="#f63526"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>= MagicMock(return_value={"retcode": 0})
36             with patch.dict(useradd.__salt__, {"cmd.run_all": mock}):
37                 self.assertTrue(useradd.add("Salt"))
38             mock = MagicMock(return_value={"retcode": 1})
39             with patch.dict(useradd.__salt__, {"cmd.run_all": mock}):
40                 self.assertFalse(useradd.add(</b></font>"Salt"))
41     @skipIf(HAS_PWD is False, "The pwd module is not available")
42     def test_getent(self):
43         with patch("salt.modules.useradd.__context__", MagicMock(return_value="Salt")):
44             self.assertTrue(useradd.getent())
45     @skipIf(HAS_PWD is False, "The pwd module is not available")
46     def test_getent_user(self):
47         with patch("pwd.getpwall", MagicMock(return_value=[""])):
48             ret = [
49                 {
50                     "gid": 0,
51                     "groups": ["root"],
52                     "home": "/root",
53                     "name": "root",
54                     "passwd": "x",
55                     "shell": "/bin/bash",
56                     "uid": 0,
57                     "fullname": "root",
58                     "roomnumber": "",
59                     "workphone": "",
60                     "homephone": "",
61                     "other": "",
62                 }
63             ]
64             with patch(
65                 "salt.modules.useradd._format_info",
66                 MagicMock(return_value=self.mock_pwall),
67             ):
68                 self.assertEqual(useradd.getent(), ret)
69     def test_chuid(self):
70         mock = MagicMock(return_value={"uid": 11})
71         with patch.object(useradd, "info", mock):
72             self.assertTrue(useradd.chuid("name", 11))
73         mock_run = MagicMock(return_value=None)
74         with patch.dict(useradd.__salt__, {"cmd.run": mock_run}):
75             mock = MagicMock(side_effect=[{"uid": 11}, {"uid": 11}])
76             with patch.object(useradd, "info", mock):
77                 self.assertFalse(useradd.chuid("name", 22))
78 <a name="4"></a>        with patch.dict(useradd.__salt__, {"cmd.run": mock_run}):
79             mock = MagicMock(side_effect=[{"uid": 11}, {"uid": 22}])
80             with patch.object(useradd, "info", mock):
81                 self.assertTrue(useradd.chuid(<font color="#6cc417"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>"name", 11))
82     def test_chgid(self):
83         mock = MagicMock(return_value={"gid": 11})
84         with patch.object(useradd, "info", mock):
85             self.</b></font>assertTrue(useradd.chgid("name", 11))
86         mock_run = MagicMock(return_value=None)
87         with patch.dict(useradd.__salt__, {"cmd.run": mock_run}):
88             mock = MagicMock(side_effect=[{"gid": 22}, {"gid": 22}])
89             with patch.object(useradd, "info", mock):
90                 self.assertFalse(useradd.chgid("name", 11))
91         with patch.dict(useradd.__salt__, {"cmd.run": mock_run}):
92             mock = MagicMock(side_effect=[{"gid": 11}, {"gid": 22}])
93             with patch.object(useradd, "info", mock):
94                 self.assertTrue(useradd.chgid("name", 11))
95     def test_chshell(self):
96         mock = MagicMock(return_value={"shell": "/bin/bash"})
97         with patch.object(useradd, "info", mock):
98             self.assertTrue(useradd.chshell("name", "/bin/bash"))
99         mock_run = MagicMock(return_value=None)
100         with patch.dict(useradd.__salt__, {"cmd.run": mock_run}):
101             mock = MagicMock(
102                 side_effect=[{"shell": "/bin/bash"}, {"shell": "/bin/bash"}]
103             )
104             with patch.object(useradd, "info", mock):
105                 self.assertFalse(useradd.chshell("name", "/usr/bash"))
106         with patch.dict(useradd.__salt__, {"cmd.run": mock_run}):
107             mock = MagicMock(
108                 side_effect=[{"shell": "/bin/bash"}, {"shell": "/usr/bash"}]
109             )
110             with patch.object(useradd, "info", mock):
111                 self.assertTrue(useradd.chshell("name", "/bin/bash"))
112     def test_chhome(self):
113         mock = MagicMock(return_value={"home": "/root"})
114         with patch.object(useradd, "info", mock):
115             self.assertTrue(useradd.chhome("name", "/root"))
116         mock = MagicMock(return_value=None)
117         with patch.dict(useradd.__salt__, {"cmd.run": mock}):
118             mock = MagicMock(side_effect=[{"home": "/root"}, {"home": "/root"}])
119             with patch.object(useradd, "info", mock):
120                 self.assertFalse(useradd.chhome("name", "/user"))
121         mock = MagicMock(return_value=None)
122         with patch.dict(useradd.__salt__, {"cmd.run": mock}):
123             mock = MagicMock(side_effect=[{"home": "/root"}, {"home": "/root"}])
124             with patch.object(useradd, "info", mock):
125                 self.assertTrue(useradd.chhome("name", "/root"))
126     def test_chgroups(self):
127         mock = MagicMock(return_value=["wheel", "root"])
128         with patch.object(useradd, "list_groups", mock):
129             self.assertTrue(useradd.chgroups("foo", "wheel,root"))
130 <a name="0"></a>        mock = MagicMock(return_value=["wheel", "root"])
131         with patch.object(useradd, "list_groups", mock):
132             with patch.dict(useradd.__grains__, {"kernel": "OpenBSD"}):
133                 mock_runall <font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>= MagicMock(return_value={"retcode": False, "stderr": ""})
134                 with patch.dict(useradd.__salt__, {"cmd.run_all": mock_runall}):
135                     self.assertTrue(useradd.chgroups("foo", "wheel,test,root"))
136                 mock_runall = MagicMock(return_value={"retcode": True, "stderr": ""})
137                 with patch.dict(useradd.__salt__, {"cmd.run_all": mock_runall}):
138                     self.assertFalse(useradd.chgroups(</b></font>"foo", "wheel,test,root"))
139     def test_chfullname(self):
140             self<font color="#53858b"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>.assertFalse(useradd.chfullname("Salt", "SaltStack"))
141         mock = MagicMock(return_value={"fullname": "SaltStack"})
142         with patch.object(useradd, "_get_gecos", mock):
143             self.</b></font>assertTrue(useradd.chfullname("Salt", "SaltStack"))
144         mock = MagicMock(return_value={"fullname": "SaltStack"})
145         with patch.object(useradd, "_get_gecos", mock):
146             mock = MagicMock(return_value=None)
147             with patch.dict(useradd.__salt__, {"cmd.run": mock}):
148                 mock = MagicMock(return_value={"fullname": "SaltStack2"})
149                 with patch.object(useradd, "info", mock):
150                     self.assertFalse(useradd.chfullname("Salt", "SaltStack1"))
151         mock = MagicMock(return_value={"fullname": "SaltStack2"})
152         with patch.object(useradd, "_get_gecos", mock):
153             mock = MagicMock(return_value=None)
154 <a name="2"></a>            with patch.dict(useradd.__salt__, {"cmd.run": mock}):
155                 mock = MagicMock(return_value={"fullname": "SaltStack2"})
156                 with patch.object(useradd, "info", mock):
157                     self<font color="#980517"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>.assertFalse(useradd.chfullname("Salt", "SaltStack1"))
158     def test_chroomnumber(self):
159         mock = MagicMock(return_value=False)
160         with</b></font> patch.object(useradd, "_get_gecos", mock):
161             self.assertFalse(useradd.chroomnumber("salt", 1))
162         mock = MagicMock(return_value={"roomnumber": "1"})
163         with patch.object(useradd, "_get_gecos", mock):
164             self.assertTrue(useradd.chroomnumber("salt", 1))
165         mock = MagicMock(return_value={"roomnumber": "2"})
166         with patch.object(useradd, "_get_gecos", mock):
167             mock = MagicMock(return_value=None)
168             with patch.dict(useradd.__salt__, {"cmd.run": mock}):
169                 mock = MagicMock(return_value={"roomnumber": "3"})
170                 with patch.object(useradd, "info", mock):
171                     self.assertFalse(useradd.chroomnumber("salt", 1))
172         mock = MagicMock(return_value={"roomnumber": "3"})
173         with patch.object(useradd, "_get_gecos", mock):
174             mock = MagicMock(return_value=None)
175             with patch.dict(useradd.__salt__, {"cmd.run": mock}):
176                 mock = MagicMock(return_value={"roomnumber": "3"})
177                 with patch.object(useradd, "info", mock):
178                     self.assertFalse(useradd.chroomnumber("salt", 1))
179     def test_chworkphone(self):
180         mock = MagicMock(return_value=False)
181         with patch.object(useradd, "_get_gecos", mock):
182             self.assertFalse(useradd.chworkphone("salt", 1))
183         mock = MagicMock(return_value={"workphone": "1"})
184         with patch.object(useradd, "_get_gecos", mock):
185             self.assertTrue(useradd.chworkphone("salt", 1))
186         mock = MagicMock(return_value={"workphone": "2"})
187         with patch.object(useradd, "_get_gecos", mock):
188             mock = MagicMock(return_value=None)
189             with patch.dict(useradd.__salt__, {"cmd.run": mock}):
190                 mock = MagicMock(return_value={"workphone": "3"})
191                 with patch.object(useradd, "info", mock):
192                     self.assertFalse(useradd.chworkphone("salt", 1))
193         mock = MagicMock(return_value={"workphone": "3"})
194         with patch.object(useradd, "_get_gecos", mock):
195             mock = MagicMock(return_value=None)
196             with patch.dict(useradd.__salt__, {"cmd.run": mock}):
197                 mock = MagicMock(return_value={"workphone": "3"})
198                 with patch.object(useradd, "info", mock):
199                     self.assertFalse(useradd.chworkphone("salt", 1))
200     def test_chhomephone(self):
201         mock = MagicMock(return_value=False)
202         with patch.object(useradd, "_get_gecos", mock):
203             self.assertFalse(useradd.chhomephone("salt", 1))
204         mock = MagicMock(return_value={"homephone": "1"})
205         with patch.object(useradd, "_get_gecos", mock):
206             self.assertTrue(useradd.chhomephone("salt", 1))
207         mock = MagicMock(return_value={"homephone": "2"})
208         with patch.object(useradd, "_get_gecos", mock):
209             mock = MagicMock(return_value=None)
210             with patch.dict(useradd.__salt__, {"cmd.run": mock}):
211                 mock = MagicMock(return_value={"homephone": "3"})
212                 with patch.object(useradd, "info", mock):
213                     self.assertFalse(useradd.chhomephone("salt", 1))
214         mock = MagicMock(return_value={"homephone": "3"})
215         with patch.object(useradd, "_get_gecos", mock):
216             mock = MagicMock(return_value=None)
217             with patch.dict(useradd.__salt__, {"cmd.run": mock}):
218                 mock = MagicMock(return_value={"homephone": "3"})
219                 with patch.object(useradd, "info", mock):
220                     self.assertFalse(useradd.chhomephone("salt", 1))
221     def test_chother(self):
222         mock = MagicMock(return_value=False)
223         with patch.object(useradd, "_get_gecos", mock):
224             self.assertFalse(useradd.chother("salt", 1))
225         mock = MagicMock(return_value={"other": "foobar"})
226         with patch.object(useradd, "_get_gecos", mock):
227             self.assertTrue(useradd.chother("salt", "foobar"))
228         mock = MagicMock(return_value={"other": "foobar2"})
229         with patch.object(useradd, "_get_gecos", mock):
230             mock = MagicMock(return_value=None)
231             with patch.dict(useradd.__salt__, {"cmd.run": mock}):
232                 mock = MagicMock(return_value={"other": "foobar3"})
233                 with patch.object(useradd, "info", mock):
234                     self.assertFalse(useradd.chother("salt", "foobar"))
235         mock = MagicMock(return_value={"other": "foobar3"})
236         with patch.object(useradd, "_get_gecos", mock):
237             mock = MagicMock(return_value=None)
238             with patch.dict(useradd.__salt__, {"cmd.run": mock}):
239                 mock = MagicMock(return_value={"other": "foobar3"})
240                 with patch.object(useradd, "info", mock):
241                     self.assertFalse(useradd.chother("salt", "foobar"))
242     @skipIf(HAS_PWD is False, "The pwd module is not available")
243     def test_info(self):
244         self.assertEqual(useradd.info("username-that-does-not-exist"), {})
245         mock = MagicMock(
246             return_value=pwd.struct_passwd(
247                 (
248                     "_TEST_GROUP",
249                     "*",
250                     83,
251                     83,
252                     "AMaViS Daemon",
253                     "/var/virusmails",
254                     "/usr/bin/false",
255                 )
256             )
257         )
258         with patch.object(pwd, "getpwnam", mock):
259             self.assertEqual(
260                 useradd.info("username-that-does-not-exist")["name"], "_TEST_GROUP"
261             )
262     def test_list_groups(self):
263         with patch("salt.utils.user.get_group_list", MagicMock(return_value="Salt")):
264             self.assertEqual(useradd.list_groups("name"), "Salt")
265     @skipIf(HAS_PWD is False, "The pwd module is not available")
266     def test_list_users(self):
267         self.assertTrue(useradd.list_users())
268     def test_rename(self):
269         mock = MagicMock(return_value=False)
270         with patch.object(useradd, "info", mock):
271             self.assertRaises(CommandExecutionError, useradd.rename, "salt", 1)
272         mock = MagicMock(return_value=True)
273         with patch.object(useradd, "info", mock):
274             self.assertRaises(CommandExecutionError, useradd.rename, "salt", 1)
275         mock = MagicMock(return_value=None)
276         with patch.dict(useradd.__salt__, {"cmd.run": mock}):
277             mock = MagicMock(side_effect=[False, {"name": ""}, {"name": "salt"}])
278             with patch.object(useradd, "info", mock):
279                 self.assertTrue(useradd.rename("name", "salt"))
280         mock = MagicMock(return_value=None)
281         with patch.dict(useradd.__salt__, {"cmd.run": mock}):
282             mock = MagicMock(side_effect=[False, {"name": ""}, {"name": ""}])
283             with patch.object(useradd, "info", mock):
284                 self.assertFalse(useradd.rename("salt", "salt"))
285     def test_build_gecos_field(self):
286         test_gecos = {
287             "fullname": "Testing",
288             "roomnumber": 1234,
289             "workphone": 22222,
290             "homephone": 99999,
291         }
292         expected_gecos_fields = "Testing,1234,22222,99999"
293         self.assertEqual(useradd._build_gecos(test_gecos), expected_gecos_fields)
294         test_gecos.pop("roomnumber")
295         test_gecos.pop("workphone")
296         expected_gecos_fields = "Testing,,,99999"
297         self.assertEqual(useradd._build_gecos(test_gecos), expected_gecos_fields)
298         test_gecos.pop("homephone")
299         expected_gecos_fields = "Testing"
300         self.assertEqual(useradd._build_gecos(test_gecos), expected_gecos_fields)
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
