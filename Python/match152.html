<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Matches for test_bower_2.py & test_mac_desktop.py</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
</HEAD>
<body>
  <div style="align-items: center; display: flex; justify-content: space-around;">
    <div>
      <h3 align="center">
Matches for test_bower_2.py & test_mac_desktop.py
      </h3>
      <h1 align="center">
        71.0%
      </h1>
      <center>
        <a href="index.html" target="_top">
          INDEX
        </a>
        <span>-</span>
        <a href="help-en.html" target="_top">
          HELP
        </a>
      </center>
    </div>
    <div>
<TABLE BORDER="1" CELLSPACING="0" BGCOLOR="#d0d0d0">
<TR><TH><TH>test_bower_2.py (76.59574%)<TH>test_mac_desktop.py (66.25767%)<TH>Tokens
<TR><TD BGCOLOR="#0000ff"><FONT COLOR="#0000ff">-</FONT><TD><A HREF="javascript:ZweiFrames('match152-0.html#0',2,'match152-1.html#0',3)" NAME="0">(45-62)<TD><A HREF="javascript:ZweiFrames('match152-0.html#0',2,'match152-1.html#0',3)" NAME="0">(22-39)</A><TD ALIGN=center><FONT COLOR="#ff0000">29</FONT>
<TR><TD BGCOLOR="#f63526"><FONT COLOR="#f63526">-</FONT><TD><A HREF="javascript:ZweiFrames('match152-0.html#1',2,'match152-1.html#1',3)" NAME="1">(19-36)<TD><A HREF="javascript:ZweiFrames('match152-0.html#1',2,'match152-1.html#1',3)" NAME="1">(42-59)</A><TD ALIGN=center><FONT COLOR="#e40000">26</FONT>
<TR><TD BGCOLOR="#980517"><FONT COLOR="#980517">-</FONT><TD><A HREF="javascript:ZweiFrames('match152-0.html#2',2,'match152-1.html#2',3)" NAME="2">(71-85)<TD><A HREF="javascript:ZweiFrames('match152-0.html#2',2,'match152-1.html#2',3)" NAME="2">(60-76)</A><TD ALIGN=center><FONT COLOR="#b80000">21</FONT>
<TR><TD BGCOLOR="#53858b"><FONT COLOR="#53858b">-</FONT><TD><A HREF="javascript:ZweiFrames('match152-0.html#3',2,'match152-1.html#3',3)" NAME="3">(63-71)<TD><A HREF="javascript:ZweiFrames('match152-0.html#3',2,'match152-1.html#3',3)" NAME="3">(96-105)</A><TD ALIGN=center><FONT COLOR="#8c0000">16</FONT>
<TR><TD BGCOLOR="#6cc417"><FONT COLOR="#6cc417">-</FONT><TD><A HREF="javascript:ZweiFrames('match152-0.html#4',2,'match152-1.html#4',3)" NAME="4">(37-45)<TD><A HREF="javascript:ZweiFrames('match152-0.html#4',2,'match152-1.html#4',3)" NAME="4">(78-87)</A><TD ALIGN=center><FONT COLOR="#8c0000">16</FONT>
</TABLE>
    </div>
  </div>
  <hr>
  <div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>test_bower_2.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<HR>
<PRE>
&quot;&quot;&quot;
    :codeauthor: Alexander Pyatkin &lt;asp@thexyz.net&gt;
&quot;&quot;&quot;


import salt.modules.bower as bower
from salt.exceptions import CommandExecutionError
from tests.support.mixins import LoaderModuleMockMixin
from tests.support.mock import MagicMock, patch
from tests.support.unit import TestCase


class BowerTestCase(TestCase, LoaderModuleMockMixin):
    &quot;&quot;&quot;
    Test cases for salt.modules.bower
<A NAME="1"></A>    &quot;&quot;&quot;

    def setup_loader_modules(self):
        return {bower: {&quot;_check_valid_version&quot;: MagicMock(return_value=<FONT color="#f63526"><A HREF="javascript:ZweiFrames('match152-1.html#1',3,'match152-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>True)}}

    def test_install_with_error(self):
        &quot;&quot;&quot;
        Test if it raises an exception when install package fails
        &quot;&quot;&quot;
        mock = MagicMock(return_value={&quot;retcode&quot;: 1, &quot;stderr&quot;: &quot;error&quot;})
        with patch.dict(bower.__salt__, {&quot;cmd.run_all&quot;: mock}):
            self.assertRaises(
                CommandExecutionError, bower.install, &quot;/path/to/project&quot;, &quot;underscore&quot;
            )

    def test_install_new_package(self):
        &quot;&quot;&quot;
        Test if it returns True when install package succeeds
<A NAME="4"></A>        &quot;&quot;&quot;
        mock = MagicMock(return_value={&quot;retcode&quot;: 0, &quot;stdout&quot;: '{&quot;underscore&quot;:{}}'})
        with patch.dict(bower.__salt__, {&quot;cmd.run_all&quot;</B></FONT>: mock}):
            self.assertTrue(bower<FONT color="#6cc417"><A HREF="javascript:ZweiFrames('match152-1.html#4',3,'match152-top.html#4',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>.install(&quot;/path/to/project&quot;, &quot;underscore&quot;))

    def test_install_existing_package(self):
        &quot;&quot;&quot;
        Test if it returns False when package already installed
<A NAME="0"></A>        &quot;&quot;&quot;
        mock = MagicMock(return_value={&quot;retcode&quot;: 0, &quot;stdout&quot;: &quot;{}&quot;})
        with patch.dict(bower.__salt__, {&quot;cmd.run_all&quot;: mock}):
            self.assertFalse(</B></FONT>bower<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match152-1.html#0',3,'match152-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>.install(&quot;/path/to/project&quot;, &quot;underscore&quot;))

    def test_uninstall_with_error(self):
        &quot;&quot;&quot;
        Test if it raises an exception when uninstall package fails
        &quot;&quot;&quot;
        mock = MagicMock(return_value={&quot;retcode&quot;: 1, &quot;stderr&quot;: &quot;error&quot;})
        with patch.dict(bower.__salt__, {&quot;cmd.run_all&quot;: mock}):
            self.assertRaises(
                CommandExecutionError, bower.uninstall, &quot;/path/to/project&quot;, &quot;underscore&quot;
            )

    def test_uninstall_existing_package(self):
        &quot;&quot;&quot;
        Test if it returns True when uninstall package succeeds
<A NAME="3"></A>        &quot;&quot;&quot;
        mock = MagicMock(return_value={&quot;retcode&quot;: 0, &quot;stdout&quot;: '{&quot;underscore&quot;: {}}'})
        with patch.dict(bower.__salt__, {&quot;cmd.run_all&quot;</B></FONT>: mock}):
            self.assertTrue(bower<FONT color="#53858b"><A HREF="javascript:ZweiFrames('match152-1.html#3',3,'match152-top.html#3',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>.uninstall(&quot;/path/to/project&quot;, &quot;underscore&quot;))

    def test_uninstall_missing_package(self):
        &quot;&quot;&quot;
        Test if it returns False when package is not installed
<A NAME="2"></A>        &quot;&quot;&quot;
        mock = MagicMock(return_value={&quot;retcode&quot;: 0, &quot;stdout&quot;: &quot;{}&quot;})
        with patch.dict(bower.__salt__, {&quot;cmd.run_all&quot;: mock}):
            self.assertFalse(</B></FONT>bower<FONT color="#980517"><A HREF="javascript:ZweiFrames('match152-1.html#2',3,'match152-top.html#2',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>.uninstall(&quot;/path/to/project&quot;, &quot;underscore&quot;))

    def test_list_packages_with_error(self):
        &quot;&quot;&quot;
        Test if it raises an exception when list installed packages fails
        &quot;&quot;&quot;
        mock = MagicMock(return_value={&quot;retcode&quot;: 1, &quot;stderr&quot;: &quot;error&quot;})
        with patch.dict(bower.__salt__, {&quot;cmd.run_all&quot;: mock}):
            self.assertRaises(CommandExecutionError, bower.list_, &quot;/path/to/project&quot;)

    def test_list_packages_success(self):
        &quot;&quot;&quot;
        Test if it lists installed Bower packages
        &quot;&quot;&quot;
        output =</B></FONT> '{&quot;dependencies&quot;: {&quot;underscore&quot;: {}, &quot;jquery&quot;:{}}}'
        mock = MagicMock(return_value={&quot;retcode&quot;: 0, &quot;stdout&quot;: output})
        with patch.dict(bower.__salt__, {&quot;cmd.run_all&quot;: mock}):
            self.assertEqual(
                bower.list_(&quot;/path/to/project&quot;), {&quot;underscore&quot;: {}, &quot;jquery&quot;: {}}
            )
</PRE>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>test_mac_desktop.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<HR>
<PRE>
&quot;&quot;&quot;
Unit Tests for the mac_desktop execution module.
&quot;&quot;&quot;

import pytest
import salt.modules.mac_desktop as mac_desktop
from salt.exceptions import CommandExecutionError
from tests.support.mock import MagicMock, patch


@pytest.fixture
def configure_loader_modules():
    return {mac_desktop: {}}


def test_get_output_volume():
    &quot;&quot;&quot;
    Test if it get the output volume (range 0 to 100)
<A NAME="0"></A>    &quot;&quot;&quot;
    mock = MagicMock(return_value={&quot;retcode&quot;: 0, &quot;stdout&quot;: &quot;25&quot;})
    with patch.dict(mac_desktop.__salt__, {&quot;cmd.run_all&quot;: mock}):
        assert mac_desktop<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match152-0.html#0',2,'match152-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>.get_output_volume() == &quot;25&quot;


def test_get_output_volume_error():
    &quot;&quot;&quot;
    Tests that an error is raised when cmd.run_all errors
    &quot;&quot;&quot;
    mock = MagicMock(return_value={&quot;retcode&quot;: 1})
    with patch.dict(mac_desktop.__salt__, {&quot;cmd.run_all&quot;: mock}):
        pytest.raises(CommandExecutionError, mac_desktop.get_output_volume)


def test_set_output_volume():
    &quot;&quot;&quot;
    Test if it set the volume of sound (range 0 to 100)
    &quot;&quot;&quot;
    mock = MagicMock(return_value={&quot;retcode&quot;: 0})
<A NAME="1"></A>    with patch.dict(mac_desktop.__salt__, {&quot;cmd.run_all&quot;</B></FONT>: mock}), patch(
        &quot;salt.modules.mac_desktop.get_output_volume&quot;, MagicMock(return_value=&quot;25&quot;)
    ):
        assert mac_desktop.set_output_volume(&quot;<FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match152-0.html#1',2,'match152-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>25&quot;)


def test_set_output_volume_error():
    &quot;&quot;&quot;
    Tests that an error is raised when cmd.run_all errors
    &quot;&quot;&quot;
    mock = MagicMock(return_value={&quot;retcode&quot;: 1})
    with patch.dict(mac_desktop.__salt__, {&quot;cmd.run_all&quot;: mock}):
        pytest.raises(CommandExecutionError, mac_desktop.set_output_volume, &quot;25&quot;)


def test_screensaver():
    &quot;&quot;&quot;
    Test if it launch the screensaver
<A NAME="2"></A>    &quot;&quot;&quot;
    mock = MagicMock(return_value={&quot;retcode&quot;: 0})
    with patch.dict(mac_desktop.__salt__, {&quot;cmd.run_all&quot;</B></FONT>: mock}):
        assert mac_desktop<FONT color="#980517"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match152-0.html#2',2,'match152-top.html#2',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>.screensaver()


def test_screensaver_error():
    &quot;&quot;&quot;
    Tests that an error is raised when cmd.run_all errors
    &quot;&quot;&quot;
    mock = MagicMock(return_value={&quot;retcode&quot;: 1})
    with patch.dict(mac_desktop.__salt__, {&quot;cmd.run_all&quot;: mock}):
        pytest.raises(CommandExecutionError, mac_desktop.screensaver)


def test_lock():
    &quot;&quot;&quot;
    Test if it lock the desktop session
<A NAME="4"></A>    &quot;&quot;&quot;
    mock =</B></FONT> MagicMock(return_value={&quot;retcode&quot;: 0})
    with patch.dict(mac_desktop.__salt__, {&quot;cmd.run_all&quot;: mock}):
        assert mac_desktop<FONT color="#6cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match152-0.html#4',2,'match152-top.html#4',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>.lock()


def test_lock_error():
    &quot;&quot;&quot;
    Tests that an error is raised when cmd.run_all errors
    &quot;&quot;&quot;
    mock = MagicMock(return_value={&quot;retcode&quot;: 1})
    with patch.dict(mac_desktop.__salt__, {&quot;cmd.run_all&quot;: mock}):
        pytest.raises(</B></FONT>CommandExecutionError, mac_desktop.lock)


def test_say():
    &quot;&quot;&quot;
    Test if it says some words.
<A NAME="3"></A>    &quot;&quot;&quot;
    mock = MagicMock(return_value={&quot;retcode&quot;: 0})
    with patch.dict(mac_desktop.__salt__, {&quot;cmd.run_all&quot;: mock}):
        assert mac_desktop<FONT color="#53858b"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match152-0.html#3',2,'match152-top.html#3',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>.say()


def test_say_error():
    &quot;&quot;&quot;
    Tests that an error is raised when cmd.run_all errors
    &quot;&quot;&quot;
    mock = MagicMock(return_value={&quot;retcode&quot;: 1})
    with patch.dict(mac_desktop.__salt__, {&quot;cmd.run_all&quot;: mock}):
        pytest.raises(</B></FONT>CommandExecutionError, mac_desktop.say)
</PRE>
</div>
  </div>
</body>
</html>
