<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for test_composer.py &amp; test_network_3.py</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for test_composer.py &amp; test_network_3.py
      </h3>
<h1 align="center">
        18.9%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>test_composer.py (32.142857%)<th>test_network_3.py (13.432836%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(38-43)<td><a href="#" name="0">(253-258)</a><td align="center"><font color="#ff0000">16</font>
<tr onclick='openModal("#f63526")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f63526"><font color="#f63526">-</font><td><a href="#" name="1">(69-73)<td><a href="#" name="1">(130-136)</a><td align="center"><font color="#ef0000">15</font>
<tr onclick='openModal("#980517")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#980517"><font color="#980517">-</font><td><a href="#" name="2">(76-78)<td><a href="#" name="2">(221-223)</a><td align="center"><font color="#df0000">14</font>
</td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>test_composer.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 import pytest
2 import salt.states.composer as composer
3 from salt.exceptions import SaltException
4 from tests.support.mock import MagicMock, patch
5 @pytest.fixture
6 def configure_loader_modules():
7     return {composer: {}}
8 def test_installed():
9     name = "CURL"
10     ret = {"name": name, "result": True, "comment": "", "changes": {}}
11     mock = MagicMock(return_value=True)
12     with patch.dict(composer.__salt__, {"composer.did_composer_install": mock}):
13         comt = "Composer already installed this directory"
14         ret.update({"comment": comt})
15         assert composer.installed(name, always_check=False) == ret
16         with patch.dict(composer.__opts__, {"test": True}):
17             comt = 'The state of "CURL" will be changed.'
18             changes = {
19                 "new": "composer install will be run in CURL",
20 <a name="0"></a>                "old": "composer install has been run in CURL",
21             }
22             ret.update({"comment": comt, "result": None, "changes": changes})
23             assert composer.installed(<font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>name) == ret
24         with patch.dict(composer.__opts__, {"test": False}):
25             mock = MagicMock(side_effect=[SaltException, {}])
26             with patch.dict(composer.__salt__, {"composer.install": mock}):
27                 comt =</b></font> "Error executing composer in 'CURL': "
28                 ret.update({"comment": comt, "result": False, "changes": {}})
29                 assert composer.installed(name) == ret
30                 comt = (
31                     "Composer install completed successfully, output silenced by quiet"
32                     " flag"
33                 )
34                 ret.update({"comment": comt, "result": True})
35                 assert composer.installed(name, quiet=True) == ret
36 def test_update():
37     name = "CURL"
38     ret = {"name": name, "result": True, "comment": "", "changes": {}}
39     changes = {
40         "new": "composer install/update will be run in CURL",
41 <a name="1"></a>        "old": "composer install has not yet been run in CURL",
42     }
43     mock <font color="#f63526"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>= MagicMock(return_value=True)
44     with patch.dict(composer.__salt__, {"composer.did_composer_install": mock}):
45         with patch.dict(composer.__opts__, {"test": True}):
46             comt = 'The state of "CURL" will be changed.'
47 <a name="2"></a>            ret.</b></font>update({"comment": comt, "result": None, "changes": changes})
48             assert composer.update(name) == ret
49         <font color="#980517"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>with patch.dict(composer.__opts__, {"test": False}):
50             mock = MagicMock(side_effect=[SaltException, {}])
51             with patch.dict(composer.__salt__, {"composer.update"</b></font>: mock}):
52                 comt = "Error executing composer in 'CURL': "
53                 ret.update({"comment": comt, "result": False, "changes": {}})
54                 assert composer.update(name) == ret
55                 comt = (
56                     "Composer update completed successfully, output silenced by quiet"
57                     " flag"
58                 )
59                 ret.update({"comment": comt, "result": True})
60                 assert composer.update(name, quiet=True) == ret
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>test_network_3.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 import logging
2 import salt.states.network as network
3 from tests.support.mixins import LoaderModuleMockMixin
4 from tests.support.mock import MagicMock, patch
5 from tests.support.unit import TestCase
6 log = logging.getLogger(__name__)
7 class MockNetwork:
8     def __init__(self):
9         pass
10     @staticmethod
11     def interfaces():
12         ifaces = {
13             "salt": {"up": 1},
14             "lo": {"up": 1, "inet": [{"label": "lo"}, {"label": "lo:alias1"}]},
15         }
16         return ifaces
17 class MockGrains:
18     def __init__(self):
19         pass
20     @staticmethod
21     def grains(lis, bol):
22         return {"A": "B"}
23 class NetworkTestCase(TestCase, LoaderModuleMockMixin):
24     def setup_loader_modules(self):
25         return {network: {}}
26     def test_managed(self):
27         with patch("salt.states.network.salt.utils.network", MockNetwork()), patch(
28             "salt.states.network.salt.loader", MockGrains()
29         ):
30             ret = {"name": "salt", "changes": {}, "result": False, "comment": ""}
31             change = {
32                 "interface": "--- \n+++ \n@@ -1 +1 @@\n-A\n+B",
33                 "status": "Interface salt restart to validate",
34             }
35             dunder_salt = {
36                 "ip.get_interface": MagicMock(
37                     side_effect=[AttributeError, "A", "A", "A", "A", "A"]
38                 ),
39                 "ip.build_interface": MagicMock(return_value="B"),
40                 "saltutil.refresh_grains": MagicMock(return_value=True),
41             }
42             with patch.dict(network.__salt__, dunder_salt):
43                 with patch.dict(
44                     network.__salt__,
45                     {"ip.get_bond": MagicMock(side_effect=AttributeError)},
46                 ):
47                     self.assertDictEqual(
48                         network.managed("salt", type="bond", test=True), ret
49                     )
50                 ret.update(
51                     {
52                         "comment": (
53                             "Interface salt is set to be"
54                             " updated:\n--- \n+++ \n@@ -1 +1 @@\n-A\n+B"
55                         ),
56                         "result": None,
57                     }
58                 )
59                 self.assertDictEqual(
60                     network.managed("salt", type="stack", test=True), ret
61                 )
62                 ipupdown = MagicMock(return_value=True)
63                 with patch.dict(
64                     network.__salt__, {"ip.down": ipupdown, "ip.up": ipupdown}
65                 ):
66                     ret.update(
67                         {
68                             "comment": "Interface salt updated.",
69                             "result": True,
70                             "changes": change,
71                         }
72                     )
73                     self.assertDictEqual(network.managed("salt", type="stack"), ret)
74                     with patch.dict(network.__grains__, {"A": True}):
75                         ret.update(
76                             {
77                                 "result": True,
78                                 "changes": {
79                                     "interface": "--- \n+++ \n@@ -1 +1 @@\n-A\n+B",
80                                     "status": "Interface salt down",
81                                 },
82                             }
83                         )
84                         self.assertDictEqual(
85 <a name="1"></a>                            network.managed("salt", type="stack", enabled=False), ret
86                         )
87                     mock <font color="#f63526"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>= MagicMock(return_value=True)
88                     with patch.dict(network.__salt__, {"ip.down": mock}):
89                         with patch.dict(
90                             network.__salt__, {"saltutil.refresh_modules": mock}
91                         ):
92                             change = {
93                                 "interface"</b></font>: "--- \n+++ \n@@ -1 +1 @@\n-A\n+B",
94                                 "status": "Interface lo:alias1 down",
95                             }
96                             ret.update(
97                                 {
98                                     "name": "lo:alias1",
99                                     "comment": "Interface lo:alias1 updated.",
100                                     "result": True,
101                                     "changes": change,
102                                 }
103                             )
104                             self.assertDictEqual(
105                                 network.managed("lo:alias1", type="eth", enabled=False),
106                                 ret,
107                             )
108     def test_routes(self):
109         ret = {"name": "salt", "changes": {}, "result": False, "comment": ""}
110         mock = MagicMock(
111             side_effect=[AttributeError, False, False, "True", False, False]
112         )
113         with patch.dict(network.__salt__, {"ip.get_routes": mock}):
114             self.assertDictEqual(network.routes("salt"), ret)
115             mock = MagicMock(side_effect=[False, True, "", True, True])
116             with patch.dict(network.__salt__, {"ip.build_routes": mock}):
117                 ret.update(
118                     {"result": True, "comment": "Interface salt routes are up to date."}
119                 )
120                 self.assertDictEqual(network.routes("salt", test="a"), ret)
121                 ret.update(
122                     {
123                         "comment": "Interface salt routes are set to be added.",
124                         "result": None,
125                     }
126                 )
127                 self.assertDictEqual(network.routes("salt", test="a"), ret)
128                 ret.update(
129                     {
130                         "comment": (
131                             "Interface salt routes are set to be"
132                             " updated:\n--- \n+++ \n@@ -1,4 +0,0 @@\n-T\n-r"
133                             "\n-u\n-e"
134                         )
135                     }
136                 )
137                 self.assertDictEqual(network.routes("salt", test="a"), ret)
138                 mock = MagicMock(side_effect=[AttributeError, True])
139                 with patch.dict(network.__salt__, {"ip.apply_network_settings": mock}):
140                     ret.update(
141                         {
142                             "changes": {
143                                 "network_routes": "Added interface salt routes."
144                             },
145                             "comment": "",
146                             "result": False,
147                         }
148                     )
149                     self.assertDictEqual(network.routes("salt"), ret)
150                     ret.update(
151                         {
152                             "changes": {
153                                 "network_routes": "Added interface salt routes."
154                             },
155                             "comment": "Interface salt routes added.",
156                             "result": True,
157                         }
158                     )
159                     self.assertDictEqual(network.routes("salt"), ret)
160     def test_system(self):
161         <font color="#980517"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>with patch.dict(network.__opts__, {"test": True}):
162             mock = MagicMock(side_effect=[AttributeError, False, False, "As"])
163             with patch.dict(network.__salt__, {"ip.get_network_settings"</b></font>: mock}):
164                 self.assertDictEqual(network.system("salt"), ret)
165                 mock = MagicMock(side_effect=[False, True, ""])
166                 with patch.dict(network.__salt__, {"ip.build_network_settings": mock}):
167                     ret.update(
168                         {
169                             "comment": "Global network settings are up to date.",
170                             "result": True,
171                         }
172                     )
173                     self.assertDictEqual(network.system("salt"), ret)
174                     ret.update(
175                         {
176                             "comment": "Global network settings are set to be added.",
177                             "result": None,
178                         }
179                     )
180                     self.assertDictEqual(network.system("salt"), ret)
181                     ret.update(
182                         {
183                             "comment": (
184                                 "Global network settings are set to"
185                                 " be updated:\n--- \n+++ \n@@ -1,2 +0,0"
186                                 " @@\n-A\n-s"
187 <a name="0"></a>                            )
188                         }
189                     )
190                     self.assertDictEqual(network.system("s<font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>alt"), ret)
191         with patch.dict(network.__opts__, {"test": False}):
192             mock = MagicMock(side_effect=[False, False])
193             with patch.dict(network.__salt__, {"ip.get_network_settings": mock}):
194                 mock =</b></font> MagicMock(side_effect=[True, True])
195                 with patch.dict(network.__salt__, {"ip.build_network_settings": mock}):
196                     mock = MagicMock(side_effect=[AttributeError, True])
197                     with patch.dict(
198                         network.__salt__, {"ip.apply_network_settings": mock}
199                     ):
200                         ret.update(
201                             {
202                                 "changes": {
203                                     "network_settings": "Added global network settings."
204                                 },
205                                 "comment": "",
206                                 "result": False,
207                             }
208                         )
209                         self.assertDictEqual(network.system("salt"), ret)
210                         ret.update(
211                             {
212                                 "changes": {
213                                     "network_settings": "Added global network settings."
214                                 },
215                                 "comment": "Global network settings are up to date.",
216                                 "result": True,
217                             }
218                         )
219                         self.assertDictEqual(network.system("salt"), ret)
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
