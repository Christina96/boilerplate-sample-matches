<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for test_composer.py &amp; test_network_3.py</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for test_composer.py &amp; test_network_3.py
      </h3>
<h1 align="center">
        18.9%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>test_composer.py (32.142857%)<th>test_network_3.py (13.432836%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(38-43)<td><a href="#" name="0">(253-258)</a><td align="center"><font color="#ff0000">16</font>
<tr onclick='openModal("#f63526")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f63526"><font color="#f63526">-</font><td><a href="#" name="1">(69-73)<td><a href="#" name="1">(130-136)</a><td align="center"><font color="#ef0000">15</font>
<tr onclick='openModal("#980517")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#980517"><font color="#980517">-</font><td><a href="#" name="2">(76-78)<td><a href="#" name="2">(221-223)</a><td align="center"><font color="#df0000">14</font>
</td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>test_composer.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 import pytest
2 import salt.states.composer as composer
3 from salt.exceptions import SaltException
4 from tests.support.mock import MagicMock, patch
5 @pytest.fixture
6 def configure_loader_modules():
7     return {composer: {}}
8 def test_installed():
9     name = "CURL"
10     ret = {"name": name, "result": True, "comment": "", "changes": {}}
11     mock = MagicMock(return_value=True)
12     with patch.dict(composer.__salt__, {"composer.did_composer_install": mock}):
13         comt = "Composer already installed this directory"
14         ret.update({"comment": comt})
15         assert composer.installed(name, always_check=False) == ret
16         with patch.dict(composer.__opts__, {"test": True}):
17             comt = 'The state of "CURL" will be changed.'
18             changes = {
19                 "new": "composer install will be run in CURL",
20             }
21             ret.update({"comment": comt, "result": None, "changes": changes})
22             assert composer.installed(<font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>name) == ret
23         with patch.dict(composer.__opts__, {"test": False}):
24             mock = MagicMock(side_effect=[SaltException, {}])
25             with patch.dict(composer.__salt__, {"composer.install": mock}):
26                 comt =</b></font> "Error executing composer in 'CURL': "
27                 ret.update({"comment": comt, "result": False, "changes": {}})
28                 assert composer.installed(name) == ret
29                 comt = (
30                     "Composer install completed successfully, output silenced by quiet"
31                     " flag"
32                 )
33                 ret.update({"comment": comt, "result": True})
34                 assert composer.installed(name, quiet=True) == ret
35 def test_update():
36     name = "CURL"
37     ret = {"name": name, "result": True, "comment": "", "changes": {}}
38     changes = {
39         "new": "composer install/update will be run in CURL",
40     }
41     mock <font color="#f63526"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>= MagicMock(return_value=True)
42     with patch.dict(composer.__salt__, {"composer.did_composer_install": mock}):
43         with patch.dict(composer.__opts__, {"test": True}):
44             comt = 'The state of "CURL" will be changed.'
45             assert composer.update(name) == ret
46         <font color="#980517"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>with patch.dict(composer.__opts__, {"test": False}):
47             mock = MagicMock(side_effect=[SaltException, {}])
48             with patch.dict(composer.__salt__, {"composer.update"</b></font>: mock}):
49                 comt = "Error executing composer in 'CURL': "
50                 ret.update({"comment": comt, "result": False, "changes": {}})
51                 assert composer.update(name) == ret
52                 comt = (
53                     "Composer update completed successfully, output silenced by quiet"
54                     " flag"
55                 )
56                 ret.update({"comment": comt, "result": True})
57                 assert composer.update(name, quiet=True) == ret
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>test_network_3.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 import logging
2 import salt.states.network as network
3 from tests.support.mixins import LoaderModuleMockMixin
4 from tests.support.mock import MagicMock, patch
5 from tests.support.unit import TestCase
6 log = logging.getLogger(__name__)
7 class MockNetwork:
8     def __init__(self):
9         pass
10     @staticmethod
11     def interfaces():
12         ifaces = {
13             "salt": {"up": 1},
14             "lo": {"up": 1, "inet": [{"label": "lo"}, {"label": "lo:alias1"}]},
15         }
16         return ifaces
17 class MockGrains:
18     def __init__(self):
19         pass
20     @staticmethod
21     def grains(lis, bol):
22         return {"A": "B"}
23 class NetworkTestCase(TestCase, LoaderModuleMockMixin):
24     def setup_loader_modules(self):
25         return {network: {}}
26     def test_managed(self):
27         with patch("salt.states.network.salt.utils.network", MockNetwork()), patch(
28             "salt.states.network.salt.loader", MockGrains()
29         ):
30             ret = {"name": "salt", "changes": {}, "result": False, "comment": ""}
31             change = {
32                 "interface": "--- \n+++ \n@@ -1 +1 @@\n-A\n+B",
33                 "status": "Interface salt restart to validate",
34             }
35             dunder_salt = {
36                 "ip.get_interface": MagicMock(
37                     side_effect=[AttributeError, "A", "A", "A", "A", "A"]
38                 ),
39                 "ip.build_interface": MagicMock(return_value="B"),
40                 "saltutil.refresh_grains": MagicMock(return_value=True),
41             }
42             with patch.dict(network.__salt__, dunder_salt):
43                 with patch.dict(
44                     network.__salt__,
45                     {"ip.get_bond": MagicMock(side_effect=AttributeError)},
46                 ):
47                     self.assertDictEqual(
48                         network.managed("salt", type="bond", test=True), ret
49                     )
50                 ret.update(
51                     {
52                         "comment": (
53                             "Interface salt is set to be"
54                             " updated:\n--- \n+++ \n@@ -1 +1 @@\n-A\n+B"
55                         ),
56                         "result": None,
57                     }
58                 )
59                 self.assertDictEqual(
60                     network.managed("salt", type="stack", test=True), ret
61                 )
62                 ipupdown = MagicMock(return_value=True)
63                 with patch.dict(
64                     network.__salt__, {"ip.down": ipupdown, "ip.up": ipupdown}
65                 ):
66                     ret.update(
67                         {
68                             "comment": "Interface salt updated.",
69                             "result": True,
70                             "changes": change,
71                         }
72                     )
73                     self.assertDictEqual(network.managed("salt", type="stack"), ret)
74                     with patch.dict(network.__grains__, {"A": True}):
75                         ret.update(
76                             {
77                                 "result": True,
78                                 "changes": {
79                                     "interface": "--- \n+++ \n@@ -1 +1 @@\n-A\n+B",
80                                     "status": "Interface salt down",
81                                 },
82                             }
83                         )
84                         self.assertDictEqual(
85                         )
86                     mock <font color="#f63526"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>= MagicMock(return_value=True)
87                     with patch.dict(network.__salt__, {"ip.down": mock}):
88                         with patch.dict(
89                             network.__salt__, {"saltutil.refresh_modules": mock}
90                         ):
91                             change = {
92                                 "interface"</b></font>: "--- \n+++ \n@@ -1 +1 @@\n-A\n+B",
93                                 "status": "Interface lo:alias1 down",
94                             }
95                             ret.update(
96                                 {
97                                     "name": "lo:alias1",
98                                     "comment": "Interface lo:alias1 updated.",
99                                     "result": True,
100                                     "changes": change,
101                                 }
102                             )
103                             self.assertDictEqual(
104                                 network.managed("lo:alias1", type="eth", enabled=False),
105                                 ret,
106                             )
107     def test_routes(self):
108         ret = {"name": "salt", "changes": {}, "result": False, "comment": ""}
109         mock = MagicMock(
110             side_effect=[AttributeError, False, False, "True", False, False]
111         )
112         with patch.dict(network.__salt__, {"ip.get_routes": mock}):
113             self.assertDictEqual(network.routes("salt"), ret)
114             mock = MagicMock(side_effect=[False, True, "", True, True])
115             with patch.dict(network.__salt__, {"ip.build_routes": mock}):
116                 ret.update(
117                     {"result": True, "comment": "Interface salt routes are up to date."}
118                 )
119                 self.assertDictEqual(network.routes("salt", test="a"), ret)
120                 ret.update(
121                     {
122                         "comment": "Interface salt routes are set to be added.",
123                         "result": None,
124                     }
125                 )
126                 self.assertDictEqual(network.routes("salt", test="a"), ret)
127                 ret.update(
128                     {
129                         "comment": (
130                             "Interface salt routes are set to be"
131                             " updated:\n--- \n+++ \n@@ -1,4 +0,0 @@\n-T\n-r"
132                             "\n-u\n-e"
133                         )
134                     }
135                 )
136                 self.assertDictEqual(network.routes("salt", test="a"), ret)
137                 mock = MagicMock(side_effect=[AttributeError, True])
138                 with patch.dict(network.__salt__, {"ip.apply_network_settings": mock}):
139                     ret.update(
140                         {
141                             "changes": {
142                                 "network_routes": "Added interface salt routes."
143                             },
144                             "comment": "",
145                             "result": False,
146                         }
147                     )
148                     self.assertDictEqual(network.routes("salt"), ret)
149                     ret.update(
150                         {
151                             "changes": {
152                                 "network_routes": "Added interface salt routes."
153                             },
154                             "comment": "Interface salt routes added.",
155                             "result": True,
156                         }
157                     )
158                     self.assertDictEqual(network.routes("salt"), ret)
159     def test_system(self):
160         """
161         <font color="#980517"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>with patch.dict(network.__opts__, {"test": True}):
162             mock = MagicMock(side_effect=[AttributeError, False, False, "As"])
163             with patch.dict(network.__salt__, {"ip.get_network_settings"</b></font>: mock}):
164                 self.assertDictEqual(network.system("salt"), ret)
165                 mock = MagicMock(side_effect=[False, True, ""])
166                 with patch.dict(network.__salt__, {"ip.build_network_settings": mock}):
167                     ret.update(
168                         {
169                             "comment": "Global network settings are up to date.",
170                             "result": True,
171                         }
172                     )
173                     self.assertDictEqual(network.system("salt"), ret)
174                     ret.update(
175                         {
176                             "comment": "Global network settings are set to be added.",
177                             "result": None,
178                         }
179                     )
180                     self.assertDictEqual(network.system("salt"), ret)
181                     ret.update(
182                         {
183                             "comment": (
184                                 "Global network settings are set to"
185                                 " be updated:\n--- \n+++ \n@@ -1,2 +0,0"
186                                 " @@\n-A\n-s"
187                         }
188                     )
189                     self.assertDictEqual(network.system("s<font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>alt"), ret)
190         with patch.dict(network.__opts__, {"test": False}):
191             mock = MagicMock(side_effect=[False, False])
192             with patch.dict(network.__salt__, {"ip.get_network_settings": mock}):
193                 mock =</b></font> MagicMock(side_effect=[True, True])
194                 with patch.dict(network.__salt__, {"ip.build_network_settings": mock}):
195                     mock = MagicMock(side_effect=[AttributeError, True])
196                     with patch.dict(
197                         network.__salt__, {"ip.apply_network_settings": mock}
198                     ):
199                         ret.update(
200                             {
201                                 "changes": {
202                                     "network_settings": "Added global network settings."
203                                 },
204                                 "comment": "",
205                                 "result": False,
206                             }
207                         )
208                         self.assertDictEqual(network.system("salt"), ret)
209                         ret.update(
210                             {
211                                 "changes": {
212                                     "network_settings": "Added global network settings."
213                                 },
214                                 "comment": "Global network settings are up to date.",
215                                 "result": True,
216                             }
217                         )
218                         self.assertDictEqual(network.system("salt"), ret)
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
