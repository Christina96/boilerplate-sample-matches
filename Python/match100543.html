<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for rte.py &amp; tvp.py</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for rte.py &amp; tvp.py
      </h3>
<h1 align="center">
        5.8%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>rte.py (6.451613%)<th>tvp.py (5.2863436%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(114-165)<td><a href="#" name="0">(84-113)</a><td align="center"><font color="#ff0000">12</font>
</td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>rte.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 from __future__ import unicode_literals
2 import re
3 from .common import InfoExtractor
4 from ..compat import compat_HTTPError
5 from ..utils import (
6     float_or_none,
7     parse_iso8601,
8     str_or_none,
9     try_get,
10     unescapeHTML,
11     url_or_none,
12     ExtractorError,
13 )
14 class RteBaseIE(InfoExtractor):
15     def _real_extract(self, url):
16         item_id = self._match_id(url)
17         info_dict = {}
18         formats = []
19         ENDPOINTS = (
20             'https://feeds.rasset.ie/rteavgen/player/playlist?type=iptv&amp;format=json&amp;showId=',
21             'http://www.rte.ie/rteavgen/getplaylist/?type=web&amp;format=json&amp;id=',
22         )
23         for num, ep_url in enumerate(ENDPOINTS, start=1):
24             try:
25                 data = self._download_json(ep_url + item_id, item_id)
26             except ExtractorError as ee:
27                 if num &lt; len(ENDPOINTS) or formats:
28                     continue
29                 if isinstance(ee.cause, compat_HTTPError) and ee.cause.code == 404:
30                     error_info = self._parse_json(ee.cause.read().decode(), item_id, fatal=False)
31                     if error_info:
32                         raise ExtractorError(
33                             '%s said: %s' % (self.IE_NAME, error_info['message']),
34                             expected=True)
35                 raise
36             show = try_get(data, lambda x: x['shows'][0], dict)
37             if not show:
38                 continue
39             if not info_dict:
40                 title = unescapeHTML(show['title'])
41                 description = unescapeHTML(show.get('description'))
42                 thumbnail = show.get('thumbnail')
43                 duration = float_or_none(show.get('duration'), 1000)
44                 timestamp = parse_iso8601(show.get('published'))
45                 info_dict = {
46                     'id': item_id,
47                     'title': title,
48                     'description': description,
49                     'thumbnail': thumbnail,
50                     'timestamp': timestamp,
51                     'duration': duration,
52                 }
53             mg = try_get(show, lambda x: x['media:group'][0], dict)
54             if not mg:
55                 continue
56             if mg.get('url'):
57                 m = re.match(r'(?P&lt;url&gt;rtmpe?://[^/]+)/(?P&lt;app&gt;.+)/(?P&lt;playpath&gt;mp4:.*)', mg['url'])
58                 if m:
59                     m = m.groupdict()
60                     formats.append({
61                         'url': m['url'] + '/' + m['app'],
62                         'app': m['app'],
63                         'play_path': m['playpath'],
64                         'player_url': url,
65                         'ext': 'flv',
66                         'format_id': 'rtmp',
67                     })
68             if mg.get('hls_server') and mg.get('hls_url'):
69                 formats.extend(self._extract_m3u8_formats(
70                     mg['hls_server'] + mg['hls_url'], item_id, 'mp4',
71                     entry_protocol='m3u8_native', m3u8_id='hls', fatal=False))
72             if mg.get('hds_server') and mg.get('hds_url'):
73                 formats.extend(self._extract_f4m_formats(
74                     mg['hds_server'] + mg['hds_url'], item_id,
75                     f4m_id='hds', fatal=False))
76             mg_rte_server = str_or_none(mg.get('rte:server'))
77             mg_url = str_or_none(mg.get('url'))
78             if mg_rte_server and mg_url:
79                 hds_url = url_or_none(mg_rte_server + mg_url)
80                 if hds_url:
81                     formats.extend(self._extract_f4m_formats(
82                         hds_url, item_id, f4m_id='hds', fatal=False))
83         self._sort_formats(formats)
84         info_dict['formats'] = formats
85         return info_dict
86 class RteIE(RteBaseIE):
87     IE_NAME = 'rte'
88     IE_DESC = 'Raidió Teilifís Éireann TV'
89     _VALID_URL = r'https?://(?:www\.)?rte\.ie/player/[^/]{2,3}/show/[^/]+/(?P&lt;id&gt;[0-9]+)'
90     _TEST = {
91         'md5': '4a76eb3396d98f697e6e8110563d2604',
92         'info_dict': {
93             '<font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>id': '10478715',
94             'ext': 'mp4',
95             'title': 'iWitness',
96             'thumbnail': r're:^https?://.*\.jpg$',
97             'description': 'The spirit of Ireland, one voice and one minute at a time.',
98             'duration': 60.046,
99             'upload_date': '20151012',
100             'timestamp': 1444694160,
101         },
102     }
103 class RteRadioIE(RteBaseIE):
104     IE_NAME = 'rte:radio'
105     IE_DESC = 'Raidió Teilifís Éireann radio'
106     _VALID_URL = r'https?://(?:www\.)?rte\.ie/radio/utils/radioplayer/rteradioweb\.html#!rii=(?:b?[0-9]*)(?:%3A|:|%5F|_)(?P&lt;id&gt;[0-9]+)'
107     _TESTS = [{
108         'url': 'http://www.rte.ie/radio/utils/radioplayer/rteradioweb.html#!rii=16:10507902:2414:27-12-2015:',
109         'md5': 'c79ccb2c195998440065456b69760411',
110         'info_dict': {
111             'id': '10507902',
112             'ext': 'mp4',
113             'title': 'Gloria',
114             'thumbnail': r're:^https?://.*\.jpg$',
115             'description': 'md5:9ce124a7fb41559ec68f06387cabddf0',
116             'timestamp': 1451203200,
117             'upload_date': '20151227',
118             'duration': 7230.0,
119         },
120     }, {
121         'url': 'http://rte.ie/radio/utils/radioplayer/rteradioweb.html#!rii=b16_3250678_8861_06-04-2012_',
122         'info_dict': {
123             'id': '3250678',
124             'ext': 'flv',
125             'title': 'The Lyric Concert with Paul Herriott',
126             'thumbnail': r're:^https?://.*\.jpg$',
127             'description': '',
128             'timestamp': 1333742400,
129             'upload_date': '20120406',
130             'duration': 7199.016,
131         },
132         'params': {
133             'skip_download'</b></font>: True,
134         },
135     }]
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>tvp.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 from __future__ import unicode_literals
2 import itertools
3 import re
4 from .common import InfoExtractor
5 from ..utils import (
6     clean_html,
7     determine_ext,
8     ExtractorError,
9     get_element_by_attribute,
10     orderedSet,
11 )
12 class TVPIE(InfoExtractor):
13     IE_NAME = 'tvp'
14     IE_DESC = 'Telewizja Polska'
15     _VALID_URL = r'https?://[^/]+\.tvp\.(?:pl|info)/(?:video/(?:[^,\s]*,)*|(?:(?!\d+/)[^/]+/)*)(?P&lt;id&gt;\d+)'
16     _TESTS = [{
17         'url': 'https://vod.tvp.pl/video/czas-honoru,i-seria-odc-13,194536',
18         'md5': 'a21eb0aa862f25414430f15fdfb9e76c',
19         'info_dict': {
20             'id': '194536',
21             'ext': 'mp4',
22             'title': 'Czas honoru, odc. 13 – Władek',
23             'description': 'md5:437f48b93558370b031740546b696e24',
24         },
25     }, {
26         'url': 'http://www.tvp.pl/there-can-be-anything-so-i-shortened-it/17916176',
27         'md5': 'b0005b542e5b4de643a9690326ab1257',
28         'info_dict': {
29             'id': '17916176',
30             'ext': 'mp4',
31             'title': 'TVP Gorzów pokaże filmy studentów z podroży dookoła świata',
32             'description': 'TVP Gorzów pokaże filmy studentów z podroży dookoła świata',
33         },
34     }, {
35         'url': 'https://wiadomosci.tvp.pl/33908820/28092017-1930',
36         'md5': '84cd3c8aec4840046e5ab712416b73d0',
37         'info_dict': {
38             'id': '33908820',
39             'ext': 'mp4',
40             'title': 'Wiadomości, 28.09.2017, 19:30',
41             'description': 'Wydanie główne codziennego serwisu informacyjnego.'
42         },
43         'skip': 'HTTP Error 404: Not Found',
44     }, {
45         'url': 'http://vod.tvp.pl/seriale/obyczajowe/na-sygnale/sezon-2-27-/odc-39/17834272',
46         'only_matching': True,
47     }, {
48         'url': 'http://wiadomosci.tvp.pl/25169746/24052016-1200',
49         'only_matching': True,
50     }, {
51         'url': 'http://krakow.tvp.pl/25511623/25lecie-mck-wyjatkowe-miejsce-na-mapie-krakowa',
52         'only_matching': True,
53     }, {
54         'url': 'http://teleexpress.tvp.pl/25522307/wierni-wzieli-udzial-w-procesjach',
55         'only_matching': True,
56     }, {
57         'url': 'http://sport.tvp.pl/25522165/krychowiak-uspokaja-w-sprawie-kontuzji-dwa-tygodnie-to-maksimum',
58         'only_matching': True,
59     }, {
60         'url': 'http://www.tvp.info/25511919/trwa-rewolucja-wladza-zdecydowala-sie-na-pogwalcenie-konstytucji',
61         'only_matching': True,
62     }]
63     def _real_extract(self, url):
64         page_id = self._match_id(url)
65         webpage = self._download_webpage(url, page_id)
66         video_id = self._search_regex([
67             r'&lt;iframe[^&gt;]+src="[^"]*?object_id=(\d+)',
68             r"object_id\s*:\s*'(\d+)'",
69             r'data-video-id="(\d+)"'], webpage, 'video id', default=page_id)
70         return {
71             '_type': 'url_transparent',
72             'url': 'tvp:' + video_id,
73                 webpage, default=None) or self._html_search_meta(
74                 'description', webpage, default=None),
75             'thumbnail': self._og_search_thumbnail(webpage, default=N<font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>one),
76             'ie_key': 'TVPEmbed',
77         }
78 class TVPEmbedIE(InfoExtractor):
79     IE_NAME = 'tvp:embed'
80     IE_DESC = 'Telewizja Polska'
81     _VALID_URL = r'(?:tvp:|https?://[^/]+\.tvp\.(?:pl|info)/sess/tvplayer\.php\?.*?object_id=)(?P&lt;id&gt;\d+)'
82     _TESTS = [{
83         'url': 'tvp:194536',
84         'md5': 'a21eb0aa862f25414430f15fdfb9e76c',
85         'info_dict': {
86             'id': '194536',
87             'ext': 'mp4',
88             'title': 'Czas honoru, odc. 13 – Władek',
89         },
90     }, {
91         'url': 'http://www.tvp.pl/sess/tvplayer.php?object_id=22670268',
92         'md5': '8c9cd59d16edabf39331f93bf8a766c7',
93         'info_dict': {
94             'id': '22670268',
95             'ext': 'mp4',
96             'title': 'Panorama, 07.12.2015, 15:40',
97         },
98         'skip': 'Transmisja została zakończona lub materiał niedostępny',
99     }, {
100         'url'</b></font>: 'tvp:22670268',
101         'only_matching': True,
102     }]
103     def _real_extract(self, url):
104         video_id = self._match_id(url)
105         webpage = self._download_webpage(
106             'http://www.tvp.pl/sess/tvplayer.php?object_id=%s' % video_id, video_id)
107         error = self._html_search_regex(
108             r'(?s)&lt;p[^&gt;]+\bclass=["\']notAvailable__text["\'][^&gt;]*&gt;(.+?)&lt;/p&gt;',
109             webpage, 'error', default=None) or clean_html(
110             get_element_by_attribute('class', 'msg error', webpage))
111         if error:
112             raise ExtractorError('%s said: %s' % (
113                 self.IE_NAME, clean_html(error)), expected=True)
114         title = self._search_regex(
115             r'name\s*:\s*([\'"])Title\1\s*,\s*value\s*:\s*\1(?P&lt;title&gt;.+?)\1',
116             webpage, 'title', group='title')
117         series_title = self._search_regex(
118             r'name\s*:\s*([\'"])SeriesTitle\1\s*,\s*value\s*:\s*\1(?P&lt;series&gt;.+?)\1',
119             webpage, 'series', group='series', default=None)
120         if series_title:
121             title = '%s, %s' % (series_title, title)
122         thumbnail = self._search_regex(
123             r"poster\s*:\s*'([^']+)'", webpage, 'thumbnail', default=None)
124         video_url = self._search_regex(
125             r'0:{src:([\'"])(?P&lt;url&gt;.*?)\1', webpage,
126             'formats', group='url', default=None)
127         if not video_url or 'material_niedostepny.mp4' in video_url:
128             video_url = self._download_json(
129                 'http://www.tvp.pl/pub/stat/videofileinfo?video_id=%s' % video_id,
130                 video_id)['video_url']
131         formats = []
132         video_url_base = self._search_regex(
133             r'(https?://.+?/video)(?:\.(?:ism|f4m|m3u8)|-\d+\.mp4)',
134             video_url, 'video base url', default=None)
135         if video_url_base:
136             formats.extend(self._extract_ism_formats(
137                 video_url_base + '.ism/Manifest',
138                 video_id, 'mss', fatal=False))
139             formats.extend(self._extract_f4m_formats(
140                 video_url_base + '.ism/video.f4m',
141                 video_id, f4m_id='hds', fatal=False))
142             m3u8_formats = self._extract_m3u8_formats(
143                 video_url_base + '.ism/video.m3u8', video_id,
144                 'mp4', 'm3u8_native', m3u8_id='hls', fatal=False)
145             self._sort_formats(m3u8_formats)
146             m3u8_formats = list(filter(
147                 lambda f: f.get('vcodec') != 'none', m3u8_formats))
148             formats.extend(m3u8_formats)
149             for i, m3u8_format in enumerate(m3u8_formats, 2):
150                 http_url = '%s-%d.mp4' % (video_url_base, i)
151                 if self._is_valid_url(http_url, video_id):
152                     f = m3u8_format.copy()
153                     f.update({
154                         'url': http_url,
155                         'format_id': f['format_id'].replace('hls', 'http'),
156                         'protocol': 'http',
157                     })
158                     formats.append(f)
159         else:
160             formats = [{
161                 'format_id': 'direct',
162                 'url': video_url,
163                 'ext': determine_ext(video_url, 'mp4'),
164             }]
165         self._sort_formats(formats)
166         return {
167             'id': video_id,
168             'title': title,
169             'thumbnail': thumbnail,
170             'formats': formats,
171         }
172 class TVPWebsiteIE(InfoExtractor):
173     IE_NAME = 'tvp:series'
174     _VALID_URL = r'https?://vod\.tvp\.pl/website/(?P&lt;display_id&gt;[^,]+),(?P&lt;id&gt;\d+)'
175     _TESTS = [{
176         'url': 'https://vod.tvp.pl/website/lzy-cennet,38678312/video',
177         'info_dict': {
178             'id': '38678312',
179         },
180         'playlist_count': 115,
181     }, {
182         'url': 'https://vod.tvp.pl/website/gloria,35139666',
183         'info_dict': {
184             'id': '36637049',
185             'ext': 'mp4',
186             'title': 'Gloria, Gloria',
187         },
188         'params': {
189             'skip_download': True,
190         },
191         'add_ie': ['TVPEmbed'],
192     }, {
193         'url': 'https://vod.tvp.pl/website/lzy-cennet,38678312',
194         'only_matching': True,
195     }]
196     def _entries(self, display_id, playlist_id):
197         url = 'https://vod.tvp.pl/website/%s,%s/video' % (display_id, playlist_id)
198         for page_num in itertools.count(1):
199             page = self._download_webpage(
200                 url, display_id, 'Downloading page %d' % page_num,
201                 query={'page': page_num})
202             video_ids = orderedSet(re.findall(
203                 r'&lt;a[^&gt;]+\bhref=["\']/video/%s,[^,]+,(\d+)' % display_id,
204                 page))
205             if not video_ids:
206                 break
207             for video_id in video_ids:
208                 yield self.url_result(
209                     'tvp:%s' % video_id, ie=TVPEmbedIE.ie_key(),
210                     video_id=video_id)
211     def _real_extract(self, url):
212         mobj = re.match(self._VALID_URL, url)
213         display_id, playlist_id = mobj.group('display_id', 'id')
214         return self.playlist_result(
215             self._entries(display_id, playlist_id), playlist_id)
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
