<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for test_agraph.py &amp; test_mincost.py</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for test_agraph.py &amp; test_mincost.py
      </h3>
<h1 align="center">
        3.2%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>test_agraph.py (4.5901637%)<th>test_mincost.py (2.5316455%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(140-146)<td><a href="#" name="0">(350-358)</a><td align="center"><font color="#ff0000">14</font>
<tr onclick='openModal("#f63526")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f63526"><font color="#f63526">-</font><td><a href="#" name="1">(122-127)<td><a href="#" name="1">(142-149)</a><td align="center"><font color="#ff0000">14</font>
</td></td></a></td></td></tr></td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>test_agraph.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 import os
2 import tempfile
3 import pytest
4 pygraphviz = pytest.importorskip("pygraphviz")
5 from networkx.utils import nodes_equal, edges_equal, graphs_equal
6 import networkx as nx
7 class TestAGraph:
8     def build_graph(self, G):
9         edges = [("A", "B"), ("A", "C"), ("A", "C"), ("B", "C"), ("A", "D")]
10         G.add_edges_from(edges)
11         G.add_node("E")
12         G.graph["metal"] = "bronze"
13         return G
14     def assert_equal(self, G1, G2):
15         assert nodes_equal(G1.nodes(), G2.nodes())
16         assert edges_equal(G1.edges(), G2.edges())
17         assert G1.graph["metal"] == G2.graph["metal"]
18     def agraph_checks(self, G):
19         G = self.build_graph(G)
20         A = nx.nx_agraph.to_agraph(G)
21         H = nx.nx_agraph.from_agraph(A)
22         self.assert_equal(G, H)
23         fd, fname = tempfile.mkstemp()
24         nx.drawing.nx_agraph.write_dot(H, fname)
25         Hin = nx.nx_agraph.read_dot(fname)
26         self.assert_equal(H, Hin)
27         os.close(fd)
28         os.unlink(fname)
29         (fd, fname) = tempfile.mkstemp()
30         with open(fname, "w") as fh:
31             nx.drawing.nx_agraph.write_dot(H, fh)
32         with open(fname) as fh:
33             Hin = nx.nx_agraph.read_dot(fh)
34         os.close(fd)
35         os.unlink(fname)
36         self.assert_equal(H, Hin)
37     def test_from_agraph_name(self):
38         G = nx.Graph(name="test")
39         A = nx.nx_agraph.to_agraph(G)
40         H = nx.nx_agraph.from_agraph(A)
41         assert G.name == "test"
42     @pytest.mark.parametrize(
43         "graph_class", (nx.Graph, nx.DiGraph, nx.MultiGraph, nx.MultiDiGraph)
44     )
45     def test_from_agraph_create_using(self, graph_class):
46         G = nx.path_graph(3)
47         A = nx.nx_agraph.to_agraph(G)
48         H = nx.nx_agraph.from_agraph(A, create_using=graph_class)
49         assert isinstance(H, graph_class)
50     def test_from_agraph_named_edges(self):
51         G = nx.Graph()
52         G.add_nodes_from([0, 1])
53         A = nx.nx_agraph.to_agraph(G)
54         A.add_edge(0, 1, key="foo")
55         H = nx.nx_agraph.from_agraph(A)
56         assert isinstance(H, nx.Graph)
57         assert ("0", "1", {"key": "foo"}) in H.edges(data=True)
58     def test_undirected(self):
59         self.agraph_checks(nx.Graph())
60     def test_directed(self):
61         self.agraph_checks(nx.DiGraph())
62     def test_multi_undirected(self):
63         self.agraph_checks(nx.MultiGraph())
64     def test_multi_directed(self):
65         self.agraph_checks(nx.MultiDiGraph())
66     def test_to_agraph_with_nodedata(self):
67         G = nx.Graph()
68         G.add_node(1, color="red")
69         A = nx.nx_agraph.to_agraph(G)
70         assert dict(A.nodes()[0].attr) == {"color": "red"}
71     @pytest.mark.parametrize("graph_class", (nx.Graph, nx.MultiGraph))
72     def test_to_agraph_with_edgedata(self, graph_class):
73         G = graph_class()
74         G.add_nodes_from([0, 1])
75         G.add_edge(0, 1, color="yellow")
76         A = nx.nx_agraph.to_agraph(G)
77         assert dict(A.edges()[0].attr) == {"color": "yellow"}
78     def test_view_pygraphviz_path(self, tmp_path):
79         G = nx.complete_graph(3)
80         input_path = str(tmp_path / "graph.png")
81         out_path, A = nx.nx_agraph.view_pygraphviz(G, path=input_path, show=False)
82         assert out_path == input_path
83         with open(input_path, "rb") as fh:
84             data = fh.read()
85         assert len(data) &gt; 0
86     def test_view_pygraphviz_file_suffix(self, tmp_path):
87         G = nx.complete_graph(3)
88         path, A = nx.nx_agraph.view_pygraphviz(G, suffix=1, show=False)
89         assert path[-6:] == "_1.png"
90     def test_view_pygraphviz(self):
91         pytest.raises(nx.NetworkXException, nx.nx_agraph.view_pygraphviz, G)
92         G = nx.barbell_graph(4, 6)
93         nx.nx_agraph<font color="#f63526"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>.view_pygraphviz(G, show=False)
94     def test_view_pygraphviz_edgelabel(self):
95         G = nx.Graph()
96         G.add_edge(1, 2, weight=7)
97         G.add_edge(2, 3, weight=</b></font>8)
98         path, A = nx.nx_agraph.view_pygraphviz(G, edgelabel="weight", show=False)
99         for edge in A.edges():
100             assert edge.attr["weight"] in ("7", "8")
101     def test_view_pygraphviz_callable_edgelabel(self):
102         G = nx.complete_graph(3)
103         def foo_label(data):
104             return "foo"
105 <a name="0"></a>
106         path, A = nx.nx_agraph.view_pygraphviz(G, edgelabel=foo_label, show=False)
107         for edge in A.edges():
108             assert edge.attr["<font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>label"] == "foo"
109     def test_view_pygraphviz_multigraph_edgelabels(self):
110         G = nx.MultiGraph()
111         G.add_edge(0, 1, key=0, name="left_fork")
112         G.add_edge(0, 1, key=1, name="right_fork")
113         path, A =</b></font> nx.nx_agraph.view_pygraphviz(G, edgelabel="name", show=False)
114         edges = A.edges()
115         assert len(edges) == 2
116         for edge in edges:
117             assert edge.attr["label"].strip() in ("left_fork", "right_fork")
118     def test_graph_with_reserved_keywords(self):
119         G = nx.Graph()
120         G = self.build_graph(G)
121         G.nodes["E"]["n"] = "keyword"
122         G.edges[("A", "B")]["u"] = "keyword"
123         G.edges[("A", "B")]["v"] = "keyword"
124         A = nx.nx_agraph.to_agraph(G)
125     def test_view_pygraphviz_no_added_attrs_to_input(self):
126         G = nx.complete_graph(2)
127         path, A = nx.nx_agraph.view_pygraphviz(G, show=False)
128         assert G.graph == {}
129     @pytest.mark.xfail(reason="known bug in clean_attrs")
130     def test_view_pygraphviz_leaves_input_graph_unmodified(self):
131         G = nx.complete_graph(2)
132         G.graph["node"] = {"width": "0.80"}
133         G.graph["edge"] = {"fontsize": "14"}
134         path, A = nx.nx_agraph.view_pygraphviz(G, show=False)
135         assert G.graph == {"node": {"width": "0.80"}, "edge": {"fontsize": "14"}}
136     def test_graph_with_AGraph_attrs(self):
137         G = nx.complete_graph(2)
138         G.graph["node"] = {"width": "0.80"}
139         G.graph["edge"] = {"fontsize": "14"}
140         path, A = nx.nx_agraph.view_pygraphviz(G, show=False)
141         assert dict(A.node_attr)["width"] == "0.80"
142         assert dict(A.edge_attr)["fontsize"] == "14"
143     def test_round_trip_empty_graph(self):
144         G = nx.Graph()
145         A = nx.nx_agraph.to_agraph(G)
146         H = nx.nx_agraph.from_agraph(A)
147         AA = nx.nx_agraph.to_agraph(H)
148         HH = nx.nx_agraph.from_agraph(AA)
149         assert graphs_equal(H, HH)
150         G.graph["graph"] = {}
151         G.graph["node"] = {}
152         G.graph["edge"] = {}
153         assert graphs_equal(G, HH)
154     @pytest.mark.xfail(reason="integer-&gt;string node conversion in round trip")
155     def test_round_trip_integer_nodes(self):
156         G = nx.complete_graph(3)
157         A = nx.nx_agraph.to_agraph(G)
158         H = nx.nx_agraph.from_agraph(A)
159         assert graphs_equal(G, H)
160     def test_graphviz_alias(self):
161         G = self.build_graph(nx.Graph())
162         pos_graphviz = nx.nx_agraph.graphviz_layout(G)
163         pos_pygraphviz = nx.nx_agraph.pygraphviz_layout(G)
164         assert pos_graphviz == pos_pygraphviz
165     @pytest.mark.parametrize("root", range(5))
166     def test_pygraphviz_layout_root(self, root):
167         G = nx.complete_graph(5)
168         A = nx.nx_agraph.to_agraph(G)
169         pygv_layout = nx.nx_agraph.pygraphviz_layout(G, prog="circo", root=root)
170         A.layout(args=f"-Groot={root}", prog="circo")
171         a1_pos = tuple(float(v) for v in dict(A.get_node("1").attr)["pos"].split(","))
172         assert pygv_layout[1] == a1_pos
173     def test_2d_layout(self):
174         G = nx.Graph()
175         G = self.build_graph(G)
176         G.graph["dimen"] = 2
177         pos = nx.nx_agraph.pygraphviz_layout(G, prog="neato")
178         pos = list(pos.values())
179         assert len(pos) == 5
180         assert len(pos[0]) == 2
181     def test_3d_layout(self):
182         G = nx.Graph()
183         G = self.build_graph(G)
184         G.graph["dimen"] = 3
185         pos = nx.nx_agraph.pygraphviz_layout(G, prog="neato")
186         pos = list(pos.values())
187         assert len(pos) == 5
188         assert len(pos[0]) == 3
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>test_mincost.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 import networkx as nx
2 import pytest
3 import os
4 class TestMinCostFlow:
5     def test_simple_digraph(self):
6         G = nx.DiGraph()
7         G.add_node("a", demand=-5)
8         G.add_node("d", demand=5)
9         G.add_edge("a", "b", weight=3, capacity=4)
10         G.add_edge("a", "c", weight=6, capacity=10)
11         G.add_edge("b", "d", weight=1, capacity=9)
12         G.add_edge("c", "d", weight=2, capacity=5)
13         flowCost, H = nx.network_simplex(G)
14         soln = {"a": {"b": 4, "c": 1}, "b": {"d": 4}, "c": {"d": 1}, "d": {}}
15         assert flowCost == 24
16         assert nx.min_cost_flow_cost(G) == 24
17         assert H == soln
18         assert nx.min_cost_flow(G) == soln
19         assert nx.cost_of_flow(G, H) == 24
20         flowCost, H = nx.capacity_scaling(G)
21         assert flowCost == 24
22         assert nx.cost_of_flow(G, H) == 24
23         assert H == soln
24     def test_negcycle_infcap(self):
25         G = nx.DiGraph()
26         G.add_node("s", demand=-5)
27         G.add_node("t", demand=5)
28         G.add_edge("s", "a", weight=1, capacity=3)
29         G.add_edge("a", "b", weight=3)
30         G.add_edge("c", "a", weight=-6)
31         G.add_edge("b", "d", weight=1)
32         G.add_edge("d", "c", weight=-2)
33         G.add_edge("d", "t", weight=1, capacity=3)
34         pytest.raises(nx.NetworkXUnfeasible, nx.network_simplex, G)
35         pytest.raises(nx.NetworkXUnbounded, nx.capacity_scaling, G)
36     def test_sum_demands_not_zero(self):
37         G = nx.DiGraph()
38         G.add_node("s", demand=-5)
39         G.add_node("t", demand=4)
40         G.add_edge("s", "a", weight=1, capacity=3)
41         G.add_edge("a", "b", weight=3)
42         G.add_edge("a", "c", weight=-6)
43         G.add_edge("b", "d", weight=1)
44         G.add_edge("c", "d", weight=-2)
45         G.add_edge("d", "t", weight=1, capacity=3)
46         pytest.raises(nx.NetworkXUnfeasible, nx.network_simplex, G)
47         pytest.raises(nx.NetworkXUnfeasible, nx.capacity_scaling, G)
48     def test_no_flow_satisfying_demands(self):
49         G = nx.DiGraph()
50         G.add_node("s", demand=-5)
51         G.add_node("t", demand=5)
52         G.add_edge("s", "a", weight=1, capacity=3)
53         G.add_edge("a", "b", weight=3)
54         G.add_edge("a", "c", weight=-6)
55         G.add_edge("b", "d", weight=1)
56         G.add_edge("c", "d", weight=-2)
57         G.add_edge("d", "t", weight=1, capacity=3)
58         pytest.raises(nx.NetworkXUnfeasible, nx.network_simplex, G)
59         pytest.raises(nx.NetworkXUnfeasible, nx.capacity_scaling, G)
60     def test_transshipment(self):
61         G = nx.DiGraph()
62         G.add_node("a", demand=1)
63         G.add_node("b", demand=-2)
64         G.add_node("c", demand=-2)
65         G.add_node("d", demand=3)
66         G.add_node("e", demand=-4)
67         G.add_node("f", demand=-4)
68         G.add_node("g", demand=3)
69         G.add_node("h", demand=2)
70         G.add_node("r", demand=3)
71         G.add_edge("a", "c", weight=3)
72         G.add_edge("r", "a", weight=2)
73         G.add_edge("b", "a", weight=9)
74         G.add_edge("r", "c", weight=0)
75         G.add_edge("b", "r", weight=-6)
76         G.add_edge("c", "d", weight=5)
77         G.add_edge("e", "r", weight=4)
78         G.add_edge("e", "f", weight=3)
79         G.add_edge("h", "b", weight=4)
80         G.add_edge("f", "d", weight=7)
81         G.add_edge("f", "h", weight=12)
82         G.add_edge("g", "d", weight=12)
83         G.add_edge("f", "g", weight=-1)
84         G.add_edge("h", "g", weight=-10)
85         flowCost, H = nx.network_simplex(G)
86         soln = {
87             "a": {"c": 0},
88             "b": {"a": 0, "r": 2},
89             "c": {"d": 3},
90             "d": {},
91             "e": {"r": 3, "f": 1},
92             "f": {"d": 0, "g": 3, "h": 2},
93             "g": {"d": 0},
94             "h": {"b": 0, "g": 0},
95             "r": {"a": 1, "c": 1},
96         }
97         assert flowCost == 41
98         assert nx.min_cost_flow_cost(G) == 41
99         assert H == soln
100         assert nx.min_cost_flow(G) == soln
101         assert nx.cost_of_flow(G, H) == 41
102         flowCost, H = nx.capacity_scaling(G)
103         assert flowCost == 41
104         assert nx.cost_of_flow(G, H) == 41
105         assert H == soln
106     def test_max_flow_min_cost(self):
107         G = nx.DiGraph()
108         G.add_edge("s", "a", bandwidth=6)
109         G.add_edge("s", "c", bandwidth=10, cost=10)
110         G.add_edge("a", "b", cost=6)
111         G.add_edge("b", "d", bandwidth=8, cost=7)
112         G.add_edge("c", "d", cost=10)
113         G.add_edge("d", "t", bandwidth=5, cost=5)
114         soln = {
115             "s": {"a": 5, "c": 0},
116             "a": {"b": 5},
117             "b": {"d": 5},
118             "c": {"d": 0},
119             "d": {"t": 5},
120             "t": {},
121         }
122         flow = nx.max_flow_min_cost(G, "s", "t", capacity="bandwidth", weight="cost")
123         assert flow == soln
124         assert nx.cost_of_flow(G, flow, weight="cost") == 90
125         G.add_edge("t", "s", cost=-100)
126         flowCost, flow = nx.capacity_scaling(G, capacity="bandwidth", weight="cost")
127         G.remove_edge("t", "s")
128         assert flowCost == -410
129 <a name="1"></a>        assert flow["t"]["s"] == 5
130         del flow["t"]["s"]
131         assert flow == soln
132         assert nx<font color="#f63526"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>.cost_of_flow(G, flow, weight="cost") == 90
133     def test_digraph1(self):
134         G = nx.DiGraph()
135         G.add_node(1, demand=-20)
136         G.add_node(4, demand=</b></font>5)
137         G.add_node(5, demand=15)
138         G.add_edges_from(
139             [
140                 (1, 2, {"capacity": 15, "weight": 4}),
141                 (1, 3, {"capacity": 8, "weight": 4}),
142                 (2, 3, {"weight": 2}),
143                 (2, 4, {"capacity": 4, "weight": 2}),
144                 (2, 5, {"capacity": 10, "weight": 6}),
145                 (3, 4, {"capacity": 15, "weight": 1}),
146                 (3, 5, {"capacity": 5, "weight": 3}),
147                 (4, 5, {"weight": 2}),
148                 (5, 3, {"capacity": 4, "weight": 1}),
149             ]
150         )
151         flowCost, H = nx.network_simplex(G)
152         soln = {
153             1: {2: 12, 3: 8},
154             2: {3: 8, 4: 4, 5: 0},
155             3: {4: 11, 5: 5},
156             4: {5: 10},
157             5: {3: 0},
158         }
159         assert flowCost == 150
160         assert nx.min_cost_flow_cost(G) == 150
161         assert H == soln
162         assert nx.min_cost_flow(G) == soln
163         assert nx.cost_of_flow(G, H) == 150
164         flowCost, H = nx.capacity_scaling(G)
165         assert flowCost == 150
166         assert H == soln
167         assert nx.cost_of_flow(G, H) == 150
168     def test_digraph2(self):
169         G = nx.DiGraph()
170         G.add_edge("s", 1, capacity=12)
171         G.add_edge("s", 2, capacity=6)
172         G.add_edge("s", 3, capacity=14)
173         G.add_edge(1, 2, capacity=11, weight=4)
174         G.add_edge(2, 3, capacity=9, weight=6)
175         G.add_edge(1, 4, capacity=5, weight=5)
176         G.add_edge(1, 5, capacity=2, weight=12)
177         G.add_edge(2, 5, capacity=4, weight=4)
178         G.add_edge(2, 6, capacity=2, weight=6)
179         G.add_edge(3, 6, capacity=31, weight=3)
180         G.add_edge(4, 5, capacity=18, weight=4)
181         G.add_edge(5, 6, capacity=9, weight=5)
182         G.add_edge(4, "t", capacity=3)
183         G.add_edge(5, "t", capacity=7)
184         G.add_edge(6, "t", capacity=22)
185         flow = nx.max_flow_min_cost(G, "s", "t")
186         soln = {
187             1: {2: 6, 4: 5, 5: 1},
188             2: {3: 6, 5: 4, 6: 2},
189             3: {6: 20},
190             4: {5: 2, "t": 3},
191             5: {6: 0, "t": 7},
192             6: {"t": 22},
193             "s": {1: 12, 2: 6, 3: 14},
194             "t": {},
195         }
196         assert flow == soln
197         G.add_edge("t", "s", weight=-100)
198         flowCost, flow = nx.capacity_scaling(G)
199         G.remove_edge("t", "s")
200         assert flow["t"]["s"] == 32
201         assert flowCost == -3007
202         del flow["t"]["s"]
203         assert flow == soln
204         assert nx.cost_of_flow(G, flow) == 193
205     def test_digraph3(self):
206         nodes = [(1, {}), (2, {"demand": -4}), (3, {"demand": 4})]
207         edges = [
208             (1, 2, {"capacity": 3, "weight": 600000}),
209             (2, 1, {"capacity": 2, "weight": 0}),
210             (2, 3, {"capacity": 5, "weight": 714285}),
211             (3, 2, {"capacity": 2, "weight": 0}),
212         ]
213         G = nx.DiGraph(edges)
214         G.add_nodes_from(nodes)
215         flowCost, H = nx.network_simplex(G)
216         soln = {1: {2: 0}, 2: {1: 0, 3: 4}, 3: {2: 0}}
217         assert flowCost == 2857140
218         assert nx.min_cost_flow_cost(G) == 2857140
219         assert H == soln
220         assert nx.min_cost_flow(G) == soln
221         assert nx.cost_of_flow(G, H) == 2857140
222         flowCost, H = nx.capacity_scaling(G)
223         assert flowCost == 2857140
224         assert H == soln
225         assert nx.cost_of_flow(G, H) == 2857140
226     def test_deadend(self):
227         instance."""
228         nodes = [(1, {}), (2, {"demand": -4}), (3, {"demand": 4})]
229         edges = [
230             (1, 2, {"weight": -600}),
231             (2, 1, {"weight": 0}),
232             (2, 3, {"capacity": 5, "weight": 714285}),
233             (3, 2, {"capacity": 2, "weight": 0}),
234         ]
235 <a name="0"></a>        G = nx.DiGraph(edges)
236         G.add_nodes_from(nodes)
237         pytest.raises(nx.NetworkXUnbounded, nx.network_simplex, G)
238         pytest.raises(nx.NetworkXUnbounded, nx.<font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>capacity_scaling, G)
239     def test_finite_capacity_neg_digon(self):
240         min_cost =</b></font> -2
241         assert nx.min_cost_flow_cost(G) == min_cost
242         flowCost, H = nx.capacity_scaling(G)
243         assert flowCost == -2
244         assert H == {"a": {"b": 1}, "b": {"a": 1}}
245         assert nx.cost_of_flow(G, H) == -2
246     def test_multidigraph(self):
247         G = nx.MultiDiGraph()
248         G.add_weighted_edges_from([(1, 2, 1), (2, 3, 2)], weight="capacity")
249         flowCost, H = nx.network_simplex(G)
250         assert flowCost == 0
251         assert H == {1: {2: {0: 0}}, 2: {3: {0: 0}}, 3: {}}
252         flowCost, H = nx.capacity_scaling(G)
253         assert flowCost == 0
254         assert H == {1: {2: {0: 0}}, 2: {3: {0: 0}}, 3: {}}
255     def test_negative_selfloops(self):
256         G = nx.DiGraph()
257         G.add_edge(1, 1, weight=-1)
258         pytest.raises(nx.NetworkXUnbounded, nx.network_simplex, G)
259         pytest.raises(nx.NetworkXUnbounded, nx.capacity_scaling, G)
260         G[1][1]["capacity"] = 2
261         flowCost, H = nx.network_simplex(G)
262         assert flowCost == -2
263         assert H == {1: {1: 2}}
264         flowCost, H = nx.capacity_scaling(G)
265         assert flowCost == -2
266         assert H == {1: {1: 2}}
267         G = nx.MultiDiGraph()
268         G.add_edge(1, 1, "x", weight=-1)
269         G.add_edge(1, 1, "y", weight=1)
270         pytest.raises(nx.NetworkXUnbounded, nx.network_simplex, G)
271         pytest.raises(nx.NetworkXUnbounded, nx.capacity_scaling, G)
272         G[1][1]["x"]["capacity"] = 2
273         flowCost, H = nx.network_simplex(G)
274         assert flowCost == -2
275         assert H == {1: {1: {"x": 2, "y": 0}}}
276         flowCost, H = nx.capacity_scaling(G)
277         assert flowCost == -2
278         assert H == {1: {1: {"x": 2, "y": 0}}}
279     def test_bone_shaped(self):
280         G = nx.DiGraph()
281         G.add_node(0, demand=-4)
282         G.add_node(1, demand=2)
283         G.add_node(2, demand=2)
284         G.add_node(3, demand=4)
285         G.add_node(4, demand=-2)
286         G.add_node(5, demand=-2)
287         G.add_edge(0, 1, capacity=4)
288         G.add_edge(0, 2, capacity=4)
289         G.add_edge(4, 3, capacity=4)
290         G.add_edge(5, 3, capacity=4)
291         G.add_edge(0, 3, capacity=0)
292         flowCost, H = nx.network_simplex(G)
293         assert flowCost == 0
294         assert H == {0: {1: 2, 2: 2, 3: 0}, 1: {}, 2: {}, 3: {}, 4: {3: 2}, 5: {3: 2}}
295         flowCost, H = nx.capacity_scaling(G)
296         assert flowCost == 0
297         assert H == {0: {1: 2, 2: 2, 3: 0}, 1: {}, 2: {}, 3: {}, 4: {3: 2}, 5: {3: 2}}
298     def test_exceptions(self):
299         G = nx.Graph()
300         pytest.raises(nx.NetworkXNotImplemented, nx.network_simplex, G)
301         pytest.raises(nx.NetworkXNotImplemented, nx.capacity_scaling, G)
302         G = nx.MultiGraph()
303         pytest.raises(nx.NetworkXNotImplemented, nx.network_simplex, G)
304         pytest.raises(nx.NetworkXNotImplemented, nx.capacity_scaling, G)
305         G = nx.DiGraph()
306         pytest.raises(nx.NetworkXError, nx.network_simplex, G)
307         pytest.raises(nx.NetworkXError, nx.capacity_scaling, G)
308         G.add_node(0, demand=float("inf"))
309         pytest.raises(nx.NetworkXError, nx.network_simplex, G)
310         pytest.raises(nx.NetworkXUnfeasible, nx.capacity_scaling, G)
311         G.nodes[0]["demand"] = 0
312         G.add_node(1, demand=0)
313         G.add_edge(0, 1, weight=-float("inf"))
314         pytest.raises(nx.NetworkXError, nx.network_simplex, G)
315         pytest.raises(nx.NetworkXUnfeasible, nx.capacity_scaling, G)
316         G[0][1]["weight"] = 0
317         G.add_edge(0, 0, weight=float("inf"))
318         pytest.raises(nx.NetworkXError, nx.network_simplex, G)
319         G[0][0]["weight"] = 0
320         G[0][1]["capacity"] = -1
321         pytest.raises(nx.NetworkXUnfeasible, nx.network_simplex, G)
322         G[0][1]["capacity"] = 0
323         G[0][0]["capacity"] = -1
324         pytest.raises(nx.NetworkXUnfeasible, nx.network_simplex, G)
325     def test_large(self):
326         fname = os.path.join(os.path.dirname(__file__), "netgen-2.gpickle.bz2")
327         G = nx.read_gpickle(fname)
328         flowCost, flowDict = nx.network_simplex(G)
329         assert 6749969302 == flowCost
330         assert 6749969302 == nx.cost_of_flow(G, flowDict)
331         flowCost, flowDict = nx.capacity_scaling(G)
332         assert 6749969302 == flowCost
333         assert 6749969302 == nx.cost_of_flow(G, flowDict)
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
