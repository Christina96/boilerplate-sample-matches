<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for tumblr.py &amp; safari.py</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for tumblr.py &amp; safari.py
      </h3>
<h1 align="center">
        12.1%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>tumblr.py (15.697675%)<th>safari.py (9.926471%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(106-114)<td><a href="#" name="0">(28-36)</a><td align="center"><font color="#ff0000">14</font>
<tr onclick='openModal("#f63526")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f63526"><font color="#f63526">-</font><td><a href="#" name="1">(14-49)<td><a href="#" name="1">(85-122)</a><td align="center"><font color="#ec0000">13</font>
</td></td></a></td></td></tr></td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>tumblr.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 from __future__ import unicode_literals
2 import re
3 from .common import InfoExtractor
4 from ..utils import (
5     ExtractorError,
6     int_or_none,
7     urlencode_postdata
8 <font color="#f63526"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>class TumblrIE(InfoExtractor):
9     _VALID_URL = r'https?://(?P&lt;blog_name&gt;[^/?#&amp;]+)\.tumblr\.com/(?:post|video)/(?P&lt;id&gt;[0-9]+)(?:$|[/?#])'
10     _NETRC_MACHINE = 'tumblr'
11     _LOGIN_URL = 'https://www.tumblr.com/login'
12     _TESTS = [{
13         'url': 'http://tatianamaslanydaily.tumblr.com/post/54196191430/orphan-black-dvd-extra-behind-the-scenes',
14         'md5': '479bb068e5b16462f5176a6828829767',
15         'info_dict': {
16             'id': '54196191430',
17             'ext': 'mp4',
18             'title': 'tatiana maslany news, Orphan Black || DVD extra - behind the scenes ↳...',
19             'description': 'md5:37db8211e40b50c7c44e95da14f630b7',
20             'thumbnail': r're:http://.*\.jpg',
21         }
22     }, {
23         'url': 'http://5sostrum.tumblr.com/post/90208453769/yall-forgetting-the-greatest-keek-of-them-all',
24         'md5': 'bf348ef8c0ef84fbf1cbd6fa6e000359',
25         'info_dict': {
26             'id': '90208453769',
27             'ext': 'mp4',
28             'title': '5SOS STRUM ;]',
29             'description': 'md5:dba62ac8639482759c8eb10ce474586a',
30             'thumbnail': r're:http://.*\.jpg',
31         }
32     }, {
33         'url': 'http://hdvideotest.tumblr.com/post/130323439814/test-description-for-my-hd-video',
34         'md5': '7ae503065ad150122dc3089f8cf1546c',
35         'info_dict': {
36             'id': '130323439814',
37             'ext': 'mp4',
38             'title': 'HD Video Testing \u2014 Test description for my HD video',
39             'description': 'md5:97cc3ab5fcd27ee4af6356701541319c',
40             'thumbnail': r're:http://.*\.jpg',
41         },
42         'params': {
43             'format'</b></font>: 'hd',
44         },
45     }, {
46         'url': 'http://naked-yogi.tumblr.com/post/118312946248/naked-smoking-stretching',
47         'md5': 'de07e5211d60d4f3a2c3df757ea9f6ab',
48         'info_dict': {
49             'id': 'Wmur',
50             'ext': 'mp4',
51             'title': 'naked smoking &amp; stretching',
52             'upload_date': '20150506',
53             'timestamp': 1430931613,
54             'age_limit': 18,
55             'uploader_id': '1638622',
56             'uploader': 'naked-yogi',
57         },
58         'add_ie': ['Vidme'],
59     }, {
60         'url': 'http://camdamage.tumblr.com/post/98846056295/',
61         'md5': 'a9e0c8371ea1ca306d6554e3fecf50b6',
62         'info_dict': {
63             'id': '105463834',
64             'ext': 'mp4',
65             'title': 'Cam Damage-HD 720p',
66             'uploader': 'John Moyer',
67             'uploader_id': 'user32021558',
68         },
69         'add_ie': ['Vimeo'],
70     }, {
71         'url': 'http://sutiblr.tumblr.com/post/139638707273',
72         'md5': '2dd184b3669e049ba40563a7d423f95c',
73         'info_dict': {
74             'id': 'ir7qBEIKqvq',
75             'ext': 'mp4',
76             'title': 'Vine by sutiblr',
77             'alt_title': 'Vine by sutiblr',
78             'uploader': 'sutiblr',
79             'uploader_id': '1198993975374495744',
80             'upload_date': '20160220',
81             'like_count': int,
82             'comment_count': int,
83             'repost_count': int,
84         },
85         'add_ie': ['Vine'],
86     }, {
87         'url': 'http://vitasidorkina.tumblr.com/post/134652425014/joskriver-victoriassecret-invisibility-or',
88         'md5': '01c12ceb82cbf6b2fe0703aa56b3ad72',
89         'info_dict': {
90             'id': '-7LnUPGlSo',
91             'ext': 'mp4',
92             'title': 'Video by victoriassecret',
93             'description': 'Invisibility or flight…which superpower would YOU choose? #VSFashionShow #ThisOrThat',
94             'uploader_id': 'victoriassecret',
95             'thumbnail': r're:^https?://.*\.jpg'
96         },
97     }]
98     <font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>def _real_initialize(self):
99         self._login()
100     def _login(self):
101         username, password = self._get_login_info()
102         if username is None:
103             return
104         login_page = self._download_webpage(</b></font>
105             self._LOGIN_URL, None, 'Downloading login page')
106         login_form = self._hidden_inputs(login_page)
107         login_form.update({
108             'user[email]': username,
109             'user[password]': password
110         })
111         response, urlh = self._download_webpage_handle(
112             self._LOGIN_URL, None, 'Logging in',
113             data=urlencode_postdata(login_form), headers={
114                 'Content-Type': 'application/x-www-form-urlencoded',
115                 'Referer': self._LOGIN_URL,
116             })
117         if '/dashboard' in urlh.geturl():
118             return
119         login_errors = self._parse_json(
120             self._search_regex(
121                 r'RegistrationForm\.errors\s*=\s*(\[.+?\])\s*;', response,
122                 'login errors', default='[]'),
123             None, fatal=False)
124         if login_errors:
125             raise ExtractorError(
126                 'Unable to login: %s' % login_errors[0], expected=True)
127         self.report_warning('Login has probably failed')
128     def _real_extract(self, url):
129         m_url = re.match(self._VALID_URL, url)
130         video_id = m_url.group('id')
131         blog = m_url.group('blog_name')
132         url = 'http://%s.tumblr.com/post/%s/' % (blog, video_id)
133         webpage, urlh = self._download_webpage_handle(url, video_id)
134         redirect_url = urlh.geturl()
135         if 'tumblr.com/safe-mode' in redirect_url or redirect_url.startswith('/safe-mode'):
136             raise ExtractorError(
137                 'This Tumblr may contain sensitive media. '
138                 'Disable safe mode in your account settings '
139                 'at https://www.tumblr.com/settings/account#safe_mode',
140                 expected=True)
141         iframe_url = self._search_regex(
142             r'src=\'(https?://www\.tumblr\.com/video/[^\']+)\'',
143             webpage, 'iframe url', default=None)
144         if iframe_url is None:
145             return self.url_result(redirect_url, 'Generic')
146         iframe = self._download_webpage(iframe_url, video_id, 'Downloading iframe page')
147         duration = None
148         sources = []
149         sd_url = self._search_regex(
150             r'&lt;source[^&gt;]+src=(["\'])(?P&lt;url&gt;.+?)\1', iframe,
151             'sd video url', default=None, group='url')
152         if sd_url:
153             sources.append((sd_url, 'sd'))
154         options = self._parse_json(
155             self._search_regex(
156                 r'data-crt-options=(["\'])(?P&lt;options&gt;.+?)\1', iframe,
157                 'hd video url', default='', group='options'),
158             video_id, fatal=False)
159         if options:
160             duration = int_or_none(options.get('duration'))
161             hd_url = options.get('hdUrl')
162             if hd_url:
163                 sources.append((hd_url, 'hd'))
164         formats = [{
165             'url': video_url,
166             'ext': 'mp4',
167             'format_id': format_id,
168             'height': int_or_none(self._search_regex(
169                 r'/(\d{3,4})$', video_url, 'height', default=None)),
170             'quality': quality,
171         } for quality, (video_url, format_id) in enumerate(sources)]
172         self._sort_formats(formats)
173         video_title = self._html_search_regex(
174             r'(?s)&lt;title&gt;(?P&lt;title&gt;.*?)(?: \| Tumblr)?&lt;/title&gt;',
175             webpage, 'title')
176         return {
177             'id': video_id,
178             'title': video_title,
179             'description': self._og_search_description(webpage, default=None),
180             'thumbnail': self._og_search_thumbnail(webpage, default=None),
181             'duration': duration,
182             'formats': formats,
183         }
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>safari.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 from __future__ import unicode_literals
2 import json
3 import re
4 from .common import InfoExtractor
5 from ..compat import (
6     compat_parse_qs,
7     compat_urlparse,
8 )
9 from ..utils import (
10     ExtractorError,
11     update_url_query,
12 )
13 class SafariBaseIE(InfoExtractor):
14     _LOGIN_URL = 'https://learning.oreilly.com/accounts/login/'
15     _NETRC_MACHINE = 'safari'
16     _API_BASE = 'https://learning.oreilly.com/api/v1'
17     _API_FORMAT = 'json'
18     LOGGED_IN = False
19     <font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>def _real_initialize(self):
20         self._login()
21     def _login(self):
22         username, password = self._get_login_info()
23         if username is None:
24             return
25         _, urlh = self._download_webpage_handle(</b></font>
26             'https://learning.oreilly.com/accounts/login-check/', None,
27             'Downloading login page')
28         def is_logged(urlh):
29             return 'learning.oreilly.com/home/' in urlh.geturl()
30         if is_logged(urlh):
31             self.LOGGED_IN = True
32             return
33         redirect_url = urlh.geturl()
34         parsed_url = compat_urlparse.urlparse(redirect_url)
35         qs = compat_parse_qs(parsed_url.query)
36         next_uri = compat_urlparse.urljoin(
37             'https://api.oreilly.com', qs['next'][0])
38         auth, urlh = self._download_json_handle(
39             'https://www.oreilly.com/member/auth/login/', None, 'Logging in',
40             data=json.dumps({
41                 'email': username,
42                 'password': password,
43                 'redirect_uri': next_uri,
44             }).encode(), headers={
45                 'Content-Type': 'application/json',
46                 'Referer': redirect_url,
47             }, expected_status=400)
48         credentials = auth.get('credentials')
49         if (not auth.get('logged_in') and not auth.get('redirect_uri')
50                 and credentials):
51             raise ExtractorError(
52                 'Unable to login: %s' % credentials, expected=True)
53         for cookie in ('groot_sessionid', 'orm-jwt', 'orm-rt'):
54             self._apply_first_set_cookie_header(urlh, cookie)
55         _, urlh = self._download_webpage_handle(
56             auth.get('redirect_uri') or next_uri, None, 'Completing login',)
57         if is_logged(urlh):
58             self.LOGGED_IN = True
59             return
60 <font color="#f63526"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>class SafariIE(SafariBaseIE):
61     IE_NAME = 'safari'
62     IE_DESC = 'safaribooksonline.com online video'
63     _VALID_URL = r'''(?x)
64                         https?://
65                             (?:www\.)?(?:safaribooksonline|(?:learning\.)?oreilly)\.com/
66                             (?:
67                                 library/view/[^/]+/(?P&lt;course_id&gt;[^/]+)/(?P&lt;part&gt;[^/?\#&amp;]+)\.html|
68                                 videos/[^/]+/[^/]+/(?P&lt;reference_id&gt;[^-]+-[^/?\#&amp;]+)
69                             )
70                     '''
71         'url'</b></font>: 'https://www.oreilly.com/library/view/hadoop-fundamentals-livelessons/9780133392838/00_SeriesIntro.html',
72         'only_matching': True,
73     }]
74     _PARTNER_ID = '1926081'
75     _UICONF_ID = '29375172'
76     def _real_extract(self, url):
77         mobj = re.match(self._VALID_URL, url)
78         reference_id = mobj.group('reference_id')
79         if reference_id:
80             video_id = reference_id
81             partner_id = self._PARTNER_ID
82             ui_id = self._UICONF_ID
83         else:
84             video_id = '%s-%s' % (mobj.group('course_id'), mobj.group('part'))
85             webpage, urlh = self._download_webpage_handle(url, video_id)
86             mobj = re.match(self._VALID_URL, urlh.geturl())
87             reference_id = mobj.group('reference_id')
88             if not reference_id:
89                 reference_id = self._search_regex(
90                     r'data-reference-id=(["\'])(?P&lt;id&gt;(?:(?!\1).)+)\1',
91                     webpage, 'kaltura reference id', group='id')
92             partner_id = self._search_regex(
93                 r'data-partner-id=(["\'])(?P&lt;id&gt;(?:(?!\1).)+)\1',
94                 webpage, 'kaltura widget id', default=self._PARTNER_ID,
95                 group='id')
96             ui_id = self._search_regex(
97                 r'data-ui-id=(["\'])(?P&lt;id&gt;(?:(?!\1).)+)\1',
98                 webpage, 'kaltura uiconf id', default=self._UICONF_ID,
99                 group='id')
100         query = {
101             'wid': '_%s' % partner_id,
102             'uiconf_id': ui_id,
103             'flashvars[referenceId]': reference_id,
104         }
105         if self.LOGGED_IN:
106             kaltura_session = self._download_json(
107                 '%s/player/kaltura_session/?reference_id=%s' % (self._API_BASE, reference_id),
108                 video_id, 'Downloading kaltura session JSON',
109                 'Unable to download kaltura session JSON', fatal=False,
110                 headers={'Accept': 'application/json'})
111             if kaltura_session:
112                 session = kaltura_session.get('session')
113                 if session:
114                     query['flashvars[ks]'] = session
115         return self.url_result(update_url_query(
116             'https://cdnapisec.kaltura.com/html5/html5lib/v2.37.1/mwEmbedFrame.php', query),
117             'Kaltura')
118 class SafariApiIE(SafariBaseIE):
119     IE_NAME = 'safari:api'
120     _VALID_URL = r'https?://(?:www\.)?(?:safaribooksonline|(?:learning\.)?oreilly)\.com/api/v1/book/(?P&lt;course_id&gt;[^/]+)/chapter(?:-content)?/(?P&lt;part&gt;[^/?#&amp;]+)\.html'
121     _TESTS = [{
122         'url': 'https://www.safaribooksonline.com/api/v1/book/9780133392838/chapter/part00.html',
123         'only_matching': True,
124     }, {
125         'url': 'https://www.safaribooksonline.com/api/v1/book/9780134664057/chapter/RHCE_Introduction.html',
126         'only_matching': True,
127     }]
128     def _real_extract(self, url):
129         mobj = re.match(self._VALID_URL, url)
130         part = self._download_json(
131             url, '%s/%s' % (mobj.group('course_id'), mobj.group('part')),
132             'Downloading part JSON')
133         return self.url_result(part['web_url'], SafariIE.ie_key())
134 class SafariCourseIE(SafariBaseIE):
135     IE_NAME = 'safari:course'
136     IE_DESC = 'safaribooksonline.com online courses'
137     _VALID_URL = r'''(?x)
138                     https?://
139                         (?:
140                             (?:www\.)?(?:safaribooksonline|(?:learning\.)?oreilly)\.com/
141                             (?:
142                                 library/view/[^/]+|
143                                 api/v1/book|
144                                 videos/[^/]+
145                             )|
146                             techbus\.safaribooksonline\.com
147                         )
148                         /(?P&lt;id&gt;[^/]+)
149                     '''
150     _TESTS = [{
151         'url': 'https://www.safaribooksonline.com/library/view/hadoop-fundamentals-livelessons/9780133392838/',
152         'info_dict': {
153             'id': '9780133392838',
154             'title': 'Hadoop Fundamentals LiveLessons',
155         },
156         'playlist_count': 22,
157         'skip': 'Requires safaribooksonline account credentials',
158     }, {
159         'url': 'https://www.safaribooksonline.com/api/v1/book/9781449396459/?override_format=json',
160         'only_matching': True,
161     }, {
162         'url': 'http://techbus.safaribooksonline.com/9780134426365',
163         'only_matching': True,
164     }, {
165         'url': 'https://www.safaribooksonline.com/videos/python-programming-language/9780134217314',
166         'only_matching': True,
167     }, {
168         'url': 'https://learning.oreilly.com/videos/hadoop-fundamentals-livelessons/9780133392838',
169         'only_matching': True,
170     }, {
171         'url': 'https://www.oreilly.com/library/view/hadoop-fundamentals-livelessons/9780133392838/',
172         'only_matching': True,
173     }]
174     @classmethod
175     def suitable(cls, url):
176         return (False if SafariIE.suitable(url) or SafariApiIE.suitable(url)
177                 else super(SafariCourseIE, cls).suitable(url))
178     def _real_extract(self, url):
179         course_id = self._match_id(url)
180         course_json = self._download_json(
181             '%s/book/%s/?override_format=%s' % (self._API_BASE, course_id, self._API_FORMAT),
182             course_id, 'Downloading course JSON')
183         if 'chapters' not in course_json:
184             raise ExtractorError(
185                 'No chapters found for course %s' % course_id, expected=True)
186         entries = [
187             self.url_result(chapter, SafariApiIE.ie_key())
188             for chapter in course_json['chapters']]
189         course_title = course_json['title']
190         return self.playlist_result(entries, course_id, course_title)
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
