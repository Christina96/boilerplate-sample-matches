<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for tumblr.py &amp; safari.py</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for tumblr.py &amp; safari.py
      </h3>
<h1 align="center">
        12.1%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>tumblr.py (15.697675%)<th>safari.py (9.926471%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(106-114)<td><a href="#" name="0">(28-36)</a><td align="center"><font color="#ff0000">14</font>
<tr onclick='openModal("#f63526")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f63526"><font color="#f63526">-</font><td><a href="#" name="1">(14-49)<td><a href="#" name="1">(85-122)</a><td align="center"><font color="#ec0000">13</font>
</td></td></a></td></td></tr></td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>tumblr.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 from __future__ import unicode_literals
2 import re
3 from .common import InfoExtractor
4 from ..utils import (
5     ExtractorError,
6     int_or_none,
7     urlencode_postdata
8 <a name="1"></a>)
9 <font color="#f63526"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>class TumblrIE(InfoExtractor):
10     _VALID_URL = r'https?://(?P&lt;blog_name&gt;[^/?#&amp;]+)\.tumblr\.com/(?:post|video)/(?P&lt;id&gt;[0-9]+)(?:$|[/?#])'
11     _NETRC_MACHINE = 'tumblr'
12     _LOGIN_URL = 'https://www.tumblr.com/login'
13     _TESTS = [{
14         'url': 'http://tatianamaslanydaily.tumblr.com/post/54196191430/orphan-black-dvd-extra-behind-the-scenes',
15         'md5': '479bb068e5b16462f5176a6828829767',
16         'info_dict': {
17             'id': '54196191430',
18             'ext': 'mp4',
19             'title': 'tatiana maslany news, Orphan Black || DVD extra - behind the scenes ↳...',
20             'description': 'md5:37db8211e40b50c7c44e95da14f630b7',
21             'thumbnail': r're:http://.*\.jpg',
22         }
23     }, {
24         'url': 'http://5sostrum.tumblr.com/post/90208453769/yall-forgetting-the-greatest-keek-of-them-all',
25         'md5': 'bf348ef8c0ef84fbf1cbd6fa6e000359',
26         'info_dict': {
27             'id': '90208453769',
28             'ext': 'mp4',
29             'title': '5SOS STRUM ;]',
30             'description': 'md5:dba62ac8639482759c8eb10ce474586a',
31             'thumbnail': r're:http://.*\.jpg',
32         }
33     }, {
34         'url': 'http://hdvideotest.tumblr.com/post/130323439814/test-description-for-my-hd-video',
35         'md5': '7ae503065ad150122dc3089f8cf1546c',
36         'info_dict': {
37             'id': '130323439814',
38             'ext': 'mp4',
39             'title': 'HD Video Testing \u2014 Test description for my HD video',
40             'description': 'md5:97cc3ab5fcd27ee4af6356701541319c',
41             'thumbnail': r're:http://.*\.jpg',
42         },
43         'params': {
44             'format'</b></font>: 'hd',
45         },
46     }, {
47         'url': 'http://naked-yogi.tumblr.com/post/118312946248/naked-smoking-stretching',
48         'md5': 'de07e5211d60d4f3a2c3df757ea9f6ab',
49         'info_dict': {
50             'id': 'Wmur',
51             'ext': 'mp4',
52             'title': 'naked smoking &amp; stretching',
53             'upload_date': '20150506',
54             'timestamp': 1430931613,
55             'age_limit': 18,
56             'uploader_id': '1638622',
57             'uploader': 'naked-yogi',
58         },
59         'add_ie': ['Vidme'],
60     }, {
61         'url': 'http://camdamage.tumblr.com/post/98846056295/',
62         'md5': 'a9e0c8371ea1ca306d6554e3fecf50b6',
63         'info_dict': {
64             'id': '105463834',
65             'ext': 'mp4',
66             'title': 'Cam Damage-HD 720p',
67             'uploader': 'John Moyer',
68             'uploader_id': 'user32021558',
69         },
70         'add_ie': ['Vimeo'],
71     }, {
72         'url': 'http://sutiblr.tumblr.com/post/139638707273',
73         'md5': '2dd184b3669e049ba40563a7d423f95c',
74         'info_dict': {
75             'id': 'ir7qBEIKqvq',
76             'ext': 'mp4',
77             'title': 'Vine by sutiblr',
78             'alt_title': 'Vine by sutiblr',
79             'uploader': 'sutiblr',
80             'uploader_id': '1198993975374495744',
81             'upload_date': '20160220',
82             'like_count': int,
83             'comment_count': int,
84             'repost_count': int,
85         },
86         'add_ie': ['Vine'],
87     }, {
88         'url': 'http://vitasidorkina.tumblr.com/post/134652425014/joskriver-victoriassecret-invisibility-or',
89         'md5': '01c12ceb82cbf6b2fe0703aa56b3ad72',
90         'info_dict': {
91             'id': '-7LnUPGlSo',
92             'ext': 'mp4',
93             'title': 'Video by victoriassecret',
94             'description': 'Invisibility or flight…which superpower would YOU choose? #VSFashionShow #ThisOrThat',
95             'uploader_id': 'victoriassecret',
96             'thumbnail': r're:^https?://.*\.jpg'
97         },
98 <a name="0"></a>        'add_ie': ['Instagram'],
99     }]
100     <font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>def _real_initialize(self):
101         self._login()
102     def _login(self):
103         username, password = self._get_login_info()
104         if username is None:
105             return
106         login_page = self._download_webpage(</b></font>
107             self._LOGIN_URL, None, 'Downloading login page')
108         login_form = self._hidden_inputs(login_page)
109         login_form.update({
110             'user[email]': username,
111             'user[password]': password
112         })
113         response, urlh = self._download_webpage_handle(
114             self._LOGIN_URL, None, 'Logging in',
115             data=urlencode_postdata(login_form), headers={
116                 'Content-Type': 'application/x-www-form-urlencoded',
117                 'Referer': self._LOGIN_URL,
118             })
119         if '/dashboard' in urlh.geturl():
120             return
121         login_errors = self._parse_json(
122             self._search_regex(
123                 r'RegistrationForm\.errors\s*=\s*(\[.+?\])\s*;', response,
124                 'login errors', default='[]'),
125             None, fatal=False)
126         if login_errors:
127             raise ExtractorError(
128                 'Unable to login: %s' % login_errors[0], expected=True)
129         self.report_warning('Login has probably failed')
130     def _real_extract(self, url):
131         m_url = re.match(self._VALID_URL, url)
132         video_id = m_url.group('id')
133         blog = m_url.group('blog_name')
134         url = 'http://%s.tumblr.com/post/%s/' % (blog, video_id)
135         webpage, urlh = self._download_webpage_handle(url, video_id)
136         redirect_url = urlh.geturl()
137         if 'tumblr.com/safe-mode' in redirect_url or redirect_url.startswith('/safe-mode'):
138             raise ExtractorError(
139                 'This Tumblr may contain sensitive media. '
140                 'Disable safe mode in your account settings '
141                 'at https://www.tumblr.com/settings/account#safe_mode',
142                 expected=True)
143         iframe_url = self._search_regex(
144             r'src=\'(https?://www\.tumblr\.com/video/[^\']+)\'',
145             webpage, 'iframe url', default=None)
146         if iframe_url is None:
147             return self.url_result(redirect_url, 'Generic')
148         iframe = self._download_webpage(iframe_url, video_id, 'Downloading iframe page')
149         duration = None
150         sources = []
151         sd_url = self._search_regex(
152             r'&lt;source[^&gt;]+src=(["\'])(?P&lt;url&gt;.+?)\1', iframe,
153             'sd video url', default=None, group='url')
154         if sd_url:
155             sources.append((sd_url, 'sd'))
156         options = self._parse_json(
157             self._search_regex(
158                 r'data-crt-options=(["\'])(?P&lt;options&gt;.+?)\1', iframe,
159                 'hd video url', default='', group='options'),
160             video_id, fatal=False)
161         if options:
162             duration = int_or_none(options.get('duration'))
163             hd_url = options.get('hdUrl')
164             if hd_url:
165                 sources.append((hd_url, 'hd'))
166         formats = [{
167             'url': video_url,
168             'ext': 'mp4',
169             'format_id': format_id,
170             'height': int_or_none(self._search_regex(
171                 r'/(\d{3,4})$', video_url, 'height', default=None)),
172             'quality': quality,
173         } for quality, (video_url, format_id) in enumerate(sources)]
174         self._sort_formats(formats)
175         video_title = self._html_search_regex(
176             r'(?s)&lt;title&gt;(?P&lt;title&gt;.*?)(?: \| Tumblr)?&lt;/title&gt;',
177             webpage, 'title')
178         return {
179             'id': video_id,
180             'title': video_title,
181             'description': self._og_search_description(webpage, default=None),
182             'thumbnail': self._og_search_thumbnail(webpage, default=None),
183             'duration': duration,
184             'formats': formats,
185         }
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>safari.py</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 from __future__ import unicode_literals
2 import json
3 import re
4 from .common import InfoExtractor
5 from ..compat import (
6     compat_parse_qs,
7     compat_urlparse,
8 )
9 from ..utils import (
10     ExtractorError,
11     update_url_query,
12 )
13 class SafariBaseIE(InfoExtractor):
14     _LOGIN_URL = 'https://learning.oreilly.com/accounts/login/'
15     _NETRC_MACHINE = 'safari'
16     _API_BASE = 'https://learning.oreilly.com/api/v1'
17     _API_FORMAT = 'json'
18 <a name="0"></a>
19     LOGGED_IN = False
20     <font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>def _real_initialize(self):
21         self._login()
22     def _login(self):
23         username, password = self._get_login_info()
24         if username is None:
25             return
26         _, urlh = self._download_webpage_handle(</b></font>
27             'https://learning.oreilly.com/accounts/login-check/', None,
28             'Downloading login page')
29         def is_logged(urlh):
30             return 'learning.oreilly.com/home/' in urlh.geturl()
31         if is_logged(urlh):
32             self.LOGGED_IN = True
33             return
34         redirect_url = urlh.geturl()
35         parsed_url = compat_urlparse.urlparse(redirect_url)
36         qs = compat_parse_qs(parsed_url.query)
37         next_uri = compat_urlparse.urljoin(
38             'https://api.oreilly.com', qs['next'][0])
39         auth, urlh = self._download_json_handle(
40             'https://www.oreilly.com/member/auth/login/', None, 'Logging in',
41             data=json.dumps({
42                 'email': username,
43                 'password': password,
44                 'redirect_uri': next_uri,
45             }).encode(), headers={
46                 'Content-Type': 'application/json',
47                 'Referer': redirect_url,
48             }, expected_status=400)
49         credentials = auth.get('credentials')
50         if (not auth.get('logged_in') and not auth.get('redirect_uri')
51                 and credentials):
52             raise ExtractorError(
53                 'Unable to login: %s' % credentials, expected=True)
54         for cookie in ('groot_sessionid', 'orm-jwt', 'orm-rt'):
55             self._apply_first_set_cookie_header(urlh, cookie)
56         _, urlh = self._download_webpage_handle(
57             auth.get('redirect_uri') or next_uri, None, 'Completing login',)
58         if is_logged(urlh):
59             self.LOGGED_IN = True
60             return
61 <a name="1"></a>        raise ExtractorError('Unable to log in')
62 <font color="#f63526"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>class SafariIE(SafariBaseIE):
63     IE_NAME = 'safari'
64     IE_DESC = 'safaribooksonline.com online video'
65     _VALID_URL = r'''(?x)
66                         https?://
67                             (?:www\.)?(?:safaribooksonline|(?:learning\.)?oreilly)\.com/
68                             (?:
69                                 library/view/[^/]+/(?P&lt;course_id&gt;[^/]+)/(?P&lt;part&gt;[^/?\#&amp;]+)\.html|
70                                 videos/[^/]+/[^/]+/(?P&lt;reference_id&gt;[^-]+-[^/?\#&amp;]+)
71                             )
72         'url'</b></font>: 'https://www.oreilly.com/library/view/hadoop-fundamentals-livelessons/9780133392838/00_SeriesIntro.html',
73         'only_matching': True,
74     }]
75     _PARTNER_ID = '1926081'
76     _UICONF_ID = '29375172'
77     def _real_extract(self, url):
78         mobj = re.match(self._VALID_URL, url)
79         reference_id = mobj.group('reference_id')
80         if reference_id:
81             video_id = reference_id
82             partner_id = self._PARTNER_ID
83             ui_id = self._UICONF_ID
84         else:
85             video_id = '%s-%s' % (mobj.group('course_id'), mobj.group('part'))
86             webpage, urlh = self._download_webpage_handle(url, video_id)
87             mobj = re.match(self._VALID_URL, urlh.geturl())
88             reference_id = mobj.group('reference_id')
89             if not reference_id:
90                 reference_id = self._search_regex(
91                     r'data-reference-id=(["\'])(?P&lt;id&gt;(?:(?!\1).)+)\1',
92                     webpage, 'kaltura reference id', group='id')
93             partner_id = self._search_regex(
94                 r'data-partner-id=(["\'])(?P&lt;id&gt;(?:(?!\1).)+)\1',
95                 webpage, 'kaltura widget id', default=self._PARTNER_ID,
96                 group='id')
97             ui_id = self._search_regex(
98                 r'data-ui-id=(["\'])(?P&lt;id&gt;(?:(?!\1).)+)\1',
99                 webpage, 'kaltura uiconf id', default=self._UICONF_ID,
100                 group='id')
101         query = {
102             'wid': '_%s' % partner_id,
103             'uiconf_id': ui_id,
104             'flashvars[referenceId]': reference_id,
105         }
106         if self.LOGGED_IN:
107             kaltura_session = self._download_json(
108                 '%s/player/kaltura_session/?reference_id=%s' % (self._API_BASE, reference_id),
109                 video_id, 'Downloading kaltura session JSON',
110                 'Unable to download kaltura session JSON', fatal=False,
111                 headers={'Accept': 'application/json'})
112             if kaltura_session:
113                 session = kaltura_session.get('session')
114                 if session:
115                     query['flashvars[ks]'] = session
116         return self.url_result(update_url_query(
117             'https://cdnapisec.kaltura.com/html5/html5lib/v2.37.1/mwEmbedFrame.php', query),
118             'Kaltura')
119 class SafariApiIE(SafariBaseIE):
120     IE_NAME = 'safari:api'
121     _VALID_URL = r'https?://(?:www\.)?(?:safaribooksonline|(?:learning\.)?oreilly)\.com/api/v1/book/(?P&lt;course_id&gt;[^/]+)/chapter(?:-content)?/(?P&lt;part&gt;[^/?#&amp;]+)\.html'
122     _TESTS = [{
123         'url': 'https://www.safaribooksonline.com/api/v1/book/9780133392838/chapter/part00.html',
124         'only_matching': True,
125     }, {
126         'url': 'https://www.safaribooksonline.com/api/v1/book/9780134664057/chapter/RHCE_Introduction.html',
127         'only_matching': True,
128     }]
129     def _real_extract(self, url):
130         mobj = re.match(self._VALID_URL, url)
131         part = self._download_json(
132             url, '%s/%s' % (mobj.group('course_id'), mobj.group('part')),
133             'Downloading part JSON')
134         return self.url_result(part['web_url'], SafariIE.ie_key())
135 class SafariCourseIE(SafariBaseIE):
136     IE_NAME = 'safari:course'
137     IE_DESC = 'safaribooksonline.com online courses'
138     _VALID_URL = r'''(?x)
139                     https?://
140                         (?:
141                             (?:www\.)?(?:safaribooksonline|(?:learning\.)?oreilly)\.com/
142                             (?:
143                                 library/view/[^/]+|
144                                 api/v1/book|
145                                 videos/[^/]+
146                             )|
147                             techbus\.safaribooksonline\.com
148                         )
149                         /(?P&lt;id&gt;[^/]+)
150                     '''
151     _TESTS = [{
152         'url': 'https://www.safaribooksonline.com/library/view/hadoop-fundamentals-livelessons/9780133392838/',
153         'info_dict': {
154             'id': '9780133392838',
155             'title': 'Hadoop Fundamentals LiveLessons',
156         },
157         'playlist_count': 22,
158         'skip': 'Requires safaribooksonline account credentials',
159     }, {
160         'url': 'https://www.safaribooksonline.com/api/v1/book/9781449396459/?override_format=json',
161         'only_matching': True,
162     }, {
163         'url': 'http://techbus.safaribooksonline.com/9780134426365',
164         'only_matching': True,
165     }, {
166         'url': 'https://www.safaribooksonline.com/videos/python-programming-language/9780134217314',
167         'only_matching': True,
168     }, {
169         'url': 'https://learning.oreilly.com/videos/hadoop-fundamentals-livelessons/9780133392838',
170         'only_matching': True,
171     }, {
172         'url': 'https://www.oreilly.com/library/view/hadoop-fundamentals-livelessons/9780133392838/',
173         'only_matching': True,
174     }]
175     @classmethod
176     def suitable(cls, url):
177         return (False if SafariIE.suitable(url) or SafariApiIE.suitable(url)
178                 else super(SafariCourseIE, cls).suitable(url))
179     def _real_extract(self, url):
180         course_id = self._match_id(url)
181         course_json = self._download_json(
182             '%s/book/%s/?override_format=%s' % (self._API_BASE, course_id, self._API_FORMAT),
183             course_id, 'Downloading course JSON')
184         if 'chapters' not in course_json:
185             raise ExtractorError(
186                 'No chapters found for course %s' % course_id, expected=True)
187         entries = [
188             self.url_result(chapter, SafariApiIE.ie_key())
189             for chapter in course_json['chapters']]
190         course_title = course_json['title']
191         return self.playlist_result(entries, course_id, course_title)
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
