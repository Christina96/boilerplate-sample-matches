
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 3.10077519379845%, Tokens: 12</h2>
        <div class="column">
            <h3>Ultroid-MDEwOlJlcG9zaXRvcnkzNDEwMzg2MDI=-flat-logo.py</h3>
            <pre><code>1  import glob
2  import os
3  import random
4  from telethon.tl.types import InputMessagesFilterPhotos
5  try:
6      from PIL import Image
7  except ImportError:
8      Image = None
9  from pyUltroid.fns.misc import unsplashsearch
10  from pyUltroid.fns.tools import LogoHelper
11  from . import OWNER_ID, OWNER_NAME, download_file, get_string, mediainfo, ultroid_cmd
<span onclick='openModal()' class='match'>12  @ultroid_cmd(pattern="logo( (.*)|$)")
13  async def logo_gen(event):
14      xx = await event.eor(get_string("com_1"))
15      name = event.pattern_match.group(1).strip()
</span>16      if not name:
17          return await xx.eor("`Give a name too!`", time=5)
18      bg_, font_ = None, None
19      if event.reply_to_msg_id:
20          temp = await event.get_reply_message()
21          if temp.media:
22              if hasattr(temp.media, "document") and (
23                  ("font" in temp.file.mime_type)
24                  or (".ttf" in temp.file.name)
25                  or (".otf" in temp.file.name)
26              ):
27                  font_ = await temp.download_media("resources/fonts/")
28              elif "pic" in mediainfo(temp.media):
29                  bg_ = await temp.download_media()
30      if not bg_:
31          if event.client._bot:
32              SRCH = [
33                  "blur background",
34                  "background",
35                  "neon lights",
36                  "nature",
37                  "abstract",
38                  "space",
39                  "3d render",
40              ]
41              res = await unsplashsearch(random.choice(SRCH), limit=1)
42              bg_, _ = await download_file(res[0], "resources/downloads/logo.png")
43              newimg = "resources/downloads/unsplash-temp.jpg"
44              img_ = Image.open(bg_)
45              img_.resize((5000, 5000)).save(newimg)
46              os.remove(bg_)
47              bg_ = newimg
48          else:
49              pics = []
50              async for i in event.client.iter_messages(
51                  "@UltroidLogos", filter=InputMessagesFilterPhotos
52              ):
53                  pics.append(i)
54              id_ = random.choice(pics)
55              bg_ = await id_.download_media()
56      if not font_:
57          font_ = random.choice(fpath_)
58      if len(name) <= 8:
59          strke = 10
60      elif len(name) >= 9:
61          strke = 5
62      else:
63          strke = 20
64      name = LogoHelper.make_logo(
65          bg_,
66          name,
67          font_,
68          fill="white",
69          stroke_width=strke,
70          stroke_fill="black",
71      )
72      await xx.edit("`Done!`")
73      await event.client.send_file(
74          event.chat_id,
75          file=name,
76          caption=f"Logo by [{OWNER_NAME}](tg://user?id={OWNER_ID})",
77          force_document=True,
78      )
79      os.remove(name)
80      await xx.delete()
81      if os.path.exists(bg_):
82          os.remove(bg_)
</code></pre>
        </div>
        <div class="column">
            <h3>Ultroid-MDEwOlJlcG9zaXRvcnkzNDEwMzg2MDI=-flat-chats.py</h3>
            <pre><code>1  from . import get_help
2  __doc__ = get_help("help_chats")
3  from telethon.errors import ChatAdminRequiredError as no_admin
4  from telethon.tl.functions.channels import (
5      CreateChannelRequest,
6      DeleteChannelRequest,
7      EditPhotoRequest,
8      GetFullChannelRequest,
9      UpdateUsernameRequest,
10  )
11  from telethon.tl.functions.messages import (
12      CreateChatRequest,
13      ExportChatInviteRequest,
14      GetFullChatRequest,
15  )
16  from telethon.tl.types import (
17      ChannelParticipantsKicked,
18      User,
19      UserStatusEmpty,
20      UserStatusLastMonth,
21      UserStatusLastWeek,
22      UserStatusOffline,
23      UserStatusOnline,
24      UserStatusRecently,
25  )
26  from . import HNDLR, LOGS, asst, con, get_string, mediainfo, os, types, udB, ultroid_cmd
27  @ultroid_cmd(
28      pattern="delchat",
29      groups_only=True,
30  )
31  async def _(e):
32      xx = await e.eor(get_string("com_1"))
33      try:
34          match = e.text.split(" ", maxsplit=1)[1]
35          chat = await e.client.parse_id(match)
36      except IndexError:
37          chat = e.chat_id
38      try:
39          await e.client(DeleteChannelRequest(chat))
40      except TypeError:
41          return await xx.eor(get_string("chats_1"), time=10)
42      except no_admin:
43          return await xx.eor(get_string("chats_2"), time=10)
44      await e.client.send_message(
45          int(udB.get_key("LOG_CHANNEL")), get_string("chats_6").format(e.chat_id)
46      )
47  @ultroid_cmd(
48      pattern="getlink( (.*)|$)",
49      groups_only=True,
50      manager=True,
51  )
52  async def _(e):
53      reply = await e.get_reply_message()
54      match = e.pattern_match.group(1).strip()
55      if reply and not isinstance(reply.sender, User):
56          chat = await reply.get_sender()
57      else:
58          chat = await e.get_chat()
59      if hasattr(chat, "username") and chat.username:
60          return await e.eor(f"Username: @{chat.username}")
61      request, usage, title, link = None, None, None, None
62      if match:
63          split = match.split(maxsplit=1)
64          request = split[0] in ["r", "request"]
65          title = "Created by Ultroid"
66          if len(split) > 1:
67              match = split[1]
68              spli = match.split(maxsplit=1)
69              if spli[0].isdigit():
70                  usage = int(spli[0])
71              if len(spli) > 1:
72                  title = spli[1]
73          elif not request:
74              if match.isdigit():
75                  usage = int(match)
76              else:
77                  title = match
78          if request and usage:
79              usage = 0
80      if request or title:
81          try:
82              r = await e.client(
83                  ExportChatInviteRequest(
84                      e.chat_id,
85                      request_needed=request,
86                      usage_limit=usage,
87                      title=title,
88                  ),
89              )
90          except no_admin:
91              return await e.eor(get_string("chats_2"), time=10)
92          link = r.link
93      else:
94          if isinstance(chat, types.Chat):
95              FC = await e.client(GetFullChatRequest(chat.id))
96          elif isinstance(chat, types.Channel):
97              FC = await e.client(GetFullChannelRequest(chat.id))
98          else:
99              return
100          Inv = FC.full_chat.exported_invite
101          if Inv and not Inv.revoked:
102              link = Inv.link
103      if link:
104          return await e.eor(f"Link:- {link}")
105      await e.eor("`Failed to getlink!\nSeems like link is inaccessible to you...`")
106  @ultroid_cmd(
107      pattern="create (b|g|c)(?: |$)(.*)",
108  )
109  async def _(e):
110      type_of_group = e.pattern_match.group(1).strip()
111      group_name = e.pattern_match.group(2)
112      username = None
113      if " ; " in group_name:
114          group_ = group_name.split(" ; ", maxsplit=1)
115          group_name = group_[0]
116          username = group_[1]
117      xx = await e.eor(get_string("com_1"))
118      if type_of_group == "b":
119          try:
120              r = await e.client(
121                  CreateChatRequest(
122                      users=[asst.me.username],
123                      title=group_name,
124                  ),
125              )
126              created_chat_id = r.chats[0].id
127              result = await e.client(
128                  ExportChatInviteRequest(
129                      peer=created_chat_id,
130                  ),
131              )
132              await xx.edit(
133                  get_string("chats_4").format(group_name, result.link),
134                  link_preview=False,
135              )
136          except Exception as ex:
137              await xx.edit(str(ex))
138      elif type_of_group in ["g", "c"]:
139          try:
140              r = await e.client(
141                  CreateChannelRequest(
142                      title=group_name,
143                      about=get_string("chats_5"),
144                      megagroup=type_of_group != "c",
145                  )
146              )
147              created_chat_id = r.chats[0].id
148              if username:
149                  await e.client(UpdateUsernameRequest(created_chat_id, username))
150                  result = f"https://t.me/{username}"
151              else:
152                  result = (
153                      await e.client(
154                          ExportChatInviteRequest(
155                              peer=created_chat_id,
156                          ),
157                      )
158                  ).link
159              await xx.edit(
160                  get_string("chats_6").format(f"[{group_name}]({result})"),
161                  link_preview=False,
162              )
163          except Exception as ex:
164              await xx.edit(str(ex))
165  @ultroid_cmd(
166      pattern="setgpic( (.*)|$)", admins_only=True, manager=True, require="change_info"
167  )
168  async def _(ult):
169      if not ult.is_reply:
170          return await ult.eor("`Reply to a Media..`", time=5)
171      match = ult.pattern_match.group(1).strip()
172      if not ult.client._bot and match:
173          try:
174              chat = await ult.client.parse_id(match)
175          except Exception as ok:
176              return await ult.eor(str(ok))
177      else:
178          chat = ult.chat_id
179      reply = await ult.get_reply_message()
180      if reply.photo or reply.sticker or reply.video:
181          replfile = await reply.download_media()
182      elif reply.document and reply.document.thumbs:
183          replfile = await reply.download_media(thumb=-1)
184      else:
185          return await ult.eor("Reply to a Photo or Video..")
186      mediain = mediainfo(reply.media)
187      if "animated" in mediain:
188          replfile = await con.convert(replfile, convert_to="mp4")
189      else:
190          replfile = await con.convert(
191              replfile, outname="chatphoto", allowed_formats=["jpg", "png", "mp4"]
192          )
193      file = await ult.client.upload_file(replfile)
194      try:
195          if "pic" not in mediain:
196              file = types.InputChatUploadedPhoto(video=file)
197          await ult.client(EditPhotoRequest(chat, file))
198          await ult.eor("`Group Photo has Successfully Changed !`", time=5)
199      except Exception as ex:
200          await ult.eor(f"Error occured.\n`{str(ex)}`", time=5)
201      os.remove(replfile)
202  @ultroid_cmd(
203      pattern="delgpic( (.*)|$)", admins_only=True, manager=True, require="change_info"
204  )
205  async def _(ult):
206      match = ult.pattern_match.group(1).strip()
207      chat = ult.chat_id
208      if not ult.client._bot and match:
209          chat = match
210      try:
211          await ult.client(EditPhotoRequest(chat, types.InputChatPhotoEmpty()))
212          text = "`Removed Chat Photo..`"
213      except Exception as E:
214          text = str(E)
215      return await ult.eor(text, time=5)
216  @ultroid_cmd(pattern="unbanall$", manager=True, admins_only=True, require="ban_users")
217  async def _(event):
218      xx = await event.eor("Searching Participant Lists.")
219      p = 0
220      title = (await event.get_chat()).title
221      async for i in event.client.iter_participants(
222          event.chat_id,
223          filter=ChannelParticipantsKicked,
224          aggressive=True,
225      ):
226          try:
227              await event.client.edit_permissions(event.chat_id, i, view_messages=True)
228              p += 1
229          except no_admin:
230              pass
231          except BaseException as er:
232              LOGS.exception(er)
233      await xx.eor(f"{title}: {p} unbanned", time=5)
234  @ultroid_cmd(
235      pattern="rmusers( (.*)|$)",
236      groups_only=True,
237      admins_only=True,
<span onclick='openModal()' class='match'>238      fullsudo=True,
239  )
240  async def _(event):
241      xx = await event.eor(get_string("com_1"))
242      input_str = event.pattern_match.group(1).strip()
</span>243      p, a, b, c, d, m, n, y, w, o, q, r = 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
244      async for i in event.client.iter_participants(event.chat_id):
245          p += 1  # Total Count
246          if isinstance(i.status, UserStatusEmpty):
247              if "empty" in input_str:
248                  try:
249                      await event.client.kick_participant(event.chat_id, i)
250                      c += 1
251                  except BaseException:
252                      pass
253              else:
254                  y += 1
255          if isinstance(i.status, UserStatusLastMonth):
256              if "month" in input_str:
257                  try:
258                      await event.client.kick_participant(event.chat_id, i)
259                      c += 1
260                  except BaseException:
261                      pass
262              else:
263                  m += 1
264          if isinstance(i.status, UserStatusLastWeek):
265              if "week" in input_str:
266                  try:
267                      await event.client.kick_participant(event.chat_id, i)
268                      c += 1
269                  except BaseException:
270                      pass
271              else:
272                  w += 1
273          if isinstance(i.status, UserStatusOffline):
274              if "offline" in input_str:
275                  try:
276                      await event.client.kick_participant(event.chat_id, i)
277                      c += 1
278                  except BaseException:
279                      pass
280              else:
281                  o += 1
282          if isinstance(i.status, UserStatusOnline):
283              if "online" in input_str:
284                  try:
285                      await event.client.kick_participant(event.chat_id, i)
286                      c += 1
287                  except BaseException:
288                      pass
289              else:
290                  q += 1
291          if isinstance(i.status, UserStatusRecently):
292              if "recently" in input_str:
293                  try:
294                      await event.client.kick_participant(event.chat_id, i)
295                      c += 1
296                  except BaseException:
297                      pass
298              else:
299                  r += 1
300          if i.bot:
301              if "bot" in input_str:
302                  try:
303                      await event.client.kick_participant(event.chat_id, i)
304                      c += 1
305                  except BaseException:
306                      pass
307              else:
308                  b += 1
309          elif i.deleted:
310              if "deleted" in input_str:
311                  try:
312                      await event.client.kick_participant(event.chat_id, i)
313                      c += 1
314                  except BaseException:
315                      pass
316              else:
317                  d += 1
318          elif i.status is None:
319              if "none" in input_str:
320                  try:
321                      await event.client.kick_participant(event.chat_id, i)
322                      c += 1
323                  except BaseException:
324                      pass
325              else:
326                  n += 1
327      if input_str:
328          required_string = f"**>> Kicked** `{c} / {p}` **users**\n\n"
329      else:
330          required_string = f"**>> Total** `{p}` **users**\n\n"
331      required_string += f"  `{HNDLR}rmusers deleted`  **••**  `{d}`\n"
332      required_string += f"  `{HNDLR}rmusers empty`  **••**  `{y}`\n"
333      required_string += f"  `{HNDLR}rmusers month`  **••**  `{m}`\n"
334      required_string += f"  `{HNDLR}rmusers week`  **••**  `{w}`\n"
335      required_string += f"  `{HNDLR}rmusers offline`  **••**  `{o}`\n"
336      required_string += f"  `{HNDLR}rmusers online`  **••**  `{q}`\n"
337      required_string += f"  `{HNDLR}rmusers recently`  **••**  `{r}`\n"
338      required_string += f"  `{HNDLR}rmusers bot`  **••**  `{b}`\n"
339      required_string += f"  `{HNDLR}rmusers none`  **••**  `{n}`"
340      await xx.eor(required_string)
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from Ultroid-MDEwOlJlcG9zaXRvcnkzNDEwMzg2MDI=-flat-logo.py</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from Ultroid-MDEwOlJlcG9zaXRvcnkzNDEwMzg2MDI=-flat-chats.py</div>
                </div>
                <div class="column column_space"><pre><code>12  @ultroid_cmd(pattern="logo( (.*)|$)")
13  async def logo_gen(event):
14      xx = await event.eor(get_string("com_1"))
15      name = event.pattern_match.group(1).strip()
</pre></code></div>
                <div class="column column_space"><pre><code>238      fullsudo=True,
239  )
240  async def _(event):
241      xx = await event.eor(get_string("com_1"))
242      input_str = event.pattern_match.group(1).strip()
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    