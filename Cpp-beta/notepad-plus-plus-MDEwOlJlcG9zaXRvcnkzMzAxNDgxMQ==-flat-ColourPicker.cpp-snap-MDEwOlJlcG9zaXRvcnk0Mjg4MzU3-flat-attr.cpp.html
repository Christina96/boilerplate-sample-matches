
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 3.015075376884422%, Tokens: 9, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>notepad-plus-plus-MDEwOlJlcG9zaXRvcnkzMzAxNDgxMQ==-flat-ColourPicker.cpp</h3>
            <pre><code>1  #include <iostream>
2  #include <stdexcept>
3  #include "ColourPicker.h"
4  #include "ColourPopup.h"
5  #include "NppDarkMode.h"
6  void ColourPicker::init(HINSTANCE hInst, HWND parent)
7  {
8  	Window::init(hInst, parent);
9  	_hSelf = ::CreateWindowEx(
10  		0,
11  		TEXT("Button"),
12  		TEXT("F"),
13  		WS_CHILD |  WS_VISIBLE,
14  		0, 0, 25, 25,
15  		_hParent, NULL, _hInst, (LPVOID)0);
16  	if (!_hSelf)
17  		throw std::runtime_error("ColourPicker::init : CreateWindowEx() function return null");
18  	::SetWindowLongPtr(_hSelf, GWLP_USERDATA, reinterpret_cast<LONG_PTR>(this));
19  	_buttonDefaultProc = reinterpret_cast<WNDPROC>(::SetWindowLongPtr(_hSelf, GWLP_WNDPROC, reinterpret_cast<LONG_PTR>(staticWinProc)));
20  }
21  void ColourPicker::destroy()
22  {
23  	delete _pColourPopup;
24  	_pColourPopup = NULL;
25  	::DestroyWindow(_hSelf);
26  }
27  void ColourPicker::drawBackground(HDC hDC)
28  {
29  	RECT rc;
30  	HBRUSH hbrush;
31  	if (!hDC)
32  		return;
33  	getClientRect(rc);
34  	hbrush = ::CreateSolidBrush(_currentColour);
35  	HGDIOBJ oldObj = ::SelectObject(hDC, hbrush);
36  	HPEN holdPen = nullptr;
37  	if (NppDarkMode::isEnabled())
38  	{
39  		holdPen = static_cast<HPEN>(::SelectObject(hDC, NppDarkMode::getEdgePen()));
40  	}
41  	::Rectangle(hDC, 0, 0, rc.right, rc.bottom);
42  	if (NppDarkMode::isEnabled() && holdPen)
43  	{
44  		::SelectObject(hDC, holdPen);
45  	}
46  	::SelectObject(hDC, oldObj);
47  	::DeleteObject(hbrush);
48  }
49  void ColourPicker::drawForeground(HDC hDC)
50  {
51  	RECT rc;
52  	HBRUSH hbrush = NULL;
53  	if (!hDC || _isEnabled)
54  		return;
55  	int oldMode = ::SetBkMode(hDC, TRANSPARENT);
56  	getClientRect(rc);
57  	COLORREF strikeOut = RGB(0,0,0);
58  	if ((((_currentColour      ) & 0xFF) +
59  		 ((_currentColour >>  8) & 0xFF) +
60  		 ((_currentColour >> 16) & 0xFF)) < 200)	
61  		strikeOut = RGB(0xFF,0xFF,0xFF);
62  	if (!_isEnabled)
63  		hbrush = ::CreateHatchBrush(HS_FDIAGONAL, strikeOut);
<span onclick='openModal()' class='match'>64  	HGDIOBJ oldObj = ::SelectObject(hDC, hbrush);
65  	::Rectangle(hDC, 0, 0, rc.right, rc.bottom);
66  	::SelectObject(hDC, oldObj);
67  	::DeleteObject(hbrush);
68  	::SetBkMode(hDC, oldMode);
</span>69  }
70  LRESULT ColourPicker::runProc(UINT Message, WPARAM wParam, LPARAM lParam)
71  {
72  	switch (Message)
73  	{
74  		case WM_LBUTTONDBLCLK:
75  		case WM_LBUTTONDOWN:
76  		{
77  			RECT rc;
78  			POINT p;
79  			Window::getClientRect(rc);
80  			::InflateRect(&rc, -2, -2);
81  			p.x = rc.left;
82  			p.y = rc.top + rc.bottom;
83  			::ClientToScreen(_hSelf, &p);
84  			if (!_pColourPopup)
85  			{
86  				_pColourPopup = new ColourPopup(_currentColour);
87  				_pColourPopup->init(_hInst, _hSelf);
88  				_pColourPopup->doDialog(p);
89  			}
90  			else
91  			{
92  				_pColourPopup->setColour(_currentColour);
93  				_pColourPopup->doDialog(p);
94  				_pColourPopup->display(true);
95  			}
96  			return TRUE;
97  		}
98  		case WM_RBUTTONDOWN:
99  		{
100  			_isEnabled = !_isEnabled;
101  			redraw();
102  			::SendMessage(_hParent, WM_COMMAND, MAKELONG(0, CPN_COLOURPICKED), reinterpret_cast<LPARAM>(_hSelf));
103  			break;
104  		}
105  		case NPPM_INTERNAL_REFRESHDARKMODE:
106  		{
107  			if (_pColourPopup)
108  			{
109  				::SendMessage(_pColourPopup->getHSelf(), NPPM_INTERNAL_REFRESHDARKMODE, 0, 0);
110  			}
111  			return TRUE;
112  		}
113  		case WM_ERASEBKGND:
114  		{
115  			HDC dc = (HDC)wParam;
116  			drawBackground(dc);
117  			return TRUE;
118  		}
119  		case WM_PAINT:
120  		{
121  			PAINTSTRUCT ps;
122  			HDC dc = ::BeginPaint(_hSelf, &ps);
123  			drawForeground(dc);
124  			::EndPaint(_hSelf, &ps);
125  			return TRUE;
126  		}
127  		case WM_PICKUP_COLOR:
128  		{
129  			_currentColour = (COLORREF)wParam;
130  			redraw();
131  			_pColourPopup->display(false);
132  			::SendMessage(_hParent, WM_COMMAND, MAKELONG(0, CPN_COLOURPICKED), reinterpret_cast<LPARAM>(_hSelf));
133  			return TRUE;
134  		}
135  		case WM_ENABLE:
136  		{
137  			if ((BOOL)wParam == FALSE)
138  			{
139  				_currentColour = NppDarkMode::isEnabled() ? NppDarkMode::getDarkerBackgroundColor() : ::GetSysColor(COLOR_3DFACE);
140  				redraw();
141  			}
142  			return TRUE;
143  		}
144  		case WM_PICKUP_CANCEL:
145  		{
146  			_pColourPopup->display(false);
147  			return TRUE;
148  		}
149  		default:
150  			return ::CallWindowProc(_buttonDefaultProc, _hSelf, Message, wParam, lParam);
151  	}
152  	return FALSE;
153  }
</code></pre>
        </div>
        <div class="column">
            <h3>snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-attr.cpp</h3>
            <pre><code>1  int TAttr::AddSAttrDat(const TInt& Id, const TStr& AttrName, const TInt& Val) {
2    TInt AttrId;
3    if (!AttrNameToId.IsKey(AttrName)) {
4      AddSAttr(AttrName, atInt, AttrId);
5    } else {
6      AttrId = AttrNameToId.GetDat(AttrName).GetVal2();
7    }
8    return AddSAttrDat(Id, AttrId, Val);
9  } 
10  int TAttr::AddSAttrDat(const TInt& Id, const TInt& AttrId, const TInt& Val) {
11    if (!AttrIdToName.IsKey(AttrId)) { return -1; }
12    if (AttrIdToName.GetDat(AttrId).GetVal1() != atInt) { return -2; }
13    TIntPr Key(AttrId, Id);
14    IntAttrVals.AddDat(Key, Val);
15    return 0;
16  }
17  int TAttr::AddSAttrDat(const TInt& Id, const TStr& AttrName, const TFlt& Val) {
18    TInt AttrId;
19    if (!AttrNameToId.IsKey(AttrName)) {
20      AddSAttr(AttrName, atFlt, AttrId);
21    } else {
22      AttrId = AttrNameToId.GetDat(AttrName).GetVal2();
23    }
24    return AddSAttrDat(Id, AttrId, Val);
25  } 
26  int TAttr::AddSAttrDat(const TInt& Id, const TInt& AttrId, const TFlt& Val) {
27    if (!AttrIdToName.IsKey(AttrId)) { return -1; }
28    if (AttrIdToName.GetDat(AttrId).GetVal1() != atFlt) { return -2; }
29    TIntPr Key(AttrId, Id);
30    FltAttrVals.AddDat(Key, Val);
31    return 0;
32  }
33  int TAttr::AddSAttrDat(const TInt& Id, const TStr& AttrName, const TStr& Val) {
34    TInt AttrId;
35    if (!AttrNameToId.IsKey(AttrName)) {
36      AddSAttr(AttrName, atStr, AttrId);
37    } else {
38      AttrId = AttrNameToId.GetDat(AttrName).GetVal2();
39    }
40    return AddSAttrDat(Id, AttrId, Val);
41  } 
42  int TAttr::AddSAttrDat(const TInt& Id, const TInt& AttrId, const TStr& Val) {
43    if (!AttrIdToName.IsKey(AttrId)) { return -1; }
44    if (AttrIdToName.GetDat(AttrId).GetVal1() != atStr) { return -2; }
45    TIntPr Key(AttrId, Id);
46    StrAttrVals.AddDat(Key, Val);
47    return 0;
48  }
49  int TAttr::GetSAttrDat(const TInt& Id, const TStr& AttrName, TInt& Val) const {
50    if (!AttrNameToId.IsKey(AttrName)) { return -1; }
51    TInt AttrId = AttrNameToId.GetDat(AttrName).GetVal2();
52    return GetSAttrDat(Id, AttrId, Val);
53  } 
54  int TAttr::GetSAttrDat(const TInt& Id, const TInt& AttrId, TInt& Val) const {
55    if (!AttrIdToName.IsKey(AttrId)) { return -1; }
56    if (AttrIdToName.GetDat(AttrId).GetVal1() != atInt) { return -2; }
57    TIntPr Key(AttrId, Id);
58    if (IntAttrVals.IsKey(Key)) {
59      Val = IntAttrVals.GetDat(Key);
60      return 0;
61    }
62    return -1;
63  }
64  int TAttr::GetSAttrDat(const TInt& Id, const TStr& AttrName, TFlt& Val) const {
65    if (!AttrNameToId.IsKey(AttrName)) { return -1; }
66    TInt AttrId = AttrNameToId.GetDat(AttrName).GetVal2();
67    return GetSAttrDat(Id, AttrId, Val);
68  } 
69  int TAttr::GetSAttrDat(const TInt& Id, const TInt& AttrId, TFlt& Val) const {
70    if (!AttrIdToName.IsKey(AttrId)) { return -1; }
71    if (AttrIdToName.GetDat(AttrId).GetVal1() != atFlt) { return -2; }
72    TIntPr Key(AttrId, Id);
73    if (FltAttrVals.IsKey(Key)) {
74      Val = FltAttrVals.GetDat(Key);
75      return 0;
76    }
77    return -1;
78  }
79  int TAttr::GetSAttrDat(const TInt& Id, const TStr& AttrName, TStr& Val) const {
80    if (!AttrNameToId.IsKey(AttrName)) { return -1; }
81    TInt AttrId = AttrNameToId.GetDat(AttrName).GetVal2();
82    return GetSAttrDat(Id, AttrId, Val);
83  } 
84  int TAttr::GetSAttrDat(const TInt& Id, const TInt& AttrId, TStr& Val) const {
85    if (!AttrIdToName.IsKey(AttrId)) { return -1; }
86    if (AttrIdToName.GetDat(AttrId).GetVal1() != atStr) { return -2; }
87    TIntPr Key(AttrId, Id);
88    if (StrAttrVals.IsKey(Key)) {
89      Val = StrAttrVals.GetDat(Key);
90      return 0;
91    }
92    return -1;
93  }
94  int TAttr::DelSAttrDat(const TInt& Id, const TStr& AttrName) {
95    if (!AttrNameToId.IsKey(AttrName)) { return -1; }
96    TInt AttrId = AttrNameToId.GetDat(AttrName).GetVal2();
97    return DelSAttrDat(Id, AttrId);
98  } 
99  int TAttr::DelSAttrDat(const TInt& Id, const TInt& AttrId) {
100    TIntPr Key(AttrId, Id);
101    if (IntAttrVals.IsKey(Key)) {
102      IntAttrVals.DelKey(Key);
103      return 0;
104    } else if (FltAttrVals.IsKey(Key)) {
105      FltAttrVals.DelKey(Key);
106      return 0;
107    } else if (StrAttrVals.IsKey(Key)) {
108      StrAttrVals.DelKey(Key);
109      return 0;
110    }
111    return -1;
112  }
113  void TAttr::DelSAttrId(const TInt& Id) {
114    for (TStrIntPrH::TIter it = AttrNameToId.BegI(); it < AttrNameToId.EndI(); it++) {
115      TAttrType CurType = static_cast<TAttrType>(it.GetDat().GetVal1().Val);
116      TIntPr AttrKey(it.GetDat().GetVal2(), Id);
117      if (CurType == atInt) {
118        IntAttrVals.DelIfKey(AttrKey);
119      } else if (CurType == atFlt) {
120        FltAttrVals.DelIfKey(AttrKey);
121      } else if (CurType == atStr) {
122        StrAttrVals.DelIfKey(AttrKey);
123      }
124    }
125  }
126  void TAttr::GetSAttrV(const TInt& Id, const TAttrType AttrType, TAttrPrV& AttrV) const {
127    AttrV = TAttrPrV();
128    for (TStrIntPrH::TIter it = AttrNameToId.BegI(); it < AttrNameToId.EndI(); it++) {
129      TAttrType CurType = static_cast<TAttrType>(it.GetDat().GetVal1().Val);
130      if (CurType == AttrType) {
131        TIntPr AttrKey(it.GetDat().GetVal2(), Id);
132        if (CurType == atInt) {
133          if (IntAttrVals.IsKey(AttrKey)) {
134            TAttrPr Dat(it.GetKey(), CurType);
135            AttrV.Add(Dat);
136          }
137        } else if (CurType == atFlt) {
138          if (FltAttrVals.IsKey(AttrKey)) {
139            TAttrPr Dat(it.GetKey(), CurType);
140            AttrV.Add(Dat);
141          }
142        } else if (CurType == atStr) {
143          if (StrAttrVals.IsKey(AttrKey)) {
144            TAttrPr Dat(it.GetKey(), CurType);
145            AttrV.Add(Dat);
146          }
147        }
148      }
149    }
150  }
151  int TAttr::GetIdVSAttr(const TInt& AttrId, const TAttrType Type, TIntV& IdV) const {
152    if (Type == atInt) {
153      for (TIntPrIntH::TIter it = IntAttrVals.BegI(); it < IntAttrVals.EndI(); it++) {
154        if (it.GetKey().GetVal1() == AttrId) {
155          IdV.Add(it.GetKey().GetVal2());
156        }
157      }
158    } else if (Type == atFlt) {
159      for (TIntPrFltH::TIter it = FltAttrVals.BegI(); it < FltAttrVals.EndI(); it++) {
160        if (it.GetKey().GetVal1() == AttrId) {
161          IdV.Add(it.GetKey().GetVal2());
162        }
163      }
164    } else if (Type == atStr) {
165      for (TIntPrStrH::TIter it = StrAttrVals.BegI(); it < StrAttrVals.EndI(); it++) {
166        if (it.GetKey().GetVal1() == AttrId) {
167          IdV.Add(it.GetKey().GetVal2());
168        }
169      }
170    } else {
171      return -1;
172    }
173    return 0;
174  }
175  int TAttr::GetIdVSAttr(const TInt& AttrId, TIntV& IdV) const {
176    IdV = TIntV();
177    if (!AttrIdToName.IsKey(AttrId)) { return -1; }
178    TIntStrPr TypeAndName = AttrIdToName.GetDat(AttrId);
179    TAttrType Type = static_cast<TAttrType>(TypeAndName.GetVal1().Val);
180    return GetIdVSAttr(AttrId, Type, IdV);
181  }
182  int TAttr::GetIdVSAttr(const TStr& AttrName, TIntV& IdV) const {
183    IdV = TIntV();
184    if (!AttrNameToId.IsKey(AttrName)) { return -1; }
185    TIntPr TypeAndId = AttrNameToId.GetDat(AttrName);
186    TAttrType Type = static_cast<TAttrType>(TypeAndId.GetVal1().Val);
187    TInt AttrId = TypeAndId.GetVal2();
188    return GetIdVSAttr(AttrId, Type, IdV);
189  }
190  int TAttr::AddSAttr(const TStr& Name, const TAttrType& AttrType, TInt& AttrId) {
191    if (AttrType != atInt && AttrType != atFlt && AttrType != atStr) {
192      return -1; 
193    }
194    if (AttrNameToId.IsKey(Name)) { return -1; }
<span onclick='openModal()' class='match'>195    AttrId = AttrNameToId.GetMxKeyIds();
196    TIntPr TypeAndId(AttrType, AttrId);
197    AttrNameToId.AddDat(Name, TypeAndId);
198    TIntStrPr TypeAndName(AttrType, Name);
</span>199    AttrIdToName.AddDat(AttrId, TypeAndName);
200    return 0;
201  }
202  int TAttr::GetSAttrId(const TStr& Name, TInt& AttrId, TAttrType& AttrType) const {
203    if (!AttrNameToId.IsKey(Name)) {
204      return -1;
205    }
206    TIntPr TypeAndId = AttrNameToId.GetDat(Name);
207    AttrType = static_cast<TAttrType>(TypeAndId.GetVal1().Val);
208    AttrId = TypeAndId.GetVal2();
209    return 0;
210  }
211  int TAttr::GetSAttrName(const TInt& AttrId, TStr& Name, TAttrType& AttrType) const {
212    if (!AttrIdToName.IsKey(AttrId)) {
213      return -1;
214    }
215    TIntStrPr TypeAndName = AttrIdToName.GetDat(AttrId);
216    AttrType = static_cast<TAttrType>(TypeAndName.GetVal1().Val);
217    Name = TypeAndName.GetVal2();
218    return 0;
219  }
220  int TAttrPair::AddSAttrDat(const TIntPr& Id, const TStr& AttrName, const TInt& Val) {
221    TInt AttrId;
222    if (!AttrNameToId.IsKey(AttrName)) {
223      AddSAttr(AttrName, atInt, AttrId);
224    } else {
225      AttrId = AttrNameToId.GetDat(AttrName).GetVal2();
226    }
227    return AddSAttrDat(Id, AttrId, Val);
228  } 
229  int TAttrPair::AddSAttrDat(const TIntPr& Id, const TInt& AttrId, const TInt& Val) {
230    if (!AttrIdToName.IsKey(AttrId)) { return -1; }
231    if (AttrIdToName.GetDat(AttrId).GetVal1() != atInt) { return -2; }
232    TIntIntPrPr Key(AttrId, Id);
233    IntAttrVals.AddDat(Key, Val);
234    return 0;
235  }
236  int TAttrPair::AddSAttrDat(const TIntPr& Id, const TStr& AttrName, const TFlt& Val) {
237    TInt AttrId;
238    if (!AttrNameToId.IsKey(AttrName)) {
239      AddSAttr(AttrName, atFlt, AttrId);
240    } else {
241      AttrId = AttrNameToId.GetDat(AttrName).GetVal2();
242    }
243    return AddSAttrDat(Id, AttrId, Val);
244  } 
245  int TAttrPair::AddSAttrDat(const TIntPr& Id, const TInt& AttrId, const TFlt& Val) {
246    if (!AttrIdToName.IsKey(AttrId)) { return -1; }
247    if (AttrIdToName.GetDat(AttrId).GetVal1() != atFlt) { return -2; }
248    TIntIntPrPr Key(AttrId, Id);
249    FltAttrVals.AddDat(Key, Val);
250    return 0;
251  }
252  int TAttrPair::AddSAttrDat(const TIntPr& Id, const TStr& AttrName, const TStr& Val) {
253    TInt AttrId;
254    if (!AttrNameToId.IsKey(AttrName)) {
255      AddSAttr(AttrName, atStr, AttrId);
256    } else {
257      AttrId = AttrNameToId.GetDat(AttrName).GetVal2();
258    }
259    return AddSAttrDat(Id, AttrId, Val);
260  } 
261  int TAttrPair::AddSAttrDat(const TIntPr& Id, const TInt& AttrId, const TStr& Val) {
262    if (!AttrIdToName.IsKey(AttrId)) { return -1; }
263    if (AttrIdToName.GetDat(AttrId).GetVal1() != atStr) { return -2; }
264    TIntIntPrPr Key(AttrId, Id);
265    StrAttrVals.AddDat(Key, Val);
266    return 0;
267  }
268  int TAttrPair::GetSAttrDat(const TIntPr& Id, const TStr& AttrName, TInt& Val) const {
269    if (!AttrNameToId.IsKey(AttrName)) { return -1; }
270    TInt AttrId = AttrNameToId.GetDat(AttrName).GetVal2();
271    return GetSAttrDat(Id, AttrId, Val);
272  } 
273  int TAttrPair::GetSAttrDat(const TIntPr& Id, const TInt& AttrId, TInt& Val) const {
274    if (!AttrIdToName.IsKey(AttrId)) { return -1; }
275    if (AttrIdToName.GetDat(AttrId).GetVal1() != atInt) { return -2; }
276    TIntIntPrPr Key(AttrId, Id);
277    if (IntAttrVals.IsKey(Key)) {
278      Val = IntAttrVals.GetDat(Key);
279      return 0;
280    }
281    return -1;
282  }
283  int TAttrPair::GetSAttrDat(const TIntPr& Id, const TStr& AttrName, TFlt& Val) const {
284    if (!AttrNameToId.IsKey(AttrName)) { return -1; }
285    TInt AttrId = AttrNameToId.GetDat(AttrName).GetVal2();
286    return GetSAttrDat(Id, AttrId, Val);
287  } 
288  int TAttrPair::GetSAttrDat(const TIntPr& Id, const TInt& AttrId, TFlt& Val) const {
289    if (!AttrIdToName.IsKey(AttrId)) { return -1; }
290    if (AttrIdToName.GetDat(AttrId).GetVal1() != atFlt) { return -2; }
291    TIntIntPrPr Key(AttrId, Id);
292    if (FltAttrVals.IsKey(Key)) {
293      Val = FltAttrVals.GetDat(Key);
294      return 0;
295    }
296    return -1;
297  }
298  int TAttrPair::GetSAttrDat(const TIntPr& Id, const TStr& AttrName, TStr& Val) const {
299    if (!AttrNameToId.IsKey(AttrName)) { return -1; }
300    TInt AttrId = AttrNameToId.GetDat(AttrName).GetVal2();
301    return GetSAttrDat(Id, AttrId, Val);
302  } 
303  int TAttrPair::GetSAttrDat(const TIntPr& Id, const TInt& AttrId, TStr& Val) const {
304    if (!AttrIdToName.IsKey(AttrId)) { return -1; }
305    if (AttrIdToName.GetDat(AttrId).GetVal1() != atStr) { return -2; }
306    TIntIntPrPr Key(AttrId, Id);
307    if (StrAttrVals.IsKey(Key)) {
308      Val = StrAttrVals.GetDat(Key);
309      return 0;
310    }
311    return -1;
312  }
313  int TAttrPair::DelSAttrDat(const TIntPr& Id, const TStr& AttrName) {
314    if (!AttrNameToId.IsKey(AttrName)) { return -1; }
315    TInt AttrId = AttrNameToId.GetDat(AttrName).GetVal2();
316    return DelSAttrDat(Id, AttrId);
317  } 
318  int TAttrPair::DelSAttrDat(const TIntPr& Id, const TInt& AttrId) {
319    TIntIntPrPr Key(AttrId, Id);
320    if (IntAttrVals.IsKey(Key)) {
321      IntAttrVals.DelKey(Key);
322      return 0;
323    } else if (FltAttrVals.IsKey(Key)) {
324      FltAttrVals.DelKey(Key);
325      return 0;
326    } else if (StrAttrVals.IsKey(Key)) {
327      StrAttrVals.DelKey(Key);
328      return 0;
329    }
330    return -1;
331  }
332  void TAttrPair::DelSAttrId(const TIntPr& Id) {
333    for (TStrIntPrH::TIter it = AttrNameToId.BegI(); it < AttrNameToId.EndI(); it++) {
334      TAttrType CurType = static_cast<TAttrType>(it.GetDat().GetVal1().Val);
335      TIntIntPrPr AttrKey(it.GetDat().GetVal2(), Id);
336      if (CurType == atInt) {
337        IntAttrVals.DelIfKey(AttrKey);
338      } else if (CurType == atFlt) {
339        FltAttrVals.DelIfKey(AttrKey);
340      } else if (CurType == atStr) {
341        StrAttrVals.DelIfKey(AttrKey);
342      }
343    }
344  }
345  void TAttrPair::GetSAttrV(const TIntPr& Id, const TAttrType AttrType, TAttrPrV& AttrV) const {
346    AttrV = TAttrPrV();
347    for (TStrIntPrH::TIter it = AttrNameToId.BegI(); it < AttrNameToId.EndI(); it++) {
348      TAttrType CurType = static_cast<TAttrType>(it.GetDat().GetVal1().Val);
349      if (CurType == AttrType) {
350        TIntIntPrPr AttrKey(it.GetDat().GetVal2(), Id);
351        if (CurType == atInt) {
352          if (IntAttrVals.IsKey(AttrKey)) {
353            TAttrPr Dat(it.GetKey(), CurType);
354            AttrV.Add(Dat);
355          }
356        } else if (CurType == atFlt) {
357          if (FltAttrVals.IsKey(AttrKey)) {
358            TAttrPr Dat(it.GetKey(), CurType);
359            AttrV.Add(Dat);
360          }
361        } else if (CurType == atStr) {
362          if (StrAttrVals.IsKey(AttrKey)) {
363            TAttrPr Dat(it.GetKey(), CurType);
364            AttrV.Add(Dat);
365          }
366        }
367      }
368    }
369  }
370  int TAttrPair::GetIdVSAttr(const TInt& AttrId, const TAttrType Type, TIntPrV& IdV) const {
371    if (Type == atInt) {
372      for (TIntIntPrPrIntH::TIter it = IntAttrVals.BegI(); it < IntAttrVals.EndI(); it++) {
373        if (it.GetKey().GetVal1() == AttrId) {
374          IdV.Add(it.GetKey().GetVal2());
375        }
376      }
377    } else if (Type == atFlt) {
378      for (TIntIntPrPrFltH::TIter it = FltAttrVals.BegI(); it < FltAttrVals.EndI(); it++) {
379        if (it.GetKey().GetVal1() == AttrId) {
380          IdV.Add(it.GetKey().GetVal2());
381        }
382      }
383    } else if (Type == atStr) {
384      for (TIntIntPrPrStrH::TIter it = StrAttrVals.BegI(); it < StrAttrVals.EndI(); it++) {
385        if (it.GetKey().GetVal1() == AttrId) {
386          IdV.Add(it.GetKey().GetVal2());
387        }
388      }
389    } else {
390      return -1;
391    }
392    return 0;
393  }
394  int TAttrPair::GetIdVSAttr(const TStr& AttrName, TIntPrV& IdV) const {
395    IdV = TIntPrV();
396    if (!AttrNameToId.IsKey(AttrName)) { return -1; }
397    TIntPr TypeAndId = AttrNameToId.GetDat(AttrName);
398    TAttrType Type = static_cast<TAttrType>(TypeAndId.GetVal1().Val);
399    TInt AttrId = TypeAndId.GetVal2();
400    return GetIdVSAttr(AttrId, Type, IdV);
401  }
402  int TAttrPair::GetIdVSAttr(const TInt& AttrId, TIntPrV& IdV) const {
403    IdV = TIntPrV();
404    if (!AttrIdToName.IsKey(AttrId)) { return -1; }
405    TIntStrPr TypeAndName = AttrIdToName.GetDat(AttrId);
406    TAttrType Type = static_cast<TAttrType>(TypeAndName.GetVal1().Val);
407    return GetIdVSAttr(AttrId, Type, IdV);
408  }
409  int TAttrPair::AddSAttr(const TStr& Name, const TAttrType& AttrType, TInt& AttrId) {
410    if (AttrType != atInt && AttrType != atFlt && AttrType != atStr) {
411      return -1; 
412    }
413    AttrId = AttrNameToId.GetMxKeyIds();
414    TIntPr TypeAndId(AttrType, AttrId);
415    AttrNameToId.AddDat(Name, TypeAndId);
416    TIntStrPr TypeAndName(AttrType, Name);
417    AttrIdToName.AddDat(AttrId, TypeAndName);
418    return 0;
419  }
420  int TAttrPair::GetSAttrId(const TStr& Name, TInt& AttrId, TAttrType& AttrType) const {
421    if (!AttrNameToId.IsKey(Name)) {
422      return -1;
423    }
424    TIntPr TypeAndId = AttrNameToId.GetDat(Name);
425    AttrType = static_cast<TAttrType>(TypeAndId.GetVal1().Val);
426    AttrId = TypeAndId.GetVal2();
427    return 0;
428  }
429  int TAttrPair::GetSAttrName(const TInt& AttrId, TStr& Name, TAttrType& AttrType) const {
430    if (!AttrIdToName.IsKey(AttrId)) {
431      return -1;
432    }
433    TIntStrPr TypeAndName = AttrIdToName.GetDat(AttrId);
434    AttrType = static_cast<TAttrType>(TypeAndName.GetVal1().Val);
435    Name = TypeAndName.GetVal2();
436    return 0;
437  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from notepad-plus-plus-MDEwOlJlcG9zaXRvcnkzMzAxNDgxMQ==-flat-ColourPicker.cpp</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-attr.cpp</div>
                </div>
                <div class="column column_space"><pre><code>64  	HGDIOBJ oldObj = ::SelectObject(hDC, hbrush);
65  	::Rectangle(hDC, 0, 0, rc.right, rc.bottom);
66  	::SelectObject(hDC, oldObj);
67  	::DeleteObject(hbrush);
68  	::SetBkMode(hDC, oldMode);
</pre></code></div>
                <div class="column column_space"><pre><code>195    AttrId = AttrNameToId.GetMxKeyIds();
196    TIntPr TypeAndId(AttrType, AttrId);
197    AttrNameToId.AddDat(Name, TypeAndId);
198    TIntStrPr TypeAndName(AttrType, Name);
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    