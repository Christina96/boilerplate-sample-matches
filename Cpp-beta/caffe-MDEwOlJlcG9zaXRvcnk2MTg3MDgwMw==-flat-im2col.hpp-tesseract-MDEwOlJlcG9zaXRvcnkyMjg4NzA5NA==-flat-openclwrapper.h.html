
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 76.82926829268293%, Tokens: 9, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>caffe-MDEwOlJlcG9zaXRvcnk2MTg3MDgwMw==-flat-im2col.hpp</h3>
            <pre><code>1  #ifndef _CAFFE_UTIL_IM2COL_HPP_
2  #define _CAFFE_UTIL_IM2COL_HPP_
3  namespace caffe {
4  template <typename Dtype>
5  void im2col_nd_cpu(const Dtype* data_im, const int num_spatial_axes,
6      const int* im_shape, const int* col_shape,
7      const int* kernel_shape, const int* pad, const int* stride,
8      const int* dilation, Dtype* data_col);
9  template <typename Dtype>
10  void im2col_cpu(const Dtype* data_im, const int channels,
11      const int height, const int width, const int kernel_h, const int kernel_w,
12      const int pad_h, const int pad_w, const int stride_h,
13      const int stride_w, const int dilation_h, const int dilation_w,
14      Dtype* data_col);
15  template <typename Dtype>
16  void im3d2col_cpu(const Dtype* data_im, const int channels,
17      const int depth, const int height, const int width, const int kernel_d, const int kernel_h, const int kernel_w,
18      const int pad_d, const int pad_h, const int pad_w, const int stride_d, const int stride_h,
19      const int stride_w, const int dilation_d, const int dilation_h, const int dilation_w,
20      Dtype* data_col);
21  template <typename Dtype>
<span onclick='openModal()' class='match'>22  void col2im_nd_cpu(const Dtype* data_col, const int num_spatial_axes,
23      const int* im_shape, const int* col_shape,
24      const int* kernel_shape, const int* pad, const int* stride,
25      const int* dilation, Dtype* data_im);
</span>26  template <typename Dtype>
27  void col2im_cpu(const Dtype* data_col, const int channels,
28      const int height, const int width, const int kernel_h, const int kernel_w,
29      const int pad_h, const int pad_w, const int stride_h,
30      const int stride_w, const int dilation_h, const int dilation_w,
31      Dtype* data_im);
32  template <typename Dtype>
33  void col2im3d_cpu(const Dtype* data_col, const int channels,
34      const int depth, const int height, const int width, const int kernel_d, const int kernel_h, const int kernel_w,
35      const int pad_d, const int pad_h, const int pad_w, const int stride_d, const int stride_h,
36      const int stride_w, const int dilation_d, const int dilation_h, const int dilation_w,
37      Dtype* data_im);
38  template <typename Dtype>
39  void im2col_nd_gpu(const Dtype* data_im, const int num_spatial_axes,
40      const int col_size, const int* im_shape, const int* col_shape,
41      const int* kernel_shape, const int* pad, const int* stride,
42      const int* dilation, Dtype* data_col);
43  template <typename Dtype>
44  void im2col_gpu(const Dtype* data_im, const int channels,
45      const int height, const int width, const int kernel_h, const int kernel_w,
46      const int pad_h, const int pad_w, const int stride_h,
47      const int stride_w, const int dilation_h, const int dilation_w,
48      Dtype* data_col);
49  template <typename Dtype>
50  void col2im_nd_gpu(const Dtype* data_col, const int num_spatial_axes,
51      const int im_size, const int* im_shape, const int* col_shape,
52      const int* kernel_shape, const int* pad, const int* stride,
53      const int* dilation, Dtype* data_im);
54  template <typename Dtype>
55  void col2im_gpu(const Dtype* data_col, const int channels,
56      const int height, const int width, const int kernel_h, const int kernel_w,
57      const int pad_h, const int pad_w, const int stride_h,
58      const int stride_w, const int dilation_h, const int dilation_w,
59      Dtype* data_im);
60  }  
61  #endif  
</code></pre>
        </div>
        <div class="column">
            <h3>tesseract-MDEwOlJlcG9zaXRvcnkyMjg4NzA5NA==-flat-openclwrapper.h</h3>
            <pre><code>1  #ifndef TESSERACT_OPENCL_OPENCLWRAPPER_H_
2  #define TESSERACT_OPENCL_OPENCLWRAPPER_H_
3  #include <allheaders.h>
4  #include <cstdio>
5  #include "pix.h"
6  #include "tprintf.h"
7  #ifdef USE_OPENCL
8  #  ifdef __APPLE__
9  #    include <OpenCL/cl.h>
10  #  else
11  #    include <CL/cl.h>
12  #  endif
13  namespace tesseract {
14  class Image;
15  struct TessDeviceScore;
16  enum ds_device_type { DS_DEVICE_NATIVE_CPU = 0, DS_DEVICE_OPENCL_DEVICE };
17  struct ds_device {
18    ds_device_type type;
19    cl_device_id oclDeviceID;
20    char *oclDeviceName;
21    char *oclDriverVersion;
22    TessDeviceScore *score;
23  };
24  #  ifndef strcasecmp
25  #    define strcasecmp strcmp
26  #  endif
27  #  define MAX_KERNEL_STRING_LEN 64
28  #  define MAX_CLFILE_NUM 50
29  #  define MAX_CLKERNEL_NUM 200
30  #  define MAX_KERNEL_NAME_LEN 64
31  #  define CL_QUEUE_THREAD_HANDLE_AMD 0x403E
32  #  define GROUPSIZE_X 16
33  #  define GROUPSIZE_Y 16
34  #  define GROUPSIZE_HMORX 256
35  #  define GROUPSIZE_HMORY 1
36  struct KernelEnv {
37    cl_context mpkContext;
38    cl_command_queue mpkCmdQueue;
39    cl_program mpkProgram;
40    cl_kernel mpkKernel;
41    char mckKernelName[150];
42  };
43  struct OpenCLEnv {
44    cl_platform_id mpOclPlatformID;
45    cl_context mpOclContext;
46    cl_device_id mpOclDevsID;
47    cl_command_queue mpOclCmdQueue;
48  };
49  typedef int (*cl_kernel_function)(void **userdata, KernelEnv *kenv);
50  #  define CHECK_OPENCL(status, name)                                     \
51      if (status != CL_SUCCESS) {                                          \
52        tprintf("OpenCL error code is %d at   when %s .\n", status, name); \
53      }
54  struct GPUEnv {
55    cl_platform_id mpPlatformID;
56    cl_device_type mDevType;
57    cl_context mpContext;
58    cl_device_id *mpArryDevsID;
59    cl_device_id mpDevID;
60    cl_command_queue mpCmdQueue;
61    cl_kernel mpArryKernels[MAX_CLFILE_NUM];
62    cl_program mpArryPrograms[MAX_CLFILE_NUM];  
63    char mArryKnelSrcFile[MAX_CLFILE_NUM][256], 
64        mArrykernelNames[MAX_CLKERNEL_NUM][MAX_KERNEL_STRING_LEN + 1];
65    cl_kernel_function mpArryKnelFuncs[MAX_CLKERNEL_NUM];
66    int mnKernelCount, mnFileCount, 
67        mnIsUserCreated;            
68    int mnKhrFp64Flag;
69    int mnAmdFp64Flag;
70  };
71  class OpenclDevice {
72  public:
73    static GPUEnv gpuEnv;
74    static int isInited;
75    OpenclDevice();
76    ~OpenclDevice();
77    static int InitEnv();                  
78    static int InitOpenclRunEnv(int argc); 
79    static int InitOpenclRunEnv_DeviceSelection(
80        int argc); 
81    static int RegistOpenclKernel();
82    static int ReleaseOpenclRunEnv();
83    static int ReleaseOpenclEnv(GPUEnv *gpuInfo);
84    static int CompileKernelFile(GPUEnv *gpuInfo, const char *buildOption);
85    static int CachedOfKernerPrg(const GPUEnv *gpuEnvCached, const char *clFileName);
86    static int GeneratBinFromKernelSource(cl_program program, const char *clFileName);
87    static int WriteBinaryToFile(const char *fileName, const char *birary, size_t numBytes);
88    static int BinaryGenerated(const char *clFileName, FILE **fhandle);
89    static l_uint32 *pixReadFromTiffKernel(l_uint32 *tiffdata, l_int32 w, l_int32 h, l_int32 wpl,
90                                           l_uint32 *line);
91    static int composeRGBPixelCl(int *tiffdata, int *line, int h, int w);
92    static int initMorphCLAllocations(l_int32 wpl, l_int32 h, Image pixs);
93    static void releaseMorphCLBuffers();
94    static void pixGetLinesCL(Image pixd, Image pixs, Image *pix_vline, Image *pix_hline, Image *pixClosed,
95                              bool getpixClosed, l_int32 close_hsize, l_int32 close_vsize,
96                              l_int32 open_hsize, l_int32 open_vsize, l_int32 line_hsize,
97                              l_int32 line_vsize);
98    static int SetKernelEnv(KernelEnv *envInfo);
99    static int LoadOpencl();
100  #  ifdef WIN32
101    static void FreeOpenclDll();
102  #  endif
103    inline static int AddKernelConfig(int kCount, const char *kName);
<span onclick='openModal()' class='match'>104    static int HistogramRectOCL(void *imagedata, int bytes_per_pixel, int bytes_per_line, int left,
104    static int HistogramRectOCL(void *imagedata, int bytes_per_pixel, int bytes_per_line, int left,
</span>105                                int top, int width, int height, int kHistogramSize,
106                                int *histogramAllChannels);
107    static int ThresholdRectToPixOCL(unsigned char *imagedata, int bytes_per_pixel,
108                                     int bytes_per_line, int *thresholds, int *hi_values, Image *pix,
109                                     int rect_height, int rect_width, int rect_top, int rect_left);
110    static ds_device getDeviceSelection();
111    static ds_device selectedDevice;
112    static bool deviceIsSelected;
113    static bool selectedDeviceIsOpenCL();
114  };
115  }
116  #endif 
117  #endif 
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from caffe-MDEwOlJlcG9zaXRvcnk2MTg3MDgwMw==-flat-im2col.hpp</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from tesseract-MDEwOlJlcG9zaXRvcnkyMjg4NzA5NA==-flat-openclwrapper.h</div>
                </div>
                <div class="column column_space"><pre><code>22  void col2im_nd_cpu(const Dtype* data_col, const int num_spatial_axes,
23      const int* im_shape, const int* col_shape,
24      const int* kernel_shape, const int* pad, const int* stride,
25      const int* dilation, Dtype* data_im);
</pre></code></div>
                <div class="column column_space"><pre><code>104    static int HistogramRectOCL(void *imagedata, int bytes_per_pixel, int bytes_per_line, int left,
104    static int HistogramRectOCL(void *imagedata, int bytes_per_pixel, int bytes_per_line, int left,
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    