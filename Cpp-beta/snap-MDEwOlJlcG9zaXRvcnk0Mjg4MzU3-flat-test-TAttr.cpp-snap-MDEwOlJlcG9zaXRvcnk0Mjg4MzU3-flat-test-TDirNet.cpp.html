
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 64.19753086419753%, Tokens: 11, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-test-TAttr.cpp</h3>
            <pre><code>1  #include <gtest/gtest.h>
2  #include "Snap.h"
3  TEST(TAttr, AddSAttr) {
4    TAttr Attrs;
5    TInt AttrId;
6    int status = Attrs.AddSAttr("TestInt", atInt, AttrId);
7    EXPECT_EQ(0, status);
8    EXPECT_EQ(0, AttrId.Val);
9    status = Attrs.AddSAttr("TestFlt", atFlt, AttrId);
10    EXPECT_EQ(0, status);
11    EXPECT_EQ(1, AttrId.Val);
12    status = Attrs.AddSAttr("TestStr", atStr, AttrId);
13    EXPECT_EQ(0, status);
14    EXPECT_EQ(2, AttrId.Val);
15  }
16  TEST(TAttr, GetSAttrId) {
17    TAttr Attrs;
18    TInt AttrId;
19    Attrs.AddSAttr("TestInt", atInt, AttrId);
20    Attrs.AddSAttr("TestFlt", atFlt, AttrId);
21    Attrs.AddSAttr("TestStr", atStr, AttrId);
22    TAttrType AttrType;
23    int status = Attrs.GetSAttrId(TStr("TestInt"), AttrId, AttrType);
24    EXPECT_EQ(0, status);
25    EXPECT_EQ(atInt, AttrType);
26    EXPECT_EQ(0, AttrId.Val);
27    status = Attrs.GetSAttrId(TStr("TestFlt"), AttrId, AttrType);
28    EXPECT_EQ(0, status);
29    EXPECT_EQ(atFlt, AttrType);
30    EXPECT_EQ(1, AttrId.Val);
31    status = Attrs.GetSAttrId(TStr("TestStr"), AttrId, AttrType);
32    EXPECT_EQ(0, status);
33    EXPECT_EQ(atStr, AttrType);
34    EXPECT_EQ(2, AttrId.Val);
35    status = Attrs.GetSAttrId(TStr("TestError"), AttrId, AttrType);
36    EXPECT_EQ(-1, status);
37  }
38  TEST(TAttr, GetSAttrName) {
39    TAttr Attrs;
40    TInt AttrId;
41    Attrs.AddSAttr("TestInt", atInt, AttrId);
42    Attrs.AddSAttr("TestFlt", atFlt, AttrId);
43    Attrs.AddSAttr("TestStr", atStr, AttrId);
44    TAttrType AttrType;
45    TStr Name;
46    int status = Attrs.GetSAttrName(0, Name, AttrType);
47    EXPECT_EQ(0, status);
48    EXPECT_EQ(atInt, AttrType);
49    EXPECT_STREQ("TestInt", Name.CStr());
50    status = Attrs.GetSAttrName(1, Name, AttrType);
51    EXPECT_EQ(0, status);
52    EXPECT_EQ(atFlt, AttrType);
53    EXPECT_STREQ("TestFlt", Name.CStr());
54    status = Attrs.GetSAttrName(2, Name, AttrType);
55    EXPECT_EQ(0, status);
56    EXPECT_EQ(atStr, AttrType);
57    EXPECT_STREQ("TestStr", Name.CStr());
58    status = Attrs.GetSAttrName(3, Name, AttrType);
59    EXPECT_EQ(-1, status);
60  }
61  TEST(TAttr, AddSAttrDat_int) {
62    TAttr Attrs;
63    TInt Val(5);
64    TInt Id(0);
65    int status = Attrs.AddSAttrDat(Id, 1, Val);
66    EXPECT_EQ(-1, status);
67    TInt AttrId;
68    TStr AttrName("TestInt");
69    Attrs.AddSAttr(AttrName, atInt, AttrId);
70    TFlt ErrorVal(1);
71    status = Attrs.AddSAttrDat(Id, AttrId, ErrorVal);
72    EXPECT_EQ(-2, status);
73    status = Attrs.AddSAttrDat(Id, AttrId, Val);
74    EXPECT_EQ(0, status);
75    status = Attrs.AddSAttrDat(Id, AttrName, Val);
76    EXPECT_EQ(0, status);
77    TStr NewName("TestInt2");
78    status = Attrs.AddSAttrDat(Id, NewName, Val);
79    EXPECT_EQ(0, status);
80  }
81  TEST(TAttr, AddSAttrDat_flt) {
82    TAttr Attrs;
83    TFlt Val(5.0);
84    TInt Id(0);
85    int status = Attrs.AddSAttrDat(Id, 1, Val);
86    EXPECT_EQ(-1, status);
87    TInt AttrId;
88    TStr AttrName("TestFlt");
89    Attrs.AddSAttr(AttrName, atFlt, AttrId);
90    TInt ErrorVal(1);
91    status = Attrs.AddSAttrDat(Id, AttrId, ErrorVal);
92    EXPECT_EQ(-2, status);
93    status = Attrs.AddSAttrDat(Id, AttrId, Val);
94    EXPECT_EQ(0, status);
95    status = Attrs.AddSAttrDat(Id, AttrName, Val);
96    EXPECT_EQ(0, status);
97    TStr NewName("TestFlt2");
98    status = Attrs.AddSAttrDat(Id, NewName, Val);
99    EXPECT_EQ(0, status);
100  }
101  TEST(TAttr, AddSAttrDat_str) {
102    TAttr Attrs;
103    TStr Val("5");
104    TInt Id(0);
105    int status = Attrs.AddSAttrDat(Id, 1, Val);
106    EXPECT_EQ(-1, status);
107    TInt AttrId;
108    TStr AttrName("TestFlt");
109    Attrs.AddSAttr(AttrName, atStr, AttrId);
110    TInt ErrorVal(1);
111    status = Attrs.AddSAttrDat(Id, AttrId, ErrorVal);
112    EXPECT_EQ(-2, status);
113    status = Attrs.AddSAttrDat(Id, AttrId, Val);
114    EXPECT_EQ(0, status);
115    status = Attrs.AddSAttrDat(Id, AttrName, Val);
116    EXPECT_EQ(0, status);
117    TStr NewName("TestStr2");
118    status = Attrs.AddSAttrDat(Id, NewName, Val);
119    EXPECT_EQ(0, status);
120  }
121  TEST(TAttr, GetSAttrDat_int) {
122    TAttr Attrs;
123    TInt Val;
124    TInt AttrId(0);
125    TStr AttrName("TestInt");
126    TInt NId(0);
127    int status = Attrs.GetSAttrDat(NId, AttrName, Val);
128    EXPECT_EQ(-1, status);
129    status = Attrs.GetSAttrDat(NId, AttrId, Val);
130    EXPECT_EQ(-1, status);
131    Attrs.AddSAttr(AttrName, atInt, AttrId);
132    TInt TestVal(5);
133    Attrs.AddSAttrDat(NId, AttrId, TestVal);
134    status = Attrs.GetSAttrDat(NId, AttrId, Val);
135    EXPECT_EQ(0, status);
136    EXPECT_EQ(TestVal.Val, Val.Val);
137    status = Attrs.GetSAttrDat(NId, AttrName, Val);
138    EXPECT_EQ(0, status);
139    EXPECT_EQ(TestVal.Val, Val.Val);
140  }
141  TEST(TAttr, GetSAttrDat_flt) {
142    TAttr Attrs;
143    TFlt Val;
144    TInt AttrId(0);
145    TStr AttrName("TestInt");
146    TInt NId(0);
147    int status = Attrs.GetSAttrDat(NId, AttrName, Val);
148    EXPECT_EQ(-1, status);
149    status = Attrs.GetSAttrDat(NId, AttrId, Val);
150    EXPECT_EQ(-1, status);
151    Attrs.AddSAttr(AttrName, atFlt, AttrId);
152    TFlt TestVal(5.0);
153    Attrs.AddSAttrDat(NId, AttrId, TestVal);
154    status = Attrs.GetSAttrDat(NId, AttrId, Val);
155    EXPECT_EQ(0, status);
156    EXPECT_EQ(TestVal.Val, Val.Val);
157    status = Attrs.GetSAttrDat(NId, AttrName, Val);
158    EXPECT_EQ(0, status);
159    EXPECT_EQ(TestVal.Val, Val.Val);
160  }
161  TEST(TAttr, GetSAttrDat_str) {
162    TAttr Attrs;
163    TStr Val;
164    TInt AttrId(0);
165    TStr AttrName("TestInt");
166    TInt NId(0);
167    int status = Attrs.GetSAttrDat(NId, AttrName, Val);
168    EXPECT_EQ(-1, status);
169    status = Attrs.GetSAttrDat(NId, AttrId, Val);
170    EXPECT_EQ(-1, status);
171    Attrs.AddSAttr(AttrName, atStr, AttrId);
172    TStr TestVal("5");
173    Attrs.AddSAttrDat(NId, AttrId, TestVal);
174    status = Attrs.GetSAttrDat(NId, AttrId, Val);
175    EXPECT_EQ(0, status);
176    EXPECT_STREQ(TestVal.CStr(), Val.CStr());
177    status = Attrs.GetSAttrDat(NId, AttrName, Val);
178    EXPECT_EQ(0, status);
179    EXPECT_STREQ(TestVal.CStr(), Val.CStr());
180  }
181  TEST(TAttr, DelSAttrDat) {
182    TAttr Attrs;
183    TStr IntAttr("TestInt");
184    TInt IntId;
185    Attrs.AddSAttr(IntAttr, atInt, IntId);
186    TStr FltAttr("TestFlt");
187    TInt FltId;
188    Attrs.AddSAttr(FltAttr, atFlt, FltId);
189    TStr StrAttr("TestStr");
190    TInt StrId;
191    Attrs.AddSAttr(StrAttr, atStr, StrId);
192    TInt Id(0);
193    int status = Attrs.DelSAttrDat(Id, IntAttr);
194    EXPECT_EQ(-1, status);
195    status = Attrs.DelSAttrDat(Id, IntId);
196    EXPECT_EQ(-1, status);
197    TInt IntVal(5);
198    Attrs.AddSAttrDat(Id, IntId, IntVal);
199    status = Attrs.DelSAttrDat(Id, IntAttr);
200    EXPECT_EQ(0, status);
201    Attrs.AddSAttrDat(Id, IntId, IntVal);
202    status = Attrs.DelSAttrDat(Id, IntId);
203    EXPECT_EQ(0, status);
204    status = Attrs.DelSAttrDat(Id, IntId);
205    EXPECT_EQ(-1, status);
206    TFlt FltVal(5.0);
207    Attrs.AddSAttrDat(Id, FltId, FltVal);
208    status = Attrs.DelSAttrDat(Id, FltAttr);
209    EXPECT_EQ(0, status);
210    Attrs.AddSAttrDat(Id, FltId, FltVal);
211    status = Attrs.DelSAttrDat(Id, FltId);
212    EXPECT_EQ(0, status);
213    status = Attrs.DelSAttrDat(Id, FltId);
214    EXPECT_EQ(-1, status);
215    TStr StrVal("5");
216    Attrs.AddSAttrDat(Id, StrId, StrVal);
217    status = Attrs.DelSAttrDat(Id, StrAttr);
218    EXPECT_EQ(0, status);
219    Attrs.AddSAttrDat(Id, StrId, StrVal);
220    status = Attrs.DelSAttrDat(Id, StrId);
221    EXPECT_EQ(0, status);
222    status = Attrs.DelSAttrDat(Id, StrId);
223    EXPECT_EQ(-1, status);
224  }
225  TEST(TAttr, GetSAttrV) {
226    TAttr Attrs;
227    TStr IntAttr("TestInt");
228    TInt IntId;
229    Attrs.AddSAttr(IntAttr, atInt, IntId);
230    TStr FltAttr("TestFlt");
231    TInt FltId;
232    Attrs.AddSAttr(FltAttr, atFlt, FltId);
233    TStr StrAttr("TestStr");
234    TInt StrId;
235    Attrs.AddSAttr(StrAttr, atStr, StrId);
236    TInt Id(0);
237    TInt IntVal(5);
238    Attrs.AddSAttrDat(Id, IntId, IntVal);
239    TFlt FltVal(5.0);
240    Attrs.AddSAttrDat(Id, FltId, FltVal);
241    TStr StrVal("5");
242    Attrs.AddSAttrDat(Id, StrId, StrVal);
243    TAttrPrV AttrV;
244    Attrs.GetSAttrV(Id, atInt, AttrV);
245    EXPECT_EQ(1, AttrV.Len());
246    Attrs.GetSAttrV(Id, atFlt, AttrV);
247    EXPECT_EQ(1, AttrV.Len());
248    Attrs.GetSAttrV(Id, atStr, AttrV);
249    EXPECT_EQ(1, AttrV.Len());
250  }
251  TEST(TAttr, GetIdVSAttr) {
252    TAttr Attrs;
253    TStr IntAttr("TestInt");
254    TInt IntId;
255    Attrs.AddSAttr(IntAttr, atInt, IntId);
256    TStr FltAttr("TestFlt");
257    TInt FltId;
258    Attrs.AddSAttr(FltAttr, atFlt, FltId);
259    TStr StrAttr("TestStr");
260    TInt StrId;
261    Attrs.AddSAttr(StrAttr, atStr, StrId);
262    TInt IntVal(0);
263    TFlt FltVal(0);
264    TStr StrVal("test");
265    for (int i = 0; i < 10; i++) {
266      TInt Id(i);
267      Attrs.AddSAttrDat(Id, IntId, IntVal);
268      if (i%2 == 0) {
269        Attrs.AddSAttrDat(Id, FltId, FltVal);
270      }
271    }
272    Attrs.AddSAttrDat(0, StrId, StrVal);
273    TIntV IdV;
274    Attrs.GetIdVSAttr(IntAttr, IdV);
275    EXPECT_EQ(10, IdV.Len());
276    Attrs.GetIdVSAttr(IntId, IdV);
277    EXPECT_EQ(10, IdV.Len());
278    Attrs.GetIdVSAttr(FltAttr, IdV);
279    EXPECT_EQ(5, IdV.Len());
280    Attrs.GetIdVSAttr(FltId, IdV);
281    EXPECT_EQ(5, IdV.Len());
282    Attrs.GetIdVSAttr(StrAttr, IdV);
283    EXPECT_EQ(1, IdV.Len());
284    Attrs.GetIdVSAttr(StrId, IdV);
285    EXPECT_EQ(1, IdV.Len());
286  }
287  TEST(TAttr, DelSAttrId) {
288    TAttr Attrs;
289    TStr IntAttr("TestInt");
290    TInt IntId;
291    Attrs.AddSAttr(IntAttr, atInt, IntId);
292    TStr FltAttr("TestFlt");
293    TInt FltId;
294    Attrs.AddSAttr(FltAttr, atFlt, FltId);
295    TStr StrAttr("TestStr");
296    TInt StrId;
297    Attrs.AddSAttr(StrAttr, atStr, StrId);
298    TInt Id(0);
299    TInt IntVal(5);
300    Attrs.AddSAttrDat(Id, IntId, IntVal);
301    TFlt FltVal(5.0);
302    Attrs.AddSAttrDat(Id, FltId, FltVal);
303    TStr StrVal("5");
304    Attrs.AddSAttrDat(Id, StrId, StrVal);
305  }
306  TEST(TAttrPair, AddSAttr) {
307    TAttrPair Attrs;
308    TInt AttrId;
309    int status = Attrs.AddSAttr("TestInt", atInt, AttrId);
310    EXPECT_EQ(0, status);
311    EXPECT_EQ(0, AttrId.Val);
312    status = Attrs.AddSAttr("TestFlt", atFlt, AttrId);
313    EXPECT_EQ(0, status);
314    EXPECT_EQ(1, AttrId.Val);
315    status = Attrs.AddSAttr("TestStr", atStr, AttrId);
316    EXPECT_EQ(0, status);
317    EXPECT_EQ(2, AttrId.Val);
318  }
319  TEST(TAttrPair, GetSAttrId) {
320    TAttrPair Attrs;
321    TInt AttrId;
322    Attrs.AddSAttr("TestInt", atInt, AttrId);
323    Attrs.AddSAttr("TestFlt", atFlt, AttrId);
324    Attrs.AddSAttr("TestStr", atStr, AttrId);
325    TAttrType AttrType;
326    int status = Attrs.GetSAttrId(TStr("TestInt"), AttrId, AttrType);
327    EXPECT_EQ(0, status);
328    EXPECT_EQ(atInt, AttrType);
329    EXPECT_EQ(0, AttrId.Val);
330    status = Attrs.GetSAttrId(TStr("TestFlt"), AttrId, AttrType);
331    EXPECT_EQ(0, status);
332    EXPECT_EQ(atFlt, AttrType);
333    EXPECT_EQ(1, AttrId.Val);
334    status = Attrs.GetSAttrId(TStr("TestStr"), AttrId, AttrType);
335    EXPECT_EQ(0, status);
336    EXPECT_EQ(atStr, AttrType);
337    EXPECT_EQ(2, AttrId.Val);
338    status = Attrs.GetSAttrId(TStr("TestError"), AttrId, AttrType);
339    EXPECT_EQ(-1, status);
340  }
341  TEST(TAttrPair, GetSAttrName) {
342    TAttrPair Attrs;
343    TInt AttrId;
344    Attrs.AddSAttr("TestInt", atInt, AttrId);
345    Attrs.AddSAttr("TestFlt", atFlt, AttrId);
346    Attrs.AddSAttr("TestStr", atStr, AttrId);
347    TAttrType AttrType;
348    TStr Name;
349    int status = Attrs.GetSAttrName(0, Name, AttrType);
350    EXPECT_EQ(0, status);
351    EXPECT_EQ(atInt, AttrType);
352    EXPECT_STREQ("TestInt", Name.CStr());
353    status = Attrs.GetSAttrName(1, Name, AttrType);
354    EXPECT_EQ(0, status);
355    EXPECT_EQ(atFlt, AttrType);
356    EXPECT_STREQ("TestFlt", Name.CStr());
357    status = Attrs.GetSAttrName(2, Name, AttrType);
358    EXPECT_EQ(0, status);
359    EXPECT_EQ(atStr, AttrType);
360    EXPECT_STREQ("TestStr", Name.CStr());
361    status = Attrs.GetSAttrName(3, Name, AttrType);
362    EXPECT_EQ(-1, status);
363  }
364  TEST(TAttrPair, AddSAttrDat_int) {
365    TAttrPair Attrs;
366    TInt Val(5);
367    TIntPr Id(0, 1);
368    int status = Attrs.AddSAttrDat(Id, 1, Val);
369    EXPECT_EQ(-1, status);
370    TInt AttrId;
371    TStr AttrName("TestInt");
372    Attrs.AddSAttr(AttrName, atInt, AttrId);
373    TFlt ErrorVal(1);
374    status = Attrs.AddSAttrDat(Id, AttrId, ErrorVal);
375    EXPECT_EQ(-2, status);
376    status = Attrs.AddSAttrDat(Id, AttrId, Val);
377    EXPECT_EQ(0, status);
378    status = Attrs.AddSAttrDat(Id, AttrName, Val);
379    EXPECT_EQ(0, status);
380    TStr NewName("TestInt2");
381    status = Attrs.AddSAttrDat(Id, NewName, Val);
382    EXPECT_EQ(0, status);
383  }
384  TEST(TAttrPair, AddSAttrDat_flt) {
385    TAttrPair Attrs;
386    TFlt Val(5.0);
387    TIntPr Id(0, 1);
388    int status = Attrs.AddSAttrDat(Id, 1, Val);
389    EXPECT_EQ(-1, status);
390    TInt AttrId;
391    TStr AttrName("TestFlt");
392    Attrs.AddSAttr(AttrName, atFlt, AttrId);
393    TInt ErrorVal(1);
394    status = Attrs.AddSAttrDat(Id, AttrId, ErrorVal);
395    EXPECT_EQ(-2, status);
396    status = Attrs.AddSAttrDat(Id, AttrId, Val);
397    EXPECT_EQ(0, status);
398    status = Attrs.AddSAttrDat(Id, AttrName, Val);
399    EXPECT_EQ(0, status);
400    TStr NewName("TestFlt2");
401    status = Attrs.AddSAttrDat(Id, NewName, Val);
402    EXPECT_EQ(0, status);
403  }
404  TEST(TAttrPair, AddSAttrDat_str) {
405    TAttrPair Attrs;
406    TStr Val("5");
407    TIntPr Id(0, 1);
408    int status = Attrs.AddSAttrDat(Id, 1, Val);
409    EXPECT_EQ(-1, status);
410    TInt AttrId;
411    TStr AttrName("TestFlt");
412    Attrs.AddSAttr(AttrName, atStr, AttrId);
413    TInt ErrorVal(1);
414    status = Attrs.AddSAttrDat(Id, AttrId, ErrorVal);
415    EXPECT_EQ(-2, status);
416    status = Attrs.AddSAttrDat(Id, AttrId, Val);
417    EXPECT_EQ(0, status);
418    status = Attrs.AddSAttrDat(Id, AttrName, Val);
419    EXPECT_EQ(0, status);
420    TStr NewName("TestStr2");
421    status = Attrs.AddSAttrDat(Id, NewName, Val);
422    EXPECT_EQ(0, status);
423  }
424  TEST(TAttrPair, GetSAttrDat_int) {
425    TAttrPair Attrs;
426    TInt Val;
427    TInt AttrId(0);
428    TStr AttrName("TestInt");
429    TIntPr Id(0, 1);
430    int status = Attrs.GetSAttrDat(Id, AttrName, Val);
431    EXPECT_EQ(-1, status);
432    status = Attrs.GetSAttrDat(Id, AttrId, Val);
433    EXPECT_EQ(-1, status);
434    Attrs.AddSAttr(AttrName, atInt, AttrId);
435    TInt TestVal(5);
436    Attrs.AddSAttrDat(Id, AttrId, TestVal);
437    status = Attrs.GetSAttrDat(Id, AttrId, Val);
438    EXPECT_EQ(0, status);
439    EXPECT_EQ(TestVal.Val, Val.Val);
440    status = Attrs.GetSAttrDat(Id, AttrName, Val);
441    EXPECT_EQ(0, status);
442    EXPECT_EQ(TestVal.Val, Val.Val);
443  }
444  TEST(TAttrPair, GetSAttrDat_flt) {
445    TAttrPair Attrs;
446    TFlt Val;
447    TInt AttrId(0);
448    TStr AttrName("TestInt");
449    TIntPr Id(0, 1);
450    int status = Attrs.GetSAttrDat(Id, AttrName, Val);
451    EXPECT_EQ(-1, status);
452    status = Attrs.GetSAttrDat(Id, AttrId, Val);
453    EXPECT_EQ(-1, status);
454    Attrs.AddSAttr(AttrName, atFlt, AttrId);
455    TFlt TestVal(5.0);
456    Attrs.AddSAttrDat(Id, AttrId, TestVal);
457    status = Attrs.GetSAttrDat(Id, AttrId, Val);
458    EXPECT_EQ(0, status);
459    EXPECT_EQ(TestVal.Val, Val.Val);
460    status = Attrs.GetSAttrDat(Id, AttrName, Val);
461    EXPECT_EQ(0, status);
462    EXPECT_EQ(TestVal.Val, Val.Val);
463  }
464  TEST(TAttrPair, GetSAttrDat_str) {
465    TAttrPair Attrs;
466    TStr Val;
467    TInt AttrId(0);
468    TStr AttrName("TestInt");
469    TIntPr Id(0, 1);
470    int status = Attrs.GetSAttrDat(Id, AttrName, Val);
471    EXPECT_EQ(-1, status);
472    status = Attrs.GetSAttrDat(Id, AttrId, Val);
473    EXPECT_EQ(-1, status);
474    Attrs.AddSAttr(AttrName, atStr, AttrId);
475    TStr TestVal("5");
476    Attrs.AddSAttrDat(Id, AttrId, TestVal);
477    status = Attrs.GetSAttrDat(Id, AttrId, Val);
478    EXPECT_EQ(0, status);
479    EXPECT_STREQ(TestVal.CStr(), Val.CStr());
480    status = Attrs.GetSAttrDat(Id, AttrName, Val);
481    EXPECT_EQ(0, status);
482    EXPECT_STREQ(TestVal.CStr(), Val.CStr());
483  }
484  TEST(TAttrPair, DelSAttrDat) {
485    TAttrPair Attrs;
486    TStr IntAttr("TestInt");
487    TInt IntId;
488    Attrs.AddSAttr(IntAttr, atInt, IntId);
489    TStr FltAttr("TestFlt");
490    TInt FltId;
491    Attrs.AddSAttr(FltAttr, atFlt, FltId);
492    TStr StrAttr("TestStr");
493    TInt StrId;
494    Attrs.AddSAttr(StrAttr, atStr, StrId);
495    TIntPr Id(0, 1);
496    int status = Attrs.DelSAttrDat(Id, IntAttr);
497    EXPECT_EQ(-1, status);
498    status = Attrs.DelSAttrDat(Id, IntId);
499    EXPECT_EQ(-1, status);
500    TInt IntVal(5);
501    Attrs.AddSAttrDat(Id, IntId, IntVal);
502    status = Attrs.DelSAttrDat(Id, IntAttr);
503    EXPECT_EQ(0, status);
504    Attrs.AddSAttrDat(Id, IntId, IntVal);
505    status = Attrs.DelSAttrDat(Id, IntId);
506    EXPECT_EQ(0, status);
507    status = Attrs.DelSAttrDat(Id, IntId);
508    EXPECT_EQ(-1, status);
509    TFlt FltVal(5.0);
510    Attrs.AddSAttrDat(Id, FltId, FltVal);
511    status = Attrs.DelSAttrDat(Id, FltAttr);
512    EXPECT_EQ(0, status);
513    Attrs.AddSAttrDat(Id, FltId, FltVal);
514    status = Attrs.DelSAttrDat(Id, FltId);
515    EXPECT_EQ(0, status);
516    status = Attrs.DelSAttrDat(Id, FltId);
517    EXPECT_EQ(-1, status);
518    TStr StrVal("5");
519    Attrs.AddSAttrDat(Id, StrId, StrVal);
520    status = Attrs.DelSAttrDat(Id, StrAttr);
521    EXPECT_EQ(0, status);
522    Attrs.AddSAttrDat(Id, StrId, StrVal);
523    status = Attrs.DelSAttrDat(Id, StrId);
524    EXPECT_EQ(0, status);
525    status = Attrs.DelSAttrDat(Id, StrId);
526    EXPECT_EQ(-1, status);
527  }
528  TEST(TAttrPair, GetSAttrV) {
529    TAttrPair Attrs;
530    TStr IntAttr("TestInt");
531    TInt IntId;
<span onclick='openModal()' class='match'>532    Attrs.AddSAttr(IntAttr, atInt, IntId);
533    TStr FltAttr("TestFlt");
534    TInt FltId;
535    Attrs.AddSAttr(FltAttr, atFlt, FltId);
536    TStr StrAttr("TestStr");
537    TInt StrId;
538    Attrs.AddSAttr(StrAttr, atStr, StrId);
539    TIntPr Id(0, 1);
540    TInt IntVal(5);
541    Attrs.AddSAttrDat(Id, IntId, IntVal);
542    TFlt FltVal(5.0);
</span>543    Attrs.AddSAttrDat(Id, FltId, FltVal);
544    TStr StrVal("5");
545    Attrs.AddSAttrDat(Id, StrId, StrVal);
546    TAttrPrV AttrV;
547    Attrs.GetSAttrV(Id, atInt, AttrV);
548    EXPECT_EQ(1, AttrV.Len());
549    Attrs.GetSAttrV(Id, atFlt, AttrV);
550    EXPECT_EQ(1, AttrV.Len());
551    Attrs.GetSAttrV(Id, atStr, AttrV);
552    EXPECT_EQ(1, AttrV.Len());
553  }
554  TEST(TAttrPair, GetIdVSAttr) {
555    TAttrPair Attrs;
556    TStr IntAttr("TestInt");
557    TInt IntId;
558    Attrs.AddSAttr(IntAttr, atInt, IntId);
559    TStr FltAttr("TestFlt");
560    TInt FltId;
561    Attrs.AddSAttr(FltAttr, atFlt, FltId);
562    TStr StrAttr("TestStr");
563    TInt StrId;
564    Attrs.AddSAttr(StrAttr, atStr, StrId);
565    TInt IntVal(0);
566    TFlt FltVal(0);
567    TStr StrVal("test");
568    for (int i = 0; i < 10; i++) {
569      TIntPr Id(i, i+1);
570      Attrs.AddSAttrDat(Id, IntId, IntVal);
571      if (i%2 == 0) {
572        Attrs.AddSAttrDat(Id, FltId, FltVal);
573      }
574    }
575    TIntPr Id(0, 1);
576    Attrs.AddSAttrDat(Id, StrId, StrVal);
577    TIntPrV IdV;
578    Attrs.GetIdVSAttr(IntAttr, IdV);
579    EXPECT_EQ(10, IdV.Len());
580    Attrs.GetIdVSAttr(IntId, IdV);
581    EXPECT_EQ(10, IdV.Len());
582    Attrs.GetIdVSAttr(FltAttr, IdV);
583    EXPECT_EQ(5, IdV.Len());
584    Attrs.GetIdVSAttr(FltId, IdV);
585    EXPECT_EQ(5, IdV.Len());
586    Attrs.GetIdVSAttr(StrAttr, IdV);
587    EXPECT_EQ(1, IdV.Len());
588    Attrs.GetIdVSAttr(StrId, IdV);
589    EXPECT_EQ(1, IdV.Len());
590  }
591  TEST(TAttrPair, DelSAttrId) {
592    TAttrPair Attrs;
593    TStr IntAttr("TestInt");
594    TInt IntId;
595    Attrs.AddSAttr(IntAttr, atInt, IntId);
596    TStr FltAttr("TestFlt");
597    TInt FltId;
598    Attrs.AddSAttr(FltAttr, atFlt, FltId);
599    TStr StrAttr("TestStr");
600    TInt StrId;
601    Attrs.AddSAttr(StrAttr, atStr, StrId);
602    TIntPr Id(0, 1);
603    TInt IntVal(5);
604    Attrs.AddSAttrDat(Id, IntId, IntVal);
605    TFlt FltVal(5.0);
606    Attrs.AddSAttrDat(Id, FltId, FltVal);
607    TStr StrVal("5");
608    Attrs.AddSAttrDat(Id, StrId, StrVal);
609  }
</code></pre>
        </div>
        <div class="column">
            <h3>snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-test-TDirNet.cpp</h3>
            <pre><code>1  #include <gtest/gtest.h>
2  #include "Snap.h"
3  TEST(TDirNet, DefaultConstructor) {
4    PDirNet Graph;
5    Graph = TDirNet::New();
6    EXPECT_EQ(0,Graph->GetNodes());
7    EXPECT_EQ(0,Graph->GetEdges());
8    EXPECT_EQ(1,Graph->IsOk());
9    EXPECT_EQ(1,Graph->Empty());
10    EXPECT_EQ(1,Graph->HasFlag(gfDirected));
11  }
12  TEST(TDirNet, ManipulateNodesEdges) {
13    int NNodes = 10000;
14    int NEdges = 100000;
15    const char *FName = "test.graph.dat";
16    PDirNet Graph;
17    PDirNet Graph1;
18    PDirNet Graph2;
19    int i;
20    int n;
21    int NCount;
22    int x,y;
23    int Deg, InDeg, OutDeg;
24    Graph = TDirNet::New();
25    EXPECT_EQ(1,Graph->Empty());
26    for (i = 0; i < NNodes; i++) {
27      Graph->AddNode(i);
28    }
29    EXPECT_EQ(0,Graph->Empty());
30    EXPECT_EQ(NNodes,Graph->GetNodes());
31    NCount = NEdges;
32    while (NCount > 0) {
33      x = (long) (drand48() * NNodes);
34      y = (long) (drand48() * NNodes);
35      if (x != y  &&  !Graph->IsEdge(x,y)) {
36        n = Graph->AddEdge(x, y);
37        NCount--;
38      }
39    }
40    EXPECT_EQ(NEdges,Graph->GetEdges());
41    EXPECT_EQ(0,Graph->Empty());
42    EXPECT_EQ(1,Graph->IsOk());
43    for (i = 0; i < NNodes; i++) {
44      EXPECT_EQ(1,Graph->IsNode(i));
45    }
46    EXPECT_EQ(0,Graph->IsNode(NNodes));
47    EXPECT_EQ(0,Graph->IsNode(NNodes+1));
48    EXPECT_EQ(0,Graph->IsNode(2*NNodes));
49    NCount = 0;
50    for (TDirNet::TNodeI NI = Graph->BegNI(); NI < Graph->EndNI(); NI++) {
51      NCount++;
52    }
53    EXPECT_EQ(NNodes,NCount);
54    NCount = 0;
55    for (TDirNet::TNodeI NI = Graph->BegNI(); NI < Graph->EndNI(); NI++) {
56      for (int e = 0; e < NI.GetOutDeg(); e++) {
57        NCount++;
58      }
59    }
60    EXPECT_EQ(NEdges,NCount);
61    NCount = 0;
62    for (TDirNet::TEdgeI EI = Graph->BegEI(); EI < Graph->EndEI(); EI++) {
63      NCount++;
64    }
65    EXPECT_EQ(NEdges,NCount);
66    for (TDirNet::TNodeI NI = Graph->BegNI(); NI < Graph->EndNI(); NI++) {
67      Deg = NI.GetDeg();
68      InDeg = NI.GetInDeg();
69      OutDeg = NI.GetOutDeg();
70      EXPECT_EQ(Deg,InDeg+OutDeg);
71    }
72    Graph1 = TDirNet::New();
73    *Graph1 = *Graph;
74    EXPECT_EQ(NNodes,Graph1->GetNodes());
75    EXPECT_EQ(NEdges,Graph1->GetEdges());
76    EXPECT_EQ(0,Graph1->Empty());
77    EXPECT_EQ(1,Graph1->IsOk());
78    {
79      TFOut FOut(FName);
80      Graph->Save(FOut);
81      FOut.Flush();
82    }
83    {
84      TFIn FIn(FName);
85      Graph2 = TDirNet::Load(FIn);
86    }
87    EXPECT_EQ(NNodes,Graph2->GetNodes());
88    EXPECT_EQ(NEdges,Graph2->GetEdges());
89    EXPECT_EQ(0,Graph2->Empty());
90    EXPECT_EQ(1,Graph2->IsOk());
91    for (i = 0; i < NNodes; i++) {
92      n = Graph->GetRndNId();
93      Graph->DelNode(n);
94    }
95    EXPECT_EQ(0,Graph->GetNodes());
96    EXPECT_EQ(0,Graph->GetEdges());
97    EXPECT_EQ(1,Graph->IsOk());
98    EXPECT_EQ(1,Graph->Empty());
99    Graph1->Clr();
100    EXPECT_EQ(0,Graph1->GetNodes());
101    EXPECT_EQ(0,Graph1->GetEdges());
102    EXPECT_EQ(1,Graph1->IsOk());
103    EXPECT_EQ(1,Graph1->Empty());
104  }
105  TEST(TDirNet, GetSmallGraph) {
106    PDirNet Graph;
107    Graph = TDirNet::GetSmallGraph();
108    EXPECT_EQ(5,Graph->GetNodes());
109    EXPECT_EQ(6,Graph->GetEdges());
110    EXPECT_EQ(1,Graph->IsOk());
111    EXPECT_EQ(0,Graph->Empty());
112    EXPECT_EQ(1,Graph->HasFlag(gfDirected));
113  }
114  TEST(TDirNet, AddSAttrN) {
115    PDirNet Graph;
116    Graph = TDirNet::New();
117    TInt AttrId;
118    int status = Graph->AddSAttrN("TestInt", atInt, AttrId);
119    EXPECT_EQ(0, status);
120    EXPECT_EQ(0, AttrId.Val);
121    status = Graph->AddSAttrN("TestFlt", atFlt, AttrId);
122    EXPECT_EQ(0, status);
123    EXPECT_EQ(1, AttrId.Val);
124    status = Graph->AddSAttrN("TestStr", atStr, AttrId);
125    EXPECT_EQ(0, status);
126    EXPECT_EQ(2, AttrId.Val);
127  }
128  TEST(TDirNet, GetSAttrIdN) {
129    PDirNet Graph;
130    Graph = TDirNet::New();
131    TInt AttrId;
132    Graph->AddSAttrN("TestInt", atInt, AttrId);
133    Graph->AddSAttrN("TestFlt", atFlt, AttrId);
134    Graph->AddSAttrN("TestStr", atStr, AttrId);
135    TAttrType AttrType;
136    int status = Graph->GetSAttrIdN(TStr("TestInt"), AttrId, AttrType);
137    EXPECT_EQ(0, status);
138    EXPECT_EQ(atInt, AttrType);
139    EXPECT_EQ(0, AttrId.Val);
140    status = Graph->GetSAttrIdN(TStr("TestFlt"), AttrId, AttrType);
141    EXPECT_EQ(0, status);
142    EXPECT_EQ(atFlt, AttrType);
143    EXPECT_EQ(1, AttrId.Val);
144    status = Graph->GetSAttrIdN(TStr("TestStr"), AttrId, AttrType);
145    EXPECT_EQ(0, status);
146    EXPECT_EQ(atStr, AttrType);
147    EXPECT_EQ(2, AttrId.Val);
148    status = Graph->GetSAttrIdN(TStr("TestError"), AttrId, AttrType);
149    EXPECT_EQ(-1, status);
150  }
151  TEST(TDirNet, GetSAttrNameN) {
152    PDirNet Graph;
153    Graph = TDirNet::New();
154    TInt AttrId;
155    Graph->AddSAttrN("TestInt", atInt, AttrId);
156    Graph->AddSAttrN("TestFlt", atFlt, AttrId);
157    Graph->AddSAttrN("TestStr", atStr, AttrId);
158    TAttrType AttrType;
159    TStr Name;
160    int status = Graph->GetSAttrNameN(0, Name, AttrType);
161    EXPECT_EQ(0, status);
162    EXPECT_EQ(atInt, AttrType);
163    EXPECT_STREQ("TestInt", Name.CStr());
164    status = Graph->GetSAttrNameN(1, Name, AttrType);
165    EXPECT_EQ(0, status);
166    EXPECT_EQ(atFlt, AttrType);
167    EXPECT_STREQ("TestFlt", Name.CStr());
168    status = Graph->GetSAttrNameN(2, Name, AttrType);
169    EXPECT_EQ(0, status);
170    EXPECT_EQ(atStr, AttrType);
171    EXPECT_STREQ("TestStr", Name.CStr());
172    status = Graph->GetSAttrNameN(3, Name, AttrType);
173    EXPECT_EQ(-1, status);
174  }
175  TEST(TDirNet, AddSAttrDatN_int) {
176    PDirNet Graph;
177    Graph = TDirNet::New();
178    Graph->AddNode(0);
179    TInt Val(5);
180    TInt Id(0);
181    int status = Graph->AddSAttrDatN(Id, 1, Val);
182    EXPECT_EQ(-1, status);
183    TInt AttrId;
184    TStr AttrName("TestInt");
185    Graph->AddSAttrN(AttrName, atInt, AttrId);
186    TFlt ErrorVal(1);
187    status = Graph->AddSAttrDatN(Id, AttrId, ErrorVal);
188    EXPECT_EQ(-2, status);
189    status = Graph->AddSAttrDatN(Id, AttrId, Val);
190    EXPECT_EQ(0, status);
191    status = Graph->AddSAttrDatN(Id, AttrName, Val);
192    EXPECT_EQ(0, status);
193    TStr NewName("TestInt2");
194    status = Graph->AddSAttrDatN(Id, NewName, Val);
195    EXPECT_EQ(0, status);
196    TInt ErrorId(1);
197    status = Graph->AddSAttrDatN(ErrorId, AttrId, Val);
198    EXPECT_EQ(-1, status);
199  }
200  TEST(TDirNet, AddSAttrDatN_flt) {
201    PDirNet Graph;
202    Graph = TDirNet::New();
203    Graph->AddNode(0);
204    TFlt Val(5.0);
205    TInt Id(0);
206    int status = Graph->AddSAttrDatN(Id, 1, Val);
207    EXPECT_EQ(-1, status);
208    TInt AttrId;
209    TStr AttrName("TestFlt");
210    Graph->AddSAttrN(AttrName, atFlt, AttrId);
211    TInt ErrorVal(1);
212    status = Graph->AddSAttrDatN(Id, AttrId, ErrorVal);
213    EXPECT_EQ(-2, status);
214    status = Graph->AddSAttrDatN(Id, AttrId, Val);
215    EXPECT_EQ(0, status);
216    status = Graph->AddSAttrDatN(Id, AttrName, Val);
217    EXPECT_EQ(0, status);
218    TStr NewName("TestFlt2");
219    status = Graph->AddSAttrDatN(Id, NewName, Val);
220    EXPECT_EQ(0, status);
221    TInt ErrorId(1);
222    status = Graph->AddSAttrDatN(ErrorId, AttrId, Val);
223    EXPECT_EQ(-1, status);
224  }
225  TEST(TDirNet, AddSAttrDatN_str) {
226    PDirNet Graph;
227    Graph = TDirNet::New();
228    Graph->AddNode(0);
229    TStr Val("5");
230    TInt Id(0);
231    int status = Graph->AddSAttrDatN(Id, 1, Val);
232    EXPECT_EQ(-1, status);
233    TInt AttrId;
234    TStr AttrName("TestFlt");
235    Graph->AddSAttrN(AttrName, atStr, AttrId);
236    TInt ErrorVal(1);
237    status = Graph->AddSAttrDatN(Id, AttrId, ErrorVal);
238    EXPECT_EQ(-2, status);
239    status = Graph->AddSAttrDatN(Id, AttrId, Val);
240    EXPECT_EQ(0, status);
241    status = Graph->AddSAttrDatN(Id, AttrName, Val);
242    EXPECT_EQ(0, status);
243    TStr NewName("TestStr2");
244    status = Graph->AddSAttrDatN(Id, NewName, Val);
245    EXPECT_EQ(0, status);
246    TInt ErrorId(1);
247    status = Graph->AddSAttrDatN(ErrorId, AttrId, Val);
248    EXPECT_EQ(-1, status);
249  }
250  TEST(TDirNet, GetSAttrDatN_int) {
251    PDirNet Graph;
252    Graph = TDirNet::New();
253    Graph->AddNode(0);
254    TInt Val;
255    TInt AttrId(0);
256    TStr AttrName("TestInt");
257    TInt NId(0);
258    int status = Graph->GetSAttrDatN(NId, AttrName, Val);
259    EXPECT_EQ(-1, status);
260    status = Graph->GetSAttrDatN(NId, AttrId, Val);
261    EXPECT_EQ(-1, status);
262    Graph->AddSAttrN(AttrName, atInt, AttrId);
263    TInt TestVal(5);
264    Graph->AddSAttrDatN(NId, AttrId, TestVal);
265    status = Graph->GetSAttrDatN(NId, AttrId, Val);
266    EXPECT_EQ(0, status);
267    EXPECT_EQ(TestVal.Val, Val.Val);
268    status = Graph->GetSAttrDatN(NId, AttrName, Val);
269    EXPECT_EQ(0, status);
270    EXPECT_EQ(TestVal.Val, Val.Val);
271    TInt ErrorId(1);
272    status = Graph->GetSAttrDatN(ErrorId, AttrId, Val);
273    EXPECT_EQ(-1, status);
274  }
275  TEST(TDirNet, GetSAttrDatN_flt) {
276    PDirNet Graph;
277    Graph = TDirNet::New();
278    Graph->AddNode(0);
279    TFlt Val;
280    TInt AttrId(0);
281    TStr AttrName("TestInt");
282    TInt NId(0);
283    int status = Graph->GetSAttrDatN(NId, AttrName, Val);
284    EXPECT_EQ(-1, status);
285    status = Graph->GetSAttrDatN(NId, AttrId, Val);
286    EXPECT_EQ(-1, status);
287    Graph->AddSAttrN(AttrName, atFlt, AttrId);
288    TFlt TestVal(5.0);
289    Graph->AddSAttrDatN(NId, AttrId, TestVal);
290    status = Graph->GetSAttrDatN(NId, AttrId, Val);
291    EXPECT_EQ(0, status);
292    EXPECT_EQ(TestVal.Val, Val.Val);
293    status = Graph->GetSAttrDatN(NId, AttrName, Val);
294    EXPECT_EQ(0, status);
295    EXPECT_EQ(TestVal.Val, Val.Val);
296    TInt ErrorId(1);
297    status = Graph->GetSAttrDatN(ErrorId, AttrId, Val);
298    EXPECT_EQ(-1, status);
299  }
300  TEST(TDirNet, GetSAttrDatN_str) {
301    PDirNet Graph;
302    Graph = TDirNet::New();
303    Graph->AddNode(0);
304    TStr Val;
305    TInt AttrId(0);
306    TStr AttrName("TestInt");
307    TInt NId(0);
308    int status = Graph->GetSAttrDatN(NId, AttrName, Val);
309    EXPECT_EQ(-1, status);
310    status = Graph->GetSAttrDatN(NId, AttrId, Val);
311    EXPECT_EQ(-1, status);
312    Graph->AddSAttrN(AttrName, atStr, AttrId);
313    TStr TestVal("5");
314    Graph->AddSAttrDatN(NId, AttrId, TestVal);
315    status = Graph->GetSAttrDatN(NId, AttrId, Val);
316    EXPECT_EQ(0, status);
317    EXPECT_STREQ(TestVal.CStr(), Val.CStr());
318    status = Graph->GetSAttrDatN(NId, AttrName, Val);
319    EXPECT_EQ(0, status);
320    EXPECT_STREQ(TestVal.CStr(), Val.CStr());
321    TInt ErrorId(1);
322    status = Graph->GetSAttrDatN(ErrorId, AttrId, Val);
323    EXPECT_EQ(-1, status);
324  }
325  TEST(TDirNet, DelSAttrDatN) {
326    PDirNet Graph;
327    Graph = TDirNet::New();
328    Graph->AddNode(0);
329    TStr IntAttr("TestInt");
330    TInt IntId;
331    Graph->AddSAttrN(IntAttr, atInt, IntId);
332    TStr FltAttr("TestFlt");
333    TInt FltId;
334    Graph->AddSAttrN(FltAttr, atFlt, FltId);
335    TStr StrAttr("TestStr");
336    TInt StrId;
337    Graph->AddSAttrN(StrAttr, atStr, StrId);
338    TInt Id(0);
339    int status = Graph->DelSAttrDatN(Id, IntAttr);
340    EXPECT_EQ(-1, status);
341    status = Graph->DelSAttrDatN(Id, IntId);
342    EXPECT_EQ(-1, status);
343    TInt IntVal(5);
344    Graph->AddSAttrDatN(Id, IntId, IntVal);
345    status = Graph->DelSAttrDatN(Id, IntAttr);
346    EXPECT_EQ(0, status);
347    Graph->AddSAttrDatN(Id, IntId, IntVal);
348    status = Graph->DelSAttrDatN(Id, IntId);
349    EXPECT_EQ(0, status);
350    status = Graph->DelSAttrDatN(Id, IntId);
351    EXPECT_EQ(-1, status);
352    TInt ErrorId(1);
353    status = Graph->DelSAttrDatN(ErrorId, IntId);
354    EXPECT_EQ(-1, status);
355    TFlt FltVal(5.0);
356    Graph->AddSAttrDatN(Id, FltId, FltVal);
357    status = Graph->DelSAttrDatN(Id, FltAttr);
358    EXPECT_EQ(0, status);
359    Graph->AddSAttrDatN(Id, FltId, FltVal);
360    status = Graph->DelSAttrDatN(Id, FltId);
361    EXPECT_EQ(0, status);
362    status = Graph->DelSAttrDatN(Id, FltId);
363    EXPECT_EQ(-1, status);
364    status = Graph->DelSAttrDatN(ErrorId, FltId);
365    EXPECT_EQ(-1, status);
366    TStr StrVal("5");
367    Graph->AddSAttrDatN(Id, StrId, StrVal);
368    status = Graph->DelSAttrDatN(Id, StrAttr);
369    EXPECT_EQ(0, status);
370    Graph->AddSAttrDatN(Id, StrId, StrVal);
371    status = Graph->DelSAttrDatN(Id, StrId);
372    EXPECT_EQ(0, status);
373    status = Graph->DelSAttrDatN(Id, StrId);
374    EXPECT_EQ(-1, status);
375    status = Graph->DelSAttrDatN(ErrorId, StrId);
376    EXPECT_EQ(-1, status);
377  }
378  TEST(TDirNet, GetSAttrVN) {
379    PDirNet Graph;
380    Graph = TDirNet::New();
381    Graph->AddNode(0);
382    TStr IntAttr("TestInt");
383    TInt IntId;
384    Graph->AddSAttrN(IntAttr, atInt, IntId);
385    TStr FltAttr("TestFlt");
386    TInt FltId;
387    Graph->AddSAttrN(FltAttr, atFlt, FltId);
388    TStr StrAttr("TestStr");
389    TInt StrId;
390    Graph->AddSAttrN(StrAttr, atStr, StrId);
391    TInt Id(0);
392    TInt IntVal(5);
393    Graph->AddSAttrDatN(Id, IntId, IntVal);
394    TFlt FltVal(5.0);
395    Graph->AddSAttrDatN(Id, FltId, FltVal);
396    TStr StrVal("5");
397    Graph->AddSAttrDatN(Id, StrId, StrVal);
398    TAttrPrV AttrV;
399    int status = Graph->GetSAttrVN(Id, atInt, AttrV);
400    EXPECT_EQ(0, status);
401    EXPECT_EQ(1, AttrV.Len());
402    status = Graph->GetSAttrVN(Id, atFlt, AttrV);
403    EXPECT_EQ(0, status);
404    EXPECT_EQ(1, AttrV.Len());
405    status = Graph->GetSAttrVN(Id, atStr, AttrV);
406    EXPECT_EQ(0, status);
407    EXPECT_EQ(1, AttrV.Len());
408  }
409  TEST(TDirNet, GetIdVSAttrN) {
410    PDirNet Graph;
411    Graph = TDirNet::New();
412    TStr IntAttr("TestInt");
413    TInt IntId;
414    Graph->AddSAttrN(IntAttr, atInt, IntId);
415    TStr FltAttr("TestFlt");
416    TInt FltId;
417    Graph->AddSAttrN(FltAttr, atFlt, FltId);
418    TStr StrAttr("TestStr");
419    TInt StrId;
420    Graph->AddSAttrN(StrAttr, atStr, StrId);
421    TInt IntVal(0);
422    TFlt FltVal(0);
423    TStr StrVal("test");
424    for (int i = 0; i < 10; i++) {
425      Graph->AddNode(i);
426      TInt Id(i);
427      Graph->AddSAttrDatN(Id, IntId, IntVal);
428      if (i%2 == 0) {
429        Graph->AddSAttrDatN(Id, FltId, FltVal);
430      }
431    }
432    Graph->AddSAttrDatN(0, StrId, StrVal);
433    TIntV IdV;
434    Graph->GetIdVSAttrN(IntAttr, IdV);
435    EXPECT_EQ(10, IdV.Len());
436    Graph->GetIdVSAttrN(IntId, IdV);
437    EXPECT_EQ(10, IdV.Len());
438    Graph->GetIdVSAttrN(FltAttr, IdV);
439    EXPECT_EQ(5, IdV.Len());
440    Graph->GetIdVSAttrN(FltId, IdV);
441    EXPECT_EQ(5, IdV.Len());
442    Graph->GetIdVSAttrN(StrAttr, IdV);
443    EXPECT_EQ(1, IdV.Len());
444    Graph->GetIdVSAttrN(StrId, IdV);
445    EXPECT_EQ(1, IdV.Len());
446  }
447  TEST(TDirNet, AddSAttrE) {
448    PDirNet Graph;
449    Graph = TDirNet::New();
450    TInt AttrId;
451    int status = Graph->AddSAttrE("TestInt", atInt, AttrId);
452    EXPECT_EQ(0, status);
453    EXPECT_EQ(0, AttrId.Val);
454    status = Graph->AddSAttrE("TestFlt", atFlt, AttrId);
455    EXPECT_EQ(0, status);
456    EXPECT_EQ(1, AttrId.Val);
457    status = Graph->AddSAttrE("TestStr", atStr, AttrId);
458    EXPECT_EQ(0, status);
459    EXPECT_EQ(2, AttrId.Val);
460  }
461  TEST(TDirNet, GetSAttrIdE) {
462    PDirNet Graph;
463    Graph = TDirNet::New();
464    TInt AttrId;
465    Graph->AddSAttrE("TestInt", atInt, AttrId);
466    Graph->AddSAttrE("TestFlt", atFlt, AttrId);
467    Graph->AddSAttrE("TestStr", atStr, AttrId);
468    TAttrType AttrType;
469    int status = Graph->GetSAttrIdE(TStr("TestInt"), AttrId, AttrType);
470    EXPECT_EQ(0, status);
471    EXPECT_EQ(atInt, AttrType);
472    EXPECT_EQ(0, AttrId.Val);
473    status = Graph->GetSAttrIdE(TStr("TestFlt"), AttrId, AttrType);
474    EXPECT_EQ(0, status);
475    EXPECT_EQ(atFlt, AttrType);
476    EXPECT_EQ(1, AttrId.Val);
477    status = Graph->GetSAttrIdE(TStr("TestStr"), AttrId, AttrType);
478    EXPECT_EQ(0, status);
479    EXPECT_EQ(atStr, AttrType);
480    EXPECT_EQ(2, AttrId.Val);
481    status = Graph->GetSAttrIdE(TStr("TestError"), AttrId, AttrType);
482    EXPECT_EQ(-1, status);
483  }
484  TEST(TDirNet, GetSAttrNameE) {
485    PDirNet Graph;
486    Graph = TDirNet::New();
487    TInt AttrId;
488    Graph->AddSAttrE("TestInt", atInt, AttrId);
489    Graph->AddSAttrE("TestFlt", atFlt, AttrId);
490    Graph->AddSAttrE("TestStr", atStr, AttrId);
491    TAttrType AttrType;
492    TStr Name;
493    int status = Graph->GetSAttrNameE(0, Name, AttrType);
494    EXPECT_EQ(0, status);
495    EXPECT_EQ(atInt, AttrType);
496    EXPECT_STREQ("TestInt", Name.CStr());
497    status = Graph->GetSAttrNameE(1, Name, AttrType);
498    EXPECT_EQ(0, status);
499    EXPECT_EQ(atFlt, AttrType);
500    EXPECT_STREQ("TestFlt", Name.CStr());
501    status = Graph->GetSAttrNameE(2, Name, AttrType);
502    EXPECT_EQ(0, status);
503    EXPECT_EQ(atStr, AttrType);
504    EXPECT_STREQ("TestStr", Name.CStr());
505    status = Graph->GetSAttrNameE(3, Name, AttrType);
506    EXPECT_EQ(-1, status);
507  }
508  TEST(TDirNet, AddSAttrDatE_int) {
509    PDirNet Graph;
510    Graph = TDirNet::New();
511    Graph->AddNode(0);
512    Graph->AddNode(1);
513    Graph->AddEdge(0, 1);
514    TInt Val(5);
515    int SrcId = 0;
516    int DstId = 1;
517    int status = Graph->AddSAttrDatE(SrcId, DstId, 1, Val);
518    EXPECT_EQ(-1, status);
519    TInt AttrId;
520    TStr AttrName("TestInt");
521    Graph->AddSAttrE(AttrName, atInt, AttrId);
522    TFlt ErrorVal(1);
523    status = Graph->AddSAttrDatE(SrcId, DstId, AttrId, ErrorVal);
524    EXPECT_EQ(-2, status);
525    status = Graph->AddSAttrDatE(SrcId, DstId, AttrId, Val);
526    EXPECT_EQ(0, status);
527    status = Graph->AddSAttrDatE(SrcId, DstId, AttrName, Val);
528    EXPECT_EQ(0, status);
529    TStr NewName("TestInt2");
530    status = Graph->AddSAttrDatE(SrcId, DstId, NewName, Val);
531    EXPECT_EQ(0, status);
532    int ErrorId = 5;
533    status = Graph->AddSAttrDatE(SrcId, ErrorId, AttrId, Val);
534    EXPECT_EQ(-1, status);
535  }
536  TEST(TDirNet, AddSAttrDatE_flt) {
537    PDirNet Graph;
538    Graph = TDirNet::New();
539    Graph->AddNode(0);
540    Graph->AddNode(1);
541    Graph->AddEdge(0, 1);
542    TFlt Val(5.0);
543    int SrcId = 0;
544    int DstId = 1;
545    int status = Graph->AddSAttrDatE(SrcId, DstId, 1, Val);
546    EXPECT_EQ(-1, status);
547    TInt AttrId;
548    TStr AttrName("TestFlt");
549    Graph->AddSAttrE(AttrName, atFlt, AttrId);
550    TInt ErrorVal(1);
551    status = Graph->AddSAttrDatE(SrcId, DstId, AttrId, ErrorVal);
552    EXPECT_EQ(-2, status);
553    status = Graph->AddSAttrDatE(SrcId, DstId, AttrId, Val);
554    EXPECT_EQ(0, status);
555    status = Graph->AddSAttrDatE(SrcId, DstId, AttrName, Val);
556    EXPECT_EQ(0, status);
557    TStr NewName("TestFlt2");
558    status = Graph->AddSAttrDatE(SrcId, DstId, NewName, Val);
559    EXPECT_EQ(0, status);
560    int ErrorId = 5;
561    status = Graph->AddSAttrDatE(SrcId, ErrorId, AttrId, Val);
562    EXPECT_EQ(-1, status);
563  }
564  TEST(TDirNet, AddSAttrDatE_str) {
565    PDirNet Graph;
566    Graph = TDirNet::New();
567    Graph->AddNode(0);
568    Graph->AddNode(1);
569    Graph->AddEdge(0, 1);
570    TStr Val("5");
571    int SrcId = 0;
572    int DstId = 1;
573    int status = Graph->AddSAttrDatE(SrcId, DstId, 1, Val);
574    EXPECT_EQ(-1, status);
575    TInt AttrId;
576    TStr AttrName("TestFlt");
577    Graph->AddSAttrE(AttrName, atStr, AttrId);
578    TInt ErrorVal(1);
579    status = Graph->AddSAttrDatE(SrcId, DstId, AttrId, ErrorVal);
580    EXPECT_EQ(-2, status);
581    status = Graph->AddSAttrDatE(SrcId, DstId, AttrId, Val);
582    EXPECT_EQ(0, status);
583    status = Graph->AddSAttrDatE(SrcId, DstId, AttrName, Val);
584    EXPECT_EQ(0, status);
585    TStr NewName("TestStr2");
586    status = Graph->AddSAttrDatE(SrcId, DstId, NewName, Val);
587    EXPECT_EQ(0, status);
588    int ErrorId = 5;
589    status = Graph->AddSAttrDatE(SrcId, ErrorId, AttrId, Val);
590    EXPECT_EQ(-1, status);
591  }
592  TEST(TDirNet, GetSAttrDatE_int) {
593    PDirNet Graph;
594    Graph = TDirNet::New();
595    Graph->AddNode(0);
596    Graph->AddNode(1);
597    Graph->AddEdge(0, 1);
598    TInt Val;
599    TInt AttrId(0);
600    TStr AttrName("TestInt");
601    int SrcId = 0;
602    int DstId = 1;
603    int status = Graph->GetSAttrDatE(SrcId, DstId, AttrName, Val);
604    EXPECT_EQ(-1, status);
605    status = Graph->GetSAttrDatE(SrcId, DstId, AttrId, Val);
606    EXPECT_EQ(-1, status);
607    Graph->AddSAttrE(AttrName, atInt, AttrId);
608    TInt TestVal(5);
609    Graph->AddSAttrDatE(SrcId, DstId, AttrId, TestVal);
610    status = Graph->GetSAttrDatE(SrcId, DstId, AttrId, Val);
611    EXPECT_EQ(0, status);
612    EXPECT_EQ(TestVal.Val, Val.Val);
613    status = Graph->GetSAttrDatE(SrcId, DstId, AttrName, Val);
614    EXPECT_EQ(0, status);
615    EXPECT_EQ(TestVal.Val, Val.Val);
616    int ErrorId = 5;
617    status = Graph->GetSAttrDatE(SrcId, ErrorId, AttrId, Val);
618    EXPECT_EQ(-1, status);
619  }
620  TEST(TDirNet, GetSAttrDatE_flt) {
621    PDirNet Graph;
622    Graph = TDirNet::New();
623    Graph->AddNode(0);
624    Graph->AddNode(1);
625    Graph->AddEdge(0, 1);
626    TFlt Val;
627    TInt AttrId(0);
628    TStr AttrName("TestInt");
629    int SrcId = 0;
630    int DstId = 1;
631    int status = Graph->GetSAttrDatE(SrcId, DstId, AttrName, Val);
632    EXPECT_EQ(-1, status);
633    status = Graph->GetSAttrDatE(SrcId, DstId, AttrId, Val);
634    EXPECT_EQ(-1, status);
635    Graph->AddSAttrE(AttrName, atFlt, AttrId);
636    TFlt TestVal(5.0);
637    Graph->AddSAttrDatE(SrcId, DstId, AttrId, TestVal);
638    status = Graph->GetSAttrDatE(SrcId, DstId, AttrId, Val);
639    EXPECT_EQ(0, status);
640    EXPECT_EQ(TestVal.Val, Val.Val);
641    status = Graph->GetSAttrDatE(SrcId, DstId, AttrName, Val);
642    EXPECT_EQ(0, status);
643    EXPECT_EQ(TestVal.Val, Val.Val);
644    int ErrorId = 5;
645    status = Graph->GetSAttrDatE(SrcId, ErrorId, AttrId, Val);
646    EXPECT_EQ(-1, status);
647  }
648  TEST(TDirNet, GetSAttrDatE_str) {
649    PDirNet Graph;
650    Graph = TDirNet::New();
651    Graph->AddNode(0);
652    Graph->AddNode(1);
653    Graph->AddEdge(0, 1);
654    TStr Val;
655    TInt AttrId(0);
656    TStr AttrName("TestInt");
657    int SrcId = 0;
658    int DstId = 1;
659    int status = Graph->GetSAttrDatE(SrcId, DstId, AttrName, Val);
660    EXPECT_EQ(-1, status);
661    status = Graph->GetSAttrDatE(SrcId, DstId, AttrId, Val);
662    EXPECT_EQ(-1, status);
663    Graph->AddSAttrE(AttrName, atStr, AttrId);
664    TStr TestVal("5");
665    Graph->AddSAttrDatE(SrcId, DstId, AttrId, TestVal);
666    status = Graph->GetSAttrDatE(SrcId, DstId, AttrId, Val);
667    EXPECT_EQ(0, status);
668    EXPECT_STREQ(TestVal.CStr(), Val.CStr());
669    status = Graph->GetSAttrDatE(SrcId, DstId, AttrName, Val);
670    EXPECT_EQ(0, status);
671    EXPECT_STREQ(TestVal.CStr(), Val.CStr());
672    int ErrorId = 5;
673    status = Graph->GetSAttrDatE(SrcId, ErrorId, AttrId, Val);
674    EXPECT_EQ(-1, status);
675  }
676  TEST(TDirNet, DelSAttrDatE) {
677    PDirNet Graph;
678    Graph = TDirNet::New();
679    Graph->AddNode(0);
680    Graph->AddNode(1);
681    Graph->AddEdge(0, 1);
682    TStr IntAttr("TestInt");
683    TInt IntId;
684    Graph->AddSAttrE(IntAttr, atInt, IntId);
685    TStr FltAttr("TestFlt");
686    TInt FltId;
687    Graph->AddSAttrE(FltAttr, atFlt, FltId);
688    TStr StrAttr("TestStr");
689    TInt StrId;
690    Graph->AddSAttrE(StrAttr, atStr, StrId);
691    int SrcId = 0;
692    int DstId = 1;
693    int status = Graph->DelSAttrDatE(SrcId, DstId, IntAttr);
694    EXPECT_EQ(-1, status);
695    status = Graph->DelSAttrDatE(SrcId, DstId, IntId);
696    EXPECT_EQ(-1, status);
697    TInt IntVal(5);
698    Graph->AddSAttrDatE(SrcId, DstId, IntId, IntVal);
699    status = Graph->DelSAttrDatE(SrcId, DstId, IntAttr);
700    EXPECT_EQ(0, status);
701    Graph->AddSAttrDatE(SrcId, DstId, IntId, IntVal);
702    status = Graph->DelSAttrDatE(SrcId, DstId, IntId);
703    EXPECT_EQ(0, status);
704    status = Graph->DelSAttrDatE(SrcId, DstId, IntId);
705    EXPECT_EQ(-1, status);
706    int ErrorId = 5;
707    status = Graph->DelSAttrDatE(SrcId, ErrorId, IntId);
708    EXPECT_EQ(-1, status);
709    TFlt FltVal(5.0);
710    Graph->AddSAttrDatE(SrcId, DstId, FltId, FltVal);
711    status = Graph->DelSAttrDatE(SrcId, DstId, FltAttr);
712    EXPECT_EQ(0, status);
713    Graph->AddSAttrDatE(SrcId, DstId, FltId, FltVal);
714    status = Graph->DelSAttrDatE(SrcId, DstId, FltId);
715    EXPECT_EQ(0, status);
716    status = Graph->DelSAttrDatE(SrcId, DstId, FltId);
717    EXPECT_EQ(-1, status);
718    status = Graph->DelSAttrDatE(SrcId, ErrorId, FltId);
719    EXPECT_EQ(-1, status);
720    TStr StrVal("5");
721    Graph->AddSAttrDatE(SrcId, DstId, StrId, StrVal);
722    status = Graph->DelSAttrDatE(SrcId, DstId, StrAttr);
723    EXPECT_EQ(0, status);
724    Graph->AddSAttrDatE(SrcId, DstId, StrId, StrVal);
725    status = Graph->DelSAttrDatE(SrcId, DstId, StrId);
726    EXPECT_EQ(0, status);
727    status = Graph->DelSAttrDatE(SrcId, DstId, StrId);
728    EXPECT_EQ(-1, status);
729    status = Graph->DelSAttrDatE(SrcId, ErrorId, StrId);
730    EXPECT_EQ(-1, status);
731  }
732  TEST(TDirNet, GetSAttrVE) {
733    PDirNet Graph;
734    Graph = TDirNet::New();
735    Graph->AddNode(0);
736    Graph->AddNode(1);
<span onclick='openModal()' class='match'>737    Graph->AddEdge(0, 1);
738    TStr IntAttr("TestInt");
739    TInt IntId;
740    Graph->AddSAttrE(IntAttr, atInt, IntId);
741    TStr FltAttr("TestFlt");
742    TInt FltId;
743    Graph->AddSAttrE(FltAttr, atFlt, FltId);
744    TStr StrAttr("TestStr");
745    TInt StrId;
746    Graph->AddSAttrE(StrAttr, atStr, StrId);
747    int SrcId = 0;
</span>748    int DstId = 1;
749    TInt IntVal(5);
750    Graph->AddSAttrDatE(SrcId, DstId, IntId, IntVal);
751    TFlt FltVal(5.0);
752    Graph->AddSAttrDatE(SrcId, DstId, FltId, FltVal);
753    TStr StrVal("5");
754    Graph->AddSAttrDatE(SrcId, DstId, StrId, StrVal);
755    TAttrPrV AttrV;
756    int status = Graph->GetSAttrVE(SrcId, DstId, atInt, AttrV);
757    EXPECT_EQ(0, status);
758    EXPECT_EQ(1, AttrV.Len());
759    status = Graph->GetSAttrVE(SrcId, DstId, atFlt, AttrV);
760    EXPECT_EQ(0, status);
761    EXPECT_EQ(1, AttrV.Len());
762    status = Graph->GetSAttrVE(SrcId, DstId, atStr, AttrV);
763    EXPECT_EQ(0, status);
764    EXPECT_EQ(1, AttrV.Len());
765  }
766  TEST(TDirNet, GetIdVSAttrE) {
767    PDirNet Graph;
768    Graph = TDirNet::New();
769    TStr IntAttr("TestInt");
770    TInt IntId;
771    Graph->AddSAttrE(IntAttr, atInt, IntId);
772    TStr FltAttr("TestFlt");
773    TInt FltId;
774    Graph->AddSAttrE(FltAttr, atFlt, FltId);
775    TStr StrAttr("TestStr");
776    TInt StrId;
777    Graph->AddSAttrE(StrAttr, atStr, StrId);
778    TInt IntVal(0);
779    TFlt FltVal(0);
780    TStr StrVal("test");
781    Graph->AddNode(0);
782    for (int i = 0; i < 10; i++) {
783      Graph->AddNode(i+1);
784      Graph->AddEdge(i, i+1);
785      Graph->AddSAttrDatE(i, i+1, IntId, IntVal);
786      if (i%2 == 0) {
787        Graph->AddSAttrDatE(i, i+1, FltId, FltVal);
788      }
789    }
790    Graph->AddSAttrDatE(0, 1, StrId, StrVal);
791    TIntPrV IdV;
792    Graph->GetIdVSAttrE(IntAttr, IdV);
793    EXPECT_EQ(10, IdV.Len());
794    Graph->GetIdVSAttrE(IntId, IdV);
795    EXPECT_EQ(10, IdV.Len());
796    Graph->GetIdVSAttrE(FltAttr, IdV);
797    EXPECT_EQ(5, IdV.Len());
798    Graph->GetIdVSAttrE(FltId, IdV);
799    EXPECT_EQ(5, IdV.Len());
800    Graph->GetIdVSAttrE(StrAttr, IdV);
801    EXPECT_EQ(1, IdV.Len());
802    Graph->GetIdVSAttrE(StrId, IdV);
803    EXPECT_EQ(1, IdV.Len());
804  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-test-TAttr.cpp</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-test-TDirNet.cpp</div>
                </div>
                <div class="column column_space"><pre><code>532    Attrs.AddSAttr(IntAttr, atInt, IntId);
533    TStr FltAttr("TestFlt");
534    TInt FltId;
535    Attrs.AddSAttr(FltAttr, atFlt, FltId);
536    TStr StrAttr("TestStr");
537    TInt StrId;
538    Attrs.AddSAttr(StrAttr, atStr, StrId);
539    TIntPr Id(0, 1);
540    TInt IntVal(5);
541    Attrs.AddSAttrDat(Id, IntId, IntVal);
542    TFlt FltVal(5.0);
</pre></code></div>
                <div class="column column_space"><pre><code>737    Graph->AddEdge(0, 1);
738    TStr IntAttr("TestInt");
739    TInt IntId;
740    Graph->AddSAttrE(IntAttr, atInt, IntId);
741    TStr FltAttr("TestFlt");
742    TInt FltId;
743    Graph->AddSAttrE(FltAttr, atFlt, FltId);
744    TStr StrAttr("TestStr");
745    TInt StrId;
746    Graph->AddSAttrE(StrAttr, atStr, StrId);
747    int SrcId = 0;
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    