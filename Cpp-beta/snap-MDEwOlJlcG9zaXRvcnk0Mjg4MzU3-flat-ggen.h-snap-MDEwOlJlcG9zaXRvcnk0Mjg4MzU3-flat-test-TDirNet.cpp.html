
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 2.629757785467128%, Tokens: 9, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-ggen.h</h3>
            <pre><code>1  namespace TSnap {
2  template <class PGraph> PGraph GenGrid(const int& Rows, const int& Cols, const bool& IsDir=true);
3  template <class PGraph> PGraph GenStar(const int& Nodes, const bool& IsDir=true);
4  template <class PGraph> PGraph GenCircle(const int& Nodes, const int& NodeOutDeg=1, const bool& IsDir=true);
5  template <class PGraph> PGraph GenFull(const int& Nodes);
6  template <class PGraph> PGraph GenTree(const int& Fanout, const int& Levels, const bool& IsDir=true, const bool& ChildPointsToParent=true);
7  template <class PGraph> PGraph GenBaraHierar(const int& Levels, const bool& IsDir=true);
8  template <class PGraph> PGraph GenRndGnm(const int& Nodes, const int& Edges, const bool& IsDir=true, TRnd& Rnd=TInt::Rnd);
9  PBPGraph GenRndBipart(const int& LeftNodes, const int& RightNodes, const int& Edges, TRnd& Rnd=TInt::Rnd);
10  PUNGraph GenRndDegK(const int& Nodes, const int& NodeDeg, const int& NSwitch=100, TRnd& Rnd=TInt::Rnd);
11  PUNGraph GenRndPowerLaw(const int& Nodes, const double& PowerExp, const bool& ConfModel=true, TRnd& Rnd=TInt::Rnd);
12  PUNGraph GenDegSeq(const TIntV& DegSeqV, TRnd& Rnd=TInt::Rnd);
13  PUNGraph GenPrefAttach(const int& Nodes, const int& NodeOutDeg, TRnd& Rnd=TInt::Rnd);
14  PUNGraph GenGeoPrefAttach(const int& Nodes, const int& OutDeg, const double& Beta, TRnd& Rnd=TInt::Rnd);
15  PUNGraph GenSmallWorld(const int& Nodes, const int& NodeOutDeg, const double& RewireProb, TRnd& Rnd=TInt::Rnd);
16  PUNGraph GenConfModel(const TIntV& DegSeqV, TRnd& Rnd=TInt::Rnd);
17  PNGraph GenForestFire(const int& Nodes, const double& FwdProb, const double& BckProb);
18  PNGraph GenCopyModel(const int& Nodes, const double& Beta, TRnd& Rnd=TInt::Rnd);
19  PNGraph GenRMat(const int& Nodes, const int& Edges, const double& A, const double& B, const double& C, TRnd& Rnd=TInt::Rnd);
20  PNGraph GenRMatEpinions();
21  PUNGraph GenRewire(const PUNGraph& Graph, const int& NSwitch=100, TRnd& Rnd=TInt::Rnd);
22  PNGraph  GenRewire(const PNGraph& Graph, const int& NSwitch=100, TRnd& Rnd=TInt::Rnd);
23  PBPGraph GenRewire(const PBPGraph& Graph, const int& NSwitch=100, TRnd& Rnd=TInt::Rnd);
24  PUNGraph GenConfModel(const PUNGraph& G);
25  template <class PGraph>
26  PGraph GenGrid(const int& Rows, const int& Cols, const bool& IsDir) {
27    PGraph GraphPt = PGraph::New();
28    typename PGraph::TObj& Graph = *GraphPt;
29    Graph.Reserve(Rows*Cols, 4*Rows*Cols);
30    int node, r, c;
31    for (node = 0; node < Rows * Cols; node++) {
32      Graph.AddNode(node); }
33    for (r = 0; r < Rows; r++) {
34      for (c = 0; c < Cols; c++) {
35        const int nodeId = Cols*r + c;
36        if (r < Rows-1) { 
37          Graph.AddEdge(nodeId, nodeId+Cols); 
38          if (Graph.HasFlag(gfDirected) && ! IsDir) { 
39            Graph.AddEdge(nodeId+Cols, nodeId); }
40        }
41        if (c < Cols-1) { 
42          Graph.AddEdge(nodeId, nodeId+1); 
43          if (Graph.HasFlag(gfDirected) && ! IsDir) { 
44            Graph.AddEdge(nodeId+1, nodeId); }
45        }
46      }
47    }
48    return GraphPt;
49  }
50  template <class PGraph>
51  PGraph GenStar(const int& Nodes, const bool& IsDir) {
52    PGraph Graph = PGraph::TObj::New();
53    Graph->Reserve(Nodes, Nodes);
54    Graph->AddNode(0);
55    for (int n = 1; n < Nodes; n++) {
56      Graph->AddNode(n);
57      Graph->AddEdge(0, n);
58      if (Graph->HasFlag(gfDirected) && ! IsDir) { Graph->AddEdge(n, 0); }
59    }
60    return Graph;
61  }
62  template <class PGraph>
63  PGraph GenCircle(const int& Nodes, const int& NodeOutDeg, const bool& IsDir) {
64    PGraph Graph = PGraph::TObj::New();
65    Graph->Reserve(Nodes, Nodes*NodeOutDeg);
66    for (int n = 0; n < Nodes; n++) {
67      Graph->AddNode(n); }
68    for (int n = 0; n < Nodes; n++) {
69      for (int x = 0; x < NodeOutDeg; x++) {
70        Graph->AddEdge(n, (n+x+1) % Nodes);
71        if (Graph->HasFlag(gfDirected) && ! IsDir) { Graph->AddEdge((n+x+1) % Nodes, n); }
72      }
73    }
74    return Graph;
75  }
76  template <class PGraph>
77  PGraph GenFull(const int& Nodes) {
78    PGraph Graph = PGraph::TObj::New();
79    Graph->Reserve(Nodes, Nodes*Nodes);
80    for (int n = 0; n < Nodes; n++) {
81      Graph->AddNode(n); }
82    for (int n1 = 0; n1 < Nodes; n1++) {
83      for (int n2 = 0; n2 < Nodes; n2++) {
84        if (n1 != n2) { Graph->AddEdge(n1, n2); }
85      }
86    }
87    return Graph;
88  }
89  template <class PGraph>
90  PGraph GenTree(const int& Fanout, const int& Levels, const bool& IsDir, const bool& ChildPointsToParent) {
91    const int Nodes = (int) (pow(double(Fanout), double(Levels+1)) - 1) / (Fanout - 1);
92    const int Edges = Nodes - 1;
93    PGraph GraphPt = PGraph::New();
94    typename PGraph::TObj& Graph = *GraphPt;
95    Graph.Reserve(Nodes, Edges);
96    int node;
97    for (node = 0; node < Nodes; node++) {
98      Graph.AddNode(node); }
99    for (node = 0; node < (int) Nodes - (int) pow(double(Fanout), double(Levels)); node++) {
100      for (int edge = 1; edge <= Fanout; edge++) {
101        if (IsDir) {
102          if (ChildPointsToParent) { Graph.AddEdge(Fanout*node+edge, node); }
103          else { Graph.AddEdge(node, Fanout*node+edge); }
104        } else {
105          Graph.AddEdge(node, Fanout*node+edge); 
106          Graph.AddEdge(Fanout*node+edge, node);
107        }
108      }
109    }
110    return GraphPt;
111  }
112  template <class PGraph>
113  PGraph GenBaraHierar(const int& Levels, const bool& IsDir) {
114    const int Nodes = (int) TMath::Round(TMath::Power(5, Levels));
115    PGraph GraphPt = PGraph::New();
116    typename PGraph::TObj& Graph = *GraphPt;
117    Graph.Reserve(Nodes, -1);
118    for (int i = 0; i < 5; i++) { Graph.AddNode(i); }
119    Graph.AddEdge(1,2);  Graph.AddEdge(2,3);
120    Graph.AddEdge(3,4);  Graph.AddEdge(4,1);
121    Graph.AddEdge(1,0);  Graph.AddEdge(3,0);
122    Graph.AddEdge(2,0);  Graph.AddEdge(4,0);
123    const int CenterId = 0;
124    for (int lev = 1; lev < Levels+1; lev++) {
125      const int MxNId = Graph.GetNodes();
126      for (int d = 0; d < 4; d++) {
127        for (int n = 0; n < MxNId; n++) { Graph.AddNode(); }
128        for (int n = 0; n < MxNId; n++) {
129          typename PGraph::TObj::TNodeI NI = Graph.GetNI(n);
130          const int SrcId = n+MxNId*(d+1);
131          for (int e = 0; e < NI.GetOutDeg(); e++) {
132            Graph.AddEdge(SrcId, NI.GetOutNId(e)+MxNId*(d+1));
133          }
134        }
135      }
136      for (int n = MxNId; n < Graph.GetNodes(); n++) {
137        const int SrcId = n;
138        int Pow = 1;  bool Skip = false;
139        for (int p = 1; p <= lev; p++) {
140          if (SrcId % (5*Pow) < Pow) { Skip=true; break; }
141          Pow *= 5;
142        }
143        if (Skip) { continue; }
144        Graph.AddEdge(SrcId, CenterId);
145      }
146    }
147    return GraphPt;
148  }
149  template <class PGraph>
<span onclick='openModal()' class='match'>150  PGraph GenRndGnm(const int& Nodes, const int& Edges, const bool& IsDir, TRnd& Rnd) {
151    PGraph GraphPt = PGraph::New();
152    typename PGraph::TObj& Graph = *GraphPt;
153    Graph.Reserve(Nodes, Edges);
</span>154    IAssertR((1.0 * (Nodes-1) / 2 * (IsDir ? 2 : 1)) >= (1.0 * Edges / Nodes), TStr::Fmt("Not enough nodes (%d), for edges (%d).", Nodes, Edges));
155    for (int node = 0; node < Nodes; node++) {
156      IAssert(Graph.AddNode(node) == node);
157    }
158    for (int edge = 0; edge < Edges; ) {
159      const int SrcNId = Rnd.GetUniDevInt(Nodes);
160      const int DstNId = Rnd.GetUniDevInt(Nodes);
161      if (SrcNId != DstNId && Graph.AddEdge(SrcNId, DstNId) != -2) { 
162        if (! IsDir) { Graph.AddEdge(DstNId, SrcNId); }
163        edge++;
164      }
165    }
166    return GraphPt;
167  }
168  namespace TSnapDetail {
169  template <class PGraph>
170  TIntPr GetRndEdgeNonAdjNode(const PGraph& Graph, int NId1, int NId2) {
171    typename PGraph::TObj::TNodeI NI1, NI2;
172    const int NNodes = Graph->GetNodes();
173    int OutDeg = -1;
174    int iter = 0;
175    do {
176      NI1 = Graph->GetRndNI();
177      OutDeg = NI1.GetOutDeg();
178      if (iter++ >= NNodes*2) { return TIntPr(-1, -1); }
179    } while (OutDeg == 0);
180    NI2 = Graph->GetNI(NI1.GetOutNId(TInt::Rnd.GetUniDevInt(OutDeg)));
181    int runs = 0;
182    while (NI1.IsNbrNId(NId1) || NI1.IsNbrNId(NId2) || NI2.IsNbrNId(NId1) || NI2.IsNbrNId(NId2) || NI1.GetId()==NI2.GetId()) {
183      int iter = 0;
184      do {
185        NI1 = Graph->GetRndNI();
186        OutDeg = NI1.GetOutDeg();
187        if (iter++ >= NNodes*2) { return TIntPr(-1, -1); }
188      } while (OutDeg == 0);
189      NI2 = Graph->GetNI(NI1.GetOutNId(TInt::Rnd.GetUniDevInt(OutDeg)));
190      if (runs++ >= 1000) { return TIntPr(-1, -1); }
191    }
192    return TIntPr(NI1.GetId(), NI2.GetId());
193  }
194  } 
195  }; 
</code></pre>
        </div>
        <div class="column">
            <h3>snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-test-TDirNet.cpp</h3>
            <pre><code>1  #include <gtest/gtest.h>
2  #include "Snap.h"
3  TEST(TDirNet, DefaultConstructor) {
4    PDirNet Graph;
5    Graph = TDirNet::New();
6    EXPECT_EQ(0,Graph->GetNodes());
7    EXPECT_EQ(0,Graph->GetEdges());
8    EXPECT_EQ(1,Graph->IsOk());
9    EXPECT_EQ(1,Graph->Empty());
10    EXPECT_EQ(1,Graph->HasFlag(gfDirected));
11  }
12  TEST(TDirNet, ManipulateNodesEdges) {
13    int NNodes = 10000;
14    int NEdges = 100000;
15    const char *FName = "test.graph.dat";
16    PDirNet Graph;
17    PDirNet Graph1;
18    PDirNet Graph2;
19    int i;
20    int n;
21    int NCount;
22    int x,y;
23    int Deg, InDeg, OutDeg;
24    Graph = TDirNet::New();
25    EXPECT_EQ(1,Graph->Empty());
26    for (i = 0; i < NNodes; i++) {
27      Graph->AddNode(i);
28    }
29    EXPECT_EQ(0,Graph->Empty());
30    EXPECT_EQ(NNodes,Graph->GetNodes());
31    NCount = NEdges;
32    while (NCount > 0) {
33      x = (long) (drand48() * NNodes);
34      y = (long) (drand48() * NNodes);
35      if (x != y  &&  !Graph->IsEdge(x,y)) {
36        n = Graph->AddEdge(x, y);
37        NCount--;
38      }
39    }
40    EXPECT_EQ(NEdges,Graph->GetEdges());
41    EXPECT_EQ(0,Graph->Empty());
42    EXPECT_EQ(1,Graph->IsOk());
43    for (i = 0; i < NNodes; i++) {
44      EXPECT_EQ(1,Graph->IsNode(i));
45    }
46    EXPECT_EQ(0,Graph->IsNode(NNodes));
47    EXPECT_EQ(0,Graph->IsNode(NNodes+1));
48    EXPECT_EQ(0,Graph->IsNode(2*NNodes));
49    NCount = 0;
50    for (TDirNet::TNodeI NI = Graph->BegNI(); NI < Graph->EndNI(); NI++) {
51      NCount++;
52    }
53    EXPECT_EQ(NNodes,NCount);
54    NCount = 0;
55    for (TDirNet::TNodeI NI = Graph->BegNI(); NI < Graph->EndNI(); NI++) {
56      for (int e = 0; e < NI.GetOutDeg(); e++) {
57        NCount++;
58      }
59    }
60    EXPECT_EQ(NEdges,NCount);
61    NCount = 0;
62    for (TDirNet::TEdgeI EI = Graph->BegEI(); EI < Graph->EndEI(); EI++) {
63      NCount++;
64    }
65    EXPECT_EQ(NEdges,NCount);
66    for (TDirNet::TNodeI NI = Graph->BegNI(); NI < Graph->EndNI(); NI++) {
67      Deg = NI.GetDeg();
68      InDeg = NI.GetInDeg();
69      OutDeg = NI.GetOutDeg();
70      EXPECT_EQ(Deg,InDeg+OutDeg);
71    }
72    Graph1 = TDirNet::New();
73    *Graph1 = *Graph;
74    EXPECT_EQ(NNodes,Graph1->GetNodes());
75    EXPECT_EQ(NEdges,Graph1->GetEdges());
76    EXPECT_EQ(0,Graph1->Empty());
77    EXPECT_EQ(1,Graph1->IsOk());
78    {
79      TFOut FOut(FName);
80      Graph->Save(FOut);
81      FOut.Flush();
82    }
83    {
84      TFIn FIn(FName);
85      Graph2 = TDirNet::Load(FIn);
86    }
87    EXPECT_EQ(NNodes,Graph2->GetNodes());
88    EXPECT_EQ(NEdges,Graph2->GetEdges());
89    EXPECT_EQ(0,Graph2->Empty());
90    EXPECT_EQ(1,Graph2->IsOk());
91    for (i = 0; i < NNodes; i++) {
92      n = Graph->GetRndNId();
93      Graph->DelNode(n);
94    }
95    EXPECT_EQ(0,Graph->GetNodes());
96    EXPECT_EQ(0,Graph->GetEdges());
97    EXPECT_EQ(1,Graph->IsOk());
98    EXPECT_EQ(1,Graph->Empty());
99    Graph1->Clr();
100    EXPECT_EQ(0,Graph1->GetNodes());
101    EXPECT_EQ(0,Graph1->GetEdges());
102    EXPECT_EQ(1,Graph1->IsOk());
103    EXPECT_EQ(1,Graph1->Empty());
104  }
105  TEST(TDirNet, GetSmallGraph) {
106    PDirNet Graph;
107    Graph = TDirNet::GetSmallGraph();
108    EXPECT_EQ(5,Graph->GetNodes());
109    EXPECT_EQ(6,Graph->GetEdges());
110    EXPECT_EQ(1,Graph->IsOk());
111    EXPECT_EQ(0,Graph->Empty());
112    EXPECT_EQ(1,Graph->HasFlag(gfDirected));
113  }
114  TEST(TDirNet, AddSAttrN) {
115    PDirNet Graph;
116    Graph = TDirNet::New();
117    TInt AttrId;
118    int status = Graph->AddSAttrN("TestInt", atInt, AttrId);
119    EXPECT_EQ(0, status);
120    EXPECT_EQ(0, AttrId.Val);
121    status = Graph->AddSAttrN("TestFlt", atFlt, AttrId);
122    EXPECT_EQ(0, status);
123    EXPECT_EQ(1, AttrId.Val);
124    status = Graph->AddSAttrN("TestStr", atStr, AttrId);
125    EXPECT_EQ(0, status);
126    EXPECT_EQ(2, AttrId.Val);
127  }
128  TEST(TDirNet, GetSAttrIdN) {
129    PDirNet Graph;
130    Graph = TDirNet::New();
131    TInt AttrId;
132    Graph->AddSAttrN("TestInt", atInt, AttrId);
133    Graph->AddSAttrN("TestFlt", atFlt, AttrId);
134    Graph->AddSAttrN("TestStr", atStr, AttrId);
135    TAttrType AttrType;
136    int status = Graph->GetSAttrIdN(TStr("TestInt"), AttrId, AttrType);
137    EXPECT_EQ(0, status);
138    EXPECT_EQ(atInt, AttrType);
139    EXPECT_EQ(0, AttrId.Val);
140    status = Graph->GetSAttrIdN(TStr("TestFlt"), AttrId, AttrType);
141    EXPECT_EQ(0, status);
142    EXPECT_EQ(atFlt, AttrType);
143    EXPECT_EQ(1, AttrId.Val);
144    status = Graph->GetSAttrIdN(TStr("TestStr"), AttrId, AttrType);
145    EXPECT_EQ(0, status);
146    EXPECT_EQ(atStr, AttrType);
147    EXPECT_EQ(2, AttrId.Val);
148    status = Graph->GetSAttrIdN(TStr("TestError"), AttrId, AttrType);
149    EXPECT_EQ(-1, status);
150  }
151  TEST(TDirNet, GetSAttrNameN) {
152    PDirNet Graph;
153    Graph = TDirNet::New();
154    TInt AttrId;
155    Graph->AddSAttrN("TestInt", atInt, AttrId);
156    Graph->AddSAttrN("TestFlt", atFlt, AttrId);
157    Graph->AddSAttrN("TestStr", atStr, AttrId);
158    TAttrType AttrType;
159    TStr Name;
160    int status = Graph->GetSAttrNameN(0, Name, AttrType);
161    EXPECT_EQ(0, status);
162    EXPECT_EQ(atInt, AttrType);
163    EXPECT_STREQ("TestInt", Name.CStr());
164    status = Graph->GetSAttrNameN(1, Name, AttrType);
165    EXPECT_EQ(0, status);
166    EXPECT_EQ(atFlt, AttrType);
167    EXPECT_STREQ("TestFlt", Name.CStr());
168    status = Graph->GetSAttrNameN(2, Name, AttrType);
169    EXPECT_EQ(0, status);
170    EXPECT_EQ(atStr, AttrType);
171    EXPECT_STREQ("TestStr", Name.CStr());
172    status = Graph->GetSAttrNameN(3, Name, AttrType);
173    EXPECT_EQ(-1, status);
174  }
175  TEST(TDirNet, AddSAttrDatN_int) {
176    PDirNet Graph;
177    Graph = TDirNet::New();
178    Graph->AddNode(0);
179    TInt Val(5);
180    TInt Id(0);
181    int status = Graph->AddSAttrDatN(Id, 1, Val);
182    EXPECT_EQ(-1, status);
183    TInt AttrId;
184    TStr AttrName("TestInt");
185    Graph->AddSAttrN(AttrName, atInt, AttrId);
186    TFlt ErrorVal(1);
187    status = Graph->AddSAttrDatN(Id, AttrId, ErrorVal);
188    EXPECT_EQ(-2, status);
189    status = Graph->AddSAttrDatN(Id, AttrId, Val);
190    EXPECT_EQ(0, status);
191    status = Graph->AddSAttrDatN(Id, AttrName, Val);
192    EXPECT_EQ(0, status);
193    TStr NewName("TestInt2");
194    status = Graph->AddSAttrDatN(Id, NewName, Val);
195    EXPECT_EQ(0, status);
196    TInt ErrorId(1);
197    status = Graph->AddSAttrDatN(ErrorId, AttrId, Val);
198    EXPECT_EQ(-1, status);
199  }
200  TEST(TDirNet, AddSAttrDatN_flt) {
201    PDirNet Graph;
202    Graph = TDirNet::New();
203    Graph->AddNode(0);
204    TFlt Val(5.0);
205    TInt Id(0);
206    int status = Graph->AddSAttrDatN(Id, 1, Val);
207    EXPECT_EQ(-1, status);
208    TInt AttrId;
209    TStr AttrName("TestFlt");
210    Graph->AddSAttrN(AttrName, atFlt, AttrId);
211    TInt ErrorVal(1);
212    status = Graph->AddSAttrDatN(Id, AttrId, ErrorVal);
213    EXPECT_EQ(-2, status);
214    status = Graph->AddSAttrDatN(Id, AttrId, Val);
215    EXPECT_EQ(0, status);
216    status = Graph->AddSAttrDatN(Id, AttrName, Val);
217    EXPECT_EQ(0, status);
218    TStr NewName("TestFlt2");
219    status = Graph->AddSAttrDatN(Id, NewName, Val);
220    EXPECT_EQ(0, status);
221    TInt ErrorId(1);
222    status = Graph->AddSAttrDatN(ErrorId, AttrId, Val);
223    EXPECT_EQ(-1, status);
224  }
225  TEST(TDirNet, AddSAttrDatN_str) {
226    PDirNet Graph;
227    Graph = TDirNet::New();
228    Graph->AddNode(0);
229    TStr Val("5");
230    TInt Id(0);
231    int status = Graph->AddSAttrDatN(Id, 1, Val);
232    EXPECT_EQ(-1, status);
233    TInt AttrId;
234    TStr AttrName("TestFlt");
235    Graph->AddSAttrN(AttrName, atStr, AttrId);
236    TInt ErrorVal(1);
237    status = Graph->AddSAttrDatN(Id, AttrId, ErrorVal);
238    EXPECT_EQ(-2, status);
239    status = Graph->AddSAttrDatN(Id, AttrId, Val);
240    EXPECT_EQ(0, status);
241    status = Graph->AddSAttrDatN(Id, AttrName, Val);
242    EXPECT_EQ(0, status);
243    TStr NewName("TestStr2");
244    status = Graph->AddSAttrDatN(Id, NewName, Val);
245    EXPECT_EQ(0, status);
246    TInt ErrorId(1);
247    status = Graph->AddSAttrDatN(ErrorId, AttrId, Val);
248    EXPECT_EQ(-1, status);
249  }
250  TEST(TDirNet, GetSAttrDatN_int) {
251    PDirNet Graph;
252    Graph = TDirNet::New();
253    Graph->AddNode(0);
<span onclick='openModal()' class='match'>254    TInt Val;
255    TInt AttrId(0);
256    TStr AttrName("TestInt");
257    TInt NId(0);
258    int status = Graph->GetSAttrDatN(NId, AttrName, Val);
259    EXPECT_EQ(-1, status);
260    status = Graph->GetSAttrDatN(NId, AttrId, Val);
</span>261    EXPECT_EQ(-1, status);
262    Graph->AddSAttrN(AttrName, atInt, AttrId);
263    TInt TestVal(5);
264    Graph->AddSAttrDatN(NId, AttrId, TestVal);
265    status = Graph->GetSAttrDatN(NId, AttrId, Val);
266    EXPECT_EQ(0, status);
267    EXPECT_EQ(TestVal.Val, Val.Val);
268    status = Graph->GetSAttrDatN(NId, AttrName, Val);
269    EXPECT_EQ(0, status);
270    EXPECT_EQ(TestVal.Val, Val.Val);
271    TInt ErrorId(1);
272    status = Graph->GetSAttrDatN(ErrorId, AttrId, Val);
273    EXPECT_EQ(-1, status);
274  }
275  TEST(TDirNet, GetSAttrDatN_flt) {
276    PDirNet Graph;
277    Graph = TDirNet::New();
278    Graph->AddNode(0);
279    TFlt Val;
280    TInt AttrId(0);
281    TStr AttrName("TestInt");
282    TInt NId(0);
283    int status = Graph->GetSAttrDatN(NId, AttrName, Val);
284    EXPECT_EQ(-1, status);
285    status = Graph->GetSAttrDatN(NId, AttrId, Val);
286    EXPECT_EQ(-1, status);
287    Graph->AddSAttrN(AttrName, atFlt, AttrId);
288    TFlt TestVal(5.0);
289    Graph->AddSAttrDatN(NId, AttrId, TestVal);
290    status = Graph->GetSAttrDatN(NId, AttrId, Val);
291    EXPECT_EQ(0, status);
292    EXPECT_EQ(TestVal.Val, Val.Val);
293    status = Graph->GetSAttrDatN(NId, AttrName, Val);
294    EXPECT_EQ(0, status);
295    EXPECT_EQ(TestVal.Val, Val.Val);
296    TInt ErrorId(1);
297    status = Graph->GetSAttrDatN(ErrorId, AttrId, Val);
298    EXPECT_EQ(-1, status);
299  }
300  TEST(TDirNet, GetSAttrDatN_str) {
301    PDirNet Graph;
302    Graph = TDirNet::New();
303    Graph->AddNode(0);
304    TStr Val;
305    TInt AttrId(0);
306    TStr AttrName("TestInt");
307    TInt NId(0);
308    int status = Graph->GetSAttrDatN(NId, AttrName, Val);
309    EXPECT_EQ(-1, status);
310    status = Graph->GetSAttrDatN(NId, AttrId, Val);
311    EXPECT_EQ(-1, status);
312    Graph->AddSAttrN(AttrName, atStr, AttrId);
313    TStr TestVal("5");
314    Graph->AddSAttrDatN(NId, AttrId, TestVal);
315    status = Graph->GetSAttrDatN(NId, AttrId, Val);
316    EXPECT_EQ(0, status);
317    EXPECT_STREQ(TestVal.CStr(), Val.CStr());
318    status = Graph->GetSAttrDatN(NId, AttrName, Val);
319    EXPECT_EQ(0, status);
320    EXPECT_STREQ(TestVal.CStr(), Val.CStr());
321    TInt ErrorId(1);
322    status = Graph->GetSAttrDatN(ErrorId, AttrId, Val);
323    EXPECT_EQ(-1, status);
324  }
325  TEST(TDirNet, DelSAttrDatN) {
326    PDirNet Graph;
327    Graph = TDirNet::New();
328    Graph->AddNode(0);
329    TStr IntAttr("TestInt");
330    TInt IntId;
331    Graph->AddSAttrN(IntAttr, atInt, IntId);
332    TStr FltAttr("TestFlt");
333    TInt FltId;
334    Graph->AddSAttrN(FltAttr, atFlt, FltId);
335    TStr StrAttr("TestStr");
336    TInt StrId;
337    Graph->AddSAttrN(StrAttr, atStr, StrId);
338    TInt Id(0);
339    int status = Graph->DelSAttrDatN(Id, IntAttr);
340    EXPECT_EQ(-1, status);
341    status = Graph->DelSAttrDatN(Id, IntId);
342    EXPECT_EQ(-1, status);
343    TInt IntVal(5);
344    Graph->AddSAttrDatN(Id, IntId, IntVal);
345    status = Graph->DelSAttrDatN(Id, IntAttr);
346    EXPECT_EQ(0, status);
347    Graph->AddSAttrDatN(Id, IntId, IntVal);
348    status = Graph->DelSAttrDatN(Id, IntId);
349    EXPECT_EQ(0, status);
350    status = Graph->DelSAttrDatN(Id, IntId);
351    EXPECT_EQ(-1, status);
352    TInt ErrorId(1);
353    status = Graph->DelSAttrDatN(ErrorId, IntId);
354    EXPECT_EQ(-1, status);
355    TFlt FltVal(5.0);
356    Graph->AddSAttrDatN(Id, FltId, FltVal);
357    status = Graph->DelSAttrDatN(Id, FltAttr);
358    EXPECT_EQ(0, status);
359    Graph->AddSAttrDatN(Id, FltId, FltVal);
360    status = Graph->DelSAttrDatN(Id, FltId);
361    EXPECT_EQ(0, status);
362    status = Graph->DelSAttrDatN(Id, FltId);
363    EXPECT_EQ(-1, status);
364    status = Graph->DelSAttrDatN(ErrorId, FltId);
365    EXPECT_EQ(-1, status);
366    TStr StrVal("5");
367    Graph->AddSAttrDatN(Id, StrId, StrVal);
368    status = Graph->DelSAttrDatN(Id, StrAttr);
369    EXPECT_EQ(0, status);
370    Graph->AddSAttrDatN(Id, StrId, StrVal);
371    status = Graph->DelSAttrDatN(Id, StrId);
372    EXPECT_EQ(0, status);
373    status = Graph->DelSAttrDatN(Id, StrId);
374    EXPECT_EQ(-1, status);
375    status = Graph->DelSAttrDatN(ErrorId, StrId);
376    EXPECT_EQ(-1, status);
377  }
378  TEST(TDirNet, GetSAttrVN) {
379    PDirNet Graph;
380    Graph = TDirNet::New();
381    Graph->AddNode(0);
382    TStr IntAttr("TestInt");
383    TInt IntId;
384    Graph->AddSAttrN(IntAttr, atInt, IntId);
385    TStr FltAttr("TestFlt");
386    TInt FltId;
387    Graph->AddSAttrN(FltAttr, atFlt, FltId);
388    TStr StrAttr("TestStr");
389    TInt StrId;
390    Graph->AddSAttrN(StrAttr, atStr, StrId);
391    TInt Id(0);
392    TInt IntVal(5);
393    Graph->AddSAttrDatN(Id, IntId, IntVal);
394    TFlt FltVal(5.0);
395    Graph->AddSAttrDatN(Id, FltId, FltVal);
396    TStr StrVal("5");
397    Graph->AddSAttrDatN(Id, StrId, StrVal);
398    TAttrPrV AttrV;
399    int status = Graph->GetSAttrVN(Id, atInt, AttrV);
400    EXPECT_EQ(0, status);
401    EXPECT_EQ(1, AttrV.Len());
402    status = Graph->GetSAttrVN(Id, atFlt, AttrV);
403    EXPECT_EQ(0, status);
404    EXPECT_EQ(1, AttrV.Len());
405    status = Graph->GetSAttrVN(Id, atStr, AttrV);
406    EXPECT_EQ(0, status);
407    EXPECT_EQ(1, AttrV.Len());
408  }
409  TEST(TDirNet, GetIdVSAttrN) {
410    PDirNet Graph;
411    Graph = TDirNet::New();
412    TStr IntAttr("TestInt");
413    TInt IntId;
414    Graph->AddSAttrN(IntAttr, atInt, IntId);
415    TStr FltAttr("TestFlt");
416    TInt FltId;
417    Graph->AddSAttrN(FltAttr, atFlt, FltId);
418    TStr StrAttr("TestStr");
419    TInt StrId;
420    Graph->AddSAttrN(StrAttr, atStr, StrId);
421    TInt IntVal(0);
422    TFlt FltVal(0);
423    TStr StrVal("test");
424    for (int i = 0; i < 10; i++) {
425      Graph->AddNode(i);
426      TInt Id(i);
427      Graph->AddSAttrDatN(Id, IntId, IntVal);
428      if (i%2 == 0) {
429        Graph->AddSAttrDatN(Id, FltId, FltVal);
430      }
431    }
432    Graph->AddSAttrDatN(0, StrId, StrVal);
433    TIntV IdV;
434    Graph->GetIdVSAttrN(IntAttr, IdV);
435    EXPECT_EQ(10, IdV.Len());
436    Graph->GetIdVSAttrN(IntId, IdV);
437    EXPECT_EQ(10, IdV.Len());
438    Graph->GetIdVSAttrN(FltAttr, IdV);
439    EXPECT_EQ(5, IdV.Len());
440    Graph->GetIdVSAttrN(FltId, IdV);
441    EXPECT_EQ(5, IdV.Len());
442    Graph->GetIdVSAttrN(StrAttr, IdV);
443    EXPECT_EQ(1, IdV.Len());
444    Graph->GetIdVSAttrN(StrId, IdV);
445    EXPECT_EQ(1, IdV.Len());
446  }
447  TEST(TDirNet, AddSAttrE) {
448    PDirNet Graph;
449    Graph = TDirNet::New();
450    TInt AttrId;
451    int status = Graph->AddSAttrE("TestInt", atInt, AttrId);
452    EXPECT_EQ(0, status);
453    EXPECT_EQ(0, AttrId.Val);
454    status = Graph->AddSAttrE("TestFlt", atFlt, AttrId);
455    EXPECT_EQ(0, status);
456    EXPECT_EQ(1, AttrId.Val);
457    status = Graph->AddSAttrE("TestStr", atStr, AttrId);
458    EXPECT_EQ(0, status);
459    EXPECT_EQ(2, AttrId.Val);
460  }
461  TEST(TDirNet, GetSAttrIdE) {
462    PDirNet Graph;
463    Graph = TDirNet::New();
464    TInt AttrId;
465    Graph->AddSAttrE("TestInt", atInt, AttrId);
466    Graph->AddSAttrE("TestFlt", atFlt, AttrId);
467    Graph->AddSAttrE("TestStr", atStr, AttrId);
468    TAttrType AttrType;
469    int status = Graph->GetSAttrIdE(TStr("TestInt"), AttrId, AttrType);
470    EXPECT_EQ(0, status);
471    EXPECT_EQ(atInt, AttrType);
472    EXPECT_EQ(0, AttrId.Val);
473    status = Graph->GetSAttrIdE(TStr("TestFlt"), AttrId, AttrType);
474    EXPECT_EQ(0, status);
475    EXPECT_EQ(atFlt, AttrType);
476    EXPECT_EQ(1, AttrId.Val);
477    status = Graph->GetSAttrIdE(TStr("TestStr"), AttrId, AttrType);
478    EXPECT_EQ(0, status);
479    EXPECT_EQ(atStr, AttrType);
480    EXPECT_EQ(2, AttrId.Val);
481    status = Graph->GetSAttrIdE(TStr("TestError"), AttrId, AttrType);
482    EXPECT_EQ(-1, status);
483  }
484  TEST(TDirNet, GetSAttrNameE) {
485    PDirNet Graph;
486    Graph = TDirNet::New();
487    TInt AttrId;
488    Graph->AddSAttrE("TestInt", atInt, AttrId);
489    Graph->AddSAttrE("TestFlt", atFlt, AttrId);
490    Graph->AddSAttrE("TestStr", atStr, AttrId);
491    TAttrType AttrType;
492    TStr Name;
493    int status = Graph->GetSAttrNameE(0, Name, AttrType);
494    EXPECT_EQ(0, status);
495    EXPECT_EQ(atInt, AttrType);
496    EXPECT_STREQ("TestInt", Name.CStr());
497    status = Graph->GetSAttrNameE(1, Name, AttrType);
498    EXPECT_EQ(0, status);
499    EXPECT_EQ(atFlt, AttrType);
500    EXPECT_STREQ("TestFlt", Name.CStr());
501    status = Graph->GetSAttrNameE(2, Name, AttrType);
502    EXPECT_EQ(0, status);
503    EXPECT_EQ(atStr, AttrType);
504    EXPECT_STREQ("TestStr", Name.CStr());
505    status = Graph->GetSAttrNameE(3, Name, AttrType);
506    EXPECT_EQ(-1, status);
507  }
508  TEST(TDirNet, AddSAttrDatE_int) {
509    PDirNet Graph;
510    Graph = TDirNet::New();
511    Graph->AddNode(0);
512    Graph->AddNode(1);
513    Graph->AddEdge(0, 1);
514    TInt Val(5);
515    int SrcId = 0;
516    int DstId = 1;
517    int status = Graph->AddSAttrDatE(SrcId, DstId, 1, Val);
518    EXPECT_EQ(-1, status);
519    TInt AttrId;
520    TStr AttrName("TestInt");
521    Graph->AddSAttrE(AttrName, atInt, AttrId);
522    TFlt ErrorVal(1);
523    status = Graph->AddSAttrDatE(SrcId, DstId, AttrId, ErrorVal);
524    EXPECT_EQ(-2, status);
525    status = Graph->AddSAttrDatE(SrcId, DstId, AttrId, Val);
526    EXPECT_EQ(0, status);
527    status = Graph->AddSAttrDatE(SrcId, DstId, AttrName, Val);
528    EXPECT_EQ(0, status);
529    TStr NewName("TestInt2");
530    status = Graph->AddSAttrDatE(SrcId, DstId, NewName, Val);
531    EXPECT_EQ(0, status);
532    int ErrorId = 5;
533    status = Graph->AddSAttrDatE(SrcId, ErrorId, AttrId, Val);
534    EXPECT_EQ(-1, status);
535  }
536  TEST(TDirNet, AddSAttrDatE_flt) {
537    PDirNet Graph;
538    Graph = TDirNet::New();
539    Graph->AddNode(0);
540    Graph->AddNode(1);
541    Graph->AddEdge(0, 1);
542    TFlt Val(5.0);
543    int SrcId = 0;
544    int DstId = 1;
545    int status = Graph->AddSAttrDatE(SrcId, DstId, 1, Val);
546    EXPECT_EQ(-1, status);
547    TInt AttrId;
548    TStr AttrName("TestFlt");
549    Graph->AddSAttrE(AttrName, atFlt, AttrId);
550    TInt ErrorVal(1);
551    status = Graph->AddSAttrDatE(SrcId, DstId, AttrId, ErrorVal);
552    EXPECT_EQ(-2, status);
553    status = Graph->AddSAttrDatE(SrcId, DstId, AttrId, Val);
554    EXPECT_EQ(0, status);
555    status = Graph->AddSAttrDatE(SrcId, DstId, AttrName, Val);
556    EXPECT_EQ(0, status);
557    TStr NewName("TestFlt2");
558    status = Graph->AddSAttrDatE(SrcId, DstId, NewName, Val);
559    EXPECT_EQ(0, status);
560    int ErrorId = 5;
561    status = Graph->AddSAttrDatE(SrcId, ErrorId, AttrId, Val);
562    EXPECT_EQ(-1, status);
563  }
564  TEST(TDirNet, AddSAttrDatE_str) {
565    PDirNet Graph;
566    Graph = TDirNet::New();
567    Graph->AddNode(0);
568    Graph->AddNode(1);
569    Graph->AddEdge(0, 1);
570    TStr Val("5");
571    int SrcId = 0;
572    int DstId = 1;
573    int status = Graph->AddSAttrDatE(SrcId, DstId, 1, Val);
574    EXPECT_EQ(-1, status);
575    TInt AttrId;
576    TStr AttrName("TestFlt");
577    Graph->AddSAttrE(AttrName, atStr, AttrId);
578    TInt ErrorVal(1);
579    status = Graph->AddSAttrDatE(SrcId, DstId, AttrId, ErrorVal);
580    EXPECT_EQ(-2, status);
581    status = Graph->AddSAttrDatE(SrcId, DstId, AttrId, Val);
582    EXPECT_EQ(0, status);
583    status = Graph->AddSAttrDatE(SrcId, DstId, AttrName, Val);
584    EXPECT_EQ(0, status);
585    TStr NewName("TestStr2");
586    status = Graph->AddSAttrDatE(SrcId, DstId, NewName, Val);
587    EXPECT_EQ(0, status);
588    int ErrorId = 5;
589    status = Graph->AddSAttrDatE(SrcId, ErrorId, AttrId, Val);
590    EXPECT_EQ(-1, status);
591  }
592  TEST(TDirNet, GetSAttrDatE_int) {
593    PDirNet Graph;
594    Graph = TDirNet::New();
595    Graph->AddNode(0);
596    Graph->AddNode(1);
597    Graph->AddEdge(0, 1);
598    TInt Val;
599    TInt AttrId(0);
600    TStr AttrName("TestInt");
601    int SrcId = 0;
602    int DstId = 1;
603    int status = Graph->GetSAttrDatE(SrcId, DstId, AttrName, Val);
604    EXPECT_EQ(-1, status);
605    status = Graph->GetSAttrDatE(SrcId, DstId, AttrId, Val);
606    EXPECT_EQ(-1, status);
607    Graph->AddSAttrE(AttrName, atInt, AttrId);
608    TInt TestVal(5);
609    Graph->AddSAttrDatE(SrcId, DstId, AttrId, TestVal);
610    status = Graph->GetSAttrDatE(SrcId, DstId, AttrId, Val);
611    EXPECT_EQ(0, status);
612    EXPECT_EQ(TestVal.Val, Val.Val);
613    status = Graph->GetSAttrDatE(SrcId, DstId, AttrName, Val);
614    EXPECT_EQ(0, status);
615    EXPECT_EQ(TestVal.Val, Val.Val);
616    int ErrorId = 5;
617    status = Graph->GetSAttrDatE(SrcId, ErrorId, AttrId, Val);
618    EXPECT_EQ(-1, status);
619  }
620  TEST(TDirNet, GetSAttrDatE_flt) {
621    PDirNet Graph;
622    Graph = TDirNet::New();
623    Graph->AddNode(0);
624    Graph->AddNode(1);
625    Graph->AddEdge(0, 1);
626    TFlt Val;
627    TInt AttrId(0);
628    TStr AttrName("TestInt");
629    int SrcId = 0;
630    int DstId = 1;
631    int status = Graph->GetSAttrDatE(SrcId, DstId, AttrName, Val);
632    EXPECT_EQ(-1, status);
633    status = Graph->GetSAttrDatE(SrcId, DstId, AttrId, Val);
634    EXPECT_EQ(-1, status);
635    Graph->AddSAttrE(AttrName, atFlt, AttrId);
636    TFlt TestVal(5.0);
637    Graph->AddSAttrDatE(SrcId, DstId, AttrId, TestVal);
638    status = Graph->GetSAttrDatE(SrcId, DstId, AttrId, Val);
639    EXPECT_EQ(0, status);
640    EXPECT_EQ(TestVal.Val, Val.Val);
641    status = Graph->GetSAttrDatE(SrcId, DstId, AttrName, Val);
642    EXPECT_EQ(0, status);
643    EXPECT_EQ(TestVal.Val, Val.Val);
644    int ErrorId = 5;
645    status = Graph->GetSAttrDatE(SrcId, ErrorId, AttrId, Val);
646    EXPECT_EQ(-1, status);
647  }
648  TEST(TDirNet, GetSAttrDatE_str) {
649    PDirNet Graph;
650    Graph = TDirNet::New();
651    Graph->AddNode(0);
652    Graph->AddNode(1);
653    Graph->AddEdge(0, 1);
654    TStr Val;
655    TInt AttrId(0);
656    TStr AttrName("TestInt");
657    int SrcId = 0;
658    int DstId = 1;
659    int status = Graph->GetSAttrDatE(SrcId, DstId, AttrName, Val);
660    EXPECT_EQ(-1, status);
661    status = Graph->GetSAttrDatE(SrcId, DstId, AttrId, Val);
662    EXPECT_EQ(-1, status);
663    Graph->AddSAttrE(AttrName, atStr, AttrId);
664    TStr TestVal("5");
665    Graph->AddSAttrDatE(SrcId, DstId, AttrId, TestVal);
666    status = Graph->GetSAttrDatE(SrcId, DstId, AttrId, Val);
667    EXPECT_EQ(0, status);
668    EXPECT_STREQ(TestVal.CStr(), Val.CStr());
669    status = Graph->GetSAttrDatE(SrcId, DstId, AttrName, Val);
670    EXPECT_EQ(0, status);
671    EXPECT_STREQ(TestVal.CStr(), Val.CStr());
672    int ErrorId = 5;
673    status = Graph->GetSAttrDatE(SrcId, ErrorId, AttrId, Val);
674    EXPECT_EQ(-1, status);
675  }
676  TEST(TDirNet, DelSAttrDatE) {
677    PDirNet Graph;
678    Graph = TDirNet::New();
679    Graph->AddNode(0);
680    Graph->AddNode(1);
681    Graph->AddEdge(0, 1);
682    TStr IntAttr("TestInt");
683    TInt IntId;
684    Graph->AddSAttrE(IntAttr, atInt, IntId);
685    TStr FltAttr("TestFlt");
686    TInt FltId;
687    Graph->AddSAttrE(FltAttr, atFlt, FltId);
688    TStr StrAttr("TestStr");
689    TInt StrId;
690    Graph->AddSAttrE(StrAttr, atStr, StrId);
691    int SrcId = 0;
692    int DstId = 1;
693    int status = Graph->DelSAttrDatE(SrcId, DstId, IntAttr);
694    EXPECT_EQ(-1, status);
695    status = Graph->DelSAttrDatE(SrcId, DstId, IntId);
696    EXPECT_EQ(-1, status);
697    TInt IntVal(5);
698    Graph->AddSAttrDatE(SrcId, DstId, IntId, IntVal);
699    status = Graph->DelSAttrDatE(SrcId, DstId, IntAttr);
700    EXPECT_EQ(0, status);
701    Graph->AddSAttrDatE(SrcId, DstId, IntId, IntVal);
702    status = Graph->DelSAttrDatE(SrcId, DstId, IntId);
703    EXPECT_EQ(0, status);
704    status = Graph->DelSAttrDatE(SrcId, DstId, IntId);
705    EXPECT_EQ(-1, status);
706    int ErrorId = 5;
707    status = Graph->DelSAttrDatE(SrcId, ErrorId, IntId);
708    EXPECT_EQ(-1, status);
709    TFlt FltVal(5.0);
710    Graph->AddSAttrDatE(SrcId, DstId, FltId, FltVal);
711    status = Graph->DelSAttrDatE(SrcId, DstId, FltAttr);
712    EXPECT_EQ(0, status);
713    Graph->AddSAttrDatE(SrcId, DstId, FltId, FltVal);
714    status = Graph->DelSAttrDatE(SrcId, DstId, FltId);
715    EXPECT_EQ(0, status);
716    status = Graph->DelSAttrDatE(SrcId, DstId, FltId);
717    EXPECT_EQ(-1, status);
718    status = Graph->DelSAttrDatE(SrcId, ErrorId, FltId);
719    EXPECT_EQ(-1, status);
720    TStr StrVal("5");
721    Graph->AddSAttrDatE(SrcId, DstId, StrId, StrVal);
722    status = Graph->DelSAttrDatE(SrcId, DstId, StrAttr);
723    EXPECT_EQ(0, status);
724    Graph->AddSAttrDatE(SrcId, DstId, StrId, StrVal);
725    status = Graph->DelSAttrDatE(SrcId, DstId, StrId);
726    EXPECT_EQ(0, status);
727    status = Graph->DelSAttrDatE(SrcId, DstId, StrId);
728    EXPECT_EQ(-1, status);
729    status = Graph->DelSAttrDatE(SrcId, ErrorId, StrId);
730    EXPECT_EQ(-1, status);
731  }
732  TEST(TDirNet, GetSAttrVE) {
733    PDirNet Graph;
734    Graph = TDirNet::New();
735    Graph->AddNode(0);
736    Graph->AddNode(1);
737    Graph->AddEdge(0, 1);
738    TStr IntAttr("TestInt");
739    TInt IntId;
740    Graph->AddSAttrE(IntAttr, atInt, IntId);
741    TStr FltAttr("TestFlt");
742    TInt FltId;
743    Graph->AddSAttrE(FltAttr, atFlt, FltId);
744    TStr StrAttr("TestStr");
745    TInt StrId;
746    Graph->AddSAttrE(StrAttr, atStr, StrId);
747    int SrcId = 0;
748    int DstId = 1;
749    TInt IntVal(5);
750    Graph->AddSAttrDatE(SrcId, DstId, IntId, IntVal);
751    TFlt FltVal(5.0);
752    Graph->AddSAttrDatE(SrcId, DstId, FltId, FltVal);
753    TStr StrVal("5");
754    Graph->AddSAttrDatE(SrcId, DstId, StrId, StrVal);
755    TAttrPrV AttrV;
756    int status = Graph->GetSAttrVE(SrcId, DstId, atInt, AttrV);
757    EXPECT_EQ(0, status);
758    EXPECT_EQ(1, AttrV.Len());
759    status = Graph->GetSAttrVE(SrcId, DstId, atFlt, AttrV);
760    EXPECT_EQ(0, status);
761    EXPECT_EQ(1, AttrV.Len());
762    status = Graph->GetSAttrVE(SrcId, DstId, atStr, AttrV);
763    EXPECT_EQ(0, status);
764    EXPECT_EQ(1, AttrV.Len());
765  }
766  TEST(TDirNet, GetIdVSAttrE) {
767    PDirNet Graph;
768    Graph = TDirNet::New();
769    TStr IntAttr("TestInt");
770    TInt IntId;
771    Graph->AddSAttrE(IntAttr, atInt, IntId);
772    TStr FltAttr("TestFlt");
773    TInt FltId;
774    Graph->AddSAttrE(FltAttr, atFlt, FltId);
775    TStr StrAttr("TestStr");
776    TInt StrId;
777    Graph->AddSAttrE(StrAttr, atStr, StrId);
778    TInt IntVal(0);
779    TFlt FltVal(0);
780    TStr StrVal("test");
781    Graph->AddNode(0);
782    for (int i = 0; i < 10; i++) {
783      Graph->AddNode(i+1);
784      Graph->AddEdge(i, i+1);
785      Graph->AddSAttrDatE(i, i+1, IntId, IntVal);
786      if (i%2 == 0) {
787        Graph->AddSAttrDatE(i, i+1, FltId, FltVal);
788      }
789    }
790    Graph->AddSAttrDatE(0, 1, StrId, StrVal);
791    TIntPrV IdV;
792    Graph->GetIdVSAttrE(IntAttr, IdV);
793    EXPECT_EQ(10, IdV.Len());
794    Graph->GetIdVSAttrE(IntId, IdV);
795    EXPECT_EQ(10, IdV.Len());
796    Graph->GetIdVSAttrE(FltAttr, IdV);
797    EXPECT_EQ(5, IdV.Len());
798    Graph->GetIdVSAttrE(FltId, IdV);
799    EXPECT_EQ(5, IdV.Len());
800    Graph->GetIdVSAttrE(StrAttr, IdV);
801    EXPECT_EQ(1, IdV.Len());
802    Graph->GetIdVSAttrE(StrId, IdV);
803    EXPECT_EQ(1, IdV.Len());
804  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-ggen.h</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-test-TDirNet.cpp</div>
                </div>
                <div class="column column_space"><pre><code>150  PGraph GenRndGnm(const int& Nodes, const int& Edges, const bool& IsDir, TRnd& Rnd) {
151    PGraph GraphPt = PGraph::New();
152    typename PGraph::TObj& Graph = *GraphPt;
153    Graph.Reserve(Nodes, Edges);
</pre></code></div>
                <div class="column column_space"><pre><code>254    TInt Val;
255    TInt AttrId(0);
256    TStr AttrName("TestInt");
257    TInt NId(0);
258    int status = Graph->GetSAttrDatN(NId, AttrName, Val);
259    EXPECT_EQ(-1, status);
260    status = Graph->GetSAttrDatN(NId, AttrId, Val);
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    