<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for ImmutableRangeSetTest.java &amp; ImmutableListTest.java</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for ImmutableRangeSetTest.java &amp; ImmutableListTest.java
      </h3>
<h1 align="center">
        30.7%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>ImmutableRangeSetTest.java (34.46215%)<th>ImmutableListTest.java (27.76886%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(205-228)<td><a href="#" name="0">(503-522)</a><td align="center"><font color="#ff0000">48</font>
<tr onclick='openModal("#f63526")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f63526"><font color="#f63526">-</font><td><a href="#" name="1">(134-145)<td><a href="#" name="1">(666-675)</a><td align="center"><font color="#7a0000">23</font>
<tr onclick='openModal("#980517")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#980517"><font color="#980517">-</font><td><a href="#" name="2">(167-178)<td><a href="#" name="2">(742-755)</a><td align="center"><font color="#5a0000">17</font>
<tr onclick='openModal("#53858b")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#53858b"><font color="#53858b">-</font><td><a href="#" name="3">(17-38)<td><a href="#" name="3">(44-66)</a><td align="center"><font color="#550000">16</font>
<tr onclick='openModal("#6cc417")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#6cc417"><font color="#6cc417">-</font><td><a href="#" name="4">(498-509)<td><a href="#" name="4">(724-732)</a><td align="center"><font color="#4f0000">15</font>
<tr onclick='openModal("#151b8d")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#151b8d"><font color="#151b8d">-</font><td><a href="#" name="5">(511-518)<td><a href="#" name="5">(405-413)</a><td align="center"><font color="#4a0000">14</font>
<tr onclick='openModal("#8c8774")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#8c8774"><font color="#8c8774">-</font><td><a href="#" name="6">(597-604)<td><a href="#" name="6">(709-714)</a><td align="center"><font color="#3f0000">12</font>
<tr onclick='openModal("#38a4a5")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#38a4a5"><font color="#38a4a5">-</font><td><a href="#" name="7">(541-545)<td><a href="#" name="7">(494-501)</a><td align="center"><font color="#3f0000">12</font>
<tr onclick='openModal("#c58917")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#c58917"><font color="#c58917">-</font><td><a href="#" name="8">(373-380)<td><a href="#" name="8">(763-770)</a><td align="center"><font color="#3f0000">12</font>
<tr onclick='openModal("#83a33a")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#83a33a"><font color="#83a33a">-</font><td><a href="#" name="9">(311-319)<td><a href="#" name="9">(643-650)</a><td align="center"><font color="#3f0000">12</font>
<tr onclick='openModal("#ad5910")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#ad5910"><font color="#ad5910">-</font><td><a href="#" name="10">(104-117)<td><a href="#" name="10">(72-78)</a><td align="center"><font color="#3f0000">12</font>
<tr onclick='openModal("#b041ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#b041ff"><font color="#b041ff">-</font><td><a href="#" name="11">(493-498)<td><a href="#" name="11">(138-144)</a><td align="center"><font color="#3a0000">11</font>
<tr onclick='openModal("#571b7e")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#571b7e"><font color="#571b7e">-</font><td><a href="#" name="12">(482-487)<td><a href="#" name="12">(128-134)</a><td align="center"><font color="#3a0000">11</font>
<tr onclick='openModal("#3b9c9c")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#3b9c9c"><font color="#3b9c9c">-</font><td><a href="#" name="13">(380-387)<td><a href="#" name="13">(253-259)</a><td align="center"><font color="#3a0000">11</font>
<tr onclick='openModal("#842dce")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#842dce"><font color="#842dce">-</font><td><a href="#" name="14">(357-364)<td><a href="#" name="14">(244-250)</a><td align="center"><font color="#3a0000">11</font>
<tr onclick='openModal("#f52887")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f52887"><font color="#f52887">-</font><td><a href="#" name="15">(341-348)<td><a href="#" name="15">(212-218)</a><td align="center"><font color="#3a0000">11</font>
<tr onclick='openModal("#2981b2")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#2981b2"><font color="#2981b2">-</font><td><a href="#" name="16">(325-332)<td><a href="#" name="16">(204-210)</a><td align="center"><font color="#3a0000">11</font>
<tr onclick='openModal("#3090c7")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#3090c7"><font color="#3090c7">-</font><td><a href="#" name="17">(283-290)<td><a href="#" name="17">(118-124)</a><td align="center"><font color="#3a0000">11</font>
<tr onclick='openModal("#800517")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#800517"><font color="#800517">-</font><td><a href="#" name="18">(252-262)<td><a href="#" name="18">(715-721)</a><td align="center"><font color="#3a0000">11</font>
<tr onclick='openModal("#f62817")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f62817"><font color="#f62817">-</font><td><a href="#" name="19">(150-155)<td><a href="#" name="19">(393-398)</a><td align="center"><font color="#3a0000">11</font>
<tr onclick='openModal("#4e9258")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#4e9258"><font color="#4e9258">-</font><td><a href="#" name="20">(534-538)<td><a href="#" name="20">(264-269)</a><td align="center"><font color="#2f0000">9</font>
<tr onclick='openModal("#947010")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#947010"><font color="#947010">-</font><td><a href="#" name="21">(521-524)<td><a href="#" name="21">(331-336)</a><td align="center"><font color="#2f0000">9</font>
<tr onclick='openModal("#4cc417")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#4cc417"><font color="#4cc417">-</font><td><a href="#" name="22">(433-437)<td><a href="#" name="22">(285-289)</a><td align="center"><font color="#2f0000">9</font>
<tr onclick='openModal("#f660ab")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f660ab"><font color="#f660ab">-</font><td><a href="#" name="23">(201-205)<td><a href="#" name="23">(277-283)</a><td align="center"><font color="#2f0000">9</font>
<tr onclick='openModal("#79764d")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#79764d"><font color="#79764d">-</font><td><a href="#" name="24">(178-184)<td><a href="#" name="24">(149-154)</a><td align="center"><font color="#2f0000">9</font>
<tr onclick='openModal("#5eac10")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#5eac10"><font color="#5eac10">-</font><td><a href="#" name="25">(97-102)<td><a href="#" name="25">(345-350)</a><td align="center"><font color="#2f0000">9</font>
</td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>ImmutableRangeSetTest.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 <a name="3"></a>
2 package com.google.common.collect;
3 <font color="#53858b"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>import static com.google.common.truth.Truth.assertThat;
4 import com.google.common.annotations.GwtIncompatible;
5 import com.google.common.collect.testing.NavigableSetTestSuiteBuilder;
6 import com.google.common.collect.testing.SampleElements;
7 import com.google.common.collect.testing.TestSetGenerator;
8 import com.google.common.collect.testing.features.CollectionFeature;
9 import com.google.common.collect.testing.features.CollectionSize;
10 import com.google.common.testing.CollectorTester;
11 import com.google.common.testing.SerializableTester;
12 import java.math.BigInteger;
13 import java.util.List;
14 import java.util.Set;
15 import junit.framework.Test;
16 import junit.framework.TestSuite;
17 @</b></font>GwtIncompatible public class ImmutableRangeSetTest extends AbstractRangeSetTest {
18   static final class ImmutableRangeSetIntegerAsSetGenerator implements TestSetGenerator&lt;Integer&gt; {
19     @Override
20     public SampleElements&lt;Integer&gt; samples() {
21       return new SampleElements&lt;&gt;(1, 4, 3, 2, 5);
22     }
23     @Override
24     public Integer[] createArray(int length) {
25       return new Integer[length];
26     }
27     @Override
28     public Iterable&lt;Integer&gt; order(List&lt;Integer&gt; insertionOrder) {
29       return Ordering.natural().sortedCopy(insertionOrder);
30     }
31     @Override
32     public Set&lt;Integer&gt; create(Object... elements) {
33       ImmutableRangeSet.Builder&lt;Integer&gt; builder = ImmutableRangeSet.builder();
34       for (Object o : elements) {
35         Integer i = (Integer) o;
36         builder.add(Range.singleton(i));
37       }
38       return builder.build().asSet(DiscreteDomain.integers());
39     }
40   }
41   static final class ImmutableRangeSetBigIntegerAsSetGenerator
42       implements TestSetGenerator&lt;BigInteger&gt; {
43     @Override
44     public SampleElements&lt;BigInteger&gt; samples() {
45       return new SampleElements&lt;&gt;(
46           BigInteger.valueOf(1),
47           BigInteger.valueOf(4),
48           BigInteger.valueOf(3),
49           BigInteger.valueOf(2),
50           BigInteger.valueOf(5));
51     }
52     @Override
53     public BigInteger[] createArray(int length) {
54       return new BigInteger[length];
55     }
56     @Override
57     public Iterable&lt;BigInteger&gt; order(List&lt;BigInteger&gt; insertionOrder) {
58       return Ordering.natural().sortedCopy(insertionOrder);
59     }
60     @Override
61     public Set&lt;BigInteger&gt; create(Object... elements) {
62       ImmutableRangeSet.Builder&lt;BigInteger&gt; builder = ImmutableRangeSet.builder();
63       for (Object o : elements) {
64 <a name="25"></a>        BigInteger i = (BigInteger) o;
65         builder.add(Range.closedOpen(i, i.add(BigInteger.ONE)));
66       }
67       return <font color="#5eac10"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>builder.build().asSet(DiscreteDomain.bigIntegers());
68     }
69   }
70 <a name="10"></a>  public static Test suite() {
71     TestSuite suite = new</b></font> TestSuite();
72     suite.addTestSuite(ImmutableRangeSetTest.class);
73     <font color="#ad5910"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>suite.addTest(
74         NavigableSetTestSuiteBuilder.using(new ImmutableRangeSetIntegerAsSetGenerator())
75             .named("ImmutableRangeSet.asSet[DiscreteDomain.integers[]]")
76             .withFeatures(
77                 CollectionSize.ANY,
78                 CollectionFeature.REJECTS_DUPLICATES_AT_CREATION,
79                 CollectionFeature.ALLOWS_NULL_QUERIES,
80                 CollectionFeature.KNOWN_ORDER,
81                 CollectionFeature.NON_STANDARD_TOSTRING,
82                 CollectionFeature.SERIALIZABLE)
83             .createTestSuite());
84     suite.addTest(
85         NavigableSetTestSuiteBuilder.using(new</b></font> ImmutableRangeSetBigIntegerAsSetGenerator())
86             .named("ImmutableRangeSet.asSet[DiscreteDomain.bigIntegers[]]")
87             .withFeatures(
88                 CollectionSize.ANY,
89                 CollectionFeature.REJECTS_DUPLICATES_AT_CREATION,
90                 CollectionFeature.ALLOWS_NULL_QUERIES,
91                 CollectionFeature.KNOWN_ORDER,
92                 CollectionFeature.NON_STANDARD_TOSTRING,
93                 CollectionFeature.SERIALIZABLE)
94             .createTestSuite());
95     return suite;
96   }
97   public void testEmpty() {
98 <a name="1"></a>    ImmutableRangeSet&lt;Integer&gt; rangeSet = ImmutableRangeSet.of();
99     assertThat(rangeSet.asRanges()).isEmpty();
100     assertEquals(ImmutableRangeSet.&lt;Integer&gt;all(), <font color="#f63526"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>rangeSet.complement());
101     assertFalse(rangeSet.contains(0));
102     assertFalse(rangeSet.intersects(Range.singleton(0)));
103     assertFalse(rangeSet.encloses(Range.singleton(0)));
104     assertTrue(rangeSet.enclosesAll(rangeSet));
105     assertTrue(rangeSet.isEmpty());
106   }
107   public void testAll() {
108     ImmutableRangeSet&lt;Integer&gt; rangeSet = ImmutableRangeSet.all();
109     assertThat(rangeSet.asRanges()).contains(Range.&lt;Integer&gt;all</b></font>());
110     assertTrue(rangeSet.contains(0));
111 <a name="19"></a>    assertTrue(rangeSet.intersects(Range.singleton(0)));
112     assertTrue(rangeSet.intersects(Range.&lt;Integer&gt;all()));
113     assertTrue(rangeSet.encloses(Range.&lt;Integer&gt;all()));
114     <font color="#f62817"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>assertTrue(rangeSet.enclosesAll(rangeSet));
115     assertEquals(ImmutableRangeSet.&lt;Integer&gt;of(), rangeSet.complement());
116   }
117   public void testSingleBoundedRange() {
118     ImmutableRangeSet&lt;Integer&gt; rangeSet = ImmutableRangeSet.of</b></font>(Range.closedOpen(1, 5));
119     assertThat(rangeSet.asRanges()).contains(Range.closedOpen(1, 5));
120     assertTrue(rangeSet.intersects(Range.closed(3, 4)));
121     assertTrue(rangeSet.intersects(Range.closedOpen(0, 2)));
122     assertTrue(rangeSet.intersects(Range.closedOpen(3, 7)));
123     assertTrue(rangeSet.intersects(Range.greaterThan(2)));
124     assertFalse(rangeSet.intersects(Range.greaterThan(7)));
125 <a name="2"></a>
126     assertTrue(rangeSet.encloses(Range.closed(3, 4)));
127     assertTrue(rangeSet.encloses(Range.closedOpen(1, 4)));
128     assertTrue(rangeSet.encloses(<font color="#980517"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>Range.closedOpen(1, 5)));
129     assertFalse(rangeSet.encloses(Range.greaterThan(2)));
130     assertTrue(rangeSet.contains(3));
131     assertFalse(rangeSet.contains(5));
132     assertFalse(rangeSet.contains(0));
133     RangeSet&lt;Integer&gt; expectedComplement = TreeRangeSet.create();
134 <a name="24"></a>    expectedComplement.add(Range.lessThan(1));
135     expectedComplement.add(Range.atLeast(5));
136     assertEquals</b></font>(expectedComplement, <font color="#79764d"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>rangeSet.complement());
137   }
138   public void testSingleBoundedBelowRange() {
139     ImmutableRangeSet&lt;Integer&gt; rangeSet = ImmutableRangeSet.of(Range.greaterThan(2));
140     assertThat(rangeSet.asRanges()).contains</b></font>(Range.greaterThan(2));
141     assertTrue(rangeSet.intersects(Range.closed(3, 4)));
142     assertTrue(rangeSet.intersects(Range.closedOpen(1, 5)));
143     assertFalse(rangeSet.intersects(Range.lessThan(1)));
144     assertTrue(rangeSet.intersects(Range.greaterThan(1)));
145     assertTrue(rangeSet.intersects(Range.greaterThan(3)));
146     assertTrue(rangeSet.encloses(Range.closed(3, 4)));
147     assertTrue(rangeSet.encloses(Range.greaterThan(3)));
148     assertFalse(rangeSet.encloses(Range.closedOpen(1, 5)));
149     assertTrue(rangeSet.contains(3));
150     assertTrue(rangeSet.contains(5));
151 <a name="23"></a>    assertFalse(rangeSet.contains(0));
152     assertFalse(rangeSet.contains(2));
153     <font color="#f660ab"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>assertEquals(ImmutableRangeSet.of(Range.atMost(2)), rangeSet.complement());
154 <a name="0"></a>  }
155   public void testSingleBoundedAboveRange() {
156     ImmutableRangeSet&lt;Integer&gt; rangeSet = <font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>ImmutableRangeSet.of(Range.atMost(3))</b></font>;
157     assertThat(rangeSet.asRanges()).contains(Range.atMost(3));
158     assertTrue(rangeSet.intersects(Range.closed(3, 4)));
159     assertTrue(rangeSet.intersects(Range.closedOpen(1, 5)));
160     assertFalse(rangeSet.intersects(Range.closedOpen(4, 5)));
161     assertTrue(rangeSet.intersects(Range.lessThan(1)));
162     assertTrue(rangeSet.intersects(Range.greaterThan(1)));
163     assertFalse(rangeSet.intersects(Range.greaterThan(3)));
164     assertTrue(rangeSet.encloses(Range.closed(2, 3)));
165     assertTrue(rangeSet.encloses(Range.lessThan(1)));
166     assertFalse(rangeSet.encloses(Range.closedOpen(1, 5)));
167     assertTrue(rangeSet.contains(3));
168     assertTrue(rangeSet.contains(0));
169     assertFalse(rangeSet.contains(4));
170     assertFalse(rangeSet.contains(5));
171     assertEquals(ImmutableRangeSet.of(Range.greaterThan(3)), rangeSet.complement());
172   }
173   public void testMultipleB</b></font>oundedRanges() {
174     ImmutableRangeSet&lt;Integer&gt; rangeSet =
175         ImmutableRangeSet.&lt;Integer&gt;builder()
176             .add(Range.closed(5, 8))
177             .add(Range.closedOpen(1, 3))
178             .build();
179     assertThat(rangeSet.asRanges())
180         .containsExactly(Range.closedOpen(1, 3), Range.closed(5, 8))
181         .inOrder();
182     assertTrue(rangeSet.intersects(Range.closed(1, 2)));
183     assertTrue(rangeSet.intersects(Range.open(5, 8)));
184     assertFalse(rangeSet.intersects(Range.closed(3, 4)));
185     assertTrue(rangeSet.intersects(Range.greaterThan(5)));
186     assertFalse(rangeSet.intersects(Range.greaterThan(8)));
187     assertTrue(rangeSet.encloses(Range.closed(1, 2)));
188     assertTrue(rangeSet.encloses(Range.open(5, 8)));
189     assertFalse(rangeSet.encloses(Range.closed(1, 8)));
190     assertFalse(rangeSet.encloses(Range.greaterThan(5)));
191 <a name="18"></a>
192     RangeSet&lt;Integer&gt; expectedComplement =
193         ImmutableRangeSet.&lt;Integer&gt;builder()
194             .add(<font color="#800517"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>Range.lessThan(1))
195             .add(Range.closedOpen(3, 5))
196             .add(Range.greaterThan(8))
197             .build();
198     assertEquals(expectedComplement, rangeSet.complement());
199   }
200   public void testMultipleBoundedBelowRanges() {
201     ImmutableRangeSet&lt;Integer&gt; rangeSet =
202         ImmutableRangeSet.&lt;Integer&gt;builder()</b></font>
203             .add(Range.greaterThan(6))
204             .add(Range.closedOpen(1, 3))
205             .build();
206     assertThat(rangeSet.asRanges())
207         .containsExactly(Range.closedOpen(1, 3), Range.greaterThan(6))
208         .inOrder();
209     assertTrue(rangeSet.intersects(Range.closed(1, 2)));
210     assertTrue(rangeSet.intersects(Range.open(6, 8)));
211     assertFalse(rangeSet.intersects(Range.closed(3, 6)));
212     assertTrue(rangeSet.intersects(Range.greaterThan(5)));
213     assertFalse(rangeSet.intersects(Range.lessThan(1)));
214     assertTrue(rangeSet.encloses(Range.closed(1, 2)));
215     assertTrue(rangeSet.encloses(Range.open(6, 8)));
216     assertFalse(rangeSet.encloses(Range.closed(1, 8)));
217 <a name="17"></a>    assertFalse(rangeSet.encloses(Range.greaterThan(5)));
218     RangeSet&lt;Integer&gt; expectedComplement =
219         ImmutableRangeSet.&lt;Integer&gt;builder().add(Range.lessThan(1)).add(<font color="#3090c7"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>Range.closed(3, 6)).build();
220     assertEquals(expectedComplement, rangeSet.complement());
221   }
222   public void testMultipleBoundedAboveRanges() {
223     ImmutableRangeSet&lt;Integer&gt; rangeSet =
224         ImmutableRangeSet.&lt;Integer&gt;builder()</b></font>
225             .add(Range.atMost(0))
226             .add(Range.closedOpen(2, 5))
227             .build();
228     assertThat(rangeSet.asRanges())
229         .containsExactly(Range.atMost(0), Range.closedOpen(2, 5))
230         .inOrder();
231     assertTrue(rangeSet.intersects(Range.closed(2, 4)));
232     assertTrue(rangeSet.intersects(Range.open(-5, -2)));
233     assertTrue(rangeSet.intersects(Range.closed(1, 8)));
234     assertFalse(rangeSet.intersects(Range.singleton(1)));
235     assertFalse(rangeSet.intersects(Range.greaterThan(5)));
236     assertTrue(rangeSet.encloses(Range.closed(2, 4)));
237     assertTrue(rangeSet.encloses(Range.open(-5, -2)));
238     assertFalse(rangeSet.encloses(Range.closed(1, 8)));
239 <a name="9"></a>    assertFalse(rangeSet.encloses(Range.greaterThan(5)));
240     RangeSet&lt;Integer&gt; expectedComplement =
241         ImmutableRangeSet.&lt;Integer&gt;builder().add(Range.open(0, 2)).add(<font color="#83a33a"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>Range.atLeast(5)).build();
242     assertEquals(expectedComplement, rangeSet.complement());
243   }
244   @SuppressWarnings("DoNotCall")
245   public void testAddUnsupported() {
246     RangeSet&lt;Integer&gt; rangeSet =
247         ImmutableRangeSet.&lt;Integer&gt;builder()</b></font>
248             .add(Range.closed(5, 8))
249             .add(Range.closedOpen(1, 3))
250 <a name="16"></a>            .build();
251     try {
252       rangeSet.add(<font color="#2981b2"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>Range.open(3, 4));
253       fail();
254     } catch (UnsupportedOperationException expected) {
255     }
256   }
257   @SuppressWarnings("Do</b></font>NotCall")
258   public void testAddAllUnsupported() {
259     RangeSet&lt;Integer&gt; rangeSet =
260         ImmutableRangeSet.&lt;Integer&gt;builder()
261             .add(Range.closed(5, 8))
262             .add(Range.closedOpen(1, 3))
263 <a name="15"></a>            .build();
264     try {
265       rangeSet.addAll(<font color="#f52887"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>ImmutableRangeSet.&lt;Integer&gt;of());
266       fail();
267     } catch (UnsupportedOperationException expected) {
268     }
269   }
270   @SuppressWarnings("Do</b></font>NotCall")
271   public void testRemoveUnsupported() {
272     RangeSet&lt;Integer&gt; rangeSet =
273         ImmutableRangeSet.&lt;Integer&gt;builder()
274             .add(Range.closed(5, 8))
275             .add(Range.closedOpen(1, 3))
276 <a name="14"></a>            .build();
277     try {
278       rangeSet.remove(<font color="#842dce"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>Range.closed(6, 7));
279       fail();
280     } catch (UnsupportedOperationException expected) {
281     }
282   }
283   @SuppressWarnings("DoNot</b></font>Call")
284   public void testRemoveAllUnsupported() {
285     RangeSet&lt;Integer&gt; rangeSet =
286         ImmutableRangeSet.&lt;Integer&gt;builder()
287             .add(Range.closed(5, 8))
288             .add(Range.closedOpen(1, 3))
289 <a name="8"></a>            .build();
290     try {
291       rangeSet.removeAll(<font color="#c58917"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>ImmutableRangeSet.&lt;Integer&gt;of());
292       fail();
293     } catch (UnsupportedOperationException expected) {
294 <a name="13"></a>    }
295     try {
296       rangeSet.removeAll(ImmutableRangeSet.of</b></font>(<font color="#3b9c9c"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>Range.closed(6, 8)));
297       fail();
298     } catch (UnsupportedOperationException expected) {
299     }
300   }
301   @AndroidIncomp</b></font>atible   public void testExhaustive() {
302     @SuppressWarnings("unchecked")
303     ImmutableSet&lt;Range&lt;Integer&gt;&gt; ranges =
304         ImmutableSet.of(
305             Range.&lt;Integer&gt;all(),
306             Range.&lt;Integer&gt;closedOpen(3, 5),
307             Range.singleton(1),
308             Range.lessThan(2),
309             Range.greaterThan(10),
310             Range.atMost(4),
311             Range.atLeast(3),
312             Range.closed(4, 6),
313             Range.closedOpen(1, 3),
314             Range.openClosed(5, 7),
315             Range.open(3, 4));
316     subsets:
317     for (Set&lt;Range&lt;Integer&gt;&gt; subset : Sets.powerSet(ranges)) {
318       assertEquals(TreeRangeSet.create(subset), ImmutableRangeSet.unionOf(subset));
319       RangeSet&lt;Integer&gt; mutable = TreeRangeSet.create();
320       ImmutableRangeSet.Builder&lt;Integer&gt; builder = ImmutableRangeSet.builder();
321       boolean anyOverlaps = false;
322       for (Range&lt;Integer&gt; range : subset) {
323         boolean overlaps = false;
324         for (Range&lt;Integer&gt; other : mutable.asRanges()) {
325           if (other.isConnected(range) &amp;&amp; !other.intersection(range).isEmpty()) {
326             overlaps = true;
327             anyOverlaps = true;
328             break;
329           }
330         }
331         try {
332           ImmutableRangeSet&lt;Integer&gt; unused = builder.add(range).build();
333           assertFalse(overlaps);
334           mutable.add(range);
335         } catch (IllegalArgumentException e) {
336           assertTrue(overlaps);
337           continue subsets;
338         }
339       }
340 <a name="22"></a>
341       if (anyOverlaps) {
342         try {
343           RangeSet&lt;Integer&gt; copy = <font color="#4cc417"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>ImmutableRangeSet.copyOf(subset);
344           fail();
345         } catch (IllegalArgumentException expected) {
346         }
347       }</b></font> else {
348         RangeSet&lt;Integer&gt; copy = ImmutableRangeSet.copyOf(subset);
349         assertEquals(mutable, copy);
350       }
351       ImmutableRangeSet&lt;Integer&gt; built = builder.build();
352       assertEquals(mutable, built);
353       assertEquals(ImmutableRangeSet.copyOf(mutable), built);
354       assertEquals(mutable.complement(), built.complement());
355       for (int i = 0; i &lt;= 11; i++) {
356         assertEquals(mutable.contains(i), built.contains(i));
357       }
358       SerializableTester.reserializeAndAssert(built);
359       SerializableTester.reserializeAndAssert(built.asRanges());
360     }
361   }
362   private static final ImmutableRangeSet&lt;Integer&gt; RANGE_SET_ONE =
363       ImmutableRangeSet.&lt;Integer&gt;builder()
364           .add(Range.closed(2, 4))
365           .add(Range.open(6, 7))
366           .add(Range.closedOpen(8, 10))
367           .add(Range.openClosed(15, 17))
368           .build();
369   private static final ImmutableRangeSet&lt;Integer&gt; RANGE_SET_TWO =
370       ImmutableRangeSet.&lt;Integer&gt;builder()
371           .add(Range.openClosed(0, 3))
372           .add(Range.closed(5, 8))
373           .add(Range.closedOpen(12, 15))
374           .add(Range.open(19, 20))
375           .build();
376   public void testUnion() {
377     RangeSet&lt;Integer&gt; expected =
378         ImmutableRangeSet.&lt;Integer&gt;builder()
379             .add(Range.openClosed(0, 4))
380             .add(Range.closedOpen(5, 10))
381             .add(Range.closedOpen(12, 15))
382             .add(Range.openClosed(15, 17))
383 <a name="12"></a>            .add(Range.open(19, 20))
384             .build();
385     <font color="#571b7e"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>assertThat(RANGE_SET_ONE.union(RANGE_SET_TWO)).isEqualTo(expected);
386   }
387   public void testIntersection() {
388     RangeSet&lt;Integer&gt; expected =
389         ImmutableRangeSet.&lt;Integer&gt;builder()</b></font>
390             .add(Range.closed(2, 3))
391             .add(Range.open(6, 7))
392 <a name="11"></a>            .add(Range.singleton(8))
393             .build();
394     <font color="#b041ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>assertThat(RANGE_SET_ONE.intersection(RANGE_SET_TWO)).isEqualTo(expected);
395   }
396 <a name="4"></a>
397   public void testDifference() {
398     RangeSet&lt;Integer&gt; expected =
399         <font color="#6cc417"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>ImmutableRangeSet.&lt;Integer&gt;builder()</b></font>
400             .add(Range.openClosed(3, 4))
401             .add(Range.open(8, 10))
402             .add(Range.openClosed(15, 17))
403             .build();
404     assertThat(RANGE_SET_ONE.difference(RANGE_SET_TWO)).isEqualTo(expected);
405   }
406   public void testAsSet() {
407 <a name="5"></a>    ImmutableSortedSet&lt;Integer&gt; expectedSet = ImmutableSortedSet.of(2, 3, 4, 8, 9, 16, 17);
408     ImmutableSortedSet&lt;Integer&gt; asSet = RANGE_SET_ONE.asSet</b></font>(DiscreteDomain.integers());
409     assertEquals(expectedSet, asSet);
410     <font color="#151b8d"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>assertThat(asSet).containsExactlyElementsIn(expectedSet).inOrder();
411     assertTrue(asSet.containsAll(expectedSet));
412     SerializableTester.reserializeAndAssert(asSet);
413   }
414   public void testAsSetHeadSet() {
415     ImmutableSortedSet&lt;Integer&gt; expectedSet = ImmutableSortedSet.of(2, 3, 4, 8, 9, 16, 17);
416 <a name="21"></a>    ImmutableSortedSet&lt;Integer&gt; asSet = RANGE_SET_ONE.asSet(DiscreteDomain.integers</b></font>());
417     for (int i = 0; i &lt;= 20; i++) {
418       <font color="#947010"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>assertEquals(asSet.headSet(i, false), expectedSet.headSet(i, false));
419       assertEquals(asSet.headSet(i, true), expectedSet.headSet(i, true));
420     }
421   }</b></font>
422   public void testAsSetTailSet() {
423     ImmutableSortedSet&lt;Integer&gt; expectedSet = ImmutableSortedSet.of(2, 3, 4, 8, 9, 16, 17);
424     ImmutableSortedSet&lt;Integer&gt; asSet = RANGE_SET_ONE.asSet(DiscreteDomain.integers());
425     for (int i = 0; i &lt;= 20; i++) {
426 <a name="20"></a>      assertEquals(asSet.tailSet(i, false), expectedSet.tailSet(i, false));
427       assertEquals(asSet.tailSet(i, true), expectedSet.tailSet(i, true));
428     }
429   <font color="#4e9258"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>}
430   public void testAsSetSubSet() {
431     ImmutableSortedSet&lt;Integer&gt; expectedSet = ImmutableSortedSet.of(2, 3, 4, 8, 9, 16, 17);
432 <a name="7"></a>    ImmutableSortedSet&lt;Integer&gt; asSet = RANGE_SET_ONE.asSet(DiscreteDomain.integers</b></font>());
433     for (int i = 0; i &lt;= 20; i++) {
434       for (<font color="#38a4a5"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>int j = i + 1; j &lt;= 20; j++) {
435         assertEquals(expectedSet.subSet(i, false, j, false), asSet.subSet(i, false, j, false));
436         assertEquals(expectedSet.subSet(i, true, j, false), asSet.subSet(i, true, j, false));
437         assertEquals(expectedSet.subSet(i, false, j, true), asSet.subSet(i, false, j, true));
438         assertEquals</b></font>(expectedSet.subSet(i, true, j, true), asSet.subSet(i, true, j, true));
439       }
440     }
441   }
442   public void testSubRangeSet() {
443     ImmutableList.Builder&lt;Range&lt;Integer&gt;&gt; rangesBuilder = ImmutableList.builder();
444     rangesBuilder.add(Range.&lt;Integer&gt;all());
445     for (int i = -2; i &lt;= 2; i++) {
446       for (BoundType boundType : BoundType.values()) {
447         rangesBuilder.add(Range.upTo(i, boundType));
448         rangesBuilder.add(Range.downTo(i, boundType));
449       }
450       for (int j = i + 1; j &lt;= 2; j++) {
451         for (BoundType lbType : BoundType.values()) {
452           for (BoundType ubType : BoundType.values()) {
453             rangesBuilder.add(Range.range(i, lbType, j, ubType));
454           }
455         }
456       }
457     }
458     ImmutableList&lt;Range&lt;Integer&gt;&gt; ranges = rangesBuilder.build();
459     for (int i = -2; i &lt;= 2; i++) {
460       rangesBuilder.add(Range.closedOpen(i, i));
461       rangesBuilder.add(Range.openClosed(i, i));
462     }
463     ImmutableList&lt;Range&lt;Integer&gt;&gt; subRanges = rangesBuilder.build();
464     for (Range&lt;Integer&gt; range1 : ranges) {
465       for (Range&lt;Integer&gt; range2 : ranges) {
466         if (!range1.isConnected(range2) || range1.intersection(range2).isEmpty()) {
467           ImmutableRangeSet&lt;Integer&gt; rangeSet =
468               ImmutableRangeSet.&lt;Integer&gt;builder().add(range1).add(range2).build();
469           for (Range&lt;Integer&gt; subRange : subRanges) {
470             RangeSet&lt;Integer&gt; expected = TreeRangeSet.create();
471             for (Range&lt;Integer&gt; range : rangeSet.asRanges()) {
472               if (range.isConnected(subRange)) {
473                 expected.add(range.intersection(subRange));
474               }
475             }
476             ImmutableRangeSet&lt;Integer&gt; subRangeSet = rangeSet.subRangeSet(subRange);
477             assertEquals(expected, subRangeSet);
478             assertEquals(expected.asRanges(), subRangeSet.asRanges());
479             if (!expected.isEmpty()) {
480               assertEquals(expected.span(), subRangeSet.span());
481             }
482             for (int i = -3; i &lt;= 3; i++) {
483               assertEquals(expected.contains(i), subRangeSet.contains(i));
484             }
485           }
486 <a name="6"></a>        }
487       }
488     }
489   <font color="#8c8774"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>}
490   public void testToImmutableRangeSet() {
491     Range&lt;Integer&gt; rangeOne = Range.closedOpen(1, 5);
492     Range&lt;Integer&gt; rangeTwo = Range.openClosed(6, 7);
493     ImmutableRangeSet&lt;Integer&gt; ranges =
494         ImmutableRangeSet.copyOf(ImmutableList.of(rangeOne, rangeTwo));
495     CollectorTester.of(ImmutableRangeSet.&lt;Integer&gt;toImmutableRangeSet())</b></font>
496         .expectCollects(ranges, rangeOne, rangeTwo);
497   }
498 }
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>ImmutableListTest.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 package com.google.common.collect;
2 import static com.google.common.collect.Iterables.getOnlyElement;
3 import static com.google.common.collect.Iterables.unmodifiableIterable;
4 import static com.google.common.collect.Sets.newHashSet;
5 import static com.google.common.collect.testing.features.CollectionFeature.ALLOWS_NULL_QUERIES;
6 import static com.google.common.collect.testing.features.CollectionFeature.SERIALIZABLE;
7 import static java.lang.reflect.Proxy.newProxyInstance;
8 import static java.util.Arrays.asList;
9 import com.google.common.annotations.GwtCompatible;
10 import com.google.common.annotations.GwtIncompatible;
11 import com.google.common.collect.testing.Helpers;
12 import com.google.common.collect.testing.ListTestSuiteBuilder;
13 import com.google.common.collect.testing.MinimalCollection;
14 import com.google.common.collect.testing.MinimalIterable;
15 import com.google.common.collect.testing.features.CollectionSize;
16 import com.google.common.collect.testing.google.ListGenerators.BuilderAddAllListGenerator;
17 import com.google.common.collect.testing.google.ListGenerators.BuilderReversedListGenerator;
18 import com.google.common.collect.testing.google.ListGenerators.ImmutableListHeadSubListGenerator;
19 import com.google.common.collect.testing.google.ListGenerators.ImmutableListMiddleSubListGenerator;
20 import com.google.common.collect.testing.google.ListGenerators.ImmutableListOfGenerator;
21 import com.google.common.collect.testing.google.ListGenerators.ImmutableListTailSubListGenerator;
22 import com.google.common.collect.testing.google.ListGenerators.UnhashableElementsImmutableListGenerator;
23 <a name="3"></a>import com.google.common.collect.testing.testers.ListHashCodeTester;
24 import com.google.common.testing.CollectorTester;
25 import com.google.common.testing.NullPointerTester;
26 <font color="#53858b"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>import com.google.common.testing.SerializableTester;
27 import java.lang.reflect.InvocationHandler;
28 import java.lang.reflect.InvocationTargetException;
29 import java.lang.reflect.Method;
30 import java.util.Arrays;
31 import java.util.Collection;
32 import java.util.Collections;
33 import java.util.Iterator;
34 import java.util.List;
35 import java.util.Set;
36 import java.util.concurrent.CopyOnWriteArrayList;
37 import junit.framework.Test;
38 import junit.framework.TestCase;
39 import junit.framework.TestSuite;
40 @</b></font>GwtCompatible(emulated = true)
41 public class ImmutableListTest extends TestCase {
42 <a name="10"></a>  @GwtIncompatible   public static Test suite() {
43     TestSuite suite = new TestSuite();
44     <font color="#ad5910"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>suite.addTest(
45         ListTestSuiteBuilder.using(new ImmutableListOfGenerator())
46             .named("ImmutableList")
47             .withFeatures(CollectionSize.ANY, SERIALIZABLE, ALLOWS_NULL_QUERIES)
48             .createTestSuite());
49     suite.addTest(
50         ListTestSuiteBuilder.using(new</b></font> BuilderAddAllListGenerator())
51             .named("ImmutableList, built with Builder.add")
52             .withFeatures(CollectionSize.ANY, SERIALIZABLE, ALLOWS_NULL_QUERIES)
53             .createTestSuite());
54     suite.addTest(
55         ListTestSuiteBuilder.using(new BuilderAddAllListGenerator())
56             .named("ImmutableList, built with Builder.addAll")
57             .withFeatures(CollectionSize.ANY, SERIALIZABLE, ALLOWS_NULL_QUERIES)
58             .createTestSuite());
59     suite.addTest(
60         ListTestSuiteBuilder.using(new BuilderReversedListGenerator())
61             .named("ImmutableList, reversed")
62             .withFeatures(CollectionSize.ANY, SERIALIZABLE, ALLOWS_NULL_QUERIES)
63             .createTestSuite());
64     suite.addTest(
65         ListTestSuiteBuilder.using(new ImmutableListHeadSubListGenerator())
66             .named("ImmutableList, head subList")
67             .withFeatures(CollectionSize.ANY, SERIALIZABLE, ALLOWS_NULL_QUERIES)
68             .createTestSuite());
69     suite.addTest(
70         ListTestSuiteBuilder.using(new ImmutableListTailSubListGenerator())
71             .named("ImmutableList, tail subList")
72             .withFeatures(CollectionSize.ANY, SERIALIZABLE, ALLOWS_NULL_QUERIES)
73             .createTestSuite());
74     suite.addTest(
75         ListTestSuiteBuilder.using(new ImmutableListMiddleSubListGenerator())
76             .named("ImmutableList, middle subList")
77             .withFeatures(CollectionSize.ANY, SERIALIZABLE, ALLOWS_NULL_QUERIES)
78             .createTestSuite());
79     suite.addTest(
80         ListTestSuiteBuilder.using(new UnhashableElementsImmutableListGenerator())
81             .suppressing(ListHashCodeTester.getHashCodeMethod())
82             .named("ImmutableList, unhashable values")
83             .withFeatures(CollectionSize.ANY, ALLOWS_NULL_QUERIES)
84             .createTestSuite());
85     return suite;
86   }
87 <a name="17"></a>
88   public static class CreationTests extends TestCase {
89     public void testCreation_noArgs() {
90       List&lt;String&gt; list = <font color="#3090c7"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>ImmutableList.of();
91       assertEquals(Collections.emptyList(), list);
92     }
93     public void testCreation_oneElement() {
94       List&lt;String&gt; list = ImmutableList.of("a");
95       assertEquals(Collections.singletonList</b></font>("a"), list);
96 <a name="12"></a>    }
97     public void testCreation_twoElements() {
98       List&lt;String&gt; list = <font color="#571b7e"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>ImmutableList.of("a", "b");
99       assertEquals(Lists.newArrayList("a", "b"), list);
100     }
101     public void testCreation_threeElements() {
102       List&lt;String&gt; list = ImmutableList.of("a", "b", "c");
103       assertEquals(Lists.newArrayList</b></font>("a", "b", "c"), list);
104 <a name="11"></a>    }
105     public void testCreation_fourElements() {
106       List&lt;String&gt; list = <font color="#b041ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>ImmutableList.of("a", "b", "c", "d");
107       assertEquals(Lists.newArrayList("a", "b", "c", "d"), list);
108     }
109     public void testCreation_fiveElements() {
110       List&lt;String&gt; list = ImmutableList.of("a", "b", "c", "d", "e");
111       assertEquals(Lists.newArrayList</b></font>("a", "b", "c", "d", "e"), list);
112     }
113 <a name="24"></a>
114     public void testCreation_sixElements() {
115       List&lt;String&gt; list = ImmutableList.of("a", "b", "c", "d", "e", "f");
116       assertEquals(<font color="#79764d"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>Lists.newArrayList("a", "b", "c", "d", "e", "f"), list);
117     }
118     public void testCreation_sevenElements() {
119       List&lt;String&gt; list = ImmutableList.of("a", "b", "c", "d", "e", "f", "g");
120       assertEquals(Lists.newArrayList</b></font>("a", "b", "c", "d", "e", "f", "g"), list);
121     }
122     public void testCreation_eightElements() {
123       List&lt;String&gt; list = ImmutableList.of("a", "b", "c", "d", "e", "f", "g", "h");
124       assertEquals(Lists.newArrayList("a", "b", "c", "d", "e", "f", "g", "h"), list);
125     }
126     public void testCreation_nineElements() {
127       List&lt;String&gt; list = ImmutableList.of("a", "b", "c", "d", "e", "f", "g", "h", "i");
128       assertEquals(Lists.newArrayList("a", "b", "c", "d", "e", "f", "g", "h", "i"), list);
129     }
130     public void testCreation_tenElements() {
131       List&lt;String&gt; list = ImmutableList.of("a", "b", "c", "d", "e", "f", "g", "h", "i", "j");
132       assertEquals(Lists.newArrayList("a", "b", "c", "d", "e", "f", "g", "h", "i", "j"), list);
133     }
134     public void testCreation_elevenElements() {
135       List&lt;String&gt; list = ImmutableList.of("a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k");
136       assertEquals(Lists.newArrayList("a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k"), list);
137     }
138     public void testCreation_twelveElements() {
139       List&lt;String&gt; list =
140           ImmutableList.of("a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l");
141       assertEquals(
142           Lists.newArrayList("a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l"), list);
143     }
144     public void testCreation_thirteenElements() {
145       List&lt;String&gt; list =
146           ImmutableList.of("a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m");
147       assertEquals(
148           Lists.newArrayList("a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m"),
149           list);
150     }
151     public void testCreation_fourteenElements() {
152       List&lt;String&gt; list =
153           ImmutableList.of("a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n");
154       assertEquals(
155           Lists.newArrayList("a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n"),
156           list);
157     }
158 <a name="16"></a>
159     public void testCreation_singletonNull() {
160       try {
161         <font color="#2981b2"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>ImmutableList.of((String) null);
162         fail();
163       } catch (NullPointerException expected) {
164       }
165     }
166 <a name="15"></a>
167     public void testCreat</b></font>ion_withNull() {
168       try {
169         <font color="#f52887"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>ImmutableList.of("a", null, "b");
170         fail();
171       } catch (NullPointerException expected) {
172       }
173     }
174     public void testCrea</b></font>tion_generic() {
175       List&lt;String&gt; a = ImmutableList.of("a");
176       ImmutableList&lt;List&lt;String&gt;&gt; unused = ImmutableList.of(a, a);
177     }
178     public void testCreation_arrayOfArray() {
179       String[] array = new String[] {"a"};
180       List&lt;String[]&gt; list = ImmutableList.&lt;String[]&gt;of(array);
181       assertEquals(Collections.singletonList(array), list);
182     }
183     public void testCopyOf_emptyArray() {
184       String[] array = new String[0];
185       List&lt;String&gt; list = ImmutableList.copyOf(array);
186       assertEquals(Collections.emptyList(), list);
187     }
188     public void testCopyOf_arrayOfOneElement() {
189       String[] array = new String[] {"a"};
190       List&lt;String&gt; list = ImmutableList.copyOf(array);
191       assertEquals(Collections.singletonList("a"), list);
192     }
193 <a name="14"></a>
194     public void testCopyOf_nullArray() {
195       try {
196         <font color="#842dce"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>ImmutableList.copyOf((String[]) null);
197         fail();
198       } catch (NullPointerException expected) {
199       }
200     }
201 <a name="13"></a>    public void testCopyOf_arrayContai</b></font>ningOnlyNull() {
202       String[] array = new String[] {null};
203       try {
204         <font color="#3b9c9c"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>ImmutableList.copyOf(array);
205         fail();
206       } catch (NullPointerException expected) {
207       }
208     }
209     public void testCopyOf_coll</b></font>ection_empty() {
210 <a name="20"></a>      Collection&lt;String&gt; c = MinimalCollection.&lt;String&gt;of();
211       List&lt;String&gt; list = ImmutableList.copyOf(c);
212       assertEquals(Collections.emptyList(), list);
213     <font color="#4e9258"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>}
214     public void testCopyOf_collection_oneElement() {
215       Collection&lt;String&gt; c = MinimalCollection.of("a");
216       List&lt;String&gt; list = ImmutableList.copyOf(c);
217       assertEquals</b></font>(Collections.singletonList("a"), list);
218     }
219     public void testCopyOf_collection_general() {
220       Collection&lt;String&gt; c = MinimalCollection.of("a", "b", "a");
221 <a name="23"></a>      List&lt;String&gt; list = ImmutableList.copyOf(c);
222       assertEquals(asList("a", "b", "a"), list);
223       List&lt;String&gt; mutableList = asList("a", "b");
224       list = <font color="#f660ab"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>ImmutableList.copyOf(mutableList);
225       mutableList.set(0, "c");
226       assertEquals(asList("a", "b"), list);
227     }
228 <a name="22"></a>    public void testCopyOf_collectionContainingNull() {
229       Collection&lt;String&gt; c = MinimalCollection.of("a", null, "b")</b></font>;
230       try {
231         <font color="#4cc417"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>ImmutableList.copyOf(c);
232         fail();
233       } catch (NullPointerException expected) {
234       }
235     }</b></font>
236     public void testCopyOf_iterator_empty() {
237       Iterator&lt;String&gt; iterator = Iterators.emptyIterator();
238       List&lt;String&gt; list = ImmutableList.copyOf(iterator);
239       assertEquals(Collections.emptyList(), list);
240     }
241     public void testCopyOf_iterator_oneElement() {
242       Iterator&lt;String&gt; iterator = Iterators.singletonIterator("a");
243       List&lt;String&gt; list = ImmutableList.copyOf(iterator);
244       assertEquals(Collections.singletonList("a"), list);
245     }
246     public void testCopyOf_iterator_general() {
247       Iterator&lt;String&gt; iterator = asList("a", "b", "a").iterator();
248       List&lt;String&gt; list = ImmutableList.copyOf(iterator);
249       assertEquals(asList("a", "b", "a"), list);
250     }
251     public void testCopyOf_iteratorContainingNull() {
252       Iterator&lt;String&gt; iterator = asList("a", null, "b").iterator();
253       try {
254         ImmutableList.copyOf(iterator);
255         fail();
256       } catch (NullPointerException expected) {
257       }
258     }
259     public void testCopyOf_iteratorNull() {
260       try {
261         ImmutableList.copyOf((Iterator&lt;String&gt;) null);
262         fail();
263       } catch (NullPointerException expected) {
264       }
265     }
266     public void testCopyOf_concurrentlyMutating() {
267       List&lt;String&gt; sample = Lists.newArrayList("a", "b", "c");
268 <a name="21"></a>      for (int delta : new int[] {-1, 0, 1}) {
269         for (int i = 0; i &lt; sample.size(); i++) {
270           Collection&lt;String&gt; misleading = Helpers.misleadingSizeCollection(delta);
271           List&lt;String&gt; expected = <font color="#947010"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>sample.subList(0, i);
272           misleading.addAll(expected);
273           assertEquals(expected, ImmutableList.copyOf(misleading));
274           assertEquals(expected, ImmutableList.copyOf((Iterable&lt;String&gt;) misleading));
275         }
276       }</b></font>
277     }
278     private static class CountingIterable implements Iterable&lt;String&gt; {
279       int count = 0;
280 <a name="25"></a>      @Override
281       public Iterator&lt;String&gt; iterator() {
282         count++;
283         return <font color="#5eac10"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>asList("a", "b", "a").iterator();
284       }
285     }
286     public void testCopyOf_plainIterable() {
287       CountingIterable iterable = new</b></font> CountingIterable();
288       List&lt;String&gt; list = ImmutableList.copyOf(iterable);
289       assertEquals(asList("a", "b", "a"), list);
290     }
291     public void testCopyOf_plainIterable_iteratesOnce() {
292       CountingIterable iterable = new CountingIterable();
293       ImmutableList&lt;String&gt; unused = ImmutableList.copyOf(iterable);
294       assertEquals(1, iterable.count);
295     }
296     public void testCopyOf_shortcut_empty() {
297       Collection&lt;String&gt; c = ImmutableList.of();
298       assertSame(c, ImmutableList.copyOf(c));
299     }
300     public void testCopyOf_shortcut_singleton() {
301       Collection&lt;String&gt; c = ImmutableList.of("a");
302       assertSame(c, ImmutableList.copyOf(c));
303     }
304     public void testCopyOf_shortcut_immutableList() {
305       Collection&lt;String&gt; c = ImmutableList.of("a", "b", "c");
306       assertSame(c, ImmutableList.copyOf(c));
307     }
308     public void testBuilderAddArrayHandlesNulls() {
309       String[] elements = {"a", null, "b"};
310       ImmutableList.Builder&lt;String&gt; builder = ImmutableList.builder();
311       try {
312         builder.add(elements);
313         fail("Expected NullPointerException");
314       } catch (NullPointerException expected) {
315       }
316       ImmutableList&lt;String&gt; result = builder.build();
317 <a name="19"></a>      if (result.isEmpty()) {
318         return;
319       }
320       <font color="#f62817"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>assertTrue(ImmutableList.of("a").equals(result));
321       assertEquals(1, result.size());
322     }
323     public void testBuilderAddCollectionHandlesNulls() {
324       List&lt;String&gt; elements = Arrays.asList</b></font>("a", null, "b");
325       ImmutableList.Builder&lt;String&gt; builder = ImmutableList.builder();
326       try {
327         builder.addAll(elements);
328 <a name="5"></a>        fail("Expected NullPointerException");
329       } catch (NullPointerException expected) {
330       }
331       ImmutableList&lt;String&gt; result = <font color="#151b8d"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>builder.build();
332       assertEquals(ImmutableList.of("a"), result);
333       assertEquals(1, result.size());
334     }
335     public void testSortedCopyOf_natural() {
336       Collection&lt;Integer&gt; c = MinimalCollection.of(4, 16, 10, -1, 5);
337       ImmutableList&lt;Integer&gt; list = ImmutableList.sortedCopyOf(c);
338       assertEquals</b></font>(asList(-1, 4, 5, 10, 16), list);
339     }
340     public void testSortedCopyOf_natural_empty() {
341       Collection&lt;Integer&gt; c = MinimalCollection.of();
342       ImmutableList&lt;Integer&gt; list = ImmutableList.sortedCopyOf(c);
343       assertEquals(asList(), list);
344     }
345     public void testSortedCopyOf_natural_singleton() {
346       Collection&lt;Integer&gt; c = MinimalCollection.of(100);
347       ImmutableList&lt;Integer&gt; list = ImmutableList.sortedCopyOf(c);
348       assertEquals(asList(100), list);
349     }
350     public void testSortedCopyOf_natural_containsNull() {
351       Collection&lt;Integer&gt; c = MinimalCollection.of(1, 3, null, 2);
352       try {
353         ImmutableList.sortedCopyOf(c);
354         fail("Expected NPE");
355       } catch (NullPointerException expected) {
356       }
357     }
358     public void testSortedCopyOf() {
359       Collection&lt;String&gt; c = MinimalCollection.of("a", "b", "A", "c");
360       List&lt;String&gt; list = ImmutableList.sortedCopyOf(String.CASE_INSENSITIVE_ORDER, c);
361       assertEquals(asList("a", "A", "b", "c"), list);
362     }
363     public void testSortedCopyOf_empty() {
364       Collection&lt;String&gt; c = MinimalCollection.of();
365       List&lt;String&gt; list = ImmutableList.sortedCopyOf(String.CASE_INSENSITIVE_ORDER, c);
366       assertEquals(asList(), list);
367     }
368     public void testSortedCopyOf_singleton() {
369       Collection&lt;String&gt; c = MinimalCollection.of("a");
370       List&lt;String&gt; list = ImmutableList.sortedCopyOf(String.CASE_INSENSITIVE_ORDER, c);
371       assertEquals(asList("a"), list);
372     }
373     public void testSortedCopyOf_containsNull() {
374       Collection&lt;String&gt; c = MinimalCollection.of("a", "b", "A", null, "c");
375       try {
376         ImmutableList.sortedCopyOf(String.CASE_INSENSITIVE_ORDER, c);
377         fail("Expected NPE");
378       } catch (NullPointerException expected) {
379       }
380     }
381     public void testToImmutableList() {
382       CollectorTester.of(ImmutableList.&lt;String&gt;toImmutableList())
383           .expectCollects(ImmutableList.of("a", "b", "c", "d"), "a", "b", "c", "d");
384     }
385   }
386   @GwtIncompatible   public static class ConcurrentTests extends TestCase {
387     enum WrapWithIterable {
388       WRAP,
389       NO_WRAP
390     }
391     private static void runConcurrentlyMutatedTest(
392         Collection&lt;Integer&gt; initialContents,
393         Iterable&lt;ListFrobber&gt; actionsToPerformConcurrently,
394         WrapWithIterable wrap) {
395       ConcurrentlyMutatedList&lt;Integer&gt; concurrentlyMutatedList =
396           newConcurrentlyMutatedList(initialContents, actionsToPerformConcurrently);
397       Iterable&lt;Integer&gt; iterableToCopy =
398           wrap == WrapWithIterable.WRAP
399               ? unmodifiableIterable(concurrentlyMutatedList)
400               : concurrentlyMutatedList;
401       ImmutableList&lt;Integer&gt; copyOfIterable = ImmutableList.copyOf(iterableToCopy);
402 <a name="7"></a>      assertTrue(concurrentlyMutatedList.getAllStates().contains(copyOfIterable));
403     }
404     private static void runConcurrentlyMutatedTest(<font color="#38a4a5"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>WrapWithIterable wrap) {
405       runConcurrentlyMutatedTest(elements(), ops(add(1), add(2)), wrap);
406 <a name="0"></a>
407       runConcurrentlyMutatedTest(elements(), ops(add(1), nop</b></font>()), wrap);
408       <font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>runConcurrentlyMutatedTest(elements(), ops(add(1), remove()), wrap);
409       runConcurrentlyMutatedTest(elements(), ops(nop(), add(1)), wrap);
410       runConcurrentlyMutatedTest(elements(1), ops(remove(), nop()), wrap);
411       runConcurrentlyMutatedTest(elements(1), ops(remove(), add(2)), wrap);
412       runConcurrentlyMutatedTest(elements(1, 2), ops(remove(), remove()), wrap);
413       runConcurrentlyMutatedTest(elements(1, 2), ops(remove(), nop()), wrap);
414       runConcurrentlyMutatedTest(elements(1, 2), ops(remove(), add(3)), wrap);
415       runConcurrentlyMutatedTest(elements(1, 2), ops(nop(), remove()), wrap);
416       runConcurrentlyMutatedTest(elements(1, 2, 3), ops(remove(), remove()), wrap);
417     }
418     private </b></font>static ImmutableList&lt;Integer&gt; elements(Integer... elements) {
419       return ImmutableList.copyOf(elements);
420     }
421     private static ImmutableList&lt;ListFrobber&gt; ops(ListFrobber... elements) {
422       return ImmutableList.copyOf(elements);
423     }
424     public void testCopyOf_concurrentlyMutatedList() {
425       runConcurrentlyMutatedTest(WrapWithIterable.NO_WRAP);
426     }
427     public void testCopyOf_concurrentlyMutatedIterable() {
428       runConcurrentlyMutatedTest(WrapWithIterable.WRAP);
429     }
430     interface ListFrobber {
431       void perform(List&lt;Integer&gt; list);
432     }
433     static ListFrobber add(final int element) {
434       return new ListFrobber() {
435         @Override
436         public void perform(List&lt;Integer&gt; list) {
437           list.add(0, element);
438         }
439       };
440     }
441     static ListFrobber remove() {
442       return new ListFrobber() {
443         @Override
444         public void perform(List&lt;Integer&gt; list) {
445           list.remove(0);
446         }
447       };
448     }
449     static ListFrobber nop() {
450       return new ListFrobber() {
451         @Override
452         public void perform(List&lt;Integer&gt; list) {}
453       };
454     }
455     interface ConcurrentlyMutatedList&lt;E&gt; extends List&lt;E&gt; {
456       Set&lt;List&lt;E&gt;&gt; getAllStates();
457     }
458     private static ConcurrentlyMutatedList&lt;Integer&gt; newConcurrentlyMutatedList(
459         final Collection&lt;Integer&gt; initialContents,
460         final Iterable&lt;ListFrobber&gt; actionsToPerformConcurrently) {
461       InvocationHandler invocationHandler =
462           new InvocationHandler() {
463             final CopyOnWriteArrayList&lt;Integer&gt; delegate =
464                 new CopyOnWriteArrayList&lt;&gt;(initialContents);
465             final Method getAllStatesMethod =
466                 getOnlyElement(asList(ConcurrentlyMutatedList.class.getDeclaredMethods()));
467             final Iterator&lt;ListFrobber&gt; remainingActions = actionsToPerformConcurrently.iterator();
468             final Set&lt;List&lt;Integer&gt;&gt; allStates = newHashSet();
469             @Override
470             public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
471               return method.equals(getAllStatesMethod)
472                   ? getAllStates()
473                   : invokeListMethod(method, args);
474             }
475             private Set&lt;List&lt;Integer&gt;&gt; getAllStates() {
476               return allStates;
477             }
478             private Object invokeListMethod(Method method, Object[] args) throws Throwable {
479               try {
480                 Object returnValue = method.invoke(delegate, args);
481                 mutateDelegate();
482                 return returnValue;
483               } catch (InvocationTargetException e) {
484                 throw e.getCause();
485               } catch (IllegalAccessException e) {
486                 throw new AssertionError(e);
487               }
488             }
489             private void mutateDelegate() {
490               allStates.add(ImmutableList.copyOf(delegate));
491               remainingActions.next().perform(delegate);
492               allStates.add(ImmutableList.copyOf(delegate));
493             }
494           };
495       @SuppressWarnings("unchecked")
496       ConcurrentlyMutatedList&lt;Integer&gt; list =
497           (ConcurrentlyMutatedList&lt;Integer&gt;)
498               newProxyInstance(
499                   ImmutableListTest.CreationTests.class.getClassLoader(),
500                   new Class[] {ConcurrentlyMutatedList.class},
501                   invocationHandler);
502       return list;
503     }
504   }
505   public static class BasicTests extends TestCase {
506 <a name="9"></a>    @GwtIncompatible     public void testNullPointers() {
507       NullPointerTester tester = new NullPointerTester();
508       <font color="#83a33a"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>tester.testAllPublicStaticMethods(ImmutableList.class);
509       tester.testAllPublicInstanceMethods(ImmutableList.of(1, 2, 3));
510     }
511     @GwtIncompatible     public void testSerialization_empty() {
512       Collection&lt;String&gt; c = ImmutableList.of();
513       assertSame(c, SerializableTester.reserialize</b></font>(c));
514     }
515     @GwtIncompatible     public void testSerialization_singleton() {
516       Collection&lt;String&gt; c = ImmutableList.of("a");
517       SerializableTester.reserializeAndAssert(c);
518     }
519     @GwtIncompatible     public void testSerialization_multiple() {
520       Collection&lt;String&gt; c = ImmutableList.of("a", "b", "c");
521       SerializableTester.reserializeAndAssert(c);
522 <a name="1"></a>    }
523     public void testEquals_immutableList() {
524       Collection&lt;String&gt; c = <font color="#f63526"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>ImmutableList.of("a", "b", "c");
525       assertTrue(c.equals(ImmutableList.of("a", "b", "c")));
526       assertFalse(c.equals(ImmutableList.of("a", "c", "b")));
527       assertFalse(c.equals(ImmutableList.of("a", "b")));
528       assertFalse(c.equals(ImmutableList.of("a", "b", "c", "d")));
529     }
530     public void testBuilderAdd() {
531       ImmutableList&lt;String&gt; list =
532           new ImmutableList.Builder&lt;String&gt;().add</b></font>("a").add("b").add("a").add("c").build();
533       assertEquals(asList("a", "b", "a", "c"), list);
534     }
535     @GwtIncompatible("Builder impl")
536     public void testBuilderForceCopy() {
537       ImmutableList.Builder&lt;Integer&gt; builder = ImmutableList.builder();
538       Object[] prevArray = null;
539       for (int i = 0; i &lt; 10; i++) {
540         builder.add(i);
541         assertNotSame(builder.contents, prevArray);
542         prevArray = builder.contents;
543         ImmutableList&lt;Integer&gt; unused = builder.build();
544       }
545     }
546     @GwtIncompatible
547     public void testBuilderExactlySizedReusesArray() {
548       ImmutableList.Builder&lt;Integer&gt; builder = ImmutableList.builderWithExpectedSize(10);
549       Object[] builderArray = builder.contents;
550       for (int i = 0; i &lt; 10; i++) {
551         builder.add(i);
552       }
553       Object[] builderArrayAfterAdds = builder.contents;
554       RegularImmutableList&lt;Integer&gt; list = (RegularImmutableList&lt;Integer&gt;) builder.build();
555       Object[] listInternalArray = list.array;
556       assertSame(builderArray, builderArrayAfterAdds);
557       assertSame(builderArray, listInternalArray);
558     }
559     public void testBuilderAdd_varargs() {
560 <a name="6"></a>      ImmutableList&lt;String&gt; list =
561           new ImmutableList.Builder&lt;String&gt;().add("a", "b", "a", "c").build();
562       assertEquals(asList("a", "b", "a", "c"), list);
563     <font color="#8c8774"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>}
564     public void testBuilderAddAll_iterable() {
565 <a name="18"></a>      List&lt;String&gt; a = asList("a", "b");
566       List&lt;String&gt; b = asList("c", "d");
567       ImmutableList&lt;String&gt; list = new ImmutableList.Builder&lt;String&gt;().addAll</b></font>(a).addAll(b).build();
568       <font color="#800517"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>assertEquals(asList("a", "b", "c", "d"), list);
569       b.set(0, "f");
570       assertEquals(asList("a", "b", "c", "d"), list);
571     }
572     public void testBuilderAddAll_iterator() {
573 <a name="4"></a>      List&lt;String&gt; a = asList</b></font>("a", "b");
574       List&lt;String&gt; b = asList("c", "d");
575       ImmutableList&lt;String&gt; list =
576           new ImmutableList.Builder&lt;String&gt;().addAll(<font color="#6cc417"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>a.iterator()).addAll(b.iterator()).build();
577       assertEquals(asList("a", "b", "c", "d"), list);
578       b.set(0, "f");
579       assertEquals(asList("a", "b", "c", "d"), list);
580     }
581     public void testComplexBuilder() {
582       List&lt;Integer&gt; colorElem = asList(0x00, 0x33, 0x66, 0x99, 0xCC, 0xFF);
583       ImmutableList.Builder&lt;Integer&gt; webSafeColorsBuilder = ImmutableList.builder</b></font>();
584       for (Integer red : colorElem) {
585         for (Integer green : colorElem) {
586           for (Integer blue : colorElem) {
587             webSafeColorsBuilder.add((red &lt;&lt; 16) + (green &lt;&lt; 8) + blue);
588           }
589         }
590 <a name="2"></a>      }
591       ImmutableList&lt;Integer&gt; webSafeColors = webSafeColorsBuilder.build();
592       assertEquals(216, webSafeColors.size());
593       Integer[] webSafeColorArray = webSafeColors.toArray(new Integer[<font color="#980517"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>webSafeColors.size()]);
594       assertEquals(0x000000, (int) webSafeColorArray[0]);
595       assertEquals(0x000033, (int) webSafeColorArray[1]);
596       assertEquals(0x000066, (int) webSafeColorArray[2]);
597       assertEquals(0x003300, (int) webSafeColorArray[6]);
598       assertEquals(0x330000, (int) webSafeColorArray[36]);
599       assertEquals(0x000066, (int) webSafeColors.get(2));
600       assertEquals(0x003300, (int) webSafeColors.get(6));
601       ImmutableList&lt;Integer&gt; addedColor = webSafeColorsBuilder.add(0x00BFFF).build();
602       assertEquals(
603           "Modifying the builder should not have changed any already" + " built sets",
604           216,
605           webSafeColors.size());
606       assertEquals("the new array should be one bigger than webSafeColors", 217, addedColor.size</b></font>());
607       Integer[] appendColorArray = addedColor.toArray(new Integer[addedColor.size()]);
608       assertEquals(0x00BFFF, (int) appendColorArray[216]);
609     }
610 <a name="8"></a>    public void testBuilderAddHandlesNullsCorrectly() {
611       ImmutableList.Builder&lt;String&gt; builder = ImmutableList.builder();
612       try {
613         <font color="#c58917"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>builder.add((String) null);
614         fail("expected NullPointerException");
615       } catch (NullPointerException expected) {
616       }
617       try {
618         builder.add((String[]) null);
619         fail</b></font>("expected NullPointerException");
620       } catch (NullPointerException expected) {
621       }
622       try {
623         builder.add("a", null, "b");
624         fail("expected NullPointerException");
625       } catch (NullPointerException expected) {
626       }
627     }
628     public void testBuilderAddAllHandlesNullsCorrectly() {
629       ImmutableList.Builder&lt;String&gt; builder = ImmutableList.builder();
630       try {
631         builder.addAll((Iterable&lt;String&gt;) null);
632         fail("expected NullPointerException");
633       } catch (NullPointerException expected) {
634       }
635       try {
636         builder.addAll((Iterator&lt;String&gt;) null);
637         fail("expected NullPointerException");
638       } catch (NullPointerException expected) {
639       }
640       builder = ImmutableList.builder();
641       List&lt;String&gt; listWithNulls = asList("a", null, "b");
642       try {
643         builder.addAll(listWithNulls);
644         fail("expected NullPointerException");
645       } catch (NullPointerException expected) {
646       }
647       builder = ImmutableList.builder();
648       Iterator&lt;String&gt; iteratorWithNulls = asList("a", null, "b").iterator();
649       try {
650         builder.addAll(iteratorWithNulls);
651         fail("expected NullPointerException");
652       } catch (NullPointerException expected) {
653       }
654       Iterable&lt;String&gt; iterableWithNulls = MinimalIterable.of("a", null, "b");
655       try {
656         builder.addAll(iterableWithNulls);
657         fail("expected NullPointerException");
658       } catch (NullPointerException expected) {
659       }
660     }
661     public void testAsList() {
662       ImmutableList&lt;String&gt; list = ImmutableList.of("a", "b");
663       assertSame(list, list.asList());
664     }
665   }
666 }
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
