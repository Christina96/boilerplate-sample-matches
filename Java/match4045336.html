<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for CSVLineParser.java &amp; CollectionUtils.java</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for CSVLineParser.java &amp; CollectionUtils.java
      </h3>
<h1 align="center">
        4.1%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>CSVLineParser.java (5.263158%)<th>CollectionUtils.java (3.3898306%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(22-34)<td><a href="#" name="0">(20-31)</a><td align="center"><font color="#ff0000">10</font>
</td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>CSVLineParser.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 <font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>package io.crate.operation.collect.files;
2 import com.fasterxml.jackson.databind.MappingIterator;
3 import com.fasterxml.jackson.databind.ObjectReader;
4 import com.fasterxml.jackson.dataformat.csv.CsvMapper;
5 import com.fasterxml.jackson.dataformat.csv.CsvParser;
6 import io.crate.analyze.CopyFromParserProperties;
7 import org.elasticsearch.common.xcontent.XContentBuilder;
8 import org.elasticsearch.common.xcontent.json.JsonXContent;
9 import java.io.ByteArrayOutputStream;
10 import</b></font> java.io.IOException;
11 import java.nio.charset.StandardCharsets;
12 import java.util.ArrayList;
13 import java.util.HashSet;
14 import java.util.List;
15 import java.util.Locale;
16 public class CSVLineParser {
17     private final ByteArrayOutputStream out = new ByteArrayOutputStream();
18     private final ArrayList&lt;String&gt; headerKeyList = new ArrayList&lt;&gt;();
19     private String[] columnNamesArray;
20     private final List&lt;String&gt; targetColumns;
21     private final ObjectReader csvReader;
22     public CSVLineParser(CopyFromParserProperties properties, List&lt;String&gt; columns) {
23         targetColumns = columns;
24         if (!properties.fileHeader()) {
25             columnNamesArray = new String[targetColumns.size()];
26             for (int i = 0; i &lt; targetColumns.size(); i++) {
27                 columnNamesArray[i] = targetColumns.get(i);
28             }
29         }
30         var mapper = new CsvMapper()
31             .enable(CsvParser.Feature.TRIM_SPACES);
32         if (properties.emptyStringAsNull()) {
33             mapper.enable(CsvParser.Feature.EMPTY_STRING_AS_NULL);
34         }
35         var csvSchema = mapper
36             .typedSchemaFor(String.class)
37             .withColumnSeparator(properties.columnSeparator());
38         csvReader = mapper
39             .readerWithTypedSchemaFor(String.class)
40             .with(csvSchema);
41     }
42     public void parseHeader(String header) throws IOException {
43         MappingIterator&lt;String&gt; iterator = csvReader.readValues(header.getBytes(StandardCharsets.UTF_8));
44         iterator.readAll(headerKeyList);
45         columnNamesArray = new String[headerKeyList.size()];
46         for (int i = 0; i &lt; headerKeyList.size(); i++) {
47             String headerKey = headerKeyList.get(i);
48             if (targetColumns.isEmpty() || targetColumns.contains(headerKey)) {
49                 columnNamesArray[i] = headerKey;
50             }
51         }
52         HashSet&lt;String&gt; keySet = new HashSet&lt;&gt;(headerKeyList);
53         keySet.remove("");
54         if (keySet.size() != headerKeyList.size() || keySet.size() == 0) {
55             throw new IllegalArgumentException("Invalid header: duplicate entries or no entries present");
56         }
57     }
58     public byte[] parse(String row, long rowNumber) throws IOException {
59         MappingIterator&lt;String&gt; iterator = csvReader.readValues(row.getBytes(StandardCharsets.UTF_8));
60         out.reset();
61         XContentBuilder jsonBuilder = new XContentBuilder(JsonXContent.JSON_XCONTENT, out).startObject();
62         int i = 0, j = 0;
63         while (iterator.hasNext()) {
64             if (i &gt;= headerKeyList.size()) {
65                 throw new IllegalArgumentException(String.format(Locale.ENGLISH, "Number of values exceeds " +
66                                                                 "number of keys in csv file at line %d", rowNumber));
67             }
68             if (columnNamesArray.length == j || i &gt;= columnNamesArray.length) {
69                 break;
70             }
71             var key = columnNamesArray[i];
72             var value = iterator.next();
73             i++;
74             if (key != null) {
75                 jsonBuilder.field(key, value);
76                 j++;
77             }
78         }
79         jsonBuilder.endObject().close();
80         return out.toByteArray();
81     }
82     public byte[] parseWithoutHeader(String row, long rowNumber) throws IOException {
83         MappingIterator&lt;String&gt; iterator = csvReader.readValues(row.getBytes(StandardCharsets.UTF_8));
84         out.reset();
85         XContentBuilder jsonBuilder = new XContentBuilder(JsonXContent.JSON_XCONTENT, out).startObject();
86         int i = 0;
87         while (iterator.hasNext()) {
88             if (i &gt;= columnNamesArray.length) {
89                 break;
90             }
91             var key = columnNamesArray[i];
92             var value = iterator.next();
93             i++;
94             if (key != null) {
95                 jsonBuilder.field(key, value);
96             }
97         }
98         if (columnNamesArray.length &gt; i) {
99             throw new IllegalArgumentException(String.format(Locale.ENGLISH, "Expected %d values, " +
100                                                "encountered %d at line %d. This is not allowed when there " +
101                                                "is no header provided)",columnNamesArray.length, i, rowNumber));
102         }
103         jsonBuilder.endObject().close();
104         return out.toByteArray();
105     }
106 }
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>CollectionUtils.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 <font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>package org.elasticsearch.common.util;
2 import com.carrotsearch.hppc.ObjectArrayList;
3 import org.apache.lucene.util.IntroSorter;
4 import java.util.AbstractList;
5 import java.util.ArrayList;
6 import java.util.Arrays;
7 import java.util.Collection;
8 import java.util.List;
9 import java.util.Objects;
10 import</b></font> java.util.RandomAccess;
11 public class CollectionUtils {
12     public static boolean isEmpty(Object[] array) {
13         return array == null || array.length == 0;
14     }
15     public static &lt;T&gt; List&lt;T&gt; rotate(final List&lt;T&gt; list, int distance) {
16         if (list.isEmpty()) {
17             return list;
18         }
19         int d = distance % list.size();
20         if (d &lt; 0) {
21             d += list.size();
22         }
23         if (d == 0) {
24             return list;
25         }
26         return new RotatedList&lt;&gt;(list, d);
27     }
28     public static void sortAndDedup(final ObjectArrayList&lt;byte[]&gt; array) {
29         int len = array.size();
30         if (len &gt; 1) {
31             sort(array);
32             int uniqueCount = 1;
33             for (int i = 1; i &lt; len; ++i) {
34                 if (!Arrays.equals(array.get(i), array.get(i - 1))) {
35                     array.set(uniqueCount++, array.get(i));
36                 }
37             }
38             array.elementsCount = uniqueCount;
39         }
40     }
41     public static void sort(final ObjectArrayList&lt;byte[]&gt; array) {
42         new IntroSorter() {
43             byte[] pivot;
44             @Override
45             protected void swap(int i, int j) {
46                 final byte[] tmp = array.get(i);
47                 array.set(i, array.get(j));
48                 array.set(j, tmp);
49             }
50             @Override
51             protected int compare(int i, int j) {
52                 return compare(array.get(i), array.get(j));
53             }
54             @Override
55             protected void setPivot(int i) {
56                 pivot = array.get(i);
57             }
58             @Override
59             protected int comparePivot(int j) {
60                 return compare(pivot, array.get(j));
61             }
62             private int compare(byte[] left, byte[] right) {
63                 for (int i = 0, j = 0; i &lt; left.length &amp;&amp; j &lt; right.length; i++, j++) {
64                     int a = left[i] &amp; 0xFF;
65                     int b = right[j] &amp; 0xFF;
66                     if (a != b) {
67                         return a - b;
68                     }
69                 }
70                 return left.length - right.length;
71             }
72         }.sort(0, array.size());
73     }
74     public static int[] toArray(Collection&lt;Integer&gt; ints) {
75         Objects.requireNonNull(ints);
76         return ints.stream().mapToInt(s -&gt; s).toArray();
77     }
78     private static class RotatedList&lt;T&gt; extends AbstractList&lt;T&gt; implements RandomAccess {
79         private final List&lt;T&gt; in;
80         private final int distance;
81         RotatedList(List&lt;T&gt; list, int distance) {
82             if (distance &lt; 0 || distance &gt;= list.size()) {
83                 throw new IllegalArgumentException();
84             }
85             if (!(list instanceof RandomAccess)) {
86                 throw new IllegalArgumentException();
87             }
88             this.in = list;
89             this.distance = distance;
90         }
91         @Override
92         public T get(int index) {
93             int idx = distance + index;
94             if (idx &lt; 0 || idx &gt;= in.size()) {
95                 idx -= in.size();
96             }
97             return in.get(idx);
98         }
99         @Override
100         public int size() {
101             return in.size();
102         }
103     }
104     @SuppressWarnings("unchecked")
105     public static &lt;E&gt; ArrayList&lt;E&gt; iterableAsArrayList(Iterable&lt;? extends E&gt; elements) {
106         if (elements == null) {
107             throw new NullPointerException("elements");
108         }
109         if (elements instanceof Collection) {
110             return new ArrayList&lt;&gt;((Collection) elements);
111         } else {
112             ArrayList&lt;E&gt; list = new ArrayList&lt;&gt;();
113             for (E element : elements) {
114                 list.add(element);
115             }
116             return list;
117         }
118     }
119     @SafeVarargs
120     @SuppressWarnings("varargs")
121     public static &lt;E&gt; ArrayList&lt;E&gt; arrayAsArrayList(E... elements) {
122         if (elements == null) {
123             throw new NullPointerException("elements");
124         }
125         return new ArrayList&lt;&gt;(Arrays.asList(elements));
126     }
127     @SafeVarargs
128     @SuppressWarnings("varargs")
129     public static &lt;E&gt; ArrayList&lt;E&gt; asArrayList(E first, E... other) {
130         if (other == null) {
131             throw new NullPointerException("other");
132         }
133         ArrayList&lt;E&gt; list = new ArrayList&lt;&gt;(1 + other.length);
134         list.add(first);
135         list.addAll(Arrays.asList(other));
136         return list;
137     }
138     @SafeVarargs
139     @SuppressWarnings("varargs")
140     public static &lt;E&gt; ArrayList&lt;E&gt; asArrayList(E first, E second, E... other) {
141         if (other == null) {
142             throw new NullPointerException("other");
143         }
144         ArrayList&lt;E&gt; list = new ArrayList&lt;&gt;(1 + 1 + other.length);
145         list.add(first);
146         list.add(second);
147         list.addAll(Arrays.asList(other));
148         return list;
149     }
150 }
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
