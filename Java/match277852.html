<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for SctpMessageCompletionHandlerTest.java &amp; SpdySessionHandlerTest.java</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for SctpMessageCompletionHandlerTest.java &amp; SpdySessionHandlerTest.java
      </h3>
<h1 align="center">
        12.0%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>SctpMessageCompletionHandlerTest.java (24.025974%)<th>SpdySessionHandlerTest.java (8.043478%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(42-48)<td><a href="#" name="0">(225-237)</a><td align="center"><font color="#ff0000">13</font>
<tr onclick='openModal("#f63526")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f63526"><font color="#f63526">-</font><td><a href="#" name="1">(53-61)<td><a href="#" name="1">(325-333)</a><td align="center"><font color="#eb0000">12</font>
<tr onclick='openModal("#980517")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#980517"><font color="#980517">-</font><td><a href="#" name="2">(16-30)<td><a href="#" name="2">(16-30)</a><td align="center"><font color="#eb0000">12</font>
</td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>SctpMessageCompletionHandlerTest.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 /*
2  * Copyright 2018 The Netty Project
3  *
4  * The Netty Project licenses this file to you under the Apache License,
5  * version 2.0 (the "License"); you may not use this file except in compliance
6  * with the License. You may obtain a copy of the License at:
7  *
8  *   https://www.apache.org/licenses/LICENSE-2.0
9  *
10  * Unless required by applicable law or agreed to in writing, software
11  * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
12  * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
13 <a name="2"></a> * License for the specific language governing permissions and limitations
14  * under the License.
15  */
16 <font color="#980517"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>package io.netty.handler.codec.sctp;
17 import com.sun.nio.sctp.Association;
18 import com.sun.nio.sctp.MessageInfo;
19 import io.netty.buffer.ByteBuf;
20 import io.netty.buffer.Unpooled;
21 import io.netty.channel.embedded.EmbeddedChannel;
22 import io.netty.channel.sctp.SctpMessage;
23 import io.netty.util.SuppressForbidden;
24 import org.junit.jupiter.api.Test;
25 import java.net.SocketAddress;
26 import static org.junit.jupiter.api.Assertions.assertFalse;
27 import</b></font> static org.junit.jupiter.api.Assertions.assertEquals;
28 public class SctpMessageCompletionHandlerTest {
29     @Test
30     public void testFragmentsReleased() {
31         EmbeddedChannel channel = new EmbeddedChannel(new SctpMessageCompletionHandler());
32         ByteBuf buffer = Unpooled.wrappedBuffer(new byte[] { 1, 2, 3, 4 });
33         ByteBuf buffer2 = Unpooled.wrappedBuffer(new byte[] { 1, 2, 3, 4 });
34 <a name="0"></a>        SctpMessage message = new SctpMessage(new TestMessageInfo(false, 1), buffer);
35         assertFalse(channel.writeInbound(message));
36         assertEquals(1, buffer.refCnt());
37         SctpMessage message2 = new SctpMessage(<font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>new TestMessageInfo(false, 2), buffer2);
38         assertFalse(channel.writeInbound(message2));
39         assertEquals(1, buffer2.refCnt());
40         assertFalse(channel.finish());
41         assertEquals(0, buffer.refCnt());
42         assertEquals(0, buffer2.refCnt());
43     }</b></font>
44 <a name="1"></a>    @SuppressForbidden(reason = "test-only")
45     private final class TestMessageInfo extends MessageInfo {
46         <font color="#f63526"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>private final boolean complete;
47         private final int streamNumber;
48         TestMessageInfo(boolean complete, int streamNumber) {
49             this.complete = complete;
50             this.streamNumber = streamNumber;
51         }
52         @</b></font>Override
53         public SocketAddress address() {
54             return null;
55         }
56         @Override
57         public Association association() {
58             return null;
59         }
60         @Override
61         public int bytes() {
62             return 0;
63         }
64         @Override
65         public boolean isComplete() {
66             return complete;
67         }
68         @Override
69         public MessageInfo complete(boolean b) {
70             throw new UnsupportedOperationException();
71         }
72         @Override
73         public boolean isUnordered() {
74             return false;
75         }
76         @Override
77         public MessageInfo unordered(boolean b) {
78             throw new UnsupportedOperationException();
79         }
80         @Override
81         public int payloadProtocolID() {
82             return 0;
83         }
84         @Override
85         public MessageInfo payloadProtocolID(int i) {
86             throw new UnsupportedOperationException();
87         }
88         @Override
89         public int streamNumber() {
90             return streamNumber;
91         }
92         @Override
93         public MessageInfo streamNumber(int i) {
94             throw new UnsupportedOperationException();
95         }
96         @Override
97         public long timeToLive() {
98             return 0;
99         }
100         @Override
101         public MessageInfo timeToLive(long l) {
102             throw new UnsupportedOperationException();
103         }
104     }
105 }
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>SpdySessionHandlerTest.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 /*
2  * Copyright 2013 The Netty Project
3  *
4  * The Netty Project licenses this file to you under the Apache License,
5  * version 2.0 (the "License"); you may not use this file except in compliance
6  * with the License. You may obtain a copy of the License at:
7  *
8  *   https://www.apache.org/licenses/LICENSE-2.0
9  *
10  * Unless required by applicable law or agreed to in writing, software
11  * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
12  * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
13 <a name="2"></a> * License for the specific language governing permissions and limitations
14  * under the License.
15  */
16 <font color="#980517"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>package io.netty.handler.codec.spdy;
17 import io.netty.channel.ChannelHandlerContext;
18 import io.netty.channel.ChannelInboundHandlerAdapter;
19 import io.netty.channel.embedded.EmbeddedChannel;
20 import io.netty.util.internal.logging.InternalLogger;
21 import io.netty.util.internal.logging.InternalLoggerFactory;
22 import org.junit.jupiter.api.Test;
23 import java.util.List;
24 import java.util.Map;
25 import static org.junit.jupiter.api.Assertions.assertEquals;
26 import static org.junit.jupiter.api.Assertions.assertNotNull;
27 import</b></font> static org.junit.jupiter.api.Assertions.assertNull;
28 import static org.junit.jupiter.api.Assertions.assertTrue;
29 public class SpdySessionHandlerTest {
30     private static final InternalLogger logger =
31             InternalLoggerFactory.getInstance(SpdySessionHandlerTest.class);
32     private static final int closeSignal = SpdyCodecUtil.SPDY_SETTINGS_MAX_ID;
33     private static final SpdySettingsFrame closeMessage = new DefaultSpdySettingsFrame();
34     static {
35         closeMessage.setValue(closeSignal, 0);
36     }
37     private static void assertDataFrame(Object msg, int streamId, boolean last) {
38         assertNotNull(msg);
39         assertTrue(msg instanceof SpdyDataFrame);
40         SpdyDataFrame spdyDataFrame = (SpdyDataFrame) msg;
41         assertEquals(streamId, spdyDataFrame.streamId());
42         assertEquals(last, spdyDataFrame.isLast());
43     }
44     private static void assertSynReply(Object msg, int streamId, boolean last, SpdyHeaders headers) {
45         assertNotNull(msg);
46         assertTrue(msg instanceof SpdySynReplyFrame);
47         assertHeaders(msg, streamId, last, headers);
48     }
49     private static void assertRstStream(Object msg, int streamId, SpdyStreamStatus status) {
50         assertNotNull(msg);
51         assertTrue(msg instanceof SpdyRstStreamFrame);
52         SpdyRstStreamFrame spdyRstStreamFrame = (SpdyRstStreamFrame) msg;
53         assertEquals(streamId, spdyRstStreamFrame.streamId());
54         assertEquals(status, spdyRstStreamFrame.status());
55     }
56     private static void assertPing(Object msg, int id) {
57         assertNotNull(msg);
58         assertTrue(msg instanceof SpdyPingFrame);
59         SpdyPingFrame spdyPingFrame = (SpdyPingFrame) msg;
60         assertEquals(id, spdyPingFrame.id());
61     }
62     private static void assertGoAway(Object msg, int lastGoodStreamId) {
63         assertNotNull(msg);
64         assertTrue(msg instanceof SpdyGoAwayFrame);
65         SpdyGoAwayFrame spdyGoAwayFrame = (SpdyGoAwayFrame) msg;
66         assertEquals(lastGoodStreamId, spdyGoAwayFrame.lastGoodStreamId());
67     }
68     private static void assertHeaders(Object msg, int streamId, boolean last, SpdyHeaders headers) {
69         assertNotNull(msg);
70         assertTrue(msg instanceof SpdyHeadersFrame);
71         SpdyHeadersFrame spdyHeadersFrame = (SpdyHeadersFrame) msg;
72         assertEquals(streamId, spdyHeadersFrame.streamId());
73         assertEquals(last, spdyHeadersFrame.isLast());
74         for (CharSequence name: headers.names()) {
75             List&lt;CharSequence&gt; expectedValues = headers.getAll(name);
76             List&lt;CharSequence&gt; receivedValues = spdyHeadersFrame.headers().getAll(name);
77             assertTrue(receivedValues.containsAll(expectedValues));
78             receivedValues.removeAll(expectedValues);
79             assertTrue(receivedValues.isEmpty());
80             spdyHeadersFrame.headers().remove(name);
81         }
82         assertTrue(spdyHeadersFrame.headers().isEmpty());
83     }
84     private static void testSpdySessionHandler(SpdyVersion version, boolean server) {
85         EmbeddedChannel sessionHandler = new EmbeddedChannel(
86                 new SpdySessionHandler(version, server), new EchoHandler(closeSignal, server));
87         while (sessionHandler.readOutbound() != null) {
88             continue;
89         }
90         int localStreamId = server ? 1 : 2;
91         int remoteStreamId = server ? 2 : 1;
92         SpdySynStreamFrame spdySynStreamFrame =
93                 new DefaultSpdySynStreamFrame(localStreamId, 0, (byte) 0);
94         spdySynStreamFrame.headers().set("compression", "test");
95         SpdyDataFrame spdyDataFrame = new DefaultSpdyDataFrame(localStreamId);
96         spdyDataFrame.setLast(true);
97         sessionHandler.writeInbound(new DefaultSpdyDataFrame(localStreamId));
98         assertRstStream(sessionHandler.readOutbound(), localStreamId, SpdyStreamStatus.INVALID_STREAM);
99         assertNull(sessionHandler.readOutbound());
100         sessionHandler.writeInbound(new DefaultSpdyDataFrame(remoteStreamId));
101         assertRstStream(sessionHandler.readOutbound(), remoteStreamId, SpdyStreamStatus.PROTOCOL_ERROR);
102         assertNull(sessionHandler.readOutbound());
103         remoteStreamId += 2;
104         sessionHandler.writeInbound(new DefaultSpdySynReplyFrame(remoteStreamId));
105         assertNull(sessionHandler.readOutbound());
106         sessionHandler.writeInbound(new DefaultSpdySynReplyFrame(remoteStreamId));
107         assertRstStream(sessionHandler.readOutbound(), remoteStreamId, SpdyStreamStatus.STREAM_IN_USE);
108         assertNull(sessionHandler.readOutbound());
109         remoteStreamId += 2;
110         sessionHandler.writeInbound(spdySynStreamFrame);
111         assertSynReply(sessionHandler.readOutbound(), localStreamId, false, spdySynStreamFrame.headers());
112         assertNull(sessionHandler.readOutbound());
113         SpdyHeadersFrame spdyHeadersFrame = new DefaultSpdyHeadersFrame(localStreamId);
114         spdyHeadersFrame.headers().add("header", "test1");
115         spdyHeadersFrame.headers().add("header", "test2");
116         sessionHandler.writeInbound(spdyHeadersFrame);
117         assertHeaders(sessionHandler.readOutbound(), localStreamId, false, spdyHeadersFrame.headers());
118         assertNull(sessionHandler.readOutbound());
119         localStreamId += 2;
120         spdySynStreamFrame.setStreamId(localStreamId);
121         spdySynStreamFrame.setLast(true);
122         spdySynStreamFrame.setUnidirectional(true);
123         sessionHandler.writeInbound(spdySynStreamFrame);
124         assertRstStream(sessionHandler.readOutbound(), localStreamId, SpdyStreamStatus.REFUSED_STREAM);
125         assertNull(sessionHandler.readOutbound());
126         int testStreamId = spdyDataFrame.streamId();
127         sessionHandler.writeInbound(spdyDataFrame);
128         assertDataFrame(sessionHandler.readOutbound(), testStreamId, spdyDataFrame.isLast());
129         assertNull(sessionHandler.readOutbound());
130         spdyHeadersFrame.setStreamId(testStreamId);
131         sessionHandler.writeInbound(spdyHeadersFrame);
132         assertRstStream(sessionHandler.readOutbound(), testStreamId, SpdyStreamStatus.INVALID_STREAM);
133         assertNull(sessionHandler.readOutbound());
134         sessionHandler.writeInbound(new DefaultSpdyRstStreamFrame(remoteStreamId, 3));
135         assertNull(sessionHandler.readOutbound());
136         //remoteStreamId += 2;
137         spdySynStreamFrame.setLast(false);
138         sessionHandler.writeInbound(spdySynStreamFrame);
139         assertNull(sessionHandler.readOutbound());
140         spdySynStreamFrame.setUnidirectional(false);
141         sessionHandler.writeInbound(spdySynStreamFrame);
142         assertRstStream(sessionHandler.readOutbound(), localStreamId, SpdyStreamStatus.PROTOCOL_ERROR);
143         assertNull(sessionHandler.readOutbound());
144         localStreamId += 2;
145         spdySynStreamFrame.setStreamId(localStreamId - 1);
146         sessionHandler.writeInbound(spdySynStreamFrame);
147         assertRstStream(sessionHandler.readOutbound(), localStreamId - 1, SpdyStreamStatus.PROTOCOL_ERROR);
148         assertNull(sessionHandler.readOutbound());
149         spdySynStreamFrame.setStreamId(localStreamId);
150         spdyHeadersFrame.setStreamId(localStreamId);
151         spdyHeadersFrame.setInvalid();
152         sessionHandler.writeInbound(spdyHeadersFrame);
153         assertRstStream(sessionHandler.readOutbound(), localStreamId, SpdyStreamStatus.PROTOCOL_ERROR);
154         assertNull(sessionHandler.readOutbound());
155         sessionHandler.finish();
156     }
157     private static void testSpdySessionHandlerPing(SpdyVersion version, boolean server) {
158         EmbeddedChannel sessionHandler = new EmbeddedChannel(
159                 new SpdySessionHandler(version, server), new EchoHandler(closeSignal, server));
160         while (sessionHandler.readOutbound() != null) {
161             continue;
162         }
163         int localStreamId = server ? 1 : 2;
164 <a name="0"></a>        int remoteStreamId = server ? 2 : 1;
165         SpdyPingFrame localPingFrame = new DefaultSpdyPingFrame(localStreamId);
166         SpdyPingFrame remotePingFrame = <font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>new DefaultSpdyPingFrame(remoteStreamId);
167         sessionHandler.writeInbound(localPingFrame);
168         assertPing(sessionHandler.readOutbound(), localPingFrame.id());
169         assertNull(sessionHandler.readOutbound());
170         sessionHandler.writeInbound(remotePingFrame);
171         assertNull(sessionHandler.readOutbound());
172         sessionHandler.finish();
173     }</b></font>
174     private static void testSpdySessionHandlerGoAway(SpdyVersion version, boolean server) {
175         EmbeddedChannel sessionHandler = new EmbeddedChannel(
176                 new SpdySessionHandler(version, server), new EchoHandler(closeSignal, server));
177         while (sessionHandler.readOutbound() != null) {
178             continue;
179         }
180         int localStreamId = server ? 1 : 2;
181         SpdySynStreamFrame spdySynStreamFrame =
182                 new DefaultSpdySynStreamFrame(localStreamId, 0, (byte) 0);
183         spdySynStreamFrame.headers().set("compression", "test");
184         SpdyDataFrame spdyDataFrame = new DefaultSpdyDataFrame(localStreamId);
185         spdyDataFrame.setLast(true);
186         sessionHandler.writeInbound(spdySynStreamFrame);
187         assertSynReply(sessionHandler.readOutbound(), localStreamId, false, spdySynStreamFrame.headers());
188         assertNull(sessionHandler.readOutbound());
189         sessionHandler.writeInbound(spdyDataFrame);
190         assertDataFrame(sessionHandler.readOutbound(), localStreamId, true);
191         assertNull(sessionHandler.readOutbound());
192         sessionHandler.writeInbound(closeMessage);
193         assertGoAway(sessionHandler.readOutbound(), localStreamId);
194         assertNull(sessionHandler.readOutbound());
195         localStreamId += 2;
196         spdySynStreamFrame.setStreamId(localStreamId);
197         sessionHandler.writeInbound(spdySynStreamFrame);
198         assertRstStream(sessionHandler.readOutbound(), localStreamId, SpdyStreamStatus.REFUSED_STREAM);
199         assertNull(sessionHandler.readOutbound());
200         spdyDataFrame.setStreamId(localStreamId);
201         sessionHandler.writeInbound(spdyDataFrame);
202         assertNull(sessionHandler.readOutbound());
203         sessionHandler.finish();
204     }
205     @Test
206     public void testSpdyClientSessionHandler() {
207         logger.info("Running: testSpdyClientSessionHandler v3.1");
208         testSpdySessionHandler(SpdyVersion.SPDY_3_1, false);
209     }
210     @Test
211     public void testSpdyClientSessionHandlerPing() {
212         logger.info("Running: testSpdyClientSessionHandlerPing v3.1");
213         testSpdySessionHandlerPing(SpdyVersion.SPDY_3_1, false);
214     }
215     @Test
216     public void testSpdyClientSessionHandlerGoAway() {
217         logger.info("Running: testSpdyClientSessionHandlerGoAway v3.1");
218         testSpdySessionHandlerGoAway(SpdyVersion.SPDY_3_1, false);
219     }
220     @Test
221     public void testSpdyServerSessionHandler() {
222         logger.info("Running: testSpdyServerSessionHandler v3.1");
223         testSpdySessionHandler(SpdyVersion.SPDY_3_1, true);
224     }
225     @Test
226     public void testSpdyServerSessionHandlerPing() {
227         logger.info("Running: testSpdyServerSessionHandlerPing v3.1");
228         testSpdySessionHandlerPing(SpdyVersion.SPDY_3_1, true);
229     }
230     @Test
231     public void testSpdyServerSessionHandlerGoAway() {
232         logger.info("Running: testSpdyServerSessionHandlerGoAway v3.1");
233         testSpdySessionHandlerGoAway(SpdyVersion.SPDY_3_1, true);
234     }
235 <a name="1"></a>        private static class EchoHandler extends ChannelInboundHandlerAdapter {
236         <font color="#f63526"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>private final int closeSignal;
237         private final boolean server;
238         EchoHandler(int closeSignal, boolean server) {
239             this.closeSignal = closeSignal;
240             this.server = server;
241         }
242         @</b></font>Override
243         public void channelActive(ChannelHandlerContext ctx) throws Exception {
244             int streamId = server ? 2 : 1;
245             SpdySynStreamFrame spdySynStreamFrame =
246                     new DefaultSpdySynStreamFrame(streamId, 0, (byte) 0);
247             spdySynStreamFrame.setLast(true);
248             ctx.writeAndFlush(spdySynStreamFrame);
249             spdySynStreamFrame.setStreamId(spdySynStreamFrame.streamId() + 2);
250             ctx.writeAndFlush(spdySynStreamFrame);
251             spdySynStreamFrame.setStreamId(spdySynStreamFrame.streamId() + 2);
252             ctx.writeAndFlush(spdySynStreamFrame);
253             spdySynStreamFrame.setStreamId(spdySynStreamFrame.streamId() + 2);
254             ctx.writeAndFlush(spdySynStreamFrame);
255             SpdySettingsFrame spdySettingsFrame = new DefaultSpdySettingsFrame();
256             spdySettingsFrame.setValue(SpdySettingsFrame.SETTINGS_MAX_CONCURRENT_STREAMS, 1);
257             ctx.writeAndFlush(spdySettingsFrame);
258         }
259         @Override
260         public void channelRead(ChannelHandlerContext ctx, Object msg) throws Exception {
261             if (msg instanceof SpdySynStreamFrame) {
262                 SpdySynStreamFrame spdySynStreamFrame = (SpdySynStreamFrame) msg;
263                 if (!spdySynStreamFrame.isUnidirectional()) {
264                     int streamId = spdySynStreamFrame.streamId();
265                     SpdySynReplyFrame spdySynReplyFrame = new DefaultSpdySynReplyFrame(streamId);
266                     spdySynReplyFrame.setLast(spdySynStreamFrame.isLast());
267                     for (Map.Entry&lt;CharSequence, CharSequence&gt; entry: spdySynStreamFrame.headers()) {
268                         spdySynReplyFrame.headers().add(entry.getKey(), entry.getValue());
269                     }
270                     ctx.writeAndFlush(spdySynReplyFrame);
271                 }
272                 return;
273             }
274             if (msg instanceof SpdySynReplyFrame) {
275                 return;
276             }
277             if (msg instanceof SpdyDataFrame ||
278                 msg instanceof SpdyPingFrame ||
279                 msg instanceof SpdyHeadersFrame) {
280                 ctx.writeAndFlush(msg);
281                 return;
282             }
283             if (msg instanceof SpdySettingsFrame) {
284                 SpdySettingsFrame spdySettingsFrame = (SpdySettingsFrame) msg;
285                 if (spdySettingsFrame.isSet(closeSignal)) {
286                     ctx.close();
287                 }
288             }
289         }
290     }
291 }
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
