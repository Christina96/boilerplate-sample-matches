<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Matches for TreeMultisetTest_1.java & Collections2Test_1.java</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
</HEAD>
<body>
  <div style="align-items: center; display: flex; justify-content: space-around;">
    <div>
      <h3 align="center">
Matches for TreeMultisetTest_1.java & Collections2Test_1.java
      </h3>
      <h1 align="center">
        61.0%
      </h1>
      <center>
        <a href="index.html" target="_top">
          INDEX
        </a>
        <span>-</span>
        <a href="help-en.html" target="_top">
          HELP
        </a>
      </center>
    </div>
    <div>
<TABLE BORDER="1" CELLSPACING="0" BGCOLOR="#d0d0d0">
<TR><TH><TH>TreeMultisetTest_1.java (73.09237%)<TH>Collections2Test_1.java (52.449566%)<TH>Tokens
<TR><TD BGCOLOR="#0000ff"><FONT COLOR="#0000ff">-</FONT><TD><A HREF="javascript:ZweiFrames('match6765-0.html#0',2,'match6765-1.html#0',3)" NAME="0">(333-355)<TD><A HREF="javascript:ZweiFrames('match6765-0.html#0',2,'match6765-1.html#0',3)" NAME="0">(394-418)</A><TD ALIGN=center><FONT COLOR="#ff0000">40</FONT>
<TR><TD BGCOLOR="#f63526"><FONT COLOR="#f63526">-</FONT><TD><A HREF="javascript:ZweiFrames('match6765-0.html#1',2,'match6765-1.html#1',3)" NAME="1">(17-56)<TD><A HREF="javascript:ZweiFrames('match6765-0.html#1',2,'match6765-1.html#1',3)" NAME="1">(17-56)</A><TD ALIGN=center><FONT COLOR="#eb0000">37</FONT>
<TR><TD BGCOLOR="#980517"><FONT COLOR="#980517">-</FONT><TD><A HREF="javascript:ZweiFrames('match6765-0.html#2',2,'match6765-1.html#2',3)" NAME="2">(167-186)<TD><A HREF="javascript:ZweiFrames('match6765-0.html#2',2,'match6765-1.html#2',3)" NAME="2">(326-345)</A><TD ALIGN=center><FONT COLOR="#df0000">35</FONT>
<TR><TD BGCOLOR="#53858b"><FONT COLOR="#53858b">-</FONT><TD><A HREF="javascript:ZweiFrames('match6765-0.html#3',2,'match6765-1.html#3',3)" NAME="3">(187-202)<TD><A HREF="javascript:ZweiFrames('match6765-0.html#3',2,'match6765-1.html#3',3)" NAME="3">(297-325)</A><TD ALIGN=center><FONT COLOR="#bf0000">30</FONT>
<TR><TD BGCOLOR="#6cc417"><FONT COLOR="#6cc417">-</FONT><TD><A HREF="javascript:ZweiFrames('match6765-0.html#4',2,'match6765-1.html#4',3)" NAME="4">(139-157)<TD><A HREF="javascript:ZweiFrames('match6765-0.html#4',2,'match6765-1.html#4',3)" NAME="4">(350-366)</A><TD ALIGN=center><FONT COLOR="#bf0000">30</FONT>
<TR><TD BGCOLOR="#151b8d"><FONT COLOR="#151b8d">-</FONT><TD><A HREF="javascript:ZweiFrames('match6765-0.html#5',2,'match6765-1.html#5',3)" NAME="5">(212-228)<TD><A HREF="javascript:ZweiFrames('match6765-0.html#5',2,'match6765-1.html#5',3)" NAME="5">(377-392)</A><TD ALIGN=center><FONT COLOR="#ac0000">27</FONT>
<TR><TD BGCOLOR="#8c8774"><FONT COLOR="#8c8774">-</FONT><TD><A HREF="javascript:ZweiFrames('match6765-0.html#6',2,'match6765-1.html#6',3)" NAME="6">(232-242)<TD><A HREF="javascript:ZweiFrames('match6765-0.html#6',2,'match6765-1.html#6',3)" NAME="6">(262-274)</A><TD ALIGN=center><FONT COLOR="#7f0000">20</FONT>
<TR><TD BGCOLOR="#38a4a5"><FONT COLOR="#38a4a5">-</FONT><TD><A HREF="javascript:ZweiFrames('match6765-0.html#7',2,'match6765-1.html#7',3)" NAME="7">(126-136)<TD><A HREF="javascript:ZweiFrames('match6765-0.html#7',2,'match6765-1.html#7',3)" NAME="7">(278-288)</A><TD ALIGN=center><FONT COLOR="#720000">18</FONT>
<TR><TD BGCOLOR="#c58917"><FONT COLOR="#c58917">-</FONT><TD><A HREF="javascript:ZweiFrames('match6765-0.html#8',2,'match6765-1.html#8',3)" NAME="8">(252-262)<TD><A HREF="javascript:ZweiFrames('match6765-0.html#8',2,'match6765-1.html#8',3)" NAME="8">(446-464)</A><TD ALIGN=center><FONT COLOR="#6c0000">17</FONT>
<TR><TD BGCOLOR="#83a33a"><FONT COLOR="#83a33a">-</FONT><TD><A HREF="javascript:ZweiFrames('match6765-0.html#9',2,'match6765-1.html#9',3)" NAME="9">(78-84)<TD><A HREF="javascript:ZweiFrames('match6765-0.html#9',2,'match6765-1.html#9',3)" NAME="9">(114-120)</A><TD ALIGN=center><FONT COLOR="#590000">14</FONT>
<TR><TD BGCOLOR="#ad5910"><FONT COLOR="#ad5910">-</FONT><TD><A HREF="javascript:ZweiFrames('match6765-0.html#10',2,'match6765-1.html#10',3)" NAME="10">(286-296)<TD><A HREF="javascript:ZweiFrames('match6765-0.html#10',2,'match6765-1.html#10',3)" NAME="10">(464-470)</A><TD ALIGN=center><FONT COLOR="#520000">13</FONT>
<TR><TD BGCOLOR="#b041ff"><FONT COLOR="#b041ff">-</FONT><TD><A HREF="javascript:ZweiFrames('match6765-0.html#11',2,'match6765-1.html#11',3)" NAME="11">(279-286)<TD><A HREF="javascript:ZweiFrames('match6765-0.html#11',2,'match6765-1.html#11',3)" NAME="11">(369-377)</A><TD ALIGN=center><FONT COLOR="#520000">13</FONT>
<TR><TD BGCOLOR="#571b7e"><FONT COLOR="#571b7e">-</FONT><TD><A HREF="javascript:ZweiFrames('match6765-0.html#12',2,'match6765-1.html#12',3)" NAME="12">(104-108)<TD><A HREF="javascript:ZweiFrames('match6765-0.html#12',2,'match6765-1.html#12',3)" NAME="12">(82-86)</A><TD ALIGN=center><FONT COLOR="#4c0000">12</FONT>
<TR><TD BGCOLOR="#3b9c9c"><FONT COLOR="#3b9c9c">-</FONT><TD><A HREF="javascript:ZweiFrames('match6765-0.html#13',2,'match6765-1.html#13',3)" NAME="13">(57-61)<TD><A HREF="javascript:ZweiFrames('match6765-0.html#13',2,'match6765-1.html#13',3)" NAME="13">(66-70)</A><TD ALIGN=center><FONT COLOR="#460000">11</FONT>
<TR><TD BGCOLOR="#842dce"><FONT COLOR="#842dce">-</FONT><TD><A HREF="javascript:ZweiFrames('match6765-0.html#14',2,'match6765-1.html#14',3)" NAME="14">(314-323)<TD><A HREF="javascript:ZweiFrames('match6765-0.html#14',2,'match6765-1.html#14',3)" NAME="14">(418-424)</A><TD ALIGN=center><FONT COLOR="#3f0000">10</FONT>
<TR><TD BGCOLOR="#f52887"><FONT COLOR="#f52887">-</FONT><TD><A HREF="javascript:ZweiFrames('match6765-0.html#15',2,'match6765-1.html#15',3)" NAME="15">(204-211)<TD><A HREF="javascript:ZweiFrames('match6765-0.html#15',2,'match6765-1.html#15',3)" NAME="15">(241-249)</A><TD ALIGN=center><FONT COLOR="#3f0000">10</FONT>
<TR><TD BGCOLOR="#2981b2"><FONT COLOR="#2981b2">-</FONT><TD><A HREF="javascript:ZweiFrames('match6765-0.html#16',2,'match6765-1.html#16',3)" NAME="16">(298-302)<TD><A HREF="javascript:ZweiFrames('match6765-0.html#16',2,'match6765-1.html#16',3)" NAME="16">(429-433)</A><TD ALIGN=center><FONT COLOR="#390000">9</FONT>
<TR><TD BGCOLOR="#3090c7"><FONT COLOR="#3090c7">-</FONT><TD><A HREF="javascript:ZweiFrames('match6765-0.html#17',2,'match6765-1.html#17',3)" NAME="17">(269-277)<TD><A HREF="javascript:ZweiFrames('match6765-0.html#17',2,'match6765-1.html#17',3)" NAME="17">(57-61)</A><TD ALIGN=center><FONT COLOR="#390000">9</FONT>
<TR><TD BGCOLOR="#800517"><FONT COLOR="#800517">-</FONT><TD><A HREF="javascript:ZweiFrames('match6765-0.html#18',2,'match6765-1.html#18',3)" NAME="18">(158-164)<TD><A HREF="javascript:ZweiFrames('match6765-0.html#18',2,'match6765-1.html#18',3)" NAME="18">(498-505)</A><TD ALIGN=center><FONT COLOR="#390000">9</FONT>
</TABLE>
    </div>
  </div>
  <hr>
  <div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>TreeMultisetTest_1.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<HR>
<PRE>
/*
 * Copyright (C) 2007 The Guava Authors
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
<A NAME="1"></A> * limitations under the License.
 */

<FONT color="#f63526"><A HREF="javascript:ZweiFrames('match6765-1.html#1',3,'match6765-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>package com.google.common.collect;

import static com.google.common.collect.BoundType.CLOSED;
import static com.google.common.truth.Truth.assertThat;
import static java.util.Collections.sort;

import com.google.common.annotations.GwtCompatible;
import com.google.common.annotations.GwtIncompatible;
import com.google.common.collect.testing.Helpers.NullsBeforeB;
import com.google.common.collect.testing.NavigableSetTestSuiteBuilder;
import com.google.common.collect.testing.TestStringSetGenerator;
import com.google.common.collect.testing.features.CollectionFeature;
import com.google.common.collect.testing.features.CollectionSize;
import com.google.common.collect.testing.google.MultisetFeature;
import com.google.common.collect.testing.google.SortedMultisetTestSuiteBuilder;
import com.google.common.collect.testing.google.TestStringMultisetGenerator;
import java.lang.reflect.Method;
import java.util.Arrays;
import java.util.Collections;
import java.util.Comparator;
import java.util.List;
import java.util.Set;
import java.util.SortedSet;
import junit.framework.Test;
import junit.framework.TestCase;
import junit.framework.TestSuite;

/**
 * Unit test for {@link TreeMultiset}.
 *
 * @author Neal Kanodia
 */
@GwtCompatible(emulated = true)
public class TreeMultisetTest extends TestCase {

  @GwtIncompatible // suite
  public static Test suite() {
<A NAME="13"></A>    TestSuite suite = new TestSuite();
    suite.addTest(
        SortedMultisetTestSuiteBuilder.using</B></FONT>(
                <FONT color="#3b9c9c"><A HREF="javascript:ZweiFrames('match6765-1.html#13',3,'match6765-top.html#13',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>new TestStringMultisetGenerator() {
                  @Override
                  protected Multiset&lt;String&gt; create(String[] elements) {
                    return TreeMultiset.create(Arrays.asList(elements));
                  }</B></FONT>

                  @Override
                  public List&lt;String&gt; order(List&lt;String&gt; insertionOrder) {
                    return Ordering.natural().sortedCopy(insertionOrder);
                  }
                })
            .withFeatures(
                CollectionSize.ANY,
                CollectionFeature.KNOWN_ORDER,
                CollectionFeature.GENERAL_PURPOSE,
                CollectionFeature.SERIALIZABLE,
                CollectionFeature.ALLOWS_NULL_QUERIES,
                MultisetFeature.ENTRIES_ARE_VIEWS)
<A NAME="9"></A>            .named(&quot;TreeMultiset, Ordering.natural&quot;)
            .createTestSuite());
    suite.addTest(
        <FONT color="#83a33a"><A HREF="javascript:ZweiFrames('match6765-1.html#9',3,'match6765-top.html#9',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>SortedMultisetTestSuiteBuilder.using(
                new TestStringMultisetGenerator() {
                  @Override
                  protected Multiset&lt;String&gt; create(String[] elements) {
                    Multiset&lt;String&gt; result = TreeMultiset.create(NullsBeforeB.INSTANCE);
                    Collections.addAll(result, elements);
                    return</B></FONT> result;
                  }

                  @Override
                  public List&lt;String&gt; order(List&lt;String&gt; insertionOrder) {
                    sort(insertionOrder, NullsBeforeB.INSTANCE);
                    return insertionOrder;
                  }
                })
            .withFeatures(
                CollectionSize.ANY,
                CollectionFeature.KNOWN_ORDER,
                CollectionFeature.GENERAL_PURPOSE,
                CollectionFeature.SERIALIZABLE,
                CollectionFeature.ALLOWS_NULL_VALUES,
                MultisetFeature.ENTRIES_ARE_VIEWS)
            .named(&quot;TreeMultiset, NullsBeforeB&quot;)
<A NAME="12"></A>            .createTestSuite());
    suite.addTest(
        NavigableSetTestSuiteBuilder.using(
                <FONT color="#571b7e"><A HREF="javascript:ZweiFrames('match6765-1.html#12',3,'match6765-top.html#12',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>new TestStringSetGenerator() {
                  @Override
                  protected Set&lt;String&gt; create(String[] elements) {
                    return TreeMultiset.create(Arrays.asList(elements)).elementSet();
                  }</B></FONT>

                  @Override
                  public List&lt;String&gt; order(List&lt;String&gt; insertionOrder) {
                    return Lists.newArrayList(Sets.newTreeSet(insertionOrder));
                  }
                })
            .named(&quot;TreeMultiset[Ordering.natural].elementSet&quot;)
            .withFeatures(
                CollectionSize.ANY,
                CollectionFeature.REMOVE_OPERATIONS,
                CollectionFeature.ALLOWS_NULL_QUERIES)
            .createTestSuite());
    suite.addTestSuite(TreeMultisetTest.class);
    return suite;
<A NAME="7"></A>  }

  public void testCreate() {
    TreeMultiset&lt;String&gt; multiset = <FONT color="#38a4a5"><A HREF="javascript:ZweiFrames('match6765-1.html#7',3,'match6765-top.html#7',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>TreeMultiset.create();
    multiset.add(&quot;foo&quot;, 2);
    multiset.add(&quot;bar&quot;);
    assertEquals(3, multiset.size());
    assertEquals(2, multiset.count(&quot;foo&quot;));
    assertEquals(Ordering.natural(), multiset.comparator());
    assertEquals(&quot;[bar, foo x 2]&quot;, multiset.toString());
  }

  public void testCreateWithComparator() {
<A NAME="4"></A>    Multiset&lt;String&gt; multiset = TreeMultiset.create</B></FONT>(Collections.reverseOrder());
    multiset.add(&quot;foo&quot;, 2);
    multiset.add(&quot;bar&quot;);
    <FONT color="#6cc417"><A HREF="javascript:ZweiFrames('match6765-1.html#4',3,'match6765-top.html#4',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>assertEquals(3, multiset.size());
    assertEquals(2, multiset.count(&quot;foo&quot;));
    assertEquals(&quot;[foo x 2, bar]&quot;, multiset.toString());
  }

  public void testCreateFromIterable() {
    Multiset&lt;String&gt; multiset = TreeMultiset.create(Arrays.asList(&quot;foo&quot;, &quot;bar&quot;, &quot;foo&quot;));
    assertEquals(3, multiset.size());
    assertEquals(2, multiset.count(&quot;foo&quot;));
    assertEquals(&quot;[bar, foo x 2]&quot;, multiset.toString());
  }

  public void testToString() {
    Multiset&lt;String&gt; ms = TreeMultiset.create();
    ms.add(&quot;a&quot;, 3);
    ms.add(&quot;c&quot;, 1);
<A NAME="18"></A>    ms.add(&quot;b&quot;, 2);

    assertEquals(&quot;[a x 3, b x 2, c]&quot;, ms.toString</B></FONT>());
  <FONT color="#800517"><A HREF="javascript:ZweiFrames('match6765-1.html#18',3,'match6765-top.html#18',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>}

  public void testElementSetSortedSetMethods() {
    TreeMultiset&lt;String&gt; ms = TreeMultiset.create();
    ms.add(&quot;c&quot;, 1);
    ms.add(&quot;a&quot;, 3);
<A NAME="2"></A>    ms.add</B></FONT>(&quot;b&quot;, 2);
    SortedSet&lt;String&gt; elementSet = ms.elementSet();

    <FONT color="#980517"><A HREF="javascript:ZweiFrames('match6765-1.html#2',3,'match6765-top.html#2',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>assertEquals(&quot;a&quot;, elementSet.first());
    assertEquals(&quot;c&quot;, elementSet.last());
    assertEquals(Ordering.natural(), elementSet.comparator());

    assertThat(elementSet.headSet(&quot;b&quot;)).containsExactly(&quot;a&quot;);
    assertThat(elementSet.tailSet(&quot;b&quot;)).containsExactly(&quot;b&quot;, &quot;c&quot;).inOrder();
    assertThat(elementSet.subSet(&quot;a&quot;, &quot;c&quot;)).containsExactly(&quot;a&quot;, &quot;b&quot;).inOrder();
  }

  public void testElementSetSubsetRemove() {
    TreeMultiset&lt;String&gt; ms = TreeMultiset.create();
    ms.add(&quot;a&quot;, 1);
    ms.add(&quot;b&quot;, 3);
    ms.add(&quot;c&quot;, 2);
    ms.add(&quot;d&quot;, 1);
    ms.add(&quot;e&quot;, 3);
    ms.add(&quot;f&quot;, 2);
<A NAME="3"></A>
    SortedSet&lt;String&gt; elementSet = ms.elementSet();
    assertThat</B></FONT>(elementSet).containsExactly(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;).inOrder();
    SortedSet&lt;String&gt; subset = <FONT color="#53858b"><A HREF="javascript:ZweiFrames('match6765-1.html#3',3,'match6765-top.html#3',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>elementSet.subSet(&quot;b&quot;, &quot;f&quot;);
    assertThat(subset).containsExactly(&quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;).inOrder();

    assertTrue(subset.remove(&quot;c&quot;));
    assertThat(elementSet).containsExactly(&quot;a&quot;, &quot;b&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;).inOrder();
    assertThat(subset).containsExactly(&quot;b&quot;, &quot;d&quot;, &quot;e&quot;).inOrder();
    assertEquals(10, ms.size());

    assertFalse(subset.remove(&quot;a&quot;));
    assertThat(elementSet).containsExactly(&quot;a&quot;, &quot;b&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;).inOrder();
    assertThat(subset).containsExactly(&quot;b&quot;, &quot;d&quot;, &quot;e&quot;).inOrder();
    assertEquals(10, ms.size());
  }

<A NAME="15"></A>  public void testElementSetSubsetRemoveAll() {
    TreeMultiset&lt;String&gt; ms = TreeMultiset.create</B></FONT>();
    ms.add(&quot;a&quot;, 1);
    <FONT color="#f52887"><A HREF="javascript:ZweiFrames('match6765-1.html#15',3,'match6765-top.html#15',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>ms.add(&quot;b&quot;, 3);
    ms.add(&quot;c&quot;, 2);
    ms.add(&quot;d&quot;, 1);
    ms.add(&quot;e&quot;, 3);
    ms.add(&quot;f&quot;, 2);
<A NAME="5"></A>
    SortedSet&lt;String&gt; elementSet = ms.elementSet();
    assertThat</B></FONT>(elementSet).containsExactly(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;).inOrder();
    SortedSet&lt;String&gt; subset = <FONT color="#151b8d"><A HREF="javascript:ZweiFrames('match6765-1.html#5',3,'match6765-top.html#5',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>elementSet.subSet(&quot;b&quot;, &quot;f&quot;);
    assertThat(subset).containsExactly(&quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;).inOrder();

    assertTrue(subset.removeAll(Arrays.asList(&quot;a&quot;, &quot;c&quot;)));
    assertThat(elementSet).containsExactly(&quot;a&quot;, &quot;b&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;).inOrder();
    assertThat(subset).containsExactly(&quot;b&quot;, &quot;d&quot;, &quot;e&quot;).inOrder();
    assertEquals(10, ms.size());
  }

  public void testElementSetSubsetRetainAll() {
    TreeMultiset&lt;String&gt; ms = TreeMultiset.create();
    ms.add(&quot;a&quot;, 1);
    ms.add(&quot;b&quot;, 3);
    ms.add(&quot;c&quot;, 2);
    ms.add(&quot;d&quot;, 1);
    ms.add(&quot;e&quot;, 3);
    ms.add</B></FONT>(&quot;f&quot;, 2);
<A NAME="6"></A>
    SortedSet&lt;String&gt; elementSet = ms.elementSet();
    assertThat(elementSet).containsExactly(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;).inOrder();
    SortedSet&lt;String&gt; subset = <FONT color="#8c8774"><A HREF="javascript:ZweiFrames('match6765-1.html#6',3,'match6765-top.html#6',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>elementSet.subSet(&quot;b&quot;, &quot;f&quot;);
    assertThat(subset).containsExactly(&quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;).inOrder();

    assertTrue(subset.retainAll(Arrays.asList(&quot;a&quot;, &quot;c&quot;)));
    assertThat(elementSet).containsExactly(&quot;a&quot;, &quot;c&quot;, &quot;f&quot;).inOrder();
    assertThat(subset).containsExactly(&quot;c&quot;);
    assertEquals(5, ms.size());
  }

  public void testElementSetSubsetClear() {
    TreeMultiset&lt;String&gt; ms = TreeMultiset.create</B></FONT>();
    ms.add(&quot;a&quot;, 1);
    ms.add(&quot;b&quot;, 3);
    ms.add(&quot;c&quot;, 2);
    ms.add(&quot;d&quot;, 1);
    ms.add(&quot;e&quot;, 3);
    ms.add(&quot;f&quot;, 2);
<A NAME="8"></A>
    SortedSet&lt;String&gt; elementSet = ms.elementSet();
    assertThat(elementSet).containsExactly(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;).inOrder();
    SortedSet&lt;String&gt; subset = <FONT color="#c58917"><A HREF="javascript:ZweiFrames('match6765-1.html#8',3,'match6765-top.html#8',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>elementSet.subSet(&quot;b&quot;, &quot;f&quot;);
    assertThat(subset).containsExactly(&quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;).inOrder();

    subset.clear();
    assertThat(elementSet).containsExactly(&quot;a&quot;, &quot;f&quot;).inOrder();
    assertThat(subset).isEmpty();
    assertEquals(3, ms.size());
  }

  public void testCustomComparator() throws Exception {
    Comparator&lt;String&gt; comparator =</B></FONT>
        new Comparator&lt;String&gt;() {
          @Override
          public int compare(String o1, String o2) {
<A NAME="17"></A>            return o2.compareTo(o1);
          }
        };
    TreeMultiset&lt;String&gt; ms = <FONT color="#3090c7"><A HREF="javascript:ZweiFrames('match6765-1.html#17',3,'match6765-top.html#17',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>TreeMultiset.create(comparator);

    ms.add(&quot;b&quot;);
    ms.add(&quot;c&quot;);
    ms.add(&quot;a&quot;);
    ms.add(&quot;b&quot;);
    ms.add(&quot;d&quot;);
<A NAME="11"></A>
    assertThat</B></FONT>(ms).containsExactly(&quot;d&quot;, &quot;c&quot;, &quot;b&quot;, &quot;b&quot;, &quot;a&quot;).inOrder();

    SortedSet&lt;String&gt; elementSet = <FONT color="#b041ff"><A HREF="javascript:ZweiFrames('match6765-1.html#11',3,'match6765-top.html#11',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>ms.elementSet();
    assertEquals(&quot;d&quot;, elementSet.first());
    assertEquals(&quot;a&quot;, elementSet.last());
    assertEquals(comparator, elementSet.comparator());
<A NAME="10"></A>  }

  public void testNullAcceptingComparator() throws Exception {
    Comparator&lt;String&gt; comparator = <FONT color="#ad5910"><A HREF="javascript:ZweiFrames('match6765-1.html#10',3,'match6765-top.html#10',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>Ordering.&lt;String&gt;natural().nullsFirst</B></FONT>();
    TreeMultiset&lt;String&gt; ms = TreeMultiset.create(comparator);

    ms.add(&quot;b&quot;);
    ms.add(null);
    ms.add(&quot;a&quot;);
    ms.add(&quot;b&quot;);
    ms.add(null, 2);

<A NAME="16"></A>    assertThat(ms).containsExactly(null, null, null, &quot;a&quot;, &quot;b&quot;, &quot;b&quot;).inOrder();
    assertEquals(3, ms.count</B></FONT>(null));

    SortedSet&lt;String&gt; elementSet = <FONT color="#2981b2"><A HREF="javascript:ZweiFrames('match6765-1.html#16',3,'match6765-top.html#16',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>ms.elementSet();
    assertEquals(null, elementSet.first());
    assertEquals(&quot;b&quot;, elementSet.last());
    assertEquals(comparator, elementSet.comparator());
  }</B></FONT>

  private static final Comparator&lt;String&gt; DEGENERATE_COMPARATOR =
      new Comparator&lt;String&gt;() {
        @Override
        public int compare(String o1, String o2) {
          return o1.length() - o2.length();
        }
      };
<A NAME="14"></A>
  /** Test a TreeMultiset with a comparator that can return 0 when comparing unequal values. */
  public void testDegenerateComparator() throws Exception {
    TreeMultiset&lt;String&gt; ms = <FONT color="#842dce"><A HREF="javascript:ZweiFrames('match6765-1.html#14',3,'match6765-top.html#14',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>TreeMultiset.create(DEGENERATE_COMPARATOR);

    ms.add(&quot;foo&quot;);
    ms.add(&quot;a&quot;);
    ms.add(&quot;bar&quot;);
    ms.add(&quot;b&quot;);
    ms.add(&quot;c&quot;);

    assertEquals(2, ms.count(&quot;bar&quot;));
    assertEquals(3, ms.count</B></FONT>(&quot;b&quot;));

    Multiset&lt;String&gt; ms2 = TreeMultiset.create(DEGENERATE_COMPARATOR);

    ms2.add(&quot;cat&quot;, 2);
    ms2.add(&quot;x&quot;, 3);

<A NAME="0"></A>    assertEquals(ms, ms2);
    assertEquals(ms2, ms);

    SortedSet&lt;String&gt; elementSet = <FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match6765-1.html#0',3,'match6765-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>ms.elementSet();
    assertEquals(&quot;a&quot;, elementSet.first());
    assertEquals(&quot;foo&quot;, elementSet.last());
    assertEquals(DEGENERATE_COMPARATOR, elementSet.comparator());
  }

  public void testSubMultisetSize() {
    TreeMultiset&lt;String&gt; ms = TreeMultiset.create();
    ms.add(&quot;a&quot;, Integer.MAX_VALUE);
    ms.add(&quot;b&quot;, Integer.MAX_VALUE);
    ms.add(&quot;c&quot;, 3);

    assertEquals(Integer.MAX_VALUE, ms.count(&quot;a&quot;));
    assertEquals(Integer.MAX_VALUE, ms.count(&quot;b&quot;));
    assertEquals(3, ms.count(&quot;c&quot;));

    assertEquals(Integer.MAX_VALUE, ms.headMultiset(&quot;c&quot;, CLOSED).size());
    assertEquals(Integer.MAX_VALUE, ms.headMultiset(&quot;b&quot;, CLOSED).size());
    assertEquals(Integer.MAX_VALUE, ms.headMultiset(&quot;a&quot;, CLOSED).size());

    assertEquals(3, ms.tailMultiset(&quot;c&quot;, CLOSED).size());
    assertEquals(Integer.MAX_VALUE, ms.tailMultiset(&quot;b&quot;, CLOSED).size());
    assertEquals(Integer.MAX_VALUE, ms.tailMultiset</B></FONT>(&quot;a&quot;, CLOSED).size());
  }

  @GwtIncompatible // reflection
  @AndroidIncompatible // Reflection bug, or actual binary compatibility problem?
  public void testElementSetBridgeMethods() {
    for (Method m : TreeMultiset.class.getMethods()) {
      if (m.getName().equals(&quot;elementSet&quot;) &amp;&amp; m.getReturnType().equals(SortedSet.class)) {
        return;
      }
    }
    fail(&quot;No bridge method found&quot;);
  }
}
</PRE>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>Collections2Test_1.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<HR>
<PRE>
/*
 * Copyright (C) 2008 The Guava Authors
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
<A NAME="1"></A> * limitations under the License.
 */

<FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match6765-0.html#1',2,'match6765-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>package com.google.common.collect;

import static com.google.common.collect.Iterables.concat;
import static com.google.common.collect.Lists.newArrayList;
import static com.google.common.collect.Lists.newLinkedList;
import static com.google.common.truth.Truth.assertThat;
import static java.util.Arrays.asList;
import static java.util.Collections.nCopies;

import com.google.common.annotations.GwtCompatible;
import com.google.common.annotations.GwtIncompatible;
import com.google.common.base.Function;
import com.google.common.base.Predicate;
import com.google.common.collect.testing.CollectionTestSuiteBuilder;
import com.google.common.collect.testing.TestStringCollectionGenerator;
import com.google.common.collect.testing.features.CollectionFeature;
import com.google.common.collect.testing.features.CollectionSize;
import com.google.common.testing.NullPointerTester;
import java.util.Collection;
import java.util.Collections;
import java.util.Iterator;
import java.util.List;
import java.util.NoSuchElementException;
import junit.framework.Test;
import junit.framework.TestCase;
import junit.framework.TestSuite;

/**
 * Tests for {@link Collections2}.
 *
 * @author Chris Povirk
 * @author Jared Levy
 */
@GwtCompatible(emulated = true)
public class Collections2Test extends TestCase {
  @GwtIncompatible // suite
  public static Test suite() {
<A NAME="17"></A>    TestSuite suite = new TestSuite(Collections2Test.class.getSimpleName());
    suite.addTest(testsForFilter());
    suite.addTest(testsForFilterAll</B></FONT>());
    <FONT color="#3090c7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match6765-0.html#17',2,'match6765-top.html#17',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>suite.addTest(testsForFilterLinkedList());
    suite.addTest(testsForFilterNoNulls());
    suite.addTest(testsForFilterFiltered());
    suite.addTest(testsForTransform());
    suite.addTestSuite</B></FONT>(Collections2Test.class);
    return suite;
<A NAME="13"></A>  }

  static final Predicate&lt;String&gt; NOT_YYY_ZZZ =
      <FONT color="#3b9c9c"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match6765-0.html#13',2,'match6765-top.html#13',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>new Predicate&lt;String&gt;() {
        @Override
        public boolean apply(String input) {
          return !&quot;yyy&quot;.equals(input) &amp;&amp; !&quot;zzz&quot;.equals(input);
        }</B></FONT>
      };

  static final Predicate&lt;String&gt; LENGTH_1 =
      new Predicate&lt;String&gt;() {
        @Override
        public boolean apply(String input) {
          return input.length() == 1;
        }
<A NAME="12"></A>      };

  static final Predicate&lt;String&gt; STARTS_WITH_VOWEL =
      <FONT color="#571b7e"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match6765-0.html#12',2,'match6765-top.html#12',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>new Predicate&lt;String&gt;() {
        @Override
        public boolean apply(String input) {
          return asList('a', 'e', 'i', 'o', 'u').contains(input.charAt(0));
        }</B></FONT>
      };

  @GwtIncompatible // suite
  private static Test testsForFilter() {
    return CollectionTestSuiteBuilder.using(
            new TestStringCollectionGenerator() {
              @Override
              public Collection&lt;String&gt; create(String[] elements) {
                List&lt;String&gt; unfiltered = newArrayList();
                unfiltered.add(&quot;yyy&quot;);
                Collections.addAll(unfiltered, elements);
                unfiltered.add(&quot;zzz&quot;);
                return Collections2.filter(unfiltered, NOT_YYY_ZZZ);
              }
            })
        .named(&quot;Collections2.filter&quot;)
        .withFeatures(
            CollectionFeature.SUPPORTS_ADD,
            CollectionFeature.SUPPORTS_REMOVE,
            CollectionFeature.ALLOWS_NULL_VALUES,
            CollectionFeature.KNOWN_ORDER,
            CollectionSize.ANY)
        .createTestSuite();
  }
<A NAME="9"></A>
  @GwtIncompatible // suite
  private static Test testsForFilterAll() {
    return <FONT color="#83a33a"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match6765-0.html#9',2,'match6765-top.html#9',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>CollectionTestSuiteBuilder.using(
            new TestStringCollectionGenerator() {
              @Override
              public Collection&lt;String&gt; create(String[] elements) {
                List&lt;String&gt; unfiltered = newArrayList();
                Collections.addAll(unfiltered, elements);
                return</B></FONT> Collections2.filter(unfiltered, NOT_YYY_ZZZ);
              }
            })
        .named(&quot;Collections2.filter&quot;)
        .withFeatures(
            CollectionFeature.SUPPORTS_ADD,
            CollectionFeature.SUPPORTS_REMOVE,
            CollectionFeature.ALLOWS_NULL_VALUES,
            CollectionFeature.KNOWN_ORDER,
            CollectionSize.ANY)
        .createTestSuite();
  }

  @GwtIncompatible // suite
  private static Test testsForFilterLinkedList() {
    return CollectionTestSuiteBuilder.using(
            new TestStringCollectionGenerator() {
              @Override
              public Collection&lt;String&gt; create(String[] elements) {
                List&lt;String&gt; unfiltered = newLinkedList();
                unfiltered.add(&quot;yyy&quot;);
                Collections.addAll(unfiltered, elements);
                unfiltered.add(&quot;zzz&quot;);
                return Collections2.filter(unfiltered, NOT_YYY_ZZZ);
              }
            })
        .named(&quot;Collections2.filter&quot;)
        .withFeatures(
            CollectionFeature.SUPPORTS_ADD,
            CollectionFeature.SUPPORTS_REMOVE,
            CollectionFeature.ALLOWS_NULL_VALUES,
            CollectionFeature.KNOWN_ORDER,
            CollectionSize.ANY)
        .createTestSuite();
  }

  @GwtIncompatible // suite
  private static Test testsForFilterNoNulls() {
    return CollectionTestSuiteBuilder.using(
            new TestStringCollectionGenerator() {
              @Override
              public Collection&lt;String&gt; create(String[] elements) {
                List&lt;String&gt; unfiltered = newArrayList();
                unfiltered.add(&quot;yyy&quot;);
                unfiltered.addAll(ImmutableList.copyOf(elements));
                unfiltered.add(&quot;zzz&quot;);
                return Collections2.filter(unfiltered, LENGTH_1);
              }
            })
        .named(&quot;Collections2.filter, no nulls&quot;)
        .withFeatures(
            CollectionFeature.SUPPORTS_ADD,
            CollectionFeature.SUPPORTS_REMOVE,
            CollectionFeature.ALLOWS_NULL_QUERIES,
            CollectionFeature.KNOWN_ORDER,
            CollectionSize.ANY)
        .createTestSuite();
  }

  @GwtIncompatible // suite
  private static Test testsForFilterFiltered() {
    return CollectionTestSuiteBuilder.using(
            new TestStringCollectionGenerator() {
              @Override
              public Collection&lt;String&gt; create(String[] elements) {
                List&lt;String&gt; unfiltered = newArrayList();
                unfiltered.add(&quot;yyy&quot;);
                unfiltered.addAll(ImmutableList.copyOf(elements));
                unfiltered.add(&quot;zzz&quot;);
                unfiltered.add(&quot;abc&quot;);
                return Collections2.filter(Collections2.filter(unfiltered, LENGTH_1), NOT_YYY_ZZZ);
              }
            })
        .named(&quot;Collections2.filter, filtered input&quot;)
        .withFeatures(
            CollectionFeature.SUPPORTS_ADD,
            CollectionFeature.SUPPORTS_REMOVE,
            CollectionFeature.KNOWN_ORDER,
            CollectionFeature.ALLOWS_NULL_QUERIES,
            CollectionSize.ANY)
        .createTestSuite();
  }

  private static final Function&lt;String, String&gt; REMOVE_FIRST_CHAR =
      new Function&lt;String, String&gt;() {
        @Override
        public String apply(String from) {
          return ((from == null) || &quot;&quot;.equals(from)) ? null : from.substring(1);
        }
      };

  @GwtIncompatible // suite
  private static Test testsForTransform() {
    return CollectionTestSuiteBuilder.using(
            new TestStringCollectionGenerator() {
              @Override
              public Collection&lt;String&gt; create(String[] elements) {
                List&lt;String&gt; list = newArrayList();
                for (String element : elements) {
                  list.add((element == null) ? null : &quot;q&quot; + element);
                }
                return Collections2.transform(list, REMOVE_FIRST_CHAR);
              }
            })
        .named(&quot;Collections2.transform&quot;)
        .withFeatures(
            CollectionFeature.REMOVE_OPERATIONS,
            CollectionFeature.ALLOWS_NULL_VALUES,
            CollectionFeature.KNOWN_ORDER,
            CollectionSize.ANY)
        .createTestSuite();
  }

  @GwtIncompatible // NullPointerTester
  public void testNullPointerExceptions() {
    NullPointerTester tester = new NullPointerTester();
    tester.testAllPublicStaticMethods(Collections2.class);
  }
<A NAME="15"></A>
  public void testOrderedPermutationSetEmpty() {
    List&lt;Integer&gt; list = newArrayList();
    Collection&lt;List&lt;Integer&gt;&gt; permutationSet = <FONT color="#f52887"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match6765-0.html#15',2,'match6765-top.html#15',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>Collections2.orderedPermutations(list);

    assertEquals(1, permutationSet.size());
    assertThat(permutationSet).contains(list);

    Iterator&lt;List&lt;Integer&gt;&gt; permutations = permutationSet.iterator();

    assertNextPermutation(Lists.&lt;Integer&gt;newArrayList(), permutations);
    assertNoMorePermutations</B></FONT>(permutations);
  }

  public void testOrderedPermutationSetOneElement() {
    List&lt;Integer&gt; list = newArrayList(1);
    Iterator&lt;List&lt;Integer&gt;&gt; permutations = Collections2.orderedPermutations(list).iterator();

    assertNextPermutation(newArrayList(1), permutations);
    assertNoMorePermutations(permutations);
  }
<A NAME="6"></A>
  public void testOrderedPermutationSetThreeElements() {
    List&lt;String&gt; list = newArrayList(&quot;b&quot;, &quot;a&quot;, &quot;c&quot;);
    Iterator&lt;List&lt;String&gt;&gt; permutations = <FONT color="#8c8774"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match6765-0.html#6',2,'match6765-top.html#6',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>Collections2.orderedPermutations(list).iterator();

    assertNextPermutation(newArrayList(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;), permutations);
    assertNextPermutation(newArrayList(&quot;a&quot;, &quot;c&quot;, &quot;b&quot;), permutations);
    assertNextPermutation(newArrayList(&quot;b&quot;, &quot;a&quot;, &quot;c&quot;), permutations);
    assertNextPermutation(newArrayList(&quot;b&quot;, &quot;c&quot;, &quot;a&quot;), permutations);
    assertNextPermutation(newArrayList(&quot;c&quot;, &quot;a&quot;, &quot;b&quot;), permutations);
    assertNextPermutation(newArrayList(&quot;c&quot;, &quot;b&quot;, &quot;a&quot;), permutations);
    assertNoMorePermutations(permutations);
  }

  public void testOrderedPermutationSetRepeatedElements() {
    List&lt;Integer&gt; list = newArrayList</B></FONT>(1, 1, 2, 2);
<A NAME="7"></A>    Iterator&lt;List&lt;Integer&gt;&gt; permutations =
        Collections2.orderedPermutations(list, Ordering.natural()).iterator();

    assertNextPermutation(<FONT color="#38a4a5"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match6765-0.html#7',2,'match6765-top.html#7',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>newArrayList(1, 1, 2, 2), permutations);
    assertNextPermutation(newArrayList(1, 2, 1, 2), permutations);
    assertNextPermutation(newArrayList(1, 2, 2, 1), permutations);
    assertNextPermutation(newArrayList(2, 1, 1, 2), permutations);
    assertNextPermutation(newArrayList(2, 1, 2, 1), permutations);
    assertNextPermutation(newArrayList(2, 2, 1, 1), permutations);
    assertNoMorePermutations(permutations);
  }

  public void testOrderedPermutationSetRepeatedElementsSize() {
    List&lt;Integer&gt; list = newArrayList</B></FONT>(1, 1, 1, 1, 2, 2, 3);
    Collection&lt;List&lt;Integer&gt;&gt; permutations =
        Collections2.orderedPermutations(list, Ordering.natural());

    assertPermutationsCount(105, permutations);
  }
<A NAME="3"></A>
  public void testOrderedPermutationSetSizeOverflow() {
    // 12 elements won't overflow
    <FONT color="#53858b"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match6765-0.html#3',2,'match6765-top.html#3',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>assertEquals(
        479001600 /*12!*/,
        Collections2.orderedPermutations(newArrayList(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12))
            .size());
    // 13 elements overflow an int
    assertEquals(
        Integer.MAX_VALUE,
        Collections2.orderedPermutations(newArrayList(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13))
            .size());
    // 21 elements overflow a long
    assertEquals(
        Integer.MAX_VALUE,
        Collections2.orderedPermutations(
                newArrayList(
                    1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21))
            .size());

    // Almost force an overflow in the binomial coefficient calculation
    assertEquals(
        1391975640 /*C(34,14)*/,
        Collections2.orderedPermutations(concat(nCopies(20, 1), nCopies(14, 2))).size());
    // Do force an overflow in the binomial coefficient calculation
    assertEquals(
        Integer.MAX_VALUE,
        Collections2.orderedPermutations(concat(nCopies(21, 1), nCopies(14, 2))).size());
  }
<A NAME="2"></A>
  public void testOrderedPermutationSetContains() {
    List&lt;Integer&gt; list = newArrayList</B></FONT>(3, 2, 1);
    Collection&lt;List&lt;Integer&gt;&gt; permutationSet = <FONT color="#980517"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match6765-0.html#2',2,'match6765-top.html#2',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>Collections2.orderedPermutations(list);

    assertTrue(permutationSet.contains(newArrayList(1, 2, 3)));
    assertTrue(permutationSet.contains(newArrayList(2, 3, 1)));
    assertFalse(permutationSet.contains(newArrayList(1, 2)));
    assertFalse(permutationSet.contains(newArrayList(1, 1, 2, 3)));
    assertFalse(permutationSet.contains(newArrayList(1, 2, 3, 4)));
    assertFalse(permutationSet.contains(null));
  }

  public void testPermutationSetEmpty() {
    Collection&lt;List&lt;Integer&gt;&gt; permutationSet =
        Collections2.permutations(Collections.&lt;Integer&gt;emptyList());

    assertEquals(1, permutationSet.size());
    assertTrue(permutationSet.contains(Collections.&lt;Integer&gt;emptyList()));

    Iterator&lt;List&lt;Integer&gt;&gt; permutations = permutationSet.iterator();
    assertNextPermutation(Collections.&lt;Integer&gt;emptyList(), permutations);
    assertNoMorePermutations</B></FONT>(permutations);
  }
<A NAME="4"></A>
  public void testPermutationSetOneElement() {
    Iterator&lt;List&lt;Integer&gt;&gt; permutations =
        <FONT color="#6cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match6765-0.html#4',2,'match6765-top.html#4',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>Collections2.permutations(Collections.&lt;Integer&gt;singletonList(1)).iterator();
    assertNextPermutation(newArrayList(1), permutations);
    assertNoMorePermutations(permutations);
  }

  public void testPermutationSetTwoElements() {
    Iterator&lt;List&lt;Integer&gt;&gt; permutations = Collections2.permutations(newArrayList(1, 2)).iterator();
    assertNextPermutation(newArrayList(1, 2), permutations);
    assertNextPermutation(newArrayList(2, 1), permutations);
    assertNoMorePermutations(permutations);
  }

  public void testPermutationSetThreeElements() {
    Iterator&lt;List&lt;Integer&gt;&gt; permutations =
        Collections2.permutations(newArrayList(1, 2, 3)).iterator();
    assertNextPermutation(newArrayList(1, 2, 3), permutations);
<A NAME="11"></A>    assertNextPermutation</B></FONT>(newArrayList(1, 3, 2), permutations);
    assertNextPermutation(newArrayList(3, 1, 2), permutations);

    <FONT color="#b041ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match6765-0.html#11',2,'match6765-top.html#11',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>assertNextPermutation(newArrayList(3, 2, 1), permutations);
    assertNextPermutation(newArrayList(2, 3, 1), permutations);
    assertNextPermutation(newArrayList(2, 1, 3), permutations);
    assertNoMorePermutations(permutations);
  }
<A NAME="5"></A>
  public void testPermutationSetThreeElementsOutOfOrder() {
    Iterator&lt;List&lt;Integer&gt;&gt; permutations =
        <FONT color="#151b8d"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match6765-0.html#5',2,'match6765-top.html#5',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>Collections2.permutations(newArrayList(3, 2, 1)).iterator</B></FONT>();
    assertNextPermutation(newArrayList(3, 2, 1), permutations);
    assertNextPermutation(newArrayList(3, 1, 2), permutations);
    assertNextPermutation(newArrayList(1, 3, 2), permutations);

    assertNextPermutation(newArrayList(1, 2, 3), permutations);
    assertNextPermutation(newArrayList(2, 1, 3), permutations);
    assertNextPermutation(newArrayList(2, 3, 1), permutations);
    assertNoMorePermutations(permutations);
  }

  public void testPermutationSetThreeRepeatedElements() {
    Iterator&lt;List&lt;Integer&gt;&gt; permutations =
        Collections2.permutations(newArrayList(1, 1, 2)).iterator();
<A NAME="0"></A>    assertNextPermutation(newArrayList(1, 1, 2), permutations);
    assertNextPermutation(newArrayList</B></FONT>(1, 2, 1), permutations);
    assertNextPermutation(newArrayList(2, 1, 1), permutations);
    <FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match6765-0.html#0',2,'match6765-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>assertNextPermutation(newArrayList(2, 1, 1), permutations);
    assertNextPermutation(newArrayList(1, 2, 1), permutations);
    assertNextPermutation(newArrayList(1, 1, 2), permutations);
    assertNoMorePermutations(permutations);
  }

  public void testPermutationSetFourElements() {
    Iterator&lt;List&lt;Integer&gt;&gt; permutations =
        Collections2.permutations(newArrayList(1, 2, 3, 4)).iterator();
    assertNextPermutation(newArrayList(1, 2, 3, 4), permutations);
    assertNextPermutation(newArrayList(1, 2, 4, 3), permutations);
    assertNextPermutation(newArrayList(1, 4, 2, 3), permutations);
    assertNextPermutation(newArrayList(4, 1, 2, 3), permutations);

    assertNextPermutation(newArrayList(4, 1, 3, 2), permutations);
    assertNextPermutation(newArrayList(1, 4, 3, 2), permutations);
    assertNextPermutation(newArrayList(1, 3, 4, 2), permutations);
    assertNextPermutation(newArrayList(1, 3, 2, 4), permutations);

    assertNextPermutation(newArrayList(3, 1, 2, 4), permutations);
    assertNextPermutation(newArrayList(3, 1, 4, 2), permutations);
<A NAME="14"></A>    assertNextPermutation(newArrayList(3, 4, 1, 2), permutations);
    assertNextPermutation(newArrayList(4, 3, 1, 2), permutations);

    assertNextPermutation</B></FONT>(<FONT color="#842dce"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match6765-0.html#14',2,'match6765-top.html#14',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>newArrayList(4, 3, 2, 1), permutations);
    assertNextPermutation(newArrayList(3, 4, 2, 1), permutations);
    assertNextPermutation(newArrayList(3, 2, 4, 1), permutations);
    assertNextPermutation(newArrayList(3, 2, 1, 4), permutations);

    assertNextPermutation(newArrayList(2, 3, 1, 4), permutations);
    assertNextPermutation</B></FONT>(newArrayList(2, 3, 4, 1), permutations);
    assertNextPermutation(newArrayList(2, 4, 3, 1), permutations);
<A NAME="16"></A>    assertNextPermutation(newArrayList(4, 2, 3, 1), permutations);

    assertNextPermutation(newArrayList(4, 2, 1, 3), permutations);
    <FONT color="#2981b2"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match6765-0.html#16',2,'match6765-top.html#16',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>assertNextPermutation(newArrayList(2, 4, 1, 3), permutations);
    assertNextPermutation(newArrayList(2, 1, 4, 3), permutations);
    assertNextPermutation(newArrayList(2, 1, 3, 4), permutations);
    assertNoMorePermutations(permutations);
  }</B></FONT>

  public void testPermutationSetSize() {
    assertPermutationsCount(1, Collections2.permutations(Collections.&lt;Integer&gt;emptyList()));
    assertPermutationsCount(1, Collections2.permutations(newArrayList(1)));
    assertPermutationsCount(2, Collections2.permutations(newArrayList(1, 2)));
    assertPermutationsCount(6, Collections2.permutations(newArrayList(1, 2, 3)));
    assertPermutationsCount(5040, Collections2.permutations(newArrayList(1, 2, 3, 4, 5, 6, 7)));
    assertPermutationsCount(40320, Collections2.permutations(newArrayList(1, 2, 3, 4, 5, 6, 7, 8)));
  }
<A NAME="8"></A>
  public void testPermutationSetSizeOverflow() {
    // 13 elements overflow an int
    <FONT color="#c58917"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match6765-0.html#8',2,'match6765-top.html#8',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>assertEquals(
        Integer.MAX_VALUE,
        Collections2.permutations(newArrayList(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13)).size());
    // 21 elements overflow a long
    assertEquals(
        Integer.MAX_VALUE,
        Collections2.orderedPermutations(
                newArrayList(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20))
            .size());
    assertEquals(
        Integer.MAX_VALUE,
        Collections2.orderedPermutations(
                newArrayList(
                    1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21))
            .size());
<A NAME="10"></A>  }

  public void testPermutationSetContains() {
    List&lt;Integer&gt; list = <FONT color="#ad5910"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match6765-0.html#10',2,'match6765-top.html#10',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>newArrayList(3, 2, 1)</B></FONT>;
    Collection&lt;List&lt;Integer&gt;&gt; permutationSet = Collections2.permutations(list);

    assertTrue(permutationSet.contains(newArrayList(1, 2, 3)));
    assertTrue(permutationSet.contains(newArrayList(2, 3, 1)));
    assertFalse(permutationSet.contains(newArrayList(1, 2)));
    assertFalse</B></FONT>(permutationSet.contains(newArrayList(1, 1, 2, 3)));
    assertFalse(permutationSet.contains(newArrayList(1, 2, 3, 4)));
    assertFalse(permutationSet.contains(null));
  }

  private &lt;T&gt; void assertNextPermutation(
      List&lt;T&gt; expectedPermutation, Iterator&lt;List&lt;T&gt;&gt; permutations) {
    assertTrue(&quot;Expected another permutation, but there was none.&quot;, permutations.hasNext());
    assertEquals(expectedPermutation, permutations.next());
  }

  private &lt;T&gt; void assertNoMorePermutations(Iterator&lt;List&lt;T&gt;&gt; permutations) {
    assertFalse(&quot;Expected no more permutations, but there was one.&quot;, permutations.hasNext());
    try {
      permutations.next();
      fail(&quot;Expected NoSuchElementException.&quot;);
    } catch (NoSuchElementException expected) {
    }
  }

  private &lt;T&gt; void assertPermutationsCount(int expected, Collection&lt;List&lt;T&gt;&gt; permutationSet) {
    assertEquals(expected, permutationSet.size());
    Iterator&lt;List&lt;T&gt;&gt; permutations = permutationSet.iterator();
    for (int i = 0; i &lt; expected; i++) {
      assertTrue(permutations.hasNext());
<A NAME="18"></A>      permutations.next();
    }
    assertNoMorePermutations(permutations);
  <FONT color="#800517"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match6765-0.html#18',2,'match6765-top.html#18',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>}

  public void testToStringImplWithNullEntries() throws Exception {
    List&lt;String&gt; list = Lists.newArrayList();
    list.add(&quot;foo&quot;);
    list.add(null);

    assertEquals</B></FONT>(list.toString(), Collections2.toStringImpl(list));
  }
}
</PRE>
</div>
  </div>
</body>
</html>
