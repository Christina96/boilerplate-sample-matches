
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Tokens: 15, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>jedis-MDEwOlJlcG9zaXRvcnk3MTU2MDU=-flat-PipeliningTest.java</h3>
            <pre><code>1  package redis.clients.jedis;
2  import static org.junit.Assert.assertArrayEquals;
3  import static org.junit.Assert.assertEquals;
4  import static org.junit.Assert.assertFalse;
5  import static org.junit.Assert.assertNotNull;
6  import static org.junit.Assert.assertNull;
7  import static org.junit.Assert.assertTrue;
8  import static org.junit.Assert.fail;
9  import java.io.IOException;
10  import java.util.Arrays;
11  import java.util.Iterator;
12  import java.util.List;
13  import java.util.Map;
14  import java.util.Set;
15  import java.util.UUID;
16  import org.hamcrest.MatcherAssert;
17  import org.hamcrest.Matchers;
18  import org.junit.Test;
19  import redis.clients.jedis.exceptions.JedisDataException;
20  import redis.clients.jedis.resps.Tuple;
21  import redis.clients.jedis.commands.jedis.JedisCommandsTestBase;
22  import redis.clients.jedis.params.SetParams;
23  import redis.clients.jedis.util.SafeEncoder;
24  public class PipeliningTest extends JedisCommandsTestBase {
25    @Test
26    public void pipeline() {
27      Pipeline p = jedis.pipelined();
28      p.set("foo", "bar");
29      p.get("foo");
30      List<Object> results = p.syncAndReturnAll();
31      assertEquals(2, results.size());
32      assertEquals("OK", results.get(0));
33      assertEquals("bar", results.get(1));
34    }
35    @Test
36    public void pipelineResponse() {
37      jedis.set("string", "foo");
38      jedis.lpush("list", "foo");
39      jedis.hset("hash", "foo", "bar");
40      jedis.zadd("zset", 1, "foo");
41      jedis.sadd("set", "foo");
42      jedis.setrange("setrange", 0, "0123456789");
43      byte[] bytesForSetRange = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 };
44      jedis.setrange("setrangebytes".getBytes(), 0, bytesForSetRange);
45      Pipeline p = jedis.pipelined();
46      Response<String> string = p.get("string");
47      Response<String> list = p.lpop("list");
48      Response<String> hash = p.hget("hash", "foo");
49      Response<List<String>> zset = p.zrange("zset", 0, -1);
50      Response<String> set = p.spop("set");
51      Response<Boolean> blist = p.exists("list");
52      Response<Double> zincrby = p.zincrby("zset", 1, "foo");
53      Response<Long> zcard = p.zcard("zset");
54      p.lpush("list", "bar");
55      Response<List<String>> lrange = p.lrange("list", 0, -1);
56      Response<Map<String, String>> hgetAll = p.hgetAll("hash");
57      p.sadd("set", "foo");
58      Response<Set<String>> smembers = p.smembers("set");
59      Response<List<Tuple>> zrangeWithScores = p.zrangeWithScores("zset", 0, -1);
60      Response<String> getrange = p.getrange("setrange", 1, 3);
61      Response<byte[]> getrangeBytes = p.getrange("setrangebytes".getBytes(), 6, 8);
62      p.sync();
63      assertEquals("foo", string.get());
64      assertEquals("foo", list.get());
65      assertEquals("bar", hash.get());
66      assertEquals("foo", zset.get().iterator().next());
67      assertEquals("foo", set.get());
68      assertEquals(false, blist.get());
69      assertEquals(Double.valueOf(2), zincrby.get());
70      assertEquals(Long.valueOf(1), zcard.get());
71      assertEquals(1, lrange.get().size());
72      assertNotNull(hgetAll.get().get("foo"));
73      assertEquals(1, smembers.get().size());
74      assertEquals(1, zrangeWithScores.get().size());
75      assertEquals("123", getrange.get());
76      byte[] expectedGetRangeBytes = { 6, 7, 8 };
77      assertArrayEquals(expectedGetRangeBytes, getrangeBytes.get());
78    }
79    @Test
80    public void intermediateSyncs() {
81      jedis.set("string", "foo");
82      jedis.lpush("list", "foo");
83      jedis.hset("hash", "foo", "bar");
84      jedis.zadd("zset", 1, "foo");
85      jedis.sadd("set", "foo");
86      jedis.setrange("setrange", 0, "0123456789");
87      byte[] bytesForSetRange = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 };
88      jedis.setrange("setrangebytes".getBytes(), 0, bytesForSetRange);
89      Pipeline p = jedis.pipelined();
90      Response<String> string = p.get("string");
91      Response<String> list = p.lpop("list");
92      Response<String> hash = p.hget("hash", "foo");
93      Response<List<String>> zset = p.zrange("zset", 0, -1);
94      Response<String> set = p.spop("set");
95      Response<Boolean> blist = p.exists("list");
96      p.sync();
97      assertEquals("foo", string.get());
98      assertEquals("foo", list.get());
99      assertEquals("bar", hash.get());
100      assertEquals("foo", zset.get().iterator().next());
101      assertEquals("foo", set.get());
102      assertEquals(false, blist.get());
103      Response<Double> zincrby = p.zincrby("zset", 1, "foo");
104      Response<Long> zcard = p.zcard("zset");
105      p.lpush("list", "bar");
106      Response<List<String>> lrange = p.lrange("list", 0, -1);
107      Response<Map<String, String>> hgetAll = p.hgetAll("hash");
108      p.sadd("set", "foo");
109      p.sync();
110      assertEquals(Double.valueOf(2), zincrby.get());
111      assertEquals(Long.valueOf(1), zcard.get());
112      assertEquals(1, lrange.get().size());
113      assertNotNull(hgetAll.get().get("foo"));
114      Response<Set<String>> smembers = p.smembers("set");
115      Response<List<Tuple>> zrangeWithScores = p.zrangeWithScores("zset", 0, -1);
116      Response<String> getrange = p.getrange("setrange", 1, 3);
117      Response<byte[]> getrangeBytes = p.getrange("setrangebytes".getBytes(), 6, 8);
118      p.sync();
119      assertEquals(1, smembers.get().size());
120      assertEquals(1, zrangeWithScores.get().size());
121      assertEquals("123", getrange.get());
122      byte[] expectedGetRangeBytes = { 6, 7, 8 };
123      assertArrayEquals(expectedGetRangeBytes, getrangeBytes.get());
124    }
125    @Test
126    public void pipelineResponseWithData() {
127      jedis.zadd("zset", 1, "foo");
128      Pipeline p = jedis.pipelined();
129      Response<Double> score = p.zscore("zset", "foo");
130      p.sync();
131      assertNotNull(score.get());
132    }
133    @Test
134    public void pipelineBinarySafeHashCommands() {
135      jedis.hset("key".getBytes(), "f1".getBytes(), "v111".getBytes());
136      jedis.hset("key".getBytes(), "f22".getBytes(), "v2222".getBytes());
137      Pipeline p = jedis.pipelined();
138      Response<Map<byte[], byte[]>> fmap = p.hgetAll("key".getBytes());
139      Response<Set<byte[]>> fkeys = p.hkeys("key".getBytes());
140      Response<List<byte[]>> fordered = p.hmget("key".getBytes(), "f22".getBytes(), "f1".getBytes());
141      Response<List<byte[]>> fvals = p.hvals("key".getBytes());
142      p.sync();
143      assertNotNull(fmap.get());
144      Map<byte[], byte[]> map = fmap.get();
145      Set<byte[]> mapKeys = map.keySet();
146      Iterator<byte[]> iterMap = mapKeys.iterator();
147      byte[] firstMapKey = iterMap.next();
148      byte[] secondMapKey = iterMap.next();
149      assertFalse(iterMap.hasNext());
150      verifyHasBothValues(firstMapKey, secondMapKey, "f1".getBytes(), "f22".getBytes());
151      byte[] firstMapValue = map.get(firstMapKey);
152      byte[] secondMapValue = map.get(secondMapKey);
153      verifyHasBothValues(firstMapValue, secondMapValue, "v111".getBytes(), "v2222".getBytes());
154      assertNotNull(fkeys.get());
155      Iterator<byte[]> iter = fkeys.get().iterator();
156      byte[] firstKey = iter.next();
157      byte[] secondKey = iter.next();
158      assertFalse(iter.hasNext());
159      verifyHasBothValues(firstKey, secondKey, "f1".getBytes(), "f22".getBytes());
160      assertNotNull(fordered.get());
161      assertArrayEquals("v2222".getBytes(), fordered.get().get(0));
162      assertArrayEquals("v111".getBytes(), fordered.get().get(1));
163      assertNotNull(fvals.get());
164      assertEquals(2, fvals.get().size());
165      byte[] firstValue = fvals.get().get(0);
166      byte[] secondValue = fvals.get().get(1);
167      verifyHasBothValues(firstValue, secondValue, "v111".getBytes(), "v2222".getBytes());
168    }
169    private void verifyHasBothValues(byte[] firstKey, byte[] secondKey, byte[] value1, byte[] value2) {
170      assertFalse(Arrays.equals(firstKey, secondKey));
171      assertTrue(Arrays.equals(firstKey, value1) || Arrays.equals(firstKey, value2));
172      assertTrue(Arrays.equals(secondKey, value1) || Arrays.equals(secondKey, value2));
173    }
174    @Test
175    public void pipelineSelect() {
176      jedis.set("foo", "bar");
177      jedis.swapDB(0, 1);
178      Pipeline p = jedis.pipelined();
179      p.get("foo");
180      p.select(1);
181      p.get("foo");
182      assertEquals(Arrays.<Object>asList(null, "OK", "bar"), p.syncAndReturnAll());
183    }
184    @Test
185    public void pipelineResponseWithoutData() {
186      jedis.zadd("zset", 1, "foo");
187      Pipeline p = jedis.pipelined();
188      Response<Double> score = p.zscore("zset", "bar");
189      p.sync();
190      assertNull(score.get());
191    }
192    @Test(expected = IllegalStateException.class)
193    public void pipelineResponseWithinPipeline() {
194      jedis.set("string", "foo");
195      Pipeline p = jedis.pipelined();
196      Response<String> string = p.get("string");
197      string.get();
198      p.sync();
199    }
200    @Test
201    public void pipelineWithPubSub() {
202      Pipeline pipelined = jedis.pipelined();
203      Response<Long> p1 = pipelined.publish("foo", "bar");
204      Response<Long> p2 = pipelined.publish("foo".getBytes(), "bar".getBytes());
205      pipelined.sync();
206      assertEquals(0, p1.get().longValue());
207      assertEquals(0, p2.get().longValue());
208    }
209    @Test
210    public void canRetrieveUnsetKey() {
211      Pipeline p = jedis.pipelined();
212      Response<String> shouldNotExist = p.get(UUID.randomUUID().toString());
213      p.sync();
214      assertNull(shouldNotExist.get());
215    }
216    @Test
217    public void piplineWithError() {
218      Pipeline p = jedis.pipelined();
219      p.set("foo", "bar");
220      Response<Set<String>> error = p.smembers("foo");
221      Response<String> r = p.get("foo");
222      p.sync();
223      try {
224        error.get();
225        fail();
226      } catch (JedisDataException e) {
227      }
228      assertEquals(r.get(), "bar");
229    }
230    @Test(expected = IllegalStateException.class)
231    public void testJedisThrowExceptionWhenInPipeline() {
232      Pipeline pipeline = jedis.pipelined();
233      pipeline.set("foo", "3");
234      jedis.get("somekey");
235      fail("Can't use jedis instance when in Pipeline");
236    }
237    @Test
238    public void testReuseJedisWhenPipelineIsEmpty() {
239      Pipeline pipeline = jedis.pipelined();
240      pipeline.set("foo", "3");
241      pipeline.sync();
242      String result = jedis.get("foo");
243      assertEquals(result, "3");
244    }
245    @Test
246    public void testResetStateWhenInPipeline() {
247      Pipeline pipeline = jedis.pipelined();
248      pipeline.set("foo", "3");
249      jedis.resetState();
250      String result = jedis.get("foo");
251      assertEquals(result, "3");
252    }
253    @Test
254    public void waitReplicas() {
255      Pipeline p = jedis.pipelined();
256      p.set("wait", "replicas");
257      p.waitReplicas(1, 10);
258      p.sync();
259      try (Jedis j = new Jedis(HostAndPorts.getRedisServers().get(4))) {
260        j.auth("foobared");
261        assertEquals("replicas", j.get("wait"));
262      }
263    }
264    @Test
265    public void waitAof() {
266      Pipeline p = jedis.pipelined();
267      p.set("wait", "aof");
268      p.waitAOF(1L, 0L, 0L);
269      p.sync();
270      try (Jedis j = new Jedis(HostAndPorts.getRedisServers().get(4))) {
271        j.auth("foobared");
272        assertEquals("aof", j.get("wait"));
273      }
274    }
275    @Test
276    public void setGet() {
277      Pipeline p = jedis.pipelined();
278      Response<String> _ok = p.set("hello", "world");
279      Response<String> _world = p.setGet("hello", "jedis", SetParams.setParams());
280      Response<String> _jedis = p.get("hello");
281      Response<String> _null = p.setGet("key", "value", SetParams.setParams());
282      p.sync();
283      assertEquals("OK", _ok.get());
284      assertEquals("world", _world.get());
285      assertEquals("jedis", _jedis.get());
286      assertNull(_null.get());
287    }
288    @Test
289    public void setGetBinary() {
290      Pipeline p = jedis.pipelined();
291      Response<String> _ok = p.set("hello".getBytes(), "world".getBytes());
292      Response<byte[]> _world = p.setGet("hello".getBytes(), "jedis".getBytes(), SetParams.setParams());
293      Response<byte[]> _jedis = p.get("hello".getBytes());
294      Response<byte[]> _null = p.setGet("key".getBytes(), "value".getBytes(), SetParams.setParams());
295      p.sync();
296      assertEquals("OK", _ok.get());
297      assertArrayEquals("world".getBytes(), _world.get());
298      assertArrayEquals("jedis".getBytes(), _jedis.get());
299      assertNull(_null.get());
300    }
301    @Test
302    public void testEval() {
303      String script = "return 'success!'";
304      Pipeline p = jedis.pipelined();
305      Response<Object> result = p.eval(script);
306      p.sync();
307      assertEquals("success!", result.get());
308    }
309    @Test
310    public void testEvalWithBinary() {
311      String script = "return 'success!'";
312      Pipeline p = jedis.pipelined();
313      Response<Object> result = p.eval(SafeEncoder.encode(script));
314      p.sync();
315      assertArrayEquals(SafeEncoder.encode("success!"), (byte[]) result.get());
316    }
317    @Test
318    public void testEvalKeyAndArg() {
319      String key = "test";
320      String arg = "3";
321      String script = "redis.call('INCRBY', KEYS[1], ARGV[1]) redis.call('INCRBY', KEYS[1], ARGV[1])";
322      Pipeline p = jedis.pipelined();
323      p.set(key, "0");
324      Response<Object> result0 = p.eval(script, Arrays.asList(key), Arrays.asList(arg));
325      p.incr(key);
326      Response<Object> result1 = p.eval(script, Arrays.asList(key), Arrays.asList(arg));
327      Response<String> result2 = p.get(key);
328      p.sync();
329      assertNull(result0.get());
330      assertNull(result1.get());
331      assertEquals("13", result2.get());
332    }
333    @Test
334    public void testEvalKeyAndArgWithBinary() {
335      byte[] bKey = SafeEncoder.encode("test");
336      byte[] bArg = SafeEncoder.encode("3");
337      byte[] bScript = SafeEncoder
338          .encode("redis.call('INCRBY', KEYS[1], ARGV[1]) redis.call('INCRBY', KEYS[1], ARGV[1])");
339      Pipeline bP = jedis.pipelined();
340      bP.set(bKey, SafeEncoder.encode("0"));
341      Response<Object> bResult0 = bP.eval(bScript, Arrays.asList(bKey), Arrays.asList(bArg));
342      bP.incr(bKey);
343      Response<Object> bResult1 = bP.eval(bScript, Arrays.asList(bKey), Arrays.asList(bArg));
344      Response<byte[]> bResult2 = bP.get(bKey);
345      bP.sync();
346      assertNull(bResult0.get());
347      assertNull(bResult1.get());
348      assertArrayEquals(SafeEncoder.encode("13"), bResult2.get());
349    }
350    @Test
351    public void testEvalNestedLists() {
352      String script = "return { {KEYS[1]} , {2} }";
353      Pipeline p = jedis.pipelined();
354      Response<Object> result = p.eval(script, 1, "key1");
355      p.sync();
356      List<?> results = (List<?>) result.get();
357      MatcherAssert.assertThat((List<String>) results.get(0), Matchers.hasItem("key1"));
358      MatcherAssert.assertThat((List<Long>) results.get(1), Matchers.hasItem(2L));
359    }
360    @Test
361    public void testEvalNestedListsWithBinary() {
362      byte[] bScript = SafeEncoder.encode("return { {KEYS[1]} , {2} }");
363      byte[] bKey = SafeEncoder.encode("key1");
364      Pipeline p = jedis.pipelined();
365      Response<Object> result = p.eval(bScript, 1, bKey);
366      p.sync();
367      List<?> results = (List<?>) result.get();
368      MatcherAssert.assertThat((List<byte[]>) results.get(0), Matchers.hasItem(bKey));
369      MatcherAssert.assertThat((List<Long>) results.get(1), Matchers.hasItem(2L));
370    }
371    @Test
372    public void testEvalsha() {
<span onclick='openModal()' class='match'>373      String script = "return 'success!'";
374      String sha1 = jedis.scriptLoad(script);
375      assertTrue(jedis.scriptExists(sha1));
</span>376      Pipeline p = jedis.pipelined();
377      Response<Object> result = p.evalsha(sha1);
378      p.sync();
379      assertEquals("success!", result.get());
380    }
381    @Test
382    public void testEvalshaKeyAndArg() {
383      String key = "test";
384      String arg = "3";
385      String script = "redis.call('INCRBY', KEYS[1], ARGV[1]) redis.call('INCRBY', KEYS[1], ARGV[1])";
386      String sha1 = jedis.scriptLoad(script);
387      assertTrue(jedis.scriptExists(sha1));
388      Pipeline p = jedis.pipelined();
389      p.set(key, "0");
390      Response<Object> result0 = p.evalsha(sha1, Arrays.asList(key), Arrays.asList(arg));
391      p.incr(key);
392      Response<Object> result1 = p.evalsha(sha1, Arrays.asList(key), Arrays.asList(arg));
393      Response<String> result2 = p.get(key);
394      p.sync();
395      assertNull(result0.get());
396      assertNull(result1.get());
397      assertEquals("13", result2.get());
398    }
399    @Test
400    public void testEvalshaKeyAndArgWithBinary() {
401      byte[] bKey = SafeEncoder.encode("test");
402      byte[] bArg = SafeEncoder.encode("3");
403      String script = "redis.call('INCRBY', KEYS[1], ARGV[1]) redis.call('INCRBY', KEYS[1], ARGV[1])";
404      byte[] bScript = SafeEncoder.encode(script);
405      byte[] bSha1 = jedis.scriptLoad(bScript);
406      assertTrue(jedis.scriptExists(bSha1));
407      Pipeline p = jedis.pipelined();
408      p.set(bKey, SafeEncoder.encode("0"));
409      Response<Object> result0 = p.evalsha(bSha1, Arrays.asList(bKey), Arrays.asList(bArg));
410      p.incr(bKey);
411      Response<Object> result1 = p.evalsha(bSha1, Arrays.asList(bKey), Arrays.asList(bArg));
412      Response<byte[]> result2 = p.get(bKey);
413      p.sync();
414      assertNull(result0.get());
415      assertNull(result1.get());
416      assertArrayEquals(SafeEncoder.encode("13"), result2.get());
417    }
418    @Test
419    public void testSyncWithNoCommandQueued() {
420      Jedis jedis2 = new Jedis(hnp.getHost(), hnp.getPort(), 500);
421      Pipeline pipeline = jedis2.pipelined();
422      pipeline.sync();
423      jedis2.close();
424      jedis2 = new Jedis(hnp.getHost(), hnp.getPort(), 500);
425      pipeline = jedis2.pipelined();
426      List<Object> resp = pipeline.syncAndReturnAll();
427      assertTrue(resp.isEmpty());
428      jedis2.close();
429    }
430    @Test
431    public void testCloseable() throws IOException {
432      Jedis jedis2 = new Jedis(hnp.getHost(), hnp.getPort(), 500);
433      jedis2.auth("foobared");
434      Pipeline pipeline = jedis2.pipelined();
435      Response<String> retFuture1 = pipeline.set("a", "1");
436      Response<String> retFuture2 = pipeline.set("b", "2");
437      pipeline.close();
438      retFuture1.get();
439      retFuture2.get();
440      jedis2.close();
441    }
442  }
</code></pre>
        </div>
        <div class="column">
            <h3>jedis-MDEwOlJlcG9zaXRvcnk3MTU2MDU=-flat-ClusterScriptingCommandsTest.java</h3>
            <pre><code>1  package redis.clients.jedis.commands.jedis;
2  import static org.junit.Assert.assertEquals;
3  import static org.junit.Assert.assertTrue;
4  import java.util.ArrayList;
5  import java.util.Arrays;
6  import java.util.Collections;
7  import java.util.List;
8  import java.util.Map;
9  import java.util.function.Supplier;
10  import org.junit.Test;
11  import redis.clients.jedis.args.FlushMode;
12  import redis.clients.jedis.exceptions.JedisClusterOperationException;
13  import redis.clients.jedis.exceptions.JedisDataException;
14  public class ClusterScriptingCommandsTest extends ClusterJedisCommandsTestBase {
15    @Test(expected = JedisClusterOperationException.class)
16    public void testJedisClusterException() {
17      String script = "return {KEYS[1],KEYS[2],ARGV[1],ARGV[2],ARGV[3]}";
18      List<String> keys = new ArrayList<>();
19      keys.add("key1");
20      keys.add("key2");
21      List<String> args = new ArrayList<>();
22      args.add("first");
23      args.add("second");
24      args.add("third");
25      cluster.eval(script, keys, args);
26    }
27    @Test
28    public void testEval2() {
29      String script = "return redis.call('set',KEYS[1],'bar')";
30      int numKeys = 1;
31      String[] args = { "foo" };
32      cluster.eval(script, numKeys, args);
33      assertEquals("bar", cluster.get("foo"));
34    }
35    @Test
36    public void testScriptLoadAndScriptExists() {
37      String sha1 = cluster.scriptLoad("return redis.call('get','foo')", "key1");
38      assertTrue(cluster.scriptExists(sha1, "key1"));
39    }
40    @Test
41    public void testEvalsha() {
42      String sha1 = cluster.scriptLoad("return 10", "key1");
43      Object o = cluster.evalsha(sha1, 1, "key1");
44      assertEquals("10", o.toString());
45    }
46    @Test(expected = JedisClusterOperationException.class)
47    public void testJedisClusterException2() {
48      byte[] script = "return {KEYS[1],KEYS[2],ARGV[1],ARGV[2],ARGV[3]}".getBytes();
49      List<byte[]> keys = new ArrayList<byte[]>();
50      keys.add("key1".getBytes());
51      keys.add("key2".getBytes());
52      List<byte[]> args = new ArrayList<byte[]>();
53      args.add("first".getBytes());
54      args.add("second".getBytes());
55      args.add("third".getBytes());
56      cluster.eval(script, keys, args);
57    }
58    @Test
59    public void testBinaryEval() {
60      byte[] script = "return redis.call('set',KEYS[1],'bar')".getBytes();
61      byte[] args = "foo".getBytes();
62      cluster.eval(script, 1, args);
63      assertEquals("bar", cluster.get("foo"));
64    }
65    @Test
66    public void testBinaryScriptFlush() {
67      byte[] byteKey = "key1".getBytes();
68      cluster.scriptLoad("return redis.call('get','foo')".getBytes(), byteKey);
69      assertEquals("OK", cluster.scriptFlush(byteKey));
70      assertEquals("OK", cluster.scriptFlush(byteKey, FlushMode.SYNC));
71    }
72    @Test(expected = JedisDataException.class)
73    public void testBinaryScriptKill() {
74      byte[] byteKey = "key1".getBytes();
75      cluster.scriptKill(byteKey);
76    }
77    @Test
78    public void testBinaryScriptExists() {
79      byte[] byteKey = "key1".getBytes();
80      byte[] sha1 = cluster.scriptLoad("return redis.call('get','foo')".getBytes(), byteKey);
81      byte[][] arraySha1 = { sha1 };
82      assertEquals(Collections.singletonList(Boolean.TRUE), cluster.scriptExists(byteKey, arraySha1));
83    }
84    @Test
85    public void broadcast() {
<span onclick='openModal()' class='match'>86      String script_1 = "return 'jedis'";
87      String sha1_1 = cluster.scriptLoad(script_1);
88      String script_2 = "return 79";
</span>89      String sha1_2 = cluster.scriptLoad(script_2);
90      assertEquals(Arrays.asList(true, true), cluster.scriptExists(Arrays.asList(sha1_1, sha1_2)));
91      cluster.scriptFlush();
92      assertEquals(Arrays.asList(false, false), cluster.scriptExists(Arrays.asList(sha1_1, sha1_2)));
93    }
94  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from jedis-MDEwOlJlcG9zaXRvcnk3MTU2MDU=-flat-PipeliningTest.java</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from jedis-MDEwOlJlcG9zaXRvcnk3MTU2MDU=-flat-ClusterScriptingCommandsTest.java</div>
                </div>
                <div class="column column_space"><pre><code>373      String script = "return 'success!'";
374      String sha1 = jedis.scriptLoad(script);
375      assertTrue(jedis.scriptExists(sha1));
</pre></code></div>
                <div class="column column_space"><pre><code>86      String script_1 = "return 'jedis'";
87      String sha1_1 = cluster.scriptLoad(script_1);
88      String script_2 = "return 79";
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    