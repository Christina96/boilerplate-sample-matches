<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for MapsTransformValuesUnmodifiableIteratorTest.java &amp; FilesTest_1.java</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for MapsTransformValuesUnmodifiableIteratorTest.java &amp; FilesTest_1.java
      </h3>
<h1 align="center">
        34.4%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>MapsTransformValuesUnmodifiableIteratorTest.java (50.45208%)<th>FilesTest_1.java (26.172607%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(254-270)<td><a href="#" name="0">(638-652)</a><td align="center"><font color="#ff0000">26</font>
<tr onclick='openModal("#f63526")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f63526"><font color="#f63526">-</font><td><a href="#" name="1">(239-249)<td><a href="#" name="1">(621-633)</a><td align="center"><font color="#eb0000">24</font>
<tr onclick='openModal("#980517")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#980517"><font color="#980517">-</font><td><a href="#" name="2">(308-320)<td><a href="#" name="2">(449-465)</a><td align="center"><font color="#c40000">20</font>
<tr onclick='openModal("#53858b")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#53858b"><font color="#53858b">-</font><td><a href="#" name="3">(168-178)<td><a href="#" name="3">(111-121)</a><td align="center"><font color="#c40000">20</font>
<tr onclick='openModal("#6cc417")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#6cc417"><font color="#6cc417">-</font><td><a href="#" name="4">(219-231)<td><a href="#" name="4">(342-352)</a><td align="center"><font color="#b00000">18</font>
<tr onclick='openModal("#151b8d")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#151b8d"><font color="#151b8d">-</font><td><a href="#" name="5">(183-192)<td><a href="#" name="5">(193-204)</a><td align="center"><font color="#b00000">18</font>
<tr onclick='openModal("#8c8774")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#8c8774"><font color="#8c8774">-</font><td><a href="#" name="6">(277-290)<td><a href="#" name="6">(516-525)</a><td align="center"><font color="#a60000">17</font>
<tr onclick='openModal("#38a4a5")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#38a4a5"><font color="#38a4a5">-</font><td><a href="#" name="7">(358-364)<td><a href="#" name="7">(54-70)</a><td align="center"><font color="#9c0000">16</font>
<tr onclick='openModal("#c58917")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#c58917"><font color="#c58917">-</font><td><a href="#" name="8">(197-205)<td><a href="#" name="8">(228-237)</a><td align="center"><font color="#930000">15</font>
<tr onclick='openModal("#83a33a")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#83a33a"><font color="#83a33a">-</font><td><a href="#" name="9">(211-218)<td><a href="#" name="9">(131-138)</a><td align="center"><font color="#890000">14</font>
<tr onclick='openModal("#ad5910")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#ad5910"><font color="#ad5910">-</font><td><a href="#" name="10">(290-299)<td><a href="#" name="10">(587-598)</a><td align="center"><font color="#750000">12</font>
<tr onclick='openModal("#b041ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#b041ff"><font color="#b041ff">-</font><td><a href="#" name="11">(206-211)<td><a href="#" name="11">(253-259)</a><td align="center"><font color="#6b0000">11</font>
<tr onclick='openModal("#571b7e")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#571b7e"><font color="#571b7e">-</font><td><a href="#" name="12">(17-28)<td><a href="#" name="12">(17-29)</a><td align="center"><font color="#6b0000">11</font>
<tr onclick='openModal("#3b9c9c")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#3b9c9c"><font color="#3b9c9c">-</font><td><a href="#" name="13">(370-376)<td><a href="#" name="13">(294-299)</a><td align="center"><font color="#620000">10</font>
<tr onclick='openModal("#842dce")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#842dce"><font color="#842dce">-</font><td><a href="#" name="14">(339-346)<td><a href="#" name="14">(271-277)</a><td align="center"><font color="#620000">10</font>
<tr onclick='openModal("#f52887")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f52887"><font color="#f52887">-</font><td><a href="#" name="15">(61-67)<td><a href="#" name="15">(432-438)</a><td align="center"><font color="#620000">10</font>
<tr onclick='openModal("#2981b2")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#2981b2"><font color="#2981b2">-</font><td><a href="#" name="16">(379-383)<td><a href="#" name="16">(355-358)</a><td align="center"><font color="#580000">9</font>
<tr onclick='openModal("#3090c7")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#3090c7"><font color="#3090c7">-</font><td><a href="#" name="17">(152-158)<td><a href="#" name="17">(472-478)</a><td align="center"><font color="#580000">9</font>
<tr onclick='openModal("#800517")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#800517"><font color="#800517">-</font><td><a href="#" name="18">(49-55)<td><a href="#" name="18">(99-105)</a><td align="center"><font color="#580000">9</font>
</td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>MapsTransformValuesUnmodifiableIteratorTest.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 <font color="#571b7e"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>package com.google.common.collect;
2 import com.google.common.annotations.GwtCompatible;
3 import com.google.common.base.Function;
4 import com.google.common.base.Functions;
5 import com.google.common.collect.testing.MapInterfaceTest;
6 import java.util.Collection;
7 import java.util.Iterator;
8 import java.util.Map;
9 import java.util.Map.Entry;
10 import java.util.Set;
11 import</b></font> org.checkerframework.checker.nullness.qual.Nullable;
12 @GwtCompatible
13 public class MapsTransformValuesUnmodifiableIteratorTest extends MapInterfaceTest&lt;String, String&gt; {
14   public MapsTransformValuesUnmodifiableIteratorTest() {
15   }
16   private static class UnmodifiableIteratorMap&lt;K, V&gt; extends ForwardingMap&lt;K, V&gt; {
17 <a name="18"></a>    final Map&lt;K, V&gt; delegate;
18     UnmodifiableIteratorMap(Map&lt;K, V&gt; delegate) {
19       <font color="#800517"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>this.delegate = delegate;
20     }
21     @Override
22     protected Map&lt;K, V&gt; delegate() {
23       return delegate;
24     }</b></font>
25     @Override
26 <a name="15"></a>    public Set&lt;K&gt; keySet() {
27       return new ForwardingSet&lt;K&gt;() {
28         @Override
29         protected Set&lt;K&gt; delegate() <font color="#f52887"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>{
30           return delegate.keySet();
31         }
32         @Override
33         public Iterator&lt;K&gt; iterator() {
34           return Iterators.unmodifiableIterator</b></font>(delegate.keySet().iterator());
35         }
36         @Override
37         public boolean removeAll(Collection&lt;?&gt; c) {
38           return delegate.keySet().removeAll(c);
39         }
40         @Override
41         public boolean retainAll(Collection&lt;?&gt; c) {
42           return delegate.keySet().retainAll(c);
43         }
44       };
45     }
46     @Override
47     public Collection&lt;V&gt; values() {
48       return new ForwardingCollection&lt;V&gt;() {
49         @Override
50         protected Collection&lt;V&gt; delegate() {
51           return delegate.values();
52         }
53         @Override
54         public Iterator&lt;V&gt; iterator() {
55           return Iterators.unmodifiableIterator(delegate.values().iterator());
56         }
57         @Override
58         public boolean removeAll(Collection&lt;?&gt; c) {
59           return delegate.values().removeAll(c);
60         }
61         @Override
62         public boolean retainAll(Collection&lt;?&gt; c) {
63           return delegate.values().retainAll(c);
64         }
65       };
66     }
67     @Override
68     public Set&lt;Entry&lt;K, V&gt;&gt; entrySet() {
69       return new ForwardingSet&lt;Entry&lt;K, V&gt;&gt;() {
70         @Override
71         protected Set&lt;Entry&lt;K, V&gt;&gt; delegate() {
72           return delegate.entrySet();
73         }
74         @Override
75         public Iterator&lt;Entry&lt;K, V&gt;&gt; iterator() {
76           return Iterators.unmodifiableIterator(delegate.entrySet().iterator());
77         }
78         @Override
79         public boolean removeAll(Collection&lt;?&gt; c) {
80           return delegate.entrySet().removeAll(c);
81         }
82         @Override
83         public boolean retainAll(Collection&lt;?&gt; c) {
84           return delegate.entrySet().retainAll(c);
85         }
86       };
87     }
88   }
89   @Override
90   protected Map&lt;String, String&gt; makeEmptyMap() {
91     Map&lt;String, Integer&gt; underlying = Maps.newHashMap();
92     return Maps.transformValues(
93         new UnmodifiableIteratorMap&lt;String, Integer&gt;(underlying), Functions.toStringFunction());
94   }
95   @Override
96   protected Map&lt;String, String&gt; makePopulatedMap() {
97     Map&lt;String, Integer&gt; underlying = Maps.newHashMap();
98     underlying.put("a", 1);
99     underlying.put("b", 2);
100     underlying.put("c", 3);
101     return Maps.transformValues(
102         new UnmodifiableIteratorMap&lt;String, Integer&gt;(underlying), Functions.toStringFunction());
103   }
104 <a name="17"></a>
105   @Override
106   protected String getKeyNotInPopulatedMap() throws UnsupportedOperationException {
107     <font color="#3090c7"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>return "z";
108   }
109   @Override
110   protected String getValueNotInPopulatedMap() throws UnsupportedOperationException {
111     return "26";
112   }</b></font>
113   private void assertMapsEqual(Map&lt;?, ?&gt; expected, Map&lt;?, ?&gt; map) {
114     assertEquals(expected, map);
115     assertEquals(expected.hashCode(), map.hashCode());
116     assertEquals(expected.entrySet(), map.entrySet());
117 <a name="3"></a>
118     <font color="#53858b"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>Collection&lt;?&gt; expectedValues = expected.values();
119     Collection&lt;?&gt; mapValues = map.values();
120     assertEquals(expectedValues.size(), mapValues.size());
121     assertTrue(expectedValues.containsAll(mapValues));
122     assertTrue(mapValues.containsAll(expectedValues));
123   }
124   public void testTransformEmptyMapEquality() {
125     Map&lt;String, String&gt; map =
126         Maps.transformValues(ImmutableMap.&lt;String, Integer&gt;of(), Functions.toStringFunction());
127     assertMapsEqual</b></font>(Maps.newHashMap(), map);
128   }
129 <a name="5"></a>
130   public void testTransformSingletonMapEquality() {
131     Map&lt;String, String&gt; map =
132         Maps.transformValues(<font color="#151b8d"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>ImmutableMap.of("a", 1), Functions.toStringFunction());
133     Map&lt;String, String&gt; expected = ImmutableMap.of("a", "1");
134     assertMapsEqual(expected, map);
135     assertEquals(expected.get("a"), map.get("a"));
136   }
137   public void testTransformIdentityFunctionEquality() {
138     Map&lt;String, Integer&gt; underlying = ImmutableMap.of("a", 1);
139     Map&lt;String, Integer&gt; map = Maps.transformValues(underlying, Functions.&lt;Integer&gt;identity());
140     assertMapsEqual</b></font>(underlying, map);
141   }
142 <a name="8"></a>
143   public void testTransformPutEntryIsUnsupported() {
144     Map&lt;String, String&gt; map =
145         Maps.transformValues(ImmutableMap.of("a", 1), <font color="#c58917"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>Functions.toStringFunction());
146     try {
147       map.put("b", "2");
148       fail();
149     } catch (UnsupportedOperationException expected) {
150     }
151 <a name="11"></a>
152     try {
153       map.putAll(ImmutableMap.of</b></font>("b", "2"));
154       <font color="#b041ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>fail();
155     } catch (UnsupportedOperationException expected) {
156 <a name="9"></a>    }
157     try {
158       <font color="#83a33a"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>map.entrySet().iterator().next</b></font>().setValue("one");
159       fail();
160     } catch (UnsupportedOperationException expected) {
161     }
162   }
163 <a name="4"></a>
164   public void testTransformRemoveEntry() {
165     Map&lt;String, Integer&gt; underlying = Maps.newHashMap</b></font>();
166     <font color="#6cc417"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>underlying.put("a", 1);
167     Map&lt;String, String&gt; map = Maps.transformValues(underlying, Functions.toStringFunction());
168     assertEquals("1", map.remove("a"));
169     assertNull(map.remove("b"));
170   }
171   public void testTransformEqualityOfMapsWithNullValues() {
172     Map&lt;String, String&gt; underlying = Maps.newHashMap();
173     underlying.put("a", null);
174     underlying.put("b", "");
175     Map&lt;String, Boolean&gt; map =
176         Maps.transformValues</b></font>(
177             underlying,
178             new Function&lt;String, Boolean&gt;() {
179               @Override
180               public Boolean apply(@Nullable String from) {
181 <a name="1"></a>                return from == null;
182               }
183             });
184     Map&lt;String, Boolean&gt; expected = <font color="#f63526"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>ImmutableMap.of("a", true, "b", false);
185     assertMapsEqual(expected, map);
186     assertEquals(expected.get("a"), map.get("a"));
187     assertEquals(expected.containsKey("a"), map.containsKey("a"));
188     assertEquals(expected.get("b"), map.get("b"));
189     assertEquals(expected.containsKey("b"), map.containsKey("b"));
190     assertEquals(expected.get("c"), map.get("c"));
191     assertEquals(expected.containsKey("c"), map.containsKey("c"));
192   }
193   public void testTransformReflectsUnderlyingMap() {</b></font>
194     Map&lt;String, Integer&gt; underlying = Maps.newHashMap();
195 <a name="0"></a>    underlying.put("a", 1);
196     underlying.put("b", 2);
197     underlying.put("c", 3);
198     Map&lt;String, String&gt; map = <font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>Maps.transformValues(underlying, Functions.toStringFunction());
199     assertEquals(underlying.size(), map.size());
200     underlying.put("d", 4);
201     assertEquals(underlying.size(), map.size());
202     assertEquals("4", map.get("d"));
203     underlying.remove("c");
204     assertEquals(underlying.size(), map.size());
205     assertFalse(map.containsKey("c"));
206     underlying.clear();
207     assertEquals(underlying.size(), map.size());
208   }
209   public void testTransformChangesAreReflectedInUnderlyingMap() {
210     Map&lt;String, Integer&gt; underlying = Maps.newLinkedHashMap()</b></font>;
211     underlying.put("a", 1);
212     underlying.put("b", 2);
213     underlying.put("c", 3);
214 <a name="6"></a>    underlying.put("d", 4);
215     underlying.put("e", 5);
216     underlying.put("f", 6);
217     <font color="#8c8774"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>underlying.put("g", 7);
218     Map&lt;String, String&gt; map = Maps.transformValues(underlying, Functions.toStringFunction());
219     map.remove("a");
220     assertFalse(underlying.containsKey("a"));
221     Set&lt;String&gt; keys = map.keySet();
222     keys.remove("b");
223     assertFalse(underlying.containsKey("b"));
224 <a name="10"></a>    Iterator&lt;String&gt; keyIterator = keys.iterator();
225     keyIterator.next();
226     keyIterator.remove();
227     assertFalse</b></font>(<font color="#ad5910"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>underlying.containsKey("c"));
228     Collection&lt;String&gt; values = map.values();
229     values.remove("4");
230     assertFalse(underlying.containsKey("d"));
231     Iterator&lt;String&gt; valueIterator = values.iterator();
232     valueIterator.next();
233     valueIterator.remove();
234     assertFalse(underlying.containsKey</b></font>("e"));
235     Set&lt;Entry&lt;String, String&gt;&gt; entries = map.entrySet();
236     Entry&lt;String, String&gt; firstEntry = entries.iterator().next();
237     entries.remove(firstEntry);
238     assertFalse(underlying.containsKey("f"));
239 <a name="2"></a>
240     Iterator&lt;Entry&lt;String, String&gt;&gt; entryIterator = entries.iterator();
241     entryIterator.next();
242     <font color="#980517"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>entryIterator.remove();
243     assertFalse(underlying.containsKey("g"));
244     assertTrue(underlying.isEmpty());
245     assertTrue(map.isEmpty());
246     assertTrue(keys.isEmpty());
247     assertTrue(values.isEmpty());
248     assertTrue(entries.isEmpty());
249   }
250   public void testTransformEquals() {
251     Map&lt;String, Integer&gt; underlying = ImmutableMap.of("a", 0, "b", 1, "c", 2);
252     Map&lt;String, Integer&gt; expected = Maps.transformValues(underlying, Functions.&lt;Integer&gt;identity())</b></font>;
253     assertMapsEqual(expected, expected);
254     Map&lt;String, Integer&gt; equalToUnderlying = Maps.newTreeMap();
255     equalToUnderlying.putAll(underlying);
256     Map&lt;String, Integer&gt; map =
257         Maps.transformValues(equalToUnderlying, Functions.&lt;Integer&gt;identity());
258     assertMapsEqual(expected, map);
259     map =
260         Maps.transformValues(
261             ImmutableMap.of("a", 1, "b", 2, "c", 3),
262             new Function&lt;Integer, Integer&gt;() {
263               @Override
264               public Integer apply(Integer from) {
265 <a name="14"></a>                return from - 1;
266               }
267             });
268     <font color="#842dce"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>assertMapsEqual(expected, map);
269   }
270   public void testTransformEntrySetContains() {
271     Map&lt;String, Boolean&gt; underlying = Maps.newHashMap();
272     underlying.put("a", null);
273     underlying.put("b", true);
274     underlying.put</b></font>(null, true);
275     Map&lt;String, Boolean&gt; map =
276         Maps.transformValues(
277             underlying,
278             new Function&lt;Boolean, Boolean&gt;() {
279               @Override
280               public Boolean apply(@Nullable Boolean from) {
281                 return (from == null) ? true : null;
282 <a name="7"></a>              }
283             });
284     Set&lt;Entry&lt;String, Boolean&gt;&gt; entries = <font color="#38a4a5"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>map.entrySet();
285     assertTrue(entries.contains(Maps.immutableEntry("a", true)));
286     assertTrue(entries.contains(Maps.immutableEntry("b", (Boolean) null)));
287     assertTrue(entries.contains(Maps.immutableEntry((String) null, (Boolean) null)));
288     assertFalse(entries.contains(Maps.immutableEntry("c", (Boolean) null)));
289     assertFalse(entries.contains(Maps.immutableEntry</b></font>((String) null, true)));
290   }
291 <a name="13"></a>  @Override
292   public void testKeySetRemoveAllNullFromEmpty() {
293     try {
294       <font color="#3b9c9c"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>super.testKeySetRemoveAllNullFromEmpty();
295     } catch (RuntimeException tolerated) {
296     }
297   }
298 <a name="16"></a>  @Override</b></font>
299   public void testEntrySetRemoveAllNullFromEmpty() {
300     try {
301       <font color="#2981b2"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>super.testEntrySetRemoveAllNullFromEmpty();
302     } catch (RuntimeException tolerated) {
303     }
304   }</b></font>
305 }
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>FilesTest_1.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 <font color="#571b7e"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>package com.google.common.io;
2 import static com.google.common.truth.Truth.assertThat;
3 import com.google.common.base.Charsets;
4 import com.google.common.collect.ImmutableList;
5 import com.google.common.hash.Hashing;
6 import com.google.common.primitives.Bytes;
7 import java.io.BufferedReader;
8 import java.io.BufferedWriter;
9 import java.io.ByteArrayOutputStream;
10 import java.io.File;
11 import</b></font> java.io.FileNotFoundException;
12 import java.io.IOException;
13 import java.io.PrintWriter;
14 import java.io.RandomAccessFile;
15 import java.nio.ByteBuffer;
16 import java.nio.MappedByteBuffer;
17 import java.nio.channels.FileChannel.MapMode;
18 import java.util.ArrayList;
19 import java.util.Arrays;
20 import java.util.List;
21 import java.util.Random;
22 import junit.framework.TestSuite;
23 public class FilesTest extends IoTestCase {
24 <a name="7"></a>
25   public static TestSuite suite() {
26     TestSuite suite = new TestSuite();
27     <font color="#38a4a5"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>suite.addTest(
28         ByteSourceTester.tests(
29             "Files.asByteSource[File]", SourceSinkFactories.fileByteSourceFactory(), true));
30     suite.addTest(
31         ByteSinkTester.tests("Files.asByteSink[File]", SourceSinkFactories.fileByteSinkFactory()));
32     suite.addTest(
33         ByteSinkTester.tests(
34             "Files.asByteSink[File, APPEND]", SourceSinkFactories.appendingFileByteSinkFactory()));
35     suite.addTest(
36         CharSourceTester.tests(
37             "Files.asCharSource[File, Charset]",
38             SourceSinkFactories.fileCharSourceFactory(),
39             false));
40     suite.addTest(
41         CharSinkTester.tests(
42             "Files.asCharSink[File, Charset]", SourceSinkFactories.fileCharSinkFactory()));
43     suite.addTest</b></font>(
44         CharSinkTester.tests(
45             "Files.asCharSink[File, Charset, APPEND]",
46             SourceSinkFactories.appendingFileCharSinkFactory()));
47     suite.addTestSuite(FilesTest.class);
48     return suite;
49   }
50   public void testRoundTripSources() throws Exception {
51     File asciiFile = getTestFile("ascii.txt");
52     ByteSource byteSource = Files.asByteSource(asciiFile);
53     assertSame(byteSource, byteSource.asCharSource(Charsets.UTF_8).asByteSource(Charsets.UTF_8));
54   }
55   public void testToByteArray() throws IOException {
56     File asciiFile = getTestFile("ascii.txt");
57     File i18nFile = getTestFile("i18n.txt");
58     assertTrue(Arrays.equals(ASCII.getBytes(Charsets.US_ASCII), Files.toByteArray(asciiFile)));
59     assertTrue(Arrays.equals(I18N.getBytes(Charsets.UTF_8), Files.toByteArray(i18nFile)));
60     assertTrue(Arrays.equals(I18N.getBytes(Charsets.UTF_8), Files.asByteSource(i18nFile).read()));
61   }
62   private static class BadLengthFile extends File {
63     private final long badLength;
64 <a name="18"></a>
65     public BadLengthFile(File delegate, long badLength) {
66       super(delegate.getPath());
67       <font color="#800517"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>this.badLength = badLength;
68     }
69     @Override
70     public long length() {
71       return badLength;
72     }</b></font>
73     private static final long serialVersionUID = 0;
74 <a name="3"></a>  }
75   public void testToString() throws IOException {
76     <font color="#53858b"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>File asciiFile = getTestFile("ascii.txt");
77     File i18nFile = getTestFile("i18n.txt");
78     assertEquals(ASCII, Files.toString(asciiFile, Charsets.US_ASCII));
79     assertEquals(I18N, Files.toString(i18nFile, Charsets.UTF_8));
80     assertThat(Files.toString(i18nFile, Charsets.US_ASCII)).isNotEqualTo(I18N);
81   }
82   public void testWriteString() throws IOException {
83     File temp = createTempFile();
84     Files.write(I18N, temp, Charsets.UTF_16LE);
85     assertEquals(I18N, Files.toString</b></font>(temp, Charsets.UTF_16LE));
86   }
87   public void testWriteBytes() throws IOException {
88     File temp = createTempFile();
89     byte[] data = newPreFilledByteArray(2000);
90     Files.write(data, temp);
91 <a name="9"></a>    assertTrue(Arrays.equals(data, Files.toByteArray(temp)));
92     try {
93       <font color="#83a33a"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>Files.write(null, temp);
94       fail("expected exception");
95     } catch (NullPointerException expected) {
96     }
97   }
98   public void testAppendString() throws IOException {
99     File temp = createTempFile</b></font>();
100     Files.append(I18N, temp, Charsets.UTF_16LE);
101     assertEquals(I18N, Files.toString(temp, Charsets.UTF_16LE));
102     Files.append(I18N, temp, Charsets.UTF_16LE);
103     assertEquals(I18N + I18N, Files.toString(temp, Charsets.UTF_16LE));
104     Files.append(I18N, temp, Charsets.UTF_16LE);
105     assertEquals(I18N + I18N + I18N, Files.toString(temp, Charsets.UTF_16LE));
106   }
107   public void testCopyToOutputStream() throws IOException {
108     File i18nFile = getTestFile("i18n.txt");
109     ByteArrayOutputStream out = new ByteArrayOutputStream();
110     Files.copy(i18nFile, out);
111     assertEquals(I18N, out.toString("UTF-8"));
112   }
113   public void testCopyToAppendable() throws IOException {
114     File i18nFile = getTestFile("i18n.txt");
115     StringBuilder sb = new StringBuilder();
116     Files.copy(i18nFile, Charsets.UTF_8, sb);
117     assertEquals(I18N, sb.toString());
118   }
119   public void testCopyFile() throws IOException {
120     File i18nFile = getTestFile("i18n.txt");
121     File temp = createTempFile();
122     Files.copy(i18nFile, temp);
123     assertEquals(I18N, Files.toString(temp, Charsets.UTF_8));
124   }
125   public void testCopyEqualFiles() throws IOException {
126     File temp1 = createTempFile();
127     File temp2 = file(temp1.getPath());
128     assertEquals(temp1, temp2);
129     Files.write(ASCII, temp1, Charsets.UTF_8);
130     try {
131       Files.copy(temp1, temp2);
132       fail("Expected an IAE to be thrown but wasn't");
133     } catch (IllegalArgumentException expected) {
134     }
135     assertEquals(ASCII, Files.toString(temp1, Charsets.UTF_8));
136   }
137   public void testCopySameFile() throws IOException {
138     File temp = createTempFile();
139     Files.write(ASCII, temp, Charsets.UTF_8);
140     try {
141       Files.copy(temp, temp);
142       fail("Expected an IAE to be thrown but wasn't");
143     } catch (IllegalArgumentException expected) {
144     }
145     assertEquals(ASCII, Files.toString(temp, Charsets.UTF_8));
146 <a name="5"></a>  }
147   public void testCopyIdenticalFiles() throws IOException {
148     File temp1 = <font color="#151b8d"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>createTempFile();
149     Files.write(ASCII, temp1, Charsets.UTF_8);
150     File temp2 = createTempFile();
151     Files.write(ASCII, temp2, Charsets.UTF_8);
152     Files.copy(temp1, temp2);
153     assertEquals(ASCII, Files.toString(temp2, Charsets.UTF_8));
154   }
155   public void testEqual() throws IOException {
156     File asciiFile = getTestFile("ascii.txt");
157     File i18nFile = getTestFile("i18n.txt");
158     assertFalse(Files.equal</b></font>(asciiFile, i18nFile));
159     assertTrue(Files.equal(asciiFile, asciiFile));
160     File temp = createTempFile();
161     Files.copy(asciiFile, temp);
162     assertTrue(Files.equal(asciiFile, temp));
163     Files.copy(i18nFile, temp);
164     assertTrue(Files.equal(i18nFile, temp));
165     Files.copy(asciiFile, temp);
166     RandomAccessFile rf = new RandomAccessFile(temp, "rw");
167     rf.writeByte(0);
168     rf.close();
169     assertEquals(asciiFile.length(), temp.length());
170     assertFalse(Files.equal(asciiFile, temp));
171     assertTrue(Files.asByteSource(asciiFile).contentEquals(Files.asByteSource(asciiFile)));
172     assertTrue(Files.equal(asciiFile, new BadLengthFile(asciiFile, 0)));
173 <a name="8"></a>  }
174   public void testNewReader() throws IOException {
175     File asciiFile = <font color="#c58917"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>getTestFile("ascii.txt");
176     try {
177       Files.newReader(asciiFile, null);
178       fail("expected exception");
179     } catch (NullPointerException expected) {
180     }
181     try {
182       Files.newReader(null, Charsets.UTF_8);
183       fail</b></font>("expected exception");
184     } catch (NullPointerException expected) {
185     }
186     BufferedReader r = Files.newReader(asciiFile, Charsets.US_ASCII);
187     try {
188       assertEquals(ASCII, r.readLine());
189     } finally {
190       r.close();
191     }
192   }
193   public void testNewWriter() throws IOException {
194 <a name="11"></a>    File temp = createTempFile();
195     try {
196       Files.newWriter(temp, null);
197       <font color="#b041ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>fail("expected exception");
198     } catch (NullPointerException expected) {
199     }
200     try {
201       Files.newWriter(null, Charsets.UTF_8);
202       fail</b></font>("expected exception");
203     } catch (NullPointerException expected) {
204     }
205     BufferedWriter w = Files.newWriter(temp, Charsets.UTF_8);
206     try {
207       w.write(I18N);
208     } finally {
209       w.close();
210 <a name="14"></a>    }
211     File i18nFile = getTestFile("i18n.txt");
212     assertTrue(<font color="#842dce"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>Files.equal(i18nFile, temp));
213   }
214   public void testTouch() throws IOException {
215     File temp = createTempFile();
216     assertTrue(temp.exists());
217     assertTrue</b></font>(temp.delete());
218     assertFalse(temp.exists());
219     Files.touch(temp);
220     assertTrue(temp.exists());
221     Files.touch(temp);
222     assertTrue(temp.exists());
223     try {
224       Files.touch(
225           new File(temp.getPath()) {
226             @Override
227             public boolean setLastModified(long t) {
228               return false;
229             }
230 <a name="13"></a>
231             private static final long serialVersionUID = 0;
232           });
233       <font color="#3b9c9c"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>fail("expected exception");
234     } catch (IOException expected) {
235     }
236   }
237   public void t</b></font>estTouchTime() throws IOException {
238     File temp = createTempFile();
239     assertTrue(temp.exists());
240     temp.setLastModified(0);
241     assertEquals(0, temp.lastModified());
242     Files.touch(temp);
243     assertThat(temp.lastModified()).isNotEqualTo(0);
244   }
245   public void testCreateParentDirs_root() throws IOException {
246     File file = root();
247     assertNull(file.getParentFile());
248     assertNull(file.getCanonicalFile().getParentFile());
249     Files.createParentDirs(file);
250   }
251   public void testCreateParentDirs_relativePath() throws IOException {
252     File file = file("nonexistent.file");
253     assertNull(file.getParentFile());
254     assertNotNull(file.getCanonicalFile().getParentFile());
255     Files.createParentDirs(file);
256   }
257   public void testCreateParentDirs_noParentsNeeded() throws IOException {
258     File file = file(getTempDir(), "nonexistent.file");
259     assertTrue(file.getParentFile().exists());
260     Files.createParentDirs(file);
261   }
262   public void testCreateParentDirs_oneParentNeeded() throws IOException {
263     File file = file(getTempDir(), "parent", "nonexistent.file");
264     File parent = file.getParentFile();
265     assertFalse(parent.exists());
266     try {
267       Files.createParentDirs(file);
268       assertTrue(parent.exists());
269     } finally {
270       assertTrue(parent.delete());
271     }
272   }
273 <a name="4"></a>
274   public void testCreateParentDirs_multipleParentsNeeded() throws IOException {
275     File file = file(getTempDir(), "grandparent", "parent", "nonexistent.file");
276     File parent = <font color="#6cc417"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>file.getParentFile();
277     File grandparent = parent.getParentFile();
278     assertFalse(grandparent.exists());
279     Files.createParentDirs(file);
280     assertTrue(parent.exists());
281   }
282   public void testCreateParentDirs_nonDirectoryParentExists() throws IOException {
283     File parent = getTestFile("ascii.txt");
284     assertTrue(parent.isFile());
285 <a name="16"></a>    File file = file</b></font>(parent, "foo");
286     try {
287       Files.createParentDirs(file);
288       <font color="#2981b2"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>fail();
289     } catch (IOException expected) {
290     }
291   }</b></font>
292   public void testCreateTempDir() {
293     File temp = Files.createTempDir();
294     assertTrue(temp.exists());
295     assertTrue(temp.isDirectory());
296     assertThat(temp.listFiles()).isEmpty();
297     assertTrue(temp.delete());
298   }
299   public void testMove() throws IOException {
300     File i18nFile = getTestFile("i18n.txt");
301     File temp1 = createTempFile();
302     File temp2 = createTempFile();
303     Files.copy(i18nFile, temp1);
304     moveHelper(true, temp1, temp2);
305     assertTrue(Files.equal(temp2, i18nFile));
306   }
307   public void testMoveViaCopy() throws IOException {
308     File i18nFile = getTestFile("i18n.txt");
309     File temp1 = createTempFile();
310     File temp2 = createTempFile();
311     Files.copy(i18nFile, temp1);
312     moveHelper(true, new UnmovableFile(temp1, false, true), temp2);
313     assertTrue(Files.equal(temp2, i18nFile));
314   }
315   public void testMoveFailures() throws IOException {
316     File temp1 = createTempFile();
317     File temp2 = createTempFile();
318     moveHelper(false, new UnmovableFile(temp1, false, false), temp2);
319     moveHelper(
320         false, new UnmovableFile(temp1, false, false), new UnmovableFile(temp2, true, false));
321     try {
322       File asciiFile = getTestFile("ascii.txt");
323       moveHelper(false, asciiFile, asciiFile);
324       fail("expected exception");
325     } catch (IllegalArgumentException expected) {
326     }
327   }
328   private void moveHelper(boolean success, File from, File to) throws IOException {
329     try {
330       Files.move(from, to);
331       if (success) {
332         assertFalse(from.exists());
333         assertTrue(to.exists());
334       } else {
335         fail("expected exception");
336       }
337     } catch (IOException possiblyExpected) {
338       if (success) {
339         throw possiblyExpected;
340       }
341     }
342   }
343   private static class UnmovableFile extends File {
344     private final boolean canRename;
345     private final boolean canDelete;
346     public UnmovableFile(File file, boolean canRename, boolean canDelete) {
347       super(file.getPath());
348       this.canRename = canRename;
349       this.canDelete = canDelete;
350 <a name="15"></a>    }
351     @Override
352     public boolean renameTo(File to) <font color="#f52887"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>{
353       return canRename &amp;&amp; super.renameTo(to);
354     }
355     @Override
356     public boolean delete() {
357       return canDelete &amp;&amp; super.delete</b></font>();
358     }
359     private static final long serialVersionUID = 0;
360   }
361   public void testLineReading() throws IOException {
362     File temp = createTempFile();
363 <a name="2"></a>    assertNull(Files.readFirstLine(temp, Charsets.UTF_8));
364     assertTrue(Files.readLines(temp, Charsets.UTF_8).isEmpty());
365     PrintWriter w = new PrintWriter(<font color="#980517"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>Files.newWriter(temp, Charsets.UTF_8));
366     w.println("hello");
367     w.println("");
368     w.println(" world  ");
369     w.println("");
370     w.close();
371     assertEquals("hello", Files.readFirstLine(temp, Charsets.UTF_8));
372     assertEquals(
373         ImmutableList.of("hello", "", " world  ", ""), Files.readLines(temp, Charsets.UTF_8));
374     assertTrue(temp.delete());
375   }
376   public void testReadLines_withLineProcessor() throws IOException {
377     File temp = createTempFile();
378     LineProcessor&lt;List&lt;String&gt;&gt; collect =</b></font>
379         new LineProcessor&lt;List&lt;String&gt;&gt;() {
380           List&lt;String&gt; collector = new ArrayList&lt;&gt;();
381 <a name="17"></a>          @Override
382           public boolean processLine(String line) {
383             collector.add(line);
384             <font color="#3090c7"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>return true;
385           }
386           @Override
387           public List&lt;String&gt; getResult() {
388             return collector;
389           }</b></font>
390         };
391     assertThat(Files.readLines(temp, Charsets.UTF_8, collect)).isEmpty();
392     PrintWriter w = new PrintWriter(Files.newWriter(temp, Charsets.UTF_8));
393     w.println("hello");
394     w.println("");
395     w.println(" world  ");
396     w.println("");
397     w.close();
398     Files.readLines(temp, Charsets.UTF_8, collect);
399     assertThat(collect.getResult()).containsExactly("hello", "", " world  ", "").inOrder();
400     LineProcessor&lt;List&lt;String&gt;&gt; collectNonEmptyLines =
401         new LineProcessor&lt;List&lt;String&gt;&gt;() {
402           List&lt;String&gt; collector = new ArrayList&lt;&gt;();
403           @Override
404           public boolean processLine(String line) {
405             if (line.length() &gt; 0) {
406               collector.add(line);
407             }
408             return true;
409           }
410           @Override
411           public List&lt;String&gt; getResult() {
412             return collector;
413           }
414         };
415     Files.readLines(temp, Charsets.UTF_8, collectNonEmptyLines);
416     assertThat(collectNonEmptyLines.getResult()).containsExactly("hello", " world  ").inOrder();
417     assertTrue(temp.delete());
418   }
419 <a name="6"></a>
420   public void testHash() throws IOException {
421     File asciiFile = getTestFile("ascii.txt");
422     File i18nFile = <font color="#8c8774"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>getTestFile("i18n.txt");
423     String init = "d41d8cd98f00b204e9800998ecf8427e";
424     assertEquals(init, Hashing.md5().newHasher().hash().toString());
425     String asciiHash = "e5df5a39f2b8cb71b24e1d8038f93131";
426     assertEquals(asciiHash, Files.hash(asciiFile, Hashing.md5()).toString());
427     String i18nHash = "7fa826962ce2079c8334cd4ebf33aea4";
428     assertEquals(i18nHash, Files.hash(i18nFile, Hashing.md5</b></font>()).toString());
429   }
430   public void testMap() throws IOException {
431     int size = 1024;
432     byte[] bytes = newPreFilledByteArray(size);
433     File file = createTempFile();
434     Files.write(bytes, file);
435     MappedByteBuffer actual = Files.map(file);
436     ByteBuffer expected = ByteBuffer.wrap(bytes);
437     assertTrue("ByteBuffers should be equal.", expected.equals(actual));
438   }
439   public void testMap_noSuchFile() throws IOException {
440     File file = createTempFile();
441     boolean deleted = file.delete();
442     assertTrue(deleted);
443     try {
444       Files.map(file);
445       fail("Should have thrown FileNotFoundException.");
446     } catch (FileNotFoundException expected) {
447     }
448   }
449   public void testMap_readWrite() throws IOException {
450     int size = 1024;
451     byte[] expectedBytes = new byte[size];
452     byte[] bytes = newPreFilledByteArray(1024);
453     File file = createTempFile();
454     Files.write(bytes, file);
455     Random random = new Random();
456     random.nextBytes(expectedBytes);
457     MappedByteBuffer map = Files.map(file, MapMode.READ_WRITE);
458     map.put(expectedBytes);
459     byte[] actualBytes = Files.toByteArray(file);
460     assertTrue(Arrays.equals(expectedBytes, actualBytes));
461   }
462   public void testMap_readWrite_creates() throws IOException {
463     int size = 1024;
464 <a name="10"></a>    byte[] expectedBytes = newPreFilledByteArray(1024);
465     File file = <font color="#ad5910"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>createTempFile();
466     boolean deleted = file.delete();
467     assertTrue(deleted);
468     assertFalse(file.exists());
469     MappedByteBuffer map = Files.map(file, MapMode.READ_WRITE, size);
470     map.put(expectedBytes);
471     assertTrue(file.exists());
472     assertTrue</b></font>(file.isFile());
473     assertEquals(size, file.length());
474     byte[] actualBytes = Files.toByteArray(file);
475     assertTrue(Arrays.equals(expectedBytes, actualBytes));
476   }
477   public void testMap_readWrite_max_value_plus_1() throws IOException {
478     File file = createTempFile();
479     try {
480       Files.map(file, MapMode.READ_WRITE, (long) Integer.MAX_VALUE + 1);
481       fail("Should throw when size exceeds Integer.MAX_VALUE");
482     } catch (IllegalArgumentException expected) {
483     }
484   }
485   public void testGetFileExtension() {
486     assertEquals("txt", Files.getFileExtension(".txt"));
487     assertEquals("txt", Files.getFileExtension("blah.txt"));
488 <a name="1"></a>    assertEquals("txt", Files.getFileExtension("blah..txt"));
489     assertEquals("txt", Files.getFileExtension(".blah.txt"));
490     assertEquals("txt", Files.getFileExtension("/tmp/blah.txt"));
491     <font color="#f63526"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>assertEquals("gz", Files.getFileExtension("blah.tar.gz"));
492     assertEquals("", Files.getFileExtension("/"));
493     assertEquals("", Files.getFileExtension("."));
494     assertEquals("", Files.getFileExtension(".."));
495     assertEquals("", Files.getFileExtension("..."));
496     assertEquals("", Files.getFileExtension("blah"));
497     assertEquals("", Files.getFileExtension("blah."));
498     assertEquals("", Files.getFileExtension(".blah."));
499     assertEquals("", Files.getFileExtension("/foo.bar/blah"));
500     assertEquals("", Files.getFileExtension("/foo/.bar/blah"));
501   }
502   public void testGetNameWithoutExtension() {</b></font>
503     assertEquals("", Files.getNameWithoutExtension(".txt"));
504 <a name="0"></a>    assertEquals("blah", Files.getNameWithoutExtension("blah.txt"));
505     assertEquals("blah.", Files.getNameWithoutExtension("blah..txt"));
506     assertEquals(".blah", Files.getNameWithoutExtension(".blah.txt"));
507     assertEquals("blah", <font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>Files.getNameWithoutExtension("/tmp/blah.txt"));
508     assertEquals("blah.tar", Files.getNameWithoutExtension("blah.tar.gz"));
509     assertEquals("", Files.getNameWithoutExtension("/"));
510     assertEquals("", Files.getNameWithoutExtension("."));
511     assertEquals(".", Files.getNameWithoutExtension(".."));
512     assertEquals("..", Files.getNameWithoutExtension("..."));
513     assertEquals("blah", Files.getNameWithoutExtension("blah"));
514     assertEquals("blah", Files.getNameWithoutExtension("blah."));
515     assertEquals(".blah", Files.getNameWithoutExtension(".blah."));
516     assertEquals("blah", Files.getNameWithoutExtension("/foo.bar/blah"));
517     assertEquals("blah", Files.getNameWithoutExtension("/foo/.bar/blah"));
518   }
519   public void testReadBytes() throws IOException {
520     ByteProcessor&lt;byte[]&gt; processor =</b></font>
521         new ByteProcessor&lt;byte[]&gt;() {
522           private final ByteArrayOutputStream out = new ByteArrayOutputStream();
523           @Override
524           public boolean processBytes(byte[] buffer, int offset, int length) throws IOException {
525             if (length &gt;= 0) {
526               out.write(buffer, offset, length);
527             }
528             return true;
529           }
530           @Override
531           public byte[] getResult() {
532             return out.toByteArray();
533           }
534         };
535     File asciiFile = getTestFile("ascii.txt");
536     byte[] result = Files.readBytes(asciiFile, processor);
537     assertEquals(Bytes.asList(Files.toByteArray(asciiFile)), Bytes.asList(result));
538   }
539   public void testReadBytes_returnFalse() throws IOException {
540     ByteProcessor&lt;byte[]&gt; processor =
541         new ByteProcessor&lt;byte[]&gt;() {
542           private final ByteArrayOutputStream out = new ByteArrayOutputStream();
543           @Override
544           public boolean processBytes(byte[] buffer, int offset, int length) throws IOException {
545             if (length &gt; 0) {
546               out.write(buffer, offset, 1);
547               return false;
548             } else {
549               return true;
550             }
551           }
552           @Override
553           public byte[] getResult() {
554             return out.toByteArray();
555           }
556         };
557     File asciiFile = getTestFile("ascii.txt");
558     byte[] result = Files.readBytes(asciiFile, processor);
559     assertEquals(1, result.length);
560   }
561   public void testPredicates() throws IOException {
562     File asciiFile = getTestFile("ascii.txt");
563     File dir = asciiFile.getParentFile();
564     assertTrue(Files.isDirectory().apply(dir));
565     assertFalse(Files.isFile().apply(dir));
566     assertFalse(Files.isDirectory().apply(asciiFile));
567     assertTrue(Files.isFile().apply(asciiFile));
568   }
569   private static File root() {
570     return File.listRoots()[0];
571   }
572   private static File file(String first, String... more) {
573     return file(new File(first), more);
574   }
575   private static File file(File first, String... more) {
576     File file = first;
577     for (String name : more) {
578       file = new File(file, name);
579     }
580     return file;
581   }
582 }
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
