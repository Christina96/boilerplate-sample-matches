<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for MapsTransformValuesUnmodifiableIteratorTest.java &amp; FilesTest_1.java</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for MapsTransformValuesUnmodifiableIteratorTest.java &amp; FilesTest_1.java
      </h3>
<h1 align="center">
        34.4%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>MapsTransformValuesUnmodifiableIteratorTest.java (50.45208%)<th>FilesTest_1.java (26.172607%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(254-270)<td><a href="#" name="0">(638-652)</a><td align="center"><font color="#ff0000">26</font>
<tr onclick='openModal("#f63526")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f63526"><font color="#f63526">-</font><td><a href="#" name="1">(239-249)<td><a href="#" name="1">(621-633)</a><td align="center"><font color="#eb0000">24</font>
<tr onclick='openModal("#980517")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#980517"><font color="#980517">-</font><td><a href="#" name="2">(308-320)<td><a href="#" name="2">(449-465)</a><td align="center"><font color="#c40000">20</font>
<tr onclick='openModal("#53858b")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#53858b"><font color="#53858b">-</font><td><a href="#" name="3">(168-178)<td><a href="#" name="3">(111-121)</a><td align="center"><font color="#c40000">20</font>
<tr onclick='openModal("#6cc417")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#6cc417"><font color="#6cc417">-</font><td><a href="#" name="4">(219-231)<td><a href="#" name="4">(342-352)</a><td align="center"><font color="#b00000">18</font>
<tr onclick='openModal("#151b8d")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#151b8d"><font color="#151b8d">-</font><td><a href="#" name="5">(183-192)<td><a href="#" name="5">(193-204)</a><td align="center"><font color="#b00000">18</font>
<tr onclick='openModal("#8c8774")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#8c8774"><font color="#8c8774">-</font><td><a href="#" name="6">(277-290)<td><a href="#" name="6">(516-525)</a><td align="center"><font color="#a60000">17</font>
<tr onclick='openModal("#38a4a5")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#38a4a5"><font color="#38a4a5">-</font><td><a href="#" name="7">(358-364)<td><a href="#" name="7">(54-70)</a><td align="center"><font color="#9c0000">16</font>
<tr onclick='openModal("#c58917")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#c58917"><font color="#c58917">-</font><td><a href="#" name="8">(197-205)<td><a href="#" name="8">(228-237)</a><td align="center"><font color="#930000">15</font>
<tr onclick='openModal("#83a33a")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#83a33a"><font color="#83a33a">-</font><td><a href="#" name="9">(211-218)<td><a href="#" name="9">(131-138)</a><td align="center"><font color="#890000">14</font>
<tr onclick='openModal("#ad5910")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#ad5910"><font color="#ad5910">-</font><td><a href="#" name="10">(290-299)<td><a href="#" name="10">(587-598)</a><td align="center"><font color="#750000">12</font>
<tr onclick='openModal("#b041ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#b041ff"><font color="#b041ff">-</font><td><a href="#" name="11">(206-211)<td><a href="#" name="11">(253-259)</a><td align="center"><font color="#6b0000">11</font>
<tr onclick='openModal("#571b7e")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#571b7e"><font color="#571b7e">-</font><td><a href="#" name="12">(17-28)<td><a href="#" name="12">(17-29)</a><td align="center"><font color="#6b0000">11</font>
<tr onclick='openModal("#3b9c9c")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#3b9c9c"><font color="#3b9c9c">-</font><td><a href="#" name="13">(370-376)<td><a href="#" name="13">(294-299)</a><td align="center"><font color="#620000">10</font>
<tr onclick='openModal("#842dce")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#842dce"><font color="#842dce">-</font><td><a href="#" name="14">(339-346)<td><a href="#" name="14">(271-277)</a><td align="center"><font color="#620000">10</font>
<tr onclick='openModal("#f52887")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f52887"><font color="#f52887">-</font><td><a href="#" name="15">(61-67)<td><a href="#" name="15">(432-438)</a><td align="center"><font color="#620000">10</font>
<tr onclick='openModal("#2981b2")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#2981b2"><font color="#2981b2">-</font><td><a href="#" name="16">(379-383)<td><a href="#" name="16">(355-358)</a><td align="center"><font color="#580000">9</font>
<tr onclick='openModal("#3090c7")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#3090c7"><font color="#3090c7">-</font><td><a href="#" name="17">(152-158)<td><a href="#" name="17">(472-478)</a><td align="center"><font color="#580000">9</font>
<tr onclick='openModal("#800517")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#800517"><font color="#800517">-</font><td><a href="#" name="18">(49-55)<td><a href="#" name="18">(99-105)</a><td align="center"><font color="#580000">9</font>
</td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>MapsTransformValuesUnmodifiableIteratorTest.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
<font color="#571b7e"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>package com.google.common.collect;
import com.google.common.annotations.GwtCompatible;
import com.google.common.base.Function;
import com.google.common.base.Functions;
import com.google.common.collect.testing.MapInterfaceTest;
import java.util.Collection;
import java.util.Iterator;
import java.util.Map;
import java.util.Map.Entry;
import java.util.Set;
import</b></font> org.checkerframework.checker.nullness.qual.Nullable;
@GwtCompatible
public class MapsTransformValuesUnmodifiableIteratorTest extends MapInterfaceTest&lt;String, String&gt; {
  public MapsTransformValuesUnmodifiableIteratorTest() {
  }
  private static class UnmodifiableIteratorMap&lt;K, V&gt; extends ForwardingMap&lt;K, V&gt; {
<a name="18"></a>    final Map&lt;K, V&gt; delegate;
    UnmodifiableIteratorMap(Map&lt;K, V&gt; delegate) {
      <font color="#800517"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>this.delegate = delegate;
    }
    @Override
    protected Map&lt;K, V&gt; delegate() {
      return delegate;
    }</b></font>
    @Override
<a name="15"></a>    public Set&lt;K&gt; keySet() {
      return new ForwardingSet&lt;K&gt;() {
        @Override
        protected Set&lt;K&gt; delegate() <font color="#f52887"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>{
          return delegate.keySet();
        }
        @Override
        public Iterator&lt;K&gt; iterator() {
          return Iterators.unmodifiableIterator</b></font>(delegate.keySet().iterator());
        }
        @Override
        public boolean removeAll(Collection&lt;?&gt; c) {
          return delegate.keySet().removeAll(c);
        }
        @Override
        public boolean retainAll(Collection&lt;?&gt; c) {
          return delegate.keySet().retainAll(c);
        }
      };
    }
    @Override
    public Collection&lt;V&gt; values() {
      return new ForwardingCollection&lt;V&gt;() {
        @Override
        protected Collection&lt;V&gt; delegate() {
          return delegate.values();
        }
        @Override
        public Iterator&lt;V&gt; iterator() {
          return Iterators.unmodifiableIterator(delegate.values().iterator());
        }
        @Override
        public boolean removeAll(Collection&lt;?&gt; c) {
          return delegate.values().removeAll(c);
        }
        @Override
        public boolean retainAll(Collection&lt;?&gt; c) {
          return delegate.values().retainAll(c);
        }
      };
    }
    @Override
    public Set&lt;Entry&lt;K, V&gt;&gt; entrySet() {
      return new ForwardingSet&lt;Entry&lt;K, V&gt;&gt;() {
        @Override
        protected Set&lt;Entry&lt;K, V&gt;&gt; delegate() {
          return delegate.entrySet();
        }
        @Override
        public Iterator&lt;Entry&lt;K, V&gt;&gt; iterator() {
          return Iterators.unmodifiableIterator(delegate.entrySet().iterator());
        }
        @Override
        public boolean removeAll(Collection&lt;?&gt; c) {
          return delegate.entrySet().removeAll(c);
        }
        @Override
        public boolean retainAll(Collection&lt;?&gt; c) {
          return delegate.entrySet().retainAll(c);
        }
      };
    }
  }
  @Override
  protected Map&lt;String, String&gt; makeEmptyMap() {
    Map&lt;String, Integer&gt; underlying = Maps.newHashMap();
    return Maps.transformValues(
        new UnmodifiableIteratorMap&lt;String, Integer&gt;(underlying), Functions.toStringFunction());
  }
  @Override
  protected Map&lt;String, String&gt; makePopulatedMap() {
    Map&lt;String, Integer&gt; underlying = Maps.newHashMap();
    underlying.put("a", 1);
    underlying.put("b", 2);
    underlying.put("c", 3);
    return Maps.transformValues(
        new UnmodifiableIteratorMap&lt;String, Integer&gt;(underlying), Functions.toStringFunction());
  }
<a name="17"></a>
  @Override
  protected String getKeyNotInPopulatedMap() throws UnsupportedOperationException {
    <font color="#3090c7"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>return "z";
  }
  @Override
  protected String getValueNotInPopulatedMap() throws UnsupportedOperationException {
    return "26";
  }</b></font>
  private void assertMapsEqual(Map&lt;?, ?&gt; expected, Map&lt;?, ?&gt; map) {
    assertEquals(expected, map);
    assertEquals(expected.hashCode(), map.hashCode());
    assertEquals(expected.entrySet(), map.entrySet());
<a name="3"></a>
    <font color="#53858b"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>Collection&lt;?&gt; expectedValues = expected.values();
    Collection&lt;?&gt; mapValues = map.values();
    assertEquals(expectedValues.size(), mapValues.size());
    assertTrue(expectedValues.containsAll(mapValues));
    assertTrue(mapValues.containsAll(expectedValues));
  }
  public void testTransformEmptyMapEquality() {
    Map&lt;String, String&gt; map =
        Maps.transformValues(ImmutableMap.&lt;String, Integer&gt;of(), Functions.toStringFunction());
    assertMapsEqual</b></font>(Maps.newHashMap(), map);
  }
<a name="5"></a>
  public void testTransformSingletonMapEquality() {
    Map&lt;String, String&gt; map =
        Maps.transformValues(<font color="#151b8d"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>ImmutableMap.of("a", 1), Functions.toStringFunction());
    Map&lt;String, String&gt; expected = ImmutableMap.of("a", "1");
    assertMapsEqual(expected, map);
    assertEquals(expected.get("a"), map.get("a"));
  }
  public void testTransformIdentityFunctionEquality() {
    Map&lt;String, Integer&gt; underlying = ImmutableMap.of("a", 1);
    Map&lt;String, Integer&gt; map = Maps.transformValues(underlying, Functions.&lt;Integer&gt;identity());
    assertMapsEqual</b></font>(underlying, map);
  }
<a name="8"></a>
  public void testTransformPutEntryIsUnsupported() {
    Map&lt;String, String&gt; map =
        Maps.transformValues(ImmutableMap.of("a", 1), <font color="#c58917"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>Functions.toStringFunction());
    try {
      map.put("b", "2");
      fail();
    } catch (UnsupportedOperationException expected) {
    }
<a name="11"></a>
    try {
      map.putAll(ImmutableMap.of</b></font>("b", "2"));
      <font color="#b041ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>fail();
    } catch (UnsupportedOperationException expected) {
<a name="9"></a>    }
    try {
      <font color="#83a33a"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>map.entrySet().iterator().next</b></font>().setValue("one");
      fail();
    } catch (UnsupportedOperationException expected) {
    }
  }
<a name="4"></a>
  public void testTransformRemoveEntry() {
    Map&lt;String, Integer&gt; underlying = Maps.newHashMap</b></font>();
    <font color="#6cc417"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>underlying.put("a", 1);
    Map&lt;String, String&gt; map = Maps.transformValues(underlying, Functions.toStringFunction());
    assertEquals("1", map.remove("a"));
    assertNull(map.remove("b"));
  }
  public void testTransformEqualityOfMapsWithNullValues() {
    Map&lt;String, String&gt; underlying = Maps.newHashMap();
    underlying.put("a", null);
    underlying.put("b", "");
    Map&lt;String, Boolean&gt; map =
        Maps.transformValues</b></font>(
            underlying,
            new Function&lt;String, Boolean&gt;() {
              @Override
              public Boolean apply(@Nullable String from) {
<a name="1"></a>                return from == null;
              }
            });
    Map&lt;String, Boolean&gt; expected = <font color="#f63526"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>ImmutableMap.of("a", true, "b", false);
    assertMapsEqual(expected, map);
    assertEquals(expected.get("a"), map.get("a"));
    assertEquals(expected.containsKey("a"), map.containsKey("a"));
    assertEquals(expected.get("b"), map.get("b"));
    assertEquals(expected.containsKey("b"), map.containsKey("b"));
    assertEquals(expected.get("c"), map.get("c"));
    assertEquals(expected.containsKey("c"), map.containsKey("c"));
  }
  public void testTransformReflectsUnderlyingMap() {</b></font>
    Map&lt;String, Integer&gt; underlying = Maps.newHashMap();
<a name="0"></a>    underlying.put("a", 1);
    underlying.put("b", 2);
    underlying.put("c", 3);
    Map&lt;String, String&gt; map = <font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>Maps.transformValues(underlying, Functions.toStringFunction());
    assertEquals(underlying.size(), map.size());
    underlying.put("d", 4);
    assertEquals(underlying.size(), map.size());
    assertEquals("4", map.get("d"));
    underlying.remove("c");
    assertEquals(underlying.size(), map.size());
    assertFalse(map.containsKey("c"));
    underlying.clear();
    assertEquals(underlying.size(), map.size());
  }
  public void testTransformChangesAreReflectedInUnderlyingMap() {
    Map&lt;String, Integer&gt; underlying = Maps.newLinkedHashMap()</b></font>;
    underlying.put("a", 1);
    underlying.put("b", 2);
    underlying.put("c", 3);
<a name="6"></a>    underlying.put("d", 4);
    underlying.put("e", 5);
    underlying.put("f", 6);
    <font color="#8c8774"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>underlying.put("g", 7);
    Map&lt;String, String&gt; map = Maps.transformValues(underlying, Functions.toStringFunction());
    map.remove("a");
    assertFalse(underlying.containsKey("a"));
    Set&lt;String&gt; keys = map.keySet();
    keys.remove("b");
    assertFalse(underlying.containsKey("b"));
<a name="10"></a>    Iterator&lt;String&gt; keyIterator = keys.iterator();
    keyIterator.next();
    keyIterator.remove();
    assertFalse</b></font>(<font color="#ad5910"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>underlying.containsKey("c"));
    Collection&lt;String&gt; values = map.values();
    values.remove("4");
    assertFalse(underlying.containsKey("d"));
    Iterator&lt;String&gt; valueIterator = values.iterator();
    valueIterator.next();
    valueIterator.remove();
    assertFalse(underlying.containsKey</b></font>("e"));
    Set&lt;Entry&lt;String, String&gt;&gt; entries = map.entrySet();
    Entry&lt;String, String&gt; firstEntry = entries.iterator().next();
    entries.remove(firstEntry);
    assertFalse(underlying.containsKey("f"));
<a name="2"></a>
    Iterator&lt;Entry&lt;String, String&gt;&gt; entryIterator = entries.iterator();
    entryIterator.next();
    <font color="#980517"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>entryIterator.remove();
    assertFalse(underlying.containsKey("g"));
    assertTrue(underlying.isEmpty());
    assertTrue(map.isEmpty());
    assertTrue(keys.isEmpty());
    assertTrue(values.isEmpty());
    assertTrue(entries.isEmpty());
  }
  public void testTransformEquals() {
    Map&lt;String, Integer&gt; underlying = ImmutableMap.of("a", 0, "b", 1, "c", 2);
    Map&lt;String, Integer&gt; expected = Maps.transformValues(underlying, Functions.&lt;Integer&gt;identity())</b></font>;
    assertMapsEqual(expected, expected);
    Map&lt;String, Integer&gt; equalToUnderlying = Maps.newTreeMap();
    equalToUnderlying.putAll(underlying);
    Map&lt;String, Integer&gt; map =
        Maps.transformValues(equalToUnderlying, Functions.&lt;Integer&gt;identity());
    assertMapsEqual(expected, map);
    map =
        Maps.transformValues(
            ImmutableMap.of("a", 1, "b", 2, "c", 3),
            new Function&lt;Integer, Integer&gt;() {
              @Override
              public Integer apply(Integer from) {
<a name="14"></a>                return from - 1;
              }
            });
    <font color="#842dce"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>assertMapsEqual(expected, map);
  }
  public void testTransformEntrySetContains() {
    Map&lt;String, Boolean&gt; underlying = Maps.newHashMap();
    underlying.put("a", null);
    underlying.put("b", true);
    underlying.put</b></font>(null, true);
    Map&lt;String, Boolean&gt; map =
        Maps.transformValues(
            underlying,
            new Function&lt;Boolean, Boolean&gt;() {
              @Override
              public Boolean apply(@Nullable Boolean from) {
                return (from == null) ? true : null;
<a name="7"></a>              }
            });
    Set&lt;Entry&lt;String, Boolean&gt;&gt; entries = <font color="#38a4a5"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>map.entrySet();
    assertTrue(entries.contains(Maps.immutableEntry("a", true)));
    assertTrue(entries.contains(Maps.immutableEntry("b", (Boolean) null)));
    assertTrue(entries.contains(Maps.immutableEntry((String) null, (Boolean) null)));
    assertFalse(entries.contains(Maps.immutableEntry("c", (Boolean) null)));
    assertFalse(entries.contains(Maps.immutableEntry</b></font>((String) null, true)));
  }
<a name="13"></a>  @Override
  public void testKeySetRemoveAllNullFromEmpty() {
    try {
      <font color="#3b9c9c"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>super.testKeySetRemoveAllNullFromEmpty();
    } catch (RuntimeException tolerated) {
    }
  }
<a name="16"></a>  @Override</b></font>
  public void testEntrySetRemoveAllNullFromEmpty() {
    try {
      <font color="#2981b2"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>super.testEntrySetRemoveAllNullFromEmpty();
    } catch (RuntimeException tolerated) {
    }
  }</b></font>
}
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>FilesTest_1.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
<font color="#571b7e"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>package com.google.common.io;
import static com.google.common.truth.Truth.assertThat;
import com.google.common.base.Charsets;
import com.google.common.collect.ImmutableList;
import com.google.common.hash.Hashing;
import com.google.common.primitives.Bytes;
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.ByteArrayOutputStream;
import java.io.File;
import</b></font> java.io.FileNotFoundException;
import java.io.IOException;
import java.io.PrintWriter;
import java.io.RandomAccessFile;
import java.nio.ByteBuffer;
import java.nio.MappedByteBuffer;
import java.nio.channels.FileChannel.MapMode;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.Random;
import junit.framework.TestSuite;
public class FilesTest extends IoTestCase {
<a name="7"></a>
  public static TestSuite suite() {
    TestSuite suite = new TestSuite();
    <font color="#38a4a5"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>suite.addTest(
        ByteSourceTester.tests(
            "Files.asByteSource[File]", SourceSinkFactories.fileByteSourceFactory(), true));
    suite.addTest(
        ByteSinkTester.tests("Files.asByteSink[File]", SourceSinkFactories.fileByteSinkFactory()));
    suite.addTest(
        ByteSinkTester.tests(
            "Files.asByteSink[File, APPEND]", SourceSinkFactories.appendingFileByteSinkFactory()));
    suite.addTest(
        CharSourceTester.tests(
            "Files.asCharSource[File, Charset]",
            SourceSinkFactories.fileCharSourceFactory(),
            false));
    suite.addTest(
        CharSinkTester.tests(
            "Files.asCharSink[File, Charset]", SourceSinkFactories.fileCharSinkFactory()));
    suite.addTest</b></font>(
        CharSinkTester.tests(
            "Files.asCharSink[File, Charset, APPEND]",
            SourceSinkFactories.appendingFileCharSinkFactory()));
    suite.addTestSuite(FilesTest.class);
    return suite;
  }
  public void testRoundTripSources() throws Exception {
    File asciiFile = getTestFile("ascii.txt");
    ByteSource byteSource = Files.asByteSource(asciiFile);
    assertSame(byteSource, byteSource.asCharSource(Charsets.UTF_8).asByteSource(Charsets.UTF_8));
  }
  public void testToByteArray() throws IOException {
    File asciiFile = getTestFile("ascii.txt");
    File i18nFile = getTestFile("i18n.txt");
    assertTrue(Arrays.equals(ASCII.getBytes(Charsets.US_ASCII), Files.toByteArray(asciiFile)));
    assertTrue(Arrays.equals(I18N.getBytes(Charsets.UTF_8), Files.toByteArray(i18nFile)));
    assertTrue(Arrays.equals(I18N.getBytes(Charsets.UTF_8), Files.asByteSource(i18nFile).read()));
  }
  private static class BadLengthFile extends File {
    private final long badLength;
<a name="18"></a>
    public BadLengthFile(File delegate, long badLength) {
      super(delegate.getPath());
      <font color="#800517"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>this.badLength = badLength;
    }
    @Override
    public long length() {
      return badLength;
    }</b></font>
    private static final long serialVersionUID = 0;
<a name="3"></a>  }
  public void testToString() throws IOException {
    <font color="#53858b"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>File asciiFile = getTestFile("ascii.txt");
    File i18nFile = getTestFile("i18n.txt");
    assertEquals(ASCII, Files.toString(asciiFile, Charsets.US_ASCII));
    assertEquals(I18N, Files.toString(i18nFile, Charsets.UTF_8));
    assertThat(Files.toString(i18nFile, Charsets.US_ASCII)).isNotEqualTo(I18N);
  }
  public void testWriteString() throws IOException {
    File temp = createTempFile();
    Files.write(I18N, temp, Charsets.UTF_16LE);
    assertEquals(I18N, Files.toString</b></font>(temp, Charsets.UTF_16LE));
  }
  public void testWriteBytes() throws IOException {
    File temp = createTempFile();
    byte[] data = newPreFilledByteArray(2000);
    Files.write(data, temp);
<a name="9"></a>    assertTrue(Arrays.equals(data, Files.toByteArray(temp)));
    try {
      <font color="#83a33a"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>Files.write(null, temp);
      fail("expected exception");
    } catch (NullPointerException expected) {
    }
  }
  public void testAppendString() throws IOException {
    File temp = createTempFile</b></font>();
    Files.append(I18N, temp, Charsets.UTF_16LE);
    assertEquals(I18N, Files.toString(temp, Charsets.UTF_16LE));
    Files.append(I18N, temp, Charsets.UTF_16LE);
    assertEquals(I18N + I18N, Files.toString(temp, Charsets.UTF_16LE));
    Files.append(I18N, temp, Charsets.UTF_16LE);
    assertEquals(I18N + I18N + I18N, Files.toString(temp, Charsets.UTF_16LE));
  }
  public void testCopyToOutputStream() throws IOException {
    File i18nFile = getTestFile("i18n.txt");
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    Files.copy(i18nFile, out);
    assertEquals(I18N, out.toString("UTF-8"));
  }
  public void testCopyToAppendable() throws IOException {
    File i18nFile = getTestFile("i18n.txt");
    StringBuilder sb = new StringBuilder();
    Files.copy(i18nFile, Charsets.UTF_8, sb);
    assertEquals(I18N, sb.toString());
  }
  public void testCopyFile() throws IOException {
    File i18nFile = getTestFile("i18n.txt");
    File temp = createTempFile();
    Files.copy(i18nFile, temp);
    assertEquals(I18N, Files.toString(temp, Charsets.UTF_8));
  }
  public void testCopyEqualFiles() throws IOException {
    File temp1 = createTempFile();
    File temp2 = file(temp1.getPath());
    assertEquals(temp1, temp2);
    Files.write(ASCII, temp1, Charsets.UTF_8);
    try {
      Files.copy(temp1, temp2);
      fail("Expected an IAE to be thrown but wasn't");
    } catch (IllegalArgumentException expected) {
    }
    assertEquals(ASCII, Files.toString(temp1, Charsets.UTF_8));
  }
  public void testCopySameFile() throws IOException {
    File temp = createTempFile();
    Files.write(ASCII, temp, Charsets.UTF_8);
    try {
      Files.copy(temp, temp);
      fail("Expected an IAE to be thrown but wasn't");
    } catch (IllegalArgumentException expected) {
    }
    assertEquals(ASCII, Files.toString(temp, Charsets.UTF_8));
<a name="5"></a>  }
  public void testCopyIdenticalFiles() throws IOException {
    File temp1 = <font color="#151b8d"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>createTempFile();
    Files.write(ASCII, temp1, Charsets.UTF_8);
    File temp2 = createTempFile();
    Files.write(ASCII, temp2, Charsets.UTF_8);
    Files.copy(temp1, temp2);
    assertEquals(ASCII, Files.toString(temp2, Charsets.UTF_8));
  }
  public void testEqual() throws IOException {
    File asciiFile = getTestFile("ascii.txt");
    File i18nFile = getTestFile("i18n.txt");
    assertFalse(Files.equal</b></font>(asciiFile, i18nFile));
    assertTrue(Files.equal(asciiFile, asciiFile));
    File temp = createTempFile();
    Files.copy(asciiFile, temp);
    assertTrue(Files.equal(asciiFile, temp));
    Files.copy(i18nFile, temp);
    assertTrue(Files.equal(i18nFile, temp));
    Files.copy(asciiFile, temp);
    RandomAccessFile rf = new RandomAccessFile(temp, "rw");
    rf.writeByte(0);
    rf.close();
    assertEquals(asciiFile.length(), temp.length());
    assertFalse(Files.equal(asciiFile, temp));
    assertTrue(Files.asByteSource(asciiFile).contentEquals(Files.asByteSource(asciiFile)));
    assertTrue(Files.equal(asciiFile, new BadLengthFile(asciiFile, 0)));
<a name="8"></a>  }
  public void testNewReader() throws IOException {
    File asciiFile = <font color="#c58917"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>getTestFile("ascii.txt");
    try {
      Files.newReader(asciiFile, null);
      fail("expected exception");
    } catch (NullPointerException expected) {
    }
    try {
      Files.newReader(null, Charsets.UTF_8);
      fail</b></font>("expected exception");
    } catch (NullPointerException expected) {
    }
    BufferedReader r = Files.newReader(asciiFile, Charsets.US_ASCII);
    try {
      assertEquals(ASCII, r.readLine());
    } finally {
      r.close();
    }
  }
  public void testNewWriter() throws IOException {
<a name="11"></a>    File temp = createTempFile();
    try {
      Files.newWriter(temp, null);
      <font color="#b041ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>fail("expected exception");
    } catch (NullPointerException expected) {
    }
    try {
      Files.newWriter(null, Charsets.UTF_8);
      fail</b></font>("expected exception");
    } catch (NullPointerException expected) {
    }
    BufferedWriter w = Files.newWriter(temp, Charsets.UTF_8);
    try {
      w.write(I18N);
    } finally {
      w.close();
<a name="14"></a>    }
    File i18nFile = getTestFile("i18n.txt");
    assertTrue(<font color="#842dce"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>Files.equal(i18nFile, temp));
  }
  public void testTouch() throws IOException {
    File temp = createTempFile();
    assertTrue(temp.exists());
    assertTrue</b></font>(temp.delete());
    assertFalse(temp.exists());
    Files.touch(temp);
    assertTrue(temp.exists());
    Files.touch(temp);
    assertTrue(temp.exists());
    try {
      Files.touch(
          new File(temp.getPath()) {
            @Override
            public boolean setLastModified(long t) {
              return false;
            }
<a name="13"></a>
            private static final long serialVersionUID = 0;
          });
      <font color="#3b9c9c"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>fail("expected exception");
    } catch (IOException expected) {
    }
  }
  public void t</b></font>estTouchTime() throws IOException {
    File temp = createTempFile();
    assertTrue(temp.exists());
    temp.setLastModified(0);
    assertEquals(0, temp.lastModified());
    Files.touch(temp);
    assertThat(temp.lastModified()).isNotEqualTo(0);
  }
  public void testCreateParentDirs_root() throws IOException {
    File file = root();
    assertNull(file.getParentFile());
    assertNull(file.getCanonicalFile().getParentFile());
    Files.createParentDirs(file);
  }
  public void testCreateParentDirs_relativePath() throws IOException {
    File file = file("nonexistent.file");
    assertNull(file.getParentFile());
    assertNotNull(file.getCanonicalFile().getParentFile());
    Files.createParentDirs(file);
  }
  public void testCreateParentDirs_noParentsNeeded() throws IOException {
    File file = file(getTempDir(), "nonexistent.file");
    assertTrue(file.getParentFile().exists());
    Files.createParentDirs(file);
  }
  public void testCreateParentDirs_oneParentNeeded() throws IOException {
    File file = file(getTempDir(), "parent", "nonexistent.file");
    File parent = file.getParentFile();
    assertFalse(parent.exists());
    try {
      Files.createParentDirs(file);
      assertTrue(parent.exists());
    } finally {
      assertTrue(parent.delete());
    }
  }
<a name="4"></a>
  public void testCreateParentDirs_multipleParentsNeeded() throws IOException {
    File file = file(getTempDir(), "grandparent", "parent", "nonexistent.file");
    File parent = <font color="#6cc417"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>file.getParentFile();
    File grandparent = parent.getParentFile();
    assertFalse(grandparent.exists());
    Files.createParentDirs(file);
    assertTrue(parent.exists());
  }
  public void testCreateParentDirs_nonDirectoryParentExists() throws IOException {
    File parent = getTestFile("ascii.txt");
    assertTrue(parent.isFile());
<a name="16"></a>    File file = file</b></font>(parent, "foo");
    try {
      Files.createParentDirs(file);
      <font color="#2981b2"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>fail();
    } catch (IOException expected) {
    }
  }</b></font>
  public void testCreateTempDir() {
    File temp = Files.createTempDir();
    assertTrue(temp.exists());
    assertTrue(temp.isDirectory());
    assertThat(temp.listFiles()).isEmpty();
    assertTrue(temp.delete());
  }
  public void testMove() throws IOException {
    File i18nFile = getTestFile("i18n.txt");
    File temp1 = createTempFile();
    File temp2 = createTempFile();
    Files.copy(i18nFile, temp1);
    moveHelper(true, temp1, temp2);
    assertTrue(Files.equal(temp2, i18nFile));
  }
  public void testMoveViaCopy() throws IOException {
    File i18nFile = getTestFile("i18n.txt");
    File temp1 = createTempFile();
    File temp2 = createTempFile();
    Files.copy(i18nFile, temp1);
    moveHelper(true, new UnmovableFile(temp1, false, true), temp2);
    assertTrue(Files.equal(temp2, i18nFile));
  }
  public void testMoveFailures() throws IOException {
    File temp1 = createTempFile();
    File temp2 = createTempFile();
    moveHelper(false, new UnmovableFile(temp1, false, false), temp2);
    moveHelper(
        false, new UnmovableFile(temp1, false, false), new UnmovableFile(temp2, true, false));
    try {
      File asciiFile = getTestFile("ascii.txt");
      moveHelper(false, asciiFile, asciiFile);
      fail("expected exception");
    } catch (IllegalArgumentException expected) {
    }
  }
  private void moveHelper(boolean success, File from, File to) throws IOException {
    try {
      Files.move(from, to);
      if (success) {
        assertFalse(from.exists());
        assertTrue(to.exists());
      } else {
        fail("expected exception");
      }
    } catch (IOException possiblyExpected) {
      if (success) {
        throw possiblyExpected;
      }
    }
  }
  private static class UnmovableFile extends File {
    private final boolean canRename;
    private final boolean canDelete;
    public UnmovableFile(File file, boolean canRename, boolean canDelete) {
      super(file.getPath());
      this.canRename = canRename;
      this.canDelete = canDelete;
<a name="15"></a>    }
    @Override
    public boolean renameTo(File to) <font color="#f52887"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>{
      return canRename &amp;&amp; super.renameTo(to);
    }
    @Override
    public boolean delete() {
      return canDelete &amp;&amp; super.delete</b></font>();
    }
    private static final long serialVersionUID = 0;
  }
  public void testLineReading() throws IOException {
    File temp = createTempFile();
<a name="2"></a>    assertNull(Files.readFirstLine(temp, Charsets.UTF_8));
    assertTrue(Files.readLines(temp, Charsets.UTF_8).isEmpty());
    PrintWriter w = new PrintWriter(<font color="#980517"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>Files.newWriter(temp, Charsets.UTF_8));
    w.println("hello");
    w.println("");
    w.println(" world  ");
    w.println("");
    w.close();
    assertEquals("hello", Files.readFirstLine(temp, Charsets.UTF_8));
    assertEquals(
        ImmutableList.of("hello", "", " world  ", ""), Files.readLines(temp, Charsets.UTF_8));
    assertTrue(temp.delete());
  }
  public void testReadLines_withLineProcessor() throws IOException {
    File temp = createTempFile();
    LineProcessor&lt;List&lt;String&gt;&gt; collect =</b></font>
        new LineProcessor&lt;List&lt;String&gt;&gt;() {
          List&lt;String&gt; collector = new ArrayList&lt;&gt;();
<a name="17"></a>          @Override
          public boolean processLine(String line) {
            collector.add(line);
            <font color="#3090c7"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>return true;
          }
          @Override
          public List&lt;String&gt; getResult() {
            return collector;
          }</b></font>
        };
    assertThat(Files.readLines(temp, Charsets.UTF_8, collect)).isEmpty();
    PrintWriter w = new PrintWriter(Files.newWriter(temp, Charsets.UTF_8));
    w.println("hello");
    w.println("");
    w.println(" world  ");
    w.println("");
    w.close();
    Files.readLines(temp, Charsets.UTF_8, collect);
    assertThat(collect.getResult()).containsExactly("hello", "", " world  ", "").inOrder();
    LineProcessor&lt;List&lt;String&gt;&gt; collectNonEmptyLines =
        new LineProcessor&lt;List&lt;String&gt;&gt;() {
          List&lt;String&gt; collector = new ArrayList&lt;&gt;();
          @Override
          public boolean processLine(String line) {
            if (line.length() &gt; 0) {
              collector.add(line);
            }
            return true;
          }
          @Override
          public List&lt;String&gt; getResult() {
            return collector;
          }
        };
    Files.readLines(temp, Charsets.UTF_8, collectNonEmptyLines);
    assertThat(collectNonEmptyLines.getResult()).containsExactly("hello", " world  ").inOrder();
    assertTrue(temp.delete());
  }
<a name="6"></a>
  public void testHash() throws IOException {
    File asciiFile = getTestFile("ascii.txt");
    File i18nFile = <font color="#8c8774"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>getTestFile("i18n.txt");
    String init = "d41d8cd98f00b204e9800998ecf8427e";
    assertEquals(init, Hashing.md5().newHasher().hash().toString());
    String asciiHash = "e5df5a39f2b8cb71b24e1d8038f93131";
    assertEquals(asciiHash, Files.hash(asciiFile, Hashing.md5()).toString());
    String i18nHash = "7fa826962ce2079c8334cd4ebf33aea4";
    assertEquals(i18nHash, Files.hash(i18nFile, Hashing.md5</b></font>()).toString());
  }
  public void testMap() throws IOException {
    int size = 1024;
    byte[] bytes = newPreFilledByteArray(size);
    File file = createTempFile();
    Files.write(bytes, file);
    MappedByteBuffer actual = Files.map(file);
    ByteBuffer expected = ByteBuffer.wrap(bytes);
    assertTrue("ByteBuffers should be equal.", expected.equals(actual));
  }
  public void testMap_noSuchFile() throws IOException {
    File file = createTempFile();
    boolean deleted = file.delete();
    assertTrue(deleted);
    try {
      Files.map(file);
      fail("Should have thrown FileNotFoundException.");
    } catch (FileNotFoundException expected) {
    }
  }
  public void testMap_readWrite() throws IOException {
    int size = 1024;
    byte[] expectedBytes = new byte[size];
    byte[] bytes = newPreFilledByteArray(1024);
    File file = createTempFile();
    Files.write(bytes, file);
    Random random = new Random();
    random.nextBytes(expectedBytes);
    MappedByteBuffer map = Files.map(file, MapMode.READ_WRITE);
    map.put(expectedBytes);
    byte[] actualBytes = Files.toByteArray(file);
    assertTrue(Arrays.equals(expectedBytes, actualBytes));
  }
  public void testMap_readWrite_creates() throws IOException {
    int size = 1024;
<a name="10"></a>    byte[] expectedBytes = newPreFilledByteArray(1024);
    File file = <font color="#ad5910"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>createTempFile();
    boolean deleted = file.delete();
    assertTrue(deleted);
    assertFalse(file.exists());
    MappedByteBuffer map = Files.map(file, MapMode.READ_WRITE, size);
    map.put(expectedBytes);
    assertTrue(file.exists());
    assertTrue</b></font>(file.isFile());
    assertEquals(size, file.length());
    byte[] actualBytes = Files.toByteArray(file);
    assertTrue(Arrays.equals(expectedBytes, actualBytes));
  }
  public void testMap_readWrite_max_value_plus_1() throws IOException {
    File file = createTempFile();
    try {
      Files.map(file, MapMode.READ_WRITE, (long) Integer.MAX_VALUE + 1);
      fail("Should throw when size exceeds Integer.MAX_VALUE");
    } catch (IllegalArgumentException expected) {
    }
  }
  public void testGetFileExtension() {
    assertEquals("txt", Files.getFileExtension(".txt"));
    assertEquals("txt", Files.getFileExtension("blah.txt"));
<a name="1"></a>    assertEquals("txt", Files.getFileExtension("blah..txt"));
    assertEquals("txt", Files.getFileExtension(".blah.txt"));
    assertEquals("txt", Files.getFileExtension("/tmp/blah.txt"));
    <font color="#f63526"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>assertEquals("gz", Files.getFileExtension("blah.tar.gz"));
    assertEquals("", Files.getFileExtension("/"));
    assertEquals("", Files.getFileExtension("."));
    assertEquals("", Files.getFileExtension(".."));
    assertEquals("", Files.getFileExtension("..."));
    assertEquals("", Files.getFileExtension("blah"));
    assertEquals("", Files.getFileExtension("blah."));
    assertEquals("", Files.getFileExtension(".blah."));
    assertEquals("", Files.getFileExtension("/foo.bar/blah"));
    assertEquals("", Files.getFileExtension("/foo/.bar/blah"));
  }
  public void testGetNameWithoutExtension() {</b></font>
    assertEquals("", Files.getNameWithoutExtension(".txt"));
<a name="0"></a>    assertEquals("blah", Files.getNameWithoutExtension("blah.txt"));
    assertEquals("blah.", Files.getNameWithoutExtension("blah..txt"));
    assertEquals(".blah", Files.getNameWithoutExtension(".blah.txt"));
    assertEquals("blah", <font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>Files.getNameWithoutExtension("/tmp/blah.txt"));
    assertEquals("blah.tar", Files.getNameWithoutExtension("blah.tar.gz"));
    assertEquals("", Files.getNameWithoutExtension("/"));
    assertEquals("", Files.getNameWithoutExtension("."));
    assertEquals(".", Files.getNameWithoutExtension(".."));
    assertEquals("..", Files.getNameWithoutExtension("..."));
    assertEquals("blah", Files.getNameWithoutExtension("blah"));
    assertEquals("blah", Files.getNameWithoutExtension("blah."));
    assertEquals(".blah", Files.getNameWithoutExtension(".blah."));
    assertEquals("blah", Files.getNameWithoutExtension("/foo.bar/blah"));
    assertEquals("blah", Files.getNameWithoutExtension("/foo/.bar/blah"));
  }
  public void testReadBytes() throws IOException {
    ByteProcessor&lt;byte[]&gt; processor =</b></font>
        new ByteProcessor&lt;byte[]&gt;() {
          private final ByteArrayOutputStream out = new ByteArrayOutputStream();
          @Override
          public boolean processBytes(byte[] buffer, int offset, int length) throws IOException {
            if (length &gt;= 0) {
              out.write(buffer, offset, length);
            }
            return true;
          }
          @Override
          public byte[] getResult() {
            return out.toByteArray();
          }
        };
    File asciiFile = getTestFile("ascii.txt");
    byte[] result = Files.readBytes(asciiFile, processor);
    assertEquals(Bytes.asList(Files.toByteArray(asciiFile)), Bytes.asList(result));
  }
  public void testReadBytes_returnFalse() throws IOException {
    ByteProcessor&lt;byte[]&gt; processor =
        new ByteProcessor&lt;byte[]&gt;() {
          private final ByteArrayOutputStream out = new ByteArrayOutputStream();
          @Override
          public boolean processBytes(byte[] buffer, int offset, int length) throws IOException {
            if (length &gt; 0) {
              out.write(buffer, offset, 1);
              return false;
            } else {
              return true;
            }
          }
          @Override
          public byte[] getResult() {
            return out.toByteArray();
          }
        };
    File asciiFile = getTestFile("ascii.txt");
    byte[] result = Files.readBytes(asciiFile, processor);
    assertEquals(1, result.length);
  }
  public void testPredicates() throws IOException {
    File asciiFile = getTestFile("ascii.txt");
    File dir = asciiFile.getParentFile();
    assertTrue(Files.isDirectory().apply(dir));
    assertFalse(Files.isFile().apply(dir));
    assertFalse(Files.isDirectory().apply(asciiFile));
    assertTrue(Files.isFile().apply(asciiFile));
  }
  private static File root() {
    return File.listRoots()[0];
  }
  private static File file(String first, String... more) {
    return file(new File(first), more);
  }
  private static File file(File first, String... more) {
    File file = first;
    for (String name : more) {
      file = new File(file, name);
    }
    return file;
  }
}
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
