
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Tokens: 16, <button onclick='openModal()' class='match'>CODE CLONE</button></h2>
        <div class="column">
            <h3>jedis-MDEwOlJlcG9zaXRvcnk3MTU2MDU=-flat-DefaultJedisClientConfig.java</h3>
            <pre><code>1  package redis.clients.jedis;
2  import java.util.function.Supplier;
3  import javax.net.ssl.HostnameVerifier;
4  import javax.net.ssl.SSLParameters;
5  import javax.net.ssl.SSLSocketFactory;
6  public final class DefaultJedisClientConfig implements JedisClientConfig {
7    private final RedisProtocol redisProtocol;
8    private final int connectionTimeoutMillis;
9    private final int socketTimeoutMillis;
10    private final int blockingSocketTimeoutMillis;
11    private volatile Supplier&lt;RedisCredentials&gt; credentialsProvider;
12    private final int database;
13    private final String clientName;
14    private final boolean ssl;
15    private final SSLSocketFactory sslSocketFactory;
16    private final SSLParameters sslParameters;
17    private final HostnameVerifier hostnameVerifier;
18    private final HostAndPortMapper hostAndPortMapper;
19    private DefaultJedisClientConfig(RedisProtocol protocol, int connectionTimeoutMillis, int soTimeoutMillis,
20        int blockingSocketTimeoutMillis, Supplier&lt;RedisCredentials&gt; credentialsProvider, int database,
21        String clientName, boolean ssl, SSLSocketFactory sslSocketFactory, SSLParameters sslParameters,
22        HostnameVerifier hostnameVerifier, HostAndPortMapper hostAndPortMapper) {
23      this.redisProtocol = protocol;
24      this.connectionTimeoutMillis = connectionTimeoutMillis;
25      this.socketTimeoutMillis = soTimeoutMillis;
26      this.blockingSocketTimeoutMillis = blockingSocketTimeoutMillis;
27      this.credentialsProvider = credentialsProvider;
28      this.database = database;
29      this.clientName = clientName;
30      this.ssl = ssl;
31      this.sslSocketFactory = sslSocketFactory;
32      this.sslParameters = sslParameters;
33      this.hostnameVerifier = hostnameVerifier;
34      this.hostAndPortMapper = hostAndPortMapper;
35    }
36    @Override
37    public RedisProtocol getRedisProtocol() {
38      return redisProtocol;
39    }
40    @Override
41    public int getConnectionTimeoutMillis() {
42      return connectionTimeoutMillis;
43    }
44    @Override
45    public int getSocketTimeoutMillis() {
46      return socketTimeoutMillis;
47    }
48    @Override
49    public int getBlockingSocketTimeoutMillis() {
50      return blockingSocketTimeoutMillis;
51    }
52    @Override
53    public String getUser() {
54      return credentialsProvider.get().getUser();
55    }
56    @Override
57    public String getPassword() {
58      char[] password = credentialsProvider.get().getPassword();
59      return password == null ? null : new String(password);
60    }
61    @Override
62    public Supplier&lt;RedisCredentials&gt; getCredentialsProvider() {
63      return credentialsProvider;
64    }
65    @Override
66    public int getDatabase() {
67      return database;
68    }
69    @Override
70    public String getClientName() {
71      return clientName;
72    }
73    @Override
74    public boolean isSsl() {
75      return ssl;
76    }
77    @Override
78    public SSLSocketFactory getSslSocketFactory() {
79      return sslSocketFactory;
80    }
81    @Override
82    public SSLParameters getSslParameters() {
83      return sslParameters;
84    }
85    @Override
86    public HostnameVerifier getHostnameVerifier() {
87      return hostnameVerifier;
88    }
89    @Override
90    public HostAndPortMapper getHostAndPortMapper() {
91      return hostAndPortMapper;
92    }
93    public static Builder builder() {
94      return new Builder();
95    }
96    public static class Builder {
97      private RedisProtocol redisProtocol = null;
<span onclick='openModal()' class='match'>98      private int connectionTimeoutMillis = Protocol.DEFAULT_TIMEOUT;
99      private int socketTimeoutMillis = Protocol.DEFAULT_TIMEOUT;
100      private int blockingSocketTimeoutMillis = 0;
</span>101      private String user = null;
102      private String password = null;
103      private Supplier&lt;RedisCredentials&gt; credentialsProvider;
104      private int database = Protocol.DEFAULT_DATABASE;
105      private String clientName = null;
106      private boolean ssl = false;
107      private SSLSocketFactory sslSocketFactory = null;
108      private SSLParameters sslParameters = null;
109      private HostnameVerifier hostnameVerifier = null;
110      private HostAndPortMapper hostAndPortMapper = null;
111      private Builder() {
112      }
113      public DefaultJedisClientConfig build() {
114        if (credentialsProvider == null) {
115          credentialsProvider = new DefaultRedisCredentialsProvider(
116              new DefaultRedisCredentials(user, password));
117        }
118        return new DefaultJedisClientConfig(redisProtocol, connectionTimeoutMillis, socketTimeoutMillis,
119            blockingSocketTimeoutMillis, credentialsProvider, database, clientName, ssl,
120            sslSocketFactory, sslParameters, hostnameVerifier, hostAndPortMapper);
121      }
122      public Builder resp3() {
123        return protocol(RedisProtocol.RESP3);
124      }
125      public Builder protocol(RedisProtocol protocol) {
126        this.redisProtocol = protocol;
127        return this;
128      }
129      public Builder timeoutMillis(int timeoutMillis) {
130        this.connectionTimeoutMillis = timeoutMillis;
131        this.socketTimeoutMillis = timeoutMillis;
132        return this;
133      }
134      public Builder connectionTimeoutMillis(int connectionTimeoutMillis) {
135        this.connectionTimeoutMillis = connectionTimeoutMillis;
136        return this;
137      }
138      public Builder socketTimeoutMillis(int socketTimeoutMillis) {
139        this.socketTimeoutMillis = socketTimeoutMillis;
140        return this;
141      }
142      public Builder blockingSocketTimeoutMillis(int blockingSocketTimeoutMillis) {
143        this.blockingSocketTimeoutMillis = blockingSocketTimeoutMillis;
144        return this;
145      }
146      public Builder user(String user) {
147        this.user = user;
148        return this;
149      }
150      public Builder password(String password) {
151        this.password = password;
152        return this;
153      }
154      public Builder credentials(RedisCredentials credentials) {
155        this.credentialsProvider = new DefaultRedisCredentialsProvider(credentials);
156        return this;
157      }
158      public Builder credentialsProvider(Supplier&lt;RedisCredentials&gt; credentials) {
159        this.credentialsProvider = credentials;
160        return this;
161      }
162      public Builder database(int database) {
163        this.database = database;
164        return this;
165      }
166      public Builder clientName(String clientName) {
167        this.clientName = clientName;
168        return this;
169      }
170      public Builder ssl(boolean ssl) {
171        this.ssl = ssl;
172        return this;
173      }
174      public Builder sslSocketFactory(SSLSocketFactory sslSocketFactory) {
175        this.sslSocketFactory = sslSocketFactory;
176        return this;
177      }
178      public Builder sslParameters(SSLParameters sslParameters) {
179        this.sslParameters = sslParameters;
180        return this;
181      }
182      public Builder hostnameVerifier(HostnameVerifier hostnameVerifier) {
183        this.hostnameVerifier = hostnameVerifier;
184        return this;
185      }
186      public Builder hostAndPortMapper(HostAndPortMapper hostAndPortMapper) {
187        this.hostAndPortMapper = hostAndPortMapper;
188        return this;
189      }
190    }
191    public static DefaultJedisClientConfig create(int connectionTimeoutMillis, int soTimeoutMillis,
192        int blockingSocketTimeoutMillis, String user, String password, int database, String clientName,
193        boolean ssl, SSLSocketFactory sslSocketFactory, SSLParameters sslParameters,
194        HostnameVerifier hostnameVerifier, HostAndPortMapper hostAndPortMapper) {
195      return new DefaultJedisClientConfig(null,
196          connectionTimeoutMillis, soTimeoutMillis, blockingSocketTimeoutMillis,
197          new DefaultRedisCredentialsProvider(new DefaultRedisCredentials(user, password)), database,
198          clientName, ssl, sslSocketFactory, sslParameters, hostnameVerifier, hostAndPortMapper);
199    }
200    public static DefaultJedisClientConfig copyConfig(JedisClientConfig copy) {
201      return new DefaultJedisClientConfig(copy.getRedisProtocol(),
202          copy.getConnectionTimeoutMillis(), copy.getSocketTimeoutMillis(),
203          copy.getBlockingSocketTimeoutMillis(), copy.getCredentialsProvider(),
204          copy.getDatabase(), copy.getClientName(), copy.isSsl(), copy.getSslSocketFactory(),
205          copy.getSslParameters(), copy.getHostnameVerifier(), copy.getHostAndPortMapper());
206    }
207  }
</code></pre>
        </div>
        <div class="column">
            <h3>jedis-MDEwOlJlcG9zaXRvcnk3MTU2MDU=-flat-DefaultJedisSocketFactory.java</h3>
            <pre><code>1  package redis.clients.jedis;
2  import java.net.InetAddress;
3  import java.net.InetSocketAddress;
4  import java.net.Socket;
5  import java.util.Arrays;
6  import java.util.Collections;
7  import java.util.List;
8  import javax.net.ssl.HostnameVerifier;
9  import javax.net.ssl.SSLParameters;
10  import javax.net.ssl.SSLSocket;
11  import javax.net.ssl.SSLSocketFactory;
12  import redis.clients.jedis.exceptions.JedisConnectionException;
13  import redis.clients.jedis.util.IOUtils;
14  public class DefaultJedisSocketFactory implements JedisSocketFactory {
15    protected static final HostAndPort DEFAULT_HOST_AND_PORT = new HostAndPort(Protocol.DEFAULT_HOST,
16        Protocol.DEFAULT_PORT);
17    private volatile HostAndPort hostAndPort = DEFAULT_HOST_AND_PORT;
<span onclick='openModal()' class='match'>18    private int connectionTimeout = Protocol.DEFAULT_TIMEOUT;
19    private int socketTimeout = Protocol.DEFAULT_TIMEOUT;
20    private boolean ssl = false;
</span>21    private SSLSocketFactory sslSocketFactory = null;
22    private SSLParameters sslParameters = null;
23    private HostnameVerifier hostnameVerifier = null;
24    private HostAndPortMapper hostAndPortMapper = null;
25    public DefaultJedisSocketFactory() {
26    }
27    public DefaultJedisSocketFactory(HostAndPort hostAndPort) {
28      this(hostAndPort, null);
29    }
30    public DefaultJedisSocketFactory(JedisClientConfig config) {
31      this(null, config);
32    }
33    public DefaultJedisSocketFactory(HostAndPort hostAndPort, JedisClientConfig config) {
34      if (hostAndPort != null) {
35        this.hostAndPort = hostAndPort;
36      }
37      if (config != null) {
38        this.connectionTimeout = config.getConnectionTimeoutMillis();
39        this.socketTimeout = config.getSocketTimeoutMillis();
40        this.ssl = config.isSsl();
41        this.sslSocketFactory = config.getSslSocketFactory();
42        this.sslParameters = config.getSslParameters();
43        this.hostnameVerifier = config.getHostnameVerifier();
44        this.hostAndPortMapper = config.getHostAndPortMapper();
45      }
46    }
47    private Socket connectToFirstSuccessfulHost(HostAndPort hostAndPort) throws Exception {
48      List&lt;InetAddress&gt; hosts = Arrays.asList(InetAddress.getAllByName(hostAndPort.getHost()));
49      if (hosts.size() &gt; 1) {
50        Collections.shuffle(hosts);
51      }
52      JedisConnectionException jce = new JedisConnectionException(&quot;Failed to connect to any host resolved for DNS name.&quot;);
53      for (InetAddress host : hosts) {
54        try {
55          Socket socket = new Socket();
56          socket.setReuseAddress(true);
57          socket.setKeepAlive(true); 
58          socket.setTcpNoDelay(true); 
59          socket.setSoLinger(true, 0); 
60          socket.connect(new InetSocketAddress(host.getHostAddress(), hostAndPort.getPort()), connectionTimeout);
61          return socket;
62        } catch (Exception e) {
63          jce.addSuppressed(e);
64        }
65      }
66      throw jce;
67    }
68    @Override
69    public Socket createSocket() throws JedisConnectionException {
70      Socket socket = null;
71      try {
72        HostAndPort _hostAndPort = getSocketHostAndPort();
73        socket = connectToFirstSuccessfulHost(_hostAndPort);
74        socket.setSoTimeout(socketTimeout);
75        if (ssl) {
76          SSLSocketFactory _sslSocketFactory = this.sslSocketFactory;
77          if (null == _sslSocketFactory) {
78            _sslSocketFactory = (SSLSocketFactory) SSLSocketFactory.getDefault();
79          }
80          socket = _sslSocketFactory.createSocket(socket, _hostAndPort.getHost(), _hostAndPort.getPort(), true);
81          if (null != sslParameters) {
82            ((SSLSocket) socket).setSSLParameters(sslParameters);
83          }
84          if (null != hostnameVerifier
85              &amp;&amp; !hostnameVerifier.verify(_hostAndPort.getHost(), ((SSLSocket) socket).getSession())) {
86            String message = String.format(
87              &quot;The connection to &#x27;%s&#x27; failed ssl/tls hostname verification.&quot;, _hostAndPort.getHost());
88            throw new JedisConnectionException(message);
89          }
90        }
91        return socket;
92      } catch (Exception ex) {
93        IOUtils.closeQuietly(socket);
94        if (ex instanceof JedisConnectionException) {
95          throw (JedisConnectionException) ex;
96        } else {
97          throw new JedisConnectionException(&quot;Failed to create socket.&quot;, ex);
98        }
99      }
100    }
101    public void updateHostAndPort(HostAndPort hostAndPort) {
102      this.hostAndPort = hostAndPort;
103    }
104    public HostAndPort getHostAndPort() {
105      return this.hostAndPort;
106    }
107    protected HostAndPort getSocketHostAndPort() {
108      HostAndPortMapper mapper = hostAndPortMapper;
109      HostAndPort hap = this.hostAndPort;
110      if (mapper != null) {
111        HostAndPort mapped = mapper.getHostAndPort(hap);
112        if (mapped != null) {
113          return mapped;
114        }
115      }
116      return hap;
117    }
118    @Override
119    public String toString() {
120      return &quot;DefaultJedisSocketFactory{&quot; + hostAndPort.toString() + &quot;}&quot;;
121    }
122  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from jedis-MDEwOlJlcG9zaXRvcnk3MTU2MDU=-flat-DefaultJedisClientConfig.java</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from jedis-MDEwOlJlcG9zaXRvcnk3MTU2MDU=-flat-DefaultJedisSocketFactory.java</div>
                </div>
                <div class="column column_space"><pre><code>98      private int connectionTimeoutMillis = Protocol.DEFAULT_TIMEOUT;
99      private int socketTimeoutMillis = Protocol.DEFAULT_TIMEOUT;
100      private int blockingSocketTimeoutMillis = 0;
</pre></code></div>
                <div class="column column_space"><pre><code>18    private int connectionTimeout = Protocol.DEFAULT_TIMEOUT;
19    private int socketTimeout = Protocol.DEFAULT_TIMEOUT;
20    private boolean ssl = false;
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    