
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 10.336538461538462%, Tokens: 11</h2>
        <div class="column">
            <h3>motan-MDEwOlJlcG9zaXRvcnk1NjY3OTUyMQ==-flat-ConsulUtils.java</h3>
            <pre><code>1  package com.weibo.api.motan.registry.consul;
2  import com.weibo.api.motan.common.MotanConstants;
<span onclick='openModal()' class='match'>3  import com.weibo.api.motan.common.URLParamType;
4  import com.weibo.api.motan.rpc.URL;
5  import com.weibo.api.motan.util.StringTools;
6  import java.util.ArrayList;
7  import java.util.HashMap;
8  import java.util.List;
9  import java.util.Map;
10  public class ConsulUtils {
11      public static boolean isSame(List<URL> urls1, List<URL> urls2) {
</span>12          if (urls1 == null || urls2 == null) {
13              return false;
14          }
15          if (urls1.size() != urls2.size()) {
16              return false;
17          }
18          return urls1.containsAll(urls2);
19      }
20      public static ConsulService buildService(URL url) {
21          ConsulService service = new ConsulService();
22          service.setAddress(url.getHost());
23          service.setId(ConsulUtils.convertConsulSerivceId(url));
24          service.setName(ConsulUtils.convertGroupToServiceName(url.getGroup()));
25          service.setPort(url.getPort());
26          service.setTtl(ConsulConstants.TTL);
27          List<String> tags = new ArrayList<String>();
28          tags.add(ConsulConstants.CONSUL_TAG_MOTAN_PROTOCOL + url.getProtocol());
29          tags.add(ConsulConstants.CONSUL_TAG_MOTAN_URL + StringTools.urlEncode(url.toFullStr()));
30          service.setTags(tags);
31          return service;
32      }
33      public static URL buildUrl(ConsulService service) {
34          URL url = null;
35          for (String tag : service.getTags()) {
36              if (tag.startsWith(ConsulConstants.CONSUL_TAG_MOTAN_URL)) {
37                  String encodeUrl = tag.substring(tag.indexOf("_") + 1);
38                  url = URL.valueOf(StringTools.urlDecode(encodeUrl));
39              }
40          }
41          if (url == null) {
42              Map<String, String> params = new HashMap<String, String>();
43              String group = service.getName().substring(ConsulConstants.CONSUL_SERVICE_MOTAN_PRE.length());
44              params.put(URLParamType.group.getName(), group);
45              params.put(URLParamType.nodeType.getName(), MotanConstants.NODE_TYPE_SERVICE);
46              String protocol = ConsulUtils.getProtocolFromTag(service.getTags().get(0));
47              url = new URL(protocol, service.getAddress(), service.getPort(),
48                      ConsulUtils.getPathFromServiceId(service.getId()), params);
49          }
50          return url;
51      }
52      public static String getUrlClusterInfo(URL url) {
53          return url.getProtocol() + "-" + url.getPath();
54      }
55      public static String convertGroupToServiceName(String group) {
56          return ConsulConstants.CONSUL_SERVICE_MOTAN_PRE + group;
57      }
58      public static String getGroupFromServiceName(String group) {
59          return group.substring(ConsulConstants.CONSUL_SERVICE_MOTAN_PRE.length());
60      }
61      public static String convertConsulSerivceId(URL url) {
62          if (url == null) {
63              return null;
64          }
65          return convertServiceId(url.getHost(), url.getPort(), url.getPath());
66      }
67      public static String getPathFromServiceId(String serviceId) {
68          return serviceId.substring(serviceId.indexOf("-") + 1);
69      }
70      public static String getProtocolFromTag(String tag) {
71          return tag.substring(ConsulConstants.CONSUL_TAG_MOTAN_PROTOCOL.length());
72      }
73      public static String convertServiceId(String host, int port, String path) {
74          return host + ":" + port + "-" + path;
75      }
76  }
</code></pre>
        </div>
        <div class="column">
            <h3>BungeeCord-MDEwOlJlcG9zaXRvcnk2MDg0MjEw-flat-ComponentsTest.java</h3>
            <pre><code>1  package net.md_5.bungee.api.chat;
<span onclick='openModal()' class='match'>2  import java.awt.Color;
3  import net.md_5.bungee.api.ChatColor;
4  import net.md_5.bungee.api.chat.hover.content.Item;
5  import net.md_5.bungee.api.chat.hover.content.Text;
6  import net.md_5.bungee.chat.ComponentSerializer;
7  import org.junit.Assert;
8  import org.junit.Test;
9  public class ComponentsTest
10  {
11      public static void testDissembleReassemble(BaseComponent[] components)
12      {
13          String json = ComponentSerializer.toString( components );
</span>14          BaseComponent[] parsed = ComponentSerializer.parse( json );
15          Assert.assertEquals( TextComponent.toLegacyText( parsed ), TextComponent.toLegacyText( components ) );
16      }
17      public static void testDissembleReassemble(String json)
18      {
19          BaseComponent[] parsed = ComponentSerializer.parse( json );
20          Assert.assertEquals( json, ComponentSerializer.toString( parsed ) );
21      }
22      @Test
23      public void testItemParse()
24      {
25          BaseComponent[] components;
26          TextComponent textComponent;
27          String json;
28          textComponent = new TextComponent( "Test" );
29          textComponent.setHoverEvent( new HoverEvent( HoverEvent.Action.SHOW_ITEM, new BaseComponent[]
30          {
31              new TextComponent( "{id:\"minecraft:netherrack\",Count:47b}" )
32          } ) );
33          testDissembleReassemble( new BaseComponent[]
34          {
35              textComponent
36          } );
37          json = "{\"hoverEvent\":{\"action\":\"show_item\",\"value\":[{\"text\":\"{id:\\\"minecraft:netherrack\\\",Count:47b}\"}]},\"text\":\"Test\"}";
38          testDissembleReassemble( json );
39          String hoverVal = "{\"text\":\"{id:\\\"minecraft:dirt\\\",Count:1b}\"}";
40          json = "{\"extra\":[{\"text\":\"[\"},{\"extra\":[{\"translate\":\"block.minecraft.dirt\"}],\"text\":\"\"},{\"text\":\"]\"}],\"hoverEvent\":{\"action\":\"show_item\",\"value\":[" + hoverVal + "]},\"text\":\"\"}";
41          components = ComponentSerializer.parse( json );
42          Text contentText = ( (Text) components[0].getHoverEvent().getContents().get( 0 ) );
43          Assert.assertEquals( hoverVal, ComponentSerializer.toString( (BaseComponent[]) contentText.getValue() ) );
44          testDissembleReassemble( components );
45          TextComponent component1 = new TextComponent( "HoverableText" );
46          String nbt = "{display:{Name:{text:Hello},Lore:[{text:Line_1},{text:Line_2}]},ench:[{id:49,lvl:5}],Unbreakable:1}}";
47          Item contentItem = new Item( "minecraft:wood", 1, ItemTag.ofNbt( nbt ) );
48          HoverEvent hoverEvent = new HoverEvent( HoverEvent.Action.SHOW_ITEM, contentItem );
49          component1.setHoverEvent( hoverEvent );
50          json = ComponentSerializer.toString( component1 );
51          components = ComponentSerializer.parse( json );
52          Item parsedContentItem = ( (Item) components[0].getHoverEvent().getContents().get( 0 ) );
53          Assert.assertEquals( contentItem, parsedContentItem );
54          Assert.assertEquals( contentItem.getCount(), parsedContentItem.getCount() );
55          Assert.assertEquals( contentItem.getId(), parsedContentItem.getId() );
56          Assert.assertEquals( nbt, parsedContentItem.getTag().getNbt() );
57      }
58      @Test
59      public void testEmptyComponentBuilder()
60      {
61          ComponentBuilder builder = new ComponentBuilder();
62          BaseComponent[] parts = builder.create();
63          Assert.assertEquals( parts.length, 0 );
64          for ( int i = 0; i < 3; i++ )
65          {
66              builder.append( "part:" + i );
67              parts = builder.create();
68              Assert.assertEquals( parts.length, i + 1 );
69          }
70      }
71      @Test
72      public void testDummyRetaining()
73      {
74          ComponentBuilder builder = new ComponentBuilder();
75          Assert.assertNotNull( builder.getCurrentComponent() );
76          builder.color( ChatColor.GREEN );
77          builder.append( "test ", ComponentBuilder.FormatRetention.ALL );
78          Assert.assertEquals( builder.getCurrentComponent().getColor(), ChatColor.GREEN );
79      }
80      @Test(expected = IndexOutOfBoundsException.class)
81      public void testComponentGettingExceptions()
82      {
83          ComponentBuilder builder = new ComponentBuilder();
84          builder.getComponent( -1 );
85          builder.getComponent( 0 );
86          builder.getComponent( 1 );
87          BaseComponent component = new TextComponent( "Hello" );
88          builder.append( component );
89          Assert.assertEquals( builder.getComponent( 0 ), component );
90          builder.getComponent( 1 );
91      }
92      @Test
93      public void testComponentParting()
94      {
95          ComponentBuilder builder = new ComponentBuilder();
96          TextComponent apple = new TextComponent( "apple" );
97          builder.append( apple );
98          Assert.assertEquals( builder.getCurrentComponent(), apple );
99          Assert.assertEquals( builder.getComponent( 0 ), apple );
100          TextComponent mango = new TextComponent( "mango" );
101          TextComponent orange = new TextComponent( "orange" );
102          builder.append( mango );
103          builder.append( orange );
104          builder.removeComponent( 1 ); 
105          Assert.assertEquals( builder.getComponent( 0 ), apple );
106          Assert.assertEquals( builder.getComponent( 1 ), orange );
107      }
108      @Test
109      public void testToLegacyFromLegacy()
110      {
111          String text = "§a§lHello §f§kworld§7!";
112          Assert.assertEquals( text, TextComponent.toLegacyText( TextComponent.fromLegacyText( text ) ) );
113      }
114      @Test(expected = IndexOutOfBoundsException.class)
115      public void testComponentBuilderCursorInvalidPos()
116      {
117          ComponentBuilder builder = new ComponentBuilder();
118          builder.append( new TextComponent( "Apple, " ) );
119          builder.append( new TextComponent( "Orange, " ) );
120          builder.setCursor( -1 );
121          builder.setCursor( 2 );
122      }
123      @Test
124      public void testComponentBuilderCursor()
125      {
126          TextComponent t1, t2, t3;
127          ComponentBuilder builder = new ComponentBuilder();
128          Assert.assertEquals( builder.getCursor(), -1 );
129          builder.append( t1 = new TextComponent( "Apple, " ) );
130          Assert.assertEquals( builder.getCursor(), 0 );
131          builder.append( t2 = new TextComponent( "Orange, " ) );
132          builder.append( t3 = new TextComponent( "Mango, " ) );
133          Assert.assertEquals( builder.getCursor(), 2 );
134          builder.setCursor( 0 );
135          Assert.assertEquals( builder.getCurrentComponent(), t1 );
136          builder.append( new TextComponent( "and Grapefruit" ) );
137          Assert.assertEquals( builder.getCursor(), 3 );
138          builder.setCursor( 0 );
139          builder.resetCursor();
140          Assert.assertEquals( builder.getCursor(), 3 );
141      }
142      @Test
143      public void testLegacyComponentBuilderAppend()
144      {
145          String text = "§a§lHello §r§kworld§7!";
146          BaseComponent[] components = TextComponent.fromLegacyText( text );
147          BaseComponent[] builderComponents = new ComponentBuilder().append( components ).create();
148          Assert.assertArrayEquals( components, builderComponents );
149      }
150      @Test
151      public void testModernShowAdvancement()
152      {
153          String advancement = "achievement.openInventory";
154          HoverEvent hoverEvent = new HoverEvent(
155                  HoverEvent.Action.SHOW_TEXT,
156                  new Text( advancement )
157          );
158          TextComponent component = new TextComponent( "test" );
159          component.setHoverEvent( hoverEvent );
160          Assert.assertEquals( component.getHoverEvent().getContents().size(), 1 );
161          Assert.assertTrue( component.getHoverEvent().getContents().get( 0 ) instanceof Text );
162          Assert.assertEquals( ( (Text) component.getHoverEvent().getContents().get( 0 ) ).getValue(), advancement );
163      }
164      @Test
165      public void testHoverEventContents()
166      {
167          HoverEvent hoverEvent = new HoverEvent(
168                  HoverEvent.Action.SHOW_TEXT,
169                  new Text( new ComponentBuilder( "First" ).create() ),
170                  new Text( new ComponentBuilder( "Second" ).create() )
171          );
172          TextComponent component = new TextComponent( "Sample text" );
173          component.setHoverEvent( hoverEvent );
174          Assert.assertEquals( hoverEvent.getContents().size(), 2 );
175          Assert.assertFalse( hoverEvent.isLegacy() );
176          String serialized = ComponentSerializer.toString( component );
177          BaseComponent[] deserialized = ComponentSerializer.parse( serialized );
178          Assert.assertEquals( component.getHoverEvent(), deserialized[0].getHoverEvent() );
179          hoverEvent = new HoverEvent( HoverEvent.Action.SHOW_TEXT, new ComponentBuilder( "Sample text" ).create() );
180          Assert.assertEquals( hoverEvent.getContents().size(), 1 );
181          Assert.assertTrue( hoverEvent.isLegacy() );
182          serialized = ComponentSerializer.toString( component );
183          deserialized = ComponentSerializer.parse( serialized );
184          Assert.assertEquals( component.getHoverEvent(), deserialized[0].getHoverEvent() );
185          String json = "{\"italic\":true,\"color\":\"gray\",\"translate\":\"chat.type.admin\",\"with\":[{\"text\":\"@\"}"
186                  + ",{\"translate\":\"commands.give.success.single\",\"with\":[\"1\",{\"color\":\"white\""
187                  + ",\"hoverEvent\":{\"action\":\"show_item\",\"contents\":{\"id\":\"minecraft:diamond_sword\",\"tag\":\""
188                  + "{Damage:0,display:{Lore:['\\\"test lore'!\\\"'],Name:'\\\"test\\\"'}}\"}},"
189                  + "\"extra\":[{\"italic\":true,\"extra\":[{\"text\":\"test\"}],\"text\":\"\"},{\"text\":\"]\"}],"
190                  + "\"text\":\"[\"},{\"insertion\":\"Name\",\"clickEvent\":{\"action\":\"suggest_command\",\"value\":"
191                  + "\"/tell Name \"},\"hoverEvent\":{\"action\":\"show_entity\",\"contents\":"
192                  + "{\"type\":\"minecraft:player\",\"id\":\"00000000-0000-0000-0000-00000000000000\",\"name\":"
193                  + "{\"text\":\"Name\"}}},\"text\":\"Name\"}]}]}";
194          testDissembleReassemble( ComponentSerializer.parse( json ) );
195      }
196      @Test
197      public void testFormatRetentionCopyFormatting()
198      {
199          TextComponent first = new TextComponent( "Hello" );
200          first.setBold( true );
201          first.setColor( ChatColor.RED );
202          first.setClickEvent( new ClickEvent( ClickEvent.Action.RUN_COMMAND, "test" ) );
203          first.setHoverEvent( new HoverEvent( HoverEvent.Action.SHOW_TEXT, new ComponentBuilder( "Test" ).create() ) );
204          TextComponent second = new TextComponent( " world" );
205          second.copyFormatting( first, ComponentBuilder.FormatRetention.ALL, true );
206          Assert.assertEquals( first.isBold(), second.isBold() );
207          Assert.assertEquals( first.getColor(), second.getColor() );
208          Assert.assertEquals( first.getClickEvent(), second.getClickEvent() );
209          Assert.assertEquals( first.getHoverEvent(), second.getHoverEvent() );
210      }
211      @Test
212      public void testBuilderClone()
213      {
214          ComponentBuilder builder = new ComponentBuilder( "Hello " ).color( ChatColor.RED ).append( "world" ).color( ChatColor.DARK_RED );
215          ComponentBuilder cloned = new ComponentBuilder( builder );
216          Assert.assertEquals( TextComponent.toLegacyText( builder.create() ), TextComponent.toLegacyText( cloned.create() ) );
217      }
218      @Test
219      public void testBuilderAppendMixedComponents()
220      {
221          ComponentBuilder builder = new ComponentBuilder( "Hello " );
222          TextComponent textComponent = new TextComponent( "world " );
223          TranslatableComponent translatableComponent = new TranslatableComponent( "item.swordGold.name" );
224          builder.append( new BaseComponent[]
225          {
226              textComponent,
227              translatableComponent
228          } );
229          ScoreComponent scoreComponent = new ScoreComponent( "myscore", "myobjective" );
230          builder.append( scoreComponent ); 
231          BaseComponent[] components = builder.create();
232          Assert.assertEquals( "Hello ", components[0].toPlainText() );
233          Assert.assertEquals( textComponent.toPlainText(), components[1].toPlainText() );
234          Assert.assertEquals( translatableComponent.toPlainText(), components[2].toPlainText() );
235          Assert.assertEquals( scoreComponent.toPlainText(), components[3].toPlainText() );
236      }
237      @Test
238      public void testScore()
239      {
240          BaseComponent[] component = ComponentSerializer.parse( "{\"score\":{\"name\":\"@p\",\"objective\":\"TEST\",\"value\":\"hello\"}}" );
241          String text = ComponentSerializer.toString( component );
242          BaseComponent[] reparsed = ComponentSerializer.parse( text );
243          Assert.assertArrayEquals( component, reparsed );
244      }
245      @Test
246      public void testBuilderAppend()
247      {
248          ClickEvent clickEvent = new ClickEvent( ClickEvent.Action.RUN_COMMAND, "/help " );
249          HoverEvent hoverEvent = new HoverEvent( HoverEvent.Action.SHOW_TEXT, new ComponentBuilder( "Hello world" ).create() );
250          ComponentBuilder builder = new ComponentBuilder( "Hello " ).color( ChatColor.YELLOW );
251          builder.append( new ComponentBuilder( "world!" ).color( ChatColor.GREEN ).event( hoverEvent ).event( clickEvent ).create() );
252          BaseComponent[] components = builder.create();
253          Assert.assertEquals( components[1].getHoverEvent(), hoverEvent );
254          Assert.assertEquals( components[1].getClickEvent(), clickEvent );
255          Assert.assertEquals( "Hello world!", BaseComponent.toPlainText( components ) );
256          Assert.assertEquals( ChatColor.YELLOW + "Hello " + ChatColor.GREEN + "world!", BaseComponent.toLegacyText( components ) );
257      }
258      @Test
259      public void testBuilderAppendLegacy()
260      {
261          ComponentBuilder builder = new ComponentBuilder( "Hello " ).color( ChatColor.YELLOW );
262          builder.appendLegacy( "§aworld!" );
263          BaseComponent[] components = builder.create();
264          Assert.assertEquals( "Hello world!", BaseComponent.toPlainText( components ) );
265          Assert.assertEquals( ChatColor.YELLOW + "Hello " + ChatColor.GREEN + "world!", BaseComponent.toLegacyText( components ) );
266      }
267      @Test
268      public void testBasicComponent()
269      {
270          TextComponent textComponent = new TextComponent( "Hello world" );
271          textComponent.setColor( ChatColor.RED );
272          Assert.assertEquals( "Hello world", textComponent.toPlainText() );
273          Assert.assertEquals( ChatColor.RED + "Hello world", textComponent.toLegacyText() );
274      }
275      @Test
276      public void testLegacyConverter()
277      {
278          BaseComponent[] test1 = TextComponent.fromLegacyText( ChatColor.AQUA + "Aqua " + ChatColor.RED + ChatColor.BOLD + "RedBold" );
279          Assert.assertEquals( "Aqua RedBold", BaseComponent.toPlainText( test1 ) );
280          Assert.assertEquals( ChatColor.AQUA + "Aqua " + ChatColor.RED + ChatColor.BOLD + "RedBold", BaseComponent.toLegacyText( test1 ) );
281          BaseComponent[] test2 = TextComponent.fromLegacyText( "Text http:&bsol;&bsol;spigotmc.org " + ChatColor.GREEN + "google.com/test" );
282          Assert.assertEquals( "Text http:&bsol;&bsol;spigotmc.org google.com/test", BaseComponent.toPlainText( test2 ) );
283          Assert.assertEquals( ChatColor.WHITE + "Text " + ChatColor.WHITE + "http:&bsol;&bsol;spigotmc.org" + ChatColor.WHITE
284                  + " " + ChatColor.GREEN + "google.com/test" + ChatColor.GREEN, BaseComponent.toLegacyText( test2 ) );
285          ClickEvent url1 = test2[1].getClickEvent();
286          Assert.assertNotNull( url1 );
287          Assert.assertTrue( url1.getAction() == ClickEvent.Action.OPEN_URL );
288          Assert.assertEquals( "http:&bsol;&bsol;spigotmc.org", url1.getValue() );
289          ClickEvent url2 = test2[3].getClickEvent();
290          Assert.assertNotNull( url2 );
291          Assert.assertTrue( url2.getAction() == ClickEvent.Action.OPEN_URL );
292          Assert.assertEquals( "http:&bsol;&bsol;google.com/test", url2.getValue() );
293      }
294      @Test
295      public void testTranslateComponent()
296      {
297          TranslatableComponent item = new TranslatableComponent( "item.swordGold.name" );
298          item.setColor( ChatColor.AQUA );
299          TranslatableComponent translatableComponent = new TranslatableComponent( "commands.give.success",
300                  item, "5",
301                  "thinkofdeath" );
302          Assert.assertEquals( "Given Golden Sword * 5 to thinkofdeath", translatableComponent.toPlainText() );
303          Assert.assertEquals( ChatColor.WHITE + "Given " + ChatColor.AQUA + "Golden Sword" + ChatColor.WHITE
304                  + " * " + ChatColor.WHITE + "5" + ChatColor.WHITE + " to " + ChatColor.WHITE + "thinkofdeath",
305                  translatableComponent.toLegacyText() );
306          TranslatableComponent positional = new TranslatableComponent( "book.pageIndicator", "5", "50" );
307          Assert.assertEquals( "Page 5 of 50", positional.toPlainText() );
308          Assert.assertEquals( ChatColor.WHITE + "Page " + ChatColor.WHITE + "5" + ChatColor.WHITE + " of " + ChatColor.WHITE + "50", positional.toLegacyText() );
309          TranslatableComponent one_four_two = new TranslatableComponent( "filled_map.buried_treasure" );
310          Assert.assertEquals( "Buried Treasure Map", one_four_two.toPlainText() );
311      }
312      @Test
313      public void testBuilder()
314      {
315          BaseComponent[] components = new ComponentBuilder( "Hello " ).color( ChatColor.RED ).
316                  append( "World" ).bold( true ).color( ChatColor.BLUE ).
317                  append( "!" ).color( ChatColor.YELLOW ).create();
318          Assert.assertEquals( "Hello World!", BaseComponent.toPlainText( components ) );
319          Assert.assertEquals( ChatColor.RED + "Hello " + ChatColor.BLUE + ChatColor.BOLD
320                  + "World" + ChatColor.YELLOW + ChatColor.BOLD + "!", BaseComponent.toLegacyText( components ) );
321      }
322      @Test
323      public void testBuilderReset()
324      {
325          BaseComponent[] components = new ComponentBuilder( "Hello " ).color( ChatColor.RED )
326                  .append( "World" ).reset().create();
327          Assert.assertEquals( components[0].getColor(), ChatColor.RED );
328          Assert.assertEquals( components[1].getColor(), ChatColor.WHITE );
329      }
330      @Test
331      public void testBuilderFormatRetention()
332      {
333          BaseComponent[] noneRetention = new ComponentBuilder( "Hello " ).color( ChatColor.RED )
334                  .append( "World", ComponentBuilder.FormatRetention.NONE ).create();
335          Assert.assertEquals( noneRetention[0].getColor(), ChatColor.RED );
336          Assert.assertEquals( noneRetention[1].getColor(), ChatColor.WHITE );
337          HoverEvent testEvent = new HoverEvent( HoverEvent.Action.SHOW_TEXT, new ComponentBuilder( "test" ).create() );
338          BaseComponent[] formattingRetention = new ComponentBuilder( "Hello " ).color( ChatColor.RED )
339                  .event( testEvent ).append( "World", ComponentBuilder.FormatRetention.FORMATTING ).create();
340          Assert.assertEquals( formattingRetention[0].getColor(), ChatColor.RED );
341          Assert.assertEquals( formattingRetention[0].getHoverEvent(), testEvent );
342          Assert.assertEquals( formattingRetention[1].getColor(), ChatColor.RED );
343          Assert.assertNull( formattingRetention[1].getHoverEvent() );
344          ClickEvent testClickEvent = new ClickEvent( ClickEvent.Action.OPEN_URL, "http:&bsol;&bsol;www.example.com" );
345          BaseComponent[] eventRetention = new ComponentBuilder( "Hello " ).color( ChatColor.RED )
346                  .event( testEvent ).event( testClickEvent ).append( "World", ComponentBuilder.FormatRetention.EVENTS ).create();
347          Assert.assertEquals( eventRetention[0].getColor(), ChatColor.RED );
348          Assert.assertEquals( eventRetention[0].getHoverEvent(), testEvent );
349          Assert.assertEquals( eventRetention[0].getClickEvent(), testClickEvent );
350          Assert.assertEquals( eventRetention[1].getColor(), ChatColor.WHITE );
351          Assert.assertEquals( eventRetention[1].getHoverEvent(), testEvent );
352          Assert.assertEquals( eventRetention[1].getClickEvent(), testClickEvent );
353      }
354      @Test(expected = IllegalArgumentException.class)
355      public void testLoopSimple()
356      {
357          TextComponent component = new TextComponent( "Testing" );
358          component.addExtra( component );
359          ComponentSerializer.toString( component );
360      }
361      @Test(expected = IllegalArgumentException.class)
362      public void testLoopComplex()
363      {
364          TextComponent a = new TextComponent( "A" );
365          TextComponent b = new TextComponent( "B" );
366          b.setColor( ChatColor.AQUA );
367          TextComponent c = new TextComponent( "C" );
368          c.setColor( ChatColor.RED );
369          a.addExtra( b );
370          b.addExtra( c );
371          c.addExtra( a );
372          ComponentSerializer.toString( a );
373      }
374      @Test
375      public void testRepeated()
376      {
377          TextComponent a = new TextComponent( "A" );
378          TextComponent b = new TextComponent( "B" );
379          b.setColor( ChatColor.AQUA );
380          a.addExtra( b );
381          a.addExtra( b );
382          ComponentSerializer.toString( a );
383      }
384      @Test(expected = IllegalArgumentException.class)
385      public void testRepeatedError()
386      {
387          TextComponent a = new TextComponent( "A" );
388          TextComponent b = new TextComponent( "B" );
389          b.setColor( ChatColor.AQUA );
390          TextComponent c = new TextComponent( "C" );
391          c.setColor( ChatColor.RED );
392          a.addExtra( b );
393          a.addExtra( c );
394          c.addExtra( a );
395          a.addExtra( b );
396          ComponentSerializer.toString( a );
397      }
398      @Test
399      public void testInvalidColorCodes()
400      {
401          StringBuilder allInvalidColorCodes = new StringBuilder();
402          for ( char alphChar : "0123456789abcdefghijklmnopqrstuvwxyz".toCharArray() )
403          {
404              if ( ChatColor.ALL_CODES.indexOf( alphChar ) == -1 )
405              {
406                  allInvalidColorCodes.append( ChatColor.COLOR_CHAR );
407                  allInvalidColorCodes.append( alphChar );
408              }
409          }
410          allInvalidColorCodes.append( ChatColor.COLOR_CHAR );
411          String invalidColorCodesLegacyText = fromAndToLegacyText( allInvalidColorCodes.toString() );
412          String emptyLegacyText = fromAndToLegacyText( "" );
413          Assert.assertEquals( emptyLegacyText, invalidColorCodesLegacyText );
414      }
415      @Test
416      public void testFormattingOnlyTextConversion()
417      {
418          String text = "§a";
419          BaseComponent[] converted = TextComponent.fromLegacyText( text );
420          Assert.assertEquals( ChatColor.GREEN, converted[0].getColor() );
421          String roundtripLegacyText = BaseComponent.toLegacyText( converted );
422          Assert.assertEquals( text, roundtripLegacyText );
423      }
424      @Test
425      public void testEquals()
426      {
427          TextComponent first = new TextComponent( "Hello, " );
428          first.addExtra( new TextComponent( "World!" ) );
429          TextComponent second = new TextComponent( "Hello, " );
430          second.addExtra( new TextComponent( "World!" ) );
431          Assert.assertEquals( first, second );
432      }
433      @Test
434      public void testNotEquals()
435      {
436          TextComponent first = new TextComponent( "Hello, " );
437          first.addExtra( new TextComponent( "World." ) );
438          TextComponent second = new TextComponent( "Hello, " );
439          second.addExtra( new TextComponent( "World!" ) );
440          Assert.assertNotEquals( first, second );
441      }
442      @Test
443      public void testLegacyHack()
444      {
445          BaseComponent[] hexColored = new ComponentBuilder().color( ChatColor.of( Color.GRAY ) ).append( "Test" ).create();
446          String legacy = TextComponent.toLegacyText( hexColored );
447          BaseComponent[] reColored = TextComponent.fromLegacyText( legacy );
448          Assert.assertArrayEquals( hexColored, reColored );
449      }
450      @Test
451      public void testLegacyResetInBuilder()
452      {
453          ComponentBuilder builder = new ComponentBuilder();
454          BaseComponent[] a = TextComponent.fromLegacyText( "§4§n44444§rdd§6§l6666" );
455          String expected = "{\"extra\":[{\"underlined\":true,\"color\":\"dark_red\",\"text\":\"44444\"},{\"color\":"
456                  + "\"white\",\"text\":\"dd\"},{\"bold\":true,\"color\":\"gold\",\"text\":\"6666\"}],\"text\":\"\"}";
457          Assert.assertEquals( expected, ComponentSerializer.toString( a ) );
458          builder.append( a );
459          String test1 = ComponentSerializer.toString( builder.create() );
460          Assert.assertEquals( expected, test1 );
461          BaseComponent[] b = TextComponent.fromLegacyText( "§rrrrr" );
462          builder.append( b );
463          String test2 = ComponentSerializer.toString( builder.create() );
464          Assert.assertEquals(
465                  "{\"extra\":[{\"underlined\":true,\"color\":\"dark_red\",\"text\":\"44444\"},"
466                          + "{\"color\":\"white\",\"text\":\"dd\"},{\"bold\":true,\"color\":\"gold\",\"text\":\"6666\"},"
467                          + "{\"color\":\"white\",\"text\":\"rrrr\"}],\"text\":\"\"}",
468                  test2 );
469      }
470      private static String fromAndToLegacyText(String legacyText)
471      {
472          return BaseComponent.toLegacyText( TextComponent.fromLegacyText( legacyText ) );
473      }
474  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from motan-MDEwOlJlcG9zaXRvcnk1NjY3OTUyMQ==-flat-ConsulUtils.java</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from BungeeCord-MDEwOlJlcG9zaXRvcnk2MDg0MjEw-flat-ComponentsTest.java</div>
                </div>
                <div class="column column_space"><pre><code>3  import com.weibo.api.motan.common.URLParamType;
4  import com.weibo.api.motan.rpc.URL;
5  import com.weibo.api.motan.util.StringTools;
6  import java.util.ArrayList;
7  import java.util.HashMap;
8  import java.util.List;
9  import java.util.Map;
10  public class ConsulUtils {
11      public static boolean isSame(List<URL> urls1, List<URL> urls2) {
</pre></code></div>
                <div class="column column_space"><pre><code>2  import java.awt.Color;
3  import net.md_5.bungee.api.ChatColor;
4  import net.md_5.bungee.api.chat.hover.content.Item;
5  import net.md_5.bungee.api.chat.hover.content.Text;
6  import net.md_5.bungee.chat.ComponentSerializer;
7  import org.junit.Assert;
8  import org.junit.Test;
9  public class ComponentsTest
10  {
11      public static void testDissembleReassemble(BaseComponent[] components)
12      {
13          String json = ComponentSerializer.toString( components );
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    