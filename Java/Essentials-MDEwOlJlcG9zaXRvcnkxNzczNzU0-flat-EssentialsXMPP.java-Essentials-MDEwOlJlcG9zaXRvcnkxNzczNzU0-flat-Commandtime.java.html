
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 5.571030640668524%, Tokens: 10</h2>
        <div class="column">
            <h3>Essentials-MDEwOlJlcG9zaXRvcnkxNzczNzU0-flat-EssentialsXMPP.java</h3>
            <pre><code>1  package com.earth2me.essentials.xmpp;
2  import static com.earth2me.essentials.I18n.tl;
3  import com.earth2me.essentials.IEssentials;
4  import net.ess3.api.IUser;
5  import java.util.List;
6  import java.util.Locale;
7  import java.util.logging.Level;
8  import java.util.logging.Logger;
9  import org.bukkit.command.Command;
10  import org.bukkit.command.CommandSender;
11  import org.bukkit.entity.Player;
12  import org.bukkit.plugin.PluginManager;
13  import org.bukkit.plugin.java.JavaPlugin;
14  public class EssentialsXMPP extends JavaPlugin implements IEssentialsXMPP
15  {
16  	private static final Logger LOGGER = Logger.getLogger("Minecraft");
17  	private static EssentialsXMPP instance = null;
18  	private transient UserManager users;
19  	private transient XMPPManager xmpp;
20  	private transient IEssentials ess;
21  	public static IEssentialsXMPP getInstance()
22  	{
23  		return instance;
24  	}
25  	@Override
26  	public void onEnable()
27  	{
28  		instance = this;
29  		final PluginManager pluginManager = getServer().getPluginManager();
30  		ess = (IEssentials)pluginManager.getPlugin("Essentials");
<span onclick='openModal()' class='match'>31  		if (!this.getDescription().getVersion().equals(ess.getDescription().getVersion()))
32  		{
33  			LOGGER.log(Level.WARNING, tl("versionMismatchAll"));
34  		}
35  		if (!ess.isEnabled())
36  		{
37  			this.setEnabled(false);
</span>38  			return;
39  		}
40  		final EssentialsXMPPPlayerListener playerListener = new EssentialsXMPPPlayerListener(ess);
41  		pluginManager.registerEvents(playerListener, this);
42  		users = new UserManager(this.getDataFolder());
43  		xmpp = new XMPPManager(this);
44  		ess.addReloadListener(users);
45  		ess.addReloadListener(xmpp);
46  	}
47  	@Override
48  	public void onDisable()
49  	{
50  		if (xmpp != null)
51  		{
52  			xmpp.disconnect();
53  		}
54  		instance = null;
55  	}
56  	@Override
57  	public boolean onCommand(final CommandSender sender, final Command command, final String commandLabel, final String[] args)
58  	{
59  		return ess.onCommandEssentials(sender, command, commandLabel, args, EssentialsXMPP.class.getClassLoader(), "com.earth2me.essentials.xmpp.Command", "essentials.", null);
60  	}
61  	@Override
62  	public void setAddress(final Player user, final String address)
63  	{
64  		final String username = user.getName().toLowerCase(Locale.ENGLISH);
65  		instance.users.setAddress(username, address);
66  	}
67  	@Override
68  	public String getAddress(final String name)
69  	{
70  		return instance.users.getAddress(name);
71  	}
72  	@Override
73  	public IUser getUserByAddress(final String address)
74  	{
75  		String username = instance.users.getUserByAddress(address);
76  		return username == null ? null : ess.getUser(username);
77  	}
78  	@Override
79  	public boolean toggleSpy(final Player user)
80  	{
81  		final String username = user.getName().toLowerCase(Locale.ENGLISH);
82  		final boolean spy = !instance.users.isSpy(username);
83  		instance.users.setSpy(username, spy);
84  		return spy;
85  	}
86  	@Override
87  	public String getAddress(final Player user)
88  	{
89  		return instance.users.getAddress(user.getName());
90  	}
91  	@Override
92  	public boolean sendMessage(final Player user, final String message)
93  	{
94  		return instance.xmpp.sendMessage(instance.users.getAddress(user.getName()), message);
95  	}
96  	@Override
97  	public boolean sendMessage(final String address, final String message)
98  	{
99  		return instance.xmpp.sendMessage(address, message);
100  	}
101  	public static boolean updatePresence()
102  	{
103  		instance.xmpp.updatePresence();
104  		return true;
105  	}
106  	@Override
107  	public List<String> getSpyUsers()
108  	{
109  		return instance.users.getSpyUsers();
110  	}
111  	@Override
112  	public void broadcastMessage(final IUser sender, final String message, final String xmppAddress)
113  	{
114  		ess.broadcastMessage(sender, message);
115  		try
116  		{
117  			for (String address : getSpyUsers())
118  			{
119  				if (!address.equalsIgnoreCase(xmppAddress))
120  				{
121  					sendMessage(address, message);
122  				}
123  			}
124  		}
125  		catch (Exception ex)
126  		{
127  		}
128  	}
129  	@Override
130  	public IEssentials getEss()
131  	{
132  		return ess;
133  	}
134  }
</code></pre>
        </div>
        <div class="column">
            <h3>Essentials-MDEwOlJlcG9zaXRvcnkxNzczNzU0-flat-Commandtime.java</h3>
            <pre><code>1  package com.earth2me.essentials.commands;
2  import com.earth2me.essentials.CommandSource;
3  import static com.earth2me.essentials.I18n.tl;
4  import com.earth2me.essentials.User;
5  import com.earth2me.essentials.utils.DescParseTickFormat;
6  import com.earth2me.essentials.utils.NumberUtil;
7  import java.util.*;
8  import org.bukkit.Server;
9  import org.bukkit.World;
10  public class Commandtime extends EssentialsCommand
11  {
12  	public Commandtime()
13  	{
14  		super("time");
15  	}
16  	@Override
17  	public void run(final Server server, final CommandSource sender, final String commandLabel, final String[] args) throws Exception
18  	{
19  		boolean add = false;
20  		final List<String> argList = new ArrayList<String>(Arrays.asList(args));
<span onclick='openModal()' class='match'>21  		if (argList.remove("set") && !argList.isEmpty() && NumberUtil.isInt(argList.get(0)))
22  		{
23  			argList.set(0, argList.get(0) + "t");
24  		}
25  		if (argList.remove("add") && !argList.isEmpty() && NumberUtil.isInt(argList.get(0)))
</span>26  		{
27  			add = true;
28  			argList.set(0, argList.get(0) + "t");
29  		}
30  		final String[] validArgs = argList.toArray(new String[0]);
31  		String worldSelector = null;
32  		if (validArgs.length == 2)
33  		{
34  			worldSelector = validArgs[1];
35  		}
36  		final Set<World> worlds = getWorlds(server, sender, worldSelector);
37  		final String setTime;
38  		if (validArgs.length == 0)
39  		{
40  			if (commandLabel.equalsIgnoreCase("day") || commandLabel.equalsIgnoreCase("eday"))
41  			{
42  				setTime = "day";
43  			}
44  			else if (commandLabel.equalsIgnoreCase("night") || commandLabel.equalsIgnoreCase("enight"))
45  			{
46  				setTime = "night";
47  			}
48  			else
49  			{
50  				getWorldsTime(sender, worlds);
51  				throw new NoChargeException();
52  			}
53  		}
54  		else
55  		{
56  			setTime = validArgs[0];
57  		}
58  		final User user = ess.getUser(sender.getPlayer());
59  		if (user != null && !user.isAuthorized("essentials.time.set"))
60  		{
61  			throw new Exception(tl("timeSetPermission"));
62  		}
63  		long ticks;
64  		try
65  		{
66  			ticks = DescParseTickFormat.parse(setTime);
67  		}
68  		catch (NumberFormatException e)
69  		{
70  			throw new NotEnoughArgumentsException(e);
71  		}
72  		setWorldsTime(sender, worlds, ticks, add);
73  	}
74  	private void getWorldsTime(final CommandSource sender, final Collection<World> worlds)
75  	{
76  		if (worlds.size() == 1)
77  		{
78  			final Iterator<World> iter = worlds.iterator();
79  			sender.sendMessage(DescParseTickFormat.format(iter.next().getTime()));
80  			return;
81  		}
82  		for (World world : worlds)
83  		{
84  			sender.sendMessage(tl("timeWorldCurrent", world.getName(), DescParseTickFormat.format(world.getTime())));
85  		}
86  	}
87  	private void setWorldsTime(final CommandSource sender, final Collection<World> worlds, final long ticks, final boolean add)
88  	{
89  		for (World world : worlds)
90  		{
91  			long time = world.getTime();
92  			if (!add)
93  			{
94  				time -= time % 24000;
95  			}
96  			world.setTime(time + (add ? 0 : 24000) + ticks);
97  		}
98  		final StringBuilder output = new StringBuilder();
99  		for (World world : worlds)
100  		{
101  			if (output.length() > 0)
102  			{
103  				output.append(", ");
104  			}
105  			output.append(world.getName());
106  		}
107  		sender.sendMessage(tl("timeWorldSet", DescParseTickFormat.format(ticks), output.toString()));
108  	}
109  	private Set<World> getWorlds(final Server server, final CommandSource sender, final String selector) throws Exception
110  	{
111  		final Set<World> worlds = new TreeSet<World>(new WorldNameComparator());
112  		if (selector == null)
113  		{
114  			if (sender.isPlayer())
115  			{
116  				final User user = ess.getUser(sender.getPlayer());
117  				worlds.add(user.getWorld());
118  			}
119  			else
120  			{
121  				worlds.addAll(server.getWorlds());
122  			}
123  			return worlds;
124  		}
125  		final World world = server.getWorld(selector);
126  		if (world != null)
127  		{
128  			worlds.add(world);
129  		}
130  		else if (selector.equalsIgnoreCase("*") || selector.equalsIgnoreCase("all"))
131  		{
132  			worlds.addAll(server.getWorlds());
133  		}
134  		else
135  		{
136  			throw new Exception(tl("invalidWorld"));
137  		}
138  		return worlds;
139  	}
140  }
141  class WorldNameComparator implements Comparator<World>
142  {
143  	@Override
144  	public int compare(final World a, final World b)
145  	{
146  		return a.getName().compareTo(b.getName());
147  	}
148  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from Essentials-MDEwOlJlcG9zaXRvcnkxNzczNzU0-flat-EssentialsXMPP.java</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from Essentials-MDEwOlJlcG9zaXRvcnkxNzczNzU0-flat-Commandtime.java</div>
                </div>
                <div class="column column_space"><pre><code>31  		if (!this.getDescription().getVersion().equals(ess.getDescription().getVersion()))
32  		{
33  			LOGGER.log(Level.WARNING, tl("versionMismatchAll"));
34  		}
35  		if (!ess.isEnabled())
36  		{
37  			this.setEnabled(false);
</pre></code></div>
                <div class="column column_space"><pre><code>21  		if (argList.remove("set") && !argList.isEmpty() && NumberUtil.isInt(argList.get(0)))
22  		{
23  			argList.set(0, argList.get(0) + "t");
24  		}
25  		if (argList.remove("add") && !argList.isEmpty() && NumberUtil.isInt(argList.get(0)))
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    