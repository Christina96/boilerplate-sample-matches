<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for Scoping.java &amp; Rename.java</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for Scoping.java &amp; Rename.java
      </h3>
<h1 align="center">
        22.2%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>Scoping.java (23.357664%)<th>Rename.java (21.192053%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(71-80)<td><a href="#" name="0">(211-220)</a><td align="center"><font color="#ff0000">14</font>
<tr onclick='openModal("#f63526")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f63526"><font color="#f63526">-</font><td><a href="#" name="1">(113-123)<td><a href="#" name="1">(88-98)</a><td align="center"><font color="#ec0000">13</font>
<tr onclick='openModal("#980517")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#980517"><font color="#980517">-</font><td><a href="#" name="2">(49-56)<td><a href="#" name="2">(81-88)</a><td align="center"><font color="#b60000">10</font>
<tr onclick='openModal("#53858b")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#53858b"><font color="#53858b">-</font><td><a href="#" name="3">(96-101)<td><a href="#" name="3">(193-198)</a><td align="center"><font color="#a30000">9</font>
<tr onclick='openModal("#6cc417")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#6cc417"><font color="#6cc417">-</font><td><a href="#" name="4">(87-93)<td><a href="#" name="4">(224-231)</a><td align="center"><font color="#a30000">9</font>
<tr onclick='openModal("#151b8d")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#151b8d"><font color="#151b8d">-</font><td><a href="#" name="5">(19-40)<td><a href="#" name="5">(40-70)</a><td align="center"><font color="#a30000">9</font>
</td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>Scoping.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 <a name="5"></a>
2 package org.elasticsearch.common.inject.internal;
3 <font color="#151b8d"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>import org.elasticsearch.common.inject.Scope;
4 import org.elasticsearch.common.inject.Scopes;
5 import org.elasticsearch.common.inject.Singleton;
6 import org.elasticsearch.common.inject.Stage;
7 import org.elasticsearch.common.inject.binder.ScopedBindingBuilder;
8 import org.elasticsearch.common.inject.spi.BindingScopingVisitor;
9 import java.lang.annotation.Annotation;
10 public abstract class Scoping {
11     public static final Scoping UNSCOPED = new Scoping() {</b></font>
12         @Override
13         public &lt;V&gt; V acceptVisitor(BindingScopingVisitor&lt;V&gt; visitor) {
14             return visitor.visitNoScoping();
15         }
16 <a name="2"></a>        @Override
17         public Scope getScopeInstance() {
18             return Scopes.NO_SCOPE;
19         <font color="#980517"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>}
20         @Override
21         public String toString() {
22             return Scopes.NO_SCOPE.toString();
23         }
24         @Overri</b></font>de
25         public void applyTo(ScopedBindingBuilder scopedBindingBuilder) {
26         }
27     };
28     public static final Scoping SINGLETON_ANNOTATION = new Scoping() {
29         @Override
30         public &lt;V&gt; V acceptVisitor(BindingScopingVisitor&lt;V&gt; visitor) {
31             return visitor.visitScopeAnnotation(Singleton.class);
32         }
33 <a name="0"></a>        @Override
34         public Class&lt;? extends Annotation&gt; getScopeAnnotation() {
35             return Singleton.class;
36         <font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>}
37         @Override
38         public String toString() {
39             return Singleton.class.getName();
40         }
41         @Override
42         public void applyTo(ScopedBindingBuilder scopedBindingBuilder) {
43             scopedBindingBuilder.in</b></font>(Singleton.class);
44         }
45     };
46 <a name="4"></a>    public static final Scoping SINGLETON_INSTANCE = new Scoping() {
47         @Override
48         public &lt;V&gt; V acceptVisitor(BindingScopingVisitor&lt;V&gt; visitor) {
49             return <font color="#6cc417"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>visitor.visitScope(Scopes.SINGLETON);
50         }
51         @Override
52         public Scope getScopeInstance() {
53             return Scopes.SINGLETON;
54 <a name="3"></a>        }</b></font>
55         @Override
56         public String toString() <font color="#53858b"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>{
57             return Scopes.SINGLETON.toString();
58         }
59         @Override
60         public void applyTo(ScopedBindingBuilder scopedBindingBuilder) {</b></font>
61             scopedBindingBuilder.in(Scopes.SINGLETON);
62         }
63     };
64     public static final Scoping EAGER_SINGLETON = new Scoping() {
65         @Override
66         public &lt;V&gt; V acceptVisitor(BindingScopingVisitor&lt;V&gt; visitor) {
67             return visitor.visitEagerSingleton();
68 <a name="1"></a>        }
69         @Override
70         public Scope getScopeInstance() <font color="#f63526"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>{
71             return Scopes.SINGLETON;
72         }
73         @Override
74         public String toString() {
75             return "eager singleton";
76         }
77         @Override
78         public void applyTo(ScopedBindingBuilder scopedBindingBuilder</b></font>) {
79             scopedBindingBuilder.asEagerSingleton();
80         }
81     };
82     public static Scoping forAnnotation(final Class&lt;? extends Annotation&gt; scopingAnnotation) {
83         if (scopingAnnotation == Singleton.class) {
84             return SINGLETON_ANNOTATION;
85         }
86         return new Scoping() {
87             @Override
88             public &lt;V&gt; V acceptVisitor(BindingScopingVisitor&lt;V&gt; visitor) {
89                 return visitor.visitScopeAnnotation(scopingAnnotation);
90             }
91             @Override
92             public Class&lt;? extends Annotation&gt; getScopeAnnotation() {
93                 return scopingAnnotation;
94             }
95             @Override
96             public String toString() {
97                 return scopingAnnotation.getName();
98             }
99             @Override
100             public void applyTo(ScopedBindingBuilder scopedBindingBuilder) {
101                 scopedBindingBuilder.in(scopingAnnotation);
102             }
103         };
104     }
105     public static Scoping forInstance(final Scope scope) {
106         if (scope == Scopes.SINGLETON) {
107             return SINGLETON_INSTANCE;
108         }
109         return new Scoping() {
110             @Override
111             public &lt;V&gt; V acceptVisitor(BindingScopingVisitor&lt;V&gt; visitor) {
112                 return visitor.visitScope(scope);
113             }
114             @Override
115             public Scope getScopeInstance() {
116                 return scope;
117             }
118             @Override
119             public String toString() {
120                 return scope.toString();
121             }
122             @Override
123             public void applyTo(ScopedBindingBuilder scopedBindingBuilder) {
124                 scopedBindingBuilder.in(scope);
125             }
126         };
127     }
128     public boolean isExplicitlyScoped() {
129         return this != UNSCOPED;
130     }
131     public boolean isNoScope() {
132         return getScopeInstance() == Scopes.NO_SCOPE;
133     }
134     public boolean isEagerSingleton(Stage stage) {
135         if (this == EAGER_SINGLETON) {
136             return true;
137         }
138         if (stage == Stage.PRODUCTION) {
139             return this == SINGLETON_ANNOTATION || this == SINGLETON_INSTANCE;
140         }
141         return false;
142     }
143     public Scope getScopeInstance() {
144         return null;
145     }
146     public Class&lt;? extends Annotation&gt; getScopeAnnotation() {
147         return null;
148     }
149     public abstract &lt;V&gt; V acceptVisitor(BindingScopingVisitor&lt;V&gt; visitor);
150     public abstract void applyTo(ScopedBindingBuilder scopedBindingBuilder);
151     private Scoping() {
152     }
153 }
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>Rename.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 package io.crate.planner.operators;
2 import io.crate.analyze.OrderBy;
3 import io.crate.analyze.relations.FieldResolver;
4 import io.crate.common.collections.Lists2;
5 import io.crate.data.Row;
6 import io.crate.execution.dsl.projection.builder.ProjectionBuilder;
7 import io.crate.expression.symbol.FetchMarker;
8 import io.crate.expression.symbol.ScopedSymbol;
9 import io.crate.expression.symbol.Symbol;
10 import io.crate.expression.symbol.SymbolVisitors;
11 import io.crate.metadata.RelationName;
12 import io.crate.planner.ExecutionPlan;
13 import io.crate.planner.PlannerContext;
14 import io.crate.statistics.TableStats;
15 <a name="5"></a>
16 import javax.annotation.Nullable;
17 import java.util.ArrayList;
18 <font color="#151b8d"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>import java.util.Collection;
19 import java.util.IdentityHashMap;
20 import java.util.LinkedHashMap;
21 import java.util.List;
22 import java.util.Set;
23 import java.util.function.Function;
24 import static java.util.Objects.requireNonNull;
25 public final class Rename extends ForwardingLogicalPlan implements FieldResolver {
26     private final List&lt;Symbol&gt; outputs</b></font>;
27     private final FieldResolver fieldResolver;
28     final RelationName name;
29     public Rename(List&lt;Symbol&gt; outputs, RelationName name, FieldResolver fieldResolver, LogicalPlan source) {
30         super(source);
31         this.outputs = outputs;
32         this.name = name;
33 <a name="2"></a>        this.fieldResolver = fieldResolver;
34         assert this.outputs.size() == source.outputs().size()
35             : "Rename operator must have the same number of outputs as the source. Got " + outputs + " and " + source.outputs();
36     <font color="#980517"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>}
37     @Override
38     public boolean preferShardProjections() {
39 <a name="1"></a>        return source.preferShardProjections();
40     }
41     publ</b></font>ic RelationName name() <font color="#f63526"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>{
42         return name;
43     }
44     @Override
45     public List&lt;Symbol&gt; outputs() {
46         return outputs;
47     }
48     @Override
49     public LogicalPlan pruneOutputsExcept(TableStats tableStats</b></font>, Collection&lt;Symbol&gt; outputsToKeep) {
50         IdentityHashMap&lt;Symbol, Symbol&gt; parentToChildMap = new IdentityHashMap&lt;&gt;(outputs.size());
51         IdentityHashMap&lt;Symbol, Symbol&gt; childToParentMap = new IdentityHashMap&lt;&gt;(outputs.size());
52         for (int i = 0; i &lt; outputs.size(); i++) {
53             parentToChildMap.put(outputs.get(i), source.outputs().get(i));
54             childToParentMap.put(source.outputs().get(i), outputs.get(i));
55         }
56         ArrayList&lt;Symbol&gt; mappedToKeep = new ArrayList&lt;&gt;();
57         for (Symbol outputToKeep : outputsToKeep) {
58             SymbolVisitors.intersection(outputToKeep, outputs, s -&gt; {
59                 Symbol childSymbol = parentToChildMap.get(s);
60                 assert childSymbol != null : "There must be a mapping available for symbol " + s;
61                 mappedToKeep.add(childSymbol);
62             });
63         }
64         LogicalPlan newSource = source.pruneOutputsExcept(tableStats, mappedToKeep);
65         if (newSource == source) {
66             return this;
67         }
68         ArrayList&lt;Symbol&gt; newOutputs = new ArrayList&lt;&gt;(newSource.outputs().size());
69         for (Symbol sourceOutput : newSource.outputs()) {
70             newOutputs.add(childToParentMap.get(sourceOutput));
71         }
72         return new Rename(
73             newOutputs,
74             name,
75             fieldResolver,
76             newSource
77         );
78     }
79     @Nullable
80     @Override
81     public FetchRewrite rewriteToFetch(TableStats tableStats, Collection&lt;Symbol&gt; usedColumns) {
82         IdentityHashMap&lt;Symbol, Symbol&gt; parentToChildMap = new IdentityHashMap&lt;&gt;(outputs.size());
83         IdentityHashMap&lt;Symbol, Symbol&gt; childToParentMap = new IdentityHashMap&lt;&gt;(outputs.size());
84         for (int i = 0; i &lt; outputs.size(); i++) {
85             parentToChildMap.put(outputs.get(i), source.outputs().get(i));
86             childToParentMap.put(source.outputs().get(i), outputs.get(i));
87         }
88         ArrayList&lt;Symbol&gt; mappedUsedColumns = new ArrayList&lt;&gt;();
89         for (Symbol usedColumn : usedColumns) {
90             SymbolVisitors.intersection(usedColumn, outputs, s -&gt; {
91                 Symbol childSymbol = parentToChildMap.get(s);
92                 assert childSymbol != null : "There must be a mapping available for symbol " + s;
93                 mappedUsedColumns.add(childSymbol);
94             });
95         }
96         FetchRewrite fetchRewrite = source.rewriteToFetch(tableStats, mappedUsedColumns);
97         if (fetchRewrite == null) {
98             return null;
99         }
100         LogicalPlan newSource = fetchRewrite.newPlan();
101         ArrayList&lt;Symbol&gt; newOutputs = new ArrayList&lt;&gt;();
102         for (Symbol output : newSource.outputs()) {
103             if (output instanceof FetchMarker) {
104                 FetchMarker marker = (FetchMarker) output;
105                 FetchMarker newMarker = new FetchMarker(name, marker.fetchRefs(), marker.fetchId());
106                 newOutputs.add(newMarker);
107                 childToParentMap.put(marker, newMarker);
108             } else {
109                 Symbol mappedOutput = requireNonNull(
110                     childToParentMap.get(output),
111                     () -&gt; "Mapping must exist for output from source. `" + output + "` is missing in " + childToParentMap
112                 );
113                 newOutputs.add(mappedOutput);
114             }
115         }
116         LinkedHashMap&lt;Symbol, Symbol&gt; replacedOutputs = new LinkedHashMap&lt;&gt;();
117         Function&lt;Symbol, Symbol&gt; convertChildrenToScopedSymbols = s -&gt; MapBackedSymbolReplacer.convert(s, childToParentMap);
118         for (var entry : fetchRewrite.replacedOutputs().entrySet()) {
119             Symbol key = entry.getKey();
120             Symbol value = entry.getValue();
121             Symbol parentSymbolForKey = requireNonNull(
122                 childToParentMap.get(key),
123                 () -&gt; "Mapping must exist for output from source. `" + key + "` is missing in " + childToParentMap
124             );
125             replacedOutputs.put(parentSymbolForKey, convertChildrenToScopedSymbols.apply(value));
126         }
127         Rename newRename = new Rename(newOutputs, name, fieldResolver, newSource);
128         return new FetchRewrite(replacedOutputs, newRename);
129     }
130     @Override
131     public ExecutionPlan build(PlannerContext plannerContext,
132                                Set&lt;PlanHint&gt; hints,
133                                ProjectionBuilder projectionBuilder,
134                                int limit,
135                                int offset,
136 <a name="3"></a>                               @Nullable OrderBy order,
137                                @Nullable Integer pageSizeHint,
138                                Row params,
139                                SubQueryResults subQueryResults) <font color="#53858b"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>{
140         return source.build(plannerContext, hints, projectionBuilder, limit, offset, order, pageSizeHint, params, subQueryResults);
141     }
142     @Override
143     public LogicalPlan replaceSources(List&lt;LogicalPlan&gt; sources) {</b></font>
144         return new Rename(outputs, name, fieldResolver, Lists2.getOnlyElement(sources));
145     }
146     @Override
147     public &lt;C, R&gt; R accept(LogicalPlanVisitor&lt;C, R&gt; visitor, C context) {
148         return visitor.visitRename(this, context);
149     }
150     @Nullable
151 <a name="0"></a>    @Override
152     public Symbol resolveField(ScopedSymbol field) {
153         return fieldResolver.resolveField(field);
154     <font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>}
155     @Override
156     public Set&lt;RelationName&gt; getRelationNames() {
157         return Set.of(name);
158     }
159     @Override
160     public void print(PrintContext printContext) {
161         printContext</b></font>
162 <a name="4"></a>            .text("Rename[")
163             .text(Lists2.joinOn(", ", outputs, Symbol::toString))
164             .text("] AS ")
165             .text(<font color="#6cc417"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>name.toString())
166             .nest(source::print);
167     }
168     @Override
169     public String toString() {
170         return "Rename{name=" + name + ", outputs=" + outputs + ", src=" + source + "}";
171     }</b></font>
172 }
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
