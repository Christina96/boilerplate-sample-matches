
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 6.128133704735376%, Tokens: 22</h2>
        <div class="column">
            <h3>BungeeCord-MDEwOlJlcG9zaXRvcnk2MDg0MjEw-flat-ModuleManager.java</h3>
            <pre><code>1  package net.md_5.bungee.module;
2  import com.google.common.base.Preconditions;
<span onclick='openModal()' class='match'>3  import edu.umd.cs.findbugs.annotations.SuppressFBWarnings;
4  import java.io.File;
5  import java.io.FileInputStream;
6  import java.io.FileWriter;
7  import java.io.InputStream;
8  import java.net.URI;
9  import java.util.ArrayList;
10  import java.util.Collection;
11  import java.util.HashMap;
12  import java.util.List;
13  import java.util.Map;
14  import java.util.jar.JarEntry;
15  import java.util.jar.JarFile;
16  import java.util.logging.Level;
17  import net.md_5.bungee.api.ProxyServer;
18  import net.md_5.bungee.api.plugin.PluginDescription;
19  import net.md_5.bungee.util.CaseInsensitiveMap;
20  import org.yaml.snakeyaml.DumperOptions;
21  import org.yaml.snakeyaml.Yaml;
22  public class ModuleManager
23  {
24      private final Map<String, ModuleSource> knownSources = new HashMap<>();
</span>25      public ModuleManager()
26      {
27          knownSources.put( "jenkins", new JenkinsModuleSource() );
28      }
29      @SuppressFBWarnings(
30              {
31                  "SF_SWITCH_FALLTHROUGH", "SF_SWITCH_NO_DEFAULT"
32              })
33      public void load(ProxyServer proxy, File moduleDirectory) throws Exception
34      {
35          moduleDirectory.mkdir();
36          ModuleVersion bungeeVersion = ModuleVersion.parse( proxy.getVersion() );
37          if ( bungeeVersion == null )
38          {
39              System.out.println( "Couldn't detect bungee version. Custom build?" );
40              return;
41          }
42          List<ModuleSpec> modules = new ArrayList<>();
43          File configFile = new File( "modules.yml" );
44          DumperOptions options = new DumperOptions();
45          options.setDefaultFlowStyle( DumperOptions.FlowStyle.BLOCK );
46          Yaml yaml = new Yaml( options );
47          Map<String, Object> config;
48          configFile.createNewFile();
49          try ( InputStream is = new FileInputStream( configFile ) )
50          {
51              config = (Map) yaml.load( is );
52          }
53          if ( config == null )
54          {
55              config = new CaseInsensitiveMap<>();
56          } else
57          {
58              config = new CaseInsensitiveMap<>( config );
59          }
60          List<String> defaults = new ArrayList<>();
61          Object readModules = config.get( "modules" );
62          if ( readModules != null )
63          {
64              defaults.addAll( (Collection) readModules );
65          }
66          int version = ( config.containsKey( "version" ) ) ? (int) config.get( "version" ) : 0;
67          switch ( version )
68          {
69              case 0:
70                  defaults.add( "jenkins:&bsol;&bsol;cmd_alert" );
71                  defaults.add( "jenkins:&bsol;&bsol;cmd_find" );
72                  defaults.add( "jenkins:&bsol;&bsol;cmd_list" );
73                  defaults.add( "jenkins:&bsol;&bsol;cmd_send" );
74                  defaults.add( "jenkins:&bsol;&bsol;cmd_server" );
75              case 1:
76                  defaults.add( "jenkins:&bsol;&bsol;reconnect_yaml" );
77          }
78          config.put( "modules", defaults );
79          config.put( "version", 2 );
80          try ( FileWriter wr = new FileWriter( configFile ) )
81          {
82              yaml.dump( config, wr );
83          }
84          for ( String s : (List<String>) config.get( "modules" ) )
85          {
86              URI uri = new URI( s );
87              ModuleSource source = knownSources.get( uri.getScheme() );
88              if ( source == null )
89              {
90                  System.out.println( "Unknown module source: " + s );
91                  continue;
92              }
93              String name = uri.getAuthority();
94              if ( name == null )
95              {
96                  System.out.println( "Unknown module host: " + s );
97                  continue;
98              }
99              ModuleSpec spec = new ModuleSpec( name, new File( moduleDirectory, name + ".jar" ), source );
100              modules.add( spec );
101              System.out.println( "Discovered module: " + spec );
102          }
103          for ( ModuleSpec module : modules )
104          {
105              ModuleVersion moduleVersion = ( module.getFile().exists() ) ? getVersion( module.getFile() ) : null;
106              if ( !bungeeVersion.equals( moduleVersion ) )
107              {
108                  System.out.println( "Attempting to update plugin from " + moduleVersion + " to " + bungeeVersion );
109                  module.getProvider().retrieve( module, bungeeVersion );
110              }
111          }
112      }
113      @SuppressFBWarnings("REC_CATCH_EXCEPTION")
114      private ModuleVersion getVersion(File file)
115      {
116          try ( JarFile jar = new JarFile( file ) )
117          {
118              JarEntry pdf = jar.getJarEntry( "plugin.yml" );
119              Preconditions.checkNotNull( pdf, "Plugin must have a plugin.yml" );
120              try ( InputStream in = jar.getInputStream( pdf ) )
121              {
122                  PluginDescription desc = new Yaml().loadAs( in, PluginDescription.class );
123                  return ModuleVersion.parse( desc.getVersion() );
124              }
125          } catch ( Exception ex )
126          {
127              ProxyServer.getInstance().getLogger().log( Level.WARNING, "Could not check module from file " + file, ex );
128          }
129          return null;
130      }
131  }
</code></pre>
        </div>
        <div class="column">
            <h3>motan-MDEwOlJlcG9zaXRvcnk1NjY3OTUyMQ==-flat-ZookeeperRegistry.java</h3>
            <pre><code>1  package com.weibo.api.motan.registry.zookeeper;
<span onclick='openModal()' class='match'>2  import com.weibo.api.motan.closable.Closable;
3  import com.weibo.api.motan.closable.ShutDownHook;
4  import com.weibo.api.motan.common.MotanConstants;
5  import com.weibo.api.motan.exception.MotanFrameworkException;
6  import com.weibo.api.motan.registry.support.command.CommandFailbackRegistry;
7  import com.weibo.api.motan.registry.support.command.CommandListener;
8  import com.weibo.api.motan.registry.support.command.ServiceListener;
9  import com.weibo.api.motan.rpc.URL;
10  import com.weibo.api.motan.util.ConcurrentHashSet;
11  import com.weibo.api.motan.util.LoggerUtil;
12  import org.I0Itec.zkclient.IZkChildListener;
13  import org.I0Itec.zkclient.IZkDataListener;
14  import org.I0Itec.zkclient.IZkStateListener;
15  import org.I0Itec.zkclient.ZkClient;
16  import org.apache.commons.lang3.StringUtils;
17  import org.apache.zookeeper.Watcher;
18  import java.util.*;
19  import java.util.concurrent.ConcurrentHashMap;
20  import java.util.concurrent.locks.ReentrantLock;
21  public class ZookeeperRegistry extends CommandFailbackRegistry implements Closable {
22      private final ReentrantLock clientLock = new ReentrantLock();
</span>23      private final ReentrantLock serverLock = new ReentrantLock();
24      private ZkClient zkClient;
25      private Set<URL> availableServices = new ConcurrentHashSet<>();
26      private ConcurrentHashMap<URL, ConcurrentHashMap<ServiceListener, IZkChildListener>> serviceListeners = new ConcurrentHashMap<>();
27      private ConcurrentHashMap<URL, ConcurrentHashMap<CommandListener, IZkDataListener>> commandListeners = new ConcurrentHashMap<>();
28      public ZookeeperRegistry(URL url, ZkClient client) {
29          super(url);
30          this.zkClient = client;
31          IZkStateListener zkStateListener = new IZkStateListener() {
32              @Override
33              public void handleStateChanged(Watcher.Event.KeeperState state) throws Exception {
34              }
35              @Override
36              public void handleNewSession() throws Exception {
37                  LoggerUtil.info("zkRegistry get new session notify.");
38                  reconnectService();
39                  reconnectClient();
40              }
41              @Override
42              public void handleSessionEstablishmentError(Throwable throwable) throws Exception {
43                  LoggerUtil.warn("zkRegistry establish session error.", throwable);
44              }
45          };
46          zkClient.subscribeStateChanges(zkStateListener);
47          ShutDownHook.registerShutdownHook(this);
48      }
49      public ConcurrentHashMap<URL, ConcurrentHashMap<ServiceListener, IZkChildListener>> getServiceListeners() {
50          return serviceListeners;
51      }
52      public ConcurrentHashMap<URL, ConcurrentHashMap<CommandListener, IZkDataListener>> getCommandListeners() {
53          return commandListeners;
54      }
55      @Override
56      protected void subscribeService(final URL url, final ServiceListener serviceListener) {
57          try {
58              clientLock.lock();
59              ConcurrentHashMap<ServiceListener, IZkChildListener> childChangeListeners = serviceListeners.get(url);
60              if (childChangeListeners == null) {
61                  serviceListeners.putIfAbsent(url, new ConcurrentHashMap<ServiceListener, IZkChildListener>());
62                  childChangeListeners = serviceListeners.get(url);
63              }
64              IZkChildListener zkChildListener = childChangeListeners.get(serviceListener);
65              if (zkChildListener == null) {
66                  childChangeListeners.putIfAbsent(serviceListener, new IZkChildListener() {
67                      @Override
68                      public void handleChildChange(String parentPath, List<String> currentChildren) {
69                          serviceListener.notifyService(url, getUrl(), nodeChildsToUrls(url, parentPath, currentChildren));
70                          LoggerUtil.info(String.format("[ZookeeperRegistry] service list change: path=%s, currentChildren=%s", parentPath, currentChildren));
71                      }
72                  });
73                  zkChildListener = childChangeListeners.get(serviceListener);
74              }
75              try {
76                  removeNode(url, ZkNodeType.CLIENT);
77                  createNode(url, ZkNodeType.CLIENT);
78              } catch (Exception e) {
79                  LoggerUtil.warn("[ZookeeperRegistry] subscribe service: create node error, path=%s, msg=%s", ZkUtils.toNodePath(url, ZkNodeType.CLIENT), e.getMessage());
80              }
81              String serverTypePath = ZkUtils.toNodeTypePath(url, ZkNodeType.AVAILABLE_SERVER);
82              zkClient.subscribeChildChanges(serverTypePath, zkChildListener);
83              LoggerUtil.info(String.format("[ZookeeperRegistry] subscribe service: path=%s, info=%s", ZkUtils.toNodePath(url, ZkNodeType.AVAILABLE_SERVER), url.toFullStr()));
84          } catch (Throwable e) {
85              throw new MotanFrameworkException(String.format("Failed to subscribe %s to zookeeper(%s), cause: %s", url, getUrl(), e.getMessage()), e);
86          } finally {
87              clientLock.unlock();
88          }
89      }
90      @Override
91      protected void subscribeCommand(final URL url, final CommandListener commandListener) {
92          try {
93              clientLock.lock();
94              ConcurrentHashMap<CommandListener, IZkDataListener> dataChangeListeners = commandListeners.get(url);
95              if (dataChangeListeners == null) {
96                  commandListeners.putIfAbsent(url, new ConcurrentHashMap<CommandListener, IZkDataListener>());
97                  dataChangeListeners = commandListeners.get(url);
98              }
99              IZkDataListener zkDataListener = dataChangeListeners.get(commandListener);
100              if (zkDataListener == null) {
101                  dataChangeListeners.putIfAbsent(commandListener, new IZkDataListener() {
102                      @Override
103                      public void handleDataChange(String dataPath, Object data) throws Exception {
104                          commandListener.notifyCommand(url, (String) data);
105                          LoggerUtil.info(String.format("[ZookeeperRegistry] command data change: path=%s, command=%s", dataPath, (String) data));
106                      }
107                      @Override
108                      public void handleDataDeleted(String dataPath) throws Exception {
109                          commandListener.notifyCommand(url, null);
110                          LoggerUtil.info(String.format("[ZookeeperRegistry] command deleted: path=%s", dataPath));
111                      }
112                  });
113                  zkDataListener = dataChangeListeners.get(commandListener);
114              }
115              String commandPath = ZkUtils.toCommandPath(url);
116              zkClient.subscribeDataChanges(commandPath, zkDataListener);
117              LoggerUtil.info(String.format("[ZookeeperRegistry] subscribe command: path=%s, info=%s", commandPath, url.toFullStr()));
118          } catch (Throwable e) {
119              throw new MotanFrameworkException(String.format("Failed to subscribe %s to zookeeper(%s), cause: %s", url, getUrl(), e.getMessage()), e);
120          } finally {
121              clientLock.unlock();
122          }
123      }
124      @Override
125      protected void unsubscribeService(URL url, ServiceListener serviceListener) {
126          try {
127              clientLock.lock();
128              Map<ServiceListener, IZkChildListener> childChangeListeners = serviceListeners.get(url);
129              if (childChangeListeners != null) {
130                  IZkChildListener zkChildListener = childChangeListeners.get(serviceListener);
131                  if (zkChildListener != null) {
132                      zkClient.unsubscribeChildChanges(ZkUtils.toNodeTypePath(url, ZkNodeType.CLIENT), zkChildListener);
133                      childChangeListeners.remove(serviceListener);
134                  }
135              }
136          } catch (Throwable e) {
137              throw new MotanFrameworkException(String.format("Failed to unsubscribe service %s to zookeeper(%s), cause: %s", url, getUrl(), e.getMessage()), e);
138          } finally {
139              clientLock.unlock();
140          }
141      }
142      @Override
143      protected void unsubscribeCommand(URL url, CommandListener commandListener) {
144          try {
145              clientLock.lock();
146              Map<CommandListener, IZkDataListener> dataChangeListeners = commandListeners.get(url);
147              if (dataChangeListeners != null) {
148                  IZkDataListener zkDataListener = dataChangeListeners.get(commandListener);
149                  if (zkDataListener != null) {
150                      zkClient.unsubscribeDataChanges(ZkUtils.toCommandPath(url), zkDataListener);
151                      dataChangeListeners.remove(commandListener);
152                  }
153              }
154          } catch (Throwable e) {
155              throw new MotanFrameworkException(String.format("Failed to unsubscribe command %s to zookeeper(%s), cause: %s", url, getUrl(), e.getMessage()), e);
156          } finally {
157              clientLock.unlock();
158          }
159      }
160      @Override
161      protected List<URL> discoverService(URL url) {
162          try {
163              String parentPath = ZkUtils.toNodeTypePath(url, ZkNodeType.AVAILABLE_SERVER);
164              List<String> currentChilds = new ArrayList<>();
165              if (zkClient.exists(parentPath)) {
166                  currentChilds = zkClient.getChildren(parentPath);
167              }
168              return nodeChildsToUrls(url, parentPath, currentChilds);
169          } catch (Throwable e) {
170              throw new MotanFrameworkException(String.format("Failed to discover service %s from zookeeper(%s), cause: %s", url, getUrl(), e.getMessage()), e);
171          }
172      }
173      @Override
174      protected String discoverCommand(URL url) {
175          try {
176              String commandPath = ZkUtils.toCommandPath(url);
177              String command = "";
178              if (zkClient.exists(commandPath)) {
179                  command = zkClient.readData(commandPath);
180              }
181              return command;
182          } catch (Throwable e) {
183              throw new MotanFrameworkException(String.format("Failed to discover command %s from zookeeper(%s), cause: %s", url, getUrl(), e.getMessage()));
184          }
185      }
186      @Override
187      protected void doRegister(URL url) {
188          try {
189              serverLock.lock();
190              removeNode(url, ZkNodeType.AVAILABLE_SERVER);
191              removeNode(url, ZkNodeType.UNAVAILABLE_SERVER);
192              createNode(url, ZkNodeType.UNAVAILABLE_SERVER);
193          } catch (Throwable e) {
194              throw new MotanFrameworkException(String.format("Failed to register %s to zookeeper(%s), cause: %s", url, getUrl(), e.getMessage()), e);
195          } finally {
196              serverLock.unlock();
197          }
198      }
199      @Override
200      protected void doUnregister(URL url) {
201          try {
202              serverLock.lock();
203              removeNode(url, ZkNodeType.AVAILABLE_SERVER);
204              removeNode(url, ZkNodeType.UNAVAILABLE_SERVER);
205          } catch (Throwable e) {
206              throw new MotanFrameworkException(String.format("Failed to unregister %s to zookeeper(%s), cause: %s", url, getUrl(), e.getMessage()), e);
207          } finally {
208              serverLock.unlock();
209          }
210      }
211      @Override
212      protected void doAvailable(URL url) {
213          try {
214              serverLock.lock();
215              if (url == null) {
216                  availableServices.addAll(getRegisteredServiceUrls());
217                  for (URL u : getRegisteredServiceUrls()) {
218                      removeNode(u, ZkNodeType.AVAILABLE_SERVER);
219                      removeNode(u, ZkNodeType.UNAVAILABLE_SERVER);
220                      createNode(u, ZkNodeType.AVAILABLE_SERVER);
221                  }
222              } else {
223                  availableServices.add(url);
224                  removeNode(url, ZkNodeType.AVAILABLE_SERVER);
225                  removeNode(url, ZkNodeType.UNAVAILABLE_SERVER);
226                  createNode(url, ZkNodeType.AVAILABLE_SERVER);
227              }
228          } finally {
229              serverLock.unlock();
230          }
231      }
232      @Override
233      protected void doUnavailable(URL url) {
234          try {
235              serverLock.lock();
236              if (url == null) {
237                  availableServices.removeAll(getRegisteredServiceUrls());
238                  for (URL u : getRegisteredServiceUrls()) {
239                      removeNode(u, ZkNodeType.AVAILABLE_SERVER);
240                      removeNode(u, ZkNodeType.UNAVAILABLE_SERVER);
241                      createNode(u, ZkNodeType.UNAVAILABLE_SERVER);
242                  }
243              } else {
244                  availableServices.remove(url);
245                  removeNode(url, ZkNodeType.AVAILABLE_SERVER);
246                  removeNode(url, ZkNodeType.UNAVAILABLE_SERVER);
247                  createNode(url, ZkNodeType.UNAVAILABLE_SERVER);
248              }
249          } finally {
250              serverLock.unlock();
251          }
252      }
253      private List<URL> nodeChildsToUrls(URL url, String parentPath, List<String> currentChilds) {
254          List<URL> urls = new ArrayList<>();
255          if (currentChilds != null) {
256              for (String node : currentChilds) {
257                  String nodePath = parentPath + MotanConstants.PATH_SEPARATOR + node;
258                  String data = null;
259                  try {
260                      data = zkClient.readData(nodePath, true);
261                  } catch (Exception e) {
262                      LoggerUtil.warn("get zkdata fail!" + e.getMessage());
263                  }
264                  URL newurl = null;
265                  if (StringUtils.isNotBlank(data)) {
266                      try {
267                          newurl = URL.valueOf(data);
268                      } catch (Exception e) {
269                          LoggerUtil.warn(String.format("Found malformed urls from ZookeeperRegistry, path=%s", nodePath), e);
270                      }
271                  }
272                  if (newurl == null) {
273                      newurl = url.createCopy();
274                      String host = "";
275                      int port = 80;
276                      if (node.indexOf(":") > -1) {
277                          String[] hp = node.split(":");
278                          if (hp.length > 1) {
279                              host = hp[0];
280                              try {
281                                  port = Integer.parseInt(hp[1]);
282                              } catch (Exception ignore) {
283                              }
284                          }
285                      } else {
286                          host = node;
287                      }
288                      newurl.setHost(host);
289                      newurl.setPort(port);
290                  }
291                  urls.add(newurl);
292              }
293          }
294          return urls;
295      }
296      private void createNode(URL url, ZkNodeType nodeType) {
297          String nodeTypePath = ZkUtils.toNodeTypePath(url, nodeType);
298          if (!zkClient.exists(nodeTypePath)) {
299              zkClient.createPersistent(nodeTypePath, true);
300          }
301          zkClient.createEphemeral(ZkUtils.toNodePath(url, nodeType), url.toFullStr());
302      }
303      private void removeNode(URL url, ZkNodeType nodeType) {
304          String nodePath = ZkUtils.toNodePath(url, nodeType);
305          if (zkClient.exists(nodePath)) {
306              zkClient.delete(nodePath);
307          }
308      }
309      private void reconnectService() {
310          Collection<URL> allRegisteredServices = getRegisteredServiceUrls();
311          if (allRegisteredServices != null && !allRegisteredServices.isEmpty()) {
312              try {
313                  serverLock.lock();
314                  for (URL url : getRegisteredServiceUrls()) {
315                      doRegister(url);
316                  }
317                  LoggerUtil.info("[{}] reconnect: register services {}", registryClassName, allRegisteredServices);
318                  for (URL url : availableServices) {
319                      if (!getRegisteredServiceUrls().contains(url)) {
320                          LoggerUtil.warn("reconnect url not register. url:{}", url);
321                          continue;
322                      }
323                      doAvailable(url);
324                  }
325                  LoggerUtil.info("[{}] reconnect: available services {}", registryClassName, availableServices);
326              } finally {
327                  serverLock.unlock();
328              }
329          }
330      }
331      @SuppressWarnings("rawtypes")
332      private void reconnectClient() {
333          if (serviceListeners != null && !serviceListeners.isEmpty()) {
334              try {
335                  clientLock.lock();
336                  for (Map.Entry entry : serviceListeners.entrySet()) {
337                      URL url = (URL) entry.getKey();
338                      ConcurrentHashMap<ServiceListener, IZkChildListener> childChangeListeners = serviceListeners.get(url);
339                      if (childChangeListeners != null) {
340                          for (Map.Entry e : childChangeListeners.entrySet()) {
341                              subscribeService(url, (ServiceListener) e.getKey());
342                          }
343                      }
344                  }
345                  for (Map.Entry entry : commandListeners.entrySet()) {
346                      URL url = (URL) entry.getKey();
347                      ConcurrentHashMap<CommandListener, IZkDataListener> dataChangeListeners = commandListeners.get(url);
348                      if (dataChangeListeners != null) {
349                          for (Map.Entry e : dataChangeListeners.entrySet()) {
350                              subscribeCommand(url, (CommandListener) e.getKey());
351                          }
352                      }
353                  }
354                  LoggerUtil.info("[{}] reconnect all clients", registryClassName);
355              } finally {
356                  clientLock.unlock();
357              }
358          }
359      }
360      @Override
361      public void close() {
362          this.zkClient.close();
363      }
364  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from BungeeCord-MDEwOlJlcG9zaXRvcnk2MDg0MjEw-flat-ModuleManager.java</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from motan-MDEwOlJlcG9zaXRvcnk1NjY3OTUyMQ==-flat-ZookeeperRegistry.java</div>
                </div>
                <div class="column column_space"><pre><code>3  import edu.umd.cs.findbugs.annotations.SuppressFBWarnings;
4  import java.io.File;
5  import java.io.FileInputStream;
6  import java.io.FileWriter;
7  import java.io.InputStream;
8  import java.net.URI;
9  import java.util.ArrayList;
10  import java.util.Collection;
11  import java.util.HashMap;
12  import java.util.List;
13  import java.util.Map;
14  import java.util.jar.JarEntry;
15  import java.util.jar.JarFile;
16  import java.util.logging.Level;
17  import net.md_5.bungee.api.ProxyServer;
18  import net.md_5.bungee.api.plugin.PluginDescription;
19  import net.md_5.bungee.util.CaseInsensitiveMap;
20  import org.yaml.snakeyaml.DumperOptions;
21  import org.yaml.snakeyaml.Yaml;
22  public class ModuleManager
23  {
24      private final Map<String, ModuleSource> knownSources = new HashMap<>();
</pre></code></div>
                <div class="column column_space"><pre><code>2  import com.weibo.api.motan.closable.Closable;
3  import com.weibo.api.motan.closable.ShutDownHook;
4  import com.weibo.api.motan.common.MotanConstants;
5  import com.weibo.api.motan.exception.MotanFrameworkException;
6  import com.weibo.api.motan.registry.support.command.CommandFailbackRegistry;
7  import com.weibo.api.motan.registry.support.command.CommandListener;
8  import com.weibo.api.motan.registry.support.command.ServiceListener;
9  import com.weibo.api.motan.rpc.URL;
10  import com.weibo.api.motan.util.ConcurrentHashSet;
11  import com.weibo.api.motan.util.LoggerUtil;
12  import org.I0Itec.zkclient.IZkChildListener;
13  import org.I0Itec.zkclient.IZkDataListener;
14  import org.I0Itec.zkclient.IZkStateListener;
15  import org.I0Itec.zkclient.ZkClient;
16  import org.apache.commons.lang3.StringUtils;
17  import org.apache.zookeeper.Watcher;
18  import java.util.*;
19  import java.util.concurrent.ConcurrentHashMap;
20  import java.util.concurrent.locks.ReentrantLock;
21  public class ZookeeperRegistry extends CommandFailbackRegistry implements Closable {
22      private final ReentrantLock clientLock = new ReentrantLock();
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    