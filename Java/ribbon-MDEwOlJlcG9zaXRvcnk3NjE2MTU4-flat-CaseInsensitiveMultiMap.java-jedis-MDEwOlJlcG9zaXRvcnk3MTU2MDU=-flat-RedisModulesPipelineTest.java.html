
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 3.8394415357766145%, Tokens: 11</h2>
        <div class="column">
            <h3>ribbon-MDEwOlJlcG9zaXRvcnk3NjE2MTU4-flat-CaseInsensitiveMultiMap.java</h3>
            <pre><code>1  package com.netflix.client.http;
<span onclick='openModal()' class='match'>2  import java.util.ArrayList;
3  import java.util.Collection;
4  import java.util.List;
5  import java.util.Map;
6  import java.util.Map.Entry;
7  import java.util.AbstractMap.SimpleEntry;
8  import com.google.common.collect.ArrayListMultimap;
9  import com.google.common.collect.Lists;
10  import com.google.common.collect.Multimap;
11  public class CaseInsensitiveMultiMap implements HttpHeaders {
12      Multimap<String, Entry<String, String>> map = ArrayListMultimap.create();
</span>13      @Override
14      public String getFirstValue(String headerName) {
15          Collection<Entry<String, String>> entries = map.get(headerName.toLowerCase());
16          if (entries == null || entries.isEmpty()) {
17              return null;
18          } 
19          return entries.iterator().next().getValue();
20      }
21      @Override
22      public List<String> getAllValues(String headerName) {
23          Collection<Entry<String, String>> entries = map.get(headerName.toLowerCase());
24          List<String> values = Lists.newArrayList();
25          if (entries != null) {
26              for (Entry<String, String> entry: entries) {
27                  values.add(entry.getValue());
28              }
29          }
30          return values;
31      }
32      @Override
33      public List<Entry<String, String>> getAllHeaders() {
34          Collection<Entry<String, String>> all = map.values();
35          return new ArrayList<Entry<String, String>>(all);
36      }
37      @Override
38      public boolean containsHeader(String name) {
39          return map.containsKey(name.toLowerCase());
40      }
41      public void addHeader(String name, String value) {
42          if (getAllValues(name).contains(value)) {
43              return;
44          }
45          SimpleEntry<String, String> entry = new SimpleEntry<String, String>(name, value);
46          map.put(name.toLowerCase(), entry);
47      }
48      Map<String, Collection<String>> asMap() {
49          Multimap<String, String> result = ArrayListMultimap.create();
50          Collection<Entry<String, String>> all = map.values();
51          for (Entry<String, String> entry: all) {
52              result.put(entry.getKey(), entry.getValue());
53          }
54          return result.asMap();
55      }
56  }
</code></pre>
        </div>
        <div class="column">
            <h3>jedis-MDEwOlJlcG9zaXRvcnk3MTU2MDU=-flat-RedisModulesPipelineTest.java</h3>
            <pre><code>1  package redis.clients.jedis.modules;
2  import static org.junit.Assert.assertEquals;
3  import static org.junit.Assert.assertNotNull;
4  import static redis.clients.jedis.json.Path.ROOT_PATH;
5  import static redis.clients.jedis.modules.json.JsonObjects.Baz;
6  import static redis.clients.jedis.modules.json.JsonObjects.IRLObject;
7  import static redis.clients.jedis.search.RediSearchUtil.toStringMap;
8  import com.google.gson.Gson;
9  import java.util.HashMap;
10  import java.util.List;
11  import java.util.Map;
12  import java.util.Collections;
13  import org.json.JSONArray;
14  import org.json.JSONObject;
<span onclick='openModal()' class='match'>15  import org.junit.BeforeClass;
16  import org.junit.Test;
17  import redis.clients.jedis.Pipeline;
18  import redis.clients.jedis.Response;
19  import redis.clients.jedis.json.JsonSetParams;
20  import redis.clients.jedis.json.Path;
21  import redis.clients.jedis.json.Path2;
22  import redis.clients.jedis.search.*;
23  import redis.clients.jedis.search.aggr.*;
24  public class RedisModulesPipelineTest extends RedisModuleCommandsTestBase {
25    private static final Gson gson = new Gson();
</span>26    @BeforeClass
27    public static void prepare() {
28      RedisModuleCommandsTestBase.prepare();
29    }
30    @Test
31    public void search() {
32      Schema sc = new Schema().addTextField("title", 1.0).addTextField("body", 1.0);
33      String index = "testindex";
34      Map<String, Object> fields = new HashMap<>();
35      fields.put("title", "hello world");
36      fields.put("body", "lorem ipsum");
37      Pipeline p = (Pipeline) client.pipelined();
38      Response<String> create = p.ftCreate(index, IndexOptions.defaultOptions(), sc);
39      Response<String> alter = p.ftAlter(index, new Schema().addTextField("foo", 1.0));
40      p.hset("doc1", toStringMap(fields));
41      p.hset("doc2", toStringMap(fields));
42      Response<SearchResult> searchResult = p.ftSearch(index, new Query("hello world"));
43      Response<SearchResult> searchBytesResult = p.ftSearch(index.getBytes(), new Query("hello world"));
44      Response<AggregationResult> aggregateResult = p.ftAggregate(index, new AggregationBuilder().groupBy("@title"));
45      Response<String> explain = p.ftExplain(index, new Query("@title:title_val"));
46      Response<List<String>> explainCLI = p.ftExplainCLI(index, new Query("@title:title_val"));
47      Response<Map<String, Object>> info = p.ftInfo(index);
48      Response<String> configSet = p.ftConfigSet("timeout", "100");
49      Response<Map<String, String>> configGet = p.ftConfigGet("*");
50      Response<String> configSetIndex = p.ftConfigSet(index, "timeout", "100");
51      Response<Map<String, String>> configGetIndex = p.ftConfigGet(index, "*");
52      Response<String> synUpdate = p.ftSynUpdate(index, "foo", "bar");
53      Response<Map<String, List<String>>> synDump = p.ftSynDump(index);
54      p.sync();
55      assertEquals("OK", create.get());
56      assertEquals("OK", alter.get());
57      assertEquals("OK", alter.get());
58      assertEquals(2, searchResult.get().getTotalResults());
59      assertEquals(2, searchBytesResult.get().getTotalResults());
60      assertEquals(1, aggregateResult.get().getTotalResults());
61      assertNotNull(explain.get());
62      assertNotNull(explainCLI.get().get(0));
63      assertEquals(index, info.get().get("index_name"));
64      assertEquals("OK", configSet.get());
65      assertEquals("100", configGet.get().get("TIMEOUT"));
66      assertEquals("OK", configSetIndex.get());
67      assertEquals("100", configGetIndex.get().get("TIMEOUT"));
68      assertEquals("OK", synUpdate.get());
69      Map<String, List<String>> expected = new HashMap<>();
70      expected.put("bar", Collections.singletonList("foo"));
71      assertEquals(expected, synDump.get());
72    }
73    @Test
74    public void jsonV1() {
75      Map<String, String> hm1 = new HashMap<>();
76      hm1.put("hello", "world");
77      hm1.put("oh", "snap");
78      Map<String, Object> hm2 = new HashMap<>();
79      hm2.put("array", new String[]{"a", "b", "c"});
80      hm2.put("boolean", true);
81      hm2.put("number", 3);
82      Baz baz1 = new Baz("quuz1", "grault1", "waldo1");
83      Baz baz2 = new Baz("quuz2", "grault2", "waldo2");
84      Baz baz3 = new Baz("quuz3", "grault3", "waldo3");
85      Pipeline p = (Pipeline) client.pipelined();
86      Response<String> set1 = p.jsonSet("foo", Path.ROOT_PATH, hm1);
87      Response<Object> get = p.jsonGet("foo");
88      Response<Map> getObject = p.jsonGet("foo", Map.class);
89      Response<Object> getWithPath = p.jsonGet("foo", Path.ROOT_PATH);
90      Response<Map> getObjectWithPath = p.jsonGet("foo", Map.class, Path.ROOT_PATH);
91      Response<List<JSONArray>> mget = p.jsonMGet("foo");
92      p.jsonSet("baz", new JSONObject(gson.toJson(baz1)));
93      Response<List<Baz>> mgetClass = p.jsonMGet(Path.ROOT_PATH, Baz.class, "baz");
94      Response<Long> strLenPath = p.jsonStrLen("foo", new Path("hello"));
95      Response<Long> strAppPath = p.jsonStrAppend("foo", new Path("hello"), "!");
96      Response<Long> delPath = p.jsonDel("foo", new Path("hello"));
97      Response<Long> delKey = p.jsonDel("foo");
98      Response<String> set2 = p.jsonSet("foo", Path.ROOT_PATH, hm2, new JsonSetParams().nx());
99      Response<Object> popPath = p.jsonArrPop("foo", new Path("array"));
100      Response<Object> indexPop = p.jsonArrPop("foo", new Path("array"), 2);
101      Response<Long> append = p.jsonArrAppend("foo", new Path("array"), "b", "c", "d");
102      Response<Long> index = p.jsonArrIndex("foo", new Path("array"), "c");
103      Response<Long> insert = p.jsonArrInsert("foo", new Path("array"), 0, "x");
104      Response<Long> arrLenWithPath = p.jsonArrLen("foo", new Path("array"));
105      Response<Long> trim = p.jsonArrTrim("foo", new Path("array"), 1, 4);
106      Response<String> toggle = p.jsonToggle("foo", new Path("boolean"));
107      Response<Class<?>> type = p.jsonType("foo", new Path("boolean"));
108      Response<Class<?>> keyType = p.jsonType("foo");
109      Response<Long> clearPath = p.jsonClear("foo", new Path("boolean"));
110      Response<Long> clearKey = p.jsonClear("foo");
111      Response<String> set3 = p.jsonSet("foo", Path.ROOT_PATH, "newStr");
112      Response<Long> strLen = p.jsonStrLen("foo");
113      Response<Long> strApp = p.jsonStrAppend("foo", "?");
114      Response<String> set4 = p.jsonSetWithEscape("obj", new IRLObject());
115      p.jsonSet("arr", ROOT_PATH, new int[]{ 0, 1, 2, 3 });
116      Response<Object> pop = p.jsonArrPop("arr");
117      Response<Long> arrLen = p.jsonArrLen("arr");
118      p.jsonSet("baz", ROOT_PATH, new Baz[]{ baz1, baz2, baz3 });
119      Response<Baz> popClass = p.jsonArrPop("baz", Baz.class);
120      Response<Baz> popClassWithPath = p.jsonArrPop("baz", Baz.class, Path.ROOT_PATH);
121      Response<Baz> popClassWithIndex = p.jsonArrPop("baz", Baz.class, Path.ROOT_PATH, 0);
122      p.sync();
123      assertEquals("OK", set1.get());
124      assertEquals(hm1, get.get());
125      assertEquals(hm1, getObject.get());
126      assertEquals(hm1, getWithPath.get());
127      assertEquals(hm1, getObjectWithPath.get());
128      assertEquals(1, mget.get().size());
129      assertEquals(baz1, mgetClass.get().get(0));
130      assertEquals(Long.valueOf(5), strLenPath.get());
131      assertEquals(Long.valueOf(6), strAppPath.get());
132      assertEquals(Long.valueOf(1), delPath.get());
133      assertEquals(Long.valueOf(1), delKey.get());
134      assertEquals("OK", set2.get());
135      assertEquals("c", popPath.get());
136      assertEquals("b", indexPop.get());
137      assertEquals(Long.valueOf(4), append.get());
138      assertEquals(Long.valueOf(2), index.get());
139      assertEquals(Long.valueOf(5), insert.get());
140      assertEquals(Long.valueOf(5), arrLenWithPath.get());
141      assertEquals(Long.valueOf(4), trim.get());
142      assertEquals("false", toggle.get());
143      assertEquals(boolean.class, type.get());
144      assertEquals(Object.class, keyType.get());
145      assertEquals(Long.valueOf(0), clearPath.get());
146      assertEquals(Long.valueOf(1), clearKey.get());
147      assertEquals("OK", set3.get());
148      assertEquals(Long.valueOf(6), strLen.get());
149      assertEquals(Long.valueOf(7), strApp.get());
150      assertEquals("OK", set4.get());
151      assertEquals(3.0, pop.get());
152      assertEquals(Long.valueOf(3), arrLen.get());
153      assertEquals(baz3, popClass.get());
154      assertEquals(baz2, popClassWithPath.get());
155      assertEquals(baz1, popClassWithIndex.get());
156    }
157    @Test
158    public void jsonV2() {
159      Map<String, String> hm1 = new HashMap<>();
160      hm1.put("hello", "world");
161      hm1.put("oh", "snap");
162      Map<String, Object> hm2 = new HashMap<>();
163      hm2.put("array", new String[]{"a", "b", "c"});
164      hm2.put("boolean", true);
165      hm2.put("number", 3);
166      Pipeline p = (Pipeline) client.pipelined();
167      Response<String> setWithEscape = p.jsonSetWithEscape("foo", Path2.ROOT_PATH, hm1);
168      Response<Object> get = p.jsonGet("foo",  Path2.ROOT_PATH);
169      Response<List<JSONArray>> mget = p.jsonMGet(Path2.ROOT_PATH, "foo");
170      Response<List<Long>> strLen = p.jsonStrLen("foo", new Path2("hello"));
171      Response<List<Long>> strApp = p.jsonStrAppend("foo", new Path2("hello"), "!");
172      Response<Long> del = p.jsonDel("foo", new Path2("hello"));
173      Response<String> set = p.jsonSet("bar", Path2.ROOT_PATH, gson.toJson("strung"));
174      Response<String> setWithParams = p.jsonSet("foo", Path2.ROOT_PATH, gson.toJson(hm2), new JsonSetParams().xx());
175      Response<String> setWithEscapeWithParams = p.jsonSetWithEscape("foo", Path2.ROOT_PATH, hm2, new JsonSetParams().xx());
176      Response<List<Object>> pop = p.jsonArrPop("foo", new Path2("array"));
177      Response<List<Object>> popWithIndex = p.jsonArrPop("foo", new Path2("array"), 2);
178      Response<List<Long>> append = p.jsonArrAppend("foo", Path2.of("$.array"), gson.toJson("b"), gson.toJson("d"));
179      Response<List<Long>> appendWithEscape = p.jsonArrAppendWithEscape("foo", Path2.of("$.array"), "e");
180      Response<List<Long>> index = p.jsonArrIndex("foo", Path2.of("$.array"), gson.toJson("b"));
181      Response<List<Long>> indexWithEscape = p.jsonArrIndexWithEscape("foo", Path2.of("$.array"), "b");
182      Response<List<Long>> insert = p.jsonArrInsert("foo", new Path2("array"), 0, gson.toJson("x"));
183      Response<List<Long>> insertWithEscape = p.jsonArrInsertWithEscape("foo", new Path2("array"), 0, "x");
184      Response<List<Long>> arrLen = p.jsonArrLen("foo", new Path2("array"));
185      Response<List<Long>> trim = p.jsonArrTrim("foo", new Path2("array"), 1, 2);
186      Response<List<Boolean>> toggle = p.jsonToggle("foo", new Path2("boolean"));
187      Response<List<Class<?>>> type = p.jsonType("foo", new Path2("boolean"));
188      Response<Long> clear = p.jsonClear("foo", new Path2("array"));
189      p.sync();
190      assertEquals("OK", setWithEscape.get());
191      assertNotNull(get.get());
192      assertEquals(1, mget.get().size());
193      assertEquals(Long.valueOf(5), strLen.get().get(0));
194      assertEquals(1, strApp.get().size());
195      assertEquals(Long.valueOf(1), del.get());
196      assertEquals("OK", set.get());
197      assertEquals("OK", setWithParams.get());
198      assertEquals("OK", setWithEscapeWithParams.get());
199      assertEquals("c", pop.get().get(0));
200      assertEquals("b", popWithIndex.get().get(0));
201      assertEquals(Long.valueOf(3), append.get().get(0));
202      assertEquals(Long.valueOf(4), appendWithEscape.get().get(0));
203      assertEquals(Long.valueOf(1), index.get().get(0));
204      assertEquals(Long.valueOf(1), indexWithEscape.get().get(0));
205      assertEquals(Long.valueOf(5), insert.get().get(0));
206      assertEquals(Long.valueOf(6), insertWithEscape.get().get(0));
207      assertEquals(Long.valueOf(6), arrLen.get().get(0));
208      assertEquals(Long.valueOf(2), trim.get().get(0));
209      assertEquals(false, toggle.get().get(0));
210      assertEquals(boolean.class, type.get().get(0));
211      assertEquals(Long.valueOf(1), clear.get());
212    }
213  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from ribbon-MDEwOlJlcG9zaXRvcnk3NjE2MTU4-flat-CaseInsensitiveMultiMap.java</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from jedis-MDEwOlJlcG9zaXRvcnk3MTU2MDU=-flat-RedisModulesPipelineTest.java</div>
                </div>
                <div class="column column_space"><pre><code>2  import java.util.ArrayList;
3  import java.util.Collection;
4  import java.util.List;
5  import java.util.Map;
6  import java.util.Map.Entry;
7  import java.util.AbstractMap.SimpleEntry;
8  import com.google.common.collect.ArrayListMultimap;
9  import com.google.common.collect.Lists;
10  import com.google.common.collect.Multimap;
11  public class CaseInsensitiveMultiMap implements HttpHeaders {
12      Multimap<String, Entry<String, String>> map = ArrayListMultimap.create();
</pre></code></div>
                <div class="column column_space"><pre><code>15  import org.junit.BeforeClass;
16  import org.junit.Test;
17  import redis.clients.jedis.Pipeline;
18  import redis.clients.jedis.Response;
19  import redis.clients.jedis.json.JsonSetParams;
20  import redis.clients.jedis.json.Path;
21  import redis.clients.jedis.json.Path2;
22  import redis.clients.jedis.search.*;
23  import redis.clients.jedis.search.aggr.*;
24  public class RedisModulesPipelineTest extends RedisModuleCommandsTestBase {
25    private static final Gson gson = new Gson();
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    