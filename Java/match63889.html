<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Matches for RtspEncoderTest.java & DefaultByteBufHolderTest.java</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
</HEAD>
<body>
  <div style="align-items: center; display: flex; justify-content: space-around;">
    <div>
      <h3 align="center">
Matches for RtspEncoderTest.java & DefaultByteBufHolderTest.java
      </h3>
      <h1 align="center">
        23.7%
      </h1>
      <center>
        <a href="index.html" target="_top">
          INDEX
        </a>
        <span>-</span>
        <a href="help-en.html" target="_top">
          HELP
        </a>
      </center>
    </div>
    <div>
<TABLE BORDER="1" CELLSPACING="0" BGCOLOR="#d0d0d0">
<TR><TH><TH>RtspEncoderTest.java (24.193548%)<TH>DefaultByteBufHolderTest.java (23.255814%)<TH>Tokens
<TR><TD BGCOLOR="#0000ff"><FONT COLOR="#0000ff">-</FONT><TD><A HREF="javascript:ZweiFrames('match63889-0.html#0',2,'match63889-1.html#0',3)" NAME="0">(87-96)<TD><A HREF="javascript:ZweiFrames('match63889-0.html#0',2,'match63889-1.html#0',3)" NAME="0">(29-33)</A><TD ALIGN=center><FONT COLOR="#ff0000">11</FONT>
<TR><TD BGCOLOR="#f63526"><FONT COLOR="#f63526">-</FONT><TD><A HREF="javascript:ZweiFrames('match63889-0.html#1',2,'match63889-1.html#1',3)" NAME="1">(156-162)<TD><A HREF="javascript:ZweiFrames('match63889-0.html#1',2,'match63889-1.html#1',3)" NAME="1">(64-68)</A><TD ALIGN=center><FONT COLOR="#e70000">10</FONT>
<TR><TD BGCOLOR="#980517"><FONT COLOR="#980517">-</FONT><TD><A HREF="javascript:ZweiFrames('match63889-0.html#2',2,'match63889-1.html#2',3)" NAME="2">(26-42)<TD><A HREF="javascript:ZweiFrames('match63889-0.html#2',2,'match63889-1.html#2',3)" NAME="2">(18-28)</A><TD ALIGN=center><FONT COLOR="#d00000">9</FONT>
</TABLE>
    </div>
  </div>
  <hr>
  <div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>RtspEncoderTest.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<HR>
<PRE>
/*
 * Copyright 2015 The Netty Project
 *
 * The Netty Project licenses this file to you under the Apache License,
 * version 2.0 (the &quot;License&quot;); you may not use this file except in compliance
 * with the License. You may obtain a copy of the License at:
 *
 *   https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations
 * under the License.
 */
package io.netty.handler.codec.rtsp;

import io.netty.buffer.ByteBuf;
import io.netty.channel.embedded.EmbeddedChannel;
import io.netty.handler.codec.http.DefaultFullHttpRequest;
import io.netty.handler.codec.http.DefaultFullHttpResponse;
import io.netty.handler.codec.http.DefaultHttpRequest;
<A NAME="2"></A>import io.netty.handler.codec.http.DefaultHttpResponse;
import io.netty.handler.codec.http.FullHttpRequest;
import io.netty.handler.codec.http.FullHttpResponse;
<FONT color="#980517"><A HREF="javascript:ZweiFrames('match63889-1.html#2',3,'match63889-top.html#2',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>import io.netty.handler.codec.http.HttpRequest;
import io.netty.handler.codec.http.HttpResponse;
import io.netty.util.CharsetUtil;
import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.assertEquals;

/**
 * Test cases for RTSP encoder.
 */
public class RtspEncoderTest {

    /**
     * Test of a SETUP request, with no body.
     */
    @Test
    public void testSendSetupRequest() {</B></FONT>
        String expected = &quot;SETUP rtsp://172.10.20.30:554/d3abaaa7-65f2-42b4-&quot;
                        + &quot;8d6b-379f492fcf0f RTSP/1.0\r\n&quot;
                        + &quot;transport: MP2T/DVBC/UDP;unicast;client=01234567;&quot;
                        + &quot;source=172.10.20.30;&quot;
                        + &quot;destination=1.1.1.1;client_port=6922\r\n&quot;
                        + &quot;cseq: 1\r\n&quot;
                        + &quot;\r\n&quot;;

        HttpRequest request = new DefaultHttpRequest(RtspVersions.RTSP_1_0,
               RtspMethods.SETUP,
               &quot;rtsp://172.10.20.30:554/d3abaaa7-65f2-42b4-8d6b-379f492fcf0f&quot;);
        request.headers().add(RtspHeaderNames.TRANSPORT,
               &quot;MP2T/DVBC/UDP;unicast;client=01234567;source=172.10.20.30;&quot; +
               &quot;destination=1.1.1.1;client_port=6922&quot;);
        request.headers().add(RtspHeaderNames.CSEQ, &quot;1&quot;);

        EmbeddedChannel ch = new EmbeddedChannel(new RtspEncoder());
        ch.writeOutbound(request);

        ByteBuf buf = ch.readOutbound();
        String actual = buf.toString(CharsetUtil.UTF_8);
        buf.release();
        assertEquals(expected, actual);
    }

    /**
     * Test of a GET_PARAMETER request, with body.
     */
    @Test
    public void testSendGetParameterRequest() {
        String expected = &quot;GET_PARAMETER rtsp://172.10.20.30:554 RTSP/1.0\r\n&quot;
                        + &quot;session: 2547019973447939919\r\n&quot;
                        + &quot;cseq: 3\r\n&quot;
                        + &quot;content-length: 31\r\n&quot;
                        + &quot;content-type: text/parameters\r\n&quot;
                        + &quot;\r\n&quot;
                        + &quot;stream_state\r\n&quot;
                        + &quot;position\r\n&quot;
                        + &quot;scale\r\n&quot;;

        byte[] content = (&quot;stream_state\r\n&quot;
<A NAME="0"></A>                        + &quot;position\r\n&quot;
                        + &quot;scale\r\n&quot;).getBytes(CharsetUtil.UTF_8);

        <FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match63889-1.html#0',3,'match63889-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>FullHttpRequest request = new DefaultFullHttpRequest(
                RtspVersions.RTSP_1_0,
                RtspMethods.GET_PARAMETER,
                &quot;rtsp://172.10.20.30:554&quot;);
        request.headers().add(RtspHeaderNames.SESSION, &quot;2547019973447939919&quot;);
        request.headers().add(RtspHeaderNames.CSEQ, &quot;3&quot;);
        request.headers().add(RtspHeaderNames.CONTENT_LENGTH,
                &quot;&quot; + content.length);
        request.headers().add(RtspHeaderNames.CONTENT_TYPE, &quot;text/parameters&quot;);
        request.content().writeBytes</B></FONT>(content);

        EmbeddedChannel ch = new EmbeddedChannel(new RtspEncoder());
        ch.writeOutbound(request);

        ByteBuf buf = ch.readOutbound();
        String actual = buf.toString(CharsetUtil.UTF_8);
        buf.release();
        assertEquals(expected, actual);
    }

    /**
     * Test of a 200 OK response, without body.
     */
    @Test
    public void testSend200OkResponseWithoutBody() {
        String expected = &quot;RTSP/1.0 200 OK\r\n&quot;
                        + &quot;server: Testserver\r\n&quot;
                        + &quot;cseq: 1\r\n&quot;
                        + &quot;session: 2547019973447939919\r\n&quot;
                        + &quot;\r\n&quot;;

        HttpResponse response = new DefaultHttpResponse(RtspVersions.RTSP_1_0,
                RtspResponseStatuses.OK);
        response.headers().add(RtspHeaderNames.SERVER, &quot;Testserver&quot;);
        response.headers().add(RtspHeaderNames.CSEQ, &quot;1&quot;);
        response.headers().add(RtspHeaderNames.SESSION, &quot;2547019973447939919&quot;);

        EmbeddedChannel ch = new EmbeddedChannel(new RtspEncoder());
        ch.writeOutbound(response);

        ByteBuf buf = ch.readOutbound();
        String actual = buf.toString(CharsetUtil.UTF_8);
        buf.release();
        assertEquals(expected, actual);
    }

    /**
     * Test of a 200 OK response, with body.
     */
    @Test
    public void testSend200OkResponseWithBody() {
        String expected = &quot;RTSP/1.0 200 OK\r\n&quot;
                        + &quot;server: Testserver\r\n&quot;
                        + &quot;session: 2547019973447939919\r\n&quot;
                        + &quot;content-type: text/parameters\r\n&quot;
                        + &quot;content-length: 50\r\n&quot;
                        + &quot;cseq: 3\r\n&quot;
                        + &quot;\r\n&quot;
                        + &quot;position: 24\r\n&quot;
                        + &quot;stream_state: playing\r\n&quot;
                        + &quot;scale: 1.00\r\n&quot;;

        byte[] content = (&quot;position: 24\r\n&quot;
                        + &quot;stream_state: playing\r\n&quot;
                        + &quot;scale: 1.00\r\n&quot;).getBytes(CharsetUtil.UTF_8);

<A NAME="1"></A>        FullHttpResponse response =
                new DefaultFullHttpResponse(RtspVersions.RTSP_1_0,
                                            RtspResponseStatuses.OK);
        <FONT color="#f63526"><A HREF="javascript:ZweiFrames('match63889-1.html#1',3,'match63889-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>response.headers().add(RtspHeaderNames.SERVER, &quot;Testserver&quot;);
        response.headers().add(RtspHeaderNames.SESSION, &quot;2547019973447939919&quot;);
        response.headers().add(RtspHeaderNames.CONTENT_TYPE,
                &quot;text/parameters&quot;);
        response.headers().add(RtspHeaderNames.CONTENT_LENGTH,
                &quot;&quot; + content.length);
        response.headers</B></FONT>().add(RtspHeaderNames.CSEQ, &quot;3&quot;);
        response.content().writeBytes(content);

        EmbeddedChannel ch = new EmbeddedChannel(new RtspEncoder());
        ch.writeOutbound(response);

        ByteBuf buf = ch.readOutbound();
        String actual = buf.toString(CharsetUtil.UTF_8);
        buf.release();
        assertEquals(expected, actual);
    }
}
</PRE>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>DefaultByteBufHolderTest.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<HR>
<PRE>
/*
 * Copyright 2015 The Netty Project
 *
 * The Netty Project licenses this file to you under the Apache License,
 * version 2.0 (the &quot;License&quot;); you may not use this file except in compliance
 * with the License. You may obtain a copy of the License at:
 *
 *   https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations
 * under the License.
<A NAME="2"></A> */
package io.netty.buffer;

<FONT color="#980517"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match63889-0.html#2',2,'match63889-top.html#2',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.junit.jupiter.api.Assertions.assertFalse;
import static org.junit.jupiter.api.Assertions.assertNotNull;
import static org.junit.jupiter.api.Assertions.assertTrue;

public class DefaultByteBufHolderTest {
<A NAME="0"></A>
    @Test
    public void testToString() {</B></FONT>
        <FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match63889-0.html#0',2,'match63889-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>ByteBufHolder holder = new DefaultByteBufHolder(Unpooled.buffer());
        assertEquals(1, holder.refCnt());
        assertNotNull(holder.toString());
        assertTrue(holder.release());
        assertNotNull(holder.toString</B></FONT>());
    }

    @Test
    public void testEqualsAndHashCode() {
        ByteBufHolder holder = new DefaultByteBufHolder(Unpooled.EMPTY_BUFFER);
        ByteBufHolder copy = holder.copy();
        try {
            assertEquals(holder, copy);
            assertEquals(holder.hashCode(), copy.hashCode());
        } finally {
            holder.release();
            copy.release();
        }
    }

    @SuppressWarnings(&quot;SimplifiableJUnitAssertion&quot;)
    @Test
    public void testDifferentClassesAreNotEqual() {
        // all objects here have EMPTY_BUFFER data but are instances of different classes
        // so we want to check that none of them are equal to another.
        ByteBufHolder dflt = new DefaultByteBufHolder(Unpooled.EMPTY_BUFFER);
        ByteBufHolder other = new OtherByteBufHolder(Unpooled.EMPTY_BUFFER, 123);
        ByteBufHolder constant1 = new DefaultByteBufHolder(Unpooled.EMPTY_BUFFER) {
            // intentionally empty
        };
        ByteBufHolder constant2 = new DefaultByteBufHolder(Unpooled.EMPTY_BUFFER) {
            // intentionally empty
<A NAME="1"></A>        };
        try {
            // not using 'assertNotEquals' to be explicit about which object we are calling .equals() on
            <FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match63889-0.html#1',2,'match63889-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>assertFalse(dflt.equals(other));
            assertFalse(dflt.equals(constant1));
            assertFalse(constant1.equals(dflt));
            assertFalse(constant1.equals(other));
            assertFalse(constant1.equals</B></FONT>(constant2));
        } finally {
            dflt.release();
            other.release();
            constant1.release();
            constant2.release();
        }
    }

    private static class OtherByteBufHolder extends DefaultByteBufHolder {

        private final int extraField;

        OtherByteBufHolder(final ByteBuf data, final int extraField) {
            super(data);
            this.extraField = extraField;
        }

        @Override
        public boolean equals(final Object o) {
            if (this == o) {
                return true;
            }
            if (o == null || getClass() != o.getClass()) {
                return false;
            }
            if (!super.equals(o)) {
                return false;
            }
            final OtherByteBufHolder that = (OtherByteBufHolder) o;
            return extraField == that.extraField;
        }

        @Override
        public int hashCode() {
            int result = super.hashCode();
            result = 31 * result + extraField;
            return result;
        }
    }
}
</PRE>
</div>
  </div>
</body>
</html>
