
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Tokens: 18, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>jedis-MDEwOlJlcG9zaXRvcnk3MTU2MDU=-flat-SearchQuickstartExample.java</h3>
            <pre><code>1  package io.redis.examples;
2  import java.math.BigDecimal;
3  import java.util.*;
4  import redis.clients.jedis.*;
5  import redis.clients.jedis.exceptions.*;
6  import redis.clients.jedis.search.*;
7  import redis.clients.jedis.search.aggr.*;
8  import redis.clients.jedis.search.schemafields.*;
9  import org.junit.Test;
10  import static org.junit.Assert.assertEquals;
11  class Bicycle {
12      public String brand;
13      public String model;
14      public BigDecimal price;
15      public String description;
16      public String condition;
17      public Bicycle(String brand, String model, BigDecimal price, String description, String condition) {
18          this.brand = brand;
19          this.model = model;
20          this.price = price;
21          this.description = description;
22          this.condition = condition;
23      }
24  }
25  public class SearchQuickstartExample {
26      @Test
27      public void run() {
28          UnifiedJedis jedis = new UnifiedJedis("redis:&bsol;&bsol;localhost:6379");
29          try {
30              jedis.ftDropIndex("idx:bicycle");
31          } catch (JedisDataException e) {
32          }
33          Bicycle bike1 = new Bicycle(
34                  "Diaz Ltd",
35                  "Dealer Sl",
36                  new BigDecimal(7315.58),
37                  "The Diaz Ltd Dealer Sl is a reliable choice" +
38                          " for urban cycling. The Diaz Ltd Dealer Sl " +
39                          "is a comfortable choice for urban cycling.",
40                  "used"
41          );
42          Bicycle[] bicycles = {
43                  bike1,
44                  new Bicycle(
45                          "Bridges Group",
46                          "Project Pro",
47                          new BigDecimal(3610.82),
48                          "This mountain bike is perfect for mountain biking. The Bridges" +
49                                  " Group Project Pro is a responsive choice for mountain biking.",
50                          "used"
51                  ),
52                  new Bicycle(
53                          "Vega, Cole and Miller",
54                          "Group Advanced",
55                          new BigDecimal(8961.42),
56                          "The Vega, Cole and Miller Group Advanced provides a excellent" +
57                                  " ride. With its fast carbon frame and 24 gears, this bicycle is" +
58                                  " perfect for any terrain.",
59                          "used"
60                  ),
61                  new Bicycle(
62                          "Powell-Montgomery",
63                          "Angle Race",
64                          new BigDecimal(4050.27),
65                          "The Powell-Montgomery Angle Race is a smooth choice for road" +
66                                  " cycling. The Powell-Montgomery Angle Race provides a durable" +
67                                  " ride.",
68                          "used"
69                  ),
70                  new Bicycle(
71                          "Gill-Lewis",
72                          "Action Evo",
73                          new BigDecimal(283.68),
74                          "The Gill-Lewis Action Evo provides a smooth ride. The Gill-Lewis" +
75                                  " Action Evo provides a excellent ride.",
76                          "used"
77                  ),
78                  new Bicycle(
79                          "Rodriguez-Guerrero",
80                          "Drama Comp",
81                          new BigDecimal(4462.55),
82                          "This kids bike is perfect for young riders. With its excellent" +
83                                  " aluminum frame and 12 gears, this bicycle is perfect for any" +
84                                  " terrain.",
85                          "new"
86                  ),
87                  new Bicycle(
88                          "Moore PLC",
89                          "Award Race",
90                          new BigDecimal(3790.76),
91                          "This olive folding bike features a carbon frame and 27.5 inch" +
92                                  " wheels. This folding bike is perfect for compact storage and" +
93                                  " transportation.",
94                          "new"
95                  ),
96                  new Bicycle(
97                          "Hall, Haley and Hayes",
98                          "Weekend Plus",
99                          new BigDecimal(2008.4),
100                          "The Hall, Haley and Hayes Weekend Plus provides a comfortable" +
101                                  " ride. This blue kids bike features a steel frame and 29.0 inch" +
102                                  " wheels.",
103                          "new"
104                  ),
105                  new Bicycle(
106                          "Peck-Carson",
107                          "Sun Hybrid",
108                          new BigDecimal(9874.95),
109                          "With its comfortable aluminum frame and 25 gears, this bicycle is" +
110                                  " perfect for any terrain. The Peck-Carson Sun Hybrid provides a" +
111                                  " comfortable ride.",
<span onclick='openModal()' class='match'>112                          "new"
113                  ),
114                  new Bicycle(
115                          "Fowler Ltd",
116                          "Weekend Trail",
117                          new BigDecimal(3833.71),
118                          "The Fowler Ltd Letter Trail is a comfortable choice for" +
119                                  " transporting cargo. This cargo bike is perfect for transporting" +
</span>120                                  " cargo.",
121                          "refurbished"
122                  )
123          };
124          SchemaField[] schema = {
125                  TextField.of("$.brand").as("brand"),
126                  TextField.of("$.model").as("model"),
127                  TextField.of("$.description").as("description"),
128                  NumericField.of("$.price").as("price"),
129                  TagField.of("$.condition").as("condition")
130          };
131          jedis.ftCreate("idx:bicycle",
132                  FTCreateParams.createParams()
133                          .on(IndexDataType.JSON)
134                          .addPrefix("bicycle:"),
135                  schema
136          );
137          for (int i = 0; i < bicycles.length; i++) {
138              jedis.jsonSetWithEscape(String.format("bicycle:%d", i), bicycles[i]);
139          }
140          Query query = new Query("folding @price:[1000 4000]");
141          List<Document> result = jedis.ftSearch("idx:bicycle", query).getDocuments();
142          System.out.println(result);
143          assertEquals("Validate folding bike id", "bicycle:6", result.get(0).getId());
144          Query cargo_query = new Query("cargo").returnFields("price");
145          List<Document> cargo_result = jedis.ftSearch(
146                  "idx:bicycle", cargo_query).getDocuments();
147          System.out.println(cargo_result);
148          assertEquals("Validate cargo bike id", "bicycle:9", cargo_result.get(0).getId());
149          AggregationBuilder ab = new AggregationBuilder("*")
150                  .groupBy("@condition", Reducers.count().as("count"));
151          AggregationResult ar = jedis.ftAggregate("idx:bicycle", ab);
152          for (int i = 0; i < ar.getTotalResults(); i++) {
153              System.out.println(
154                      ar.getRow(i).getString("condition")
155                              + " - "
156                              + ar.getRow(i).getString("count"));
157          }
158          assertEquals("Validate aggregation results", 3, ar.getTotalResults());
159      }
160  }
</code></pre>
        </div>
        <div class="column">
            <h3>jedis-MDEwOlJlcG9zaXRvcnk3MTU2MDU=-flat-SearchQuickstartExample.java</h3>
            <pre><code>1  package io.redis.examples;
2  import java.math.BigDecimal;
3  import java.util.*;
4  import redis.clients.jedis.*;
5  import redis.clients.jedis.exceptions.*;
6  import redis.clients.jedis.search.*;
7  import redis.clients.jedis.search.aggr.*;
8  import redis.clients.jedis.search.schemafields.*;
9  import org.junit.Test;
10  import static org.junit.Assert.assertEquals;
11  class Bicycle {
12      public String brand;
13      public String model;
14      public BigDecimal price;
15      public String description;
16      public String condition;
17      public Bicycle(String brand, String model, BigDecimal price, String description, String condition) {
18          this.brand = brand;
19          this.model = model;
20          this.price = price;
21          this.description = description;
22          this.condition = condition;
23      }
24  }
25  public class SearchQuickstartExample {
26      @Test
27      public void run() {
28          UnifiedJedis jedis = new UnifiedJedis("redis:&bsol;&bsol;localhost:6379");
29          try {
30              jedis.ftDropIndex("idx:bicycle");
31          } catch (JedisDataException e) {
32          }
33          Bicycle bike1 = new Bicycle(
34                  "Diaz Ltd",
35                  "Dealer Sl",
36                  new BigDecimal(7315.58),
37                  "The Diaz Ltd Dealer Sl is a reliable choice" +
38                          " for urban cycling. The Diaz Ltd Dealer Sl " +
39                          "is a comfortable choice for urban cycling.",
40                  "used"
41          );
42          Bicycle[] bicycles = {
43                  bike1,
44                  new Bicycle(
45                          "Bridges Group",
46                          "Project Pro",
47                          new BigDecimal(3610.82),
48                          "This mountain bike is perfect for mountain biking. The Bridges" +
49                                  " Group Project Pro is a responsive choice for mountain biking.",
50                          "used"
51                  ),
52                  new Bicycle(
53                          "Vega, Cole and Miller",
54                          "Group Advanced",
55                          new BigDecimal(8961.42),
56                          "The Vega, Cole and Miller Group Advanced provides a excellent" +
57                                  " ride. With its fast carbon frame and 24 gears, this bicycle is" +
58                                  " perfect for any terrain.",
59                          "used"
60                  ),
61                  new Bicycle(
62                          "Powell-Montgomery",
63                          "Angle Race",
64                          new BigDecimal(4050.27),
65                          "The Powell-Montgomery Angle Race is a smooth choice for road" +
66                                  " cycling. The Powell-Montgomery Angle Race provides a durable" +
67                                  " ride.",
68                          "used"
69                  ),
70                  new Bicycle(
71                          "Gill-Lewis",
72                          "Action Evo",
73                          new BigDecimal(283.68),
74                          "The Gill-Lewis Action Evo provides a smooth ride. The Gill-Lewis" +
75                                  " Action Evo provides a excellent ride.",
76                          "used"
77                  ),
78                  new Bicycle(
79                          "Rodriguez-Guerrero",
80                          "Drama Comp",
81                          new BigDecimal(4462.55),
82                          "This kids bike is perfect for young riders. With its excellent" +
83                                  " aluminum frame and 12 gears, this bicycle is perfect for any" +
84                                  " terrain.",
85                          "new"
86                  ),
87                  new Bicycle(
88                          "Moore PLC",
89                          "Award Race",
90                          new BigDecimal(3790.76),
91                          "This olive folding bike features a carbon frame and 27.5 inch" +
92                                  " wheels. This folding bike is perfect for compact storage and" +
93                                  " transportation.",
<span onclick='openModal()' class='match'>94                          "new"
95                  ),
96                  new Bicycle(
97                          "Hall, Haley and Hayes",
98                          "Weekend Plus",
99                          new BigDecimal(2008.4),
100                          "The Hall, Haley and Hayes Weekend Plus provides a comfortable" +
101                                  " ride. This blue kids bike features a steel frame and 29.0 inch" +
</span>102                                  " wheels.",
103                          "new"
104                  ),
105                  new Bicycle(
106                          "Peck-Carson",
107                          "Sun Hybrid",
108                          new BigDecimal(9874.95),
109                          "With its comfortable aluminum frame and 25 gears, this bicycle is" +
110                                  " perfect for any terrain. The Peck-Carson Sun Hybrid provides a" +
111                                  " comfortable ride.",
112                          "new"
113                  ),
114                  new Bicycle(
115                          "Fowler Ltd",
116                          "Weekend Trail",
117                          new BigDecimal(3833.71),
118                          "The Fowler Ltd Letter Trail is a comfortable choice for" +
119                                  " transporting cargo. This cargo bike is perfect for transporting" +
120                                  " cargo.",
121                          "refurbished"
122                  )
123          };
124          SchemaField[] schema = {
125                  TextField.of("$.brand").as("brand"),
126                  TextField.of("$.model").as("model"),
127                  TextField.of("$.description").as("description"),
128                  NumericField.of("$.price").as("price"),
129                  TagField.of("$.condition").as("condition")
130          };
131          jedis.ftCreate("idx:bicycle",
132                  FTCreateParams.createParams()
133                          .on(IndexDataType.JSON)
134                          .addPrefix("bicycle:"),
135                  schema
136          );
137          for (int i = 0; i < bicycles.length; i++) {
138              jedis.jsonSetWithEscape(String.format("bicycle:%d", i), bicycles[i]);
139          }
140          Query query = new Query("folding @price:[1000 4000]");
141          List<Document> result = jedis.ftSearch("idx:bicycle", query).getDocuments();
142          System.out.println(result);
143          assertEquals("Validate folding bike id", "bicycle:6", result.get(0).getId());
144          Query cargo_query = new Query("cargo").returnFields("price");
145          List<Document> cargo_result = jedis.ftSearch(
146                  "idx:bicycle", cargo_query).getDocuments();
147          System.out.println(cargo_result);
148          assertEquals("Validate cargo bike id", "bicycle:9", cargo_result.get(0).getId());
149          AggregationBuilder ab = new AggregationBuilder("*")
150                  .groupBy("@condition", Reducers.count().as("count"));
151          AggregationResult ar = jedis.ftAggregate("idx:bicycle", ab);
152          for (int i = 0; i < ar.getTotalResults(); i++) {
153              System.out.println(
154                      ar.getRow(i).getString("condition")
155                              + " - "
156                              + ar.getRow(i).getString("count"));
157          }
158          assertEquals("Validate aggregation results", 3, ar.getTotalResults());
159      }
160  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from jedis-MDEwOlJlcG9zaXRvcnk3MTU2MDU=-flat-SearchQuickstartExample.java</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from jedis-MDEwOlJlcG9zaXRvcnk3MTU2MDU=-flat-SearchQuickstartExample.java</div>
                </div>
                <div class="column column_space"><pre><code>112                          "new"
113                  ),
114                  new Bicycle(
115                          "Fowler Ltd",
116                          "Weekend Trail",
117                          new BigDecimal(3833.71),
118                          "The Fowler Ltd Letter Trail is a comfortable choice for" +
119                                  " transporting cargo. This cargo bike is perfect for transporting" +
</pre></code></div>
                <div class="column column_space"><pre><code>94                          "new"
95                  ),
96                  new Bicycle(
97                          "Hall, Haley and Hayes",
98                          "Weekend Plus",
99                          new BigDecimal(2008.4),
100                          "The Hall, Haley and Hayes Weekend Plus provides a comfortable" +
101                                  " ride. This blue kids bike features a steel frame and 29.0 inch" +
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    