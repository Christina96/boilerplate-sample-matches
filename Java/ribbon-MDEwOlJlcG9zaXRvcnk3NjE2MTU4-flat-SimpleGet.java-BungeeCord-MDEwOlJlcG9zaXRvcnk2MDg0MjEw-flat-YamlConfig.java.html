
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Tokens: 14, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>ribbon-MDEwOlJlcG9zaXRvcnk3NjE2MTU4-flat-SimpleGet.java</h3>
            <pre><code>1  package com.netflix.ribbon.examples.netty.http;
2  import com.netflix.ribbon.transport.netty.RibbonTransport;
3  import com.netflix.ribbon.transport.netty.http.LoadBalancingHttpClient;
4  import io.netty.buffer.ByteBuf;
5  import io.reactivex.netty.protocol.http.client.HttpClientRequest;
6  import io.reactivex.netty.protocol.http.client.HttpClientResponse;
7  import rx.functions.Action1;
8  import java.nio.charset.Charset;
9  import java.util.concurrent.CountDownLatch;
10  import java.util.concurrent.TimeUnit;
11  public class SimpleGet {
12      @edu.umd.cs.findbugs.annotations.SuppressWarnings
13      public static void main(String[] args) throws Exception {
<span onclick='openModal()' class='match'>14          LoadBalancingHttpClient<ByteBuf, ByteBuf> client = RibbonTransport.newHttpClient();
15          HttpClientRequest<ByteBuf> request = HttpClientRequest.createGet("http:&bsol;&bsol;www.google.com/");
</span>16          final CountDownLatch latch = new CountDownLatch(1);
17          client.submit(request)
18              .toBlocking()
19              .forEach(new Action1<HttpClientResponse<ByteBuf>>() {
20                  @Override
21                  public void call(HttpClientResponse<ByteBuf> t1) {
22                      System.out.println("Status code: " + t1.getStatus());
23                      t1.getContent().subscribe(new Action1<ByteBuf>() {
24                          @Override
25                          public void call(ByteBuf content) {
26                              System.out.println("Response content: " + content.toString(Charset.defaultCharset()));
27                              latch.countDown();
28                          }
29                      });
30                  }
31              });
32          latch.await(2, TimeUnit.SECONDS);
33      }
34  }
</code></pre>
        </div>
        <div class="column">
            <h3>BungeeCord-MDEwOlJlcG9zaXRvcnk2MDg0MjEw-flat-YamlConfig.java</h3>
            <pre><code>1  package net.md_5.bungee.conf;
2  import com.google.common.base.Charsets;
3  import edu.umd.cs.findbugs.annotations.SuppressFBWarnings;
4  import java.io.File;
5  import java.io.FileInputStream;
6  import java.io.FileOutputStream;
7  import java.io.IOException;
8  import java.io.InputStream;
9  import java.io.OutputStreamWriter;
10  import java.io.Writer;
11  import java.net.SocketAddress;
12  import java.util.ArrayList;
13  import java.util.Arrays;
14  import java.util.Collection;
15  import java.util.Collections;
16  import java.util.HashMap;
17  import java.util.HashSet;
18  import java.util.LinkedHashMap;
19  import java.util.List;
20  import java.util.Locale;
21  import java.util.Map;
22  import java.util.logging.Level;
23  import lombok.RequiredArgsConstructor;
24  import net.md_5.bungee.Util;
25  import net.md_5.bungee.api.ChatColor;
26  import net.md_5.bungee.api.ProxyServer;
27  import net.md_5.bungee.api.config.ConfigurationAdapter;
28  import net.md_5.bungee.api.config.ListenerInfo;
29  import net.md_5.bungee.api.config.ServerInfo;
30  import net.md_5.bungee.util.CaseInsensitiveMap;
31  import org.yaml.snakeyaml.DumperOptions;
32  import org.yaml.snakeyaml.Yaml;
33  import org.yaml.snakeyaml.error.YAMLException;
34  public class YamlConfig implements ConfigurationAdapter
35  {
36      @RequiredArgsConstructor
37      private enum DefaultTabList
38      {
39          GLOBAL(), GLOBAL_PING(), SERVER();
40      }
41      private final Yaml yaml;
42      private Map<String, Object> config;
43      private final File file = new File( "config.yml" );
44      public YamlConfig()
45      {
46          DumperOptions options = new DumperOptions();
47          options.setDefaultFlowStyle( DumperOptions.FlowStyle.BLOCK );
48          yaml = new Yaml( options );
49      }
50      @Override
51      public void load()
52      {
53          try
54          {
55              file.createNewFile();
56              try ( InputStream is = new FileInputStream( file ) )
57              {
58                  try
59                  {
60                      config = (Map) yaml.load( is );
61                  } catch ( YAMLException ex )
62                  {
63                      throw new RuntimeException( "Invalid configuration encountered - this is a configuration error and NOT a bug! Please attempt to fix the error or see https:&bsol;&bsol;www.spigotmc.org/ for help.", ex );
64                  }
65              }
66              if ( config == null )
67              {
68                  config = new CaseInsensitiveMap<>();
69              } else
70              {
71                  config = new CaseInsensitiveMap<>( config );
72              }
73          } catch ( IOException ex )
74          {
75              throw new RuntimeException( "Could not load configuration!", ex );
76          }
77          Map<String, Object> permissions = get( "permissions", null );
78          if ( permissions == null )
79          {
80              set( "permissions.default", Arrays.asList( new String[]
81              {
82                  "bungeecord.command.server", "bungeecord.command.list"
83              } ) );
84              set( "permissions.admin", Arrays.asList( new String[]
85              {
86                  "bungeecord.command.alert", "bungeecord.command.end", "bungeecord.command.ip", "bungeecord.command.reload", "bungeecord.command.kick"
87              } ) );
88          }
89          Map<String, Object> groups = get( "groups", null );
90          if ( groups == null )
91          {
92              set( "groups.md_5", Collections.singletonList( "admin" ) );
93          }
94      }
95      private <T> T get(String path, T def)
96      {
97          return get( path, def, config );
98      }
99      @SuppressWarnings("unchecked")
100      private <T> T get(String path, T def, Map submap)
101      {
102          int index = path.indexOf( '.' );
103          if ( index == -1 )
104          {
105              Object val = submap.get( path );
106              if ( val == null && def != null )
107              {
108                  val = def;
109                  submap.put( path, def );
110                  save();
111              }
112              return (T) val;
113          } else
114          {
115              String first = path.substring( 0, index );
116              String second = path.substring( index + 1, path.length() );
117              Map sub = (Map) submap.get( first );
118              if ( sub == null )
119              {
120                  sub = new LinkedHashMap();
121                  submap.put( first, sub );
122              }
123              return get( second, def, sub );
124          }
125      }
126      private void set(String path, Object val)
127      {
128          set( path, val, config );
129      }
130      @SuppressWarnings("unchecked")
131      private void set(String path, Object val, Map submap)
132      {
133          int index = path.indexOf( '.' );
134          if ( index == -1 )
135          {
136              if ( val == null )
137              {
138                  submap.remove( path );
139              } else
140              {
141                  submap.put( path, val );
142              }
143              save();
144          } else
145          {
146              String first = path.substring( 0, index );
147              String second = path.substring( index + 1, path.length() );
148              Map sub = (Map) submap.get( first );
149              if ( sub == null )
150              {
151                  sub = new LinkedHashMap();
152                  submap.put( first, sub );
153              }
154              set( second, val, sub );
155          }
156      }
157      private void save()
158      {
159          try
160          {
161              try ( Writer wr = new OutputStreamWriter( new FileOutputStream( file ), Charsets.UTF_8 ) )
162              {
163                  yaml.dump( config, wr );
164              }
165          } catch ( IOException ex )
166          {
167              ProxyServer.getInstance().getLogger().log( Level.WARNING, "Could not save config", ex );
168          }
169      }
170      @Override
171      public int getInt(String path, int def)
172      {
173          return get( path, def );
174      }
175      @Override
176      public String getString(String path, String def)
177      {
178          return get( path, def );
179      }
180      @Override
181      public boolean getBoolean(String path, boolean def)
182      {
183          return get( path, def );
184      }
185      @Override
186      @SuppressWarnings("unchecked")
187      public Map<String, ServerInfo> getServers()
188      {
189          Map<String, Map<String, Object>> base = get( "servers", (Map) Collections.singletonMap( "lobby", new HashMap<>() ) );
190          Map<String, ServerInfo> ret = new HashMap<>();
191          for ( Map.Entry<String, Map<String, Object>> entry : base.entrySet() )
192          {
<span onclick='openModal()' class='match'>193              Map<String, Object> val = entry.getValue();
194              String name = entry.getKey();
</span>195              String addr = get( "address", "localhost:25565", val );
196              String motd = ChatColor.translateAlternateColorCodes( '&', get( "motd", "&1Just another BungeeCord - Forced Host", val ) );
197              boolean restricted = get( "restricted", false, val );
198              SocketAddress address = Util.getAddr( addr );
199              ServerInfo info = ProxyServer.getInstance().constructServerInfo( name, address, motd, restricted );
200              ret.put( name, info );
201          }
202          return ret;
203      }
204      @Override
205      @SuppressWarnings("unchecked")
206      @SuppressFBWarnings("RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE")
207      public Collection<ListenerInfo> getListeners()
208      {
209          Collection<Map<String, Object>> base = get( "listeners", (Collection) Arrays.asList( new Map[]
210          {
211              new HashMap()
212          } ) );
213          Map<String, String> forcedDef = new HashMap<>();
214          forcedDef.put( "pvp.md-5.net", "pvp" );
215          Collection<ListenerInfo> ret = new HashSet<>();
216          for ( Map<String, Object> val : base )
217          {
218              String motd = get( "motd", "&1Another Bungee server", val );
219              motd = ChatColor.translateAlternateColorCodes( '&', motd );
220              int maxPlayers = get( "max_players", 1, val );
221              boolean forceDefault = get( "force_default_server", false, val );
222              String host = get( "host", "0.0.0.0:25577", val );
223              int tabListSize = get( "tab_size", 60, val );
224              SocketAddress address = Util.getAddr( host );
225              Map<String, String> forced = new CaseInsensitiveMap<>( get( "forced_hosts", forcedDef, val ) );
226              String tabListName = get( "tab_list", "GLOBAL_PING", val );
227              DefaultTabList value = DefaultTabList.valueOf( tabListName.toUpperCase( Locale.ROOT ) );
228              if ( value == null )
229              {
230                  value = DefaultTabList.GLOBAL_PING;
231              }
232              boolean setLocalAddress = get( "bind_local_address", true, val );
233              boolean pingPassthrough = get( "ping_passthrough", false, val );
234              boolean query = get( "query_enabled", false, val );
235              int queryPort = get( "query_port", 25577, val );
236              boolean proxyProtocol = get( "proxy_protocol", false, val );
237              List<String> serverPriority = new ArrayList<>( get( "priorities", Collections.EMPTY_LIST, val ) );
238              String defaultServer = get( "default_server", null, val );
239              String fallbackServer = get( "fallback_server", null, val );
240              if ( defaultServer != null )
241              {
242                  serverPriority.add( defaultServer );
243                  set( "default_server", null, val );
244              }
245              if ( fallbackServer != null )
246              {
247                  serverPriority.add( fallbackServer );
248                  set( "fallback_server", null, val );
249              }
250              if ( serverPriority.isEmpty() )
251              {
252                  serverPriority.add( "lobby" );
253              }
254              set( "priorities", serverPriority, val );
255              ListenerInfo info = new ListenerInfo( address, motd, maxPlayers, tabListSize, serverPriority, forceDefault, forced, value.toString(), setLocalAddress, pingPassthrough, queryPort, query, proxyProtocol );
256              ret.add( info );
257          }
258          return ret;
259      }
260      @Override
261      @SuppressWarnings("unchecked")
262      public Collection<String> getGroups(String player)
263      {
264          Map<String, Collection<String>> raw = get( "groups", Collections.emptyMap() );
265          Collection<String> groups = raw.get( player );
266          Collection<String> ret = ( groups == null ) ? new HashSet<String>() : new HashSet<>( groups );
267          ret.add( "default" );
268          return ret;
269      }
270      @Override
271      public Collection<?> getList(String path, Collection<?> def)
272      {
273          return get( path, def );
274      }
275      @Override
276      @SuppressWarnings("unchecked")
277      public Collection<String> getPermissions(String group)
278      {
279          Collection<String> permissions = get( "permissions." + group, null );
280          return ( permissions == null ) ? Collections.EMPTY_SET : permissions;
281      }
282  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from ribbon-MDEwOlJlcG9zaXRvcnk3NjE2MTU4-flat-SimpleGet.java</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from BungeeCord-MDEwOlJlcG9zaXRvcnk2MDg0MjEw-flat-YamlConfig.java</div>
                </div>
                <div class="column column_space"><pre><code>14          LoadBalancingHttpClient<ByteBuf, ByteBuf> client = RibbonTransport.newHttpClient();
15          HttpClientRequest<ByteBuf> request = HttpClientRequest.createGet("http:&bsol;&bsol;www.google.com/");
</pre></code></div>
                <div class="column column_space"><pre><code>193              Map<String, Object> val = entry.getValue();
194              String name = entry.getKey();
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    