
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 8.152173913043478%, Tokens: 15</h2>
        <div class="column">
            <h3>motan-MDEwOlJlcG9zaXRvcnk1NjY3OTUyMQ==-flat-ClientStatistics.java</h3>
            <pre><code>1  package com.weibo.motan.benchmark;
2  import java.text.MessageFormat;
3  import java.util.List;
4  public class ClientStatistics {
5      public int statisticTime;
6      public long above0sum;      
7      public long above1sum;      
8      public long above5sum;      
9      public long above10sum;     
10      public long above50sum;     
11      public long above100sum;    
12      public long above500sum;    
13      public long above1000sum;   
14      public long maxTPS = 0;
15      public long minTPS = 0;
16      public long succTPS = 0;
17      public long succRT = 0;
18      public long errTPS = 0;
19      public long errRT = 0;
20      public long allTPS = 0;
21      public long allRT = 0;
22      public List<RunnableStatistics> statistics;
23      public ClientStatistics(List<RunnableStatistics> statistics) {
24          this.statistics = statistics;
25          statisticTime = statistics.get(0).statisticTime;
26      }
27      public void collectStatistics() {
28          for (RunnableStatistics statistic : statistics) {
29              above0sum += statistic.above0sum;
30              above1sum += statistic.above1sum;
31              above5sum += statistic.above5sum;
32              above10sum += statistic.above10sum;
33              above50sum += statistic.above50sum;
34              above100sum += statistic.above100sum;
35              above500sum += statistic.above500sum;
36              above1000sum += statistic.above1000sum;
37          }
38          for(int i=0; i < statistics.get(0).statisticTime;i++) {
39              long runnableTPS = 0;
40              for (RunnableStatistics statistic : statistics) {
41                  runnableTPS += (statistic.TPS[i]+statistic.errTPS[i]);
42                  succTPS += statistic.TPS[i];
43                  succRT += statistic.RT[i];
44                  errTPS += statistic.errTPS[i];
45                  errRT += statistic.errRT[i];
46              }
47              if (runnableTPS > maxTPS) {
48                  maxTPS = runnableTPS;
49              }
50              if (runnableTPS < minTPS || minTPS == 0) {
51                  minTPS = runnableTPS;
52              }
53          }
54          allTPS = succTPS + errTPS;
55          allRT = succRT + errRT;
56      }
57      public void printStatistics() {
<span onclick='openModal()' class='match'>58          System.out.println("Benchmark Run Time: " + statisticTime);
59          System.out.println(MessageFormat.format("Requests: {0}, Success: {1}%({2}), Error: {3}%({4})", allTPS, succTPS * 100 / allTPS, succTPS, errTPS * 100 / allTPS, errTPS));
60          System.out.println(MessageFormat.format("Avg TPS: {0}, Max TPS: {1}, Min TPS: {2}", (allTPS / statisticTime), maxTPS, minTPS));
61          System.out.println(MessageFormat.format("Avg ResponseTime: {0}ms", allRT / allTPS / 1000f));
62          System.out.println(MessageFormat.format("RT [0,1]: {0}% {1}/{2}", above0sum * 100 / allTPS, above0sum, allTPS));
63          System.out.println(MessageFormat.format("RT (1,5]: {0}% {1}/{2}", above1sum * 100 / allTPS, above1sum, allTPS));
64          System.out.println(MessageFormat.format("RT (5,10]: {0}% {1}/{2}", above5sum * 100 / allTPS, above5sum, allTPS));
65          System.out.println(MessageFormat.format("RT (10,50]: {0}% {1}/{2}", above10sum * 100 / allTPS, above10sum, allTPS));
</span>66          System.out.println(MessageFormat.format("RT (50,100]: {0}% {1}/{2}", above50sum * 100 / allTPS, above50sum, allTPS));
67          System.out.println(MessageFormat.format("RT (100,500]: {0}% {1}/{2}", above100sum * 100 / allTPS, above100sum, allTPS));
68          System.out.println(MessageFormat.format("RT (500,1000]: {0}% {1}/{2}", above500sum * 100 / allTPS, above500sum, allTPS));
69          System.out.println(MessageFormat.format("RT >1000: {0}% {1}/{2}", above1000sum * 100 / allTPS, above1000sum, allTPS));
70      }
71  }
</code></pre>
        </div>
        <div class="column">
            <h3>Essentials-MDEwOlJlcG9zaXRvcnkxNzczNzU0-flat-Commandrecipe.java</h3>
            <pre><code>1  package com.earth2me.essentials.commands;
2  import com.earth2me.essentials.CommandSource;
3  import static com.earth2me.essentials.I18n.tl;
4  import com.earth2me.essentials.User;
5  import com.earth2me.essentials.utils.NumberUtil;
6  import java.util.HashMap;
7  import java.util.List;
8  import java.util.Locale;
9  import java.util.Map;
10  import org.bukkit.Material;
11  import org.bukkit.Server;
12  import org.bukkit.inventory.*;
13  public class Commandrecipe extends EssentialsCommand
14  {
15  	public Commandrecipe()
16  	{
17  		super("recipe");
18  	}
19  	@Override
20  	public void run(final Server server, final CommandSource sender, final String commandLabel, final String[] args) throws Exception
21  	{
22  		if (args.length < 1)
23  		{
24  			throw new NotEnoughArgumentsException();
25  		}
26  		final ItemStack itemType = ess.getItemDb().get(args[0]);
27  		int recipeNo = 0;
28  		if (args.length > 1)
29  		{
30  			if (NumberUtil.isInt(args[1]))
31  			{
32  				recipeNo = Integer.parseInt(args[1]) - 1;
33  			}
34  			else
35  			{
36  				throw new Exception(tl("invalidNumber"));
37  			}
38  		}
39  		final List<Recipe> recipesOfType = ess.getServer().getRecipesFor(itemType);
40  		if (recipesOfType.size() < 1)
41  		{
42  			throw new Exception(tl("recipeNone", getMaterialName(itemType)));
43  		}
44  		if (recipeNo < 0 || recipeNo >= recipesOfType.size())
45  		{
46  			throw new Exception(tl("recipeBadIndex"));
47  		}
48  		final Recipe selectedRecipe = recipesOfType.get(recipeNo);
49  		sender.sendMessage(tl("recipe", getMaterialName(itemType), recipeNo + 1, recipesOfType.size()));
50  		if (selectedRecipe instanceof FurnaceRecipe)
51  		{
52  			furnaceRecipe(sender, (FurnaceRecipe)selectedRecipe);
53  		}
54  		else if (selectedRecipe instanceof ShapedRecipe)
55  		{
56  			shapedRecipe(sender, (ShapedRecipe)selectedRecipe, sender.isPlayer());
57  		}
58  		else if (selectedRecipe instanceof ShapelessRecipe)
59  		{
60  			if (recipesOfType.size() == 1 && itemType.getType() == Material.FIREWORK)
61  			{
62  				ShapelessRecipe shapelessRecipe = new ShapelessRecipe(itemType);
63  				shapelessRecipe.addIngredient(Material.SULPHUR);
64  				shapelessRecipe.addIngredient(Material.PAPER);
65  				shapelessRecipe.addIngredient(Material.FIREWORK_CHARGE);
66  				shapelessRecipe(sender, shapelessRecipe, sender.isPlayer());
67  			}
68  			else
69  			{
70  				shapelessRecipe(sender, (ShapelessRecipe)selectedRecipe, sender.isPlayer());
71  			}
72  		}
73  		if (recipesOfType.size() > 1 && args.length == 1)
74  		{
75  			sender.sendMessage(tl("recipeMore", commandLabel, args[0], getMaterialName(itemType)));
76  		}
77  	}
78  	public void furnaceRecipe(final CommandSource sender, final FurnaceRecipe recipe)
79  	{
80  		sender.sendMessage(tl("recipeFurnace", getMaterialName(recipe.getInput())));
81  	}
82  	public void shapedRecipe(final CommandSource sender, final ShapedRecipe recipe, final boolean showWindow)
83  	{
84  		final Map<Character, ItemStack> recipeMap = recipe.getIngredientMap();
85  		if (showWindow)
86  		{
87  			final User user = ess.getUser(sender.getPlayer());
88  			user.getBase().closeInventory();
89  			user.setRecipeSee(true);
90  			final InventoryView view = user.getBase().openWorkbench(null, true);
91  			final String[] recipeShape = recipe.getShape();
92  			final Map<Character, ItemStack> ingredientMap = recipe.getIngredientMap();
93  			for (int j = 0; j < recipeShape.length; j++)
94  			{
95  				for (int k = 0; k < recipeShape[j].length(); k++)
96  				{
97  					final ItemStack item = ingredientMap.get(recipeShape[j].toCharArray()[k]);
98  					if (item == null)
99  					{
100  						continue;
101  					}
102  					item.setAmount(0);
103  					view.getTopInventory().setItem(j * 3 + k + 1, item);
104  				}
105  			}
106  		}
107  		else
108  		{
109  			final HashMap<Material, String> colorMap = new HashMap<Material, String>();
110  			int i = 1;
111  			for (Character c : "abcdefghi".toCharArray())
112  			{
113  				ItemStack item = recipeMap.get(c);
114  				if (!colorMap.containsKey(item == null ? null : item.getType()))
115  				{
116  					colorMap.put(item == null ? null : item.getType(), String.valueOf(i++));
117  				}
118  			}
119  			final Material[][] materials = new Material[3][3];
120  			for (int j = 0; j < recipe.getShape().length; j++)
121  			{
122  				for (int k = 0; k < recipe.getShape()[j].length(); k++)
123  				{
124  					ItemStack item = recipe.getIngredientMap().get(recipe.getShape()[j].toCharArray()[k]);
125  					materials[j][k] = item == null ? null : item.getType();
126  				}
127  			}
<span onclick='openModal()' class='match'>128  			sender.sendMessage(tl("recipeGrid", colorMap.get(materials[0][0]), colorMap.get(materials[0][1]), colorMap.get(materials[0][2])));
129  			sender.sendMessage(tl("recipeGrid", colorMap.get(materials[1][0]), colorMap.get(materials[1][1]), colorMap.get(materials[1][2])));
130  			sender.sendMessage(tl("recipeGrid", colorMap.get(materials[2][0]), colorMap.get(materials[2][1]), colorMap.get(materials[2][2])));
</span>131  			StringBuilder s = new StringBuilder();
132  			for (Material items : colorMap.keySet().toArray(new Material[colorMap.size()]))
133  			{
134  				s.append(tl("recipeGridItem", colorMap.get(items), getMaterialName(items)));
135  			}
136  			sender.sendMessage(tl("recipeWhere", s.toString()));
137  		}
138  	}
139  	public void shapelessRecipe(final CommandSource sender, final ShapelessRecipe recipe, final boolean showWindow)
140  	{
141  		final List<ItemStack> ingredients = recipe.getIngredientList();
142  		if (showWindow)
143  		{
144  			final User user = ess.getUser(sender.getPlayer());
145  			user.setRecipeSee(true);
146  			final InventoryView view = user.getBase().openWorkbench(null, true);
147  			for (int i = 0; i < ingredients.size(); i++)
148  			{
149  				view.setItem(i + 1, ingredients.get(i));
150  			}
151  		}
152  		else
153  		{
154  			StringBuilder s = new StringBuilder();
155  			for (int i = 0; i < ingredients.size(); i++)
156  			{
157  				s.append(getMaterialName(ingredients.get(i)));
158  				if (i != ingredients.size() - 1)
159  				{
160  					s.append(",");
161  				}
162  				s.append(" ");
163  			}
164  			sender.sendMessage(tl("recipeShapeless", s.toString()));
165  		}
166  	}
167  	public String getMaterialName(final ItemStack stack)
168  	{
169  		if (stack == null)
170  		{
171  			return tl("recipeNothing");
172  		}
173  		return getMaterialName(stack.getType());
174  	}
175  	public String getMaterialName(final Material type)
176  	{
177  		if (type == null)
178  		{
179  			return tl("recipeNothing");
180  		}
181  		return type.toString().replace("_", " ").toLowerCase(Locale.ENGLISH);
182  	}
183  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from motan-MDEwOlJlcG9zaXRvcnk1NjY3OTUyMQ==-flat-ClientStatistics.java</div>
                <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from Essentials-MDEwOlJlcG9zaXRvcnkxNzczNzU0-flat-Commandrecipe.java</div>
                <div class="column column_space"><pre><code>58          System.out.println("Benchmark Run Time: " + statisticTime);
59          System.out.println(MessageFormat.format("Requests: {0}, Success: {1}%({2}), Error: {3}%({4})", allTPS, succTPS * 100 / allTPS, succTPS, errTPS * 100 / allTPS, errTPS));
60          System.out.println(MessageFormat.format("Avg TPS: {0}, Max TPS: {1}, Min TPS: {2}", (allTPS / statisticTime), maxTPS, minTPS));
61          System.out.println(MessageFormat.format("Avg ResponseTime: {0}ms", allRT / allTPS / 1000f));
62          System.out.println(MessageFormat.format("RT [0,1]: {0}% {1}/{2}", above0sum * 100 / allTPS, above0sum, allTPS));
63          System.out.println(MessageFormat.format("RT (1,5]: {0}% {1}/{2}", above1sum * 100 / allTPS, above1sum, allTPS));
64          System.out.println(MessageFormat.format("RT (5,10]: {0}% {1}/{2}", above5sum * 100 / allTPS, above5sum, allTPS));
65          System.out.println(MessageFormat.format("RT (10,50]: {0}% {1}/{2}", above10sum * 100 / allTPS, above10sum, allTPS));
</pre></code></div>
                <div class="column column_space"><pre><code>128  			sender.sendMessage(tl("recipeGrid", colorMap.get(materials[0][0]), colorMap.get(materials[0][1]), colorMap.get(materials[0][2])));
129  			sender.sendMessage(tl("recipeGrid", colorMap.get(materials[1][0]), colorMap.get(materials[1][1]), colorMap.get(materials[1][2])));
130  			sender.sendMessage(tl("recipeGrid", colorMap.get(materials[2][0]), colorMap.get(materials[2][1]), colorMap.get(materials[2][2])));
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    