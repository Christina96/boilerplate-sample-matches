<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for CompactLinkedHashMapTest.java &amp; PopulatedCachesTest.java</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for CompactLinkedHashMapTest.java &amp; PopulatedCachesTest.java
      </h3>
<h1 align="center">
        32.7%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>CompactLinkedHashMapTest.java (57.528957%)<th>PopulatedCachesTest.java (22.85276%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(140-152)<td><a href="#" name="0">(315-334)</a><td align="center"><font color="#ff0000">19</font>
<tr onclick='openModal("#f63526")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f63526"><font color="#f63526">-</font><td><a href="#" name="1">(186-194)<td><a href="#" name="1">(68-73)</a><td align="center"><font color="#e40000">17</font>
<tr onclick='openModal("#980517")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#980517"><font color="#980517">-</font><td><a href="#" name="2">(175-183)<td><a href="#" name="2">(148-153)</a><td align="center"><font color="#d60000">16</font>
<tr onclick='openModal("#53858b")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#53858b"><font color="#53858b">-</font><td><a href="#" name="3">(162-169)<td><a href="#" name="3">(130-138)</a><td align="center"><font color="#ae0000">13</font>
<tr onclick='openModal("#6cc417")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#6cc417"><font color="#6cc417">-</font><td><a href="#" name="4">(15-29)<td><a href="#" name="4">(15-29)</a><td align="center"><font color="#ae0000">13</font>
<tr onclick='openModal("#151b8d")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#151b8d"><font color="#151b8d">-</font><td><a href="#" name="5">(196-201)<td><a href="#" name="5">(258-263)</a><td align="center"><font color="#a10000">12</font>
<tr onclick='openModal("#8c8774")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#8c8774"><font color="#8c8774">-</font><td><a href="#" name="6">(154-158)<td><a href="#" name="6">(179-182)</a><td align="center"><font color="#a10000">12</font>
<tr onclick='openModal("#38a4a5")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#38a4a5"><font color="#38a4a5">-</font><td><a href="#" name="7">(170-174)<td><a href="#" name="7">(165-168)</a><td align="center"><font color="#930000">11</font>
<tr onclick='openModal("#c58917")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#c58917"><font color="#c58917">-</font><td><a href="#" name="8">(119-127)<td><a href="#" name="8">(365-370)</a><td align="center"><font color="#780000">9</font>
<tr onclick='openModal("#83a33a")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#83a33a"><font color="#83a33a">-</font><td><a href="#" name="9">(107-114)<td><a href="#" name="9">(229-233)</a><td align="center"><font color="#780000">9</font>
<tr onclick='openModal("#ad5910")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#ad5910"><font color="#ad5910">-</font><td><a href="#" name="10">(97-104)<td><a href="#" name="10">(206-210)</a><td align="center"><font color="#780000">9</font>
<tr onclick='openModal("#b041ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#b041ff"><font color="#b041ff">-</font><td><a href="#" name="11">(88-95)<td><a href="#" name="11">(55-61)</a><td align="center"><font color="#780000">9</font>
</td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>CompactLinkedHashMapTest.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 <font color="#6cc417"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>package com.google.common.collect;
2 import static com.google.common.truth.Truth.assertThat;
3 import com.google.common.collect.testing.MapTestSuiteBuilder;
4 import com.google.common.collect.testing.TestStringMapGenerator;
5 import com.google.common.collect.testing.features.CollectionFeature;
6 import com.google.common.collect.testing.features.CollectionSize;
7 import com.google.common.collect.testing.features.MapFeature;
8 import java.util.List;
9 import java.util.Map;
10 import java.util.Map.Entry;
11 import junit.framework.Test;
12 import junit.framework.TestCase;
13 import</b></font> junit.framework.TestSuite;
14 public class CompactLinkedHashMapTest extends TestCase {
15   public static Test suite() {
16     TestSuite suite = new TestSuite();
17     suite.addTest(
18         MapTestSuiteBuilder.using(
19                 new TestStringMapGenerator() {
20                   @Override
21                   protected Map&lt;String, String&gt; create(Entry&lt;String, String&gt;[] entries) {
22                     Map&lt;String, String&gt; map = CompactLinkedHashMap.create();
23                     for (Entry&lt;String, String&gt; entry : entries) {
24                       map.put(entry.getKey(), entry.getValue());
25                     }
26                     return map;
27                   }
28                 })
29             .named("CompactLinkedHashMap")
30             .withFeatures(
31                 CollectionSize.ANY,
32                 CollectionFeature.SUPPORTS_ITERATOR_REMOVE,
33                 MapFeature.GENERAL_PURPOSE,
34                 MapFeature.ALLOWS_NULL_KEYS,
35                 MapFeature.ALLOWS_NULL_VALUES,
36                 CollectionFeature.SERIALIZABLE,
37                 CollectionFeature.KNOWN_ORDER)
38             .createTestSuite());
39     suite.addTest(
40         MapTestSuiteBuilder.using(
41                 new TestStringMapGenerator() {
42                   @Override
43                   protected Map&lt;String, String&gt; create(Entry&lt;String, String&gt;[] entries) {
44                     CompactLinkedHashMap&lt;String, String&gt; map = CompactLinkedHashMap.create();
45                     map.convertToHashFloodingResistantImplementation();
46                     for (Entry&lt;String, String&gt; entry : entries) {
47                       map.put(entry.getKey(), entry.getValue());
48                     }
49                     return map;
50                   }
51                 })
52             .named("CompactLinkedHashMap with flooding resistance")
53             .withFeatures(
54                 CollectionSize.ANY,
55                 CollectionFeature.SUPPORTS_ITERATOR_REMOVE,
56                 MapFeature.GENERAL_PURPOSE,
57                 MapFeature.ALLOWS_NULL_KEYS,
58                 MapFeature.ALLOWS_NULL_VALUES,
59                 CollectionFeature.SERIALIZABLE,
60                 CollectionFeature.KNOWN_ORDER)
61             .createTestSuite());
62     suite.addTestSuite(CompactLinkedHashMapTest.class);
63 <a name="11"></a>    return suite;
64   }
65   public void testInsertionOrder() <font color="#b041ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>{
66     Map&lt;Integer, String&gt; map = CompactLinkedHashMap.create();
67     map.put(1, "a");
68     map.put(4, "b");
69     map.put(3, "d");
70     map.put(2, "c");
71 <a name="10"></a>    testHasMapEntriesInOrder(map, 1, "a", 4, "b", 3, "d", 2, "c");
72   }</b></font>
73   public void testInsertionOrderAfterPutKeyTwice() <font color="#ad5910"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>{
74     Map&lt;Integer, String&gt; map = CompactLinkedHashMap.create();
75     map.put(1, "a");
76     map.put(4, "b");
77     map.put(3, "d");
78     map.put(2, "c");
79     map.put(1, "e");
80 <a name="9"></a>    testHasMapEntriesInOrder</b></font>(map, 1, "e", 4, "b", 3, "d", 2, "c");
81   }
82   public void testInsertionOrderAfterRemoveFirstEntry() <font color="#83a33a"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>{
83     Map&lt;Integer, String&gt; map = CompactLinkedHashMap.create();
84     map.put(1, "a");
85     map.put(4, "b");
86     map.put(3, "d");
87     map.put(2, "c");
88     map.remove(1);
89     testHasMapEntriesInOrder</b></font>(map, 4, "b", 3, "d", 2, "c");
90   }
91 <a name="8"></a>
92   public void testInsertionOrderAfterRemoveMiddleEntry() {
93     Map&lt;Integer, String&gt; map = CompactLinkedHashMap.create();
94     <font color="#c58917"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>map.put(1, "a");
95     map.put(4, "b");
96     map.put(3, "d");
97     map.put(2, "c");
98     map.remove(4);
99     testHasMapEntriesInOrder(map, 1, "a", 3, "d", 2, "c");
100   }
101   public void testInsertionOrderAfterRem</b></font>oveLastEntry() {
102     Map&lt;Integer, String&gt; map = CompactLinkedHashMap.create();
103     map.put(1, "a");
104     map.put(4, "b");
105     map.put(3, "d");
106     map.put(2, "c");
107     map.remove(2);
108     testHasMapEntriesInOrder(map, 1, "a", 4, "b", 3, "d");
109   }
110 <a name="0"></a>  public void testTrimToSize() {
111     CompactLinkedHashMap&lt;Integer, String&gt; map = CompactLinkedHashMap.createWithExpectedSize(100);
112     map.put(1, "a");
113     <font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>map.put(4, "b");
114     map.put(3, "d");
115     map.put(2, "c");
116     map.trimToSize();
117     assertThat(map.entries).hasLength(4);
118     assertThat(map.keys).hasLength(4);
119     assertThat(map.values).hasLength(4);
120     assertThat(map.links).hasLength(4);
121     assertEquals(4, map.size());
122     testHasMapEntriesInOrder(map, 1, "a", 4, "b", 3, "d", 2, "c");
123   }
124 <a name="6"></a>
125   private void testHasMapEntriesInOrder(Map&lt;?, ?&gt; map</b></font>, Object... alternatingKeysAndValues) {
126     List&lt;? extends Entry&lt;?, ?&gt;&gt; entries = Lists.newArrayList(map.entrySet());
127     <font color="#8c8774"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>List&lt;Object&gt; keys = Lists.newArrayList(map.keySet());
128     List&lt;Object&gt; values = Lists.newArrayList(map.values());
129     assertEquals(2 * entries.size(), alternatingKeysAndValues.length);
130     assertEquals(2 * keys.size(), alternatingKeysAndValues.length);
131     assertEquals(2 * values.size</b></font>(), alternatingKeysAndValues.length);
132 <a name="3"></a>    for (int i = 0; i &lt; map.size(); i++) {
133       Object expectedKey = alternatingKeysAndValues[2 * i];
134       Object expectedValue = alternatingKeysAndValues[2 * i + 1];
135       Entry&lt;Object, Object&gt; expectedEntry = <font color="#53858b"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>Maps.immutableEntry(expectedKey, expectedValue);
136       assertEquals(expectedEntry, entries.get(i));
137       assertEquals(expectedKey, keys.get(i));
138       assertEquals(expectedValue, values.get(i));
139     }
140 <a name="7"></a>  }
141   public void testAllocArraysDefault() {</b></font>
142     <font color="#38a4a5"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>CompactLinkedHashMap&lt;Integer, String&gt; map = CompactLinkedHashMap.create();
143     assertThat(map.needsAllocArrays()).isTrue();
144 <a name="2"></a>    assertThat(map.entries).isNull();
145     assertThat(map.keys).isNull();
146     assertThat</b></font>(map.values).isNull();
147     <font color="#980517"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>assertThat(map.links).isNull();
148     map.put(1, Integer.toString(1));
149     assertThat(map.needsAllocArrays()).isFalse();
150     assertThat(map.entries).hasLength(CompactHashing.DEFAULT_SIZE);
151     assertThat(map.keys).hasLength(CompactHashing.DEFAULT_SIZE);
152     assertThat(map.values).hasLength(CompactHashing.DEFAULT_SIZE);
153     assertThat(map.links).hasLength(CompactHashing.DEFAULT_SIZE);
154 <a name="1"></a>  }</b></font>
155   public void testAllocArraysExpectedSize() {
156     <font color="#f63526"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>for (int i = 0; i &lt;= CompactHashing.DEFAULT_SIZE; i++) {
157       CompactLinkedHashMap&lt;Integer, String&gt; map = CompactLinkedHashMap.createWithExpectedSize(i);
158       assertThat(map.needsAllocArrays()).isTrue();
159       assertThat(map.entries).isNull();
160       assertThat(map.keys).isNull();
161       assertThat(map.values).isNull();
162       assertThat(map.links).isNull();
163 <a name="5"></a>
164       map.put</b></font>(1, Integer.toString(1));
165       assertThat(map.needsAllocArrays()).isFalse();
166       <font color="#151b8d"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>int expectedSize = Math.max(1, i);
167       assertThat(map.entries).hasLength(expectedSize);
168       assertThat(map.keys).hasLength(expectedSize);
169       assertThat(map.values).hasLength(expectedSize);
170       assertThat(map.links).hasLength(expectedSize);
171     }</b></font>
172   }
173 }
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>PopulatedCachesTest.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 <font color="#6cc417"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>package com.google.common.cache;
2 import static com.google.common.cache.CacheTesting.checkEmpty;
3 import static com.google.common.cache.CacheTesting.checkValidState;
4 import static com.google.common.cache.TestingCacheLoaders.identityLoader;
5 import static com.google.common.truth.Truth.assertThat;
6 import static java.util.concurrent.TimeUnit.DAYS;
7 import static java.util.concurrent.TimeUnit.SECONDS;
8 import com.google.common.base.Function;
9 import com.google.common.cache.CacheBuilderFactory.DurationSpec;
10 import com.google.common.cache.LocalCache.Strength;
11 import com.google.common.collect.ImmutableMap;
12 import com.google.common.collect.ImmutableSet;
13 import</b></font> com.google.common.collect.Iterables;
14 import com.google.common.collect.Iterators;
15 import com.google.common.collect.Lists;
16 import com.google.common.collect.Maps;
17 import com.google.common.testing.EqualsTester;
18 import java.util.Collection;
19 import java.util.List;
20 import java.util.Map;
21 import java.util.Map.Entry;
22 import java.util.Set;
23 import junit.framework.TestCase;
24 public class PopulatedCachesTest extends TestCase {
25   static final int WARMUP_MIN = 120;
26   static final int WARMUP_MAX = 135;
27 <a name="11"></a>  static final int WARMUP_SIZE = WARMUP_MAX - WARMUP_MIN;
28   public void testSize_populated() {
29     for (LoadingCache&lt;Object, Object&gt; cache : caches()) <font color="#b041ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>{
30       List&lt;Entry&lt;Object, Object&gt;&gt; warmed = warmUp(cache);
31       assertEquals(WARMUP_SIZE, cache.size());
32       assertMapSize(cache.asMap(), WARMUP_SIZE);
33       checkValidState(cache);
34     }</b></font>
35   }
36   public void testContainsKey_found() {
37 <a name="1"></a>    for (LoadingCache&lt;Object, Object&gt; cache : caches()) {
38       List&lt;Entry&lt;Object, Object&gt;&gt; warmed = warmUp(cache);
39       <font color="#f63526"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>for (int i = WARMUP_MIN; i &lt; WARMUP_MAX; i++) {
40         Entry&lt;Object, Object&gt; entry = warmed.get(i - WARMUP_MIN);
41         assertTrue(cache.asMap().containsKey(entry.getKey()));
42         assertTrue(cache.asMap().containsValue(entry.getValue()));
43         assertEquals(entry.getValue(), cache.getUnchecked(entry.getKey</b></font>()));
44       }
45       assertEquals(WARMUP_SIZE, cache.stats().missCount());
46       checkValidState(cache);
47     }
48   }
49   public void testPut_populated() {
50     for (LoadingCache&lt;Object, Object&gt; cache : caches()) {
51       List&lt;Entry&lt;Object, Object&gt;&gt; warmed = warmUp(cache);
52       for (int i = WARMUP_MIN; i &lt; WARMUP_MAX; i++) {
53         Entry&lt;Object, Object&gt; entry = warmed.get(i - WARMUP_MIN);
54         Object newValue = new Object();
55         assertSame(entry.getValue(), cache.asMap().put(entry.getKey(), newValue));
56         warmed.add(entryOf(entry.getKey(), newValue));
57         Object newKey = new Object();
58         assertNull(cache.asMap().put(newKey, entry.getValue()));
59         assertEquals(newValue, cache.getUnchecked(entry.getKey()));
60         assertEquals(entry.getValue(), cache.getUnchecked(newKey));
61         warmed.add(entryOf(newKey, entry.getValue()));
62       }
63       assertEquals(WARMUP_SIZE, cache.stats().missCount());
64       checkValidState(cache);
65     }
66   }
67   public void testPutIfAbsent_populated() {
68     for (LoadingCache&lt;Object, Object&gt; cache : caches()) {
69       List&lt;Entry&lt;Object, Object&gt;&gt; warmed = warmUp(cache);
70       for (int i = WARMUP_MIN; i &lt; WARMUP_MAX; i++) {
71         Entry&lt;Object, Object&gt; entry = warmed.get(i - WARMUP_MIN);
72         Object newValue = new Object();
73         assertSame(entry.getValue(), cache.asMap().putIfAbsent(entry.getKey(), newValue));
74         Object newKey = new Object();
75         assertNull(cache.asMap().putIfAbsent(newKey, entry.getValue()));
76         assertEquals(entry.getValue(), cache.getUnchecked(entry.getKey()));
77         assertEquals(entry.getValue(), cache.getUnchecked(newKey));
78         warmed.add(entryOf(newKey, entry.getValue()));
79       }
80       assertEquals(WARMUP_SIZE, cache.stats().missCount());
81       checkValidState(cache);
82     }
83   }
84   public void testPutAll_populated() {
85     for (LoadingCache&lt;Object, Object&gt; cache : caches()) {
86 <a name="3"></a>      List&lt;Entry&lt;Object, Object&gt;&gt; warmed = warmUp(cache);
87       Object newKey = new Object();
88       Object newValue = new Object();
89       cache.asMap().putAll(<font color="#53858b"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>ImmutableMap.of(newKey, newValue));
90       assertEquals(newValue, cache.getUnchecked(newKey));
91       assertEquals(WARMUP_SIZE, cache.stats().missCount());
92       checkValidState(cache);
93     }
94   }
95   public void testReplace_populated() {</b></font>
96     for (LoadingCache&lt;Object, Object&gt; cache : caches()) {
97       List&lt;Entry&lt;Object, Object&gt;&gt; warmed = warmUp(cache);
98       for (int i = WARMUP_MIN; i &lt; WARMUP_MAX; i++) {
99         Entry&lt;Object, Object&gt; entry = warmed.get(i - WARMUP_MIN);
100         Object newValue = new Object();
101 <a name="2"></a>        assertSame(entry.getValue(), cache.asMap().replace(entry.getKey(), newValue));
102         assertTrue(cache.asMap().replace(entry.getKey(), newValue, entry.getValue()));
103         Object newKey = new Object();
104         <font color="#980517"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>assertNull(cache.asMap().replace(newKey, entry.getValue()));
105         assertFalse(cache.asMap().replace(newKey, entry.getValue(), newValue));
106         assertEquals(entry.getValue(), cache.getUnchecked(entry.getKey()));
107         assertFalse(cache.asMap().containsKey(newKey));
108       }</b></font>
109       assertEquals(WARMUP_SIZE, cache.stats().missCount());
110       checkValidState(cache);
111     }
112   }
113   public void testRemove_byKey() {
114     for (LoadingCache&lt;Object, Object&gt; cache : caches()) {
115 <a name="7"></a>      List&lt;Entry&lt;Object, Object&gt;&gt; warmed = warmUp(cache);
116       for (int i = WARMUP_MIN; i &lt; WARMUP_MAX; i++) {
117         Entry&lt;Object, Object&gt; entry = warmed.get(i - WARMUP_MIN);
118         <font color="#38a4a5"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>Object key = entry.getKey();
119         assertEquals(entry.getValue(), cache.asMap().remove(key));
120         assertNull(cache.asMap().remove(key));
121         assertFalse(cache.asMap().containsKey</b></font>(key));
122       }
123       checkEmpty(cache);
124     }
125   }
126   public void testRemove_byKeyAndValue() {
127     for (LoadingCache&lt;Object, Object&gt; cache : caches()) {
128 <a name="6"></a>            List&lt;Entry&lt;Object, Object&gt;&gt; warmed = warmUp(cache);
129       for (int i = WARMUP_MIN; i &lt; WARMUP_MAX; i++) {
130         <font color="#8c8774"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>Object key = warmed.get(i - WARMUP_MIN).getKey();
131         Object value = warmed.get(i - WARMUP_MIN).getValue();
132         assertFalse(cache.asMap().remove(key, -1));
133         assertTrue(cache.asMap</b></font>().remove(key, value));
134         assertFalse(cache.asMap().remove(key, -1));
135         assertFalse(cache.asMap().containsKey(key));
136       }
137       checkEmpty(cache);
138     }
139   }
140   public void testKeySet_populated() {
141     for (LoadingCache&lt;Object, Object&gt; cache : caches()) {
142       Set&lt;Object&gt; keys = cache.asMap().keySet();
143       List&lt;Entry&lt;Object, Object&gt;&gt; warmed = warmUp(cache);
144       Set&lt;Object&gt; expected = Maps.newHashMap(cache.asMap()).keySet();
145       assertThat(keys).containsExactlyElementsIn(expected);
146       assertThat(keys.toArray()).asList().containsExactlyElementsIn(expected);
147       assertThat(keys.toArray(new Object[0])).asList().containsExactlyElementsIn(expected);
148       new EqualsTester()
149           .addEqualityGroup(cache.asMap().keySet(), keys)
150 <a name="10"></a>          .addEqualityGroup(ImmutableSet.of())
151           .testEquals();
152       assertEquals(WARMUP_SIZE, keys.size());
153       for (int i = WARMUP_MIN; i &lt; WARMUP_MAX; i++) <font color="#ad5910"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>{
154         Object key = warmed.get(i - WARMUP_MIN).getKey();
155         assertTrue(keys.contains(key));
156         assertTrue(keys.remove(key));
157         assertFalse</b></font>(keys.remove(key));
158         assertFalse(keys.contains(key));
159       }
160       checkEmpty(keys);
161       checkEmpty(cache);
162     }
163   }
164   public void testValues_populated() {
165     for (LoadingCache&lt;Object, Object&gt; cache : caches()) {
166       Collection&lt;Object&gt; values = cache.asMap().values();
167       List&lt;Entry&lt;Object, Object&gt;&gt; warmed = warmUp(cache);
168       Collection&lt;Object&gt; expected = Maps.newHashMap(cache.asMap()).values();
169       assertThat(values).containsExactlyElementsIn(expected);
170       assertThat(values.toArray()).asList().containsExactlyElementsIn(expected);
171 <a name="9"></a>      assertThat(values.toArray(new Object[0])).asList().containsExactlyElementsIn(expected);
172       assertEquals(WARMUP_SIZE, values.size());
173       for (int i = WARMUP_MIN; i &lt; WARMUP_MAX; i++) <font color="#83a33a"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>{
174         Object value = warmed.get(i - WARMUP_MIN).getValue();
175         assertTrue(values.contains(value));
176         assertTrue(values.remove(value));
177         assertFalse</b></font>(values.remove(value));
178         assertFalse(values.contains(value));
179       }
180       checkEmpty(values);
181       checkEmpty(cache);
182     }
183   }
184   public void testEntrySet_populated() {
185     for (LoadingCache&lt;Object, Object&gt; cache : caches()) {
186       Set&lt;Entry&lt;Object, Object&gt;&gt; entries = cache.asMap().entrySet();
187       List&lt;Entry&lt;Object, Object&gt;&gt; warmed = warmUp(cache, WARMUP_MIN, WARMUP_MAX);
188       Set&lt;?&gt; expected = Maps.newHashMap(cache.asMap()).entrySet();
189       assertThat(entries).containsExactlyElementsIn(expected);
190       assertThat(entries.toArray()).asList().containsExactlyElementsIn(expected);
191       assertThat(entries.toArray(new Object[0])).asList().containsExactlyElementsIn(expected);
192       new EqualsTester()
193           .addEqualityGroup(cache.asMap().entrySet(), entries)
194           .addEqualityGroup(ImmutableSet.of())
195 <a name="5"></a>          .testEquals();
196       assertEquals(WARMUP_SIZE, entries.size());
197       for (int i = WARMUP_MIN; i &lt; WARMUP_MAX; i++) {
198         <font color="#151b8d"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>Entry&lt;Object, Object&gt; newEntry = warmed.get(i - WARMUP_MIN);
199         assertTrue(entries.contains(newEntry));
200         assertTrue(entries.remove(newEntry));
201         assertFalse(entries.remove(newEntry));
202         assertFalse(entries.contains(newEntry));
203       }</b></font>
204       checkEmpty(entries);
205       checkEmpty(cache);
206     }
207   }
208   public void testWriteThroughEntry() {
209     for (LoadingCache&lt;Object, Object&gt; cache : caches()) {
210       cache.getUnchecked(1);
211       Entry&lt;Object, Object&gt; entry = Iterables.getOnlyElement(cache.asMap().entrySet());
212       cache.invalidate(1);
213       assertEquals(0, cache.size());
214       entry.setValue(3);
215       assertEquals(1, cache.size());
216       assertEquals(3, cache.getIfPresent(1));
217       checkValidState(cache);
218       try {
219         entry.setValue(null);
220         fail();
221       } catch (NullPointerException expected) {
222       }
223       checkValidState(cache);
224     }
225   }
226   private Iterable&lt;LoadingCache&lt;Object, Object&gt;&gt; caches() {
227     CacheBuilderFactory factory = cacheFactory();
228     return Iterables.transform(
229         factory.buildAllPermutations(),
230         new Function&lt;CacheBuilder&lt;Object, Object&gt;, LoadingCache&lt;Object, Object&gt;&gt;() {
231           @Override
232           public LoadingCache&lt;Object, Object&gt; apply(CacheBuilder&lt;Object, Object&gt; builder) {
233             return builder.recordStats().build(identityLoader());
234           }
235         });
236   }
237   private CacheBuilderFactory cacheFactory() {
238 <a name="0"></a>        return new CacheBuilderFactory()
239         .withKeyStrengths(<font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>ImmutableSet.of(Strength.STRONG, Strength.WEAK))
240         .withValueStrengths(ImmutableSet.copyOf(Strength.values()))
241         .withConcurrencyLevels(ImmutableSet.of(1, 4, 16, 64))
242         .withMaximumSizes(ImmutableSet.of(400, 1000))
243         .withInitialCapacities(ImmutableSet.of(0, 1, 10, 100, 1000))
244         .withExpireAfterWrites(
245             ImmutableSet.of(
246                 DurationSpec.of(1, SECONDS), DurationSpec.of(1, DAYS)))
247         .withExpireAfterAccesses(
248             ImmutableSet.of(
249                 DurationSpec.of(1, SECONDS), DurationSpec.of(1, DAYS)))
250         .withRefreshes(
251             ImmutableSet.of(
252                 DurationSpec.of(1, SECONDS), DurationSpec.of(1, DAYS)));
253   }
254   private List&lt;Entry&lt;Object, Object&gt;&gt; warmUp(LoadingCache&lt;Object, Object&gt; cache</b></font>) {
255     return warmUp(cache, WARMUP_MIN, WARMUP_MAX);
256   }
257   private List&lt;Entry&lt;Object, Object&gt;&gt; warmUp(
258       LoadingCache&lt;Object, Object&gt; cache, int minimum, int maximum) {
259     List&lt;Entry&lt;Object, Object&gt;&gt; entries = Lists.newArrayList();
260     for (int i = minimum; i &lt; maximum; i++) {
261       Object key = i;
262       Object value = cache.getUnchecked(key);
263       entries.add(entryOf(key, value));
264     }
265     return entries;
266   }
267   private Entry&lt;Object, Object&gt; entryOf(Object key, Object value) {
268     return Maps.immutableEntry(key, value);
269   }
270   private void assertMapSize(Map&lt;?, ?&gt; map, int size) {
271     assertEquals(size, map.size());
272     if (size &gt; 0) {
273       assertFalse(map.isEmpty());
274 <a name="8"></a>    } else {
275       assertTrue(map.isEmpty());
276     }
277     <font color="#c58917"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>assertCollectionSize(map.keySet(), size);
278     assertCollectionSize(map.entrySet(), size);
279     assertCollectionSize(map.values(), size);
280   }
281   private void assertC</b></font>ollectionSize(Collection&lt;?&gt; collection, int size) {
282     assertEquals(size, collection.size());
283     if (size &gt; 0) {
284       assertFalse(collection.isEmpty());
285     } else {
286       assertTrue(collection.isEmpty());
287     }
288     assertEquals(size, Iterables.size(collection));
289     assertEquals(size, Iterators.size(collection.iterator()));
290   }
291 }
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
