
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 6.41025641025641%, Tokens: 10</h2>
        <div class="column">
            <h3>motan-MDEwOlJlcG9zaXRvcnk1NjY3OTUyMQ==-flat-ConsulUtils.java</h3>
            <pre><code><span onclick='openModal()' class='match'>1  package com.weibo.api.motan.registry.consul;
2  import com.weibo.api.motan.common.MotanConstants;
3  import com.weibo.api.motan.common.URLParamType;
4  import com.weibo.api.motan.rpc.URL;
5  import com.weibo.api.motan.util.StringTools;
6  import java.util.ArrayList;
7  import java.util.HashMap;
8  import java.util.List;
9  import java.util.Map;
10  public class ConsulUtils {
</span>11      public static boolean isSame(List<URL> urls1, List<URL> urls2) {
12          if (urls1 == null || urls2 == null) {
13              return false;
14          }
15          if (urls1.size() != urls2.size()) {
16              return false;
17          }
18          return urls1.containsAll(urls2);
19      }
20      public static ConsulService buildService(URL url) {
21          ConsulService service = new ConsulService();
22          service.setAddress(url.getHost());
23          service.setId(ConsulUtils.convertConsulSerivceId(url));
24          service.setName(ConsulUtils.convertGroupToServiceName(url.getGroup()));
25          service.setPort(url.getPort());
26          service.setTtl(ConsulConstants.TTL);
27          List<String> tags = new ArrayList<String>();
28          tags.add(ConsulConstants.CONSUL_TAG_MOTAN_PROTOCOL + url.getProtocol());
29          tags.add(ConsulConstants.CONSUL_TAG_MOTAN_URL + StringTools.urlEncode(url.toFullStr()));
30          service.setTags(tags);
31          return service;
32      }
33      public static URL buildUrl(ConsulService service) {
34          URL url = null;
35          for (String tag : service.getTags()) {
36              if (tag.startsWith(ConsulConstants.CONSUL_TAG_MOTAN_URL)) {
37                  String encodeUrl = tag.substring(tag.indexOf("_") + 1);
38                  url = URL.valueOf(StringTools.urlDecode(encodeUrl));
39              }
40          }
41          if (url == null) {
42              Map<String, String> params = new HashMap<String, String>();
43              String group = service.getName().substring(ConsulConstants.CONSUL_SERVICE_MOTAN_PRE.length());
44              params.put(URLParamType.group.getName(), group);
45              params.put(URLParamType.nodeType.getName(), MotanConstants.NODE_TYPE_SERVICE);
46              String protocol = ConsulUtils.getProtocolFromTag(service.getTags().get(0));
47              url = new URL(protocol, service.getAddress(), service.getPort(),
48                      ConsulUtils.getPathFromServiceId(service.getId()), params);
49          }
50          return url;
51      }
52      public static String getUrlClusterInfo(URL url) {
53          return url.getProtocol() + "-" + url.getPath();
54      }
55      public static String convertGroupToServiceName(String group) {
56          return ConsulConstants.CONSUL_SERVICE_MOTAN_PRE + group;
57      }
58      public static String getGroupFromServiceName(String group) {
59          return group.substring(ConsulConstants.CONSUL_SERVICE_MOTAN_PRE.length());
60      }
61      public static String convertConsulSerivceId(URL url) {
62          if (url == null) {
63              return null;
64          }
65          return convertServiceId(url.getHost(), url.getPort(), url.getPath());
66      }
67      public static String getPathFromServiceId(String serviceId) {
68          return serviceId.substring(serviceId.indexOf("-") + 1);
69      }
70      public static String getProtocolFromTag(String tag) {
71          return tag.substring(ConsulConstants.CONSUL_TAG_MOTAN_PROTOCOL.length());
72      }
73      public static String convertServiceId(String host, int port, String path) {
74          return host + ":" + port + "-" + path;
75      }
76  }
</code></pre>
        </div>
        <div class="column">
            <h3>jedis-MDEwOlJlcG9zaXRvcnk3MTU2MDU=-flat-TSRangeParams.java</h3>
            <pre><code><span onclick='openModal()' class='match'>1  package redis.clients.jedis.timeseries;
2  import static redis.clients.jedis.Protocol.BYTES_TILDE;
3  import static redis.clients.jedis.Protocol.toByteArray;
4  import static redis.clients.jedis.timeseries.TimeSeriesProtocol.MINUS;
5  import static redis.clients.jedis.timeseries.TimeSeriesProtocol.PLUS;
6  import static redis.clients.jedis.timeseries.TimeSeriesProtocol.TimeSeriesKeyword.*;
7  import static redis.clients.jedis.util.SafeEncoder.encode;
8  import redis.clients.jedis.CommandArguments;
9  import redis.clients.jedis.params.IParams;
10  public class TSRangeParams implements IParams {
</span>11    private Long fromTimestamp;
12    private Long toTimestamp;
13    private boolean latest;
14    private long[] filterByTimestamps;
15    private double[] filterByValues;
16    private Integer count;
17    private byte[] align;
18    private AggregationType aggregationType;
19    private long bucketDuration;
20    private byte[] bucketTimestamp;
21    private boolean empty;
22    public TSRangeParams(long fromTimestamp, long toTimestamp) {
23      this.fromTimestamp = fromTimestamp;
24      this.toTimestamp = toTimestamp;
25    }
26    public static TSRangeParams rangeParams(long fromTimestamp, long toTimestamp) {
27      return new TSRangeParams(fromTimestamp, toTimestamp);
28    }
29    public TSRangeParams() {
30    }
31    public static TSRangeParams rangeParams() {
32      return new TSRangeParams();
33    }
34    public TSRangeParams fromTimestamp(long fromTimestamp) {
35      this.fromTimestamp = fromTimestamp;
36      return this;
37    }
38    public TSRangeParams toTimestamp(long toTimestamp) {
39      this.toTimestamp = toTimestamp;
40      return this;
41    }
42    public TSRangeParams latest() {
43      this.latest = true;
44      return this;
45    }
46    public TSRangeParams filterByTS(long... timestamps) {
47      this.filterByTimestamps = timestamps;
48      return this;
49    }
50    public TSRangeParams filterByValues(double min, double max) {
51      this.filterByValues = new double[]{min, max};
52      return this;
53    }
54    public TSRangeParams count(int count) {
55      this.count = count;
56      return this;
57    }
58    private TSRangeParams align(byte[] raw) {
59      this.align = raw;
60      return this;
61    }
62    public TSRangeParams align(long timestamp) {
63      return align(toByteArray(timestamp));
64    }
65    public TSRangeParams alignStart() {
66      return align(MINUS);
67    }
68    public TSRangeParams alignEnd() {
69      return align(PLUS);
70    }
71    public TSRangeParams aggregation(AggregationType aggregationType, long bucketDuration) {
72      this.aggregationType = aggregationType;
73      this.bucketDuration = bucketDuration;
74      return this;
75    }
76    public TSRangeParams bucketTimestamp(String bucketTimestamp) {
77      this.bucketTimestamp = encode(bucketTimestamp);
78      return this;
79    }
80    public TSRangeParams bucketTimestampLow() {
81      this.bucketTimestamp = MINUS;
82      return this;
83    }
84    public TSRangeParams bucketTimestampHigh() {
85      this.bucketTimestamp = PLUS;
86      return this;
87    }
88    public TSRangeParams bucketTimestampMid() {
89      this.bucketTimestamp = BYTES_TILDE;
90      return this;
91    }
92    public TSRangeParams empty() {
93      this.empty = true;
94      return this;
95    }
96    @Override
97    public void addParams(CommandArguments args) {
98      if (fromTimestamp == null) {
99        args.add(MINUS);
100      } else {
101        args.add(toByteArray(fromTimestamp));
102      }
103      if (toTimestamp == null) {
104        args.add(PLUS);
105      } else {
106        args.add(toByteArray(toTimestamp));
107      }
108      if (latest) {
109        args.add(LATEST);
110      }
111      if (filterByTimestamps != null) {
112        args.add(FILTER_BY_TS);
113        for (long ts : filterByTimestamps) {
114          args.add(toByteArray(ts));
115        }
116      }
117      if (filterByValues != null) {
118        args.add(FILTER_BY_VALUE);
119        for (double value : filterByValues) {
120          args.add(toByteArray(value));
121        }
122      }
123      if (count != null) {
124        args.add(COUNT).add(toByteArray(count));
125      }
126      if (aggregationType != null) {
127        if (align != null) {
128          args.add(ALIGN).add(align);
129        }
130        args.add(AGGREGATION).add(aggregationType).add(toByteArray(bucketDuration));
131        if (bucketTimestamp != null) {
132          args.add(BUCKETTIMESTAMP).add(bucketTimestamp);
133        }
134        if (empty) {
135          args.add(EMPTY);
136        }
137      }
138    }
139  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from motan-MDEwOlJlcG9zaXRvcnk1NjY3OTUyMQ==-flat-ConsulUtils.java</div>
                <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from jedis-MDEwOlJlcG9zaXRvcnk3MTU2MDU=-flat-TSRangeParams.java</div>
                <div class="column column_space"><pre><code>1  package com.weibo.api.motan.registry.consul;
2  import com.weibo.api.motan.common.MotanConstants;
3  import com.weibo.api.motan.common.URLParamType;
4  import com.weibo.api.motan.rpc.URL;
5  import com.weibo.api.motan.util.StringTools;
6  import java.util.ArrayList;
7  import java.util.HashMap;
8  import java.util.List;
9  import java.util.Map;
10  public class ConsulUtils {
</pre></code></div>
                <div class="column column_space"><pre><code>1  package redis.clients.jedis.timeseries;
2  import static redis.clients.jedis.Protocol.BYTES_TILDE;
3  import static redis.clients.jedis.Protocol.toByteArray;
4  import static redis.clients.jedis.timeseries.TimeSeriesProtocol.MINUS;
5  import static redis.clients.jedis.timeseries.TimeSeriesProtocol.PLUS;
6  import static redis.clients.jedis.timeseries.TimeSeriesProtocol.TimeSeriesKeyword.*;
7  import static redis.clients.jedis.util.SafeEncoder.encode;
8  import redis.clients.jedis.CommandArguments;
9  import redis.clients.jedis.params.IParams;
10  public class TSRangeParams implements IParams {
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    