<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html><head><title>Matches for NavigableSetNavigationTester_1.java &amp; ImmutableListTest_1.java</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for NavigableSetNavigationTester_1.java &amp; ImmutableListTest_1.java
      </h3>
<h1 align="center">
        13.1%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>NavigableSetNavigationTester_1.java (32.110092%)<th>ImmutableListTest_1.java (8.267716%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(19-44)<td><a href="#" name="0">(41-65)</a><td align="center"><font color="#ff0000">18</font>
<tr onclick='openModal("#f63526")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f63526"><font color="#f63526">-</font><td><a href="#" name="1">(109-115)<td><a href="#" name="1">(669-675)</a><td align="center"><font color="#d40000">15</font>
<tr onclick='openModal("#980517")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#980517"><font color="#980517">-</font><td><a href="#" name="2">(88-94)<td><a href="#" name="2">(517-524)</a><td align="center"><font color="#d40000">15</font>
<tr onclick='openModal("#53858b")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#53858b"><font color="#53858b">-</font><td><a href="#" name="3">(211-219)<td><a href="#" name="3">(209-217)</a><td align="center"><font color="#c60000">14</font>
<tr onclick='openModal("#6cc417")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#6cc417"><font color="#6cc417">-</font><td><a href="#" name="4">(130-138)<td><a href="#" name="4">(201-209)</a><td align="center"><font color="#c60000">14</font>
<tr onclick='openModal("#151b8d")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#151b8d"><font color="#151b8d">-</font><td><a href="#" name="5">(225-230)<td><a href="#" name="5">(118-123)</a><td align="center"><font color="#8d0000">10</font>
<tr onclick='openModal("#8c8774")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#8c8774"><font color="#8c8774">-</font><td><a href="#" name="6">(140-146)<td><a href="#" name="6">(726-732)</a><td align="center"><font color="#8d0000">10</font>
<tr onclick='openModal("#38a4a5")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#38a4a5"><font color="#38a4a5">-</font><td><a href="#" name="7">(124-127)<td><a href="#" name="7">(622-626)</a><td align="center"><font color="#7f0000">9</font>
</td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>NavigableSetNavigationTester_1.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
/*
 * Copyright (C) 2010 The Guava Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
<a name="0"></a>
package com.google.common.collect.testing.testers;

<font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>import static com.google.common.collect.testing.features.CollectionFeature.SUPPORTS_REMOVE;
import static com.google.common.collect.testing.features.CollectionSize.ONE;
import static com.google.common.collect.testing.features.CollectionSize.SEVERAL;
import static com.google.common.collect.testing.features.CollectionSize.ZERO;

import com.google.common.annotations.GwtIncompatible;
import com.google.common.collect.testing.Helpers;
import com.google.common.collect.testing.features.CollectionFeature;
import com.google.common.collect.testing.features.CollectionSize;
import java.lang.reflect.Method;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Iterator;
import java.util.List;
import java.util.NavigableSet;
import java.util.TreeSet;
import org.junit.Ignore;

/**
 * A generic JUnit test which tests operations on a NavigableSet. Can't be invoked directly; please
 * see {@code NavigableSetTestSuiteBuilder}.
 *
 * @author Jesse Wilson
 * @author Louis Wasserman
 */
@</b></font>GwtIncompatible
@Ignore // Affects only Android test runner, which respects JUnit 4 annotations on JUnit 3 tests.
public class NavigableSetNavigationTester&lt;E&gt; extends AbstractSetTester&lt;E&gt; {

  private NavigableSet&lt;E&gt; navigableSet;
  private List&lt;E&gt; values;
  private E a;
  private E b;
  private E c;

  @Override
  public void setUp() throws Exception {
    super.setUp();
    navigableSet = (NavigableSet&lt;E&gt;) getSet();
    values =
        Helpers.copyToList(
            getSubjectGenerator()
                .getSampleElements(getSubjectGenerator().getCollectionSize().getNumElements()));
    Collections.sort(values, navigableSet.comparator());

    // some tests assume SEVERAL == 3
    if (values.size() &gt;= 1) {
      a = values.get(0);
      if (values.size() &gt;= 3) {
        b = values.get(1);
        c = values.get(2);
      }
    }
  }

  /** Resets the contents of navigableSet to have elements a, c, for the navigation tests. */
  protected void resetWithHole() {
    super.resetContainer(getSubjectGenerator().create(a, c));
    navigableSet = (NavigableSet&lt;E&gt;) getSet();
  }

  @CollectionFeature.Require(SUPPORTS_REMOVE)
  @CollectionSize.Require(ZERO)
  public void testEmptySetPollFirst() {
    assertNull(navigableSet.pollFirst());
  }
<a name="2"></a>
  @CollectionSize.Require(ZERO)
  public void testEmptySetNearby() {
    <font color="#980517"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>assertNull(navigableSet.lower(e0()));
    assertNull(navigableSet.floor(e0()));
    assertNull(navigableSet.ceiling(e0()));
    assertNull(navigableSet.higher(e0()));
  }

  @CollectionFeature.R</b></font>equire(SUPPORTS_REMOVE)
  @CollectionSize.Require(ZERO)
  public void testEmptySetPollLast() {
    assertNull(navigableSet.pollLast());
  }

  @CollectionFeature.Require(SUPPORTS_REMOVE)
  @CollectionSize.Require(ONE)
  public void testSingletonSetPollFirst() {
    assertEquals(a, navigableSet.pollFirst());
    assertTrue(navigableSet.isEmpty());
  }
<a name="1"></a>
  @CollectionSize.Require(ONE)
  public void testSingletonSetNearby() {
    <font color="#f63526"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>assertNull(navigableSet.lower(e0()));
    assertEquals(a, navigableSet.floor(e0()));
    assertEquals(a, navigableSet.ceiling(e0()));
    assertNull(navigableSet.higher(e0()));
  }

  @CollectionFeature.Requi</b></font>re(SUPPORTS_REMOVE)
  @CollectionSize.Require(ONE)
  public void testSingletonSetPollLast() {
    assertEquals(a, navigableSet.pollLast());
    assertTrue(navigableSet.isEmpty());
  }
<a name="7"></a>
  @CollectionFeature.Require(SUPPORTS_REMOVE)
  @CollectionSize.Require(SEVERAL)
  public void testPollFirst() <font color="#38a4a5"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>{
    assertEquals(a, navigableSet.pollFirst());
    assertEquals(values.subList(1, values.size()), Helpers.copyToList(navigableSet));
<a name="4"></a>  }</b></font>

  @CollectionFeature.Require(absent = SUPPORTS_REMOVE)
  public void testPollFirstUnsupported() <font color="#6cc417"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>{
    try {
      navigableSet.pollFirst();
      fail();
    } catch (UnsupportedOperationException e) {
    }
  }
<a name="6"></a>
  @CollectionSi</b></font>ze.Require(SEVERAL)
  public void testLowerHole() {
    <font color="#8c8774"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>resetWithHole();
    assertEquals(null, navigableSet.lower(a));
    assertEquals(a, navigableSet.lower(b));
    assertEquals(a, navigableSet.lower(c));
  }

  @CollectionSi</b></font>ze.Require(SEVERAL)
  public void testFloorHole() {
    resetWithHole();
    assertEquals(a, navigableSet.floor(a));
    assertEquals(a, navigableSet.floor(b));
    assertEquals(c, navigableSet.floor(c));
  }

  @CollectionSize.Require(SEVERAL)
  public void testCeilingHole() {
    resetWithHole();
    assertEquals(a, navigableSet.ceiling(a));
    assertEquals(c, navigableSet.ceiling(b));
    assertEquals(c, navigableSet.ceiling(c));
  }

  @CollectionSize.Require(SEVERAL)
  public void testHigherHole() {
    resetWithHole();
    assertEquals(c, navigableSet.higher(a));
    assertEquals(c, navigableSet.higher(b));
    assertEquals(null, navigableSet.higher(c));
  }

  /*
   * TODO(cpovirk): make "too small" and "too large" elements available for better navigation
   * testing. At that point, we may be able to eliminate the "hole" tests, which would mean that
   * ContiguousSet's tests would no longer need to suppress them.
   */
  @CollectionSize.Require(SEVERAL)
  public void testLower() {
    assertEquals(null, navigableSet.lower(a));
    assertEquals(a, navigableSet.lower(b));
    assertEquals(b, navigableSet.lower(c));
  }

  @CollectionSize.Require(SEVERAL)
  public void testFloor() {
    assertEquals(a, navigableSet.floor(a));
    assertEquals(b, navigableSet.floor(b));
    assertEquals(c, navigableSet.floor(c));
  }

  @CollectionSize.Require(SEVERAL)
  public void testCeiling() {
    assertEquals(a, navigableSet.ceiling(a));
    assertEquals(b, navigableSet.ceiling(b));
    assertEquals(c, navigableSet.ceiling(c));
  }

  @CollectionSize.Require(SEVERAL)
  public void testHigher() {
    assertEquals(b, navigableSet.higher(a));
    assertEquals(c, navigableSet.higher(b));
    assertEquals(null, navigableSet.higher(c));
  }

  @CollectionFeature.Require(SUPPORTS_REMOVE)
  @CollectionSize.Require(SEVERAL)
  public void testPollLast() {
    assertEquals(c, navigableSet.pollLast());
    assertEquals(values.subList(0, values.size() - 1), Helpers.copyToList(navigableSet));
<a name="3"></a>  }

  @CollectionFeature.Require(absent = SUPPORTS_REMOVE)
  public void testPollLastUnsupported() <font color="#53858b"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>{
    try {
      navigableSet.pollLast();
      fail();
    } catch (UnsupportedOperationException e) {
    }
  }

  @CollectionSize.Require(</b></font>SEVERAL)
  public void testDescendingNavigation() {
    List&lt;E&gt; descending = new ArrayList&lt;&gt;();
<a name="5"></a>    for (Iterator&lt;E&gt; i = navigableSet.descendingIterator(); i.hasNext(); ) {
      descending.add(i.next());
    }
    <font color="#151b8d"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>Collections.reverse(descending);
    assertEquals(values, descending);
  }

  public void testEmptySubSet() {
    NavigableSet&lt;E&gt; empty = navigableSet.subSet(e0(), false, e0</b></font>(), false);
    assertEquals(new TreeSet&lt;E&gt;(), empty);
  }

  /*
   * TODO(cpovirk): more testing of subSet/headSet/tailSet/descendingSet? and/or generate derived
   * suites?
   */

  /**
   * Returns the {@link Method} instances for the test methods in this class that create a set with
   * a "hole" in it so that set tests of {@code ContiguousSet} can suppress them with {@code
   * FeatureSpecificTestSuiteBuilder.suppressing()}.
   */
  /*
   * TODO(cpovirk): or we could make HOLES_FORBIDDEN a feature. Or we could declare that
   * implementations are permitted to throw IAE if a hole is requested, and we could update
   * test*Hole to permit IAE. (But might this ignore genuine bugs?) But see the TODO above
   * testLower, which could make this all unnecessary
   */
  public static Method[] getHoleMethods() {
    return new Method[] {
      Helpers.getMethod(NavigableSetNavigationTester.class, "testLowerHole"),
      Helpers.getMethod(NavigableSetNavigationTester.class, "testFloorHole"),
      Helpers.getMethod(NavigableSetNavigationTester.class, "testCeilingHole"),
      Helpers.getMethod(NavigableSetNavigationTester.class, "testHigherHole"),
    };
  }
}
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>ImmutableListTest_1.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
/*
 * Copyright (C) 2007 The Guava Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.google.common.collect;

import static com.google.common.collect.Iterables.getOnlyElement;
import static com.google.common.collect.Iterables.unmodifiableIterable;
import static com.google.common.collect.Sets.newHashSet;
import static com.google.common.collect.testing.features.CollectionFeature.ALLOWS_NULL_QUERIES;
import static com.google.common.collect.testing.features.CollectionFeature.SERIALIZABLE;
import static java.lang.reflect.Proxy.newProxyInstance;
import static java.util.Arrays.asList;

import com.google.common.annotations.GwtCompatible;
import com.google.common.annotations.GwtIncompatible;
import com.google.common.collect.testing.Helpers;
import com.google.common.collect.testing.ListTestSuiteBuilder;
import com.google.common.collect.testing.MinimalCollection;
import com.google.common.collect.testing.MinimalIterable;
import com.google.common.collect.testing.features.CollectionSize;
import com.google.common.collect.testing.google.ListGenerators.BuilderAddAllListGenerator;
import com.google.common.collect.testing.google.ListGenerators.BuilderReversedListGenerator;
import com.google.common.collect.testing.google.ListGenerators.ImmutableListHeadSubListGenerator;
import com.google.common.collect.testing.google.ListGenerators.ImmutableListMiddleSubListGenerator;
<a name="0"></a>import com.google.common.collect.testing.google.ListGenerators.ImmutableListOfGenerator;
import com.google.common.collect.testing.google.ListGenerators.ImmutableListTailSubListGenerator;
import com.google.common.collect.testing.google.ListGenerators.UnhashableElementsImmutableListGenerator;
<font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>import com.google.common.collect.testing.testers.ListHashCodeTester;
import com.google.common.testing.NullPointerTester;
import com.google.common.testing.SerializableTester;
import java.lang.reflect.InvocationHandler;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.util.Arrays;
import java.util.Collection;
import java.util.Collections;
import java.util.Iterator;
import java.util.List;
import java.util.Set;
import java.util.concurrent.CopyOnWriteArrayList;
import junit.framework.Test;
import junit.framework.TestCase;
import junit.framework.TestSuite;

/**
 * Unit test for {@link ImmutableList}.
 *
 * @author Kevin Bourrillion
 * @author George van den Driessche
 * @author Jared Levy
 */
@</b></font>GwtCompatible(emulated = true)
public class ImmutableListTest extends TestCase {

  @GwtIncompatible // suite
  public static Test suite() {
    TestSuite suite = new TestSuite();
    suite.addTest(
        ListTestSuiteBuilder.using(new ImmutableListOfGenerator())
            .named("ImmutableList")
            .withFeatures(CollectionSize.ANY, SERIALIZABLE, ALLOWS_NULL_QUERIES)
            .createTestSuite());
    suite.addTest(
        ListTestSuiteBuilder.using(new BuilderAddAllListGenerator())
            .named("ImmutableList, built with Builder.add")
            .withFeatures(CollectionSize.ANY, SERIALIZABLE, ALLOWS_NULL_QUERIES)
            .createTestSuite());
    suite.addTest(
        ListTestSuiteBuilder.using(new BuilderAddAllListGenerator())
            .named("ImmutableList, built with Builder.addAll")
            .withFeatures(CollectionSize.ANY, SERIALIZABLE, ALLOWS_NULL_QUERIES)
            .createTestSuite());
    suite.addTest(
        ListTestSuiteBuilder.using(new BuilderReversedListGenerator())
            .named("ImmutableList, reversed")
            .withFeatures(CollectionSize.ANY, SERIALIZABLE, ALLOWS_NULL_QUERIES)
            .createTestSuite());
    suite.addTest(
        ListTestSuiteBuilder.using(new ImmutableListHeadSubListGenerator())
            .named("ImmutableList, head subList")
            .withFeatures(CollectionSize.ANY, SERIALIZABLE, ALLOWS_NULL_QUERIES)
            .createTestSuite());
    suite.addTest(
        ListTestSuiteBuilder.using(new ImmutableListTailSubListGenerator())
            .named("ImmutableList, tail subList")
            .withFeatures(CollectionSize.ANY, SERIALIZABLE, ALLOWS_NULL_QUERIES)
            .createTestSuite());
    suite.addTest(
        ListTestSuiteBuilder.using(new ImmutableListMiddleSubListGenerator())
            .named("ImmutableList, middle subList")
            .withFeatures(CollectionSize.ANY, SERIALIZABLE, ALLOWS_NULL_QUERIES)
            .createTestSuite());
    suite.addTest(
        ListTestSuiteBuilder.using(new UnhashableElementsImmutableListGenerator())
            .suppressing(ListHashCodeTester.getHashCodeMethod())
            .named("ImmutableList, unhashable values")
            .withFeatures(CollectionSize.ANY, ALLOWS_NULL_QUERIES)
            .createTestSuite());
    return suite;
  }

<a name="5"></a>  public static class CreationTests extends TestCase {
    public void testCreation_noArgs() {
      List&lt;String&gt; list = ImmutableList.of();
      <font color="#151b8d"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>assertEquals(Collections.emptyList(), list);
    }

    public void testCreation_oneElement() {
      List&lt;String&gt; list = ImmutableList.of("a");
      assertEquals(Collections.singletonList</b></font>("a"), list);
    }

    public void testCreation_twoElements() {
      List&lt;String&gt; list = ImmutableList.of("a", "b");
      assertEquals(Lists.newArrayList("a", "b"), list);
    }

    public void testCreation_threeElements() {
      List&lt;String&gt; list = ImmutableList.of("a", "b", "c");
      assertEquals(Lists.newArrayList("a", "b", "c"), list);
    }

    public void testCreation_fourElements() {
      List&lt;String&gt; list = ImmutableList.of("a", "b", "c", "d");
      assertEquals(Lists.newArrayList("a", "b", "c", "d"), list);
    }

    public void testCreation_fiveElements() {
      List&lt;String&gt; list = ImmutableList.of("a", "b", "c", "d", "e");
      assertEquals(Lists.newArrayList("a", "b", "c", "d", "e"), list);
    }

    public void testCreation_sixElements() {
      List&lt;String&gt; list = ImmutableList.of("a", "b", "c", "d", "e", "f");
      assertEquals(Lists.newArrayList("a", "b", "c", "d", "e", "f"), list);
    }

    public void testCreation_sevenElements() {
      List&lt;String&gt; list = ImmutableList.of("a", "b", "c", "d", "e", "f", "g");
      assertEquals(Lists.newArrayList("a", "b", "c", "d", "e", "f", "g"), list);
    }

    public void testCreation_eightElements() {
      List&lt;String&gt; list = ImmutableList.of("a", "b", "c", "d", "e", "f", "g", "h");
      assertEquals(Lists.newArrayList("a", "b", "c", "d", "e", "f", "g", "h"), list);
    }

    public void testCreation_nineElements() {
      List&lt;String&gt; list = ImmutableList.of("a", "b", "c", "d", "e", "f", "g", "h", "i");
      assertEquals(Lists.newArrayList("a", "b", "c", "d", "e", "f", "g", "h", "i"), list);
    }

    public void testCreation_tenElements() {
      List&lt;String&gt; list = ImmutableList.of("a", "b", "c", "d", "e", "f", "g", "h", "i", "j");
      assertEquals(Lists.newArrayList("a", "b", "c", "d", "e", "f", "g", "h", "i", "j"), list);
    }

    public void testCreation_elevenElements() {
      List&lt;String&gt; list = ImmutableList.of("a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k");
      assertEquals(Lists.newArrayList("a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k"), list);
    }

    // Varargs versions

    public void testCreation_twelveElements() {
      List&lt;String&gt; list =
          ImmutableList.of("a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l");
      assertEquals(
          Lists.newArrayList("a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l"), list);
    }

    public void testCreation_thirteenElements() {
      List&lt;String&gt; list =
          ImmutableList.of("a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m");
      assertEquals(
          Lists.newArrayList("a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m"),
          list);
    }

    public void testCreation_fourteenElements() {
      List&lt;String&gt; list =
          ImmutableList.of("a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n");
      assertEquals(
          Lists.newArrayList("a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n"),
<a name="4"></a>          list);
    }

    public void testCreation_singletonNull() <font color="#6cc417"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>{
      try {
        ImmutableList.of((String) null);
        fail();
      } catch (NullPointerException expected) {
<a name="3"></a>      }
    }

    public void testCreat</b></font>ion_withNull() <font color="#53858b"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>{
      try {
        ImmutableList.of("a", null, "b");
        fail();
      } catch (NullPointerException expected) {
      }
    }

    public void testCrea</b></font>tion_generic() {
      List&lt;String&gt; a = ImmutableList.of("a");
      // only verify that there is no compile warning
      ImmutableList&lt;List&lt;String&gt;&gt; unused = ImmutableList.of(a, a);
    }

    public void testCreation_arrayOfArray() {
      String[] array = new String[] {"a"};
      List&lt;String[]&gt; list = ImmutableList.&lt;String[]&gt;of(array);
      assertEquals(Collections.singletonList(array), list);
    }

    public void testCopyOf_emptyArray() {
      String[] array = new String[0];
      List&lt;String&gt; list = ImmutableList.copyOf(array);
      assertEquals(Collections.emptyList(), list);
    }

    public void testCopyOf_arrayOfOneElement() {
      String[] array = new String[] {"a"};
      List&lt;String&gt; list = ImmutableList.copyOf(array);
      assertEquals(Collections.singletonList("a"), list);
    }

    public void testCopyOf_nullArray() {
      try {
        ImmutableList.copyOf((String[]) null);
        fail();
      } catch (NullPointerException expected) {
      }
    }

    public void testCopyOf_arrayContainingOnlyNull() {
      String[] array = new String[] {null};
      try {
        ImmutableList.copyOf(array);
        fail();
      } catch (NullPointerException expected) {
      }
    }

    public void testCopyOf_collection_empty() {
      // "&lt;String&gt;" is required to work around a javac 1.5 bug.
      Collection&lt;String&gt; c = MinimalCollection.&lt;String&gt;of();
      List&lt;String&gt; list = ImmutableList.copyOf(c);
      assertEquals(Collections.emptyList(), list);
    }

    public void testCopyOf_collection_oneElement() {
      Collection&lt;String&gt; c = MinimalCollection.of("a");
      List&lt;String&gt; list = ImmutableList.copyOf(c);
      assertEquals(Collections.singletonList("a"), list);
    }

    public void testCopyOf_collection_general() {
      Collection&lt;String&gt; c = MinimalCollection.of("a", "b", "a");
      List&lt;String&gt; list = ImmutableList.copyOf(c);
      assertEquals(asList("a", "b", "a"), list);
      List&lt;String&gt; mutableList = asList("a", "b");
      list = ImmutableList.copyOf(mutableList);
      mutableList.set(0, "c");
      assertEquals(asList("a", "b"), list);
    }

    public void testCopyOf_collectionContainingNull() {
      Collection&lt;String&gt; c = MinimalCollection.of("a", null, "b");
      try {
        ImmutableList.copyOf(c);
        fail();
      } catch (NullPointerException expected) {
      }
    }

    public void testCopyOf_iterator_empty() {
      Iterator&lt;String&gt; iterator = Iterators.emptyIterator();
      List&lt;String&gt; list = ImmutableList.copyOf(iterator);
      assertEquals(Collections.emptyList(), list);
    }

    public void testCopyOf_iterator_oneElement() {
      Iterator&lt;String&gt; iterator = Iterators.singletonIterator("a");
      List&lt;String&gt; list = ImmutableList.copyOf(iterator);
      assertEquals(Collections.singletonList("a"), list);
    }

    public void testCopyOf_iterator_general() {
      Iterator&lt;String&gt; iterator = asList("a", "b", "a").iterator();
      List&lt;String&gt; list = ImmutableList.copyOf(iterator);
      assertEquals(asList("a", "b", "a"), list);
    }

    public void testCopyOf_iteratorContainingNull() {
      Iterator&lt;String&gt; iterator = asList("a", null, "b").iterator();
      try {
        ImmutableList.copyOf(iterator);
        fail();
      } catch (NullPointerException expected) {
      }
    }

    public void testCopyOf_iteratorNull() {
      try {
        ImmutableList.copyOf((Iterator&lt;String&gt;) null);
        fail();
      } catch (NullPointerException expected) {
      }
    }

    public void testCopyOf_concurrentlyMutating() {
      List&lt;String&gt; sample = Lists.newArrayList("a", "b", "c");
      for (int delta : new int[] {-1, 0, 1}) {
        for (int i = 0; i &lt; sample.size(); i++) {
          Collection&lt;String&gt; misleading = Helpers.misleadingSizeCollection(delta);
          List&lt;String&gt; expected = sample.subList(0, i);
          misleading.addAll(expected);
          assertEquals(expected, ImmutableList.copyOf(misleading));
          assertEquals(expected, ImmutableList.copyOf((Iterable&lt;String&gt;) misleading));
        }
      }
    }

    private static class CountingIterable implements Iterable&lt;String&gt; {
      int count = 0;

      @Override
      public Iterator&lt;String&gt; iterator() {
        count++;
        return asList("a", "b", "a").iterator();
      }
    }

    public void testCopyOf_plainIterable() {
      CountingIterable iterable = new CountingIterable();
      List&lt;String&gt; list = ImmutableList.copyOf(iterable);
      assertEquals(asList("a", "b", "a"), list);
    }

    public void testCopyOf_plainIterable_iteratesOnce() {
      CountingIterable iterable = new CountingIterable();
      ImmutableList&lt;String&gt; unused = ImmutableList.copyOf(iterable);
      assertEquals(1, iterable.count);
    }

    public void testCopyOf_shortcut_empty() {
      Collection&lt;String&gt; c = ImmutableList.of();
      assertSame(c, ImmutableList.copyOf(c));
    }

    public void testCopyOf_shortcut_singleton() {
      Collection&lt;String&gt; c = ImmutableList.of("a");
      assertSame(c, ImmutableList.copyOf(c));
    }

    public void testCopyOf_shortcut_immutableList() {
      Collection&lt;String&gt; c = ImmutableList.of("a", "b", "c");
      assertSame(c, ImmutableList.copyOf(c));
    }

    public void testBuilderAddArrayHandlesNulls() {
      String[] elements = {"a", null, "b"};
      ImmutableList.Builder&lt;String&gt; builder = ImmutableList.builder();
      try {
        builder.add(elements);
        fail("Expected NullPointerException");
      } catch (NullPointerException expected) {
      }
      ImmutableList&lt;String&gt; result = builder.build();

      /*
       * Maybe it rejects all elements, or maybe it adds "a" before failing.
       * Either way is fine with us.
       */
      if (result.isEmpty()) {
        return;
      }
      assertTrue(ImmutableList.of("a").equals(result));
      assertEquals(1, result.size());
    }

    public void testBuilderAddCollectionHandlesNulls() {
      List&lt;String&gt; elements = Arrays.asList("a", null, "b");
      ImmutableList.Builder&lt;String&gt; builder = ImmutableList.builder();
      try {
        builder.addAll(elements);
        fail("Expected NullPointerException");
      } catch (NullPointerException expected) {
      }
      ImmutableList&lt;String&gt; result = builder.build();
      assertEquals(ImmutableList.of("a"), result);
      assertEquals(1, result.size());
    }

    public void testSortedCopyOf_natural() {
      Collection&lt;Integer&gt; c = MinimalCollection.of(4, 16, 10, -1, 5);
      ImmutableList&lt;Integer&gt; list = ImmutableList.sortedCopyOf(c);
      assertEquals(asList(-1, 4, 5, 10, 16), list);
    }

    public void testSortedCopyOf_natural_empty() {
      Collection&lt;Integer&gt; c = MinimalCollection.of();
      ImmutableList&lt;Integer&gt; list = ImmutableList.sortedCopyOf(c);
      assertEquals(asList(), list);
    }

    public void testSortedCopyOf_natural_singleton() {
      Collection&lt;Integer&gt; c = MinimalCollection.of(100);
      ImmutableList&lt;Integer&gt; list = ImmutableList.sortedCopyOf(c);
      assertEquals(asList(100), list);
    }

    public void testSortedCopyOf_natural_containsNull() {
      Collection&lt;Integer&gt; c = MinimalCollection.of(1, 3, null, 2);
      try {
        ImmutableList.sortedCopyOf(c);
        fail("Expected NPE");
      } catch (NullPointerException expected) {
      }
    }

    public void testSortedCopyOf() {
      Collection&lt;String&gt; c = MinimalCollection.of("a", "b", "A", "c");
      List&lt;String&gt; list = ImmutableList.sortedCopyOf(String.CASE_INSENSITIVE_ORDER, c);
      assertEquals(asList("a", "A", "b", "c"), list);
    }

    public void testSortedCopyOf_empty() {
      Collection&lt;String&gt; c = MinimalCollection.of();
      List&lt;String&gt; list = ImmutableList.sortedCopyOf(String.CASE_INSENSITIVE_ORDER, c);
      assertEquals(asList(), list);
    }

    public void testSortedCopyOf_singleton() {
      Collection&lt;String&gt; c = MinimalCollection.of("a");
      List&lt;String&gt; list = ImmutableList.sortedCopyOf(String.CASE_INSENSITIVE_ORDER, c);
      assertEquals(asList("a"), list);
    }

    public void testSortedCopyOf_containsNull() {
      Collection&lt;String&gt; c = MinimalCollection.of("a", "b", "A", null, "c");
      try {
        ImmutableList.sortedCopyOf(String.CASE_INSENSITIVE_ORDER, c);
        fail("Expected NPE");
      } catch (NullPointerException expected) {
      }
    }

    // TODO(b/172823566): Use mainline testToImmutableList once CollectorTester is usable to java7.
    public void testToImmutableList_java7_combine() {
      ImmutableList.Builder&lt;String&gt; zis = ImmutableList.&lt;String&gt;builder().add("a", "b");
      ImmutableList.Builder&lt;String&gt; zat = ImmutableList.&lt;String&gt;builder().add("c", "d");
      ImmutableList&lt;String&gt; list = zis.combine(zat).build();
      assertEquals(asList("a", "b", "c", "d"), list);
    }
  }

  @GwtIncompatible // reflection
  public static class ConcurrentTests extends TestCase {
    enum WrapWithIterable {
      WRAP,
      NO_WRAP
    }

    private static void runConcurrentlyMutatedTest(
        Collection&lt;Integer&gt; initialContents,
        Iterable&lt;ListFrobber&gt; actionsToPerformConcurrently,
        WrapWithIterable wrap) {
      ConcurrentlyMutatedList&lt;Integer&gt; concurrentlyMutatedList =
          newConcurrentlyMutatedList(initialContents, actionsToPerformConcurrently);

      Iterable&lt;Integer&gt; iterableToCopy =
          wrap == WrapWithIterable.WRAP
              ? unmodifiableIterable(concurrentlyMutatedList)
              : concurrentlyMutatedList;

      ImmutableList&lt;Integer&gt; copyOfIterable = ImmutableList.copyOf(iterableToCopy);

      assertTrue(concurrentlyMutatedList.getAllStates().contains(copyOfIterable));
    }

    private static void runConcurrentlyMutatedTest(WrapWithIterable wrap) {
      /*
       * TODO: Iterate over many array sizes and all possible operation lists,
       * performing adds and removes in different ways.
       */
      runConcurrentlyMutatedTest(elements(), ops(add(1), add(2)), wrap);

      runConcurrentlyMutatedTest(elements(), ops(add(1), nop()), wrap);

      runConcurrentlyMutatedTest(elements(), ops(add(1), remove()), wrap);

      runConcurrentlyMutatedTest(elements(), ops(nop(), add(1)), wrap);

      runConcurrentlyMutatedTest(elements(1), ops(remove(), nop()), wrap);

      runConcurrentlyMutatedTest(elements(1), ops(remove(), add(2)), wrap);

      runConcurrentlyMutatedTest(elements(1, 2), ops(remove(), remove()), wrap);
<a name="2"></a>
      runConcurrentlyMutatedTest(elements(1, 2), ops(remove(), nop()), wrap);

      runConcurrentlyMutatedTest(elements(1, 2), ops(<font color="#980517"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>remove(), add(3)), wrap);

      runConcurrentlyMutatedTest(elements(1, 2), ops(nop(), remove()), wrap);

      runConcurrentlyMutatedTest(elements(1, 2, 3), ops(remove(), remove()), wrap);
    }

    private </b></font>static ImmutableList&lt;Integer&gt; elements(Integer... elements) {
      return ImmutableList.copyOf(elements);
    }

    private static ImmutableList&lt;ListFrobber&gt; ops(ListFrobber... elements) {
      return ImmutableList.copyOf(elements);
    }

    public void testCopyOf_concurrentlyMutatedList() {
      runConcurrentlyMutatedTest(WrapWithIterable.NO_WRAP);
    }

    public void testCopyOf_concurrentlyMutatedIterable() {
      runConcurrentlyMutatedTest(WrapWithIterable.WRAP);
    }

    /** An operation to perform on a list. */
    interface ListFrobber {
      void perform(List&lt;Integer&gt; list);
    }

    static ListFrobber add(final int element) {
      return new ListFrobber() {
        @Override
        public void perform(List&lt;Integer&gt; list) {
          list.add(0, element);
        }
      };
    }

    static ListFrobber remove() {
      return new ListFrobber() {
        @Override
        public void perform(List&lt;Integer&gt; list) {
          list.remove(0);
        }
      };
    }

    static ListFrobber nop() {
      return new ListFrobber() {
        @Override
        public void perform(List&lt;Integer&gt; list) {}
      };
    }

    /** A list that mutates itself after every call to each of its {@link List} methods. */
    interface ConcurrentlyMutatedList&lt;E&gt; extends List&lt;E&gt; {
      /**
       * The elements of a {@link ConcurrentlyMutatedList} are added and removed over time. This
       * method returns every state that the list has passed through at some point.
       */
      Set&lt;List&lt;E&gt;&gt; getAllStates();
    }

    /**
     * Returns a {@link ConcurrentlyMutatedList} that performs the given operations as its
     * concurrent modifications. The mutations occur in the same thread as the triggering method
     * call.
     */
    private static ConcurrentlyMutatedList&lt;Integer&gt; newConcurrentlyMutatedList(
        final Collection&lt;Integer&gt; initialContents,
        final Iterable&lt;ListFrobber&gt; actionsToPerformConcurrently) {
      InvocationHandler invocationHandler =
          new InvocationHandler() {
            final CopyOnWriteArrayList&lt;Integer&gt; delegate =
                new CopyOnWriteArrayList&lt;&gt;(initialContents);

            final Method getAllStatesMethod =
                getOnlyElement(asList(ConcurrentlyMutatedList.class.getDeclaredMethods()));

            final Iterator&lt;ListFrobber&gt; remainingActions = actionsToPerformConcurrently.iterator();

            final Set&lt;List&lt;Integer&gt;&gt; allStates = newHashSet();

            @Override
            public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
              return method.equals(getAllStatesMethod)
                  ? getAllStates()
                  : invokeListMethod(method, args);
            }

            private Set&lt;List&lt;Integer&gt;&gt; getAllStates() {
              return allStates;
            }

            private Object invokeListMethod(Method method, Object[] args) throws Throwable {
              try {
                Object returnValue = method.invoke(delegate, args);
                mutateDelegate();
                return returnValue;
              } catch (InvocationTargetException e) {
                throw e.getCause();
              } catch (IllegalAccessException e) {
                throw new AssertionError(e);
<a name="7"></a>              }
            }

            private void mutateDelegate() <font color="#38a4a5"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>{
              allStates.add(ImmutableList.copyOf(delegate));
              remainingActions.next().perform(delegate);
              allStates.add(ImmutableList.copyOf(delegate));
            }</b></font>
          };

      @SuppressWarnings("unchecked")
      ConcurrentlyMutatedList&lt;Integer&gt; list =
          (ConcurrentlyMutatedList&lt;Integer&gt;)
              newProxyInstance(
                  ImmutableListTest.CreationTests.class.getClassLoader(),
                  new Class[] {ConcurrentlyMutatedList.class},
                  invocationHandler);
      return list;
    }
  }

  public static class BasicTests extends TestCase {

    @GwtIncompatible // NullPointerTester
    public void testNullPointers() {
      NullPointerTester tester = new NullPointerTester();
      tester.testAllPublicStaticMethods(ImmutableList.class);
      tester.testAllPublicInstanceMethods(ImmutableList.of(1, 2, 3));
    }

    @GwtIncompatible // SerializableTester
    public void testSerialization_empty() {
      Collection&lt;String&gt; c = ImmutableList.of();
      assertSame(c, SerializableTester.reserialize(c));
    }

    @GwtIncompatible // SerializableTester
    public void testSerialization_singleton() {
      Collection&lt;String&gt; c = ImmutableList.of("a");
      SerializableTester.reserializeAndAssert(c);
    }

    @GwtIncompatible // SerializableTester
    public void testSerialization_multiple() {
      Collection&lt;String&gt; c = ImmutableList.of("a", "b", "c");
      SerializableTester.reserializeAndAssert(c);
    }
<a name="1"></a>
    public void testEquals_immutableList() {
      Collection&lt;String&gt; c = ImmutableList.of("a", "b", "c");
      <font color="#f63526"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>assertTrue(c.equals(ImmutableList.of("a", "b", "c")));
      assertFalse(c.equals(ImmutableList.of("a", "c", "b")));
      assertFalse(c.equals(ImmutableList.of("a", "b")));
      assertFalse(c.equals(ImmutableList.of("a", "b", "c", "d")));
    }

    public void te</b></font>stBuilderAdd() {
      ImmutableList&lt;String&gt; list =
          new ImmutableList.Builder&lt;String&gt;().add("a").add("b").add("a").add("c").build();
      assertEquals(asList("a", "b", "a", "c"), list);
    }

    @GwtIncompatible("Builder impl")
    public void testBuilderForceCopy() {
      ImmutableList.Builder&lt;Integer&gt; builder = ImmutableList.builder();
      Object[] prevArray = null;
      for (int i = 0; i &lt; 10; i++) {
        builder.add(i);
        assertNotSame(builder.contents, prevArray);
        prevArray = builder.contents;
        ImmutableList&lt;Integer&gt; unused = builder.build();
      }
    }

    @GwtIncompatible
    public void testBuilderExactlySizedReusesArray() {
      ImmutableList.Builder&lt;Integer&gt; builder = ImmutableList.builderWithExpectedSize(10);
      Object[] builderArray = builder.contents;
      for (int i = 0; i &lt; 10; i++) {
        builder.add(i);
      }
      Object[] builderArrayAfterAdds = builder.contents;
      RegularImmutableList&lt;Integer&gt; list = (RegularImmutableList&lt;Integer&gt;) builder.build();
      Object[] listInternalArray = list.array;
      assertSame(builderArray, builderArrayAfterAdds);
      assertSame(builderArray, listInternalArray);
    }

    public void testBuilderAdd_varargs() {
      ImmutableList&lt;String&gt; list =
          new ImmutableList.Builder&lt;String&gt;().add("a", "b", "a", "c").build();
      assertEquals(asList("a", "b", "a", "c"), list);
    }

    public void testBuilderAddAll_iterable() {
      List&lt;String&gt; a = asList("a", "b");
      List&lt;String&gt; b = asList("c", "d");
      ImmutableList&lt;String&gt; list = new ImmutableList.Builder&lt;String&gt;().addAll(a).addAll(b).build();
      assertEquals(asList("a", "b", "c", "d"), list);
      b.set(0, "f");
      assertEquals(asList("a", "b", "c", "d"), list);
    }

    public void testBuilderAddAll_iterator() {
<a name="6"></a>      List&lt;String&gt; a = asList("a", "b");
      List&lt;String&gt; b = asList("c", "d");
      ImmutableList&lt;String&gt; list =
          new ImmutableList.Builder&lt;String&gt;().addAll(<font color="#8c8774"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>a.iterator()).addAll(b.iterator()).build();
      assertEquals(asList("a", "b", "c", "d"), list);
      b.set(0, "f");
      assertEquals(asList("a", "b", "c", "d"), list);
    }

    public void testCo</b></font>mplexBuilder() {
      List&lt;Integer&gt; colorElem = asList(0x00, 0x33, 0x66, 0x99, 0xCC, 0xFF);
      ImmutableList.Builder&lt;Integer&gt; webSafeColorsBuilder = ImmutableList.builder();
      for (Integer red : colorElem) {
        for (Integer green : colorElem) {
          for (Integer blue : colorElem) {
            webSafeColorsBuilder.add((red &lt;&lt; 16) + (green &lt;&lt; 8) + blue);
          }
        }
      }
      ImmutableList&lt;Integer&gt; webSafeColors = webSafeColorsBuilder.build();
      assertEquals(216, webSafeColors.size());
      Integer[] webSafeColorArray = webSafeColors.toArray(new Integer[webSafeColors.size()]);
      assertEquals(0x000000, (int) webSafeColorArray[0]);
      assertEquals(0x000033, (int) webSafeColorArray[1]);
      assertEquals(0x000066, (int) webSafeColorArray[2]);
      assertEquals(0x003300, (int) webSafeColorArray[6]);
      assertEquals(0x330000, (int) webSafeColorArray[36]);
      assertEquals(0x000066, (int) webSafeColors.get(2));
      assertEquals(0x003300, (int) webSafeColors.get(6));
      ImmutableList&lt;Integer&gt; addedColor = webSafeColorsBuilder.add(0x00BFFF).build();
      assertEquals(
          "Modifying the builder should not have changed any already" + " built sets",
          216,
          webSafeColors.size());
      assertEquals("the new array should be one bigger than webSafeColors", 217, addedColor.size());
      Integer[] appendColorArray = addedColor.toArray(new Integer[addedColor.size()]);
      assertEquals(0x00BFFF, (int) appendColorArray[216]);
    }

    public void testBuilderAddHandlesNullsCorrectly() {
      ImmutableList.Builder&lt;String&gt; builder = ImmutableList.builder();
      try {
        builder.add((String) null);
        fail("expected NullPointerException");
      } catch (NullPointerException expected) {
      }

      try {
        builder.add((String[]) null);
        fail("expected NullPointerException");
      } catch (NullPointerException expected) {
      }

      try {
        builder.add("a", null, "b");
        fail("expected NullPointerException");
      } catch (NullPointerException expected) {
      }
    }

    public void testBuilderAddAllHandlesNullsCorrectly() {
      ImmutableList.Builder&lt;String&gt; builder = ImmutableList.builder();
      try {
        builder.addAll((Iterable&lt;String&gt;) null);
        fail("expected NullPointerException");
      } catch (NullPointerException expected) {
      }

      try {
        builder.addAll((Iterator&lt;String&gt;) null);
        fail("expected NullPointerException");
      } catch (NullPointerException expected) {
      }

      builder = ImmutableList.builder();
      List&lt;String&gt; listWithNulls = asList("a", null, "b");
      try {
        builder.addAll(listWithNulls);
        fail("expected NullPointerException");
      } catch (NullPointerException expected) {
      }

      builder = ImmutableList.builder();
      Iterator&lt;String&gt; iteratorWithNulls = asList("a", null, "b").iterator();
      try {
        builder.addAll(iteratorWithNulls);
        fail("expected NullPointerException");
      } catch (NullPointerException expected) {
      }

      Iterable&lt;String&gt; iterableWithNulls = MinimalIterable.of("a", null, "b");
      try {
        builder.addAll(iterableWithNulls);
        fail("expected NullPointerException");
      } catch (NullPointerException expected) {
      }
    }

    public void testAsList() {
      ImmutableList&lt;String&gt; list = ImmutableList.of("a", "b");
      assertSame(list, list.asList());
    }

    @GwtIncompatible("builder internals")
    public void testReusedBuilder() {
      ImmutableList.Builder&lt;String&gt; builder = new ImmutableList.Builder&lt;String&gt;();
      for (int i = 0; i &lt; 10; i++) {
        builder.add("foo");
      }
      builder.add("bar");
      RegularImmutableList&lt;String&gt; list = (RegularImmutableList&lt;String&gt;) builder.build();
      builder.add("baz");
      assertTrue(list.array != builder.contents);
    }
  }
}
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
