<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Matches for TablesTest.java & PerCollectionSizeTestSuiteBuilder.java</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
</HEAD>
<body>
  <div style="align-items: center; display: flex; justify-content: space-around;">
    <div>
      <h3 align="center">
Matches for TablesTest.java & PerCollectionSizeTestSuiteBuilder.java
      </h3>
      <h1 align="center">
        26.9%
      </h1>
      <center>
        <a href="index.html" target="_top">
          INDEX
        </a>
        <span>-</span>
        <a href="help-en.html" target="_top">
          HELP
        </a>
      </center>
    </div>
    <div>
<TABLE BORDER="1" CELLSPACING="0" BGCOLOR="#d0d0d0">
<TR><TH><TH>TablesTest.java (29.591837%)<TH>PerCollectionSizeTestSuiteBuilder.java (24.786325%)<TH>Tokens
<TR><TD BGCOLOR="#0000ff"><FONT COLOR="#0000ff">-</FONT><TD><A HREF="javascript:ZweiFrames('match104137-0.html#0',2,'match104137-1.html#0',3)" NAME="0">(50-61)<TD><A HREF="javascript:ZweiFrames('match104137-0.html#0',2,'match104137-1.html#0',3)" NAME="0">(64-75)</A><TD ALIGN=center><FONT COLOR="#ff0000">10</FONT>
<TR><TD BGCOLOR="#f63526"><FONT COLOR="#f63526">-</FONT><TD><A HREF="javascript:ZweiFrames('match104137-0.html#1',2,'match104137-1.html#1',3)" NAME="1">(19-33)<TD><A HREF="javascript:ZweiFrames('match104137-0.html#1',2,'match104137-1.html#1',3)" NAME="1">(22-44)</A><TD ALIGN=center><FONT COLOR="#ff0000">10</FONT>
<TR><TD BGCOLOR="#980517"><FONT COLOR="#980517">-</FONT><TD><A HREF="javascript:ZweiFrames('match104137-0.html#2',2,'match104137-1.html#2',3)" NAME="2">(39-44)<TD><A HREF="javascript:ZweiFrames('match104137-0.html#2',2,'match104137-1.html#2',3)" NAME="2">(93-96)</A><TD ALIGN=center><FONT COLOR="#e50000">9</FONT>
</TABLE>
    </div>
  </div>
  <hr>
  <div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>TablesTest.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<HR>
<PRE>
/*
 * Copyright (C) 2008 The Guava Authors
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
<A NAME="1"></A>
package com.google.common.collect;

<FONT color="#f63526"><A HREF="javascript:ZweiFrames('match104137-1.html#1',3,'match104137-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>import com.google.common.annotations.GwtCompatible;
import com.google.common.annotations.GwtIncompatible;
import com.google.common.collect.Table.Cell;
import com.google.common.testing.CollectorTester;
import com.google.common.testing.EqualsTester;
import com.google.common.testing.SerializableTester;
import java.util.stream.Collector;
import junit.framework.TestCase;

/**
 * Tests for {@link Tables}.
 *
 * @author Jared Levy
 */
@</B></FONT>GwtCompatible(emulated = true)
public class TablesTest extends TestCase {

<A NAME="2"></A>  // The bulk of the toTable tests can be found in TableCollectorsTest.
  // This gives minimal coverage to the forwarding functions
  public void testToTableSanityTest() {
    <FONT color="#980517"><A HREF="javascript:ZweiFrames('match104137-1.html#2',3,'match104137-top.html#2',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>Collector&lt;Cell&lt;String, String, Integer&gt;, ?, Table&lt;String, String, Integer&gt;&gt; collector =
        Tables.toTable(Cell::getRowKey, Cell::getColumnKey, Cell::getValue, HashBasedTable::create);
    HashBasedTable&lt;String, String, Integer&gt; expected = HashBasedTable.create();
    expected.put(&quot;one&quot;, &quot;uno&quot;, 1);
    CollectorTester.of(collector)
        .expectCollects(HashBasedTable.create</B></FONT>())
        .expectCollects(expected, Tables.immutableCell(&quot;one&quot;, &quot;uno&quot;, 1));
  }
<A NAME="0"></A>
  public void testToTableMergingSanityTest() {
    Collector&lt;Cell&lt;String, String, Integer&gt;, ?, Table&lt;String, String, Integer&gt;&gt; collector =
        <FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match104137-1.html#0',3,'match104137-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>Tables.toTable(
            Cell::getRowKey,
            Cell::getColumnKey,
            Cell::getValue,
            Integer::sum,
            HashBasedTable::create);
    HashBasedTable&lt;String, String, Integer&gt; expected = HashBasedTable.create();
    expected.put(&quot;one&quot;, &quot;uno&quot;, 3);
    CollectorTester.of(collector)
        .expectCollects(HashBasedTable.create())
        .expectCollects(
            expected, Tables.immutableCell(&quot;one&quot;, &quot;uno&quot;, 1), Tables.immutableCell</B></FONT>(&quot;one&quot;, &quot;uno&quot;, 2));
  }

  @GwtIncompatible // SerializableTester
  public void testImmutableEntrySerialization() {
    Cell&lt;String, Integer, Character&gt; entry = Tables.immutableCell(&quot;foo&quot;, 1, 'a');
    SerializableTester.reserializeAndAssert(entry);
  }

  public void testImmutableEntryToString() {
    Cell&lt;String, Integer, Character&gt; entry = Tables.immutableCell(&quot;foo&quot;, 1, 'a');
    assertEquals(&quot;(foo,1)=a&quot;, entry.toString());

    Cell&lt;String, Integer, Character&gt; nullEntry = Tables.immutableCell(null, null, null);
    assertEquals(&quot;(null,null)=null&quot;, nullEntry.toString());
  }

  public void testEntryEquals() {
    Cell&lt;String, Integer, Character&gt; entry = Tables.immutableCell(&quot;foo&quot;, 1, 'a');

    new EqualsTester()
        .addEqualityGroup(entry, Tables.immutableCell(&quot;foo&quot;, 1, 'a'))
        .addEqualityGroup(Tables.immutableCell(&quot;bar&quot;, 1, 'a'))
        .addEqualityGroup(Tables.immutableCell(&quot;foo&quot;, 2, 'a'))
        .addEqualityGroup(Tables.immutableCell(&quot;foo&quot;, 1, 'b'))
        .addEqualityGroup(Tables.immutableCell(null, null, null))
        .testEquals();
  }

  public void testEntryEqualsNull() {
    Cell&lt;String, Integer, Character&gt; entry = Tables.immutableCell(null, null, null);

    new EqualsTester()
        .addEqualityGroup(entry, Tables.immutableCell(null, null, null))
        .addEqualityGroup(Tables.immutableCell(&quot;bar&quot;, null, null))
        .addEqualityGroup(Tables.immutableCell(null, 2, null))
        .addEqualityGroup(Tables.immutableCell(null, null, 'b'))
        .addEqualityGroup(Tables.immutableCell(&quot;foo&quot;, 1, 'a'))
        .testEquals();
  }
}
</PRE>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>PerCollectionSizeTestSuiteBuilder.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<HR>
<PRE>
/*
 * Copyright (C) 2008 The Guava Authors
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.google.common.collect.testing;

<A NAME="1"></A>import com.google.common.annotations.GwtIncompatible;
import com.google.common.collect.testing.features.CollectionSize;
import com.google.common.collect.testing.features.Feature;
<FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match104137-0.html#1',2,'match104137-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>import com.google.common.collect.testing.features.FeatureUtil;
import java.lang.reflect.Method;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.Set;
import java.util.logging.Logger;
import junit.framework.TestSuite;

/**
 * This builder creates a composite test suite, containing a separate test suite for each {@link
 * CollectionSize} present in the features specified by {@link #withFeatures(Feature...)}.
 *
 * @param &lt;B&gt; The concrete type of this builder (the 'self-type'). All the Builder methods of this
 *     class (such as {@link #named(String)}) return this type, so that Builder methods of more
 *     derived classes can be chained onto them without casting.
 * @param &lt;G&gt; The type of the generator to be passed to testers in the generated test suite. An
 *     instance of G should somehow provide an instance of the class under test, plus any other
 *     information required to parameterize the test.
 * @see FeatureSpecificTestSuiteBuilder
 * @author George van den Driessche
 */
@</B></FONT>GwtIncompatible
public abstract class PerCollectionSizeTestSuiteBuilder&lt;
        B extends PerCollectionSizeTestSuiteBuilder&lt;B, G, T, E&gt;,
        G extends TestContainerGenerator&lt;T, E&gt;,
        T,
        E&gt;
    extends FeatureSpecificTestSuiteBuilder&lt;B, G&gt; {
  private static final Logger logger =
      Logger.getLogger(PerCollectionSizeTestSuiteBuilder.class.getName());

  /** Creates a runnable JUnit test suite based on the criteria already given. */
  @Override
  public TestSuite createTestSuite() {
    checkCanCreate();

    String name = getName();
    // Copy this set, so we can modify it.
<A NAME="0"></A>    Set&lt;Feature&lt;?&gt;&gt; features = Helpers.copyToSet(getFeatures());
    List&lt;Class&lt;? extends AbstractTester&gt;&gt; testers = getTesters();

    <FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match104137-0.html#0',2,'match104137-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>logger.fine(&quot; Testing: &quot; + name);

    // Split out all the specified sizes.
    Set&lt;Feature&lt;?&gt;&gt; sizesToTest = Helpers.&lt;Feature&lt;?&gt;&gt;copyToSet(CollectionSize.values());
    sizesToTest.retainAll(features);
    features.removeAll(sizesToTest);

    FeatureUtil.addImpliedFeatures(sizesToTest);
    sizesToTest.retainAll(
        Arrays.asList(CollectionSize.ZERO, CollectionSize.ONE, CollectionSize.SEVERAL));

    logger.fine</B></FONT>(&quot;   Sizes: &quot; + formatFeatureSet(sizesToTest));

    if (sizesToTest.isEmpty()) {
      throw new IllegalStateException(
          name
              + &quot;: no CollectionSizes specified (check the argument to &quot;
              + &quot;FeatureSpecificTestSuiteBuilder.withFeatures().)&quot;);
    }

    TestSuite suite = new TestSuite(name);
    for (Feature&lt;?&gt; collectionSize : sizesToTest) {
      String oneSizeName =
          Platform.format(
              &quot;%s [collection size: %s]&quot;, name, collectionSize.toString().toLowerCase());
      OneSizeGenerator&lt;T, E&gt; oneSizeGenerator =
<A NAME="2"></A>          new OneSizeGenerator&lt;&gt;(getSubjectGenerator(), (CollectionSize) collectionSize);
      Set&lt;Feature&lt;?&gt;&gt; oneSizeFeatures = Helpers.copyToSet(features);
      oneSizeFeatures.add(collectionSize);
      <FONT color="#980517"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match104137-0.html#2',2,'match104137-top.html#2',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>Set&lt;Method&gt; oneSizeSuppressedTests = getSuppressedTests();

      OneSizeTestSuiteBuilder&lt;T, E&gt; oneSizeBuilder =
          new OneSizeTestSuiteBuilder&lt;T, E&gt;(testers)</B></FONT>
              .named(oneSizeName)
              .usingGenerator(oneSizeGenerator)
              .withFeatures(oneSizeFeatures)
              .withSetUp(getSetUp())
              .withTearDown(getTearDown())
              .suppressing(oneSizeSuppressedTests);
      TestSuite oneSizeSuite = oneSizeBuilder.createTestSuite();
      suite.addTest(oneSizeSuite);

      for (TestSuite derivedSuite : createDerivedSuites(oneSizeBuilder)) {
        oneSizeSuite.addTest(derivedSuite);
      }
    }
    return suite;
  }

  protected List&lt;TestSuite&gt; createDerivedSuites(
      FeatureSpecificTestSuiteBuilder&lt;?, ? extends OneSizeTestContainerGenerator&lt;T, E&gt;&gt;
          parentBuilder) {
    return new ArrayList&lt;&gt;();
  }

  /** Builds a test suite for one particular {@link CollectionSize}. */
  private static final class OneSizeTestSuiteBuilder&lt;T, E&gt;
      extends FeatureSpecificTestSuiteBuilder&lt;
          OneSizeTestSuiteBuilder&lt;T, E&gt;, OneSizeGenerator&lt;T, E&gt;&gt; {
    private final List&lt;Class&lt;? extends AbstractTester&gt;&gt; testers;

    public OneSizeTestSuiteBuilder(List&lt;Class&lt;? extends AbstractTester&gt;&gt; testers) {
      this.testers = testers;
    }

    @Override
    protected List&lt;Class&lt;? extends AbstractTester&gt;&gt; getTesters() {
      return testers;
    }
  }
}
</PRE>
</div>
  </div>
</body>
</html>
