<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for Multisets_1.java &amp; FreshValueGenerator.java</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for Multisets_1.java &amp; FreshValueGenerator.java
      </h3>
<h1 align="center">
        17.7%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>Multisets_1.java (18.234165%)<th>FreshValueGenerator.java (17.241379%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(19-62)<td><a href="#" name="0">(97-132)</a><td align="center"><font color="#ff0000">31</font>
<tr onclick='openModal("#f63526")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f63526"><font color="#f63526">-</font><td><a href="#" name="1">(554-567)<td><a href="#" name="1">(488-501)</a><td align="center"><font color="#b40000">22</font>
<tr onclick='openModal("#980517")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#980517"><font color="#980517">-</font><td><a href="#" name="2">(326-340)<td><a href="#" name="2">(453-467)</a><td align="center"><font color="#b40000">22</font>
<tr onclick='openModal("#53858b")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#53858b"><font color="#53858b">-</font><td><a href="#" name="3">(1196-1207)<td><a href="#" name="3">(473-484)</a><td align="center"><font color="#9c0000">19</font>
<tr onclick='openModal("#6cc417")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#6cc417"><font color="#6cc417">-</font><td><a href="#" name="4">(422-431)<td><a href="#" name="4">(551-561)</a><td align="center"><font color="#8b0000">17</font>
<tr onclick='openModal("#151b8d")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#151b8d"><font color="#151b8d">-</font><td><a href="#" name="5">(1003-1012)<td><a href="#" name="5">(578-587)</a><td align="center"><font color="#830000">16</font>
<tr onclick='openModal("#8c8774")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#8c8774"><font color="#8c8774">-</font><td><a href="#" name="6">(159-168)<td><a href="#" name="6">(1011-1019)</a><td align="center"><font color="#730000">14</font>
<tr onclick='openModal("#38a4a5")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#38a4a5"><font color="#38a4a5">-</font><td><a href="#" name="7">(1016-1022)<td><a href="#" name="7">(1034-1041)</a><td align="center"><font color="#6a0000">13</font>
<tr onclick='openModal("#c58917")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#c58917"><font color="#c58917">-</font><td><a href="#" name="8">(568-574)<td><a href="#" name="8">(1024-1031)</a><td align="center"><font color="#6a0000">13</font>
<tr onclick='openModal("#83a33a")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#83a33a"><font color="#83a33a">-</font><td><a href="#" name="9">(109-121)<td><a href="#" name="9">(543-549)</a><td align="center"><font color="#620000">12</font>
<tr onclick='openModal("#ad5910")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#ad5910"><font color="#ad5910">-</font><td><a href="#" name="10">(1093-1100)<td><a href="#" name="10">(364-371)</a><td align="center"><font color="#5a0000">11</font>
<tr onclick='openModal("#b041ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#b041ff"><font color="#b041ff">-</font><td><a href="#" name="11">(1189-1195)<td><a href="#" name="11">(376-382)</a><td align="center"><font color="#520000">10</font>
<tr onclick='openModal("#571b7e")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#571b7e"><font color="#571b7e">-</font><td><a href="#" name="12">(1159-1169)<td><a href="#" name="12">(745-750)</a><td align="center"><font color="#520000">10</font>
<tr onclick='openModal("#3b9c9c")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#3b9c9c"><font color="#3b9c9c">-</font><td><a href="#" name="13">(678-683)<td><a href="#" name="13">(434-439)</a><td align="center"><font color="#520000">10</font>
<tr onclick='openModal("#842dce")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#842dce"><font color="#842dce">-</font><td><a href="#" name="14">(267-274)<td><a href="#" name="14">(296-303)</a><td align="center"><font color="#520000">10</font>
<tr onclick='openModal("#f52887")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f52887"><font color="#f52887">-</font><td><a href="#" name="15">(84-102)<td><a href="#" name="15">(948-953)</a><td align="center"><font color="#520000">10</font>
<tr onclick='openModal("#2981b2")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#2981b2"><font color="#2981b2">-</font><td><a href="#" name="16">(918-921)<td><a href="#" name="16">(327-330)</a><td align="center"><font color="#4a0000">9</font>
<tr onclick='openModal("#3090c7")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#3090c7"><font color="#3090c7">-</font><td><a href="#" name="17">(433-438)<td><a href="#" name="17">(964-970)</a><td align="center"><font color="#4a0000">9</font>
<tr onclick='openModal("#800517")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#800517"><font color="#800517">-</font><td><a href="#" name="18">(397-415)<td><a href="#" name="18">(185-190)</a><td align="center"><font color="#4a0000">9</font>
<tr onclick='openModal("#f62817")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f62817"><font color="#f62817">-</font><td><a href="#" name="19">(140-145)<td><a href="#" name="19">(502-507)</a><td align="center"><font color="#4a0000">9</font>
<tr onclick='openModal("#4e9258")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#4e9258"><font color="#4e9258">-</font><td><a href="#" name="20">(125-131)<td><a href="#" name="20">(287-293)</a><td align="center"><font color="#4a0000">9</font>
</td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>Multisets_1.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 <a name="0"></a>
2 package com.google.common.collect;
3 <font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>import static com.google.common.base.Preconditions.checkArgument;
4 import static com.google.common.base.Preconditions.checkNotNull;
5 import static com.google.common.collect.CollectPreconditions.checkNonnegative;
6 import static com.google.common.collect.CollectPreconditions.checkRemove;
7 import static java.util.Objects.requireNonNull;
8 import com.google.common.annotations.Beta;
9 import com.google.common.annotations.GwtCompatible;
10 import com.google.common.base.Objects;
11 import com.google.common.base.Predicate;
12 import com.google.common.base.Predicates;
13 import com.google.common.collect.Multiset.Entry;
14 import com.google.common.math.IntMath;
15 import com.google.common.primitives.Ints;
16 import com.google.errorprone.annotations.CanIgnoreReturnValue;
17 import java.io.Serializable;
18 import java.util.Arrays;
19 import java.util.Collection;
20 import java.util.Collections;
21 import java.util.Comparator;
22 import java.util.Iterator;
23 import java.util.NoSuchElementException;
24 import java.util.Set;
25 import java.util.Spliterator;
26 import java.util.function.Function;
27 import java.util.function.Supplier;
28 import java.util.function.ToIntFunction;
29 import java.util.stream.Collector;
30 import javax.annotation.CheckForNull;
31 import org.checkerframework.checker.nullness.qual.Nullable;
32 @</b></font>GwtCompatible
33 @ElementTypesAreNonnullByDefault
34 public final class Multisets {
35   private Multisets() {}
36   public static &lt;T extends @Nullable Object, E extends @Nullable Object, <font color="#f52887"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>M extends Multiset&lt;E&gt;&gt;
37       Collector&lt;T, ?, M&gt; toMultiset(
38           Function&lt;? super T, E&gt; elementFunction,
39           ToIntFunction&lt;? super T&gt; countFunction,
40           Supplier&lt;M&gt; multisetSupplier) {
41     return CollectCollectors.toMultiset(elementFunction, countFunction, multisetSupplier);
42   }
43   public static &lt;E ext</b></font>ends @Nullable Object&gt; Multiset&lt;E&gt; unmodifiableMultiset(
44       Multiset&lt;? extends E&gt; multiset) {
45     if (multiset instanceof UnmodifiableMultiset || multiset instanceof ImmutableMultiset) {
46       @SuppressWarnings("unchecked") <a name="9"></a>      Multiset&lt;E&gt; result = (Multiset&lt;E&gt;) multiset;
47       return result;
48     }
49     return new UnmodifiableMultiset&lt;E&gt;(<font color="#83a33a"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>checkNotNull(multiset));
50   }
51   @Deprecated
52   public static &lt;E&gt; Multiset&lt;E&gt; unmodifiableMultiset(ImmutableMultiset&lt;E&gt; multiset) {
53     return checkNotNull(multiset);
54   }</b></font>
55 <a name="20"></a>
56   static class UnmodifiableMultiset&lt;E extends @Nullable Object&gt; extends ForwardingMultiset&lt;E&gt;
57       implements Serializable {
58     <font color="#4e9258"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>final Multiset&lt;? extends E&gt; delegate;
59     UnmodifiableMultiset(Multiset&lt;? extends E&gt; delegate) {
60       this.delegate = delegate;
61     }
62     @</b></font>SuppressWarnings("unchecked")
63     @Override
64     protected Multiset&lt;E&gt; delegate() {
65       return (Multiset&lt;E&gt;) delegate;
66     }
67 <a name="19"></a>
68     @CheckForNull transient Set&lt;E&gt; elementSet;
69     Set&lt;E&gt; createElementSet() <font color="#f62817"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>{
70       return Collections.&lt;E&gt;unmodifiableSet(delegate.elementSet());
71     }
72     @Override
73     public Set&lt;E&gt; elementSet() {</b></font>
74       Set&lt;E&gt; es = elementSet;
75       return (es == null) ? elementSet = createElementSet() : es;
76     }
77     @CheckForNull transient Set&lt;Multiset.Entry&lt;E&gt;&gt; entrySet;
78     @SuppressWarnings("unchecked")
79     @Override
80     public Set&lt;Multiset.Entry&lt;E&gt;&gt; entrySet() {
81       Set&lt;Multiset.Entry&lt;E&gt;&gt; es = entrySet;
82 <a name="6"></a>      return (es == null)
83           ? entrySet = (Set) <font color="#8c8774"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>Collections.unmodifiableSet(delegate.entrySet())
84           : es;
85     }
86     @Override
87     public Iterator&lt;E&gt; iterator() {
88       return Iterators.&lt;E&gt;unmodifiableIterator(delegate.iterator());
89     }
90     @</b></font>Override
91     public boolean add(@ParametricNullness E element) {
92       throw new UnsupportedOperationException();
93     }
94     @Override
95     public int add(@ParametricNullness E element, int occurrences) {
96       throw new UnsupportedOperationException();
97     }
98     @Override
99     public boolean addAll(Collection&lt;? extends E&gt; elementsToAdd) {
100       throw new UnsupportedOperationException();
101     }
102     @Override
103     public boolean remove(@CheckForNull Object element) {
104       throw new UnsupportedOperationException();
105     }
106     @Override
107     public int remove(@CheckForNull Object element, int occurrences) {
108       throw new UnsupportedOperationException();
109     }
110     @Override
111     public boolean removeAll(Collection&lt;?&gt; elementsToRemove) {
112       throw new UnsupportedOperationException();
113     }
114     @Override
115     public boolean retainAll(Collection&lt;?&gt; elementsToRetain) {
116       throw new UnsupportedOperationException();
117     }
118     @Override
119     public void clear() {
120       throw new UnsupportedOperationException();
121     }
122     @Override
123     public int setCount(@ParametricNullness E element, int count) {
124       throw new UnsupportedOperationException();
125     }
126     @Override
127     public boolean setCount(@ParametricNullness E element, int oldCount, int newCount) {
128       throw new UnsupportedOperationException();
129     }
130     private static final long serialVersionUID = 0;
131   }
132   @Beta
133   public static &lt;E extends @Nullable Object&gt; SortedMultiset&lt;E&gt; unmodifiableSortedMultiset(
134       SortedMultiset&lt;E&gt; sortedMultiset) {
135     return new UnmodifiableSortedMultiset&lt;E&gt;(checkNotNull(sortedMultiset));
136   }
137   public static &lt;E extends @Nullable Object&gt; Multiset.Entry&lt;E&gt; immutableEntry(
138       @ParametricNullness E e, int n) {
139     return new ImmutableEntry&lt;E&gt;(e, n);
140   }
141   static class ImmutableEntry&lt;E extends @Nullable Object&gt; extends AbstractEntry&lt;E&gt;
142       implements Serializable {
143     @ParametricNullness private final E element;
144     private final int count;
145     ImmutableEntry(@ParametricNullness E element, int count) {
146       this.element = element;
147       this.count = count;
148       checkNonnegative(count, "count");
149     }
150     @Override
151 <a name="14"></a>    @ParametricNullness
152     public final E getElement() {
153       return element;
154     <font color="#842dce"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>}
155     @Override
156     public final int getCount() {
157       return count;
158     }
159     @</b></font>CheckForNull
160     public ImmutableEntry&lt;E&gt; nextInBucket() {
161       return null;
162     }
163     private static final long serialVersionUID = 0;
164   }
165   @Beta
166   public static &lt;E extends @Nullable Object&gt; Multiset&lt;E&gt; filter(
167       Multiset&lt;E&gt; unfiltered, Predicate&lt;? super E&gt; predicate) {
168     if (unfiltered instanceof FilteredMultiset) {
169       FilteredMultiset&lt;E&gt; filtered = (FilteredMultiset&lt;E&gt;) unfiltered;
170       Predicate&lt;E&gt; combinedPredicate = Predicates.&lt;E&gt;and(filtered.predicate, predicate);
171       return new FilteredMultiset&lt;E&gt;(filtered.unfiltered, combinedPredicate);
172     }
173     return new FilteredMultiset&lt;E&gt;(unfiltered, predicate);
174   }
175   private static final class FilteredMultiset&lt;E extends @Nullable Object&gt; extends ViewMultiset&lt;E&gt; {
176     final Multiset&lt;E&gt; unfiltered;
177     final Predicate&lt;? super E&gt; predicate;
178 <a name="2"></a>
179     FilteredMultiset(Multiset&lt;E&gt; unfiltered, Predicate&lt;? super E&gt; predicate) {
180       this.unfiltered = checkNotNull(unfiltered);
181       this.predicate = <font color="#980517"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>checkNotNull(predicate);
182     }
183     @Override
184     public UnmodifiableIterator&lt;E&gt; iterator() {
185       return Iterators.filter(unfiltered.iterator(), predicate);
186     }
187     @Override
188     Set&lt;E&gt; createElementSet() {
189       return Sets.filter(unfiltered.elementSet(), predicate);
190     }
191     @Override
192     Iterator&lt;E&gt; elementIterator() {</b></font>
193       throw new AssertionError("should never be called");
194     }
195     @Override
196     Set&lt;Entry&lt;E&gt;&gt; createEntrySet() {
197       return Sets.filter(
198           unfiltered.entrySet(),
199           new Predicate&lt;Entry&lt;E&gt;&gt;() {
200             @Override
201             public boolean apply(Entry&lt;E&gt; entry) {
202               return predicate.apply(entry.getElement());
203             }
204           });
205     }
206     @Override
207     Iterator&lt;Entry&lt;E&gt;&gt; entryIterator() {
208       throw new AssertionError("should never be called");
209     }
210     @Override
211     public int count(@CheckForNull Object element) {
212       int count = unfiltered.count(element);
213       if (count &gt; 0) {
214         @SuppressWarnings("unchecked")         E e = (E) element;
215         return predicate.apply(e) ? count : 0;
216       }
217       return 0;
218     }
219     @Override
220     public int add(@ParametricNullness E element, int occurrences) {
221       checkArgument(
222           predicate.apply(element), "Element %s does not match predicate %s", element, predicate);
223       return unfiltered.add(element, occurrences);
224     }
225     @Override
226     public int remove(@CheckForNull Object element, int occurrences) {
227       checkNonnegative(occurrences, "occurrences");
228       if (occurrences == 0) {
229         return count(element);
230       } else {
231         return contains(element) ? unfiltered.remove(element, occurrences) : 0;
232       }
233     }
234   }
235   static int inferDistinctElements(Iterable&lt;?&gt; elements) {
236     if (elements instanceof Multiset) {
237       return <font color="#800517"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>((Multiset&lt;?&gt;) elements).elementSet().size();
238     }
239     return 11;   }
240   @Beta
241   public static &lt;E</b></font> extends @Nullable Object&gt; Multiset&lt;E&gt; union(
242       final Multiset&lt;? extends E&gt; multiset1, final Multiset&lt;? extends E&gt; multiset2) {
243     checkNotNull(multiset1);
244     checkNotNull(multiset2);
245 <a name="4"></a>
246     return new ViewMultiset&lt;E&gt;() {
247       @Override
248       public boolean contains(<font color="#6cc417"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>@CheckForNull Object element) {
249         return multiset1.contains(element) || multiset2.contains(element);
250       }
251       @Override
252       public boolean isEmpty() {
253         return multiset1.isEmpty() &amp;&amp; multiset2.isEmpty();
254       }
255 <a name="17"></a>
256       @</b></font>Override
257       public int count(@CheckForNull Object element) {
258         return Math.max(multiset1.count(element), <font color="#3090c7"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>multiset2.count(element));
259       }
260       @Override
261       Set&lt;E&gt; createElementSet() {
262         return Sets.union(multiset1.elementSet</b></font>(), multiset2.elementSet());
263       }
264       @Override
265       Iterator&lt;E&gt; elementIterator() {
266         throw new AssertionError("should never be called");
267       }
268       @Override
269       Iterator&lt;Entry&lt;E&gt;&gt; entryIterator() {
270         final Iterator&lt;? extends Entry&lt;? extends E&gt;&gt; iterator1 = multiset1.entrySet().iterator();
271         final Iterator&lt;? extends Entry&lt;? extends E&gt;&gt; iterator2 = multiset2.entrySet().iterator();
272         return new AbstractIterator&lt;Entry&lt;E&gt;&gt;() {
273           @Override
274           @CheckForNull
275           protected Entry&lt;E&gt; computeNext() {
276             if (iterator1.hasNext()) {
277               Entry&lt;? extends E&gt; entry1 = iterator1.next();
278               E element = entry1.getElement();
279               int count = Math.max(entry1.getCount(), multiset2.count(element));
280               return immutableEntry(element, count);
281             }
282             while (iterator2.hasNext()) {
283               Entry&lt;? extends E&gt; entry2 = iterator2.next();
284               E element = entry2.getElement();
285               if (!multiset1.contains(element)) {
286                 return immutableEntry(element, entry2.getCount());
287               }
288             }
289             return endOfData();
290           }
291         };
292       }
293     };
294   }
295   public static &lt;E extends @Nullable Object&gt; Multiset&lt;E&gt; intersection(
296       final Multiset&lt;E&gt; multiset1, final Multiset&lt;?&gt; multiset2) {
297     checkNotNull(multiset1);
298     checkNotNull(multiset2);
299     return new ViewMultiset&lt;E&gt;() {
300       @Override
301       public int count(@CheckForNull Object element) {
302         int count1 = multiset1.count(element);
303         return (count1 == 0) ? 0 : Math.min(count1, multiset2.count(element));
304       }
305       @Override
306       Set&lt;E&gt; createElementSet() {
307         return Sets.intersection(multiset1.elementSet(), multiset2.elementSet());
308       }
309       @Override
310       Iterator&lt;E&gt; elementIterator() {
311         throw new AssertionError("should never be called");
312       }
313       @Override
314       Iterator&lt;Entry&lt;E&gt;&gt; entryIterator() {
315         final Iterator&lt;Entry&lt;E&gt;&gt; iterator1 = multiset1.entrySet().iterator();
316         return new AbstractIterator&lt;Entry&lt;E&gt;&gt;() {
317           @Override
318           @CheckForNull
319           protected Entry&lt;E&gt; computeNext() {
320             while (iterator1.hasNext()) {
321               Entry&lt;E&gt; entry1 = iterator1.next();
322               E element = entry1.getElement();
323               int count = Math.min(entry1.getCount(), multiset2.count(element));
324               if (count &gt; 0) {
325                 return immutableEntry(element, count);
326               }
327             }
328             return endOfData();
329           }
330         };
331       }
332     };
333   }
334   @Beta
335   public static &lt;E extends @Nullable Object&gt; Multiset&lt;E&gt; sum(
336       final Multiset&lt;? extends E&gt; multiset1, final Multiset&lt;? extends E&gt; multiset2) {
337     checkNotNull(multiset1);
338     checkNotNull(multiset2);
339 <a name="1"></a>    return new ViewMultiset&lt;E&gt;() {
340       @Override
341       public boolean contains(@CheckForNull Object element) {
342         return multiset1.contains(element) || <font color="#f63526"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>multiset2.contains(element);
343       }
344       @Override
345       public boolean isEmpty() {
346         return multiset1.isEmpty() &amp;&amp; multiset2.isEmpty();
347       }
348       @Override
349       public int size() {
350         return IntMath.saturatedAdd(multiset1.size(), multiset2.size());
351 <a name="8"></a>      }
352       @</b></font>Override
353       public int count(<font color="#c58917"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>@CheckForNull Object element) {
354         return multiset1.count(element) + multiset2.count(element);
355       }
356       @Override
357       Set&lt;E&gt; createElementSet() {
358         return Sets.union(multiset1.elementSet</b></font>(), multiset2.elementSet());
359       }
360       @Override
361       Iterator&lt;E&gt; elementIterator() {
362         throw new AssertionError("should never be called");
363       }
364       @Override
365       Iterator&lt;Entry&lt;E&gt;&gt; entryIterator() {
366         final Iterator&lt;? extends Entry&lt;? extends E&gt;&gt; iterator1 = multiset1.entrySet().iterator();
367         final Iterator&lt;? extends Entry&lt;? extends E&gt;&gt; iterator2 = multiset2.entrySet().iterator();
368         return new AbstractIterator&lt;Entry&lt;E&gt;&gt;() {
369           @Override
370           @CheckForNull
371           protected Entry&lt;E&gt; computeNext() {
372             if (iterator1.hasNext()) {
373               Entry&lt;? extends E&gt; entry1 = iterator1.next();
374               E element = entry1.getElement();
375               int count = entry1.getCount() + multiset2.count(element);
376               return immutableEntry(element, count);
377             }
378             while (iterator2.hasNext()) {
379               Entry&lt;? extends E&gt; entry2 = iterator2.next();
380               E element = entry2.getElement();
381               if (!multiset1.contains(element)) {
382                 return immutableEntry(element, entry2.getCount());
383               }
384             }
385             return endOfData();
386           }
387         };
388       }
389     };
390   }
391   @Beta
392   public static &lt;E extends @Nullable Object&gt; Multiset&lt;E&gt; difference(
393       final Multiset&lt;E&gt; multiset1, final Multiset&lt;?&gt; multiset2) {
394     checkNotNull(multiset1);
395     checkNotNull(multiset2);
396     return new ViewMultiset&lt;E&gt;() {
397       @Override
398       public int count(@CheckForNull Object element) {
399         int count1 = multiset1.count(element);
400         return (count1 == 0) ? 0 : Math.max(0, count1 - multiset2.count(element));
401       }
402       @Override
403       public void clear() {
404         throw new UnsupportedOperationException();
405       }
406       @Override
407       Iterator&lt;E&gt; elementIterator() {
408         final Iterator&lt;Entry&lt;E&gt;&gt; iterator1 = multiset1.entrySet().iterator();
409         return new AbstractIterator&lt;E&gt;() {
410           @Override
411           @CheckForNull
412           protected E computeNext() {
413             while (iterator1.hasNext()) {
414               Entry&lt;E&gt; entry1 = iterator1.next();
415               E element = entry1.getElement();
416               if (entry1.getCount() &gt; multiset2.count(element)) {
417                 return element;
418               }
419             }
420             return endOfData();
421           }
422         };
423       }
424       @Override
425       Iterator&lt;Entry&lt;E&gt;&gt; entryIterator() {
426         final Iterator&lt;Entry&lt;E&gt;&gt; iterator1 = multiset1.entrySet().iterator();
427         return new AbstractIterator&lt;Entry&lt;E&gt;&gt;() {
428           @Override
429           @CheckForNull
430           protected Entry&lt;E&gt; computeNext() {
431             while (iterator1.hasNext()) {
432               Entry&lt;E&gt; entry1 = iterator1.next();
433               E element = entry1.getElement();
434               int count = entry1.getCount() - multiset2.count(element);
435               if (count &gt; 0) {
436                 return immutableEntry(element, count);
437               }
438             }
439 <a name="13"></a>            return endOfData();
440           }
441         };
442       <font color="#3b9c9c"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>}
443       @Override
444       int distinctElements() {
445         return Iterators.size(entryIterator());
446       }</b></font>
447     };
448   }
449   @CanIgnoreReturnValue
450   public static boolean containsOccurrences(Multiset&lt;?&gt; superMultiset, Multiset&lt;?&gt; subMultiset) {
451     checkNotNull(superMultiset);
452     checkNotNull(subMultiset);
453     for (Entry&lt;?&gt; entry : subMultiset.entrySet()) {
454       int superCount = superMultiset.count(entry.getElement());
455       if (superCount &lt; entry.getCount()) {
456         return false;
457       }
458     }
459     return true;
460   }
461   @CanIgnoreReturnValue
462   public static boolean retainOccurrences(
463       Multiset&lt;?&gt; multisetToModify, Multiset&lt;?&gt; multisetToRetain) {
464     return retainOccurrencesImpl(multisetToModify, multisetToRetain);
465   }
466   private static &lt;E extends @Nullable Object&gt; boolean retainOccurrencesImpl(
467       Multiset&lt;E&gt; multisetToModify, Multiset&lt;?&gt; occurrencesToRetain) {
468     checkNotNull(multisetToModify);
469     checkNotNull(occurrencesToRetain);
470     Iterator&lt;Entry&lt;E&gt;&gt; entryIterator = multisetToModify.entrySet().iterator();
471     boolean changed = false;
472     while (entryIterator.hasNext()) {
473       Entry&lt;E&gt; entry = entryIterator.next();
474       int retainCount = occurrencesToRetain.count(entry.getElement());
475       if (retainCount == 0) {
476         entryIterator.remove();
477         changed = true;
478       } else if (retainCount &lt; entry.getCount()) {
479         multisetToModify.setCount(entry.getElement(), retainCount);
480         changed = true;
481       }
482     }
483     return changed;
484   }
485   @CanIgnoreReturnValue
486   public static boolean removeOccurrences(
487       Multiset&lt;?&gt; multisetToModify, Iterable&lt;?&gt; occurrencesToRemove) {
488     if (occurrencesToRemove instanceof Multiset) {
489       return removeOccurrences(multisetToModify, (Multiset&lt;?&gt;) occurrencesToRemove);
490     } else {
491       checkNotNull(multisetToModify);
492       checkNotNull(occurrencesToRemove);
493       boolean changed = false;
494       for (Object o : occurrencesToRemove) {
495         changed |= multisetToModify.remove(o);
496       }
497       return changed;
498     }
499   }
500   @CanIgnoreReturnValue
501   public static boolean removeOccurrences(
502       Multiset&lt;?&gt; multisetToModify, Multiset&lt;?&gt; occurrencesToRemove) {
503     checkNotNull(multisetToModify);
504     checkNotNull(occurrencesToRemove);
505     boolean changed = false;
506     Iterator&lt;? extends Entry&lt;?&gt;&gt; entryIterator = multisetToModify.entrySet().iterator();
507     while (entryIterator.hasNext()) {
508       Entry&lt;?&gt; entry = entryIterator.next();
509       int removeCount = occurrencesToRemove.count(entry.getElement());
510       if (removeCount &gt;= entry.getCount()) {
511         entryIterator.remove();
512         changed = true;
513       } else if (removeCount &gt; 0) {
514         multisetToModify.remove(entry.getElement(), removeCount);
515         changed = true;
516       }
517     }
518     return changed;
519   }
520   abstract static class AbstractEntry&lt;E extends @Nullable Object&gt; implements Multiset.Entry&lt;E&gt; {
521     @Override
522     public boolean equals(@CheckForNull Object object) {
523       if (object instanceof Multiset.Entry) {
524         Multiset.Entry&lt;?&gt; that = (Multiset.Entry&lt;?&gt;) object;
525         return this.getCount() == that.getCount()
526             &amp;&amp; Objects.equal(this.getElement(), that.getElement());
527       }
528       return false;
529     }
530     @Override
531     public int hashCode() {
532       E e = getElement();
533       return ((e == null) ? 0 : e.hashCode()) ^ getCount();
534     }
535     @Override
536     public String toString() {
537       String text = String.valueOf(getElement());
538       int n = getCount();
539       return (n == 1) ? text : (text + " x " + n);
540     }
541   }
542   static boolean equalsImpl(Multiset&lt;?&gt; multiset, @CheckForNull Object object) {
543     if (object == multiset) {
544       return true;
545     }
546     if (object instanceof Multiset) {
547       Multiset&lt;?&gt; that = (Multiset&lt;?&gt;) object;
548       if (multiset.size() != that.size() || multiset.entrySet().size() != that.entrySet().size()) {
549         return false;
550       }
551       for (Entry&lt;?&gt; entry : that.entrySet()) {
552         if (multiset.count(entry.getElement()) != entry.getCount()) {
553           return false;
554         }
555       }
556       return true;
557     }
558     return false;
559   }
560   static &lt;E extends @Nullable Object&gt; boolean addAllImpl(
561       Multiset&lt;E&gt; self, Collection&lt;? extends E&gt; elements) {
562     checkNotNull(self);
563     checkNotNull(elements);
564     if (elements instanceof Multiset) {
565       return addAllImpl(self, cast(elements));
566     } else if (elements.isEmpty()) {
567       return false;
568     } else {
569       return Iterators.addAll(self, elements.iterator());
570     }
571   }
572 <a name="16"></a>
573   private static &lt;E extends @Nullable Object&gt; boolean addAllImpl(
574       <font color="#2981b2"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>Multiset&lt;E&gt; self, Multiset&lt;? extends E&gt; elements) {
575     if (elements.isEmpty()) {
576       return false;
577     }</b></font>
578     elements.forEachEntry(self::add);
579     return true;
580   }
581   static boolean removeAllImpl(Multiset&lt;?&gt; self, Collection&lt;?&gt; elementsToRemove) {
582     Collection&lt;?&gt; collection =
583         (elementsToRemove instanceof Multiset)
584             ? ((Multiset&lt;?&gt;) elementsToRemove).elementSet()
585             : elementsToRemove;
586     return self.elementSet().removeAll(collection);
587   }
588   static boolean retainAllImpl(Multiset&lt;?&gt; self, Collection&lt;?&gt; elementsToRetain) {
589     checkNotNull(elementsToRetain);
590     Collection&lt;?&gt; collection =
591         (elementsToRetain instanceof Multiset)
592             ? ((Multiset&lt;?&gt;) elementsToRetain).elementSet()
593             : elementsToRetain;
594     return self.elementSet().retainAll(collection);
595   }
596   static &lt;E extends @Nullable Object&gt; int setCountImpl(
597       Multiset&lt;E&gt; self, @ParametricNullness E element, int count) {
598     checkNonnegative(count, "count");
599     int oldCount = self.count(element);
600     int delta = count - oldCount;
601     if (delta &gt; 0) {
602       self.add(element, delta);
603     } else if (delta &lt; 0) {
604       self.remove(element, -delta);
605     }
606     return oldCount;
607   }
608   static &lt;E extends @Nullable Object&gt; boolean setCountImpl(
609       Multiset&lt;E&gt; self, @ParametricNullness E element, int oldCount, int newCount) {
610     checkNonnegative(oldCount, "oldCount");
611     checkNonnegative(newCount, "newCount");
612     if (self.count(element) == oldCount) {
613       self.setCount(element, newCount);
614       return true;
615     } else {
616       return false;
617     }
618   }
619   static &lt;E extends @Nullable Object&gt; Iterator&lt;E&gt; elementIterator(
620       Iterator&lt;Entry&lt;E&gt;&gt; entryIterator) {
621     return new TransformedIterator&lt;Entry&lt;E&gt;, E&gt;(entryIterator) {
622       @Override
623       @ParametricNullness
624       E transform(Entry&lt;E&gt; entry) {
625         return entry.getElement();
626       }
627     };
628   }
629   abstract static class ElementSet&lt;E extends @Nullable Object&gt; extends Sets.ImprovedAbstractSet&lt;E&gt; {
630     abstract Multiset&lt;E&gt; multiset();
631     @Override
632     public void clear() {
633       multiset().clear();
634     }
635     @Override
636     public boolean contains(@CheckForNull Object o) {
637       return multiset().contains(o);
638 <a name="5"></a>    }
639     @Override
640     public boolean containsAll(Collection&lt;?&gt; c) <font color="#151b8d"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>{
641       return multiset().containsAll(c);
642     }
643     @Override
644     public boolean isEmpty() {
645       return multiset().isEmpty();
646     }
647     @</b></font>Override
648 <a name="7"></a>    public abstract Iterator&lt;E&gt; iterator();
649     @Override
650     public boolean remove(<font color="#38a4a5"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>@CheckForNull Object o) {
651       return multiset().remove(o, Integer.MAX_VALUE) &gt; 0;
652     }
653     @Override
654     public int size() {
655       return multiset().entrySet</b></font>().size();
656     }
657   }
658   abstract static class EntrySet&lt;E extends @Nullable Object&gt;
659       extends Sets.ImprovedAbstractSet&lt;Entry&lt;E&gt;&gt; {
660     abstract Multiset&lt;E&gt; multiset();
661     @Override
662     public boolean contains(@CheckForNull Object o) {
663       if (o instanceof Entry) {
664         @SuppressWarnings("cast")
665         Entry&lt;?&gt; entry = (Entry&lt;?&gt;) o;
666         if (entry.getCount() &lt;= 0) {
667           return false;
668         }
669         int count = multiset().count(entry.getElement());
670         return count == entry.getCount();
671       }
672       return false;
673     }
674     @SuppressWarnings("cast")
675     @Override
676     public boolean remove(@CheckForNull Object object) {
677       if (object instanceof Multiset.Entry) {
678         Entry&lt;?&gt; entry = (Entry&lt;?&gt;) object;
679         Object element = entry.getElement();
680         int entryCount = entry.getCount();
681         if (entryCount != 0) {
682           @SuppressWarnings({"unchecked", "nullness"})
683           Multiset&lt;@Nullable Object&gt; multiset = (Multiset&lt;@Nullable Object&gt;) multiset();
684           return multiset.setCount(element, entryCount, 0);
685         }
686       }
687       return false;
688     }
689     @Override
690     public void clear() {
691       multiset().clear();
692     }
693   }
694   static &lt;E extends @Nullable Object&gt; Iterator&lt;E&gt; iteratorImpl(Multiset&lt;E&gt; multiset) {
695     return new MultisetIteratorImpl&lt;E&gt;(multiset, multiset.entrySet().iterator());
696   }
697   static final class MultisetIteratorImpl&lt;E extends @Nullable Object&gt; implements Iterator&lt;E&gt; {
698     private final Multiset&lt;E&gt; multiset;
699     private final Iterator&lt;Entry&lt;E&gt;&gt; entryIterator;
700     @CheckForNull private Entry&lt;E&gt; currentEntry;
701     private int laterCount;
702     private int totalCount;
703     private boolean canRemove;
704 <a name="10"></a>    MultisetIteratorImpl(Multiset&lt;E&gt; multiset, Iterator&lt;Entry&lt;E&gt;&gt; entryIterator) {
705       this.multiset = multiset;
706       this.entryIterator = entryIterator;
707     <font color="#ad5910"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>}
708     @Override
709     public boolean hasNext() {
710       return laterCount &gt; 0 || entryIterator.hasNext();
711     }
712     @</b></font>Override
713     @ParametricNullness
714     public E next() {
715       if (!hasNext()) {
716         throw new NoSuchElementException();
717       }
718       if (laterCount == 0) {
719         currentEntry = entryIterator.next();
720         totalCount = laterCount = currentEntry.getCount();
721       }
722       laterCount--;
723       canRemove = true;
724       return requireNonNull(currentEntry).getElement();
725     }
726     @Override
727     public void remove() {
728       checkRemove(canRemove);
729       if (totalCount == 1) {
730         entryIterator.remove();
731       } else {
732         multiset.remove(requireNonNull(currentEntry).getElement());
733       }
734       totalCount--;
735       canRemove = false;
736     }
737   }
738   static &lt;E extends @Nullable Object&gt; Spliterator&lt;E&gt; spliteratorImpl(Multiset&lt;E&gt; multiset) {
739     Spliterator&lt;Entry&lt;E&gt;&gt; entrySpliterator = multiset.entrySet().spliterator();
740     return CollectSpliterators.flatMap(
741         entrySpliterator,
742         entry -&gt; Collections.nCopies(entry.getCount(), entry.getElement()).spliterator(),
743         Spliterator.SIZED
744             | (entrySpliterator.characteristics()
745                 &amp; (Spliterator.ORDERED | Spliterator.NONNULL | Spliterator.IMMUTABLE)),
746         multiset.size());
747   }
748   static int linearTimeSizeImpl(Multiset&lt;?&gt; multiset) {
749     long size = 0;
750     for (Entry&lt;?&gt; entry : multiset.entrySet()) {
751       size += entry.getCount();
752     }
753     return Ints.saturatedCast(size);
754   }
755 <a name="12"></a>    static &lt;T extends @Nullable Object&gt; Multiset&lt;T&gt; cast(Iterable&lt;T&gt; iterable) {
756     return (Multiset&lt;T&gt;) iterable;
757   <font color="#571b7e"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>}
758   @Beta
759   public static &lt;E&gt; ImmutableMultiset&lt;E&gt; copyHighestCountFirst(Multiset&lt;E&gt; multiset) {
760     Entry&lt;E&gt;[] entries = (Entry&lt;E&gt;[]) multiset.entrySet</b></font>().toArray(new Entry[0]);
761     Arrays.sort(entries, DecreasingCount.INSTANCE);
762     return ImmutableMultiset.copyFromEntries(Arrays.asList(entries));
763   }
764   private static final class DecreasingCount implements Comparator&lt;Entry&lt;?&gt;&gt; {
765     static final DecreasingCount INSTANCE = new DecreasingCount();
766     @Override
767     public int compare(Entry&lt;?&gt; entry1, Entry&lt;?&gt; entry2) {
768       return entry2.getCount() - entry1.getCount();     }
769   }
770   private abstract static class ViewMultiset&lt;E extends @Nullable Object&gt;
771       extends AbstractMultiset&lt;E&gt; {
772     <font color="#b041ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>@Override
773     public int size() {
774       return linearTimeSizeImpl(this);
775     }
776 <a name="3"></a>
777     @Override
778     public void clear() {</b></font>
779       <font color="#53858b"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>elementSet().clear();
780     }
781     @Override
782     public Iterator&lt;E&gt; iterator() {
783       return iteratorImpl(this);
784     }
785     @Override
786     int distinctElements() {
787       return elementSet().size();
788     }</b></font>
789   }
790 }
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>FreshValueGenerator.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 package com.google.common.testing;
2 import static com.google.common.base.Preconditions.checkNotNull;
3 import static com.google.common.base.Throwables.throwIfUnchecked;
4 import com.google.common.annotations.GwtIncompatible;
5 import com.google.common.base.CharMatcher;
6 import com.google.common.base.Charsets;
7 import com.google.common.base.Equivalence;
8 import com.google.common.base.Joiner;
9 import com.google.common.base.Splitter;
10 import com.google.common.base.Ticker;
11 import com.google.common.collect.ArrayListMultimap;
12 import com.google.common.collect.BiMap;
13 import com.google.common.collect.HashBasedTable;
14 import com.google.common.collect.HashBiMap;
15 import com.google.common.collect.HashMultimap;
16 import com.google.common.collect.HashMultiset;
17 import com.google.common.collect.ImmutableBiMap;
18 import com.google.common.collect.ImmutableCollection;
19 import com.google.common.collect.ImmutableList;
20 import com.google.common.collect.ImmutableListMultimap;
21 import com.google.common.collect.ImmutableMap;
22 import com.google.common.collect.ImmutableMultimap;
23 import com.google.common.collect.ImmutableMultiset;
24 import com.google.common.collect.ImmutableSet;
25 import com.google.common.collect.ImmutableSetMultimap;
26 import com.google.common.collect.ImmutableSortedMap;
27 import com.google.common.collect.ImmutableSortedMultiset;
28 import com.google.common.collect.ImmutableSortedSet;
29 import com.google.common.collect.ImmutableTable;
30 import com.google.common.collect.Iterables;
31 import com.google.common.collect.LinkedHashMultimap;
32 import com.google.common.collect.LinkedHashMultiset;
33 import com.google.common.collect.ListMultimap;
34 import com.google.common.collect.Lists;
35 import com.google.common.collect.Maps;
36 import com.google.common.collect.Multimap;
37 import com.google.common.collect.Multiset;
38 import com.google.common.collect.Ordering;
39 import com.google.common.collect.Range;
40 import com.google.common.collect.RowSortedTable;
41 import com.google.common.collect.SetMultimap;
42 import com.google.common.collect.Sets;
43 import com.google.common.collect.SortedMultiset;
44 import com.google.common.collect.Table;
45 import com.google.common.collect.TreeBasedTable;
46 import com.google.common.collect.TreeMultiset;
47 import com.google.common.primitives.Primitives;
48 import com.google.common.primitives.UnsignedInteger;
49 import com.google.common.primitives.UnsignedLong;
50 import com.google.common.reflect.AbstractInvocationHandler;
51 import com.google.common.reflect.Invokable;
52 import com.google.common.reflect.Parameter;
53 import com.google.common.reflect.Reflection;
54 import com.google.common.reflect.TypeToken;
55 import java.io.ByteArrayInputStream;
56 import java.io.File;
57 import java.io.InputStream;
58 import java.io.Reader;
59 import java.io.StringReader;
60 import java.lang.annotation.ElementType;
61 import java.lang.annotation.Retention;
62 import java.lang.annotation.RetentionPolicy;
63 import java.lang.annotation.Target;
64 import java.lang.reflect.Array;
65 import java.lang.reflect.InvocationTargetException;
66 import java.lang.reflect.Method;
67 import java.lang.reflect.Type;
68 import java.lang.reflect.TypeVariable;
69 import java.math.BigDecimal;
70 import java.math.BigInteger;
71 import java.nio.Buffer;
72 import java.nio.ByteBuffer;
73 import java.nio.CharBuffer;
74 import java.nio.DoubleBuffer;
75 import java.nio.FloatBuffer;
76 <a name="0"></a>import java.nio.IntBuffer;
77 import java.nio.LongBuffer;
78 import java.nio.ShortBuffer;
79 <font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>import java.nio.charset.Charset;
80 import java.util.ArrayList;
81 import java.util.Arrays;
82 import java.util.Collection;
83 import java.util.Comparator;
84 import java.util.Currency;
85 import java.util.HashMap;
86 import java.util.HashSet;
87 import java.util.LinkedHashMap;
88 import java.util.LinkedHashSet;
89 import java.util.LinkedList;
90 import java.util.List;
91 import java.util.Locale;
92 import java.util.Map;
93 import java.util.NavigableMap;
94 import java.util.NavigableSet;
95 import java.util.Optional;
96 import java.util.OptionalDouble;
97 import java.util.OptionalInt;
98 import java.util.OptionalLong;
99 import java.util.Set;
100 import java.util.SortedMap;
101 import java.util.SortedSet;
102 import java.util.TreeMap;
103 import java.util.TreeSet;
104 import java.util.concurrent.ConcurrentMap;
105 import java.util.concurrent.atomic.AtomicInteger;
106 import java.util.regex.Pattern;
107 import org.checkerframework.checker.nullness.qual.Nullable;
108 @</b></font>GwtIncompatible
109 class FreshValueGenerator {
110   private static final ImmutableMap&lt;Class&lt;?&gt;, Method&gt; GENERATORS;
111   static {
112     ImmutableMap.Builder&lt;Class&lt;?&gt;, Method&gt; builder = ImmutableMap.builder();
113     for (Method method : FreshValueGenerator.class.getDeclaredMethods()) {
114       if (method.isAnnotationPresent(Generates.class)) {
115         builder.put(method.getReturnType(), method);
116       }
117     }
118     GENERATORS = builder.buildOrThrow();
119   }
120   private static final ImmutableMap&lt;Class&lt;?&gt;, Method&gt; EMPTY_GENERATORS;
121   static {
122     ImmutableMap.Builder&lt;Class&lt;?&gt;, Method&gt; builder = ImmutableMap.builder();
123     for (Method method : FreshValueGenerator.class.getDeclaredMethods()) {
124       if (method.isAnnotationPresent(Empty.class)) {
125         builder.put(method.getReturnType(), method);
126       }
127     }
128     EMPTY_GENERATORS = builder.buildOrThrow();
129   }
130   private final AtomicInteger freshness = new AtomicInteger(1);
131   private final ListMultimap&lt;Class&lt;?&gt;, Object&gt; sampleInstances = ArrayListMultimap.create();
132   private final Map&lt;Type, Integer&gt; emptyInstanceGenerated = new HashMap&lt;&gt;();
133   final &lt;T&gt; void addSampleInstances(Class&lt;T&gt; type, Iterable&lt;? extends T&gt; instances) {
134     sampleInstances.putAll(checkNotNull(type), checkNotNull(instances));
135   }
136 <a name="18"></a>  final @Nullable Object generateFresh(TypeToken&lt;?&gt; type) {
137     Object generated = generate(type);
138     if (generated != null) {
139       <font color="#800517"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>freshness.incrementAndGet();
140     }
141     return generated;
142   }
143   final &lt;T</b></font>&gt; @Nullable T generateFresh(Class&lt;T&gt; type) {
144     return Primitives.wrap(type).cast(generateFresh(TypeToken.of(type)));
145   }
146   final &lt;T&gt; T newFreshProxy(final Class&lt;T&gt; interfaceType) {
147     T proxy = newProxy(interfaceType);
148     freshness.incrementAndGet();
149     return proxy;
150   }
151   private Object generate(TypeToken&lt;?&gt; type) {
152     Class&lt;?&gt; rawType = type.getRawType();
153     List&lt;Object&gt; samples = sampleInstances.get(rawType);
154     Object sample = pickInstance(samples, null);
155     if (sample != null) {
156       return sample;
157     }
158     if (rawType.isEnum()) {
159       return pickInstance(rawType.getEnumConstants(), null);
160     }
161     if (type.isArray()) {
162       TypeToken&lt;?&gt; componentType = type.getComponentType();
163       Object array = Array.newInstance(componentType.getRawType(), 1);
164       Array.set(array, 0, generate(componentType));
165       return array;
166     }
167     Method emptyGenerate = EMPTY_GENERATORS.get(rawType);
168     if (emptyGenerate != null) {
169       if (emptyInstanceGenerated.containsKey(type.getType())) {
170         if (emptyInstanceGenerated.get(type.getType()).intValue() == freshness.get()) {
171           return invokeGeneratorMethod(emptyGenerate);
172         } else {
173         }
174       } else {
175         Object emptyInstance = invokeGeneratorMethod(emptyGenerate);
176         emptyInstanceGenerated.put(type.getType(), freshness.get());
177         return emptyInstance;
178       }
179     }
180     Method generate = GENERATORS.get(rawType);
181     if (generate != null) {
182       ImmutableList&lt;Parameter&gt; params = Invokable.from(generate).getParameters();
183       List&lt;Object&gt; args = Lists.newArrayListWithCapacity(params.size());
184       TypeVariable&lt;?&gt;[] typeVars = rawType.getTypeParameters();
185       for (int i = 0; i &lt; params.size(); i++) {
186         TypeToken&lt;?&gt; paramType = type.resolveType(typeVars[i]);
187         Object argValue = generate(paramType);
188         if (argValue == null) {
189           return null;
190         }
191         args.add(argValue);
192       }
193       return invokeGeneratorMethod(generate, args.toArray());
194     }
195     return defaultGenerate(rawType);
196   }
197   private &lt;T&gt; T defaultGenerate(Class&lt;T&gt; rawType) {
198     if (rawType.isInterface()) {
199       return newProxy(rawType);
200     }
201     return ArbitraryInstances.get(rawType);
202   }
203   private &lt;T&gt; T newProxy(final Class&lt;T&gt; interfaceType) {
204     return Reflection.newProxy(interfaceType, new FreshInvocationHandler(interfaceType));
205   }
206   private Object invokeGeneratorMethod(Method generator, Object... args) {
207     try {
208       return generator.invoke(this, args);
209     } catch (InvocationTargetException e) {
210       throwIfUnchecked(e.getCause());
211       throw new RuntimeException(e.getCause());
212     } catch (Exception e) {
213       throwIfUnchecked(e);
214       throw new RuntimeException(e);
215     }
216   }
217 <a name="20"></a>
218   private final class FreshInvocationHandler extends AbstractInvocationHandler {
219     private final int identity = generateInt();
220     <font color="#4e9258"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>private final Class&lt;?&gt; interfaceType;
221     FreshInvocationHandler(Class&lt;?&gt; interfaceType) {
222       this.interfaceType = interfaceType;
223     }
224 <a name="14"></a>    @</b></font>Override
225     protected Object handleInvocation(Object proxy, Method method, Object[] args) {
226       return interfaceMethodCalled(interfaceType, method);
227     <font color="#842dce"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>}
228     @Override
229     public int hashCode() {
230       return identity;
231     }
232     @</b></font>Override
233     public boolean equals(@Nullable Object obj) {
234       if (obj instanceof FreshInvocationHandler) {
235         FreshInvocationHandler that = (FreshInvocationHandler) obj;
236         return identity == that.identity;
237       }
238       return false;
239     }
240     @Override
241     public String toString() {
242       return paramString(interfaceType, identity);
243     }
244   }
245   Object interfaceMethodCalled(Class&lt;?&gt; interfaceType, Method method) {
246     throw new UnsupportedOperationException();
247   }
248   private &lt;T&gt; T pickInstance(T[] instances, T defaultValue) {
249 <a name="16"></a>    return pickInstance(Arrays.asList(instances), defaultValue);
250   }
251   private &lt;T&gt; T pickInstance(<font color="#2981b2"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>Collection&lt;T&gt; instances, T defaultValue) {
252     if (instances.isEmpty()) {
253       return defaultValue;
254     }</b></font>
255     return Iterables.get(instances, (generateInt() - 1) % instances.size());
256   }
257   private static String paramString(Class&lt;?&gt; type, int i) {
258     return type.getSimpleName() + '@' + i;
259   }
260   @Target(ElementType.METHOD)
261   @Retention(RetentionPolicy.RUNTIME)
262   private @interface Generates {}
263   @Target(ElementType.METHOD)
264   @Retention(RetentionPolicy.RUNTIME)
265   private @interface Empty {}
266   @Generates
267   Class&lt;?&gt; generateClass() {
268     return pickInstance(
269 <a name="10"></a>        ImmutableList.of(
270             int.class, long.class, void.class, Object.class, Object[].class, Iterable.class),
271         Object.class);
272   <font color="#ad5910"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>}
273   @Generates
274   Object generateObject() {
275     return generateString();
276   }
277   @</b></font>Generates
278   Number generateNumber() {
279 <a name="11"></a>    return generateInt();
280   }
281   <font color="#b041ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>@Generates
282   int generateInt() {
283     return freshness.get();
284   }
285   @Generates
286   Integer generateInteger() {</b></font>
287     return new Integer(generateInt());
288   }
289   @Generates
290   long generateLong() {
291     return generateInt();
292   }
293   @Generates
294   Long generateLongObject() {
295     return new Long(generateLong());
296   }
297   @Generates
298   float generateFloat() {
299     return generateInt();
300   }
301   @Generates
302   Float generateFloatObject() {
303     return new Float(generateFloat());
304   }
305   @Generates
306   double generateDouble() {
307     return generateInt();
308   }
309   @Generates
310   Double generateDoubleObject() {
311     return new Double(generateDouble());
312   }
313   @Generates
314   short generateShort() {
315     return (short) generateInt();
316   }
317   @Generates
318   Short generateShortObject() {
319     return new Short(generateShort());
320   }
321   @Generates
322   byte generateByte() {
323     return (byte) generateInt();
324   }
325 <a name="13"></a>  @Generates
326   Byte generateByteObject() {
327     return new Byte(generateByte());
328   <font color="#3b9c9c"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>}
329   @Generates
330   char generateChar() {
331     return generateString().charAt(0);
332   }</b></font>
333   @Generates
334   Character generateCharacter() {
335     return new Character(generateChar());
336   }
337   @Generates
338   boolean generateBoolean() {
339     return generateInt() % 2 == 0;
340   }
341 <a name="2"></a>
342   @Generates
343   Boolean generateBooleanObject() {
344     return new Boolean(<font color="#980517"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>generateBoolean());
345   }
346   @Generates
347   UnsignedInteger generateUnsignedInteger() {
348     return UnsignedInteger.fromIntBits(generateInt());
349   }
350   @Generates
351   UnsignedLong generateUnsignedLong() {
352     return UnsignedLong.fromLongBits(generateLong());
353   }
354   @Generates
355   BigInteger generateBigInteger() {</b></font>
356     return BigInteger.valueOf(generateInt());
357   }
358 <a name="3"></a>
359   @Generates
360   BigDecimal generateBigDecimal() {
361     return <font color="#53858b"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>BigDecimal.valueOf(generateInt());
362   }
363   @Generates
364   CharSequence generateCharSequence() {
365     return generateString();
366   }
367   @Generates
368   String generateString() {
369     return Integer.toString(generateInt());
370   }</b></font>
371 <a name="1"></a>
372   @Generates
373   Comparable&lt;?&gt; generateComparable() {
374     return <font color="#f63526"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>generateString();
375   }
376   @Generates
377   Pattern generatePattern() {
378     return Pattern.compile(generateString());
379   }
380   @Generates
381   Charset generateCharset() {
382     return pickInstance(Charset.availableCharsets().values(), Charsets.UTF_8);
383 <a name="19"></a>  }
384   @</b></font>Generates
385   Locale generateLocale() <font color="#f62817"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>{
386     return pickInstance(Locale.getAvailableLocales(), Locale.US);
387   }
388   @Generates
389   Currency generateCurrency() {</b></font>
390     try {
391       Method method = Currency.class.getMethod("getAvailableCurrencies");
392       @SuppressWarnings("unchecked")       Set&lt;Currency&gt; currencies = (Set&lt;Currency&gt;) method.invoke(null);
393       return pickInstance(currencies, Currency.getInstance(Locale.US));
394       /*
395        * Do not merge the 2 catch blocks below. javac would infer a type of
396        * ReflectiveOperationException, which Animal Sniffer would reject. (Old versions of
397        * Android don't *seem* to mind, but there might be edge cases of which we're unaware.)
398        */
399     } catch (NoSuchMethodException notJava7) {
400       return preJava7FreshCurrency();
401     } catch (InvocationTargetException notJava7) {
402       return preJava7FreshCurrency();
403     } catch (IllegalAccessException impossible) {
404       throw new AssertionError(impossible);
405     }
406   }
407   private Currency preJava7FreshCurrency() {
408     for (Set&lt;Locale&gt; uselessLocales = Sets.newHashSet(); ; ) {
409       Locale locale = generateLocale();
410       if (uselessLocales.contains(locale)) {         return Currency.getInstance(Locale.US);
411       }
412       try {
413         return Currency.getInstance(locale);
414       } catch (IllegalArgumentException e) {
415         uselessLocales.add(locale);
416       }
417     }
418   }
419 <a name="9"></a>
420   @Empty
421   &lt;T&gt; Optional&lt;T&gt; generateJavaOptional() {
422     return <font color="#83a33a"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>Optional.empty();
423   }
424   @Generates
425   &lt;T&gt; Optional&lt;T&gt; generateJavaOptional(T value) {
426 <a name="4"></a>    return Optional.of(value);
427   }</b></font>
428   <font color="#6cc417"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>@Generates
429   OptionalInt generateOptionalInt() {
430     return OptionalInt.of(generateInt());
431   }
432   @Generates
433   OptionalLong generateOptionalLong() {
434     return OptionalLong.of(generateLong());
435   }
436   @</b></font>Generates
437   OptionalDouble generateOptionalDouble() {
438     return OptionalDouble.of(generateDouble());
439   }
440   @Empty
441   &lt;T&gt; com.google.common.base.Optional&lt;T&gt; generateGoogleOptional() {
442     return com.google.common.base.Optional.absent();
443   }
444   @Generates
445   &lt;T&gt; com.google.common.base.Optional&lt;T&gt; generateGoogleOptional(T value) {
446     return com.google.common.base.Optional.of(value);
447 <a name="5"></a>  }
448   @Generates
449   Joiner generateJoiner() <font color="#151b8d"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>{
450     return Joiner.on(generateString());
451   }
452   @Generates
453   Splitter generateSplitter() {
454     return Splitter.on(generateString());
455   }
456   @</b></font>Generates
457   &lt;T&gt; Equivalence&lt;T&gt; generateEquivalence() {
458     return new Equivalence&lt;T&gt;() {
459       @Override
460       protected boolean doEquivalent(T a, T b) {
461         return false;
462       }
463       @Override
464       protected int doHash(T t) {
465         return 0;
466       }
467       final String string = paramString(Equivalence.class, generateInt());
468       @Override
469       public String toString() {
470         return string;
471       }
472     };
473   }
474   @Generates
475   CharMatcher generateCharMatcher() {
476     return new CharMatcher() {
477       @Override
478       public boolean matches(char c) {
479         return false;
480       }
481       final String string = paramString(CharMatcher.class, generateInt());
482       @Override
483       public String toString() {
484         return string;
485       }
486     };
487   }
488   @Generates
489   Ticker generateTicker() {
490     return new Ticker() {
491       @Override
492       public long read() {
493         return 0;
494       }
495       final String string = paramString(Ticker.class, generateInt());
496       @Override
497       public String toString() {
498         return string;
499       }
500     };
501   }
502   @Generates
503   &lt;T&gt; Comparator&lt;T&gt; generateComparator() {
504     return generateOrdering();
505   }
506   @Generates
507   &lt;T&gt; Ordering&lt;T&gt; generateOrdering() {
508     return new Ordering&lt;T&gt;() {
509       @Override
510       public int compare(T left, T right) {
511         return 0;
512       }
513       final String string = paramString(Ordering.class, generateInt());
514       @Override
515       public String toString() {
516         return string;
517       }
518     };
519   }
520   @Empty
521   static &lt;C extends Comparable&lt;?&gt;&gt; Range&lt;C&gt; generateRange() {
522     return Range.all();
523   }
524   @Generates
525   static &lt;C extends Comparable&lt;?&gt;&gt; Range&lt;C&gt; generateRange(C freshElement) {
526     return Range.singleton(freshElement);
527   }
528   @Generates
529   static &lt;E&gt; Iterable&lt;E&gt; generateIterable(@Nullable E freshElement) {
530     return generateList(freshElement);
531   }
532   @Generates
533   static &lt;E&gt; Collection&lt;E&gt; generateCollection(@Nullable E freshElement) {
534     return generateList(freshElement);
535   }
536   @Generates
537   static &lt;E&gt; List&lt;E&gt; generateList(@Nullable E freshElement) {
538     return generateArrayList(freshElement);
539   }
540   @Generates
541   static &lt;E&gt; ArrayList&lt;E&gt; generateArrayList(@Nullable E freshElement) {
542     ArrayList&lt;E&gt; list = Lists.newArrayList();
543     list.add(freshElement);
544     return list;
545   }
546   @Generates
547   static &lt;E&gt; LinkedList&lt;E&gt; generateLinkedList(@Nullable E freshElement) {
548     LinkedList&lt;E&gt; list = Lists.newLinkedList();
549     list.add(freshElement);
550     return list;
551   }
552   @Generates
553   static &lt;E&gt; ImmutableList&lt;E&gt; generateImmutableList(E freshElement) {
554     return ImmutableList.of(freshElement);
555   }
556   @Generates
557   static &lt;E&gt; ImmutableCollection&lt;E&gt; generateImmutableCollection(E freshElement) {
558     return generateImmutableList(freshElement);
559   }
560   @Generates
561   static &lt;E&gt; Set&lt;E&gt; generateSet(@Nullable E freshElement) {
562     return generateHashSet(freshElement);
563   }
564   @Generates
565   static &lt;E&gt; HashSet&lt;E&gt; generateHashSet(@Nullable E freshElement) {
566     return generateLinkedHashSet(freshElement);
567   }
568   @Generates
569   static &lt;E&gt; LinkedHashSet&lt;E&gt; generateLinkedHashSet(@Nullable E freshElement) {
570     LinkedHashSet&lt;E&gt; set = Sets.newLinkedHashSet();
571     set.add(freshElement);
572     return set;
573   }
574   @Generates
575   static &lt;E&gt; ImmutableSet&lt;E&gt; generateImmutableSet(E freshElement) {
576     return ImmutableSet.of(freshElement);
577   }
578   @Generates
579   static &lt;E extends Comparable&lt;? super E&gt;&gt; SortedSet&lt;E&gt; generateSortedSet(E freshElement) {
580     return generateNavigableSet(freshElement);
581   }
582 <a name="12"></a>  @Generates
583   static &lt;E extends Comparable&lt;? super E&gt;&gt; NavigableSet&lt;E&gt; generateNavigableSet(E freshElement) {
584     return generateTreeSet(freshElement);
585   <font color="#571b7e"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>}
586   @Generates
587   static &lt;E extends Comparable&lt;? super E&gt;&gt; TreeSet&lt;E&gt; generateTreeSet(E freshElement) {
588     TreeSet&lt;E&gt; set = Sets.newTreeSet();
589     set.add</b></font>(freshElement);
590     return set;
591   }
592   @Generates
593   static &lt;E extends Comparable&lt;? super E&gt;&gt; ImmutableSortedSet&lt;E&gt; generateImmutableSortedSet(
594       E freshElement) {
595     return ImmutableSortedSet.of(freshElement);
596   }
597   @Generates
598   static &lt;E&gt; Multiset&lt;E&gt; generateMultiset(@Nullable E freshElement) {
599     return generateHashMultiset(freshElement);
600   }
601   @Generates
602   static &lt;E&gt; HashMultiset&lt;E&gt; generateHashMultiset(@Nullable E freshElement) {
603     HashMultiset&lt;E&gt; multiset = HashMultiset.create();
604     multiset.add(freshElement);
605     return multiset;
606   }
607   @Generates
608   static &lt;E&gt; LinkedHashMultiset&lt;E&gt; generateLinkedHashMultiset(@Nullable E freshElement) {
609     LinkedHashMultiset&lt;E&gt; multiset = LinkedHashMultiset.create();
610     multiset.add(freshElement);
611     return multiset;
612   }
613   @Generates
614   static &lt;E&gt; ImmutableMultiset&lt;E&gt; generateImmutableMultiset(E freshElement) {
615     return ImmutableMultiset.of(freshElement);
616   }
617   @Generates
618   static &lt;E extends Comparable&lt;E&gt;&gt; SortedMultiset&lt;E&gt; generateSortedMultiset(E freshElement) {
619     return generateTreeMultiset(freshElement);
620   }
621   @Generates
622   static &lt;E extends Comparable&lt;E&gt;&gt; TreeMultiset&lt;E&gt; generateTreeMultiset(E freshElement) {
623     TreeMultiset&lt;E&gt; multiset = TreeMultiset.create();
624     multiset.add(freshElement);
625     return multiset;
626   }
627   @Generates
628   static &lt;E extends Comparable&lt;E&gt;&gt; ImmutableSortedMultiset&lt;E&gt; generateImmutableSortedMultiset(
629       E freshElement) {
630     return ImmutableSortedMultiset.of(freshElement);
631   }
632   @Generates
633   static &lt;K, V&gt; Map&lt;K, V&gt; generateMap(@Nullable K key, @Nullable V value) {
634     return generateHashdMap(key, value);
635   }
636   @Generates
637   static &lt;K, V&gt; HashMap&lt;K, V&gt; generateHashdMap(@Nullable K key, @Nullable V value) {
638     return generateLinkedHashMap(key, value);
639   }
640   @Generates
641   static &lt;K, V&gt; LinkedHashMap&lt;K, V&gt; generateLinkedHashMap(@Nullable K key, @Nullable V value) {
642     LinkedHashMap&lt;K, V&gt; map = Maps.newLinkedHashMap();
643     map.put(key, value);
644     return map;
645   }
646   @Generates
647   static &lt;K, V&gt; ImmutableMap&lt;K, V&gt; generateImmutableMap(K key, V value) {
648     return ImmutableMap.of(key, value);
649   }
650   @Empty
651   static &lt;K, V&gt; ConcurrentMap&lt;K, V&gt; generateConcurrentMap() {
652     return Maps.newConcurrentMap();
653   }
654   @Generates
655   static &lt;K, V&gt; ConcurrentMap&lt;K, V&gt; generateConcurrentMap(K key, V value) {
656     ConcurrentMap&lt;K, V&gt; map = Maps.newConcurrentMap();
657     map.put(key, value);
658     return map;
659   }
660   @Generates
661   static &lt;K extends Comparable&lt;? super K&gt;, V&gt; SortedMap&lt;K, V&gt; generateSortedMap(
662       K key, @Nullable V value) {
663     return generateNavigableMap(key, value);
664   }
665   @Generates
666   static &lt;K extends Comparable&lt;? super K&gt;, V&gt; NavigableMap&lt;K, V&gt; generateNavigableMap(
667       K key, @Nullable V value) {
668     return generateTreeMap(key, value);
669   }
670   @Generates
671   static &lt;K extends Comparable&lt;? super K&gt;, V&gt; TreeMap&lt;K, V&gt; generateTreeMap(
672       K key, @Nullable V value) {
673     TreeMap&lt;K, V&gt; map = Maps.newTreeMap();
674     map.put(key, value);
675     return map;
676   }
677   @Generates
678   static &lt;K extends Comparable&lt;? super K&gt;, V&gt; ImmutableSortedMap&lt;K, V&gt; generateImmutableSortedMap(
679       K key, V value) {
680     return ImmutableSortedMap.of(key, value);
681   }
682   @Generates
683   static &lt;K, V&gt; Multimap&lt;K, V&gt; generateMultimap(@Nullable K key, @Nullable V value) {
684     return generateListMultimap(key, value);
685   }
686   @Generates
687   static &lt;K, V&gt; ImmutableMultimap&lt;K, V&gt; generateImmutableMultimap(K key, V value) {
688     return ImmutableMultimap.of(key, value);
689   }
690   @Generates
691   static &lt;K, V&gt; ListMultimap&lt;K, V&gt; generateListMultimap(@Nullable K key, @Nullable V value) {
692     return generateArrayListMultimap(key, value);
693   }
694   @Generates
695   static &lt;K, V&gt; ArrayListMultimap&lt;K, V&gt; generateArrayListMultimap(
696       @Nullable K key, @Nullable V value) {
697     ArrayListMultimap&lt;K, V&gt; multimap = ArrayListMultimap.create();
698     multimap.put(key, value);
699     return multimap;
700   }
701   @Generates
702   static &lt;K, V&gt; ImmutableListMultimap&lt;K, V&gt; generateImmutableListMultimap(K key, V value) {
703     return ImmutableListMultimap.of(key, value);
704   }
705   @Generates
706   static &lt;K, V&gt; SetMultimap&lt;K, V&gt; generateSetMultimap(@Nullable K key, @Nullable V value) {
707     return generateLinkedHashMultimap(key, value);
708   }
709   @Generates
710   static &lt;K, V&gt; HashMultimap&lt;K, V&gt; generateHashMultimap(@Nullable K key, @Nullable V value) {
711     HashMultimap&lt;K, V&gt; multimap = HashMultimap.create();
712     multimap.put(key, value);
713     return multimap;
714   }
715   @Generates
716   static &lt;K, V&gt; LinkedHashMultimap&lt;K, V&gt; generateLinkedHashMultimap(
717       @Nullable K key, @Nullable V value) {
718     LinkedHashMultimap&lt;K, V&gt; multimap = LinkedHashMultimap.create();
719     multimap.put(key, value);
720     return multimap;
721   }
722   @Generates
723   static &lt;K, V&gt; ImmutableSetMultimap&lt;K, V&gt; generateImmutableSetMultimap(K key, V value) {
724     return ImmutableSetMultimap.of(key, value);
725   }
726   @Generates
727   static &lt;K, V&gt; BiMap&lt;K, V&gt; generateBimap(@Nullable K key, @Nullable V value) {
728     return generateHashBiMap(key, value);
729   }
730   @Generates
731   static &lt;K, V&gt; HashBiMap&lt;K, V&gt; generateHashBiMap(@Nullable K key, @Nullable V value) {
732     HashBiMap&lt;K, V&gt; bimap = HashBiMap.create();
733     bimap.put(key, value);
734     return bimap;
735   }
736   @Generates
737   static &lt;K, V&gt; ImmutableBiMap&lt;K, V&gt; generateImmutableBimap(K key, V value) {
738     return ImmutableBiMap.of(key, value);
739   }
740   @Generates
741   static &lt;R, C, V&gt; Table&lt;R, C, V&gt; generateTable(
742       @Nullable R row, @Nullable C column, @Nullable V value) {
743     return generateHashBasedTable(row, column, value);
744   }
745   @Generates
746   static &lt;R, C, V&gt; HashBasedTable&lt;R, C, V&gt; generateHashBasedTable(
747       @Nullable R row, @Nullable C column, @Nullable V value) {
748     HashBasedTable&lt;R, C, V&gt; table = HashBasedTable.create();
749     table.put(row, column, value);
750     return table;
751   }
752 <a name="15"></a>
753   @SuppressWarnings("rawtypes")   @Generates
754   static &lt;R extends Comparable, C extends Comparable, <font color="#f52887"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>V&gt;
755       RowSortedTable&lt;R, C, V&gt; generateRowSortedTable(R row, C column, V value) {
756     return generateTreeBasedTable(row, column, value);
757   }
758   @SuppressWarnings("raw</b></font>types")   @Generates
759   static &lt;R extends Comparable, C extends Comparable, V&gt;
760       TreeBasedTable&lt;R, C, V&gt; generateTreeBasedTable(R row, C column, V value) {
761     TreeBasedTable&lt;R, C, V&gt; table = TreeBasedTable.create();
762     table.put(row, column, value);
763     return table;
764   }
765 <a name="17"></a>
766   @Generates
767   static &lt;R, C, V&gt; ImmutableTable&lt;R, C, V&gt; generateImmutableTable(R row, C column, V value) {
768     return <font color="#3090c7"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>ImmutableTable.of(row, column, value);
769   }
770   @Generates
771   TypeToken&lt;?&gt; generateTypeToken() {
772     return TypeToken.of(generateClass</b></font>());
773   }
774   @Generates
775   File generateFile() {
776     return new File(generateString());
777   }
778   @Generates
779   static ByteArrayInputStream generateByteArrayInputStream() {
780     return new ByteArrayInputStream(new byte[0]);
781   }
782   @Generates
783   static InputStream generateInputStream() {
784     return generateByteArrayInputStream();
785   }
786   @Generates
787   StringReader generateStringReader() {
788     return new StringReader(generateString());
789   }
790   @Generates
791   Reader generateReader() {
792     return generateStringReader();
793   }
794   @Generates
795   Readable generateReadable() {
796     return generateReader();
797   }
798   @Generates
799   Buffer generateBuffer() {
800     return generateCharBuffer();
801   }
802 <a name="6"></a>
803   @Generates
804   CharBuffer generateCharBuffer() {
805     return <font color="#8c8774"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>CharBuffer.allocate(generateInt());
806   }
807   @Generates
808   ByteBuffer generateByteBuffer() {
809     return ByteBuffer.allocate(generateInt());
810   }
811   @</b></font>Generates
812   ShortBuffer generateShortBuffer() {
813 <a name="8"></a>    return ShortBuffer.allocate(generateInt());
814   }
815   <font color="#c58917"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>@Generates
816   IntBuffer generateIntBuffer() {
817     return IntBuffer.allocate(generateInt());
818   }
819   @Generates
820   LongBuffer generateLongBuffer() {
821 <a name="7"></a>    return LongBuffer.allocate(generateInt</b></font>());
822   }
823   <font color="#38a4a5"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>@Generates
824   FloatBuffer generateFloatBuffer() {
825     return FloatBuffer.allocate(generateInt());
826   }
827   @Generates
828   DoubleBuffer generateDoubleBuffer() {
829     return DoubleBuffer.allocate(generateInt</b></font>());
830   }
831 }
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
