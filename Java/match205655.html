<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for ImmutableMultimapTest.java &amp; ImmutableMapTest_1.java</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for ImmutableMultimapTest.java &amp; ImmutableMapTest_1.java
      </h3>
<h1 align="center">
        20.2%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>ImmutableMultimapTest.java (84.39307%)<th>ImmutableMapTest_1.java (11.487018%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(42-82)<td><a href="#" name="0">(276-317)</a><td align="center"><font color="#ff0000">62</font>
<tr onclick='openModal("#f63526")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f63526"><font color="#f63526">-</font><td><a href="#" name="1">(113-121)<td><a href="#" name="1">(548-705)</a><td align="center"><font color="#560000">21</font>
<tr onclick='openModal("#980517")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#980517"><font color="#980517">-</font><td><a href="#" name="2">(123-134)<td><a href="#" name="2">(843-852)</a><td align="center"><font color="#390000">14</font>
<tr onclick='openModal("#53858b")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#53858b"><font color="#53858b">-</font><td><a href="#" name="3">(105-111)<td><a href="#" name="3">(1009-1016)</a><td align="center"><font color="#390000">14</font>
<tr onclick='openModal("#6cc417")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#6cc417"><font color="#6cc417">-</font><td><a href="#" name="4">(19-36)<td><a href="#" name="4">(47-65)</a><td align="center"><font color="#390000">14</font>
<tr onclick='openModal("#151b8d")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#151b8d"><font color="#151b8d">-</font><td><a href="#" name="5">(82-90)<td><a href="#" name="5">(823-831)</a><td align="center"><font color="#2d0000">11</font>
<tr onclick='openModal("#8c8774")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#8c8774"><font color="#8c8774">-</font><td><a href="#" name="6">(95-104)<td><a href="#" name="6">(199-207)</a><td align="center"><font color="#290000">10</font>
</td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>ImmutableMultimapTest.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 <a name="4"></a>
2 package com.google.common.collect;
3 <font color="#6cc417"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>import com.google.common.annotations.GwtCompatible;
4 import com.google.common.annotations.GwtIncompatible;
5 import com.google.common.collect.ImmutableMultimap.Builder;
6 import com.google.common.collect.testing.SampleElements;
7 import com.google.common.collect.testing.SampleElements.Unhashables;
8 import com.google.common.collect.testing.UnhashableObject;
9 import com.google.common.testing.EqualsTester;
10 import com.google.common.testing.NullPointerTester;
11 import java.util.Arrays;
12 import java.util.Map.Entry;
13 import junit.framework.TestCase;
14 @GwtCompatible(e</b></font>mulated = true)
15 public class ImmutableMultimapTest extends TestCase {
16 <a name="0"></a>  public void testBuilder_withImmutableEntry() {
17     ImmutableMultimap&lt;String, Integer&gt; multimap =
18         new Builder&lt;String, Integer&gt;().put(Maps.immutableEntry("one", 1)).build();
19     assertEquals(<font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>Arrays.asList(1), multimap.get("one"));
20   }
21   public void testBuilder_withImmutableEntryAndNullContents() {
22     Builder&lt;String, Integer&gt; builder = new Builder&lt;&gt;();
23     try {
24       builder.put(Maps.immutableEntry("one", (Integer) null));
25       fail();
26     } catch (NullPointerException expected) {
27     }
28     try {
29       builder.put(Maps.immutableEntry((String) null, 1));
30       fail();
31     } catch (NullPointerException expected) {
32     }
33   }
34   private static class StringHolder {
35     String string;
36   }
37   public void testBuilder_withMutableEntry() {
38     ImmutableMultimap.Builder&lt;String, Integer&gt; builder = new Builder&lt;&gt;();
39     final StringHolder holder = new StringHolder();
40     holder.string = "one";
41     Entry&lt;String, Integer&gt; entry =
42         new AbstractMapEntry&lt;String, Integer&gt;() {
43           @Override
44           public String getKey() {
45             return holder.string;
46           }
47           @Override
48           public Integer getValue() {
49             return 1;
50           }
51         };
52 <a name="5"></a>
53     builder.put(entry);
54     holder.string = "two";
55     assertEquals(Arrays.asList</b></font>(1), <font color="#151b8d"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>builder.build().get("one"));
56   }
57   public void testCopyOf() {
58     ImmutableSetMultimap&lt;String, String&gt; setMultimap = ImmutableSetMultimap.of("k1", "v1");
59     ImmutableMultimap&lt;String, String&gt; setMultimapCopy = ImmutableMultimap.copyOf(setMultimap);
60     assertSame</b></font>(
61         "copyOf(ImmutableSetMultimap) should not create a new instance",
62 <a name="6"></a>        setMultimap,
63         setMultimapCopy);
64     <font color="#8c8774"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>ImmutableListMultimap&lt;String, String&gt; listMultimap = ImmutableListMultimap.of("k1", "v1");
65     ImmutableMultimap&lt;String, String&gt; listMultimapCopy = ImmutableMultimap.copyOf(listMultimap);
66     assertSame(
67         "copyOf(ImmutableListMultimap) should not create a new instance",
68         listMultimap,
69         listMultimapCopy);
70   }
71 <a name="3"></a>
72   public void testUnhashableSingletonValue() {
73     SampleElements&lt;UnhashableObject&gt; unhashables = new Unhashables()</b></font>;
74     Multimap&lt;Integer, UnhashableObject&gt; multimap = <font color="#53858b"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>ImmutableMultimap.of(0, unhashables.e0());
75     assertEquals(1, multimap.get(0).size());
76     assertTrue(multimap.get(0).contains(unhashables.e0()));
77   }
78 <a name="1"></a>  public void testUnhashableMixedValues() {
79     SampleElements&lt;UnhashableObject&gt; unhashables = new Unhashables()</b></font>;
80     Multimap&lt;Integer, Object&gt; multimap =
81         <font color="#f63526"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>ImmutableMultimap.&lt;Integer, Object&gt;of(
82             0, unhashables.e0(), 2, "hey you", 0, unhashables.e1());
83     assertEquals(2, multimap.get(0).size());
84     assertTrue(multimap.get(0).contains(unhashables.e0()));
85     assertTrue(multimap.get(0).contains(unhashables.e1()));
86     assertTrue(multimap.get(2).contains("hey you"));
87   }
88 <a name="2"></a>
89   public void testEquals() {</b></font>
90     new EqualsTester()
91         .addEqualityGroup(ImmutableMultimap.of(), <font color="#980517"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>ImmutableMultimap.of())
92         .addEqualityGroup(ImmutableMultimap.of(1, "a"), ImmutableMultimap.of(1, "a"))
93         .addEqualityGroup(
94             ImmutableMultimap.of(1, "a", 2, "b"), ImmutableMultimap.of(2, "b", 1, "a"))
95         .testEquals();
96   }
97   @GwtIncompatible   public void testNulls() throws Exception {
98     NullPointerTester tester = new NullPointerTester();
99     tester.testAllPublicStaticMethods(ImmutableMultimap.class);
100     tester.ignore</b></font>(ImmutableListMultimap.class.getMethod("get", Object.class));
101     tester.testAllPublicInstanceMethods(ImmutableMultimap.of());
102     tester.testAllPublicInstanceMethods(ImmutableMultimap.of("a", 1));
103   }
104 }
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>ImmutableMapTest_1.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 package com.google.common.collect;
2 import static com.google.common.testing.SerializableTester.reserialize;
3 import static com.google.common.truth.Truth.assertThat;
4 import static com.google.common.truth.Truth.assertWithMessage;
5 import com.google.common.annotations.GwtCompatible;
6 import com.google.common.annotations.GwtIncompatible;
7 import com.google.common.collect.ImmutableMap.Builder;
8 import com.google.common.collect.testing.CollectionTestSuiteBuilder;
9 import com.google.common.collect.testing.ListTestSuiteBuilder;
10 import com.google.common.collect.testing.MapTestSuiteBuilder;
11 import com.google.common.collect.testing.features.CollectionFeature;
12 import com.google.common.collect.testing.features.CollectionSize;
13 import com.google.common.collect.testing.features.MapFeature;
14 import com.google.common.collect.testing.google.MapGenerators.ImmutableMapCopyOfEntriesGenerator;
15 import com.google.common.collect.testing.google.MapGenerators.ImmutableMapCopyOfEnumMapGenerator;
16 import com.google.common.collect.testing.google.MapGenerators.ImmutableMapCopyOfGenerator;
17 import com.google.common.collect.testing.google.MapGenerators.ImmutableMapEntryListGenerator;
18 import com.google.common.collect.testing.google.MapGenerators.ImmutableMapGenerator;
19 import com.google.common.collect.testing.google.MapGenerators.ImmutableMapKeyListGenerator;
20 import com.google.common.collect.testing.google.MapGenerators.ImmutableMapUnhashableValuesGenerator;
21 import com.google.common.collect.testing.google.MapGenerators.ImmutableMapValueListGenerator;
22 import com.google.common.collect.testing.google.MapGenerators.ImmutableMapValuesAsSingletonSetGenerator;
23 import com.google.common.testing.EqualsTester;
24 import com.google.common.testing.NullPointerTester;
25 import java.io.ByteArrayOutputStream;
26 <a name="4"></a>import java.io.ObjectOutputStream;
27 import java.io.Serializable;
28 import java.util.AbstractMap;
29 <font color="#6cc417"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>import java.util.Collection;
30 import java.util.Collections;
31 import java.util.LinkedHashMap;
32 import java.util.Map;
33 import java.util.Map.Entry;
34 import java.util.Set;
35 import java.util.regex.Matcher;
36 import java.util.regex.Pattern;
37 import junit.framework.Test;
38 import junit.framework.TestCase;
39 import junit.framework.TestSuite;
40 @GwtCompatible(e</b></font>mulated = true)
41 @SuppressWarnings("AlwaysThrows")
42 public class ImmutableMapTest extends TestCase {
43   @GwtIncompatible   public static Test suite() {
44     TestSuite suite = new TestSuite();
45     suite.addTestSuite(ImmutableMapTest.class);
46     suite.addTest(
47         MapTestSuiteBuilder.using(new ImmutableMapGenerator())
48             .withFeatures(
49                 CollectionSize.ANY,
50                 CollectionFeature.SERIALIZABLE_INCLUDING_VIEWS,
51                 CollectionFeature.KNOWN_ORDER,
52                 MapFeature.REJECTS_DUPLICATES_AT_CREATION,
53                 CollectionFeature.ALLOWS_NULL_QUERIES)
54             .named("ImmutableMap")
55             .createTestSuite());
56     suite.addTest(
57         MapTestSuiteBuilder.using(new ImmutableMapCopyOfGenerator())
58             .withFeatures(
59                 CollectionSize.ANY,
60                 CollectionFeature.SERIALIZABLE_INCLUDING_VIEWS,
61                 CollectionFeature.KNOWN_ORDER,
62                 CollectionFeature.ALLOWS_NULL_QUERIES)
63             .named("ImmutableMap.copyOf[Map]")
64             .createTestSuite());
65     suite.addTest(
66         MapTestSuiteBuilder.using(new ImmutableMapCopyOfEntriesGenerator())
67             .withFeatures(
68                 CollectionSize.ANY,
69                 MapFeature.REJECTS_DUPLICATES_AT_CREATION,
70                 CollectionFeature.SERIALIZABLE_INCLUDING_VIEWS,
71                 CollectionFeature.KNOWN_ORDER,
72                 CollectionFeature.ALLOWS_NULL_QUERIES)
73             .named("ImmutableMap.copyOf[Iterable&lt;Entry&gt;]")
74             .createTestSuite());
75     suite.addTest(
76         MapTestSuiteBuilder.using(new ImmutableMapCopyOfEnumMapGenerator())
77             .withFeatures(
78                 CollectionSize.ANY,
79                 CollectionFeature.SERIALIZABLE_INCLUDING_VIEWS,
80                 CollectionFeature.KNOWN_ORDER,
81                 CollectionFeature.ALLOWS_NULL_QUERIES)
82             .named("ImmutableMap.copyOf[EnumMap]")
83             .createTestSuite());
84     suite.addTest(
85         MapTestSuiteBuilder.using(new ImmutableMapValuesAsSingletonSetGenerator())
86             .withFeatures(
87                 CollectionSize.ANY,
88                 MapFeature.REJECTS_DUPLICATES_AT_CREATION,
89                 CollectionFeature.KNOWN_ORDER,
90                 CollectionFeature.ALLOWS_NULL_QUERIES)
91             .named("ImmutableMap.asMultimap.asMap")
92             .createTestSuite());
93     suite.addTest(
94         CollectionTestSuiteBuilder.using(new ImmutableMapUnhashableValuesGenerator())
95             .withFeatures(
96                 CollectionSize.ANY,
97                 CollectionFeature.KNOWN_ORDER,
98                 CollectionFeature.ALLOWS_NULL_QUERIES)
99             .named("ImmutableMap.values, unhashable")
100             .createTestSuite());
101     suite.addTest(
102         ListTestSuiteBuilder.using(new ImmutableMapKeyListGenerator())
103             .named("ImmutableMap.keySet.asList")
104             .withFeatures(
105                 CollectionSize.ANY,
106                 CollectionFeature.SERIALIZABLE,
107                 CollectionFeature.REJECTS_DUPLICATES_AT_CREATION,
108                 CollectionFeature.ALLOWS_NULL_QUERIES)
109             .createTestSuite());
110     suite.addTest(
111         ListTestSuiteBuilder.using(new ImmutableMapEntryListGenerator())
112             .named("ImmutableMap.entrySet.asList")
113             .withFeatures(
114                 CollectionSize.ANY,
115                 CollectionFeature.SERIALIZABLE,
116                 CollectionFeature.REJECTS_DUPLICATES_AT_CREATION,
117                 CollectionFeature.ALLOWS_NULL_QUERIES)
118             .createTestSuite());
119     suite.addTest(
120         ListTestSuiteBuilder.using(new ImmutableMapValueListGenerator())
121             .named("ImmutableMap.values.asList")
122             .withFeatures(
123                 CollectionSize.ANY,
124                 CollectionFeature.SERIALIZABLE,
125                 CollectionFeature.ALLOWS_NULL_QUERIES)
126             .createTestSuite());
127     return suite;
128   }
129   public void testEmptyBuilder() {
130     ImmutableMap&lt;String, Integer&gt; map = new Builder&lt;String, Integer&gt;().buildOrThrow();
131     assertEquals(Collections.&lt;String, Integer&gt;emptyMap(), map);
132   }
133   public void testSingletonBuilder() {
134     ImmutableMap&lt;String, Integer&gt; map = new Builder&lt;String, Integer&gt;().put("one", 1).buildOrThrow();
135     assertMapEquals(map, "one", 1);
136   }
137   public void testBuilder() {
138     ImmutableMap&lt;String, Integer&gt; map =
139         new Builder&lt;String, Integer&gt;()
140             .put("one", 1)
141             .put("two", 2)
142             .put("three", 3)
143             .put("four", 4)
144             .put("five", 5)
145             .buildOrThrow();
146     assertMapEquals(map, "one", 1, "two", 2, "three", 3, "four", 4, "five", 5);
147   }
148   @GwtIncompatible
149   public void testBuilderExactlySizedReusesArray() {
150     ImmutableMap.Builder&lt;Integer, Integer&gt; builder = ImmutableMap.builderWithExpectedSize(10);
151     Object[] builderArray = builder.alternatingKeysAndValues;
152     for (int i = 0; i &lt; 10; i++) {
153 <a name="6"></a>      builder.put(i, i);
154     }
155     Object[] builderArrayAfterPuts = builder.alternatingKeysAndValues;
156     <font color="#8c8774"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>RegularImmutableMap&lt;Integer, Integer&gt; map =
157         (RegularImmutableMap&lt;Integer, Integer&gt;) builder.buildOrThrow();
158     Object[] mapInternalArray = map.alternatingKeysAndValues;
159     assertSame(builderArray, builderArrayAfterPuts);
160     assertSame(builderArray, mapInternalArray);
161   }
162   public void testBuilder_orderEntriesByValue() {
163     ImmutableMap&lt;String, Integer&gt; map =</b></font>
164         new Builder&lt;String, Integer&gt;()
165             .orderEntriesByValue(Ordering.natural())
166             .put("three", 3)
167             .put("one", 1)
168             .put("five", 5)
169             .put("four", 4)
170             .put("two", 2)
171             .buildOrThrow();
172     assertMapEquals(map, "one", 1, "two", 2, "three", 3, "four", 4, "five", 5);
173   }
174   public void testBuilder_orderEntriesByValueAfterExactSizeBuild() {
175     Builder&lt;String, Integer&gt; builder = new Builder&lt;String, Integer&gt;(2).put("four", 4).put("one", 1);
176     ImmutableMap&lt;String, Integer&gt; keyOrdered = builder.buildOrThrow();
177     ImmutableMap&lt;String, Integer&gt; valueOrdered =
178         builder.orderEntriesByValue(Ordering.natural()).buildOrThrow();
179     assertMapEquals(keyOrdered, "four", 4, "one", 1);
180     assertMapEquals(valueOrdered, "one", 1, "four", 4);
181   }
182   public void testBuilder_orderEntriesByValue_usedTwiceFails() {
183     ImmutableMap.Builder&lt;String, Integer&gt; builder =
184         new Builder&lt;String, Integer&gt;().orderEntriesByValue(Ordering.natural());
185     try {
186       builder.orderEntriesByValue(Ordering.natural());
187       fail("Expected IllegalStateException");
188     } catch (IllegalStateException expected) {
189     }
190   }
191   @GwtIncompatible   public void testBuilder_orderEntriesByValue_keepingLast() {
192     ImmutableMap.Builder&lt;String, Integer&gt; builder =
193         new Builder&lt;String, Integer&gt;()
194             .orderEntriesByValue(Ordering.natural())
195             .put("three", 3)
196             .put("one", 1)
197             .put("five", 5)
198             .put("four", 3)
199             .put("four", 5)
200             .put("four", 4)             .put("two", 2);
201     assertMapEquals(
202         builder.buildKeepingLast(), "one", 1, "two", 2, "three", 3, "four", 4, "five", 5);
203     try {
204       builder.buildOrThrow();
205       fail("Expected exception from duplicate keys");
206     } catch (IllegalArgumentException expected) {
207     }
208   }
209   @GwtIncompatible   public void testBuilder_orderEntriesByValue_keepingLast_builderSizeFieldPreserved() {
210     ImmutableMap.Builder&lt;String, Integer&gt; builder =
211         new Builder&lt;String, Integer&gt;()
212             .orderEntriesByValue(Ordering.natural())
213             .put("one", 1)
214             .put("one", 1);
215     assertMapEquals(builder.buildKeepingLast(), "one", 1);
216     try {
217       builder.buildOrThrow();
218       fail("Expected exception from duplicate keys");
219     } catch (IllegalArgumentException expected) {
220     }
221   }
222 <a name="0"></a>
223   public void testBuilder_withImmutableEntry() {
224     ImmutableMap&lt;String, Integer&gt; map =
225         new Builder&lt;String, Integer&gt;().put(<font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>Maps.immutableEntry("one", 1)).buildOrThrow();
226     assertMapEquals(map, "one", 1);
227   }
228   public void testBuilder_withImmutableEntryAndNullContents() {
229     Builder&lt;String, Integer&gt; builder = new Builder&lt;&gt;();
230     try {
231       builder.put(Maps.immutableEntry("one", (Integer) null));
232       fail();
233     } catch (NullPointerException expected) {
234     }
235     try {
236       builder.put(Maps.immutableEntry((String) null, 1));
237       fail();
238     } catch (NullPointerException expected) {
239     }
240   }
241   private static class StringHolder {
242     String string;
243   }
244   public void testBuilder_withMutableEntry() {
245     ImmutableMap.Builder&lt;String, Integer&gt; builder = new Builder&lt;&gt;();
246     final StringHolder holder = new StringHolder();
247     holder.string = "one";
248     Entry&lt;String, Integer&gt; entry =
249         new AbstractMapEntry&lt;String, Integer&gt;() {
250           @Override
251           public String getKey() {
252             return holder.string;
253           }
254           @Override
255           public Integer getValue() {
256             return 1;
257           }
258         };
259     builder.put(entry);
260     holder.string = "two";
261     assertMapEquals(builder.buildOrThrow</b></font>(), "one", 1);
262   }
263   public void testBuilderPutAllWithEmptyMap() {
264     ImmutableMap&lt;String, Integer&gt; map =
265         new Builder&lt;String, Integer&gt;()
266             .putAll(Collections.&lt;String, Integer&gt;emptyMap())
267             .buildOrThrow();
268     assertEquals(Collections.&lt;String, Integer&gt;emptyMap(), map);
269   }
270   public void testBuilderPutAll() {
271     Map&lt;String, Integer&gt; toPut = new LinkedHashMap&lt;&gt;();
272     toPut.put("one", 1);
273     toPut.put("two", 2);
274     toPut.put("three", 3);
275     Map&lt;String, Integer&gt; moreToPut = new LinkedHashMap&lt;&gt;();
276     moreToPut.put("four", 4);
277     moreToPut.put("five", 5);
278     ImmutableMap&lt;String, Integer&gt; map =
279         new Builder&lt;String, Integer&gt;().putAll(toPut).putAll(moreToPut).buildOrThrow();
280     assertMapEquals(map, "one", 1, "two", 2, "three", 3, "four", 4, "five", 5);
281   }
282   public void testBuilderReuse() {
283     Builder&lt;String, Integer&gt; builder = new Builder&lt;&gt;();
284     ImmutableMap&lt;String, Integer&gt; mapOne = builder.put("one", 1).put("two", 2).buildOrThrow();
285     ImmutableMap&lt;String, Integer&gt; mapTwo = builder.put("three", 3).put("four", 4).buildOrThrow();
286     assertMapEquals(mapOne, "one", 1, "two", 2);
287     assertMapEquals(mapTwo, "one", 1, "two", 2, "three", 3, "four", 4);
288   }
289   public void testBuilderPutNullKeyFailsAtomically() {
290     Builder&lt;String, Integer&gt; builder = new Builder&lt;&gt;();
291     try {
292       builder.put(null, 1);
293       fail();
294     } catch (NullPointerException expected) {
295     }
296     builder.put("foo", 2);
297     assertMapEquals(builder.buildOrThrow(), "foo", 2);
298   }
299   public void testBuilderPutImmutableEntryWithNullKeyFailsAtomically() {
300     Builder&lt;String, Integer&gt; builder = new Builder&lt;&gt;();
301     try {
302       builder.put(Maps.immutableEntry((String) null, 1));
303       fail();
304     } catch (NullPointerException expected) {
305     }
306     builder.put("foo", 2);
307     assertMapEquals(builder.buildOrThrow(), "foo", 2);
308   }
309   static class SimpleEntry&lt;K, V&gt; extends AbstractMapEntry&lt;K, V&gt; {
310     public K key;
311     public V value;
312     SimpleEntry(K key, V value) {
313       this.key = key;
314       this.value = value;
315     }
316     @Override
317     public K getKey() {
318       return key;
319     }
320     @Override
321     public V getValue() {
322       return value;
323     }
324   }
325   public void testBuilderPutMutableEntryWithNullKeyFailsAtomically() {
326     Builder&lt;String, Integer&gt; builder = new Builder&lt;&gt;();
327     try {
328       builder.put(new SimpleEntry&lt;String, Integer&gt;(null, 1));
329       fail();
330     } catch (NullPointerException expected) {
331     }
332     builder.put("foo", 2);
333     assertMapEquals(builder.buildOrThrow(), "foo", 2);
334   }
335   public void testBuilderPutNullKey() {
336     Builder&lt;String, Integer&gt; builder = new Builder&lt;&gt;();
337     try {
338       builder.put(null, 1);
339       fail();
340     } catch (NullPointerException expected) {
341     }
342   }
343   public void testBuilderPutNullValue() {
344     Builder&lt;String, Integer&gt; builder = new Builder&lt;&gt;();
345     try {
346       builder.put("one", null);
347       fail();
348     } catch (NullPointerException expected) {
349     }
350   }
351   public void testBuilderPutNullKeyViaPutAll() {
352     Builder&lt;String, Integer&gt; builder = new Builder&lt;&gt;();
353     try {
354       builder.putAll(Collections.&lt;String, Integer&gt;singletonMap(null, 1));
355       fail();
356     } catch (NullPointerException expected) {
357     }
358   }
359   public void testBuilderPutNullValueViaPutAll() {
360     Builder&lt;String, Integer&gt; builder = new Builder&lt;&gt;();
361     try {
362       builder.putAll(Collections.&lt;String, Integer&gt;singletonMap("one", null));
363       fail();
364     } catch (NullPointerException expected) {
365     }
366   }
367   public void testPuttingTheSameKeyTwiceThrowsOnBuild() {
368     Builder&lt;String, Integer&gt; builder =
369         new Builder&lt;String, Integer&gt;()
370             .put("one", 1)
371             .put("one", 1); 
372     try {
373       builder.buildOrThrow();
374       fail();
375     } catch (IllegalArgumentException expected) {
376     }
377   }
378   public void testBuildKeepingLast_allowsOverwrite() {
379     Builder&lt;Integer, String&gt; builder =
380         new Builder&lt;Integer, String&gt;()
381             .put(1, "un")
382             .put(2, "deux")
383             .put(70, "soixante-dix")
384             .put(70, "septante")
385             .put(70, "seventy")
386             .put(1, "one")
387             .put(2, "two");
388     ImmutableMap&lt;Integer, String&gt; map = builder.buildKeepingLast();
389     assertMapEquals(map, 1, "one", 2, "two", 70, "seventy");
390   }
391   public void testBuildKeepingLast_smallTableSameHash() {
392     String key1 = "QED";
393     String key2 = "R&amp;D";
394     assertThat(key1.hashCode()).isEqualTo(key2.hashCode());
395     ImmutableMap&lt;String, Integer&gt; map =
396         ImmutableMap.&lt;String, Integer&gt;builder()
397             .put(key1, 1)
398             .put(key2, 2)
399             .put(key1, 3)
400             .put(key2, 4)
401             .buildKeepingLast();
402     assertMapEquals(map, key1, 3, key2, 4);
403   }
404   public void testBuildKeepingLast_shortTable() {
405     Builder&lt;Integer, String&gt; builder = ImmutableMap.builder();
406     Map&lt;Integer, String&gt; expected = new LinkedHashMap&lt;&gt;();
407     for (int i = 0; i &lt; 1000; i++) {
408       Integer key = i &amp; ~1;
409       String value = String.valueOf(i);
410       builder.put(key, value);
411       expected.put(key, value);
412     }
413     ImmutableMap&lt;Integer, String&gt; map = builder.buildKeepingLast();
414     assertThat(map).hasSize(500);
415     assertThat(map).containsExactlyEntriesIn(expected).inOrder();
416   }
417   public void testBuildKeepingLast_bigTable() {
418     Builder&lt;Integer, String&gt; builder = ImmutableMap.builder();
419     Map&lt;Integer, String&gt; expected = new LinkedHashMap&lt;&gt;();
420     for (int i = 0; i &lt; 200_000; i++) {
421       Integer key = i &amp; ~1;
422       String value = String.valueOf(i);
423       builder.put(key, value);
424       expected.put(key, value);
425     }
426     ImmutableMap&lt;Integer, String&gt; map = builder.buildKeepingLast();
427     assertThat(map).hasSize(100_000);
428     assertThat(map).containsExactlyEntriesIn(expected).inOrder();
429   }
430   @GwtIncompatible   public void testBuilder_keepingLast_thenOrThrow() {
431     ImmutableMap.Builder&lt;String, Integer&gt; builder =
432         new Builder&lt;String, Integer&gt;()
433             .put("three", 3)
434             .put("one", 1)
435             .put("five", 5)
436             .put("four", 3)
437             .put("four", 5)
438             .put("four", 4)             .put("two", 2);
439     assertMapEquals(
440         builder.buildKeepingLast(), "three", 3, "one", 1, "five", 5, "four", 4, "two", 2);
441     try {
442       builder.buildOrThrow();
443       fail("Expected exception from duplicate keys");
444     } catch (IllegalArgumentException expected) {
445       Pattern pattern = Pattern.compile("Multiple entries with same key: four=(.*) and four=(.*)");
446       assertThat(expected).hasMessageThat().matches(pattern);
447       Matcher matcher = pattern.matcher(expected.getMessage());
448       assertThat(matcher.matches()).isTrue();
449       assertThat(matcher.group(1)).isNotEqualTo(matcher.group(2));
450     }
451   }
452 <a name="1"></a>
453   public void testOf() {
454     assertMapEquals(ImmutableMap.of("one", 1), "one", 1);
455     assertMapEquals(<font color="#f63526"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>ImmutableMap.of("one", 1, "two", 2), "one", 1, "two", 2);
456     assertMapEquals(
457         ImmutableMap.of("one", 1, "two", 2, "three", 3), "one", 1, "two", 2, "three", 3);
458     assertMapEquals(
459         ImmutableMap.of("one", 1, "two", 2, "three", 3, "four", 4),
460         "one",
461         1,
462         "two",
463         2,
464         "three",
465         3,
466         "four",
467         4);
468     assertMapEquals(
469         ImmutableMap.of("one", 1, "two", 2, "three", 3, "four", 4, "five", 5),
470         "one",
471         1,
472         "two",
473         2,
474         "three",
475         3,
476         "four",
477         4,
478         "five",
479         5);
480     assertMapEquals(
481         ImmutableMap.of(
482             "one", 1,
483             "two", 2,
484             "three", 3,
485             "four", 4,
486             "five", 5,
487             "six", 6),
488         "one",
489         1,
490         "two",
491         2,
492         "three",
493         3,
494         "four",
495         4,
496         "five",
497         5,
498         "six",
499         6);
500     assertMapEquals(
501         ImmutableMap.of(
502             "one", 1,
503             "two", 2,
504             "three", 3,
505             "four", 4,
506             "five", 5,
507             "six", 6,
508             "seven", 7),
509         "one",
510         1,
511         "two",
512         2,
513         "three",
514         3,
515         "four",
516         4,
517         "five",
518         5,
519         "six",
520         6,
521         "seven",
522         7);
523     assertMapEquals(
524         ImmutableMap.of(
525             "one", 1,
526             "two", 2,
527             "three", 3,
528             "four", 4,
529             "five", 5,
530             "six", 6,
531             "seven", 7,
532             "eight", 8),
533         "one",
534         1,
535         "two",
536         2,
537         "three",
538         3,
539         "four",
540         4,
541         "five",
542         5,
543         "six",
544         6,
545         "seven",
546         7,
547         "eight",
548         8);
549     assertMapEquals(
550         ImmutableMap.of(
551             "one", 1,
552             "two", 2,
553             "three", 3,
554             "four", 4,
555             "five", 5,
556             "six", 6,
557             "seven", 7,
558             "eight", 8,
559             "nine", 9),
560         "one",
561         1,
562         "two",
563         2,
564         "three",
565         3,
566         "four",
567         4,
568         "five",
569         5,
570         "six",
571         6,
572         "seven",
573         7,
574         "eight",
575         8,
576         "nine",
577         9);
578     assertMapEquals(
579         ImmutableMap.of(
580             "one", 1,
581             "two", 2,
582             "three", 3,
583             "four", 4,
584             "five", 5,
585             "six", 6,
586             "seven", 7,
587             "eight", 8,
588             "nine", 9,
589             "ten", 10),
590         "one",
591         1,
592         "two",
593         2,
594         "three",
595         3,
596         "four",
597         4,
598         "five",
599         5,
600         "six",
601         6,
602         "seven",
603         7,
604         "eight",
605         8,
606         "nine",
607         9,
608         "ten",
609         10);
610   }
611   public void testOfNullKey() {</b></font>
612     try {
613       ImmutableMap.of(null, 1);
614       fail();
615     } catch (NullPointerException expected) {
616     }
617     try {
618       ImmutableMap.of("one", 1, null, 2);
619       fail();
620     } catch (NullPointerException expected) {
621     }
622   }
623   public void testOfNullValue() {
624     try {
625       ImmutableMap.of("one", null);
626       fail();
627     } catch (NullPointerException expected) {
628     }
629     try {
630       ImmutableMap.of("one", 1, "two", null);
631       fail();
632     } catch (NullPointerException expected) {
633     }
634   }
635   public void testOfWithDuplicateKey() {
636     try {
637       ImmutableMap.of("one", 1, "one", 1);
638       fail();
639     } catch (IllegalArgumentException expected) {
640     }
641   }
642   public void testCopyOfEmptyMap() {
643     ImmutableMap&lt;String, Integer&gt; copy =
644         ImmutableMap.copyOf(Collections.&lt;String, Integer&gt;emptyMap());
645     assertEquals(Collections.&lt;String, Integer&gt;emptyMap(), copy);
646     assertSame(copy, ImmutableMap.copyOf(copy));
647   }
648   public void testCopyOfSingletonMap() {
649     ImmutableMap&lt;String, Integer&gt; copy = ImmutableMap.copyOf(Collections.singletonMap("one", 1));
650     assertMapEquals(copy, "one", 1);
651     assertSame(copy, ImmutableMap.copyOf(copy));
652   }
653   public void testCopyOf() {
654     Map&lt;String, Integer&gt; original = new LinkedHashMap&lt;&gt;();
655     original.put("one", 1);
656     original.put("two", 2);
657     original.put("three", 3);
658     ImmutableMap&lt;String, Integer&gt; copy = ImmutableMap.copyOf(original);
659     assertMapEquals(copy, "one", 1, "two", 2, "three", 3);
660     assertSame(copy, ImmutableMap.copyOf(copy));
661   }
662   public void testToImmutableMap_java7_combine() {
663     ImmutableMap.Builder&lt;String, Integer&gt; zis =
664         ImmutableMap.&lt;String, Integer&gt;builder().put("one", 1);
665     ImmutableMap.Builder&lt;String, Integer&gt; zat =
666         ImmutableMap.&lt;String, Integer&gt;builder().put("two", 2).put("three", 3);
667     assertMapEquals(zis.combine(zat).build(), "one", 1, "two", 2, "three", 3);
668   }
669   public void testToImmutableMap_exceptionOnDuplicateKey_java7_combine() {
670     ImmutableMap.Builder&lt;String, Integer&gt; zis =
671         ImmutableMap.&lt;String, Integer&gt;builder().put("one", 1).put("two", 2);
672     ImmutableMap.Builder&lt;String, Integer&gt; zat =
673         ImmutableMap.&lt;String, Integer&gt;builder().put("two", 22).put("three", 3);
674     try {
675       zis.combine(zat).build();
676       fail("Expected IllegalArgumentException");
677     } catch (IllegalArgumentException expected) {
678     }
679   }
680   public static void hashtableTestHelper(ImmutableList&lt;Integer&gt; sizes) {
681     for (int size : sizes) {
682       Builder&lt;Integer, Integer&gt; builder = ImmutableMap.builderWithExpectedSize(size);
683       for (int i = 0; i &lt; size; i++) {
684         Integer integer = i;
685         builder.put(integer, integer);
686       }
687       ImmutableMap&lt;Integer, Integer&gt; map = builder.build();
688       assertEquals(size, map.size());
689       int entries = 0;
690       for (Integer key : map.keySet()) {
691         assertEquals(entries, key.intValue());
692         assertSame(key, map.get(key));
693         entries++;
694       }
695       assertEquals(size, entries);
696     }
697   }
698   public void testByteArrayHashtable() {
699     hashtableTestHelper(ImmutableList.of(2, 89));
700   }
701   public void testShortArrayHashtable() {
702     hashtableTestHelper(ImmutableList.of(90, 22937));
703   }
704   public void testIntArrayHashtable() {
705     hashtableTestHelper(ImmutableList.of(22938));
706   }
707 <a name="5"></a>
708   public void testNullGet() {
709     ImmutableMap&lt;String, Integer&gt; map = ImmutableMap.of("one", 1);
710     <font color="#151b8d"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>assertNull(map.get(null));
711   }
712   public void testAsMultimap() {
713     ImmutableMap&lt;String, Integer&gt; map =
714         ImmutableMap.of("one", 1, "won", 1, "two", 2, "too", 2, "three", 3);
715     ImmutableSetMultimap&lt;String, Integer&gt; expected =
716         ImmutableSetMultimap.of("one", 1, "won", 1, "two", 2, "too", 2, "three", 3);
717     assertEquals</b></font>(expected, map.asMultimap());
718   }
719   public void testAsMultimapWhenEmpty() {
720     ImmutableMap&lt;String, Integer&gt; map = ImmutableMap.of();
721     ImmutableSetMultimap&lt;String, Integer&gt; expected = ImmutableSetMultimap.of();
722     assertEquals(expected, map.asMultimap());
723   }
724 <a name="2"></a>  public void testAsMultimapCaches() {
725     ImmutableMap&lt;String, Integer&gt; map = ImmutableMap.of("one", 1);
726     ImmutableSetMultimap&lt;String, Integer&gt; multimap1 = map.asMultimap();
727     ImmutableSetMultimap&lt;String, Integer&gt; multimap2 = <font color="#980517"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>map.asMultimap();
728     assertEquals(1, multimap1.asMap().size());
729     assertSame(multimap1, multimap2);
730   }
731   @GwtIncompatible   public void testNullPointers() {
732     NullPointerTester tester = new NullPointerTester();
733     tester.testAllPublicStaticMethods(ImmutableMap.class);
734     tester.testAllPublicInstanceMethods</b></font>(new ImmutableMap.Builder&lt;Object, Object&gt;());
735     tester.testAllPublicInstanceMethods(ImmutableMap.of());
736     tester.testAllPublicInstanceMethods(ImmutableMap.of("one", 1));
737     tester.testAllPublicInstanceMethods(ImmutableMap.of("one", 1, "two", 2, "three", 3));
738   }
739   private static &lt;K, V&gt; void assertMapEquals(Map&lt;K, V&gt; map, Object... alternatingKeysAndValues) {
740     Map&lt;Object, Object&gt; expected = new LinkedHashMap&lt;&gt;();
741     for (int i = 0; i &lt; alternatingKeysAndValues.length; i += 2) {
742       expected.put(alternatingKeysAndValues[i], alternatingKeysAndValues[i + 1]);
743     }
744     assertThat(map).containsExactlyEntriesIn(expected).inOrder();
745   }
746   private static class IntHolder implements Serializable {
747     public int value;
748     public IntHolder(int value) {
749       this.value = value;
750     }
751     @Override
752     public boolean equals(Object o) {
753       return (o instanceof IntHolder) &amp;&amp; ((IntHolder) o).value == value;
754     }
755     @Override
756     public int hashCode() {
757       return value;
758     }
759     private static final long serialVersionUID = 5;
760   }
761   public void testMutableValues() {
762     IntHolder holderA = new IntHolder(1);
763     IntHolder holderB = new IntHolder(2);
764     Map&lt;String, IntHolder&gt; map = ImmutableMap.of("a", holderA, "b", holderB);
765     holderA.value = 3;
766     assertTrue(map.entrySet().contains(Maps.immutableEntry("a", new IntHolder(3))));
767     Map&lt;String, Integer&gt; intMap = ImmutableMap.of("a", 3, "b", 2);
768     assertEquals(intMap.hashCode(), map.entrySet().hashCode());
769     assertEquals(intMap.hashCode(), map.hashCode());
770   }
771   @GwtIncompatible   public void testViewSerialization() {
772     Map&lt;String, Integer&gt; map = ImmutableMap.of("one", 1, "two", 2, "three", 3);
773     LenientSerializableTester.reserializeAndAssertLenient(map.entrySet());
774     LenientSerializableTester.reserializeAndAssertLenient(map.keySet());
775     Collection&lt;Integer&gt; reserializedValues = reserialize(map.values());
776     assertEquals(Lists.newArrayList(map.values()), Lists.newArrayList(reserializedValues));
777     assertTrue(reserializedValues instanceof ImmutableCollection);
778   }
779   @GwtIncompatible   public void testKeySetIsSerializable_regularImmutableMap() {
780     class NonSerializableClass {}
781     Map&lt;String, NonSerializableClass&gt; map =
782         RegularImmutableMap.create(1, new Object[] {"one", new NonSerializableClass()});
783     Set&lt;String&gt; set = map.keySet();
784     LenientSerializableTester.reserializeAndAssertLenient(set);
785   }
786   @GwtIncompatible   public void testValuesCollectionIsSerializable_regularImmutableMap() {
787     class NonSerializableClass {}
788     Map&lt;NonSerializableClass, String&gt; map =
789         RegularImmutableMap.create(1, new Object[] {new NonSerializableClass(), "value"});
790     Collection&lt;String&gt; collection = map.values();
791     LenientSerializableTester.reserializeAndAssertElementsEqual(collection);
792   }
793   @GwtIncompatible   @SuppressWarnings("unchecked")
794   public void ignore_testSerializationNoDuplication_regularImmutableMap() throws Exception {
795     Object[] entries = new Object[2000];
796     for (int i = 0; i &lt; entries.length; i++) {
797       entries[i] = i;
798     }
799     ImmutableMap&lt;Integer, Integer&gt; map = RegularImmutableMap.create(entries.length / 2, entries);
800     Set&lt;Integer&gt; keySet = map.keySet();
801     Collection&lt;Integer&gt; values = map.values();
802     ByteArrayOutputStream bytes = new ByteArrayOutputStream();
803     ObjectOutputStream oos = new ObjectOutputStream(bytes);
804     oos.writeObject(map);
805     oos.flush();
806     int mapSize = bytes.size();
807     oos.writeObject(keySet);
808     oos.writeObject(values);
809     oos.close();
810     int finalSize = bytes.size();
811     assertThat(finalSize - mapSize).isLessThan(100);
812   }
813   public void testEquals() {
814     new EqualsTester()
815         .addEqualityGroup(
816             ImmutableMap.of(),
817             ImmutableMap.builder().buildOrThrow(),
818             ImmutableMap.ofEntries(),
819             map())
820         .addEqualityGroup(
821             ImmutableMap.of(1, 1),
822             ImmutableMap.builder().put(1, 1).buildOrThrow(),
823             ImmutableMap.ofEntries(entry(1, 1)),
824             map(1, 1))
825         .addEqualityGroup(
826             ImmutableMap.of(1, 1, 2, 2),
827             ImmutableMap.builder().put(1, 1).put(2, 2).buildOrThrow(),
828             ImmutableMap.ofEntries(entry(1, 1), entry(2, 2)),
829             map(1, 1, 2, 2))
830         .addEqualityGroup(
831             ImmutableMap.of(1, 1, 2, 2, 3, 3),
832             ImmutableMap.builder().put(1, 1).put(2, 2).put(3, 3).buildOrThrow(),
833             ImmutableMap.ofEntries(entry(1, 1), entry(2, 2), entry(3, 3)),
834             map(1, 1, 2, 2, 3, 3))
835         .addEqualityGroup(
836             ImmutableMap.of(1, 4, 2, 2, 3, 3),
837             ImmutableMap.builder().put(1, 4).put(2, 2).put(3, 3).buildOrThrow(),
838             ImmutableMap.ofEntries(entry(1, 4), entry(2, 2), entry(3, 3)),
839             map(1, 4, 2, 2, 3, 3))
840         .addEqualityGroup(
841             ImmutableMap.of(1, 1, 2, 4, 3, 3),
842             ImmutableMap.builder().put(1, 1).put(2, 4).put(3, 3).buildOrThrow(),
843             ImmutableMap.ofEntries(entry(1, 1), entry(2, 4), entry(3, 3)),
844             map(1, 1, 2, 4, 3, 3))
845         .addEqualityGroup(
846             ImmutableMap.of(1, 1, 2, 2, 3, 4),
847             ImmutableMap.builder().put(1, 1).put(2, 2).put(3, 4).buildOrThrow(),
848             ImmutableMap.ofEntries(entry(1, 1), entry(2, 2), entry(3, 4)),
849             map(1, 1, 2, 2, 3, 4))
850         .addEqualityGroup(
851             ImmutableMap.of(1, 2, 2, 3, 3, 1),
852             ImmutableMap.builder().put(1, 2).put(2, 3).put(3, 1).buildOrThrow(),
853             ImmutableMap.ofEntries(entry(1, 2), entry(2, 3), entry(3, 1)),
854             map(1, 2, 2, 3, 3, 1))
855         .addEqualityGroup(
856             ImmutableMap.of(1, 1, 2, 2, 3, 3, 4, 4),
857             ImmutableMap.builder().put(1, 1).put(2, 2).put(3, 3).put(4, 4).buildOrThrow(),
858             ImmutableMap.ofEntries(entry(1, 1), entry(2, 2), entry(3, 3), entry(4, 4)),
859 <a name="3"></a>            map(1, 1, 2, 2, 3, 3, 4, 4))
860         .addEqualityGroup(
861             ImmutableMap.of(1, 1, 2, 2, 3, 3, 4, 4, 5, 5),
862             <font color="#53858b"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>ImmutableMap.builder().put(1, 1).put(2, 2).put(3, 3).put(4, 4).put(5, 5).buildOrThrow(),
863             ImmutableMap.ofEntries(entry(1, 1), entry(2, 2), entry(3, 3), entry(4, 4), entry(5, 5)),
864             map(1, 1, 2, 2, 3, 3, 4, 4, 5, 5))
865         .testEquals();
866   }
867   public void testOfEntriesNull() {
868     Entry&lt;Integer, Integer&gt; nullKey = entry(null, 23)</b></font>;
869     try {
870       ImmutableMap.ofEntries(nullKey);
871       fail();
872     } catch (NullPointerException expected) {
873     }
874     Entry&lt;Integer, Integer&gt; nullValue = entry(23, null);
875     try {
876       ImmutableMap.ofEntries(nullValue);
877       fail();
878     } catch (NullPointerException expected) {
879     }
880   }
881   private static &lt;T&gt; Map&lt;T, T&gt; map(T... keysAndValues) {
882     assertThat(keysAndValues.length % 2).isEqualTo(0);
883     LinkedHashMap&lt;T, T&gt; map = new LinkedHashMap&lt;&gt;();
884     for (int i = 0; i &lt; keysAndValues.length; i += 2) {
885       T key = keysAndValues[i];
886       T value = keysAndValues[i + 1];
887       T old = map.put(key, value);
888       assertWithMessage("Key %s set to %s and %s", key, value, old).that(old).isNull();
889     }
890     return map;
891   }
892   private static &lt;T&gt; Entry&lt;T, T&gt; entry(T key, T value) {
893     return new AbstractMap.SimpleImmutableEntry&lt;&gt;(key, value);
894   }
895 }
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
