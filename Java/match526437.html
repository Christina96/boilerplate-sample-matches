<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for AtomicDoubleTest.java &amp; ClassPathTest.java</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for AtomicDoubleTest.java &amp; ClassPathTest.java
      </h3>
<h1 align="center">
        12.0%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>AtomicDoubleTest.java (18.73805%)<th>ClassPathTest.java (8.876812%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(341-349)<td><a href="#" name="0">(433-439)</a><td align="center"><font color="#ff0000">16</font>
<tr onclick='openModal("#f63526")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f63526"><font color="#f63526">-</font><td><a href="#" name="1">(275-282)<td><a href="#" name="1">(213-220)</a><td align="center"><font color="#bf0000">12</font>
<tr onclick='openModal("#980517")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#980517"><font color="#980517">-</font><td><a href="#" name="2">(285-291)<td><a href="#" name="2">(467-473)</a><td align="center"><font color="#af0000">11</font>
<tr onclick='openModal("#53858b")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#53858b"><font color="#53858b">-</font><td><a href="#" name="3">(43-47)<td><a href="#" name="3">(557-561)</a><td align="center"><font color="#af0000">11</font>
<tr onclick='openModal("#6cc417")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#6cc417"><font color="#6cc417">-</font><td><a href="#" name="4">(114-121)<td><a href="#" name="4">(315-321)</a><td align="center"><font color="#9f0000">10</font>
<tr onclick='openModal("#151b8d")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#151b8d"><font color="#151b8d">-</font><td><a href="#" name="5">(90-95)<td><a href="#" name="5">(387-390)</a><td align="center"><font color="#9f0000">10</font>
<tr onclick='openModal("#8c8774")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#8c8774"><font color="#8c8774">-</font><td><a href="#" name="6">(62-68)<td><a href="#" name="6">(299-304)</a><td align="center"><font color="#9f0000">10</font>
<tr onclick='openModal("#38a4a5")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#38a4a5"><font color="#38a4a5">-</font><td><a href="#" name="7">(149-154)<td><a href="#" name="7">(307-311)</a><td align="center"><font color="#8f0000">9</font>
<tr onclick='openModal("#c58917")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#c58917"><font color="#c58917">-</font><td><a href="#" name="8">(69-76)<td><a href="#" name="8">(536-541)</a><td align="center"><font color="#8f0000">9</font>
</td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>AtomicDoubleTest.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 package com.google.common.util.concurrent;
2 import static java.lang.Math.max;
3 public class AtomicDoubleTest extends JSR166TestCase {
4   private static final double[] VALUES = {
5     Double.NEGATIVE_INFINITY,
6     -Double.MAX_VALUE,
7     (double) Long.MIN_VALUE,
8     (double) Integer.MIN_VALUE,
9     -Math.PI,
10     -1.0,
11     -Double.MIN_VALUE,
12     -0.0,
13     +0.0,
14     Double.MIN_VALUE,
15     1.0,
16     Math.PI,
17     (double) Integer.MAX_VALUE,
18     (double) Long.MAX_VALUE,
19     Double.MAX_VALUE,
20     Double.POSITIVE_INFINITY,
21     Double.NaN,
22     Float.MAX_VALUE,
23 <a name="3"></a>  };
24   static boolean bitEquals(double x, <font color="#53858b"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>double y) {
25     return Double.doubleToRawLongBits(x) == Double.doubleToRawLongBits(y);
26   }
27   static void assertBitEquals(double x, double y) {</b></font>
28     assertEquals(Double.doubleToRawLongBits(x), Double.doubleToRawLongBits(y));
29   }
30   public void testConstructor() {
31     for (double x : VALUES) {
32       AtomicDouble a = new AtomicDouble(x);
33       assertBitEquals(x, a.get());
34     }
35   }
36 <a name="6"></a>    public void testConstructor2() {
37     AtomicDouble a = new AtomicDouble();
38     <font color="#8c8774"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>assertBitEquals(0.0, a.get());
39   }
40 <a name="8"></a>  public void testGetSet() {
41     AtomicDouble at = new AtomicDouble(1.0);
42     assertBitEquals(1.0, at.get</b></font>());
43     for (double x : VALUES) <font color="#c58917"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>{
44       at.set(x);
45       assertBitEquals(x, at.get());
46     }
47   }
48   public void te</b></font>stGetLazySet() {
49     AtomicDouble at = new AtomicDouble(1.0);
50     assertBitEquals(1.0, at.get());
51     for (double x : VALUES) {
52       at.lazySet(x);
53       assertBitEquals(x, at.get());
54     }
55   }
56   public void testCompareAndSet() {
57 <a name="5"></a>    double prev = Math.E;
58     double unused = Math.E + Math.PI;
59     AtomicDouble at = new AtomicDouble(prev);
60     for (double x : VALUES) <font color="#151b8d"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>{
61       assertBitEquals(prev, at.get());
62       assertFalse(at.compareAndSet(unused, x));
63       assertBitEquals(prev, at.get());
64       assertTrue(at.compareAndSet(prev, x));
65       assertBitEquals</b></font>(x, at.get());
66       prev = x;
67     }
68   }
69   public void testCompareAndSetInMultipleThreads() throws Exception {
70     final AtomicDouble at = new AtomicDouble(1.0);
71     Thread t =
72         newStartedThread(
73             new CheckedRunnable() {
74               @Override
75               public void realRun() {
76                 while (!at.compareAndSet(2.0, 3.0)) {
77                   Thread.yield();
78                 }
79 <a name="4"></a>              }
80             });
81     <font color="#6cc417"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>assertTrue(at.compareAndSet(1.0, 2.0));
82     awaitTermination(t);
83     assertBitEquals(3.0, at.get());
84   }
85   public void testWeakCompareAndSet() {
86     double prev = Math.E</b></font>;
87     double unused = Math.E + Math.PI;
88     AtomicDouble at = new AtomicDouble(prev);
89     for (double x : VALUES) {
90       assertBitEquals(prev, at.get());
91       assertFalse(at.weakCompareAndSet(unused, x));
92       assertBitEquals(prev, at.get());
93       while (!at.weakCompareAndSet(prev, x)) {
94         ;
95       }
96       assertBitEquals(x, at.get());
97       prev = x;
98     }
99   }
100   public void testGetAndSet() {
101     double prev = Math.E;
102     AtomicDouble at = new AtomicDouble(prev);
103     for (double x : VALUES) {
104       assertBitEquals(prev, at.getAndSet(x));
105       prev = x;
106     }
107   }
108 <a name="7"></a>    public void testGetAndAdd() {
109     for (double x : VALUES) {
110       for (double y : VALUES) <font color="#38a4a5"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>{
111         AtomicDouble a = new AtomicDouble(x);
112         double z = a.getAndAdd(y);
113         assertBitEquals(x, z);
114         assertBitEquals(x + y, a.get());
115       }</b></font>
116     }
117   }
118   public void testAddAndGet() {
119     for (double x : VALUES) {
120       for (double y : VALUES) {
121         AtomicDouble a = new AtomicDouble(x);
122         double z = a.addAndGet(y);
123         assertBitEquals(x + y, z);
124         assertBitEquals(x + y, a.get());
125       }
126     }
127   }
128   public void testGetAndAccumulateWithSum() {
129     for (double x : VALUES) {
130       for (double y : VALUES) {
131         AtomicDouble a = new AtomicDouble(x);
132         double z = a.getAndAccumulate(y, Double::sum);
133         assertBitEquals(x, z);
134         assertBitEquals(x + y, a.get());
135       }
136     }
137   }
138   public void testGetAndAccumulateWithMax() {
139     for (double x : VALUES) {
140       for (double y : VALUES) {
141         AtomicDouble a = new AtomicDouble(x);
142         double z = a.getAndAccumulate(y, Double::max);
143         double expectedMax = max(x, y);
144         assertBitEquals(x, z);
145         assertBitEquals(expectedMax, a.get());
146       }
147     }
148   }
149   public void testAccumulateAndGetWithSum() {
150     for (double x : VALUES) {
151       for (double y : VALUES) {
152         AtomicDouble a = new AtomicDouble(x);
153         double z = a.accumulateAndGet(y, Double::sum);
154         assertBitEquals(x + y, z);
155         assertBitEquals(x + y, a.get());
156       }
157     }
158   }
159   public void testAccumulateAndGetWithMax() {
160     for (double x : VALUES) {
161       for (double y : VALUES) {
162         AtomicDouble a = new AtomicDouble(x);
163         double z = a.accumulateAndGet(y, Double::max);
164         double expectedMax = max(x, y);
165         assertBitEquals(expectedMax, z);
166         assertBitEquals(expectedMax, a.get());
167       }
168     }
169   }
170   public void testGetAndUpdateWithSum() {
171     for (double x : VALUES) {
172       for (double y : VALUES) {
173         AtomicDouble a = new AtomicDouble(x);
174         double z = a.getAndUpdate(value -&gt; value + y);
175         assertBitEquals(x, z);
176         assertBitEquals(x + y, a.get());
177       }
178     }
179   }
180   public void testGetAndUpdateWithSubtract() {
181     for (double x : VALUES) {
182       for (double y : VALUES) {
183         AtomicDouble a = new AtomicDouble(x);
184         double z = a.getAndUpdate(value -&gt; value - y);
185         assertBitEquals(x, z);
186         assertBitEquals(x - y, a.get());
187       }
188     }
189   }
190   public void testUpdateAndGetWithSum() {
191     for (double x : VALUES) {
192       for (double y : VALUES) {
193         AtomicDouble a = new AtomicDouble(x);
194         double z = a.updateAndGet(value -&gt; value + y);
195         assertBitEquals(x + y, z);
196         assertBitEquals(x + y, a.get());
197       }
198     }
199   }
200   public void testUpdateAndGetWithSubtract() {
201     for (double x : VALUES) {
202       for (double y : VALUES) {
203         AtomicDouble a = new AtomicDouble(x);
204         double z = a.updateAndGet(value -&gt; value - y);
205         assertBitEquals(x - y, z);
206         assertBitEquals(x - y, a.get());
207       }
208     }
209   }
210 <a name="1"></a>    public void testSerialization() throws Exception {
211     AtomicDouble a = new AtomicDouble();
212     AtomicDouble b = <font color="#f63526"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>serialClone(a);
213     assertNotSame(a, b);
214     a.set(-22.0);
215     AtomicDouble c = serialClone(a);
216     assertNotSame(b, c);
217     assertBitEquals(-22.0, a.get());
218     assertBitEquals(0.0, b.get());
219 <a name="2"></a>    assertBitEquals(-22.0, c.get</b></font>());
220     for (double x : VALUES) {
221       AtomicDouble d = new AtomicDouble(x);
222       <font color="#980517"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>assertBitEquals(serialClone(d).get(), d.get());
223     }
224   }
225   public void testToString() {
226     AtomicDouble at = new AtomicDouble()</b></font>;
227     assertEquals("0.0", at.toString());
228     for (double x : VALUES) {
229       at.set(x);
230       assertEquals(Double.toString(x), at.toString());
231     }
232   }
233   public void testIntValue() {
234     AtomicDouble at = new AtomicDouble();
235     assertEquals(0, at.intValue());
236     for (double x : VALUES) {
237       at.set(x);
238       assertEquals((int) x, at.intValue());
239     }
240   }
241   public void testLongValue() {
242     AtomicDouble at = new AtomicDouble();
243     assertEquals(0L, at.longValue());
244     for (double x : VALUES) {
245       at.set(x);
246       assertEquals((long) x, at.longValue());
247     }
248   }
249   public void testFloatValue() {
250     AtomicDouble at = new AtomicDouble();
251     assertEquals(0.0f, at.floatValue());
252     for (double x : VALUES) {
253       at.set(x);
254       assertEquals((float) x, at.floatValue());
255     }
256   }
257   public void testDoubleValue() {
258     AtomicDouble at = new AtomicDouble();
259     assertEquals(0.0d, at.doubleValue());
260     for (double x : VALUES) {
261       at.set(x);
262       assertBitEquals(x, at.doubleValue());
263     }
264   }
265 <a name="0"></a>
266   public void testDistinctZeros() {
267     AtomicDouble at = <font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>new AtomicDouble(+0.0);
268     assertFalse(at.compareAndSet(-0.0, 7.0));
269     assertFalse(at.weakCompareAndSet(-0.0, 7.0));
270     assertBitEquals(+0.0, at.get());
271     assertTrue(at.compareAndSet(+0.0, -0.0));
272     assertBitEquals(-0.0, at.get());
273     assertFalse(at.compareAndSet(+0.0, 7.0));
274     assertFalse(at.weakCompareAndSet(+0.0, 7.0));
275     assertBitEquals</b></font>(-0.0, at.get());
276   }
277 }
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>ClassPathTest.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 /*
2  * Copyright (C) 2012 The Guava Authors
3  *
4  * Licensed under the Apache License, Version 2.0 (the "License");
5  * you may not use this file except in compliance with the License.
6  * You may obtain a copy of the License at
7  *
8  * http://www.apache.org/licenses/LICENSE-2.0
9  *
10  * Unless required by applicable law or agreed to in writing, software
11  * distributed under the License is distributed on an "AS IS" BASIS,
12  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
13  * See the License for the specific language governing permissions and
14  * limitations under the License.
15  */
16 package com.google.common.reflect;
17 import static com.google.common.base.Charsets.US_ASCII;
18 import static com.google.common.base.StandardSystemProperty.JAVA_CLASS_PATH;
19 import static com.google.common.base.StandardSystemProperty.PATH_SEPARATOR;
20 import static com.google.common.io.MoreFiles.deleteRecursively;
21 import static com.google.common.truth.Truth.assertThat;
22 import static java.nio.file.Files.createDirectory;
23 import static java.nio.file.Files.createFile;
24 import static java.nio.file.Files.createSymbolicLink;
25 import static java.nio.file.Files.createTempDirectory;
26 import static java.util.logging.Level.WARNING;
27 import com.google.common.base.Joiner;
28 import com.google.common.collect.ImmutableList;
29 import com.google.common.collect.ImmutableSet;
30 import com.google.common.io.Closer;
31 import com.google.common.io.Files;
32 import com.google.common.io.Resources;
33 import com.google.common.reflect.ClassPath.ClassInfo;
34 import com.google.common.reflect.ClassPath.ResourceInfo;
35 import com.google.common.testing.EqualsTester;
36 import com.google.common.testing.NullPointerTester;
37 import java.io.ByteArrayInputStream;
38 import java.io.File;
39 import java.io.FileOutputStream;
40 import java.io.FilePermission;
41 import java.io.IOException;
42 import java.io.InputStream;
43 import java.net.MalformedURLException;
44 import java.net.URISyntaxException;
45 import java.net.URL;
46 import java.net.URLClassLoader;
47 import java.security.Permission;
48 import java.security.PermissionCollection;
49 import java.util.jar.Attributes;
50 import java.util.jar.JarOutputStream;
51 import java.util.jar.Manifest;
52 import java.util.logging.Logger;
53 import java.util.zip.ZipEntry;
54 import junit.framework.TestCase;
55 import org.junit.Test;
56 public class ClassPathTest extends TestCase {
57   private static final Logger log = Logger.getLogger(ClassPathTest.class.getName());
58   private static final File FILE = new File(".");
59   public void testEquals() {
60     new EqualsTester()
61         .addEqualityGroup(classInfo(ClassPathTest.class), classInfo(ClassPathTest.class))
62         .addEqualityGroup(classInfo(Test.class), classInfo(Test.class, getClass().getClassLoader()))
63         .addEqualityGroup(
64             new ResourceInfo(FILE, "a/b/c.txt", getClass().getClassLoader()),
65             new ResourceInfo(FILE, "a/b/c.txt", getClass().getClassLoader()))
66         .addEqualityGroup(new ResourceInfo(FILE, "x.txt", getClass().getClassLoader()))
67         .testEquals();
68   }
69   @AndroidIncompatible   public void testClassPathEntries_emptyURLClassLoader_noParent() {
70     assertThat(ClassPath.getClassPathEntries(new URLClassLoader(new URL[0], null)).keySet())
71         .isEmpty();
72   }
73   @AndroidIncompatible   public void testClassPathEntries_URLClassLoader_noParent() throws Exception {
74     URL url1 = new URL("file:/a");
75     URL url2 = new URL("file:/b");
76     URLClassLoader classloader = new URLClassLoader(new URL[] {url1, url2}, null);
77     assertThat(ClassPath.getClassPathEntries(classloader))
78         .containsExactly(new File("/a"), classloader, new File("/b"), classloader);
79   }
80   @AndroidIncompatible   public void testClassPathEntries_URLClassLoader_withParent() throws Exception {
81     URL url1 = new URL("file:/a");
82     URL url2 = new URL("file:/b");
83     URLClassLoader parent = new URLClassLoader(new URL[] {url1}, null);
84     URLClassLoader child = new URLClassLoader(new URL[] {url2}, parent) {};
85     assertThat(ClassPath.getClassPathEntries(child))
86         .containsExactly(new File("/a"), parent, new File("/b"), child)
87         .inOrder();
88   }
89   @AndroidIncompatible   public void testClassPathEntries_duplicateUri_parentWins() throws Exception {
90     URL url = new URL("file:/a");
91     URLClassLoader parent = new URLClassLoader(new URL[] {url}, null);
92     URLClassLoader child = new URLClassLoader(new URL[] {url}, parent) {};
93     assertThat(ClassPath.getClassPathEntries(child)).containsExactly(new File("/a"), parent);
94   }
95   @AndroidIncompatible   public void testClassPathEntries_notURLClassLoader_noParent() {
96     assertThat(ClassPath.getClassPathEntries(new ClassLoader(null) {})).isEmpty();
97   }
98   @AndroidIncompatible   public void testClassPathEntries_notURLClassLoader_withParent() throws Exception {
99     URL url = new URL("file:/a");
100     URLClassLoader parent = new URLClassLoader(new URL[] {url}, null);
101     assertThat(ClassPath.getClassPathEntries(new ClassLoader(parent) {}))
102         .containsExactly(new File("/a"), parent);
103   }
104   @AndroidIncompatible   public void testClassPathEntries_notURLClassLoader_withParentAndGrandParent() throws Exception {
105     URL url1 = new URL("file:/a");
106     URL url2 = new URL("file:/b");
107     URLClassLoader grandParent = new URLClassLoader(new URL[] {url1}, null);
108     URLClassLoader parent = new URLClassLoader(new URL[] {url2}, grandParent);
109     assertThat(ClassPath.getClassPathEntries(new ClassLoader(parent) {}))
110         .containsExactly(new File("/a"), grandParent, new File("/b"), parent);
111   }
112   @AndroidIncompatible   public void testClassPathEntries_notURLClassLoader_withGrandParent() throws Exception {
113     URL url = new URL("file:/a");
114     URLClassLoader grandParent = new URLClassLoader(new URL[] {url}, null);
115     ClassLoader parent = new ClassLoader(grandParent) {};
116     assertThat(ClassPath.getClassPathEntries(new ClassLoader(parent) {}))
117         .containsExactly(new File("/a"), grandParent);
118   }
119   @AndroidIncompatible   public void testClassPathEntries_URLClassLoader_pathWithSpace() throws Exception {
120     URL url = new URL("file:///c:/Documents and Settings/");
121     URLClassLoader classloader = new URLClassLoader(new URL[] {url}, null);
122     assertThat(ClassPath.getClassPathEntries(classloader))
123         .containsExactly(new File("/c:/Documents and Settings/"), classloader);
124   }
125   @AndroidIncompatible   public void testClassPathEntries_URLClassLoader_pathWithEscapedSpace() throws Exception {
126     URL url = new URL("file:///c:/Documents%20and%20Settings/");
127     URLClassLoader classloader = new URLClassLoader(new URL[] {url}, null);
128     assertThat(ClassPath.getClassPathEntries(classloader))
129         .containsExactly(new File("/c:/Documents and Settings/"), classloader);
130   }
131   public void testToFile() throws Exception {
132     assertThat(ClassPath.toFile(new URL("file:///c:/Documents%20and%20Settings/")))
133         .isEqualTo(new File("/c:/Documents and Settings/"));
134     assertThat(ClassPath.toFile(new URL("file:///c:/Documents ~ Settings, or not/11-12 12:05")))
135         .isEqualTo(new File("/c:/Documents ~ Settings, or not/11-12 12:05"));
136   }
137   @AndroidIncompatible   public void testToFile_AndroidIncompatible() throws Exception {
138     assertThat(ClassPath.toFile(new URL("file:///c:\\Documents ~ Settings, or not\\11-12 12:05")))
139         .isEqualTo(new File("/c:\\Documents ~ Settings, or not\\11-12 12:05"));
140     assertThat(ClassPath.toFile(new URL("file:///C:\\Program Files\\Apache Software Foundation")))
141         .isEqualTo(new File("/C:\\Program Files\\Apache Software Foundation/"));
142     assertThat(ClassPath.toFile(new URL("file:///C:\\\u20320 \u22909")))         .isEqualTo(new File("/C:\\\u20320 \u22909"));
143   }
144   @AndroidIncompatible   public void testJarFileWithSpaces() throws Exception {
145     URL url = makeJarUrlWithName("To test unescaped spaces in jar file name.jar");
146     URLClassLoader classloader = new URLClassLoader(new URL[] {url}, null);
147     assertThat(ClassPath.from(classloader).getTopLevelClasses()).isNotEmpty();
148   }
149   public void testScan_classPathCycle() throws IOException {
150     File jarFile = File.createTempFile("with_circular_class_path", ".jar");
151     try {
152       writeSelfReferencingJarFile(jarFile, "test.txt");
153       assertThat(
154               new ClassPath.LocationInfo(jarFile, ClassPathTest.class.getClassLoader())
155                   .scanResources())
156           .hasSize(1);
157     } finally {
158       jarFile.delete();
159     }
160   }
161   @AndroidIncompatible 
162   public void testScanDirectory_symlinkCycle() throws IOException {
163     ClassLoader loader = ClassPathTest.class.getClassLoader();
164 <a name="1"></a>        java.nio.file.Path root = createTempDirectory("ClassPathTest");
165     try {
166       java.nio.file.Path left = createDirectory(<font color="#f63526"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>root.resolve("left"));
167       createFile(left.resolve("some.txt"));
168       java.nio.file.Path right = createDirectory(root.resolve("right"));
169       createFile(right.resolve("another.txt"));
170       createSymbolicLink(left.resolve("sibling"), right);
171       createSymbolicLink(right.resolve</b></font>("sibling"), left);
172       assertEquals(
173           ImmutableSet.of(
174               new ResourceInfo(FILE, "left/some.txt", loader),
175               new ResourceInfo(FILE, "left/sibling/another.txt", loader),
176               new ResourceInfo(FILE, "right/another.txt", loader),
177               new ResourceInfo(FILE, "right/sibling/some.txt", loader)),
178           new ClassPath.LocationInfo(root.toFile(), loader).scanResources());
179     } finally {
180       deleteRecursivelyOrLog(root);
181     }
182   }
183   @AndroidIncompatible 
184   public void testScanDirectory_symlinkToRootCycle() throws IOException {
185     ClassLoader loader = ClassPathTest.class.getClassLoader();
186     java.nio.file.Path root = createTempDirectory("ClassPathTest");
187     try {
188       createFile(root.resolve("some.txt"));
189       java.nio.file.Path child = createDirectory(root.resolve("child"));
190       createSymbolicLink(child.resolve("grandchild"), root);
191       assertEquals(
192           ImmutableSet.of(new ResourceInfo(FILE, "some.txt", loader)),
193           new ClassPath.LocationInfo(root.toFile(), loader).scanResources());
194     } finally {
195       deleteRecursivelyOrLog(root);
196     }
197   }
198   public void testScanFromFile_fileNotExists() throws IOException {
199     ClassLoader classLoader = ClassPathTest.class.getClassLoader();
200     assertThat(
201             new ClassPath.LocationInfo(new File("no/such/file/anywhere"), classLoader)
202                 .scanResources())
203         .isEmpty();
204   }
205   public void testScanFromFile_notJarFile() throws IOException {
206     ClassLoader classLoader = ClassPathTest.class.getClassLoader();
207     File notJar = File.createTempFile("not_a_jar", "txt");
208     try {
209       assertThat(new ClassPath.LocationInfo(notJar, classLoader).scanResources()).isEmpty();
210     } finally {
211       notJar.delete();
212     }
213   }
214   public void testGetClassPathEntry() throws MalformedURLException, URISyntaxException {
215     assertEquals(
216         new File("/usr/test/dep.jar").toURI(),
217         ClassPath.getClassPathEntry(new File("/home/build/outer.jar"), "file:/usr/test/dep.jar")
218             .toURI());
219     assertEquals(
220         new File("/home/build/a.jar").toURI(),
221         ClassPath.getClassPathEntry(new File("/home/build/outer.jar"), "a.jar").toURI());
222     assertEquals(
223         new File("/home/build/x/y/z").toURI(),
224         ClassPath.getClassPathEntry(new File("/home/build/outer.jar"), "x/y/z").toURI());
225     assertEquals(
226         new File("/home/build/x/y/z.jar").toURI(),
227         ClassPath.getClassPathEntry(new File("/home/build/outer.jar"), "x/y/z.jar").toURI());
228     assertEquals(
229         "/home/build/x y.jar",
230         ClassPath.getClassPathEntry(new File("/home/build/outer.jar"), "x y.jar").getFile());
231   }
232   public void testGetClassPathFromManifest_nullManifest() {
233     assertThat(ClassPath.getClassPathFromManifest(new File("some.jar"), null)).isEmpty();
234   }
235 <a name="6"></a>
236   public void testGetClassPathFromManifest_noClassPath() throws IOException {
237     File jarFile = new File("base.jar");
238     assertThat(<font color="#8c8774"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>ClassPath.getClassPathFromManifest(jarFile, manifest(""))).isEmpty();
239   }
240   public void testGetClassPathFromManifest_emptyClassPath() throws IOException {
241     File jarFile = new File("base.jar");
242 <a name="7"></a>    assertThat</b></font>(ClassPath.getClassPathFromManifest(jarFile, manifestClasspath(""))).isEmpty();
243   }
244   public void testGetClassPathFromManifest_badClassPath() throws IOException <font color="#38a4a5"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>{
245     File jarFile = new File("base.jar");
246     Manifest manifest = manifestClasspath("nosuchscheme:an_invalid^path");
247     assertThat(ClassPath.getClassPathFromManifest(jarFile, manifest)).isEmpty();
248   }</b></font>
249 <a name="4"></a>
250   public void testGetClassPathFromManifest_pathWithStrangeCharacter() throws IOException {
251     File jarFile = new File("base/some.jar");
252     Manifest manifest = <font color="#6cc417"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>manifestClasspath("file:the^file.jar");
253     assertThat(ClassPath.getClassPathFromManifest(jarFile, manifest))
254         .containsExactly(fullpath("base/the^file.jar"));
255   }
256   public void testGetClassPathFromManifest_relativeDirectory() throws IOException {
257     File jarFile = new File("base/some.jar")</b></font>;
258     Manifest manifest = manifestClasspath("with/relative/dir");
259     assertThat(ClassPath.getClassPathFromManifest(jarFile, manifest))
260         .containsExactly(fullpath("base/with/relative/dir"));
261   }
262   public void testGetClassPathFromManifest_relativeJar() throws IOException {
263     File jarFile = new File("base/some.jar");
264     Manifest manifest = manifestClasspath("with/relative.jar");
265     assertThat(ClassPath.getClassPathFromManifest(jarFile, manifest))
266         .containsExactly(fullpath("base/with/relative.jar"));
267   }
268   public void testGetClassPathFromManifest_jarInCurrentDirectory() throws IOException {
269     File jarFile = new File("base/some.jar");
270     Manifest manifest = manifestClasspath("current.jar");
271     assertThat(ClassPath.getClassPathFromManifest(jarFile, manifest))
272         .containsExactly(fullpath("base/current.jar"));
273   }
274   public void testGetClassPathFromManifest_absoluteDirectory() throws IOException {
275     File jarFile = new File("base/some.jar");
276     Manifest manifest = manifestClasspath("file:/with/absolute/dir");
277     assertThat(ClassPath.getClassPathFromManifest(jarFile, manifest))
278         .containsExactly(fullpath("/with/absolute/dir"));
279   }
280   public void testGetClassPathFromManifest_absoluteJar() throws IOException {
281     File jarFile = new File("base/some.jar");
282     Manifest manifest = manifestClasspath("file:/with/absolute.jar");
283     assertThat(ClassPath.getClassPathFromManifest(jarFile, manifest))
284         .containsExactly(fullpath("/with/absolute.jar"));
285   }
286   public void testGetClassPathFromManifest_multiplePaths() throws IOException {
287     File jarFile = new File("base/some.jar");
288     Manifest manifest = manifestClasspath("file:/with/absolute.jar relative.jar  relative/dir");
289     assertThat(ClassPath.getClassPathFromManifest(jarFile, manifest))
290         .containsExactly(
291             fullpath("/with/absolute.jar"),
292             fullpath("base/relative.jar"),
293             fullpath("base/relative/dir"))
294         .inOrder();
295   }
296   public void testGetClassPathFromManifest_leadingBlanks() throws IOException {
297     File jarFile = new File("base/some.jar");
298     Manifest manifest = manifestClasspath(" relative.jar");
299     assertThat(ClassPath.getClassPathFromManifest(jarFile, manifest))
300         .containsExactly(fullpath("base/relative.jar"));
301   }
302   public void testGetClassPathFromManifest_trailingBlanks() throws IOException {
303     File jarFile = new File("base/some.jar");
304     Manifest manifest = manifestClasspath("relative.jar ");
305     assertThat(ClassPath.getClassPathFromManifest(jarFile, manifest))
306         .containsExactly(fullpath("base/relative.jar"));
307   }
308   public void testGetClassName() {
309 <a name="5"></a>    assertEquals("abc.d.Abc", ClassPath.getClassName("abc/d/Abc.class"));
310   }
311   public void testResourceInfo_of() <font color="#151b8d"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>{
312     assertEquals(ClassInfo.class, resourceInfo(ClassPathTest.class).getClass());
313     assertEquals(ClassInfo.class, resourceInfo(ClassPath.class).getClass());
314     assertEquals(ClassInfo.class, resourceInfo</b></font>(Nested.class).getClass());
315   }
316   public void testGetSimpleName() {
317     ClassLoader classLoader = getClass().getClassLoader();
318     assertEquals("Foo", new ClassInfo(FILE, "Foo.class", classLoader).getSimpleName());
319     assertEquals("Foo", new ClassInfo(FILE, "a/b/Foo.class", classLoader).getSimpleName());
320     assertEquals("Foo", new ClassInfo(FILE, "a/b/Bar$Foo.class", classLoader).getSimpleName());
321     assertEquals("", new ClassInfo(FILE, "a/b/Bar$1.class", classLoader).getSimpleName());
322     assertEquals("Foo", new ClassInfo(FILE, "a/b/Bar$Foo.class", classLoader).getSimpleName());
323     assertEquals("", new ClassInfo(FILE, "a/b/Bar$1.class", classLoader).getSimpleName());
324     assertEquals("Local", new ClassInfo(FILE, "a/b/Bar$1Local.class", classLoader).getSimpleName());
325   }
326   public void testGetPackageName() {
327     assertEquals(
328         "", new ClassInfo(FILE, "Foo.class", getClass().getClassLoader()).getPackageName());
329     assertEquals(
330         "a.b", new ClassInfo(FILE, "a/b/Foo.class", getClass().getClassLoader()).getPackageName());
331   }
332   public void testGetClassPathUrls() throws Exception {
333     String oldPathSeparator = PATH_SEPARATOR.value();
334     String oldClassPath = JAVA_CLASS_PATH.value();
335     System.setProperty(PATH_SEPARATOR.key(), ":");
336     System.setProperty(
337         JAVA_CLASS_PATH.key(),
338         Joiner.on(":")
339             .join(
340                 "relative/path/to/some.jar",
341                 "/absolute/path/to/some.jar",
342                 "relative/path/to/class/root",
343                 "/absolute/path/to/class/root"));
344     try {
345       ImmutableList&lt;URL&gt; urls = ClassPath.parseJavaClassPath();
346       assertThat(urls.get(0).getProtocol()).isEqualTo("file");
347 <a name="0"></a>      assertThat(urls.get(0).getAuthority()).isNull();
348       assertThat(urls.get(0).getPath()).endsWith("/relative/path/to/some.jar");
349       assertThat(urls.get(1)).isEqualTo(<font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>new URL("file:///absolute/path/to/some.jar"));
350       assertThat(urls.get(2).getProtocol()).isEqualTo("file");
351       assertThat(urls.get(2).getAuthority()).isNull();
352       assertThat(urls.get(2).getPath()).endsWith("/relative/path/to/class/root");
353       assertThat(urls.get</b></font>(3)).isEqualTo(new URL("file:///absolute/path/to/class/root"));
354       assertThat(urls).hasSize(4);
355     } finally {
356       System.setProperty(PATH_SEPARATOR.key(), oldPathSeparator);
357       System.setProperty(JAVA_CLASS_PATH.key(), oldClassPath);
358     }
359   }
360   private static boolean contentEquals(URL left, URL right) throws IOException {
361     return Resources.asByteSource(left).contentEquals(Resources.asByteSource(right));
362   }
363   private static class Nested {}
364   public void testNulls() throws IOException {
365     new NullPointerTester().testAllPublicStaticMethods(ClassPath.class);
366     new NullPointerTester()
367         .testAllPublicInstanceMethods(ClassPath.from(getClass().getClassLoader()));
368   }
369   public void testLocationsFrom_idempotentScan() throws IOException {
370     ImmutableSet&lt;ClassPath.LocationInfo&gt; locations =
371 <a name="2"></a>        ClassPath.locationsFrom(getClass().getClassLoader());
372     assertThat(locations).isNotEmpty();
373     for (ClassPath.LocationInfo location : locations) {
374       ImmutableSet&lt;ResourceInfo&gt; resources = <font color="#980517"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>location.scanResources();
375       assertThat(location.scanResources()).containsExactlyElementsIn(resources);
376     }
377   }
378   public void testLocationsFrom_idempotentLocations() {
379     ImmutableSet&lt;ClassPath.LocationInfo&gt; locations =</b></font>
380         ClassPath.locationsFrom(getClass().getClassLoader());
381     assertThat(ClassPath.locationsFrom(getClass().getClassLoader()))
382         .containsExactlyElementsIn(locations);
383   }
384   public void testLocationEquals() {
385     ClassLoader child = getClass().getClassLoader();
386     ClassLoader parent = child.getParent();
387     new EqualsTester()
388         .addEqualityGroup(
389             new ClassPath.LocationInfo(new File("foo.jar"), child),
390             new ClassPath.LocationInfo(new File("foo.jar"), child))
391         .addEqualityGroup(new ClassPath.LocationInfo(new File("foo.jar"), parent))
392         .addEqualityGroup(new ClassPath.LocationInfo(new File("foo"), child))
393         .testEquals();
394   }
395   public void testScanAllResources() throws IOException {
396     assertThat(scanResourceNames(ClassLoader.getSystemClassLoader()))
397         .contains("com/google/common/reflect/ClassPathTest.class");
398   }
399   public void testExistsThrowsSecurityException() throws IOException, URISyntaxException {
400     SecurityManager oldSecurityManager = System.getSecurityManager();
401     try {
402       doTestExistsThrowsSecurityException();
403     } finally {
404       System.setSecurityManager(oldSecurityManager);
405     }
406   }
407   private void doTestExistsThrowsSecurityException() throws IOException, URISyntaxException {
408     File file = null;
409     final PermissionCollection readClassPathFiles =
410         new FilePermission("", "read").newPermissionCollection();
411     for (URL url : ClassPath.parseJavaClassPath()) {
412       if (url.getProtocol().equalsIgnoreCase("file")) {
413         file = new File(url.toURI());
414         readClassPathFiles.add(new FilePermission(file.getAbsolutePath(), "read"));
415       }
416     }
417     assertThat(file).isNotNull();
418     SecurityManager disallowFilesSecurityManager =
419         new SecurityManager() {
420           @Override
421           public void checkPermission(Permission p) {
422             if (readClassPathFiles.implies(p)) {
423               throw new SecurityException("Disallowed: " + p);
424             }
425           }
426         };
427     System.setSecurityManager(disallowFilesSecurityManager);
428     try {
429       file.exists();
430       fail("Did not get expected SecurityException");
431     } catch (SecurityException expected) {
432 <a name="8"></a>    }
433     ClassPath classPath = ClassPath.from(getClass().getClassLoader());
434     for (ResourceInfo resource : classPath.getResources()) <font color="#c58917"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>{
435       assertThat(resource.getResourceName()).doesNotContain("com/google/common/reflect/");
436     }
437   }
438   private s</b></font>tatic ClassPath.ClassInfo findClass(
439       Iterable&lt;ClassPath.ClassInfo&gt; classes, Class&lt;?&gt; cls) {
440     for (ClassPath.ClassInfo classInfo : classes) {
441       if (classInfo.getName().equals(cls.getName())) {
442         return classInfo;
443       }
444     }
445     throw new AssertionError("failed to find " + cls);
446   }
447   private static ResourceInfo resourceInfo(Class&lt;?&gt; cls) {
448     String resource = cls.getName().replace('.', '/') + ".class";
449     ClassLoader loader = cls.getClassLoader();
450 <a name="3"></a>    return ResourceInfo.of(FILE, resource, loader);
451   }
452   private static ClassInfo classInfo(<font color="#53858b"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>Class&lt;?&gt; cls) {
453     return classInfo(cls, cls.getClassLoader());
454   }
455   private static ClassInfo classInfo(Class&lt;?&gt; cls, ClassLoader classLoader) {</b></font>
456     String resource = cls.getName().replace('.', '/') + ".class";
457     return new ClassInfo(FILE, resource, classLoader);
458   }
459   private static Manifest manifestClasspath(String classpath) throws IOException {
460     return manifest("Class-Path: " + classpath + "\n");
461   }
462   private static void writeSelfReferencingJarFile(File jarFile, String... entries)
463       throws IOException {
464     Manifest manifest = new Manifest();
465     manifest.getMainAttributes().put(Attributes.Name.MANIFEST_VERSION, "1.0");
466     manifest.getMainAttributes().put(Attributes.Name.CLASS_PATH, jarFile.getName());
467     Closer closer = Closer.create();
468     try {
469       FileOutputStream fileOut = closer.register(new FileOutputStream(jarFile));
470       JarOutputStream jarOut = closer.register(new JarOutputStream(fileOut));
471       for (String entry : entries) {
472         jarOut.putNextEntry(new ZipEntry(entry));
473         Resources.copy(ClassPathTest.class.getResource(entry), jarOut);
474         jarOut.closeEntry();
475       }
476     } catch (Throwable e) {
477       throw closer.rethrow(e);
478     } finally {
479       closer.close();
480     }
481   }
482   private static Manifest manifest(String content) throws IOException {
483     InputStream in = new ByteArrayInputStream(content.getBytes(US_ASCII));
484     Manifest manifest = new Manifest();
485     manifest.read(in);
486     return manifest;
487   }
488   private static File fullpath(String path) {
489     return new File(new File(path).toURI());
490   }
491   private static URL makeJarUrlWithName(String name) throws IOException {
492     File fullPath = new File(Files.createTempDir(), name);
493     File jarFile = pickAnyJarFile();
494     Files.copy(jarFile, fullPath);
495     return fullPath.toURI().toURL();
496   }
497   private static File pickAnyJarFile() throws IOException {
498     for (ClassPath.LocationInfo location :
499         ClassPath.locationsFrom(ClassPathTest.class.getClassLoader())) {
500       if (!location.file().isDirectory() &amp;&amp; location.file().exists()) {
501         return location.file();
502       }
503     }
504     throw new AssertionError("Failed to find a jar file");
505   }
506   @AndroidIncompatible   private static void deleteRecursivelyOrLog(java.nio.file.Path path) {
507     try {
508       deleteRecursively(path);
509     } catch (IOException e) {
510       log.log(WARNING, "Failure cleaning up test directory", e);
511     }
512   }
513   private static ImmutableSet&lt;String&gt; scanResourceNames(ClassLoader loader) throws IOException {
514     ImmutableSet.Builder&lt;String&gt; builder = ImmutableSet.builder();
515     for (ClassPath.LocationInfo location : ClassPath.locationsFrom(loader)) {
516       for (ResourceInfo resource : location.scanResources()) {
517         builder.add(resource.getResourceName());
518       }
519     }
520     return builder.build();
521   }
522 }
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
