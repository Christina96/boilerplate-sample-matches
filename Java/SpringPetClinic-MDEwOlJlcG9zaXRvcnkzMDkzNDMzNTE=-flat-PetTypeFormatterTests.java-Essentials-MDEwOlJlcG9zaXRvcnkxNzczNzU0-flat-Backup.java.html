
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 8.620689655172415%, Tokens: 10, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>SpringPetClinic-MDEwOlJlcG9zaXRvcnkzMDkzNDMzNTE=-flat-PetTypeFormatterTests.java</h3>
            <pre><code><span onclick='openModal()' class='match'>1  package org.springframework.samples.petclinic.owner;
2  import java.text.ParseException;
3  import java.util.ArrayList;
4  import java.util.Collection;
5  import java.util.List;
6  import java.util.Locale;
7  import org.junit.Before;
8  import org.junit.Test;
9  import org.junit.runner.RunWith;
10  import org.mockito.Mock;
</span>11  import org.mockito.Mockito;
12  import org.mockito.junit.MockitoJUnitRunner;
13  import static org.junit.Assert.assertEquals;
14  @RunWith(MockitoJUnitRunner.class)
15  public class PetTypeFormatterTests {
16      @Mock
17      private PetRepository pets;
18      private PetTypeFormatter petTypeFormatter;
19      @Before
20      public void setup() {
21          this.petTypeFormatter = new PetTypeFormatter(pets);
22      }
23      @Test
24      public void testPrint() {
25          PetType petType = new PetType();
26          petType.setName("Hamster");
27          String petTypeName = this.petTypeFormatter.print(petType, Locale.ENGLISH);
28          assertEquals("Hamster", petTypeName);
29      }
30      @Test
31      public void shouldParse() throws ParseException {
32          Mockito.when(this.pets.findPetTypes()).thenReturn(makePetTypes());
33          PetType petType = petTypeFormatter.parse("Bird", Locale.ENGLISH);
34          assertEquals("Bird", petType.getName());
35      }
36      @Test(expected = ParseException.class)
37      public void shouldThrowParseException() throws ParseException {
38          Mockito.when(this.pets.findPetTypes()).thenReturn(makePetTypes());
39          petTypeFormatter.parse("Fish", Locale.ENGLISH);
40      }
41      private List<PetType> makePetTypes() {
42          List<PetType> petTypes = new ArrayList<>();
43          petTypes.add(new PetType() {
44              {
45                  setName("Dog");
46              }
47          });
48          petTypes.add(new PetType() {
49              {
50                  setName("Bird");
51              }
52          });
53          return petTypes;
54      }
55  }
</code></pre>
        </div>
        <div class="column">
            <h3>Essentials-MDEwOlJlcG9zaXRvcnkxNzczNzU0-flat-Backup.java</h3>
            <pre><code><span onclick='openModal()' class='match'>1  package com.earth2me.essentials;
2  import static com.earth2me.essentials.I18n.tl;
3  import java.io.BufferedReader;
4  import java.io.IOException;
5  import java.io.InputStreamReader;
6  import java.util.logging.Level;
7  import java.util.logging.Logger;
8  import net.ess3.api.IEssentials;
9  import org.bukkit.Server;
10  import org.bukkit.command.CommandSender;
</span>11  public class Backup implements Runnable
12  {
13  	private static final Logger LOGGER = Logger.getLogger("Essentials");
14  	private transient final Server server;
15  	private transient final IEssentials ess;
16  	private transient boolean running = false;
17  	private transient int taskId = -1;
18  	private transient boolean active = false;
19  	public Backup(final IEssentials ess)
20  	{
21  		this.ess = ess;
22  		server = ess.getServer();
23  		if (!ess.getOnlinePlayers().isEmpty())
24  		{
25  			ess.runTaskAsynchronously(new Runnable()
26  			{
27  				@Override
28  				public void run()
29  				{
30  					startTask();
31  				}
32  			});
33  		}
34  	}
35  	public void onPlayerJoin()
36  	{
37  		startTask();
38  	}
39  	public synchronized void stopTask()
40  	{
41  		running = false;
42  		if (taskId != -1)
43  		{
44  			server.getScheduler().cancelTask(taskId);
45  		}
46  		taskId = -1;
47  	}
48  	private synchronized void startTask()
49  	{
50  		if (!running)
51  		{
52  			final long interval = ess.getSettings().getBackupInterval() * 1200; 
53  			if (interval < 1200)
54  			{
55  				return;
56  			}
57  			taskId = ess.scheduleSyncRepeatingTask(this, interval, interval);
58  			running = true;
59  		}
60  	}
61  	@Override
62  	public void run()
63  	{
64  		if (active)
65  		{
66  			return;
67  		}
68  		active = true;
69  		final String command = ess.getSettings().getBackupCommand();
70  		if (command == null || "".equals(command))
71  		{
72  			return;
73  		}
74  		if ("save-all".equalsIgnoreCase(command))
75  		{
76  			final CommandSender cs = server.getConsoleSender();
77  			server.dispatchCommand(cs, "save-all");
78  			active = false;
79  			return;
80  		}
81  		LOGGER.log(Level.INFO, tl("backupStarted"));
82  		final CommandSender cs = server.getConsoleSender();
83  		server.dispatchCommand(cs, "save-all");
84  		server.dispatchCommand(cs, "save-off");
85  		ess.runTaskAsynchronously(new Runnable()
86  		{
87  			@Override
88  			public void run()
89  			{
90  				try
91  				{
92  					final ProcessBuilder childBuilder = new ProcessBuilder(command);
93  					childBuilder.redirectErrorStream(true);
94  					childBuilder.directory(ess.getDataFolder().getParentFile().getParentFile());
95  					final Process child = childBuilder.start();
96  					ess.runTaskAsynchronously(new Runnable()
97  					{
98  						@Override
99  						public void run()
100  						{
101  							try
102  							{
103  								final BufferedReader reader = new BufferedReader(new InputStreamReader(child.getInputStream()));
104  								try
105  								{
106  									String line;
107  									do
108  									{
109  										line = reader.readLine();
110  										if (line != null)
111  										{
112  											LOGGER.log(Level.INFO, line);
113  										}
114  									}
115  									while (line != null);
116  								}
117  								finally
118  								{
119  									reader.close();
120  								}
121  							}
122  							catch (IOException ex)
123  							{
124  								LOGGER.log(Level.SEVERE, null, ex);
125  							}
126  						}
127  					});
128  					child.waitFor();
129  				}
130  				catch (InterruptedException ex)
131  				{
132  					LOGGER.log(Level.SEVERE, null, ex);
133  				}
134  				catch (IOException ex)
135  				{
136  					LOGGER.log(Level.SEVERE, null, ex);
137  				}
138  				finally
139  				{
140  					class BackupEnableSaveTask implements Runnable
141  					{
142  						@Override
143  						public void run()
144  						{
145  							server.dispatchCommand(cs, "save-on");
146  							if (ess.getOnlinePlayers().isEmpty())
147  							{
148  								stopTask();
149  							}
150  							active = false;
151  							LOGGER.log(Level.INFO, tl("backupFinished"));
152  						}
153  					}
154  					ess.scheduleSyncDelayedTask(new BackupEnableSaveTask());
155  				}
156  			}
157  		});
158  	}
159  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from SpringPetClinic-MDEwOlJlcG9zaXRvcnkzMDkzNDMzNTE=-flat-PetTypeFormatterTests.java</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from Essentials-MDEwOlJlcG9zaXRvcnkxNzczNzU0-flat-Backup.java</div>
                </div>
                <div class="column column_space"><pre><code>1  package org.springframework.samples.petclinic.owner;
2  import java.text.ParseException;
3  import java.util.ArrayList;
4  import java.util.Collection;
5  import java.util.List;
6  import java.util.Locale;
7  import org.junit.Before;
8  import org.junit.Test;
9  import org.junit.runner.RunWith;
10  import org.mockito.Mock;
</pre></code></div>
                <div class="column column_space"><pre><code>1  package com.earth2me.essentials;
2  import static com.earth2me.essentials.I18n.tl;
3  import java.io.BufferedReader;
4  import java.io.IOException;
5  import java.io.InputStreamReader;
6  import java.util.logging.Level;
7  import java.util.logging.Logger;
8  import net.ess3.api.IEssentials;
9  import org.bukkit.Server;
10  import org.bukkit.command.CommandSender;
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    