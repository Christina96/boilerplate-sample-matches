
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 7.667731629392971%, Tokens: 12</h2>
        <div class="column">
            <h3>BungeeCord-MDEwOlJlcG9zaXRvcnk2MDg0MjEw-flat-NativeZlib.java</h3>
            <pre><code>1  package net.md_5.bungee.jni.zlib;
2  import com.google.common.base.Preconditions;
3  import io.netty.buffer.ByteBuf;
4  import java.util.zip.DataFormatException;
5  import lombok.Getter;
6  public class NativeZlib implements BungeeZlib
7  {
8      @Getter
9      private final NativeCompressImpl nativeCompress = new NativeCompressImpl();
10      private boolean compress;
11      private long ctx;
12      @Override
13      public void init(boolean compress, int level)
14      {
15          free();
16          this.compress = compress;
17          this.ctx = nativeCompress.init( compress, level );
18      }
19      @Override
20      public void free()
21      {
22          if ( ctx != 0 )
23          {
24              nativeCompress.end( ctx, compress );
25              ctx = 0;
26          }
27          nativeCompress.consumed = 0;
28          nativeCompress.finished = false;
29      }
30      @Override
31      public void process(ByteBuf in, ByteBuf out) throws DataFormatException
32      {
33          in.memoryAddress();
34          out.memoryAddress();
35          Preconditions.checkState( ctx != 0, "Invalid pointer to compress!" );
36          while ( !nativeCompress.finished && ( compress || in.isReadable() ) )
37          {
38              out.ensureWritable( 8192 );
<span onclick='openModal()' class='match'>39              int processed = nativeCompress.process( ctx, in.memoryAddress() + in.readerIndex(), in.readableBytes(), out.memoryAddress() + out.writerIndex(), out.writableBytes(), compress );
40              in.readerIndex( in.readerIndex() + nativeCompress.consumed );
41              out.writerIndex( out.writerIndex() + processed );
</span>42          }
43          nativeCompress.reset( ctx, compress );
44          nativeCompress.consumed = 0;
45          nativeCompress.finished = false;
46      }
47  }
</code></pre>
        </div>
        <div class="column">
            <h3>motan-MDEwOlJlcG9zaXRvcnk1NjY3OTUyMQ==-flat-AbstractConfig.java</h3>
            <pre><code>1  package com.weibo.api.motan.config;
2  import com.weibo.api.motan.common.MotanConstants;
3  import com.weibo.api.motan.config.annotation.ConfigDesc;
4  import com.weibo.api.motan.exception.MotanErrorMsgConstant;
5  import com.weibo.api.motan.exception.MotanFrameworkException;
6  import com.weibo.api.motan.util.LoggerUtil;
7  import org.apache.commons.lang3.StringUtils;
8  import java.io.Serializable;
9  import java.lang.reflect.Method;
10  import java.lang.reflect.Modifier;
11  import java.util.List;
12  import java.util.Map;
13  public abstract class AbstractConfig implements Serializable {
14      private static final long serialVersionUID = 5736580957909744603L;
15      protected String id;
16      public String getId() {
17          return id;
18      }
19      public void setId(String id) {
20          this.id = id;
21      }
22      protected static void collectConfigParams(Map<String, String> parameters, AbstractConfig... configs) {
23          for (AbstractConfig config : configs) {
24              if (config != null) {
25                  config.appendConfigParams(parameters);
26              }
27          }
28      }
29      protected static void collectMethodConfigParams(Map<String, String> parameters, List<MethodConfig> methods) {
30          if (methods == null || methods.isEmpty()) {
31              return;
32          }
33          for (MethodConfig mc : methods) {
34              if (mc != null) {
35                  mc.appendConfigParams(parameters, MotanConstants.METHOD_CONFIG_PREFIX + mc.getName() + "(" + mc.getArgumentTypes() + ")");
36              }
37          }
38      }
39      protected void appendConfigParams(Map<String, String> parameters) {
40          appendConfigParams(parameters, null);
41      }
42      @SuppressWarnings("unchecked")
43      protected void appendConfigParams(Map<String, String> parameters, String prefix) {
44          Method[] methods = this.getClass().getMethods();
45          for (Method method : methods) {
46              try {
47                  String name = method.getName();
48                  if (isConfigMethod(method)) {
49                      int idx = name.startsWith("get") ? 3 : 2;
50                      String key = name.substring(idx, idx + 1).toLowerCase() + name.substring(idx + 1);
51                      ConfigDesc configDesc = method.getAnnotation(ConfigDesc.class);
52                      if (configDesc != null && !StringUtils.isBlank(configDesc.key())) {
53                          key = configDesc.key();
54                      }
55                      Object value = method.invoke(this);
56                      if (value == null || StringUtils.isBlank(String.valueOf(value))) {
57                          if (configDesc != null && configDesc.required()) {
58                              throw new MotanFrameworkException(String.format("%s.%s should not be null or empty", this.getClass()
59                                      .getSimpleName(), key), MotanErrorMsgConstant.FRAMEWORK_INIT_ERROR);
60                          }
61                          continue;
62                      }
63                      if (prefix != null && prefix.length() > 0) {
64                          key = prefix + "." + key;
65                      }
66                      parameters.put(key, String.valueOf(value).trim());
67                  } else if ("getParameters".equals(name) && Modifier.isPublic(method.getModifiers())
68                          && method.getParameterTypes().length == 0 && method.getReturnType() == Map.class) {
69                      Map<String, String> map = (Map<String, String>) method.invoke(this);
70                      if (map != null && map.size() > 0) {
71                          String pre = prefix != null && prefix.length() > 0 ? prefix + "." : "";
72                          for (Map.Entry<String, String> entry : map.entrySet()) {
73                              parameters.put(pre + entry.getKey(), entry.getValue());
74                          }
75                      }
76                  }
77              } catch (Exception e) {
78                  throw new MotanFrameworkException(String.format("Error when append params for config: %s.%s", this.getClass()
79                          .getSimpleName(), method.getName()), e, MotanErrorMsgConstant.FRAMEWORK_INIT_ERROR);
80              }
81          }
82      }
83      private boolean isConfigMethod(Method method) {
<span onclick='openModal()' class='match'>84          boolean checkMethod =
85                  (method.getName().startsWith("get") || method.getName().startsWith("is")) && !"isDefault".equals(method.getName())
86                          && Modifier.isPublic(method.getModifiers()) && method.getParameterTypes().length == 0
87                          && isPrimitive(method.getReturnType());
</span>88          if (checkMethod) {
89              ConfigDesc configDesc = method.getAnnotation(ConfigDesc.class);
90              if (configDesc != null && configDesc.excluded()) {
91                  return false;
92              }
93          }
94          return checkMethod;
95      }
96      private boolean isPrimitive(Class<?> type) {
97          return type.isPrimitive() || type == String.class || type == Character.class || type == Boolean.class || type == Byte.class
98                  || type == Short.class || type == Integer.class || type == Long.class || type == Float.class || type == Double.class;
99      }
100      @Override
101      public String toString() {
102          try {
103              StringBuilder buf = new StringBuilder();
104              buf.append("<motan:");
105              buf.append(getTagName(getClass()));
106              Method[] methods = getClass().getMethods();
107              for (Method method : methods) {
108                  try {
109                      String name = method.getName();
110                      if ((name.startsWith("get") || name.startsWith("is")) && !"getClass".equals(name) && !"get".equals(name)
111                              && !"is".equals(name) && Modifier.isPublic(method.getModifiers()) && method.getParameterTypes().length == 0
112                              && isPrimitive(method.getReturnType())) {
113                          int i = name.startsWith("get") ? 3 : 2;
114                          String key = name.substring(i, i + 1).toLowerCase() + name.substring(i + 1);
115                          Object value = method.invoke(this);
116                          if (value != null) {
117                              buf.append(" ");
118                              buf.append(key);
119                              buf.append("=\"");
120                              buf.append(value);
121                              buf.append("\"");
122                          }
123                      }
124                  } catch (Exception e) {
125                      LoggerUtil.warn(e.getMessage(), e);
126                  }
127              }
128              buf.append(" />");
129              return buf.toString();
130          } catch (Throwable t) { 
131              LoggerUtil.warn(t.getMessage(), t);
132              return super.toString();
133          }
134      }
135      private static final String[] SUFFIXS = new String[] {"Config", "Bean"};
136      private static String getTagName(Class<?> cls) {
137          String tag = cls.getSimpleName();
138          for (String suffix : SUFFIXS) {
139              if (tag.endsWith(suffix)) {
140                  tag = tag.substring(0, tag.length() - suffix.length());
141                  break;
142              }
143          }
144          tag = tag.toLowerCase();
145          return tag;
146      }
147  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from BungeeCord-MDEwOlJlcG9zaXRvcnk2MDg0MjEw-flat-NativeZlib.java</div>
                <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from motan-MDEwOlJlcG9zaXRvcnk1NjY3OTUyMQ==-flat-AbstractConfig.java</div>
                <div class="column column_space"><pre><code>39              int processed = nativeCompress.process( ctx, in.memoryAddress() + in.readerIndex(), in.readableBytes(), out.memoryAddress() + out.writerIndex(), out.writableBytes(), compress );
40              in.readerIndex( in.readerIndex() + nativeCompress.consumed );
41              out.writerIndex( out.writerIndex() + processed );
</pre></code></div>
                <div class="column column_space"><pre><code>84          boolean checkMethod =
85                  (method.getName().startsWith("get") || method.getName().startsWith("is")) && !"isDefault".equals(method.getName())
86                          && Modifier.isPublic(method.getModifiers()) && method.getParameterTypes().length == 0
87                          && isPrimitive(method.getReturnType());
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    