
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 40.0%, Tokens: 11</h2>
        <div class="column">
            <h3>SpringPetClinic-MDEwOlJlcG9zaXRvcnkzMDkzNDMzNTE=-flat-VetControllerTests.java</h3>
            <pre><code>1  package org.springframework.samples.petclinic.vet;
2  import static org.mockito.BDDMockito.given;
3  import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;
4  import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.content;
5  import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.jsonPath;
6  import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.model;
7  import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;
8  import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.view;
9  import org.assertj.core.util.Lists;
10  import org.junit.Before;
11  import org.junit.Test;
12  import org.junit.runner.RunWith;
13  import org.springframework.beans.factory.annotation.Autowired;
14  import org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;
15  import org.springframework.boot.test.mock.mockito.MockBean;
16  import org.springframework.http.MediaType;
17  import org.springframework.test.context.junit4.SpringRunner;
18  import org.springframework.test.web.servlet.MockMvc;
19  import org.springframework.test.web.servlet.ResultActions;
20  @RunWith(SpringRunner.class)
21  @WebMvcTest(VetController.class)
22  public class VetControllerTests {
23      @Autowired
24      private MockMvc mockMvc;
25      @MockBean
26      private VetRepository vets;
27      @Before
28      public void setup() {
29          Vet james = new Vet();
30          james.setFirstName("James");
31          james.setLastName("Carter");
32          james.setId(1);
33          Vet helen = new Vet();
34          helen.setFirstName("Helen");
35          helen.setLastName("Leary");
36          helen.setId(2);
37          Specialty radiology = new Specialty();
38          radiology.setId(1);
39          radiology.setName("radiology");
40          helen.addSpecialty(radiology);
41          given(this.vets.findAll()).willReturn(Lists.newArrayList(james, helen));
42      }
43      @Test
44      public void testShowVetListHtml() throws Exception {
<span onclick='openModal()' class='match'>45          mockMvc.perform(get("/vets.html"))
46              .andExpect(status().isOk())
47              .andExpect(model().attributeExists("vets"))
48              .andExpect(view().name("vets/vetList"));
</span>49      }
50      @Test
51      public void testShowResourcesVetList() throws Exception {
52          ResultActions actions = mockMvc.perform(get("/vets")
53              .accept(MediaType.APPLICATION_JSON)).andExpect(status().isOk());
54          actions.andExpect(content().contentType("application/json;charset=UTF-8"))
55              .andExpect(jsonPath("$.vetList[0].id").value(1));
56      }
57  }
</code></pre>
        </div>
        <div class="column">
            <h3>motan-MDEwOlJlcG9zaXRvcnk1NjY3OTUyMQ==-flat-AccessStatisticFilterTest.java</h3>
            <pre><code>1  package com.weibo.api.motan.filter;
2  import java.util.HashMap;
3  import java.util.Map;
4  import org.jmock.Expectations;
5  import com.weibo.api.motan.BaseTestCase;
6  import com.weibo.api.motan.common.MotanConstants;
7  import com.weibo.api.motan.common.URLParamType;
8  import com.weibo.api.motan.exception.MotanBizException;
9  import com.weibo.api.motan.exception.MotanServiceException;
10  import com.weibo.api.motan.protocol.example.IHello;
11  import com.weibo.api.motan.registry.RegistryService;
12  import com.weibo.api.motan.rpc.Caller;
13  import com.weibo.api.motan.rpc.Request;
14  import com.weibo.api.motan.rpc.Response;
15  import com.weibo.api.motan.rpc.URL;
16  import com.weibo.api.motan.util.NetUtils;
17  public class AccessStatisticFilterTest extends BaseTestCase {
18      private AccessStatisticFilter accessStatisticFilter = new AccessStatisticFilter();
19      @Override
20      public void setUp() throws Exception {
21          super.setUp();
22      }
23      @SuppressWarnings("unchecked")
24      public void testFilter() {
25          final Request request = mockery.mock(Request.class);
26          final Response response = mockery.mock(Response.class);
27          final Caller<IHello> caller = mockery.mock(Caller.class);
28          final URL url =
29                  new URL(MotanConstants.PROTOCOL_MOTAN, NetUtils.getLocalAddress().getHostAddress(), 0, RegistryService.class.getName());
30          final Map<String, String> attachments = new HashMap<String, String>();
31          attachments.put(URLParamType.host.getName(), URLParamType.host.getValue());
32          attachments.put(URLParamType.application.getName(), URLParamType.application.getValue());
33          attachments.put(URLParamType.module.getName(), URLParamType.module.getValue());
34          mockery.checking(new Expectations() {
35              {
36                  oneOf(caller).call(request);
37                  will(returnValue(response));
38                  atLeast(2).of(caller).getUrl();
39                  will(returnValue(url));
40                  oneOf(response).getException();
<span onclick='openModal()' class='match'>41                  will(returnValue(null));
42                  oneOf(response).getProcessTime();
43                  will(returnValue(1000L));
44                  allowing(request).getInterfaceName();
45                  will(returnValue(IHello.class.getName()));
46                  allowing(request).getParamtersDesc();
</span>47                  will(returnValue("mock_param_desc"));
48                  allowing(request).getMethodName();
49                  will(returnValue("mock_method_name"));
50                  atLeast(1).of(request).getAttachments();
51                  will(returnValue(attachments));
52              }
53          });
54          assertEquals(response, accessStatisticFilter.filter(caller, request));
55          mockery.checking(new Expectations() {
56              {
57                  oneOf(caller).call(request);
58                  will(returnValue(null));
59                  oneOf(caller).getUrl();
60                  will(returnValue(url));
61                  allowing(request).getInterfaceName();
62                  will(returnValue(IHello.class.getName()));
63                  allowing(request).getParamtersDesc();
64                  will(returnValue("mock_param_desc"));
65                  allowing(request).getMethodName();
66                  will(returnValue("mock_method_name"));
67              }
68          });
69          assertNull(accessStatisticFilter.filter(caller, request));
70          mockery.checking(new Expectations() {
71              {
72                  oneOf(caller).call(request);
73                  will(returnValue(response));
74                  oneOf(caller).getUrl();
75                  will(returnValue(url));
76                  atMost(2).of(response).getException();
77                  will(returnValue(new MotanBizException()));
78                  oneOf(response).getProcessTime();
79                  will(returnValue(1000L));
80                  allowing(request).getInterfaceName();
81                  will(returnValue(IHello.class.getName()));
82                  allowing(request).getParamtersDesc();
83                  will(returnValue("mock_param_desc"));
84                  allowing(request).getMethodName();
85                  will(returnValue("mock_method_name"));
86              }
87          });
88          assertEquals(response, accessStatisticFilter.filter(caller, request));
89          mockery.checking(new Expectations() {
90              {
91                  oneOf(caller).call(request);
92                  will(returnValue(response));
93                  oneOf(caller).getUrl();
94                  will(returnValue(url));
95                  atMost(2).of(response).getException();
96                  will(returnValue(new MotanServiceException()));
97                  oneOf(response).getProcessTime();
98                  will(returnValue(1000L));
99                  allowing(request).getInterfaceName();
100                  will(returnValue(IHello.class.getName()));
101                  allowing(request).getParamtersDesc();
102                  will(returnValue("mock_param_desc"));
103                  allowing(request).getMethodName();
104                  will(returnValue("mock_method_name"));
105              }
106          });
107          assertEquals(response, accessStatisticFilter.filter(caller, request));
108      }
109  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from SpringPetClinic-MDEwOlJlcG9zaXRvcnkzMDkzNDMzNTE=-flat-VetControllerTests.java</div>
                <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from motan-MDEwOlJlcG9zaXRvcnk1NjY3OTUyMQ==-flat-AccessStatisticFilterTest.java</div>
                <div class="column column_space"><pre><code>45          mockMvc.perform(get("/vets.html"))
46              .andExpect(status().isOk())
47              .andExpect(model().attributeExists("vets"))
48              .andExpect(view().name("vets/vetList"));
</pre></code></div>
                <div class="column column_space"><pre><code>41                  will(returnValue(null));
42                  oneOf(response).getProcessTime();
43                  will(returnValue(1000L));
44                  allowing(request).getInterfaceName();
45                  will(returnValue(IHello.class.getName()));
46                  allowing(request).getParamtersDesc();
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    