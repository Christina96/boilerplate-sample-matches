
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 6.132075471698113%, Tokens: 13, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>Mybatis-PageHelper-MDEwOlJlcG9zaXRvcnkyMDY1MTY3Mg==-flat-ExecutorUtil.java</h3>
            <pre><code>1  package com.github.pagehelper.util;
2  import com.github.pagehelper.BoundSqlInterceptor;
3  import com.github.pagehelper.Dialect;
4  import com.github.pagehelper.PageException;
5  import org.apache.ibatis.builder.annotation.ProviderSqlSource;
<span onclick='openModal()' class='match'>6  import org.apache.ibatis.cache.CacheKey;
7  import org.apache.ibatis.executor.Executor;
8  import org.apache.ibatis.mapping.BoundSql;
9  import org.apache.ibatis.mapping.MappedStatement;
10  import org.apache.ibatis.session.Configuration;
11  import org.apache.ibatis.session.ResultHandler;
12  import org.apache.ibatis.session.RowBounds;
13  import java.lang.reflect.Field;
14  import java.sql.SQLException;
15  import java.util.List;
16  import java.util.Map;
17  public abstract class ExecutorUtil {
18      private static Field additionalParametersField;
</span>19      private static Field providerMethodArgumentNamesField;
20      static {
21          try {
22              additionalParametersField = BoundSql.class.getDeclaredField("additionalParameters");
23              additionalParametersField.setAccessible(true);
24          } catch (NoSuchFieldException e) {
25              throw new PageException("获取 BoundSql 属性 additionalParameters 失败: " + e, e);
26          }
27          try {
28              providerMethodArgumentNamesField = ProviderSqlSource.class.getDeclaredField("providerMethodArgumentNames");
29              providerMethodArgumentNamesField.setAccessible(true);
30          } catch (NoSuchFieldException ignore) {
31          }
32      }
33      public static Map<String, Object> getAdditionalParameter(BoundSql boundSql) {
34          try {
35              return (Map<String, Object>) additionalParametersField.get(boundSql);
36          } catch (IllegalAccessException e) {
37              throw new PageException("获取 BoundSql 属性值 additionalParameters 失败: " + e, e);
38          }
39      }
40      public static String[] getProviderMethodArgumentNames(ProviderSqlSource providerSqlSource) {
41          try {
42              return providerMethodArgumentNamesField != null ? (String[]) providerMethodArgumentNamesField.get(providerSqlSource) : null;
43          } catch (IllegalAccessException e) {
44              throw new PageException("获取 ProviderSqlSource 属性值 providerMethodArgumentNames: " + e, e);
45          }
46      }
47      public static MappedStatement getExistedMappedStatement(Configuration configuration, String msId) {
48          MappedStatement mappedStatement = null;
49          try {
50              mappedStatement = configuration.getMappedStatement(msId, false);
51          } catch (Throwable t) {
52          }
53          return mappedStatement;
54      }
55      public static Long executeManualCount(Executor executor, MappedStatement countMs,
56                                            Object parameter, BoundSql boundSql,
57                                            ResultHandler resultHandler) throws SQLException {
58          CacheKey countKey = executor.createCacheKey(countMs, parameter, RowBounds.DEFAULT, boundSql);
59          BoundSql countBoundSql = countMs.getBoundSql(parameter);
60          Object countResultList = executor.query(countMs, parameter, RowBounds.DEFAULT, resultHandler, countKey, countBoundSql);
61          if (countResultList == null || ((List) countResultList).isEmpty()) {
62              return 0L;
63          }
64          return ((Number) ((List) countResultList).get(0)).longValue();
65      }
66      public static Long executeAutoCount(Dialect dialect, Executor executor, MappedStatement countMs,
67                                          Object parameter, BoundSql boundSql,
68                                          RowBounds rowBounds, ResultHandler resultHandler) throws SQLException {
69          Map<String, Object> additionalParameters = getAdditionalParameter(boundSql);
70          CacheKey countKey = executor.createCacheKey(countMs, parameter, RowBounds.DEFAULT, boundSql);
71          String countSql = dialect.getCountSql(countMs, boundSql, parameter, rowBounds, countKey);
72          BoundSql countBoundSql = new BoundSql(countMs.getConfiguration(), countSql, boundSql.getParameterMappings(), parameter);
73          for (String key : additionalParameters.keySet()) {
74              countBoundSql.setAdditionalParameter(key, additionalParameters.get(key));
75          }
76          if (dialect instanceof BoundSqlInterceptor.Chain) {
77              countBoundSql = ((BoundSqlInterceptor.Chain) dialect).doBoundSql(BoundSqlInterceptor.Type.COUNT_SQL, countBoundSql, countKey);
78          }
79          Object countResultList = executor.query(countMs, parameter, RowBounds.DEFAULT, resultHandler, countKey, countBoundSql);
80          if (countResultList == null || ((List) countResultList).isEmpty()) {
81              return 0L;
82          }
83          return ((Number) ((List) countResultList).get(0)).longValue();
84      }
85      public static <E> List<E> pageQuery(Dialect dialect, Executor executor, MappedStatement ms, Object parameter,
86                                          RowBounds rowBounds, ResultHandler resultHandler,
87                                          BoundSql boundSql, CacheKey cacheKey) throws SQLException {
88          if (dialect.beforePage(ms, parameter, rowBounds)) {
89              CacheKey pageKey = cacheKey;
90              parameter = dialect.processParameterObject(ms, parameter, boundSql, pageKey);
91              String pageSql = dialect.getPageSql(ms, boundSql, parameter, rowBounds, pageKey);
92              BoundSql pageBoundSql = new BoundSql(ms.getConfiguration(), pageSql, boundSql.getParameterMappings(), parameter);
93              Map<String, Object> additionalParameters = getAdditionalParameter(boundSql);
94              for (String key : additionalParameters.keySet()) {
95                  pageBoundSql.setAdditionalParameter(key, additionalParameters.get(key));
96              }
97              if (dialect instanceof BoundSqlInterceptor.Chain) {
98                  pageBoundSql = ((BoundSqlInterceptor.Chain) dialect).doBoundSql(BoundSqlInterceptor.Type.PAGE_SQL, pageBoundSql, pageKey);
99              }
100              return executor.query(ms, parameter, RowBounds.DEFAULT, resultHandler, pageKey, pageBoundSql);
101          } else {
102              return executor.query(ms, parameter, RowBounds.DEFAULT, resultHandler, cacheKey, boundSql);
103          }
104      }
105  }
</code></pre>
        </div>
        <div class="column">
            <h3>jedis-MDEwOlJlcG9zaXRvcnk3MTU2MDU=-flat-SearchBuilderFactory.java</h3>
            <pre><code>1  package redis.clients.jedis.search;
<span onclick='openModal()' class='match'>2  import static redis.clients.jedis.BuilderFactory.STRING;
3  import java.util.ArrayList;
4  import java.util.HashMap;
5  import java.util.LinkedHashMap;
6  import java.util.List;
7  import java.util.Map;
8  import redis.clients.jedis.Builder;
9  import redis.clients.jedis.BuilderFactory;
10  import redis.clients.jedis.search.aggr.AggregationResult;
11  import redis.clients.jedis.util.DoublePrecision;
12  import redis.clients.jedis.util.SafeEncoder;
13  public final class SearchBuilderFactory {
14    public static final Builder<AggregationResult> SEARCH_AGGREGATION_RESULT = new Builder<AggregationResult>() {
</span>15      @Override
16      public AggregationResult build(Object data) {
17        return new AggregationResult(data);
18      }
19    };
20    public static final Builder<AggregationResult> SEARCH_AGGREGATION_RESULT_WITH_CURSOR = new Builder<AggregationResult>() {
21      @Override
22      public AggregationResult build(Object data) {
23        List<Object> list = (List<Object>) data;
24        return new AggregationResult(list.get(0), (long) list.get(1));
25      }
26    };
27    public static final Builder<Map<String, Object>> SEARCH_PROFILE_PROFILE = new Builder<Map<String, Object>>() {
28      private final String ITERATORS_PROFILE_STR = "Iterators profile";
29      private final String CHILD_ITERATORS_STR = "Child iterators";
30      private final String RESULT_PROCESSORS_PROFILE_STR = "Result processors profile";
31      @Override
32      public Map<String, Object> build(Object data) {
33        List<Object> list = (List<Object>) SafeEncoder.encodeObject(data);
34        Map<String, Object> profileMap = new HashMap<>(list.size(), 1f);
35        for (Object listObject : list) {
36          List<Object> attributeList = (List<Object>) listObject;
37          String attributeName = (String) attributeList.get(0);
38          Object attributeValue;
39          if (attributeList.size() == 2) {
40            Object value = attributeList.get(1);
41            if (attributeName.equals(ITERATORS_PROFILE_STR)) {
42              attributeValue = parseIterators(value);
43            } else if (attributeName.endsWith(" time")) {
44              attributeValue = DoublePrecision.parseEncodedFloatingPointNumber(value);
45            } else {
46              attributeValue = value;
47            }
48          } else if (attributeList.size() > 2) {
49            if (attributeName.equals(RESULT_PROCESSORS_PROFILE_STR)) {
50              List<Map<String, Object>> resultProcessorsProfileList = new ArrayList<>(attributeList.size() - 1);
51              for (int i = 1; i < attributeList.size(); i++) {
52                resultProcessorsProfileList.add(parseResultProcessors(attributeList.get(i)));
53              }
54              attributeValue = resultProcessorsProfileList;
55            } else {
56              attributeValue = attributeList.subList(1, attributeList.size());
57            }
58          } else {
59            attributeValue = null;
60          }
61          profileMap.put(attributeName, attributeValue);
62        }
63        return profileMap;
64      }
65      private Map<String, Object> parseResultProcessors(Object data) {
66        List<Object> list = (List<Object>) data;
67        Map<String, Object> map = new HashMap<>(list.size() / 2, 1f);
68        for (int i = 0; i < list.size(); i += 2) {
69          String key = (String) list.get(i);
70          Object value = list.get(i + 1);
71          if (key.equals("Time")) {
72            value = DoublePrecision.parseEncodedFloatingPointNumber(value);
73          }
74          map.put(key, value);
75        }
76        return map;
77      }
78      private Object parseIterators(Object data) {
79        if (!(data instanceof List)) return data;
80        List iteratorsAttributeList = (List) data;
81        int childIteratorsIndex = iteratorsAttributeList.indexOf(CHILD_ITERATORS_STR);
82        if (childIteratorsIndex < 0) childIteratorsIndex = iteratorsAttributeList.indexOf("Child iterator");
83        Map<String, Object> iteratorsProfile;
84        if (childIteratorsIndex < 0) {
85          childIteratorsIndex = iteratorsAttributeList.size();
86          iteratorsProfile = new HashMap<>(childIteratorsIndex / 2, 1f);
87        } else {
88          iteratorsProfile = new HashMap<>(1 + childIteratorsIndex / 2, 1f);
89        }
90        for (int i = 0; i < childIteratorsIndex; i += 2) {
91          String key = (String) iteratorsAttributeList.get(i);
92          Object value = iteratorsAttributeList.get(i + 1);
93          if (key.equals("Time")) {
94            value = DoublePrecision.parseEncodedFloatingPointNumber(value);
95          }
96          iteratorsProfile.put(key, value);
97        }
98        if (childIteratorsIndex + 1 < iteratorsAttributeList.size()) {
99          List childIteratorsList = new ArrayList(iteratorsAttributeList.size() - childIteratorsIndex - 1);
100          for (int i = childIteratorsIndex + 1; i < iteratorsAttributeList.size(); i++) {
101            childIteratorsList.add(parseIterators(iteratorsAttributeList.get(i)));
102          }
103          iteratorsProfile.put(CHILD_ITERATORS_STR, childIteratorsList);
104        }
105        return iteratorsProfile;
106      }
107    };
108    public static final Builder<Map<String, List<String>>> SEARCH_SYNONYM_GROUPS = new Builder<Map<String, List<String>>>() {
109      @Override
110      public Map<String, List<String>> build(Object data) {
111        List<Object> list = (List<Object>) data;
112        Map<String, List<String>> dump = new HashMap<>(list.size() / 2, 1f);
113        for (int i = 0; i < list.size(); i += 2) {
114          dump.put(STRING.build(list.get(i)), BuilderFactory.STRING_LIST.build(list.get(i + 1)));
115        }
116        return dump;
117      }
118    };
119    public static final Builder<Map<String, Map<String, Double>>> SEARCH_SPELLCHECK_RESPONSE
120        = new Builder<Map<String, Map<String, Double>>>() {
121      private final String TERM = "TERM";
122      @Override
123      public Map<String, Map<String, Double>> build(Object data) {
124        List<Object> rawTerms = (List<Object>) data;
125        Map<String, Map<String, Double>> returnTerms = new LinkedHashMap<>(rawTerms.size());
126        for (Object rawTerm : rawTerms) {
127          List<Object> rawElements = (List<Object>) rawTerm;
128          String header = STRING.build(rawElements.get(0));
129          if (!TERM.equals(header)) {
130            throw new IllegalStateException("Unrecognized header: " + header);
131          }
132          String term = STRING.build(rawElements.get(1));
133          List<List<Object>> list = (List<List<Object>>) rawElements.get(2);
134          Map<String, Double> entries = new LinkedHashMap<>(list.size());
135          list.forEach(entry -> entries.put(STRING.build(entry.get(1)), BuilderFactory.DOUBLE.build(entry.get(0))));
136          returnTerms.put(term, entries);
137        }
138        return returnTerms;
139      }
140    };
141    private SearchBuilderFactory() {
142      throw new InstantiationError("Must not instantiate this class");
143    }
144  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from Mybatis-PageHelper-MDEwOlJlcG9zaXRvcnkyMDY1MTY3Mg==-flat-ExecutorUtil.java</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from jedis-MDEwOlJlcG9zaXRvcnk3MTU2MDU=-flat-SearchBuilderFactory.java</div>
                </div>
                <div class="column column_space"><pre><code>6  import org.apache.ibatis.cache.CacheKey;
7  import org.apache.ibatis.executor.Executor;
8  import org.apache.ibatis.mapping.BoundSql;
9  import org.apache.ibatis.mapping.MappedStatement;
10  import org.apache.ibatis.session.Configuration;
11  import org.apache.ibatis.session.ResultHandler;
12  import org.apache.ibatis.session.RowBounds;
13  import java.lang.reflect.Field;
14  import java.sql.SQLException;
15  import java.util.List;
16  import java.util.Map;
17  public abstract class ExecutorUtil {
18      private static Field additionalParametersField;
</pre></code></div>
                <div class="column column_space"><pre><code>2  import static redis.clients.jedis.BuilderFactory.STRING;
3  import java.util.ArrayList;
4  import java.util.HashMap;
5  import java.util.LinkedHashMap;
6  import java.util.List;
7  import java.util.Map;
8  import redis.clients.jedis.Builder;
9  import redis.clients.jedis.BuilderFactory;
10  import redis.clients.jedis.search.aggr.AggregationResult;
11  import redis.clients.jedis.util.DoublePrecision;
12  import redis.clients.jedis.util.SafeEncoder;
13  public final class SearchBuilderFactory {
14    public static final Builder<AggregationResult> SEARCH_AGGREGATION_RESULT = new Builder<AggregationResult>() {
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    