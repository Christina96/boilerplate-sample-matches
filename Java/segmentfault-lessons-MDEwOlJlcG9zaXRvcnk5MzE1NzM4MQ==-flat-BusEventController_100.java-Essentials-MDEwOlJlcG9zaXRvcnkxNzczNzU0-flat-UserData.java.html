
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 2.4691358024691357%, Tokens: 12</h2>
        <div class="column">
            <h3>segmentfault-lessons-MDEwOlJlcG9zaXRvcnk5MzE1NzM4MQ==-flat-BusEventController_100.java</h3>
            <pre><code><span onclick='openModal()' class='match'>1  package com.segumentfault.spring.cloud.lesson15.user.service.client.web.controller;
2  import com.segumentfault.spring.cloud.lesson15.domain.User;
3  import com.segumentfault.spring.cloud.lesson15.event.UserRemoteApplicationEvent;
4  import org.springframework.beans.BeansException;
5  import org.springframework.context.ApplicationContext;
6  import org.springframework.context.ApplicationContextAware;
7  import org.springframework.context.ApplicationEventPublisher;
8  import org.springframework.context.ApplicationEventPublisherAware;
9  import org.springframework.web.bind.annotation.PostMapping;
10  import org.springframework.web.bind.annotation.RequestBody;
11  import org.springframework.web.bind.annotation.RequestParam;
12  import org.springframework.web.bind.annotation.RestController;
</span>13  @RestController
14  public class BusEventController implements ApplicationContextAware, ApplicationEventPublisherAware {
15      private ApplicationEventPublisher eventPublisher;
16      private ApplicationContext applicationContext;
17      @PostMapping("/bus/event/publish/user")
18      public boolean publishUserEvent(@RequestBody User user,
19                                      @RequestParam(value = "destination", required = false) String destination) {
20          String serviceInstanceId = applicationContext.getId();
21          UserRemoteApplicationEvent event = new UserRemoteApplicationEvent(user, serviceInstanceId, destination);
22          eventPublisher.publishEvent(event);
23          return true;
24      }
25      @Override
26      public void setApplicationEventPublisher(ApplicationEventPublisher applicationEventPublisher) {
27          this.eventPublisher = applicationEventPublisher;
28      }
29      @Override
30      public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {
31          this.applicationContext = applicationContext;
32      }
33  }
</code></pre>
        </div>
        <div class="column">
            <h3>Essentials-MDEwOlJlcG9zaXRvcnkxNzczNzU0-flat-UserData.java</h3>
            <pre><code><span onclick='openModal()' class='match'>1  package com.earth2me.essentials;
2  import static com.earth2me.essentials.I18n.tl;
3  import com.earth2me.essentials.utils.NumberUtil;
4  import com.earth2me.essentials.utils.StringUtil;
5  import java.io.File;
6  import java.math.BigDecimal;
7  import java.util.*;
8  import net.ess3.api.IEssentials;
9  import net.ess3.api.InvalidWorldException;
10  import net.ess3.api.MaxMoneyException;
11  import org.bukkit.Location;
12  import org.bukkit.configuration.ConfigurationSection;
</span>13  import org.bukkit.entity.Player;
14  import org.bukkit.inventory.ItemStack;
15  public abstract class UserData extends PlayerExtension implements IConf
16  {
17  	protected final transient IEssentials ess;
18  	private final EssentialsUserConf config;
19  	private final File folder;
20  	protected UserData(Player base, IEssentials ess)
21  	{
22  		super(base);
23  		this.ess = ess;
24  		folder = new File(ess.getDataFolder(), "userdata");
25  		if (!folder.exists())
26  		{
27  			folder.mkdirs();
28  		}
29  		String filename;
30  		try
31  		{
32  			filename = base.getUniqueId().toString();
33  		}
34  		catch (Throwable ex)
35  		{
36  			ess.getLogger().warning("Falling back to old username system for " + base.getName());
37  			filename = base.getName();
38  		}
39  		config = new EssentialsUserConf(base.getName(), base.getUniqueId(), new File(folder, filename + ".yml"));
40  		reloadConfig();
41  	}
42  	public final void reset()
43  	{
44  		config.forceSave();
45  		config.getFile().delete();
46  		if (config.username != null)
47  		{
48  			ess.getUserMap().removeUser(config.username);
49  		}
50  	}
51  	public final void cleanup()
52  	{
53  		config.cleanup();
54  	}
55  	@Override
56  	public final void reloadConfig()
57  	{
58  		config.load();
59  		money = _getMoney();
60  		unlimited = _getUnlimited();
61  		powertools = _getPowertools();
62  		homes = _getHomes();
63  		lastLocation = _getLastLocation();
64  		lastTeleportTimestamp = _getLastTeleportTimestamp();
65  		lastHealTimestamp = _getLastHealTimestamp();
66  		jail = _getJail();
67  		mails = _getMails();
68  		teleportEnabled = _getTeleportEnabled();
69  		godmode = _getGodModeEnabled();
70  		muted = _getMuted();
71  		muteTimeout = _getMuteTimeout();
72  		jailed = _getJailed();
73  		jailTimeout = _getJailTimeout();
74  		lastLogin = _getLastLogin();
75  		lastLogout = _getLastLogout();
76  		lastLoginAddress = _getLastLoginAddress();
77  		afk = _getAfk();
78  		geolocation = _getGeoLocation();
79  		isSocialSpyEnabled = _isSocialSpyEnabled();
80  		isNPC = _isNPC();
81  		arePowerToolsEnabled = _arePowerToolsEnabled();
82  		kitTimestamps = _getKitTimestamps();
83  		nickname = _getNickname();
84  		ignoredPlayers = _getIgnoredPlayers();
85  		logoutLocation = _getLogoutLocation();
86  		lastAccountName = _getLastAccountName();
87  	}
88  	private BigDecimal money;
89  	private BigDecimal _getMoney()
90  	{
91  		BigDecimal result = ess.getSettings().getStartingBalance();
92  		BigDecimal maxMoney = ess.getSettings().getMaxMoney();
93  		BigDecimal minMoney = ess.getSettings().getMinMoney();
94  		if (config.hasProperty("money"))
95  		{
96  			result = config.getBigDecimal("money", result);
97  		}
98  		if (result.compareTo(maxMoney) > 0)
99  		{
100  			result = maxMoney;
101  		}
102  		if (result.compareTo(minMoney) < 0)
103  		{
104  			result = minMoney;
105  		}
106  		return result;
107  	}
108  	public BigDecimal getMoney()
109  	{
110  		return money;
111  	}
112  	public void setMoney(BigDecimal value, boolean throwError) throws MaxMoneyException
113  	{
114  		BigDecimal maxMoney = ess.getSettings().getMaxMoney();
115  		BigDecimal minMoney = ess.getSettings().getMinMoney();
116  		if (value.compareTo(maxMoney) > 0)
117  		{
118  			if (throwError)
119  			{
120  				throw new MaxMoneyException();
121  			}
122  			money = maxMoney;
123  		}
124  		else
125  		{
126  			money = value;
127  		}
128  		if (money.compareTo(minMoney) < 0)
129  		{
130  			money = minMoney;
131  		}
132  		config.setProperty("money", money);
133  		stopTransaction();
134  	}
135  	private Map<String, Object> homes;
136  	private Map<String, Object> _getHomes()
137  	{
138  		if (config.isConfigurationSection("homes"))
139  		{
140  			return config.getConfigurationSection("homes").getValues(false);
141  		}
142  		return new HashMap<String, Object>();
143  	}
144  	private String getHomeName(String search)
145  	{
146  		if (NumberUtil.isInt(search))
147  		{
148  			try
149  			{
150  				search = getHomes().get(Integer.parseInt(search) - 1);
151  			}
152  			catch (NumberFormatException e)
153  			{
154  			}
155  			catch (IndexOutOfBoundsException e)
156  			{
157  			}
158  		}
159  		return search;
160  	}
161  	public Location getHome(String name) throws Exception
162  	{
163  		String search = getHomeName(name);
164  		return config.getLocation("homes." + search, this.getBase().getServer());
165  	}
166  	public Location getHome(final Location world)
167  	{
168  		try
169  		{
170  			if (getHomes().isEmpty())
171  			{
172  				return null;
173  			}
174  			Location loc;
175  			for (String home : getHomes())
176  			{
177  				loc = config.getLocation("homes." + home, this.getBase().getServer());
178  				if (world.getWorld() == loc.getWorld())
179  				{
180  					return loc;
181  				}
182  			}
183  			loc = config.getLocation("homes." + getHomes().get(0), this.getBase().getServer());
184  			return loc;
185  		}
186  		catch (InvalidWorldException ex)
187  		{
188  			return null;
189  		}
190  	}
191  	public List<String> getHomes()
192  	{
193  		return new ArrayList<String>(homes.keySet());
194  	}
195  	public void setHome(String name, Location loc)
196  	{
197  		name = StringUtil.safeString(name);
198  		homes.put(name, loc);
199  		config.setProperty("homes." + name, loc);
200  		config.save();
201  	}
202  	public void delHome(String name) throws Exception
203  	{
204  		String search = getHomeName(name);
205  		if (!homes.containsKey(search))
206  		{
207  			search = StringUtil.safeString(search);
208  		}
209  		if (homes.containsKey(search))
210  		{
211  			homes.remove(search);
212  			config.removeProperty("homes." + search);
213  			config.save();
214  		}
215  		else
216  		{
217  			throw new Exception(tl("invalidHome", search));
218  		}
219  	}
220  	public boolean hasHome()
221  	{
222  		if (config.hasProperty("home"))
223  		{
224  			return true;
225  		}
226  		return false;
227  	}
228  	private String nickname;
229  	public String _getNickname()
230  	{
231  		return config.getString("nickname");
232  	}
233  	public String getNickname()
234  	{
235  		return nickname;
236  	}
237  	public void setNickname(String nick)
238  	{
239  		nickname = nick;
240  		config.setProperty("nickname", nick);
241  		config.save();
242  	}
243  	private List<Integer> unlimited;
244  	private List<Integer> _getUnlimited()
245  	{
246  		return config.getIntegerList("unlimited");
247  	}
248  	public List<Integer> getUnlimited()
249  	{
250  		return unlimited;
251  	}
252  	public boolean hasUnlimited(ItemStack stack)
253  	{
254  		return unlimited.contains(stack.getTypeId());
255  	}
256  	public void setUnlimited(ItemStack stack, boolean state)
257  	{
258  		if (unlimited.contains(stack.getTypeId()))
259  		{
260  			unlimited.remove(Integer.valueOf(stack.getTypeId()));
261  		}
262  		if (state)
263  		{
264  			unlimited.add(stack.getTypeId());
265  		}
266  		config.setProperty("unlimited", unlimited);
267  		config.save();
268  	}
269  	private Map<String, Object> powertools;
270  	private Map<String, Object> _getPowertools()
271  	{
272  		if (config.isConfigurationSection("powertools"))
273  		{
274  			return config.getConfigurationSection("powertools").getValues(false);
275  		}
276  		return new HashMap<String, Object>();
277  	}
278  	public void clearAllPowertools()
279  	{
280  		powertools.clear();
281  		config.setProperty("powertools", powertools);
282  		config.save();
283  	}
284  	@SuppressWarnings("unchecked")
285  	public List<String> getPowertool(ItemStack stack)
286  	{
287  		return (List<String>)powertools.get("" + stack.getTypeId());
288  	}
289  	@SuppressWarnings("unchecked")
290  	public List<String> getPowertool(int id)
291  	{
292  		return (List<String>)powertools.get("" + id);
293  	}
294  	public void setPowertool(ItemStack stack, List<String> commandList)
295  	{
296  		if (commandList == null || commandList.isEmpty())
297  		{
298  			powertools.remove("" + stack.getTypeId());
299  		}
300  		else
301  		{
302  			powertools.put("" + stack.getTypeId(), commandList);
303  		}
304  		config.setProperty("powertools", powertools);
305  		config.save();
306  	}
307  	public boolean hasPowerTools()
308  	{
309  		return !powertools.isEmpty();
310  	}
311  	private Location lastLocation;
312  	private Location _getLastLocation()
313  	{
314  		try
315  		{
316  			return config.getLocation("lastlocation", this.getBase().getServer());
317  		}
318  		catch (InvalidWorldException e)
319  		{
320  			return null;
321  		}
322  	}
323  	public Location getLastLocation()
324  	{
325  		return lastLocation;
326  	}
327  	public void setLastLocation(Location loc)
328  	{
329  		if (loc == null || loc.getWorld() == null)
330  		{
331  			return;
332  		}
333  		lastLocation = loc;
334  		config.setProperty("lastlocation", loc);
335  		config.save();
336  	}
337  	private Location logoutLocation;
338  	private Location _getLogoutLocation()
339  	{
340  		try
341  		{
342  			return config.getLocation("logoutlocation", this.getBase().getServer());
343  		}
344  		catch (InvalidWorldException e)
345  		{
346  			return null;
347  		}
348  	}
349  	public Location getLogoutLocation()
350  	{
351  		return logoutLocation;
352  	}
353  	public void setLogoutLocation(Location loc)
354  	{
355  		if (loc == null || loc.getWorld() == null)
356  		{
357  			return;
358  		}
359  		logoutLocation = loc;
360  		config.setProperty("logoutlocation", loc);
361  		config.save();
362  	}
363  	private long lastTeleportTimestamp;
364  	private long _getLastTeleportTimestamp()
365  	{
366  		return config.getLong("timestamps.lastteleport", 0);
367  	}
368  	public long getLastTeleportTimestamp()
369  	{
370  		return lastTeleportTimestamp;
371  	}
372  	public void setLastTeleportTimestamp(long time)
373  	{
374  		lastTeleportTimestamp = time;
375  		config.setProperty("timestamps.lastteleport", time);
376  		config.save();
377  	}
378  	private long lastHealTimestamp;
379  	private long _getLastHealTimestamp()
380  	{
381  		return config.getLong("timestamps.lastheal", 0);
382  	}
383  	public long getLastHealTimestamp()
384  	{
385  		return lastHealTimestamp;
386  	}
387  	public void setLastHealTimestamp(long time)
388  	{
389  		lastHealTimestamp = time;
390  		config.setProperty("timestamps.lastheal", time);
391  		config.save();
392  	}
393  	private String jail;
394  	private String _getJail()
395  	{
396  		return config.getString("jail");
397  	}
398  	public String getJail()
399  	{
400  		return jail;
401  	}
402  	public void setJail(String jail)
403  	{
404  		if (jail == null || jail.isEmpty())
405  		{
406  			this.jail = null;
407  			config.removeProperty("jail");
408  		}
409  		else
410  		{
411  			this.jail = jail;
412  			config.setProperty("jail", jail);
413  		}
414  		config.save();
415  	}
416  	private List<String> mails;
417  	private List<String> _getMails()
418  	{
419  		return config.getStringList("mail");
420  	}
421  	public List<String> getMails()
422  	{
423  		return mails;
424  	}
425  	public void setMails(List<String> mails)
426  	{
427  		if (mails == null)
428  		{
429  			config.removeProperty("mail");
430  			mails = _getMails();
431  		}
432  		else
433  		{
434  			config.setProperty("mail", mails);
435  		}
436  		this.mails = mails;
437  		config.save();
438  	}
439  	public void addMail(String mail)
440  	{
441  		mails.add(mail);
442  		setMails(mails);
443  	}
444  	private boolean teleportEnabled;
445  	private boolean _getTeleportEnabled()
446  	{
447  		return config.getBoolean("teleportenabled", true);
448  	}
449  	public boolean isTeleportEnabled()
450  	{
451  		return teleportEnabled;
452  	}
453  	public void setTeleportEnabled(boolean set)
454  	{
455  		teleportEnabled = set;
456  		config.setProperty("teleportenabled", set);
457  		config.save();
458  	}
459  	private List<String> ignoredPlayers;
460  	public List<String> _getIgnoredPlayers()
461  	{
462  		return Collections.synchronizedList(config.getStringList("ignore"));
463  	}
464  	public void setIgnoredPlayers(List<String> players)
465  	{
466  		if (players == null || players.isEmpty())
467  		{
468  			ignoredPlayers = Collections.synchronizedList(new ArrayList<String>());
469  			config.removeProperty("ignore");
470  		}
471  		else
472  		{
473  			ignoredPlayers = players;
474  			config.setProperty("ignore", players);
475  		}
476  		config.save();
477  	}
478  	@Deprecated
479  	public boolean isIgnoredPlayer(final String userName)
480  	{
481  		final IUser user = ess.getUser(userName);
482  		if (user == null || !user.getBase().isOnline())
483  		{
484  			return false;
485  		}
486  		return isIgnoredPlayer(user);
487  	}
488  	public boolean isIgnoredPlayer(IUser user)
489  	{
490  		return (ignoredPlayers.contains(user.getName().toLowerCase(Locale.ENGLISH)) && !user.isIgnoreExempt());
491  	}
492  	public void setIgnoredPlayer(IUser user, boolean set)
493  	{
494  		if (set)
495  		{
496  			ignoredPlayers.add(user.getName().toLowerCase(Locale.ENGLISH));
497  		}
498  		else
499  		{
500  			ignoredPlayers.remove(user.getName().toLowerCase(Locale.ENGLISH));
501  		}
502  		setIgnoredPlayers(ignoredPlayers);
503  	}
504  	private boolean godmode;
505  	private boolean _getGodModeEnabled()
506  	{
507  		return config.getBoolean("godmode", false);
508  	}
509  	public boolean isGodModeEnabled()
510  	{
511  		return godmode;
512  	}
513  	public void setGodModeEnabled(boolean set)
514  	{
515  		godmode = set;
516  		config.setProperty("godmode", set);
517  		config.save();
518  	}
519  	private boolean muted;
520  	public boolean _getMuted()
521  	{
522  		return config.getBoolean("muted", false);
523  	}
524  	public boolean getMuted()
525  	{
526  		return muted;
527  	}
528  	public boolean isMuted()
529  	{
530  		return muted;
531  	}
532  	public void setMuted(boolean set)
533  	{
534  		muted = set;
535  		config.setProperty("muted", set);
536  		config.save();
537  	}
538  	private long muteTimeout;
539  	private long _getMuteTimeout()
540  	{
541  		return config.getLong("timestamps.mute", 0);
542  	}
543  	public long getMuteTimeout()
544  	{
545  		return muteTimeout;
546  	}
547  	public void setMuteTimeout(long time)
548  	{
549  		muteTimeout = time;
550  		config.setProperty("timestamps.mute", time);
551  		config.save();
552  	}
553  	private boolean jailed;
554  	private boolean _getJailed()
555  	{
556  		return config.getBoolean("jailed", false);
557  	}
558  	public boolean isJailed()
559  	{
560  		return jailed;
561  	}
562  	public void setJailed(boolean set)
563  	{
564  		jailed = set;
565  		config.setProperty("jailed", set);
566  		config.save();
567  	}
568  	public boolean toggleJailed()
569  	{
570  		boolean ret = !isJailed();
571  		setJailed(ret);
572  		return ret;
573  	}
574  	private long jailTimeout;
575  	private long _getJailTimeout()
576  	{
577  		return config.getLong("timestamps.jail", 0);
578  	}
579  	public long getJailTimeout()
580  	{
581  		return jailTimeout;
582  	}
583  	public void setJailTimeout(long time)
584  	{
585  		jailTimeout = time;
586  		config.setProperty("timestamps.jail", time);
587  		config.save();
588  	}
589  	private long lastLogin;
590  	private long _getLastLogin()
591  	{
592  		return config.getLong("timestamps.login", 0);
593  	}
594  	public long getLastLogin()
595  	{
596  		return lastLogin;
597  	}
598  	private void _setLastLogin(long time)
599  	{
600  		lastLogin = time;
601  		config.setProperty("timestamps.login", time);
602  	}
603  	public void setLastLogin(long time)
604  	{
605  		_setLastLogin(time);
606  		if (base.getAddress() != null && base.getAddress().getAddress() != null)
607  		{
608  			_setLastLoginAddress(base.getAddress().getAddress().getHostAddress());
609  		}
610  		config.save();
611  	}
612  	private long lastLogout;
613  	private long _getLastLogout()
614  	{
615  		return config.getLong("timestamps.logout", 0);
616  	}
617  	public long getLastLogout()
618  	{
619  		return lastLogout;
620  	}
621  	public void setLastLogout(long time)
622  	{
623  		lastLogout = time;
624  		config.setProperty("timestamps.logout", time);
625  		config.save();
626  	}
627  	private String lastLoginAddress;
628  	private String _getLastLoginAddress()
629  	{
630  		return config.getString("ipAddress", "");
631  	}
632  	public String getLastLoginAddress()
633  	{
634  		return lastLoginAddress;
635  	}
636  	private void _setLastLoginAddress(String address)
637  	{
638  		lastLoginAddress = address;
639  		config.setProperty("ipAddress", address);
640  	}
641  	private boolean afk;
642  	private boolean _getAfk()
643  	{
644  		return config.getBoolean("afk", false);
645  	}
646  	public boolean isAfk()
647  	{
648  		return afk;
649  	}
650  	public void _setAfk(boolean set)
651  	{
652  		afk = set;
653  		config.setProperty("afk", set);
654  		config.save();
655  	}
656  	private boolean newplayer;
657  	private String geolocation;
658  	private String _getGeoLocation()
659  	{
660  		return config.getString("geolocation");
661  	}
662  	public String getGeoLocation()
663  	{
664  		return geolocation;
665  	}
666  	public void setGeoLocation(String geolocation)
667  	{
668  		if (geolocation == null || geolocation.isEmpty())
669  		{
670  			this.geolocation = null;
671  			config.removeProperty("geolocation");
672  		}
673  		else
674  		{
675  			this.geolocation = geolocation;
676  			config.setProperty("geolocation", geolocation);
677  		}
678  		config.save();
679  	}
680  	private boolean isSocialSpyEnabled;
681  	private boolean _isSocialSpyEnabled()
682  	{
683  		return config.getBoolean("socialspy", false);
684  	}
685  	public boolean isSocialSpyEnabled()
686  	{
687  		return isSocialSpyEnabled;
688  	}
689  	public void setSocialSpyEnabled(boolean status)
690  	{
691  		isSocialSpyEnabled = status;
692  		config.setProperty("socialspy", status);
693  		config.save();
694  	}
695  	private boolean isNPC;
696  	private boolean _isNPC()
697  	{
698  		return config.getBoolean("npc", false);
699  	}
700  	public boolean isNPC()
701  	{
702  		return isNPC;
703  	}
704  	private String lastAccountName = null;
705  	public String getLastAccountName()
706  	{
707  		return lastAccountName;
708  	}
709  	public String _getLastAccountName()
710  	{
711  		return config.getString("lastAccountName", null);
712  	}
713  	public void setLastAccountName(String lastAccountName)
714  	{
715  		this.lastAccountName = lastAccountName;
716  		config.setProperty("lastAccountName", lastAccountName);
717  		config.save();
718  		ess.getUserMap().trackUUID(getConfigUUID(), lastAccountName, true);
719  	}
720  	public void setNPC(boolean set)
721  	{
722  		isNPC = set;
723  		config.setProperty("npc", set);
724  		config.save();
725  	}
726  	private boolean arePowerToolsEnabled;
727  	public boolean arePowerToolsEnabled()
728  	{
729  		return arePowerToolsEnabled;
730  	}
731  	public void setPowerToolsEnabled(boolean set)
732  	{
733  		arePowerToolsEnabled = set;
734  		config.setProperty("powertoolsenabled", set);
735  		config.save();
736  	}
737  	public boolean togglePowerToolsEnabled()
738  	{
739  		boolean ret = !arePowerToolsEnabled();
740  		setPowerToolsEnabled(ret);
741  		return ret;
742  	}
743  	private boolean _arePowerToolsEnabled()
744  	{
745  		return config.getBoolean("powertoolsenabled", true);
746  	}
747  	private Map<String, Long> kitTimestamps;
748  	private Map<String, Long> _getKitTimestamps()
749  	{
750  		if (config.isConfigurationSection("timestamps.kits"))
751  		{
752  			final ConfigurationSection section = config.getConfigurationSection("timestamps.kits");
753  			final Map<String, Long> timestamps = new HashMap<String, Long>();
754  			for (String command : section.getKeys(false))
755  			{
756  				if (section.isLong(command))
757  				{
758  					timestamps.put(command.toLowerCase(Locale.ENGLISH), section.getLong(command));
759  				}
760  				else if (section.isInt(command))
761  				{
762  					timestamps.put(command.toLowerCase(Locale.ENGLISH), (long)section.getInt(command));
763  				}
764  			}
765  			return timestamps;
766  		}
767  		return new HashMap<String, Long>();
768  	}
769  	public long getKitTimestamp(String name)
770  	{
771  		name = name.replace('.', '_').replace('/', '_');
772  		if (kitTimestamps != null && kitTimestamps.containsKey(name))
773  		{
774  			return kitTimestamps.get(name);
775  		}
776  		return 0l;
777  	}
778  	public void setKitTimestamp(final String name, final long time)
779  	{
780  		kitTimestamps.put(name.toLowerCase(Locale.ENGLISH), time);
781  		config.setProperty("timestamps.kits", kitTimestamps);
782  		config.save();
783  	}
784  	public void setConfigProperty(String node, Object object)
785  	{
786  		final String prefix = "info.";
787  		node = prefix + node;
788  		if (object instanceof Map)
789  		{
790  			config.setProperty(node, (Map)object);
791  		}
792  		else if (object instanceof List)
793  		{
794  			config.setProperty(node, (List<String>)object);
795  		}
796  		else if (object instanceof Location)
797  		{
798  			config.setProperty(node, (Location)object);
799  		}
800  		else if (object instanceof ItemStack)
801  		{
802  			config.setProperty(node, (ItemStack)object);
803  		}
804  		else
805  		{
806  			config.setProperty(node, object);
807  		}
808  		config.save();
809  	}
810  	public Set<String> getConfigKeys()
811  	{
812  		if (config.isConfigurationSection("info"))
813  		{
814  			return config.getConfigurationSection("info").getKeys(true);
815  		}
816  		return new HashSet<String>();
817  	}
818  	public Map<String, Object> getConfigMap()
819  	{
820  		if (config.isConfigurationSection("info"))
821  		{
822  			return config.getConfigurationSection("info").getValues(true);
823  		}
824  		return new HashMap<String, Object>();
825  	}
826  	public Map<String, Object> getConfigMap(String node)
827  	{
828  		if (config.isConfigurationSection("info." + node))
829  		{
830  			return config.getConfigurationSection("info." + node).getValues(true);
831  		}
832  		return new HashMap<String, Object>();
833  	}
834  	public UUID getConfigUUID()
835  	{
836  		return config.uuid;
837  	}
838  	public void save()
839  	{
840  		config.save();
841  	}
842  	public void startTransaction()
843  	{
844  		config.startTransaction();
845  	}
846  	public void stopTransaction()
847  	{
848  		config.stopTransaction();
849  	}
850  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from segmentfault-lessons-MDEwOlJlcG9zaXRvcnk5MzE1NzM4MQ==-flat-BusEventController_100.java</div>
                <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from Essentials-MDEwOlJlcG9zaXRvcnkxNzczNzU0-flat-UserData.java</div>
                <div class="column column_space"><pre><code>1  package com.segumentfault.spring.cloud.lesson15.user.service.client.web.controller;
2  import com.segumentfault.spring.cloud.lesson15.domain.User;
3  import com.segumentfault.spring.cloud.lesson15.event.UserRemoteApplicationEvent;
4  import org.springframework.beans.BeansException;
5  import org.springframework.context.ApplicationContext;
6  import org.springframework.context.ApplicationContextAware;
7  import org.springframework.context.ApplicationEventPublisher;
8  import org.springframework.context.ApplicationEventPublisherAware;
9  import org.springframework.web.bind.annotation.PostMapping;
10  import org.springframework.web.bind.annotation.RequestBody;
11  import org.springframework.web.bind.annotation.RequestParam;
12  import org.springframework.web.bind.annotation.RestController;
</pre></code></div>
                <div class="column column_space"><pre><code>1  package com.earth2me.essentials;
2  import static com.earth2me.essentials.I18n.tl;
3  import com.earth2me.essentials.utils.NumberUtil;
4  import com.earth2me.essentials.utils.StringUtil;
5  import java.io.File;
6  import java.math.BigDecimal;
7  import java.util.*;
8  import net.ess3.api.IEssentials;
9  import net.ess3.api.InvalidWorldException;
10  import net.ess3.api.MaxMoneyException;
11  import org.bukkit.Location;
12  import org.bukkit.configuration.ConfigurationSection;
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    