<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for CombinedFuture_1.java &amp; CycleDetectingLockFactoryTest.java</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for CombinedFuture_1.java &amp; CycleDetectingLockFactoryTest.java
      </h3>
<h1 align="center">
        5.7%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>CombinedFuture_1.java (10.869565%)<th>CycleDetectingLockFactoryTest.java (3.894081%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(15-32)<td><a href="#" name="0">(17-38)</a><td align="center"><font color="#ff0000">14</font>
<tr onclick='openModal("#f63526")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f63526"><font color="#f63526">-</font><td><a href="#" name="1">(108-114)<td><a href="#" name="1">(145-151)</a><td align="center"><font color="#c80000">11</font>
</td></td></a></td></td></tr></td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>CombinedFuture_1.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 <font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>package com.google.common.util.concurrent;
2 import static com.google.common.base.Preconditions.checkNotNull;
3 import static com.google.common.util.concurrent.AggregateFuture.ReleaseResourcesReason.OUTPUT_FUTURE_DONE;
4 import com.google.common.annotations.GwtCompatible;
5 import com.google.common.collect.ImmutableCollection;
6 import com.google.j2objc.annotations.WeakOuter;
7 import java.util.concurrent.Callable;
8 import java.util.concurrent.CancellationException;
9 import java.util.concurrent.ExecutionException;
10 import java.util.concurrent.Executor;
11 import java.util.concurrent.RejectedExecutionException;
12 import javax.annotation.CheckForNull;
13 import org.checkerframework.checker.nullness.qual.Nullable;
14 @GwtC</b></font>ompatible
15 @ElementTypesAreNonnullByDefault
16 final class CombinedFuture&lt;V extends @Nullable Object&gt;
17     extends AggregateFuture&lt;@Nullable Object, V&gt; {
18   @CheckForNull private CombinedFutureInterruptibleTask&lt;?&gt; task;
19   CombinedFuture(
20       ImmutableCollection&lt;? extends ListenableFuture&lt;?&gt;&gt; futures,
21       boolean allMustSucceed,
22       Executor listenerExecutor,
23       AsyncCallable&lt;V&gt; callable) {
24     super(futures, allMustSucceed, false);
25     this.task = new AsyncCallableInterruptibleTask(callable, listenerExecutor);
26     init();
27   }
28   CombinedFuture(
29       ImmutableCollection&lt;? extends ListenableFuture&lt;?&gt;&gt; futures,
30       boolean allMustSucceed,
31       Executor listenerExecutor,
32       Callable&lt;V&gt; callable) {
33     super(futures, allMustSucceed, false);
34     this.task = new CallableInterruptibleTask(callable, listenerExecutor);
35     init();
36   }
37   @Override
38   void collectOneValue(int index, @CheckForNull Object returnValue) {}
39   @Override
40   void handleAllCompleted() {
41     CombinedFutureInterruptibleTask&lt;?&gt; localTask = task;
42     if (localTask != null) {
43       localTask.execute();
44     }
45   }
46   @Override
47   void releaseResources(ReleaseResourcesReason reason) {
48     super.releaseResources(reason);
49     if (reason == OUTPUT_FUTURE_DONE) {
50       this.task = null;
51     }
52   }
53   @Override
54   protected void interruptTask() {
55     CombinedFutureInterruptibleTask&lt;?&gt; localTask = task;
56     if (localTask != null) {
57       localTask.interruptTask();
58     }
59   }
60   @WeakOuter
61   private abstract class CombinedFutureInterruptibleTask&lt;T extends @Nullable Object&gt;
62       extends InterruptibleTask&lt;T&gt; {
63     private final Executor listenerExecutor;
64     CombinedFutureInterruptibleTask(Executor listenerExecutor) {
65       this.listenerExecutor = checkNotNull(listenerExecutor);
66     }
67     @Override
68     final boolean isDone() {
69       return CombinedFuture.this.isDone();
70     }
71 <a name="1"></a>
72     final void execute() {
73       try {
74         <font color="#f63526"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>listenerExecutor.execute(this);
75       } catch (RejectedExecutionException e) {
76         CombinedFuture.this.setException(e);
77       }
78     }
79     @Override</b></font>
80     final void afterRanInterruptiblySuccess(@ParametricNullness T result) {
81       CombinedFuture.this.task = null;
82       setValue(result);
83     }
84     @Override
85     final void afterRanInterruptiblyFailure(Throwable error) {
86       CombinedFuture.this.task = null;
87       if (error instanceof ExecutionException) {
88         CombinedFuture.this.setException(((ExecutionException) error).getCause());
89       } else if (error instanceof CancellationException) {
90         cancel(false);
91       } else {
92         CombinedFuture.this.setException(error);
93       }
94     }
95     abstract void setValue(@ParametricNullness T value);
96   }
97   @WeakOuter
98   private final class AsyncCallableInterruptibleTask
99       extends CombinedFutureInterruptibleTask&lt;ListenableFuture&lt;V&gt;&gt; {
100     private final AsyncCallable&lt;V&gt; callable;
101     AsyncCallableInterruptibleTask(AsyncCallable&lt;V&gt; callable, Executor listenerExecutor) {
102       super(listenerExecutor);
103       this.callable = checkNotNull(callable);
104     }
105     @Override
106     ListenableFuture&lt;V&gt; runInterruptibly() throws Exception {
107       ListenableFuture&lt;V&gt; result = callable.call();
108       return checkNotNull(
109           result,
110           "AsyncCallable.call returned null instead of a Future. "
111               + "Did you mean to return immediateFuture(null)? %s",
112           callable);
113     }
114     @Override
115     void setValue(ListenableFuture&lt;V&gt; value) {
116       CombinedFuture.this.setFuture(value);
117     }
118     @Override
119     String toPendingString() {
120       return callable.toString();
121     }
122   }
123   @WeakOuter
124   private final class CallableInterruptibleTask extends CombinedFutureInterruptibleTask&lt;V&gt; {
125     private final Callable&lt;V&gt; callable;
126     CallableInterruptibleTask(Callable&lt;V&gt; callable, Executor listenerExecutor) {
127       super(listenerExecutor);
128       this.callable = checkNotNull(callable);
129     }
130     @Override
131     @ParametricNullness
132     V runInterruptibly() throws Exception {
133       return callable.call();
134     }
135     @Override
136     void setValue(@ParametricNullness V value) {
137       CombinedFuture.this.set(value);
138     }
139     @Override
140     String toPendingString() {
141       return callable.toString();
142     }
143   }
144 }
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>CycleDetectingLockFactoryTest.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 <font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>package com.google.common.util.concurrent;
2 import com.google.common.base.Joiner;
3 import com.google.common.util.concurrent.CycleDetectingLockFactory.Policies;
4 import com.google.common.util.concurrent.CycleDetectingLockFactory.Policy;
5 import com.google.common.util.concurrent.CycleDetectingLockFactory.PotentialDeadlockException;
6 import java.util.concurrent.CountDownLatch;
7 import java.util.concurrent.TimeUnit;
8 import java.util.concurrent.locks.Lock;
9 import java.util.concurrent.locks.ReentrantLock;
10 import java.util.concurrent.locks.ReentrantReadWriteLock;
11 import java.util.regex.Matcher;
12 import java.util.regex.Pattern;
13 import junit.framework.TestCase;
14 publi</b></font>c class CycleDetectingLockFactoryTest extends TestCase {
15   private ReentrantLock lockA;
16   private ReentrantLock lockB;
17   private ReentrantLock lockC;
18   private ReentrantReadWriteLock.ReadLock readLockA;
19   private ReentrantReadWriteLock.ReadLock readLockB;
20   private ReentrantReadWriteLock.ReadLock readLockC;
21   private ReentrantReadWriteLock.WriteLock writeLockA;
22   private ReentrantReadWriteLock.WriteLock writeLockB;
23   private ReentrantReadWriteLock.WriteLock writeLockC;
24   private ReentrantLock lock1;
25   private ReentrantLock lock2;
26   private ReentrantLock lock3;
27   private ReentrantLock lock01;
28   private ReentrantLock lock02;
29   private ReentrantLock lock03;
30   @Override
31   protected void setUp() throws Exception {
32     super.setUp();
33     CycleDetectingLockFactory factory = CycleDetectingLockFactory.newInstance(Policies.THROW);
34     lockA = factory.newReentrantLock("LockA");
35     lockB = factory.newReentrantLock("LockB");
36     lockC = factory.newReentrantLock("LockC");
37     ReentrantReadWriteLock readWriteLockA = factory.newReentrantReadWriteLock("ReadWriteA");
38     ReentrantReadWriteLock readWriteLockB = factory.newReentrantReadWriteLock("ReadWriteB");
39     ReentrantReadWriteLock readWriteLockC = factory.newReentrantReadWriteLock("ReadWriteC");
40     readLockA = readWriteLockA.readLock();
41     readLockB = readWriteLockB.readLock();
42     readLockC = readWriteLockC.readLock();
43     writeLockA = readWriteLockA.writeLock();
44     writeLockB = readWriteLockB.writeLock();
45     writeLockC = readWriteLockC.writeLock();
46     CycleDetectingLockFactory.WithExplicitOrdering&lt;MyOrder&gt; factory2 =
47         newInstanceWithExplicitOrdering(MyOrder.class, Policies.THROW);
48     lock1 = factory2.newReentrantLock(MyOrder.FIRST);
49     lock2 = factory2.newReentrantLock(MyOrder.SECOND);
50     lock3 = factory2.newReentrantLock(MyOrder.THIRD);
51     CycleDetectingLockFactory.WithExplicitOrdering&lt;OtherOrder&gt; factory3 =
52         newInstanceWithExplicitOrdering(OtherOrder.class, Policies.THROW);
53     lock01 = factory3.newReentrantLock(OtherOrder.FIRST);
54     lock02 = factory3.newReentrantLock(OtherOrder.SECOND);
55     lock03 = factory3.newReentrantLock(OtherOrder.THIRD);
56   }
57   private &lt;E extends Enum&lt;E&gt;&gt;
58       CycleDetectingLockFactory.WithExplicitOrdering&lt;E&gt; newInstanceWithExplicitOrdering(
59           Class&lt;E&gt; enumClass, Policy policy) {
60     return new CycleDetectingLockFactory.WithExplicitOrdering&lt;E&gt;(
61         policy, CycleDetectingLockFactory.createNodes(enumClass));
62   }
63   public void testDeadlock_twoLocks() {
64     lockA.lock();
65     lockB.lock();
66     lockA.unlock();
67     lockB.unlock();
68     PotentialDeadlockException firstException = null;
69     lockB.lock();
70     try {
71       lockA.lock();
72       fail("Expected PotentialDeadlockException");
73     } catch (PotentialDeadlockException expected) {
74       checkMessage(expected, "LockB -&gt; LockA", "LockA -&gt; LockB");
75       firstException = expected;
76     }
77     try {
78       lockA.lock();
79       fail("Expected PotentialDeadlockException");
80     } catch (PotentialDeadlockException expected) {
81       checkMessage(expected, "LockB -&gt; LockA", "LockA -&gt; LockB");
82       assertSame(firstException.getCause(), expected.getCause());
83     }
84     lockB.unlock();
85     lockA.lock();
86   }
87   public void testDeadlock_threeLocks() {
88     lockA.lock();
89     lockB.lock();
90     lockB.unlock();
91     lockA.unlock();
92     lockB.lock();
93     lockC.lock();
94     lockB.unlock();
95 <a name="1"></a>        try {
96       lockA.lock();
97       <font color="#f63526"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>fail("Expected PotentialDeadlockException");
98     } catch (PotentialDeadlockException expected) {
99       checkMessage(expected, "LockC -&gt; LockA", "LockB -&gt; LockC", "LockA -&gt; LockB");
100     }
101   }
102   public void testReentranc</b></font>y_noDeadlock() {
103     lockA.lock();
104     lockB.lock();
105     lockA.lock();   }
106   public void testExplicitOrdering_noViolations() {
107     lock1.lock();
108     lock3.lock();
109     lock3.unlock();
110     lock2.lock();
111     lock3.lock();
112   }
113   public void testExplicitOrdering_violations() {
114     lock3.lock();
115     try {
116       lock2.lock();
117       fail("Expected PotentialDeadlockException");
118     } catch (PotentialDeadlockException expected) {
119       checkMessage(expected, "MyOrder.THIRD -&gt; MyOrder.SECOND");
120     }
121     try {
122       lock1.lock();
123       fail("Expected PotentialDeadlockException");
124     } catch (PotentialDeadlockException expected) {
125       checkMessage(expected, "MyOrder.THIRD -&gt; MyOrder.FIRST");
126     }
127     lock3.unlock();
128     lock2.lock();
129     try {
130       lock1.lock();
131       fail("Expected PotentialDeadlockException");
132     } catch (PotentialDeadlockException expected) {
133       checkMessage(expected, "MyOrder.SECOND -&gt; MyOrder.FIRST");
134     }
135   }
136   public void testDifferentOrderings_noViolations() {
137     lock3.lock();     lock01.lock();   }
138   public void testExplicitOrderings_generalCycleDetection() {
139     lock3.lock();     lock01.lock(); 
140     lock3.unlock();
141     try {
142       lock3.lock();
143       fail("Expected PotentialDeadlockException");
144     } catch (PotentialDeadlockException expected) {
145       checkMessage(
146           expected, "OtherOrder.FIRST -&gt; MyOrder.THIRD", "MyOrder.THIRD -&gt; OtherOrder.FIRST");
147     }
148     lockA.lock();
149     lock01.unlock();
150     lockB.lock();
151     lockA.unlock();
152     try {
153       lock01.lock();
154       fail("Expected PotentialDeadlockException");
155     } catch (PotentialDeadlockException expected) {
156       checkMessage(
157           expected, "LockB -&gt; OtherOrder.FIRST", "LockA -&gt; LockB", "OtherOrder.FIRST -&gt; LockA");
158     }
159   }
160   public void testExplicitOrdering_cycleWithUnorderedLock() {
161     Lock myLock = CycleDetectingLockFactory.newInstance(Policies.THROW).newReentrantLock("MyLock");
162     lock03.lock();
163     myLock.lock();
164     lock03.unlock();
165     try {
166       lock01.lock();
167       fail("Expected PotentialDeadlockException");
168     } catch (PotentialDeadlockException expected) {
169       checkMessage(
170           expected,
171           "MyLock -&gt; OtherOrder.FIRST",
172           "OtherOrder.THIRD -&gt; MyLock",
173           "OtherOrder.FIRST -&gt; OtherOrder.THIRD");
174     }
175   }
176   public void testExplicitOrdering_reentrantAcquisition() {
177     CycleDetectingLockFactory.WithExplicitOrdering&lt;OtherOrder&gt; factory =
178         newInstanceWithExplicitOrdering(OtherOrder.class, Policies.THROW);
179     Lock lockA = factory.newReentrantReadWriteLock(OtherOrder.FIRST).readLock();
180     Lock lockB = factory.newReentrantLock(OtherOrder.SECOND);
181     lockA.lock();
182     lockA.lock();
183     lockB.lock();
184     lockB.lock();
185     lockA.unlock();
186     lockA.unlock();
187     lockB.unlock();
188     lockB.unlock();
189   }
190   public void testExplicitOrdering_acquiringMultipleLocksWithSameRank() {
191     CycleDetectingLockFactory.WithExplicitOrdering&lt;OtherOrder&gt; factory =
192         newInstanceWithExplicitOrdering(OtherOrder.class, Policies.THROW);
193     Lock lockA = factory.newReentrantLock(OtherOrder.FIRST);
194     Lock lockB = factory.newReentrantReadWriteLock(OtherOrder.FIRST).readLock();
195     lockA.lock();
196     try {
197       lockB.lock();
198       fail("Expected IllegalStateException");
199     } catch (IllegalStateException expected) {
200     }
201     lockA.unlock();
202     lockB.lock();
203   }
204   public void testReadLock_deadlock() {
205     readLockA.lock();     lockB.lock();
206     lockB.unlock();
207     readLockA.unlock();
208     lockB.lock();
209     try {
210       readLockA.lock();
211       fail("Expected PotentialDeadlockException");
212     } catch (PotentialDeadlockException expected) {
213       checkMessage(expected, "LockB -&gt; ReadWriteA", "ReadWriteA -&gt; LockB");
214     }
215   }
216   public void testReadLock_transitive() {
217     readLockA.lock();     lockB.lock();
218     lockB.unlock();
219     readLockA.unlock();
220     lockB.lock();
221     readLockC.lock();
222     lockB.unlock();
223     readLockC.unlock();
224     readLockC.lock();
225     try {
226       readLockA.lock();
227       fail("Expected PotentialDeadlockException");
228     } catch (PotentialDeadlockException expected) {
229       checkMessage(
230           expected, "ReadWriteC -&gt; ReadWriteA", "LockB -&gt; ReadWriteC", "ReadWriteA -&gt; LockB");
231     }
232   }
233   public void testWriteLock_threeLockDeadLock() {
234     writeLockA.lock();
235     writeLockB.lock();
236     writeLockB.unlock();
237     writeLockA.unlock();
238     writeLockB.lock();
239     writeLockC.lock();
240     writeLockB.unlock();
241     try {
242       writeLockA.lock();
243       fail("Expected PotentialDeadlockException");
244     } catch (PotentialDeadlockException expected) {
245       checkMessage(
246           expected,
247           "ReadWriteC -&gt; ReadWriteA",
248           "ReadWriteB -&gt; ReadWriteC",
249           "ReadWriteA -&gt; ReadWriteB");
250     }
251   }
252   public void testWriteToReadLockDowngrading() {
253     writeLockA.lock();     readLockA.lock();
254     writeLockA.unlock();
255     lockB.lock();     readLockA.unlock();
256     try {
257       writeLockA.lock();
258       fail("Expected PotentialDeadlockException");
259     } catch (PotentialDeadlockException expected) {
260       checkMessage(expected, "LockB -&gt; ReadWriteA", "ReadWriteA -&gt; LockB");
261     }
262   }
263   public void testReadWriteLockDeadlock() {
264     writeLockA.lock();     lockB.lock();
265     writeLockA.unlock();
266     lockB.unlock();
267     lockB.lock();
268     try {
269       readLockA.lock();
270       fail("Expected PotentialDeadlockException");
271     } catch (PotentialDeadlockException expected) {
272       checkMessage(expected, "LockB -&gt; ReadWriteA", "ReadWriteA -&gt; LockB");
273     }
274   }
275   public void testReadWriteLockDeadlock_transitive() {
276     readLockA.lock();     lockB.lock();
277     readLockA.unlock();
278     lockB.unlock();
279     lockB.lock();
280     lockC.lock();
281     lockB.unlock();
282     lockC.unlock();
283     lockC.lock();
284     try {
285       writeLockA.lock();
286       fail("Expected PotentialDeadlockException");
287     } catch (PotentialDeadlockException expected) {
288       checkMessage(expected, "LockC -&gt; ReadWriteA", "LockB -&gt; LockC", "ReadWriteA -&gt; LockB");
289     }
290   }
291   public void testReadWriteLockDeadlock_treatedEquivalently() {
292     readLockA.lock();     writeLockB.lock();
293     readLockA.unlock();
294     writeLockB.unlock();
295     readLockB.lock();
296     try {
297       writeLockA.lock();
298       fail("Expected PotentialDeadlockException");
299     } catch (PotentialDeadlockException expected) {
300       checkMessage(expected, "ReadWriteB -&gt; ReadWriteA", "ReadWriteA -&gt; ReadWriteB");
301     }
302   }
303   public void testDifferentLockFactories() {
304     CycleDetectingLockFactory otherFactory = CycleDetectingLockFactory.newInstance(Policies.WARN);
305     ReentrantLock lockD = otherFactory.newReentrantLock("LockD");
306     lockA.lock();
307     lockD.lock();
308     lockA.unlock();
309     lockD.unlock();
310     lockD.lock();
311     try {
312       lockA.lock();
313       fail("Expected PotentialDeadlockException");
314     } catch (PotentialDeadlockException expected) {
315       checkMessage(expected, "LockD -&gt; LockA", "LockA -&gt; LockD");
316     }
317   }
318   public void testDifferentLockFactories_policyExecution() {
319     CycleDetectingLockFactory otherFactory = CycleDetectingLockFactory.newInstance(Policies.WARN);
320     ReentrantLock lockD = otherFactory.newReentrantLock("LockD");
321     lockD.lock();
322     lockA.lock();
323     lockA.unlock();
324     lockD.unlock();
325     lockA.lock();
326     lockD.lock();
327   }
328   public void testReentrantLock_tryLock() throws Exception {
329     LockingThread thread = new LockingThread(lockA);
330     thread.start();
331     thread.waitUntilHoldingLock();
332     assertFalse(lockA.tryLock());
333     thread.releaseLockAndFinish();
334     assertTrue(lockA.tryLock());
335   }
336   public void testReentrantWriteLock_tryLock() throws Exception {
337     LockingThread thread = new LockingThread(writeLockA);
338     thread.start();
339     thread.waitUntilHoldingLock();
340     assertFalse(writeLockA.tryLock());
341     assertFalse(readLockA.tryLock());
342     thread.releaseLockAndFinish();
343     assertTrue(writeLockA.tryLock());
344     assertTrue(readLockA.tryLock());
345   }
346   public void testReentrantReadLock_tryLock() throws Exception {
347     LockingThread thread = new LockingThread(readLockA);
348     thread.start();
349     thread.waitUntilHoldingLock();
350     assertFalse(writeLockA.tryLock());
351     assertTrue(readLockA.tryLock());
352     readLockA.unlock();
353     thread.releaseLockAndFinish();
354     assertTrue(writeLockA.tryLock());
355     assertTrue(readLockA.tryLock());
356   }
357   private static class LockingThread extends Thread {
358     final CountDownLatch locked = new CountDownLatch(1);
359     final CountDownLatch finishLatch = new CountDownLatch(1);
360     final Lock lock;
361     LockingThread(Lock lock) {
362       this.lock = lock;
363     }
364     @Override
365     public void run() {
366       lock.lock();
367       try {
368         locked.countDown();
369         finishLatch.await(1, TimeUnit.MINUTES);
370       } catch (InterruptedException e) {
371         fail(e.toString());
372       } finally {
373         lock.unlock();
374       }
375     }
376     void waitUntilHoldingLock() throws InterruptedException {
377       locked.await(1, TimeUnit.MINUTES);
378     }
379     void releaseLockAndFinish() throws InterruptedException {
380       finishLatch.countDown();
381       this.join(10000);
382       assertFalse(this.isAlive());
383     }
384   }
385   public void testReentrantReadWriteLock_implDoesNotExposeShadowedLocks() {
386     assertEquals(
387         "Unexpected number of public methods in ReentrantReadWriteLock. "
388             + "The correctness of CycleDetectingReentrantReadWriteLock depends on "
389             + "the fact that the shadowed ReadLock and WriteLock are never used or "
390             + "exposed by the superclass implementation. If the implementation has "
391             + "changed, the code must be re-inspected to ensure that the "
392             + "assumption is still valid.",
393         24,
394         ReentrantReadWriteLock.class.getMethods().length);
395   }
396   private enum MyOrder {
397     FIRST,
398     SECOND,
399     THIRD;
400   }
401   private enum OtherOrder {
402     FIRST,
403     SECOND,
404     THIRD;
405   }
406   private void checkMessage(IllegalStateException exception, String... expectedLockCycle) {
407     String regex = Joiner.on("\\b.*\\b").join(expectedLockCycle);
408     assertContainsRegex(regex, exception.getMessage());
409   }
410   private static void assertContainsRegex(String expectedRegex, String actual) {
411     Pattern pattern = Pattern.compile(expectedRegex);
412     Matcher matcher = pattern.matcher(actual);
413     if (!matcher.find()) {
414       String actualDesc = (actual == null) ? "null" : ('&lt;' + actual + '&gt;');
415       fail("expected to contain regex:&lt;" + expectedRegex + "&gt; but was:" + actualDesc);
416     }
417   }
418 }
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
