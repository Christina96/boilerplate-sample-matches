
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Tokens: 18, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>ribbon-MDEwOlJlcG9zaXRvcnk3NjE2MTU4-flat-SecureGetTest.java</h3>
            <pre><code>1  package com.netflix.niws.client.http;
2  import static org.junit.Assert.assertEquals;
3  import static org.junit.Assert.assertTrue;
4  import static org.junit.Assert.fail;
5  import java.io.File;
6  import java.io.FileOutputStream;
7  import java.net.URI;
8  import org.apache.commons.configuration.AbstractConfiguration;
9  import org.junit.AfterClass;
10  import org.junit.BeforeClass;
11  import org.junit.Test;
12  import com.netflix.client.ClientFactory;
13  import com.netflix.client.config.CommonClientConfigKey;
14  import com.netflix.client.http.HttpRequest;
15  import com.netflix.client.http.HttpResponse;
16  import com.netflix.client.testutil.SimpleSSLTestServer;
17  import com.netflix.config.ConfigurationManager;
18  import com.sun.jersey.api.client.ClientHandlerException;
19  import com.sun.jersey.core.util.Base64;
20  import com.sun.jersey.core.util.MultivaluedMapImpl;
21  public class SecureGetTest {
22  	public static final String TEST_TS1 =
23  			"/u3+7QAAAAIAAAABAAAAAgALcmliYm9uX3Jvb3QAAAFA9E6KkQAFWC41MDkAAAIyMIICLjCCAZeg" +
24  					"AwIBAgIBATANBgkqhkiG9w0BAQUFADBTMRgwFgYDVQQDDA9SaWJib25UZXN0Um9vdDExCzAJBgNV" +
25  					"BAsMAklUMRAwDgYDVQQKDAdOZXRmbGl4MQswCQYDVQQIDAJDQTELMAkGA1UEBhMCVVMwIBcNMTMw" +
26  					"OTA2MTcyNTIyWhgPMjExMzA4MTMxNzI1MjJaMFMxGDAWBgNVBAMMD1JpYmJvblRlc3RSb290MTEL" +
27  					"MAkGA1UECwwCSVQxEDAOBgNVBAoMB05ldGZsaXgxCzAJBgNVBAgMAkNBMQswCQYDVQQGEwJVUzCB" +
28  					"nzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAg8riOgT2Y39SQlZE+MWnOiKjREZzQ3ecvPf40oF8" +
29  					"9YPNGpBhJzIKdA0TR1vQ70p3Fl2+Y5txs1H2/iguOdFMBrSdv1H8qJG1UufaeYO++HBm3Mi2L02F" +
30  					"6fcTEEyXQMebKCWf04mxvLy5M6B5yMqZ9rHEZD+qsF4rXspx70bd0tUCAwEAAaMQMA4wDAYDVR0T" +
31  					"BAUwAwEB/zANBgkqhkiG9w0BAQUFAAOBgQBzTEn9AZniODYSRa+N7IvZu127rh+Sc6XWth68TBRj" +
32  					"hThDFARnGxxe2d3EFXB4xH7qcvLl3HQ3U6lIycyLabdm06D3/jzu68mkMToE5sHJmrYNHHTVl0aj" +
33  					"0gKFBQjLRJRlgJ3myUbbfrM+/a5g6S90TsVGTxXwFn5bDvdErsn8F8Hd41plMkW5ywsn6yFZMaFr" +
34  					"MxnX";
35  	public static final String TEST_TS2 =
36  			"/u3+7QAAAAIAAAABAAAAAgALcmliYm9uX3Jvb3QAAAFA9E92vgAFWC41MDkAAAIyMIICLjCCAZeg" +
37  					"AwIBAgIBATANBgkqhkiG9w0BAQUFADBTMRgwFgYDVQQDDA9SaWJib25UZXN0Um9vdDIxCzAJBgNV" +
38  					"BAsMAklUMRAwDgYDVQQKDAdOZXRmbGl4MQswCQYDVQQIDAJDQTELMAkGA1UEBhMCVVMwIBcNMTMw" +
39  					"OTA2MTcyNjIyWhgPMjExMzA4MTMxNzI2MjJaMFMxGDAWBgNVBAMMD1JpYmJvblRlc3RSb290MjEL" +
40  					"MAkGA1UECwwCSVQxEDAOBgNVBAoMB05ldGZsaXgxCzAJBgNVBAgMAkNBMQswCQYDVQQGEwJVUzCB" +
41  					"nzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAnEwAfuHYKRJviVB3RyV3+/mp4qjWZZd/q+fE2Z0k" +
42  					"o2N2rrC8fAw53KXwGOE5fED6wXd3B2zyoSFHVsWOeL+TUoohn+eHSfwH7xK+0oWC8IvUoXWehOft" +
43  					"grYtv9Jt5qNY5SmspBmyxFiaiAWQJYuf12Ycu4Gqg+P7mieMHgu6Do0CAwEAAaMQMA4wDAYDVR0T" +
44  					"BAUwAwEB/zANBgkqhkiG9w0BAQUFAAOBgQBNA0ask9eTYYhYA3bbmQZInxkBV74Gq/xorLlVygjn" +
45  					"OgyGYp4/L274qwlPMqnQRmVbezkug2YlUK8xbrjwCUvHq2XW38e2RjK5q3EXVkGJxgCBuHug/eIf" +
46  					"wD+/IEIE8aVkTW2j1QrrdkXDhRO5OsjvIVdy5/V4U0hVDnSo865ud9VQ/hZmOQuZItHViSoGSe2j" +
47  					"bbZk";
48  	public static final String TEST_KS1 =
49  			"/u3+7QAAAAIAAAABAAAAAQAKcmliYm9uX2tleQAAAUD0Toq4AAACuzCCArcwDgYKKwYBBAEqAhEB" +
50  					"AQUABIICo9fLN8zeXLcyx50+6B6gdXiUslZKY0SgLwL8kKNlQFiccD3Oc1yWjMnVC2QOdLsFzcVk" +
51  					"ROhgMH/nHfFeXFlvY5IYMXqhbEC37LjE52RtX5KHv4FLYxxZCHduAwO8UTPa603XzrJ0VTMJ6Hso" +
52  					"9+Ql76cGxPtIPcYm8IfqIY22as3NlKO4eMbiur9GLvuC57eql8vROaxGy8y657gc6kZMUyQOC+HG" +
53  					"a5M3DTFpjl4V6HHbXHhMNEk9eXHnrZwYVOJmOgdgIrNNHOyD4kE+k21C7rUHhLAwK84wKL/tW4k9" +
54  					"xnhOJK/L1RmycRIFWwXVi3u/3vi49bzdZsRLn73MdQkTe5p8oNZzG9sxg76u67ua6+99TMZYE1ay" +
55  					"5JCYgbr85KbRsoX9Hd5XBcSNzROKJl0To2tAF8eTTMRlhEy7JZyTF2M9877juNaregVwE3Tp+a/J" +
56  					"ACeNMyrxOQItNDam7a5dgBohpM8oJdEFqqj/S9BU7H5sR0XYo8TyIe1BV9zR5ZC/23fj5l5zkrri" +
57  					"TCMgMbvt95JUGOT0gSzxBMmhV+ZLxpmVz3M5P2pXX0DXGTKfuHSiBWrh1GAQL4BOVpuKtyXlH1/9" +
58  					"55/xY25W0fpLzMiQJV7jf6W69LU0FAFWFH9uuwf/sFph0S1QQXcQSfpYmWPMi1gx/IgIbvT1xSuI" +
59  					"6vajgFqv6ctiVbFAJ6zmcnGd6e33+Ao9pmjs5JPZP3rtAYd6+PxtlwUbGLZuqIVK4o68LEISDfvm" +
60  					"nGlk4/1+S5CILKVqTC6Ja8ojwUjjsNSJbZwHue3pOkmJQUNtuK6kDOYXgiMRLURbrYLyen0azWw8" +
61  					"C5/nPs5J4pN+irD/hhD6cupCnUJmzMw30u8+LOCN6GaM5fdCTQ2uQKF7quYuD+gR3lLNOqq7KAAA" +
62  					"AAEABVguNTA5AAACJTCCAiEwggGKoAMCAQICAWQwDQYJKoZIhvcNAQEFBQAwUzEYMBYGA1UEAwwP" +
63  					"UmliYm9uVGVzdFJvb3QxMQswCQYDVQQLDAJJVDEQMA4GA1UECgwHTmV0ZmxpeDELMAkGA1UECAwC" +
64  					"Q0ExCzAJBgNVBAYTAlVTMCAXDTEzMDkwNjE3MjUyMloYDzIxMTMwODEzMTcyNTIyWjBYMR0wGwYD" +
65  					"VQQDDBRSaWJib25UZXN0RW5kRW50aXR5MTELMAkGA1UECwwCSVQxEDAOBgNVBAoMB05ldGZsaXgx" +
66  					"CzAJBgNVBAgMAkNBMQswCQYDVQQGEwJVUzCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAydqk" +
67  					"AJuUcSF8dpUbNJWl+G1usgHtEFEbOMm54N/ZqGC7iSYs6EXfeoEyiHrMw/hdCKACERq2vuiuqan8" +
68  					"h6z65/DXIiHUyykGb/Z4NK1I0aCQLZG4Ek3sERilILWyy2NRpjUrvqDPr/mQgymXqpuYhSD81jHx" +
69  					"F84AOpTrnGsY7/sCAwEAATANBgkqhkiG9w0BAQUFAAOBgQAjvtRKNhb1R6XIuWaOxJ0XDLine464" +
70  					"Ie7LDfkE/KB43oE4MswjRh7nR9q6C73oa6TlIXmW6ysyKPp0vAyWHlq/zZhL3gNQ6faHuYHqas5s" +
71  					"nJQgvQpHAQh4VXRyZt1K8ZdsHg3Qbd4APTL0aRVQkxDt+Dxd6AsoRMKmO/c5CRwUFIV/CK7k5VSh" +
72  					"Sl5PRtH3PVj2vp84";
73  	public static final String TEST_KS2 =
74  			"/u3+7QAAAAIAAAABAAAAAQAKcmliYm9uX2tleQAAAUD0T3bNAAACuzCCArcwDgYKKwYBBAEqAhEB" +
75  					"AQUABIICoysDP4inwmxxKZkS8EYMW3DCJCD1AmpwFHxJIzo2v9fMysg+vjKxsrvVyKG23ZcHcznI" +
76  					"ftmrEpriCCUZp+NNAf0EJWVAIzGenwrsd0+rI5I96gBOh9slJUzgucn7164R3XKNKk+VWcwGJRh+" +
77  					"IuHxVrwFN025pfhlBJXNGJg4ZlzB7ZwcQPYblBzhLbhS3vJ1Vc46pEYWpnjxmHaDSetaQIcueAp8" +
78  					"HnTUkFMXJ6t51N0u9QMPhBH7p7N8tNjaa5noSdxhSl/2Znj6r04NwQU1qX2n4rSWEnYaW1qOVkgx" +
79  					"YrQzxI2kSHZfQDM2T918UikboQvAS1aX4h5P3gVCDKLr3EOO6UYO0ZgLHUr/DZrhVKd1KAhnzaJ8" +
80  					"BABxot2ES7Zu5EzY9goiaYDA2/bkURmt0zDdKpeORb7r59XBZUm/8D80naaNnE45W/gBA9bCiDu3" +
81  					"R99xie447c7ZX9Jio25yil3ncv+npBO1ozc5QIgQnbEfxbbwii3
82  					"2HDpCTXJZNucyjnNVVxC7p1ANNnvvZhgC0+GpEqmf/BW+fb9Qu+AXe0/h4Vnoe/Zs92vPDehpaKy" +
83  					"oe+jBlUNiW2bpR88DSqxVcIu1DemlgzPa1Unzod0FdrOr/272bJnB2zAo4OBaBSv3KNf/rsMKjsU" +
84  					"X2Po77+S+PKoQkqd8KJFpmLEb0vxig9JsrTDJXLf4ebeSA1W7+mBotimMrp646PA3NciMSbS4csh" +
85  					"A7o/dBYhHlEosVgThm1JknIKhemf+FZsOzR3bJDT1oXJ/GhYpfzlCLyVFBeVP0KRnhih4xO0MEO7" +
86  					"Q21DBaTTqAvUo7Iv3/F3mGMOanLcLgoRoq3moQ7FhfCDRtRAPA1qT2+pxPG5wqlGeYc6McOvogAA" +
87  					"AAEABVguNTA5AAACJTCCAiEwggGKoAMCAQICAWQwDQYJKoZIhvcNAQEFBQAwUzEYMBYGA1UEAwwP" +
88  					"UmliYm9uVGVzdFJvb3QyMQswCQYDVQQLDAJJVDEQMA4GA1UECgwHTmV0ZmxpeDELMAkGA1UECAwC" +
89  					"Q0ExCzAJBgNVBAYTAlVTMCAXDTEzMDkwNjE3MjYyMloYDzIxMTMwODEzMTcyNjIyWjBYMR0wGwYD" +
90  					"VQQDDBRSaWJib25UZXN0RW5kRW50aXR5MjELMAkGA1UECwwCSVQxEDAOBgNVBAoMB05ldGZsaXgx" +
91  					"CzAJBgNVBAgMAkNBMQswCQYDVQQGEwJVUzCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAtOvK" +
92  					"fBMC/oMo4xf4eYGN7hTNn+IywaSaVYndqECIfuznoIqRKSbeCKPSGs4CN1D+u3E2UoXcsDmTguHU" +
93  					"fokDA7sLUu8wD5ndAXfCkP3gXlFtUpNz/jPaXDsMFntTn2BdLKccxRxNwtwC0zzwIdtx9pw/Ru0g" +
94  					"NXIQnPi50aql5WcCAwEAATANBgkqhkiG9w0BAQUFAAOBgQCYWM2ZdBjG3jCvMw/RkebMLkEDRxVM" +
95  					"XU63Ygo+iCZUk8V8d0/S48j8Nk/hhVGHljsHqE/dByEF77X6uHaDGtt3Xwe+AYPofoJukh89jKnT" +
96  					"jEDtLF+y5AVfz6b2z3TnJcuigMr4ZtBFv18R00KLnVAznl/waXG8ix44IL5ss6nRZBJE4jr+ZMG9" +
97  					"9I4P1YhySxo3Qd3g";
98  	private static String SERVICE_URI1;
99  	private static String SERVICE_URI2;
100  	private static SimpleSSLTestServer testServer1;
101  	private static SimpleSSLTestServer testServer2;
102  	private static File FILE_TS1;
103  	private static File FILE_KS1;
104  	private static File FILE_TS2;
105  	private static File FILE_KS2;
106  	public static final String PASSWORD = "changeit";
107  	@BeforeClass
108  	public static void init() throws Exception {
109  		byte[] sampleTruststore1 = Base64.decode(TEST_TS1);
110  		byte[] sampleKeystore1 = Base64.decode(TEST_KS1);
111  		FILE_KS1 = File.createTempFile("SecureGetTest1", ".keystore");
112  		FILE_TS1 = File.createTempFile("SecureGetTest1", ".truststore");
113  		FileOutputStream keystoreFileOut = new FileOutputStream(FILE_KS1);
114          try {
115              keystoreFileOut.write(sampleKeystore1);
116          } finally {
117              keystoreFileOut.close();
118          }
119  		FileOutputStream truststoreFileOut = new FileOutputStream(FILE_TS1);
120          try {
121              truststoreFileOut.write(sampleTruststore1);
122          } finally {
123              truststoreFileOut.close();
124          }
125  		try{
126  			testServer1 = new SimpleSSLTestServer(FILE_TS1, PASSWORD, FILE_KS1, PASSWORD, true);
127  		} catch (Exception e) {
128  			e.printStackTrace();
129  			fail(e.getMessage());
130  		}
<span onclick='openModal()' class='match'>131  		SERVICE_URI1 = "https:&bsol;&bsol;127.0.0.1:" + testServer1.getPort() + "/";
132  		byte[] sampleTruststore2 = Base64.decode(TEST_TS2);
133  		byte[] sampleKeystore2 = Base64.decode(TEST_KS2);
134  		FILE_KS2 = File.createTempFile("SecureGetTest2", ".keystore");
135  		FILE_TS2 = File.createTempFile("SecureGetTest2", ".truststore");
</span>136  		keystoreFileOut = new FileOutputStream(FILE_KS2);
137          try {
138              keystoreFileOut.write(sampleKeystore2);
139          } finally {
140              keystoreFileOut.close();
141          }
142  		truststoreFileOut = new FileOutputStream(FILE_TS2);
143          try {
144              truststoreFileOut.write(sampleTruststore2);
145          } finally {
146              truststoreFileOut.close();
147          }
148  		try{
149  			testServer2 = new SimpleSSLTestServer(FILE_TS2, PASSWORD, FILE_KS2, PASSWORD, false);
150  		} catch (Exception e) {
151  			e.printStackTrace();
152  			fail(e.getMessage());
153  		}
154  		SERVICE_URI2 = "https:&bsol;&bsol;127.0.0.1:" + testServer2.getPort() + "/";
155  	}
156  	@AfterClass
157  	public static void shutDown(){
158  		try{
159  			testServer1.close();
160  		}catch(Exception e){
161  			e.printStackTrace();
162  		}
163  		try{
164  			testServer2.close();
165  		}catch(Exception e){
166  			e.printStackTrace();
167  		}
168  	}
169  	@Test
170  	public void testSunnyDay() throws Exception {
171  		AbstractConfiguration cm = ConfigurationManager.getConfigInstance();
172  		String name = "GetPostSecureTest" + ".testSunnyDay";
173  		String configPrefix = name + "." + "ribbon";
174  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.IsSecure, "true");
175  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.SecurePort, Integer.toString(testServer1.getPort()));
176  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.IsHostnameValidationRequired, "false");
177  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.IsClientAuthRequired, "true");
178  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.KeyStore, FILE_KS1.getAbsolutePath());
179  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.KeyStorePassword, PASSWORD);
180  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.TrustStore, FILE_TS1.getAbsolutePath());
181  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.TrustStorePassword, PASSWORD);
182  		RestClient rc = (RestClient) ClientFactory.getNamedClient(name);
183  		testServer1.accept();
184  		URI getUri = new URI(SERVICE_URI1 + "test/");
185          HttpRequest request = HttpRequest.newBuilder().uri(getUri).queryParams("name", "test").build();
186  		HttpResponse response = rc.execute(request);
187  		assertEquals(200, response.getStatus());
188  	}
189  	@Test
190  	public void testSunnyDayNoClientAuth() throws Exception{
191  		AbstractConfiguration cm = ConfigurationManager.getConfigInstance();
192  		String name = "GetPostSecureTest" + ".testSunnyDayNoClientAuth";
193  		String configPrefix = name + "." + "ribbon";
194  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.IsSecure, "true");
195  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.SecurePort, Integer.toString(testServer2.getPort()));
196  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.IsHostnameValidationRequired, "false");
197  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.TrustStore, FILE_TS2.getAbsolutePath());
198  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.TrustStorePassword, PASSWORD);
199  		RestClient rc = (RestClient) ClientFactory.getNamedClient(name);
200  		testServer2.accept();
201  		URI getUri = new URI(SERVICE_URI2 + "test/");
202          HttpRequest request = HttpRequest.newBuilder().uri(getUri).queryParams("name", "test").build();
203  		HttpResponse response = rc.execute(request);
204  		assertEquals(200, response.getStatus());
205  	}
206  	@Test
207  	public void testFailsWithHostNameValidationOn() throws Exception {
208  		AbstractConfiguration cm = ConfigurationManager.getConfigInstance();
209  		String name = "GetPostSecureTest" + ".testFailsWithHostNameValidationOn";
210  		String configPrefix = name + "." + "ribbon";
211  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.IsSecure, "true");
212  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.SecurePort, Integer.toString(testServer2.getPort()));
213  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.IsHostnameValidationRequired, "true"); 
214  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.IsClientAuthRequired, "true");
215  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.KeyStore, FILE_KS1.getAbsolutePath());
216  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.KeyStorePassword, PASSWORD);
217  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.TrustStore, FILE_TS1.getAbsolutePath());
218  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.TrustStorePassword, PASSWORD);
219  		RestClient rc = (RestClient) ClientFactory.getNamedClient(name);
220  		testServer1.accept();
221  		URI getUri = new URI(SERVICE_URI1 + "test/");
222  		MultivaluedMapImpl params = new MultivaluedMapImpl();
223  		params.add("name", "test");
224          HttpRequest request = HttpRequest.newBuilder().uri(getUri).queryParams("name", "test").build();
225  		try{
226  			rc.execute(request);
227  			fail("expecting ssl hostname validation error");
228  		}catch(ClientHandlerException che){
229  			assertTrue(che.getMessage().indexOf("hostname in certificate didn't match") > -1);
230  		}
231  	}
232  	@Test
233  	public void testClientRejectsWrongServer() throws Exception{
234  		AbstractConfiguration cm = ConfigurationManager.getConfigInstance();
235  		String name = "GetPostSecureTest" + ".testClientRejectsWrongServer";
236  		String configPrefix = name + "." + "ribbon";
237  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.IsSecure, "true");
238  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.SecurePort, Integer.toString(testServer2.getPort()));
239  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.IsHostnameValidationRequired, "false");
240  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.TrustStore, FILE_TS1.getAbsolutePath()); 
241  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.TrustStorePassword, PASSWORD);
242  		RestClient rc = (RestClient) ClientFactory.getNamedClient(name);
243  		testServer2.accept();
244  		URI getUri = new URI(SERVICE_URI2 + "test/");
245  		HttpRequest request = HttpRequest.newBuilder().uri(getUri).queryParams("name", "test").build();
246  		try{
247  			rc.execute(request);
248  			fail("expecting ssl hostname validation error");
249  		}catch(ClientHandlerException che){
250  			assertTrue(che.getMessage().indexOf("peer not authenticated") > -1);
251  		}
252  	}
253  }
</code></pre>
        </div>
        <div class="column">
            <h3>ribbon-MDEwOlJlcG9zaXRvcnk3NjE2MTU4-flat-SecureGetTest.java</h3>
            <pre><code>1  package com.netflix.niws.client.http;
2  import static org.junit.Assert.assertEquals;
3  import static org.junit.Assert.assertTrue;
4  import static org.junit.Assert.fail;
5  import java.io.File;
6  import java.io.FileOutputStream;
7  import java.net.URI;
8  import org.apache.commons.configuration.AbstractConfiguration;
9  import org.junit.AfterClass;
10  import org.junit.BeforeClass;
11  import org.junit.Test;
12  import com.netflix.client.ClientFactory;
13  import com.netflix.client.config.CommonClientConfigKey;
14  import com.netflix.client.http.HttpRequest;
15  import com.netflix.client.http.HttpResponse;
16  import com.netflix.client.testutil.SimpleSSLTestServer;
17  import com.netflix.config.ConfigurationManager;
18  import com.sun.jersey.api.client.ClientHandlerException;
19  import com.sun.jersey.core.util.Base64;
20  import com.sun.jersey.core.util.MultivaluedMapImpl;
21  public class SecureGetTest {
22  	public static final String TEST_TS1 =
23  			"/u3+7QAAAAIAAAABAAAAAgALcmliYm9uX3Jvb3QAAAFA9E6KkQAFWC41MDkAAAIyMIICLjCCAZeg" +
24  					"AwIBAgIBATANBgkqhkiG9w0BAQUFADBTMRgwFgYDVQQDDA9SaWJib25UZXN0Um9vdDExCzAJBgNV" +
25  					"BAsMAklUMRAwDgYDVQQKDAdOZXRmbGl4MQswCQYDVQQIDAJDQTELMAkGA1UEBhMCVVMwIBcNMTMw" +
26  					"OTA2MTcyNTIyWhgPMjExMzA4MTMxNzI1MjJaMFMxGDAWBgNVBAMMD1JpYmJvblRlc3RSb290MTEL" +
27  					"MAkGA1UECwwCSVQxEDAOBgNVBAoMB05ldGZsaXgxCzAJBgNVBAgMAkNBMQswCQYDVQQGEwJVUzCB" +
28  					"nzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAg8riOgT2Y39SQlZE+MWnOiKjREZzQ3ecvPf40oF8" +
29  					"9YPNGpBhJzIKdA0TR1vQ70p3Fl2+Y5txs1H2/iguOdFMBrSdv1H8qJG1UufaeYO++HBm3Mi2L02F" +
30  					"6fcTEEyXQMebKCWf04mxvLy5M6B5yMqZ9rHEZD+qsF4rXspx70bd0tUCAwEAAaMQMA4wDAYDVR0T" +
31  					"BAUwAwEB/zANBgkqhkiG9w0BAQUFAAOBgQBzTEn9AZniODYSRa+N7IvZu127rh+Sc6XWth68TBRj" +
32  					"hThDFARnGxxe2d3EFXB4xH7qcvLl3HQ3U6lIycyLabdm06D3/jzu68mkMToE5sHJmrYNHHTVl0aj" +
33  					"0gKFBQjLRJRlgJ3myUbbfrM+/a5g6S90TsVGTxXwFn5bDvdErsn8F8Hd41plMkW5ywsn6yFZMaFr" +
34  					"MxnX";
35  	public static final String TEST_TS2 =
36  			"/u3+7QAAAAIAAAABAAAAAgALcmliYm9uX3Jvb3QAAAFA9E92vgAFWC41MDkAAAIyMIICLjCCAZeg" +
37  					"AwIBAgIBATANBgkqhkiG9w0BAQUFADBTMRgwFgYDVQQDDA9SaWJib25UZXN0Um9vdDIxCzAJBgNV" +
38  					"BAsMAklUMRAwDgYDVQQKDAdOZXRmbGl4MQswCQYDVQQIDAJDQTELMAkGA1UEBhMCVVMwIBcNMTMw" +
39  					"OTA2MTcyNjIyWhgPMjExMzA4MTMxNzI2MjJaMFMxGDAWBgNVBAMMD1JpYmJvblRlc3RSb290MjEL" +
40  					"MAkGA1UECwwCSVQxEDAOBgNVBAoMB05ldGZsaXgxCzAJBgNVBAgMAkNBMQswCQYDVQQGEwJVUzCB" +
41  					"nzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAnEwAfuHYKRJviVB3RyV3+/mp4qjWZZd/q+fE2Z0k" +
42  					"o2N2rrC8fAw53KXwGOE5fED6wXd3B2zyoSFHVsWOeL+TUoohn+eHSfwH7xK+0oWC8IvUoXWehOft" +
43  					"grYtv9Jt5qNY5SmspBmyxFiaiAWQJYuf12Ycu4Gqg+P7mieMHgu6Do0CAwEAAaMQMA4wDAYDVR0T" +
44  					"BAUwAwEB/zANBgkqhkiG9w0BAQUFAAOBgQBNA0ask9eTYYhYA3bbmQZInxkBV74Gq/xorLlVygjn" +
45  					"OgyGYp4/L274qwlPMqnQRmVbezkug2YlUK8xbrjwCUvHq2XW38e2RjK5q3EXVkGJxgCBuHug/eIf" +
46  					"wD+/IEIE8aVkTW2j1QrrdkXDhRO5OsjvIVdy5/V4U0hVDnSo865ud9VQ/hZmOQuZItHViSoGSe2j" +
47  					"bbZk";
48  	public static final String TEST_KS1 =
49  			"/u3+7QAAAAIAAAABAAAAAQAKcmliYm9uX2tleQAAAUD0Toq4AAACuzCCArcwDgYKKwYBBAEqAhEB" +
50  					"AQUABIICo9fLN8zeXLcyx50+6B6gdXiUslZKY0SgLwL8kKNlQFiccD3Oc1yWjMnVC2QOdLsFzcVk" +
51  					"ROhgMH/nHfFeXFlvY5IYMXqhbEC37LjE52RtX5KHv4FLYxxZCHduAwO8UTPa603XzrJ0VTMJ6Hso" +
52  					"9+Ql76cGxPtIPcYm8IfqIY22as3NlKO4eMbiur9GLvuC57eql8vROaxGy8y657gc6kZMUyQOC+HG" +
53  					"a5M3DTFpjl4V6HHbXHhMNEk9eXHnrZwYVOJmOgdgIrNNHOyD4kE+k21C7rUHhLAwK84wKL/tW4k9" +
54  					"xnhOJK/L1RmycRIFWwXVi3u/3vi49bzdZsRLn73MdQkTe5p8oNZzG9sxg76u67ua6+99TMZYE1ay" +
55  					"5JCYgbr85KbRsoX9Hd5XBcSNzROKJl0To2tAF8eTTMRlhEy7JZyTF2M9877juNaregVwE3Tp+a/J" +
56  					"ACeNMyrxOQItNDam7a5dgBohpM8oJdEFqqj/S9BU7H5sR0XYo8TyIe1BV9zR5ZC/23fj5l5zkrri" +
57  					"TCMgMbvt95JUGOT0gSzxBMmhV+ZLxpmVz3M5P2pXX0DXGTKfuHSiBWrh1GAQL4BOVpuKtyXlH1/9" +
58  					"55/xY25W0fpLzMiQJV7jf6W69LU0FAFWFH9uuwf/sFph0S1QQXcQSfpYmWPMi1gx/IgIbvT1xSuI" +
59  					"6vajgFqv6ctiVbFAJ6zmcnGd6e33+Ao9pmjs5JPZP3rtAYd6+PxtlwUbGLZuqIVK4o68LEISDfvm" +
60  					"nGlk4/1+S5CILKVqTC6Ja8ojwUjjsNSJbZwHue3pOkmJQUNtuK6kDOYXgiMRLURbrYLyen0azWw8" +
61  					"C5/nPs5J4pN+irD/hhD6cupCnUJmzMw30u8+LOCN6GaM5fdCTQ2uQKF7quYuD+gR3lLNOqq7KAAA" +
62  					"AAEABVguNTA5AAACJTCCAiEwggGKoAMCAQICAWQwDQYJKoZIhvcNAQEFBQAwUzEYMBYGA1UEAwwP" +
63  					"UmliYm9uVGVzdFJvb3QxMQswCQYDVQQLDAJJVDEQMA4GA1UECgwHTmV0ZmxpeDELMAkGA1UECAwC" +
64  					"Q0ExCzAJBgNVBAYTAlVTMCAXDTEzMDkwNjE3MjUyMloYDzIxMTMwODEzMTcyNTIyWjBYMR0wGwYD" +
65  					"VQQDDBRSaWJib25UZXN0RW5kRW50aXR5MTELMAkGA1UECwwCSVQxEDAOBgNVBAoMB05ldGZsaXgx" +
66  					"CzAJBgNVBAgMAkNBMQswCQYDVQQGEwJVUzCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAydqk" +
67  					"AJuUcSF8dpUbNJWl+G1usgHtEFEbOMm54N/ZqGC7iSYs6EXfeoEyiHrMw/hdCKACERq2vuiuqan8" +
68  					"h6z65/DXIiHUyykGb/Z4NK1I0aCQLZG4Ek3sERilILWyy2NRpjUrvqDPr/mQgymXqpuYhSD81jHx" +
69  					"F84AOpTrnGsY7/sCAwEAATANBgkqhkiG9w0BAQUFAAOBgQAjvtRKNhb1R6XIuWaOxJ0XDLine464" +
70  					"Ie7LDfkE/KB43oE4MswjRh7nR9q6C73oa6TlIXmW6ysyKPp0vAyWHlq/zZhL3gNQ6faHuYHqas5s" +
71  					"nJQgvQpHAQh4VXRyZt1K8ZdsHg3Qbd4APTL0aRVQkxDt+Dxd6AsoRMKmO/c5CRwUFIV/CK7k5VSh" +
72  					"Sl5PRtH3PVj2vp84";
73  	public static final String TEST_KS2 =
74  			"/u3+7QAAAAIAAAABAAAAAQAKcmliYm9uX2tleQAAAUD0T3bNAAACuzCCArcwDgYKKwYBBAEqAhEB" +
75  					"AQUABIICoysDP4inwmxxKZkS8EYMW3DCJCD1AmpwFHxJIzo2v9fMysg+vjKxsrvVyKG23ZcHcznI" +
76  					"ftmrEpriCCUZp+NNAf0EJWVAIzGenwrsd0+rI5I96gBOh9slJUzgucn7164R3XKNKk+VWcwGJRh+" +
77  					"IuHxVrwFN025pfhlBJXNGJg4ZlzB7ZwcQPYblBzhLbhS3vJ1Vc46pEYWpnjxmHaDSetaQIcueAp8" +
78  					"HnTUkFMXJ6t51N0u9QMPhBH7p7N8tNjaa5noSdxhSl/2Znj6r04NwQU1qX2n4rSWEnYaW1qOVkgx" +
79  					"YrQzxI2kSHZfQDM2T918UikboQvAS1aX4h5P3gVCDKLr3EOO6UYO0ZgLHUr/DZrhVKd1KAhnzaJ8" +
80  					"BABxot2ES7Zu5EzY9goiaYDA2/bkURmt0zDdKpeORb7r59XBZUm/8D80naaNnE45W/gBA9bCiDu3" +
81  					"R99xie447c7ZX9Jio25yil3ncv+npBO1ozc5QIgQnbEfxbbwii3
82  					"2HDpCTXJZNucyjnNVVxC7p1ANNnvvZhgC0+GpEqmf/BW+fb9Qu+AXe0/h4Vnoe/Zs92vPDehpaKy" +
83  					"oe+jBlUNiW2bpR88DSqxVcIu1DemlgzPa1Unzod0FdrOr/272bJnB2zAo4OBaBSv3KNf/rsMKjsU" +
84  					"X2Po77+S+PKoQkqd8KJFpmLEb0vxig9JsrTDJXLf4ebeSA1W7+mBotimMrp646PA3NciMSbS4csh" +
85  					"A7o/dBYhHlEosVgThm1JknIKhemf+FZsOzR3bJDT1oXJ/GhYpfzlCLyVFBeVP0KRnhih4xO0MEO7" +
86  					"Q21DBaTTqAvUo7Iv3/F3mGMOanLcLgoRoq3moQ7FhfCDRtRAPA1qT2+pxPG5wqlGeYc6McOvogAA" +
87  					"AAEABVguNTA5AAACJTCCAiEwggGKoAMCAQICAWQwDQYJKoZIhvcNAQEFBQAwUzEYMBYGA1UEAwwP" +
88  					"UmliYm9uVGVzdFJvb3QyMQswCQYDVQQLDAJJVDEQMA4GA1UECgwHTmV0ZmxpeDELMAkGA1UECAwC" +
89  					"Q0ExCzAJBgNVBAYTAlVTMCAXDTEzMDkwNjE3MjYyMloYDzIxMTMwODEzMTcyNjIyWjBYMR0wGwYD" +
90  					"VQQDDBRSaWJib25UZXN0RW5kRW50aXR5MjELMAkGA1UECwwCSVQxEDAOBgNVBAoMB05ldGZsaXgx" +
91  					"CzAJBgNVBAgMAkNBMQswCQYDVQQGEwJVUzCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAtOvK" +
92  					"fBMC/oMo4xf4eYGN7hTNn+IywaSaVYndqECIfuznoIqRKSbeCKPSGs4CN1D+u3E2UoXcsDmTguHU" +
93  					"fokDA7sLUu8wD5ndAXfCkP3gXlFtUpNz/jPaXDsMFntTn2BdLKccxRxNwtwC0zzwIdtx9pw/Ru0g" +
94  					"NXIQnPi50aql5WcCAwEAATANBgkqhkiG9w0BAQUFAAOBgQCYWM2ZdBjG3jCvMw/RkebMLkEDRxVM" +
95  					"XU63Ygo+iCZUk8V8d0/S48j8Nk/hhVGHljsHqE/dByEF77X6uHaDGtt3Xwe+AYPofoJukh89jKnT" +
96  					"jEDtLF+y5AVfz6b2z3TnJcuigMr4ZtBFv18R00KLnVAznl/waXG8ix44IL5ss6nRZBJE4jr+ZMG9" +
97  					"9I4P1YhySxo3Qd3g";
98  	private static String SERVICE_URI1;
99  	private static String SERVICE_URI2;
100  	private static SimpleSSLTestServer testServer1;
101  	private static SimpleSSLTestServer testServer2;
102  	private static File FILE_TS1;
103  	private static File FILE_KS1;
104  	private static File FILE_TS2;
105  	private static File FILE_KS2;
106  	public static final String PASSWORD = "changeit";
107  	@BeforeClass
108  	public static void init() throws Exception {
109  		byte[] sampleTruststore1 = Base64.decode(TEST_TS1);
110  		byte[] sampleKeystore1 = Base64.decode(TEST_KS1);
111  		FILE_KS1 = File.createTempFile("SecureGetTest1", ".keystore");
112  		FILE_TS1 = File.createTempFile("SecureGetTest1", ".truststore");
113  		FileOutputStream keystoreFileOut = new FileOutputStream(FILE_KS1);
114          try {
115              keystoreFileOut.write(sampleKeystore1);
116          } finally {
117              keystoreFileOut.close();
118          }
119  		FileOutputStream truststoreFileOut = new FileOutputStream(FILE_TS1);
120          try {
121              truststoreFileOut.write(sampleTruststore1);
122          } finally {
123              truststoreFileOut.close();
124          }
125  		try{
126  			testServer1 = new SimpleSSLTestServer(FILE_TS1, PASSWORD, FILE_KS1, PASSWORD, true);
127  		} catch (Exception e) {
128  			e.printStackTrace();
129  			fail(e.getMessage());
130  		}
131  		SERVICE_URI1 = "https:&bsol;&bsol;127.0.0.1:" + testServer1.getPort() + "/";
132  		byte[] sampleTruststore2 = Base64.decode(TEST_TS2);
133  		byte[] sampleKeystore2 = Base64.decode(TEST_KS2);
134  		FILE_KS2 = File.createTempFile("SecureGetTest2", ".keystore");
135  		FILE_TS2 = File.createTempFile("SecureGetTest2", ".truststore");
136  		keystoreFileOut = new FileOutputStream(FILE_KS2);
137          try {
138              keystoreFileOut.write(sampleKeystore2);
139          } finally {
140              keystoreFileOut.close();
141          }
142  		truststoreFileOut = new FileOutputStream(FILE_TS2);
143          try {
144              truststoreFileOut.write(sampleTruststore2);
145          } finally {
146              truststoreFileOut.close();
147          }
148  		try{
149  			testServer2 = new SimpleSSLTestServer(FILE_TS2, PASSWORD, FILE_KS2, PASSWORD, false);
150  		} catch (Exception e) {
151  			e.printStackTrace();
152  			fail(e.getMessage());
153  		}
<span onclick='openModal()' class='match'>154  		SERVICE_URI2 = "https:&bsol;&bsol;127.0.0.1:" + testServer2.getPort() + "/";
155  	}
156  	@AfterClass
157  	public static void shutDown(){
158  		try{
159  			testServer1.close();
160  		}catch(Exception e){
161  			e.printStackTrace();
162  		}
163  		try{
164  			testServer2.close();
165  		}catch(Exception e){
166  			e.printStackTrace();
167  		}
168  	}
169  	@Test
170  	public void testSunnyDay() throws Exception {
171  		AbstractConfiguration cm = ConfigurationManager.getConfigInstance();
172  		String name = "GetPostSecureTest" + ".testSunnyDay";
173  		String configPrefix = name + "." + "ribbon";
</span>174  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.IsSecure, "true");
175  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.SecurePort, Integer.toString(testServer1.getPort()));
176  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.IsHostnameValidationRequired, "false");
177  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.IsClientAuthRequired, "true");
178  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.KeyStore, FILE_KS1.getAbsolutePath());
179  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.KeyStorePassword, PASSWORD);
180  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.TrustStore, FILE_TS1.getAbsolutePath());
181  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.TrustStorePassword, PASSWORD);
182  		RestClient rc = (RestClient) ClientFactory.getNamedClient(name);
183  		testServer1.accept();
184  		URI getUri = new URI(SERVICE_URI1 + "test/");
185          HttpRequest request = HttpRequest.newBuilder().uri(getUri).queryParams("name", "test").build();
186  		HttpResponse response = rc.execute(request);
187  		assertEquals(200, response.getStatus());
188  	}
189  	@Test
190  	public void testSunnyDayNoClientAuth() throws Exception{
191  		AbstractConfiguration cm = ConfigurationManager.getConfigInstance();
192  		String name = "GetPostSecureTest" + ".testSunnyDayNoClientAuth";
193  		String configPrefix = name + "." + "ribbon";
194  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.IsSecure, "true");
195  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.SecurePort, Integer.toString(testServer2.getPort()));
196  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.IsHostnameValidationRequired, "false");
197  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.TrustStore, FILE_TS2.getAbsolutePath());
198  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.TrustStorePassword, PASSWORD);
199  		RestClient rc = (RestClient) ClientFactory.getNamedClient(name);
200  		testServer2.accept();
201  		URI getUri = new URI(SERVICE_URI2 + "test/");
202          HttpRequest request = HttpRequest.newBuilder().uri(getUri).queryParams("name", "test").build();
203  		HttpResponse response = rc.execute(request);
204  		assertEquals(200, response.getStatus());
205  	}
206  	@Test
207  	public void testFailsWithHostNameValidationOn() throws Exception {
208  		AbstractConfiguration cm = ConfigurationManager.getConfigInstance();
209  		String name = "GetPostSecureTest" + ".testFailsWithHostNameValidationOn";
210  		String configPrefix = name + "." + "ribbon";
211  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.IsSecure, "true");
212  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.SecurePort, Integer.toString(testServer2.getPort()));
213  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.IsHostnameValidationRequired, "true"); 
214  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.IsClientAuthRequired, "true");
215  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.KeyStore, FILE_KS1.getAbsolutePath());
216  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.KeyStorePassword, PASSWORD);
217  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.TrustStore, FILE_TS1.getAbsolutePath());
218  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.TrustStorePassword, PASSWORD);
219  		RestClient rc = (RestClient) ClientFactory.getNamedClient(name);
220  		testServer1.accept();
221  		URI getUri = new URI(SERVICE_URI1 + "test/");
222  		MultivaluedMapImpl params = new MultivaluedMapImpl();
223  		params.add("name", "test");
224          HttpRequest request = HttpRequest.newBuilder().uri(getUri).queryParams("name", "test").build();
225  		try{
226  			rc.execute(request);
227  			fail("expecting ssl hostname validation error");
228  		}catch(ClientHandlerException che){
229  			assertTrue(che.getMessage().indexOf("hostname in certificate didn't match") > -1);
230  		}
231  	}
232  	@Test
233  	public void testClientRejectsWrongServer() throws Exception{
234  		AbstractConfiguration cm = ConfigurationManager.getConfigInstance();
235  		String name = "GetPostSecureTest" + ".testClientRejectsWrongServer";
236  		String configPrefix = name + "." + "ribbon";
237  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.IsSecure, "true");
238  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.SecurePort, Integer.toString(testServer2.getPort()));
239  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.IsHostnameValidationRequired, "false");
240  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.TrustStore, FILE_TS1.getAbsolutePath()); 
241  		cm.setProperty(configPrefix + "." + CommonClientConfigKey.TrustStorePassword, PASSWORD);
242  		RestClient rc = (RestClient) ClientFactory.getNamedClient(name);
243  		testServer2.accept();
244  		URI getUri = new URI(SERVICE_URI2 + "test/");
245  		HttpRequest request = HttpRequest.newBuilder().uri(getUri).queryParams("name", "test").build();
246  		try{
247  			rc.execute(request);
248  			fail("expecting ssl hostname validation error");
249  		}catch(ClientHandlerException che){
250  			assertTrue(che.getMessage().indexOf("peer not authenticated") > -1);
251  		}
252  	}
253  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from ribbon-MDEwOlJlcG9zaXRvcnk3NjE2MTU4-flat-SecureGetTest.java</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from ribbon-MDEwOlJlcG9zaXRvcnk3NjE2MTU4-flat-SecureGetTest.java</div>
                </div>
                <div class="column column_space"><pre><code>131  		SERVICE_URI1 = "https:&bsol;&bsol;127.0.0.1:" + testServer1.getPort() + "/";
132  		byte[] sampleTruststore2 = Base64.decode(TEST_TS2);
133  		byte[] sampleKeystore2 = Base64.decode(TEST_KS2);
134  		FILE_KS2 = File.createTempFile("SecureGetTest2", ".keystore");
135  		FILE_TS2 = File.createTempFile("SecureGetTest2", ".truststore");
</pre></code></div>
                <div class="column column_space"><pre><code>154  		SERVICE_URI2 = "https:&bsol;&bsol;127.0.0.1:" + testServer2.getPort() + "/";
155  	}
156  	@AfterClass
157  	public static void shutDown(){
158  		try{
159  			testServer1.close();
160  		}catch(Exception e){
161  			e.printStackTrace();
162  		}
163  		try{
164  			testServer2.close();
165  		}catch(Exception e){
166  			e.printStackTrace();
167  		}
168  	}
169  	@Test
170  	public void testSunnyDay() throws Exception {
171  		AbstractConfiguration cm = ConfigurationManager.getConfigInstance();
172  		String name = "GetPostSecureTest" + ".testSunnyDay";
173  		String configPrefix = name + "." + "ribbon";
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    