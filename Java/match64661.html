<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for ValueGraphTest.java &amp; FilesTest_1.java</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for ValueGraphTest.java &amp; FilesTest_1.java
      </h3>
<h1 align="center">
        31.8%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>ValueGraphTest.java (35.314285%)<th>FilesTest_1.java (28.986866%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(388-401)<td><a href="#" name="0">(616-633)</a><td align="center"><font color="#ff0000">33</font>
<tr onclick='openModal("#f63526")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f63526"><font color="#f63526">-</font><td><a href="#" name="1">(80-93)<td><a href="#" name="1">(634-648)</a><td align="center"><font color="#e70000">30</font>
<tr onclick='openModal("#980517")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#980517"><font color="#980517">-</font><td><a href="#" name="2">(51-57)<td><a href="#" name="2">(54-74)</a><td align="center"><font color="#920000">19</font>
<tr onclick='openModal("#53858b")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#53858b"><font color="#53858b">-</font><td><a href="#" name="3">(17-36)<td><a href="#" name="3">(17-36)</a><td align="center"><font color="#8b0000">18</font>
<tr onclick='openModal("#6cc417")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#6cc417"><font color="#6cc417">-</font><td><a href="#" name="4">(326-333)<td><a href="#" name="4">(703-712)</a><td align="center"><font color="#7b0000">16</font>
<tr onclick='openModal("#151b8d")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#151b8d"><font color="#151b8d">-</font><td><a href="#" name="5">(310-318)<td><a href="#" name="5">(449-463)</a><td align="center"><font color="#7b0000">16</font>
<tr onclick='openModal("#8c8774")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#8c8774"><font color="#8c8774">-</font><td><a href="#" name="6">(283-289)<td><a href="#" name="6">(86-90)</a><td align="center"><font color="#7b0000">16</font>
<tr onclick='openModal("#38a4a5")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#38a4a5"><font color="#38a4a5">-</font><td><a href="#" name="7">(116-123)<td><a href="#" name="7">(203-214)</a><td align="center"><font color="#6c0000">14</font>
<tr onclick='openModal("#c58917")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#c58917"><font color="#c58917">-</font><td><a href="#" name="8">(404-414)<td><a href="#" name="8">(111-118)</a><td align="center"><font color="#640000">13</font>
<tr onclick='openModal("#83a33a")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#83a33a"><font color="#83a33a">-</font><td><a href="#" name="9">(225-231)<td><a href="#" name="9">(361-368)</a><td align="center"><font color="#640000">13</font>
<tr onclick='openModal("#ad5910")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#ad5910"><font color="#ad5910">-</font><td><a href="#" name="10">(176-182)<td><a href="#" name="10">(300-308)</a><td align="center"><font color="#640000">13</font>
<tr onclick='openModal("#b041ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#b041ff"><font color="#b041ff">-</font><td><a href="#" name="11">(154-160)<td><a href="#" name="11">(138-147)</a><td align="center"><font color="#640000">13</font>
<tr onclick='openModal("#571b7e")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#571b7e"><font color="#571b7e">-</font><td><a href="#" name="12">(68-72)<td><a href="#" name="12">(274-281)</a><td align="center"><font color="#640000">13</font>
<tr onclick='openModal("#3b9c9c")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#3b9c9c"><font color="#3b9c9c">-</font><td><a href="#" name="13">(61-64)<td><a href="#" name="13">(216-224)</a><td align="center"><font color="#640000">13</font>
<tr onclick='openModal("#842dce")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#842dce"><font color="#842dce">-</font><td><a href="#" name="14">(64-66)<td><a href="#" name="14">(482-489)</a><td align="center"><font color="#550000">11</font>
<tr onclick='openModal("#f52887")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f52887"><font color="#f52887">-</font><td><a href="#" name="15">(140-145)<td><a href="#" name="15">(508-514)</a><td align="center"><font color="#4d0000">10</font>
<tr onclick='openModal("#2981b2")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#2981b2"><font color="#2981b2">-</font><td><a href="#" name="16">(134-138)<td><a href="#" name="16">(316-322)</a><td align="center"><font color="#4d0000">10</font>
<tr onclick='openModal("#3090c7")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#3090c7"><font color="#3090c7">-</font><td><a href="#" name="17">(128-132)<td><a href="#" name="17">(309-315)</a><td align="center"><font color="#4d0000">10</font>
<tr onclick='openModal("#800517")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#800517"><font color="#800517">-</font><td><a href="#" name="18">(93-99)<td><a href="#" name="18">(590-599)</a><td align="center"><font color="#4d0000">10</font>
<tr onclick='openModal("#f62817")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f62817"><font color="#f62817">-</font><td><a href="#" name="19">(162-167)<td><a href="#" name="19">(343-349)</a><td align="center"><font color="#450000">9</font>
<tr onclick='openModal("#4e9258")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#4e9258"><font color="#4e9258">-</font><td><a href="#" name="20">(147-152)<td><a href="#" name="20">(323-328)</a><td align="center"><font color="#450000">9</font>
</td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>ValueGraphTest.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 <font color="#53858b"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>package com.google.common.graph;
2 import static com.google.common.graph.GraphConstants.ENDPOINTS_MISMATCH;
3 import static com.google.common.graph.TestUtil.assertStronglyEquivalent;
4 import static com.google.common.truth.Truth.assertThat;
5 import static com.google.common.truth.Truth8.assertThat;
6 import static java.util.concurrent.Executors.newFixedThreadPool;
7 import static org.junit.Assert.fail;
8 import com.google.common.collect.ImmutableList;
9 import java.util.Optional;
10 import java.util.Set;
11 import java.util.concurrent.Callable;
12 import java.util.concurrent.CyclicBarrier;
13 import java.util.concurrent.ExecutorService;
14 import java.util.concurrent.Future;
15 import org.junit.After;
16 import org.junit.Test;
17 import org.junit.runner.RunWith;
18 import</b></font> org.junit.runners.JUnit4;
19 @RunWith(JUnit4.class)
20 public final class ValueGraphTest {
21   private static final String DEFAULT = "default";
22   MutableValueGraph&lt;Integer, String&gt; graph;
23   @After
24   public void validateGraphState() {
25 <a name="2"></a>    assertStronglyEquivalent(graph, Graphs.copyOf(graph));
26     assertStronglyEquivalent(graph, ImmutableValueGraph.copyOf(graph));
27     Graph&lt;Integer&gt; asGraph = <font color="#980517"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>graph.asGraph();
28     AbstractGraphTest.validateGraph(asGraph);
29     assertThat(graph.nodes()).isEqualTo(asGraph.nodes());
30     assertThat(graph.edges()).isEqualTo(asGraph.edges());
31     assertThat(graph.nodeOrder()).isEqualTo(asGraph.nodeOrder());
32     assertThat(graph.incidentEdgeOrder()).isEqualTo(asGraph.incidentEdgeOrder());
33     assertThat(graph.isDirected()).isEqualTo</b></font>(asGraph.isDirected());
34 <a name="13"></a>    assertThat(graph.allowsSelfLoops()).isEqualTo(asGraph.allowsSelfLoops());
35     for (Integer node : graph.nodes()) {
36 <a name="14"></a>      <font color="#3b9c9c"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>assertThat(graph.adjacentNodes(node)).isEqualTo(asGraph.adjacentNodes(node));
37       assertThat(graph.predecessors(node)).isEqualTo(asGraph.predecessors(node));
38       assertThat(graph.successors(node)).isEqualTo(asGraph.successors(node));
39       <font color="#842dce"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>assertThat(graph.degree(node)).isEqualTo</b></font>(asGraph.degree(node));
40 <a name="12"></a>      assertThat(graph.inDegree(node)).isEqualTo(asGraph.inDegree(node));
41       assertThat(graph.outDegree(node)).isEqualTo(asGraph.outDegree</b></font>(node));
42       for (Integer otherNode : graph.nodes()) <font color="#571b7e"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>{
43         boolean hasEdge = graph.hasEdgeConnecting(node, otherNode);
44         assertThat(hasEdge).isEqualTo(asGraph.hasEdgeConnecting(node, otherNode));
45         assertThat(graph.edgeValueOrDefault(node, otherNode, null) != null).isEqualTo(hasEdge);
46         assertThat(!graph.edgeValueOrDefault</b></font>(node, otherNode, DEFAULT).equals(DEFAULT))
47             .isEqualTo(hasEdge);
48       }
49     }
50   }
51 <a name="1"></a>
52   @Test
53   public void directedGraph() {
54     graph = <font color="#f63526"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>ValueGraphBuilder.directed().allowsSelfLoops(true).build();
55     graph.putEdgeValue(1, 2, "valueA");
56     graph.putEdgeValue(2, 1, "valueB");
57     graph.putEdgeValue(2, 3, "valueC");
58     graph.putEdgeValue(4, 4, "valueD");
59     assertThat(graph.edgeValueOrDefault(1, 2, null)).isEqualTo("valueA");
60     assertThat(graph.edgeValueOrDefault(2, 1, null)).isEqualTo("valueB");
61     assertThat(graph.edgeValueOrDefault(2, 3, null)).isEqualTo("valueC");
62     assertThat(graph.edgeValueOrDefault(4, 4, null)).isEqualTo("valueD");
63 <a name="18"></a>    assertThat(graph.edgeValueOrDefault(1, 2, DEFAULT)).isEqualTo("valueA");
64     assertThat(graph.edgeValueOrDefault(2, 1, DEFAULT)).isEqualTo("valueB");
65     assertThat(graph.edgeValueOrDefault(2, 3, DEFAULT)).isEqualTo("valueC");
66     assertThat</b></font>(<font color="#800517"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>graph.edgeValueOrDefault(4, 4, DEFAULT)).isEqualTo("valueD");
67     String toString = graph.toString();
68     assertThat(toString).contains("valueA");
69     assertThat(toString).contains("valueB");
70     assertThat(toString).contains("valueC");
71     assertThat(toString).contains</b></font>("valueD");
72   }
73   @Test
74   public void undirectedGraph() {
75     graph = ValueGraphBuilder.undirected().allowsSelfLoops(true).build();
76     graph.putEdgeValue(1, 2, "valueA");
77     graph.putEdgeValue(2, 1, "valueB");     graph.putEdgeValue(2, 3, "valueC");
78     graph.putEdgeValue(4, 4, "valueD");
79     assertThat(graph.edgeValueOrDefault(1, 2, null)).isEqualTo("valueB");
80     assertThat(graph.edgeValueOrDefault(2, 1, null)).isEqualTo("valueB");
81     assertThat(graph.edgeValueOrDefault(2, 3, null)).isEqualTo("valueC");
82 <a name="7"></a>    assertThat(graph.edgeValueOrDefault(4, 4, null)).isEqualTo("valueD");
83     assertThat(graph.edgeValueOrDefault(1, 2, DEFAULT)).isEqualTo("valueB");
84     assertThat(graph.edgeValueOrDefault(2, 1, DEFAULT)).isEqualTo("valueB");
85     <font color="#38a4a5"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>assertThat(graph.edgeValueOrDefault(2, 3, DEFAULT)).isEqualTo("valueC");
86     assertThat(graph.edgeValueOrDefault(4, 4, DEFAULT)).isEqualTo("valueD");
87     String toString = graph.toString();
88     assertThat(toString).doesNotContain("valueA");
89     assertThat(toString).contains("valueB");
90     assertThat(toString).contains("valueC");
91     assertThat(toString).contains</b></font>("valueD");
92   }
93 <a name="17"></a>
94   @Test
95   public void incidentEdgeOrder_unordered() {
96     graph = <font color="#3090c7"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>ValueGraphBuilder.directed().incidentEdgeOrder(ElementOrder.unordered()).build();
97     assertThat(graph.incidentEdgeOrder()).isEqualTo(ElementOrder.unordered());
98   }
99 <a name="16"></a>
100   @Test</b></font>
101   public void incidentEdgeOrder_stable() {
102     graph = <font color="#2981b2"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>ValueGraphBuilder.directed().incidentEdgeOrder(ElementOrder.stable()).build();
103     assertThat(graph.incidentEdgeOrder()).isEqualTo(ElementOrder.stable());
104   }
105 <a name="15"></a>
106   @Test</b></font>
107   public void hasEdgeConnecting_directed_correct() {
108     graph = <font color="#f52887"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>ValueGraphBuilder.directed().build();
109     graph.putEdgeValue(1, 2, "A");
110     assertThat(graph.hasEdgeConnecting(EndpointPair.ordered(1, 2))).isTrue();
111   }
112 <a name="20"></a>
113   @Test</b></font>
114   public void hasEdgeConnecting_directed_backwards() {
115     graph = <font color="#4e9258"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>ValueGraphBuilder.directed().build();
116     graph.putEdgeValue(1, 2, "A");
117     assertThat(graph.hasEdgeConnecting(EndpointPair.ordered(2, 1))).isFalse();
118   }
119 <a name="11"></a>
120   @Test</b></font>
121   public void hasEdgeConnecting_directed_mismatch() {
122     graph = <font color="#b041ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>ValueGraphBuilder.directed().build();
123     graph.putEdgeValue(1, 2, "A");
124     assertThat(graph.hasEdgeConnecting(EndpointPair.unordered(1, 2))).isFalse();
125     assertThat(graph.hasEdgeConnecting(EndpointPair.unordered(2, 1))).isFalse();
126   }
127 <a name="19"></a>
128   @Test</b></font>
129   public void hasEdgeConnecting_undirected_correct() {
130     graph = <font color="#f62817"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>ValueGraphBuilder.undirected().build();
131     graph.putEdgeValue(1, 2, "A");
132     assertThat(graph.hasEdgeConnecting(EndpointPair.unordered(1, 2))).isTrue();
133   }
134   @Test</b></font>
135   public void hasEdgeConnecting_undirected_backwards() {
136     graph = ValueGraphBuilder.undirected().build();
137     graph.putEdgeValue(1, 2, "A");
138     assertThat(graph.hasEdgeConnecting(EndpointPair.unordered(2, 1))).isTrue();
139   }
140 <a name="10"></a>
141   @Test
142   public void hasEdgeConnecting_undirected_mismatch() {
143     graph = <font color="#ad5910"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>ValueGraphBuilder.undirected().build();
144     graph.putEdgeValue(1, 2, "A");
145     assertThat(graph.hasEdgeConnecting(EndpointPair.ordered(1, 2))).isTrue();
146     assertThat(graph.hasEdgeConnecting(EndpointPair.ordered(2, 1))).isTrue();
147   }
148   @Test</b></font>
149   public void edgeValue_directed_correct() {
150     graph = ValueGraphBuilder.directed().build();
151     graph.putEdgeValue(1, 2, "A");
152     assertThat(graph.edgeValue(EndpointPair.ordered(1, 2))).hasValue("A");
153   }
154   @Test
155   public void edgeValue_directed_backwards() {
156     graph = ValueGraphBuilder.directed().build();
157     graph.putEdgeValue(1, 2, "A");
158     assertThat(graph.edgeValue(EndpointPair.ordered(2, 1))).isEmpty();
159   }
160   @Test
161   public void edgeValue_directed_mismatch() {
162     graph = ValueGraphBuilder.directed().build();
163     graph.putEdgeValue(1, 2, "A");
164     try {
165       Optional&lt;String&gt; unused = graph.edgeValue(EndpointPair.unordered(1, 2));
166       unused = graph.edgeValue(EndpointPair.unordered(2, 1));
167       fail("Expected IllegalArgumentException: " + ENDPOINTS_MISMATCH);
168     } catch (IllegalArgumentException e) {
169       assertThat(e).hasMessageThat().contains(ENDPOINTS_MISMATCH);
170     }
171   }
172   @Test
173   public void edgeValue_undirected_correct() {
174     graph = ValueGraphBuilder.undirected().build();
175     graph.putEdgeValue(1, 2, "A");
176     assertThat(graph.edgeValue(EndpointPair.unordered(1, 2))).hasValue("A");
177   }
178   @Test
179   public void edgeValue_undirected_backwards() {
180     graph = ValueGraphBuilder.undirected().build();
181     graph.putEdgeValue(1, 2, "A");
182     assertThat(graph.edgeValue(EndpointPair.unordered(2, 1))).hasValue("A");
183   }
184 <a name="9"></a>
185   @Test
186   public void edgeValue_undirected_mismatch() {
187     graph = <font color="#83a33a"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>ValueGraphBuilder.undirected().build();
188     graph.putEdgeValue(1, 2, "A");
189     assertThat(graph.edgeValue(EndpointPair.ordered(1, 2))).hasValue("A");
190     assertThat(graph.edgeValue(EndpointPair.ordered(2, 1))).hasValue("A");
191   }
192   @Test</b></font>
193   public void edgeValueOrDefault_directed_correct() {
194     graph = ValueGraphBuilder.directed().build();
195     graph.putEdgeValue(1, 2, "A");
196     assertThat(graph.edgeValueOrDefault(EndpointPair.ordered(1, 2), "default")).isEqualTo("A");
197   }
198   @Test
199   public void edgeValueOrDefault_directed_backwards() {
200     graph = ValueGraphBuilder.directed().build();
201     graph.putEdgeValue(1, 2, "A");
202     assertThat(graph.edgeValueOrDefault(EndpointPair.ordered(2, 1), "default"))
203         .isEqualTo("default");
204   }
205   @Test
206   public void edgeValueOrDefault_directed_mismatch() {
207     graph = ValueGraphBuilder.directed().build();
208     graph.putEdgeValue(1, 2, "A");
209     try {
210       String unused = graph.edgeValueOrDefault(EndpointPair.unordered(1, 2), "default");
211       unused = graph.edgeValueOrDefault(EndpointPair.unordered(2, 1), "default");
212       fail("Expected IllegalArgumentException: " + ENDPOINTS_MISMATCH);
213     } catch (IllegalArgumentException e) {
214       assertThat(e).hasMessageThat().contains(ENDPOINTS_MISMATCH);
215     }
216   }
217   @Test
218   public void edgeValueOrDefault_undirected_correct() {
219     graph = ValueGraphBuilder.undirected().build();
220     graph.putEdgeValue(1, 2, "A");
221     assertThat(graph.edgeValueOrDefault(EndpointPair.unordered(1, 2), "default")).isEqualTo("A");
222   }
223   @Test
224   public void edgeValueOrDefault_undirected_backwards() {
225     graph = ValueGraphBuilder.undirected().build();
226     graph.putEdgeValue(1, 2, "A");
227     assertThat(graph.edgeValueOrDefault(EndpointPair.unordered(2, 1), "default")).isEqualTo("A");
228   }
229   @Test
230   public void edgeValueOrDefault_undirected_mismatch() {
231     graph = ValueGraphBuilder.undirected().build();
232     graph.putEdgeValue(1, 2, "A");
233     assertThat(graph.edgeValueOrDefault(EndpointPair.ordered(2, 1), "default")).isEqualTo("A");
234     assertThat(graph.edgeValueOrDefault(EndpointPair.ordered(2, 1), "default")).isEqualTo("A");
235   }
236 <a name="6"></a>
237   @Test
238   public void putEdgeValue_directed() {
239     graph = <font color="#8c8774"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>ValueGraphBuilder.directed().build();
240     assertThat(graph.putEdgeValue(1, 2, "valueA")).isNull();
241     assertThat(graph.putEdgeValue(2, 1, "valueB")).isNull();
242     assertThat(graph.putEdgeValue(1, 2, "valueC")).isEqualTo("valueA");
243     assertThat(graph.putEdgeValue(2, 1, "valueD")).isEqualTo("valueB");
244   }</b></font>
245   @Test
246   public void putEdgeValue_directed_orderMismatch() {
247     graph = ValueGraphBuilder.directed().build();
248     try {
249       graph.putEdgeValue(EndpointPair.unordered(1, 2), "irrelevant");
250       fail("Expected IllegalArgumentException: " + ENDPOINTS_MISMATCH);
251     } catch (IllegalArgumentException e) {
252       assertThat(e).hasMessageThat().contains(ENDPOINTS_MISMATCH);
253     }
254   }
255   @Test
256   public void putEdgeValue_undirected_orderMismatch() {
257     graph = ValueGraphBuilder.undirected().build();
258     assertThat(graph.putEdgeValue(EndpointPair.ordered(1, 2), "irrelevant")).isNull();
259   }
260 <a name="5"></a>
261   @Test
262   public void putEdgeValue_undirected() {
263     graph = <font color="#151b8d"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>ValueGraphBuilder.undirected().build();
264     assertThat(graph.putEdgeValue(1, 2, "valueA")).isNull();
265     assertThat(graph.putEdgeValue(2, 1, "valueB")).isEqualTo("valueA");
266     assertThat(graph.putEdgeValue(1, 2, "valueC")).isEqualTo("valueB");
267     assertThat(graph.putEdgeValue(2, 1, "valueD")).isEqualTo("valueC");
268   }
269   @Test</b></font>
270   public void removeEdge_directed() {
271     graph = ValueGraphBuilder.directed().build();
272     graph.putEdgeValue(1, 2, "valueA");
273     graph.putEdgeValue(2, 1, "valueB");
274 <a name="4"></a>    graph.putEdgeValue(2, 3, "valueC");
275     assertThat(graph.removeEdge(1, 2)).isEqualTo("valueA");
276     assertThat(<font color="#6cc417"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>graph.removeEdge(1, 2)).isNull();
277     assertThat(graph.removeEdge(2, 1)).isEqualTo("valueB");
278     assertThat(graph.removeEdge(2, 1)).isNull();
279     assertThat(graph.removeEdge(2, 3)).isEqualTo("valueC");
280     assertThat(graph.removeEdge(2, 3)).isNull();
281   }
282   @Test</b></font>
283   public void removeEdge_undirected() {
284     graph = ValueGraphBuilder.undirected().build();
285     graph.putEdgeValue(1, 2, "valueA");
286     graph.putEdgeValue(2, 1, "valueB");
287     graph.putEdgeValue(2, 3, "valueC");
288     assertThat(graph.removeEdge(1, 2)).isEqualTo("valueB");
289     assertThat(graph.removeEdge(1, 2)).isNull();
290     assertThat(graph.removeEdge(2, 1)).isNull();
291     assertThat(graph.removeEdge(2, 3)).isEqualTo("valueC");
292     assertThat(graph.removeEdge(2, 3)).isNull();
293   }
294   @Test
295   public void removeEdge_directed_orderMismatch() {
296     graph = ValueGraphBuilder.directed().build();
297     graph.putEdgeValue(1, 2, "1-&gt;2");
298     graph.putEdgeValue(2, 1, "2-&gt;1");
299     try {
300       graph.removeEdge(EndpointPair.unordered(1, 2));
301       graph.removeEdge(EndpointPair.unordered(2, 1));
302       fail("Expected IllegalArgumentException: " + ENDPOINTS_MISMATCH);
303     } catch (IllegalArgumentException e) {
304       assertThat(e).hasMessageThat().contains(ENDPOINTS_MISMATCH);
305     }
306   }
307   @Test
308   public void removeEdge_undirected_orderMismatch() {
309     graph = ValueGraphBuilder.undirected().build();
310     graph.putEdgeValue(1, 2, "1-2");
311     assertThat(graph.removeEdge(EndpointPair.ordered(1, 2))).isEqualTo("1-2");
312   }
313   @Test
314   public void edgeValue_missing() {
315     graph = ValueGraphBuilder.directed().build();
316     assertThat(graph.edgeValueOrDefault(1, 2, DEFAULT)).isEqualTo(DEFAULT);
317     assertThat(graph.edgeValueOrDefault(2, 1, DEFAULT)).isEqualTo(DEFAULT);
318     assertThat(graph.edgeValue(1, 2).orElse(DEFAULT)).isEqualTo(DEFAULT);
319     assertThat(graph.edgeValue(2, 1).orElse(DEFAULT)).isEqualTo(DEFAULT);
320     assertThat(graph.edgeValueOrDefault(1, 2, null)).isNull();
321     assertThat(graph.edgeValueOrDefault(2, 1, null)).isNull();
322     assertThat(graph.edgeValue(1, 2).orElse(null)).isNull();
323     assertThat(graph.edgeValue(2, 1).orElse(null)).isNull();
324     graph.putEdgeValue(1, 2, "valueA");
325     graph.putEdgeValue(2, 1, "valueB");
326     assertThat(graph.edgeValueOrDefault(1, 2, DEFAULT)).isEqualTo("valueA");
327     assertThat(graph.edgeValueOrDefault(2, 1, DEFAULT)).isEqualTo("valueB");
328 <a name="0"></a>    assertThat(graph.edgeValueOrDefault(1, 2, null)).isEqualTo("valueA");
329     assertThat(graph.edgeValueOrDefault(2, 1, null)).isEqualTo("valueB");
330     assertThat(graph.edgeValue(1, 2).get()).isEqualTo("valueA");
331     <font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>assertThat(graph.edgeValue(2, 1).get()).isEqualTo("valueB");
332     graph.removeEdge(1, 2);
333     graph.putEdgeValue(2, 1, "valueC");
334     assertThat(graph.edgeValueOrDefault(1, 2, DEFAULT)).isEqualTo(DEFAULT);
335     assertThat(graph.edgeValueOrDefault(2, 1, DEFAULT)).isEqualTo("valueC");
336     assertThat(graph.edgeValue(1, 2).orElse(DEFAULT)).isEqualTo(DEFAULT);
337     assertThat(graph.edgeValueOrDefault(1, 2, null)).isNull();
338     assertThat(graph.edgeValueOrDefault(2, 1, null)).isEqualTo("valueC");
339     assertThat(graph.edgeValue(1, 2).orElse(null)).isNull();
340     assertThat(graph.edgeValue(2, 1).get()).isEqualTo("valueC");
341   }
342 <a name="8"></a>  @Test</b></font>
343   public void equivalence_considersEdgeValue() {
344     graph = ValueGraphBuilder.undirected().build();
345     <font color="#c58917"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>graph.putEdgeValue(1, 2, "valueA");
346     MutableValueGraph&lt;Integer, String&gt; otherGraph = ValueGraphBuilder.undirected().build();
347     otherGraph.putEdgeValue(1, 2, "valueA");
348     assertThat(graph).isEqualTo(otherGraph);
349     otherGraph.putEdgeValue(1, 2, "valueB");
350     assertThat(graph).isNotEqualTo(otherGraph);   }
351   @Test</b></font>
352   public void incidentEdges_stableIncidentEdgeOrder_preservesIncidentEdgesOrder_directed() {
353     graph = ValueGraphBuilder.directed().incidentEdgeOrder(ElementOrder.stable()).build();
354     graph.putEdgeValue(2, 1, "2-1");
355     graph.putEdgeValue(2, 3, "2-3");
356     graph.putEdgeValue(1, 2, "1-2");
357     assertThat(graph.incidentEdges(2))
358         .containsExactly(
359             EndpointPair.ordered(2, 1), EndpointPair.ordered(2, 3), EndpointPair.ordered(1, 2))
360         .inOrder();
361   }
362   @Test
363   public void incidentEdges_stableIncidentEdgeOrder_preservesIncidentEdgesOrder_undirected() {
364     graph = ValueGraphBuilder.undirected().incidentEdgeOrder(ElementOrder.stable()).build();
365     graph.putEdgeValue(2, 3, "2-3");
366     graph.putEdgeValue(2, 1, "2-1");
367     graph.putEdgeValue(2, 4, "2-4");
368     graph.putEdgeValue(1, 2, "1-2"); 
369     assertThat(graph.incidentEdges(2))
370         .containsExactly(
371             EndpointPair.unordered(2, 3),
372             EndpointPair.unordered(1, 2),
373             EndpointPair.unordered(2, 4))
374         .inOrder();
375   }
376   @Test
377   public void concurrentIteration() throws Exception {
378     graph = ValueGraphBuilder.directed().build();
379     graph.putEdgeValue(1, 2, "A");
380     graph.putEdgeValue(3, 4, "B");
381     graph.putEdgeValue(5, 6, "C");
382     int threadCount = 20;
383     ExecutorService executor = newFixedThreadPool(threadCount);
384     final CyclicBarrier barrier = new CyclicBarrier(threadCount);
385     ImmutableList.Builder&lt;Future&lt;?&gt;&gt; futures = ImmutableList.builder();
386     for (int i = 0; i &lt; threadCount; i++) {
387       futures.add(
388           executor.submit(
389               new Callable&lt;Object&gt;() {
390                 @Override
391                 public Object call() throws Exception {
392                   barrier.await();
393                   Integer first = graph.nodes().iterator().next();
394                   for (Integer node : graph.nodes()) {
395                     Set&lt;Integer&gt; unused = graph.successors(node);
396                   }
397                   Set&lt;Integer&gt; unused = graph.successors(first);
398                   return null;
399                 }
400               }));
401     }
402     for (Future&lt;?&gt; future : futures.build()) {
403       future.get();
404     }
405     executor.shutdown();
406   }
407 }
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>FilesTest_1.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 <font color="#53858b"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>package com.google.common.io;
2 import static com.google.common.truth.Truth.assertThat;
3 import com.google.common.base.Charsets;
4 import com.google.common.collect.ImmutableList;
5 import com.google.common.hash.Hashing;
6 import com.google.common.primitives.Bytes;
7 import java.io.BufferedReader;
8 import java.io.BufferedWriter;
9 import java.io.ByteArrayOutputStream;
10 import java.io.File;
11 import java.io.FileNotFoundException;
12 import java.io.IOException;
13 import java.io.PrintWriter;
14 import java.io.RandomAccessFile;
15 import java.nio.ByteBuffer;
16 import java.nio.MappedByteBuffer;
17 import java.nio.channels.FileChannel.MapMode;
18 import</b></font> java.util.ArrayList;
19 import java.util.Arrays;
20 import java.util.List;
21 import java.util.Random;
22 import junit.framework.TestSuite;
23 public class FilesTest extends IoTestCase {
24 <a name="2"></a>
25   public static TestSuite suite() {
26     TestSuite suite = new TestSuite();
27     <font color="#980517"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>suite.addTest(
28         ByteSourceTester.tests(
29             "Files.asByteSource[File]", SourceSinkFactories.fileByteSourceFactory(), true));
30     suite.addTest(
31         ByteSinkTester.tests("Files.asByteSink[File]", SourceSinkFactories.fileByteSinkFactory()));
32     suite.addTest(
33         ByteSinkTester.tests(
34             "Files.asByteSink[File, APPEND]", SourceSinkFactories.appendingFileByteSinkFactory()));
35     suite.addTest(
36         CharSourceTester.tests(
37             "Files.asCharSource[File, Charset]",
38             SourceSinkFactories.fileCharSourceFactory(),
39             false));
40     suite.addTest(
41         CharSinkTester.tests(
42             "Files.asCharSink[File, Charset]", SourceSinkFactories.fileCharSinkFactory()));
43     suite.addTest(
44         CharSinkTester.tests(
45             "Files.asCharSink[File, Charset, APPEND]",
46             SourceSinkFactories.appendingFileCharSinkFactory()));
47     suite.addTestSuite</b></font>(FilesTest.class);
48     return suite;
49   }
50   public void testRoundTripSources() throws Exception {
51     File asciiFile = getTestFile("ascii.txt");
52     ByteSource byteSource = Files.asByteSource(asciiFile);
53     assertSame(byteSource, byteSource.asCharSource(Charsets.UTF_8).asByteSource(Charsets.UTF_8));
54   }
55 <a name="6"></a>
56   public void testToByteArray() throws IOException {
57     File asciiFile = getTestFile("ascii.txt");
58     File i18nFile = <font color="#8c8774"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>getTestFile("i18n.txt");
59     assertTrue(Arrays.equals(ASCII.getBytes(Charsets.US_ASCII), Files.toByteArray(asciiFile)));
60     assertTrue(Arrays.equals(I18N.getBytes(Charsets.UTF_8), Files.toByteArray(i18nFile)));
61     assertTrue(Arrays.equals(I18N.getBytes(Charsets.UTF_8), Files.asByteSource(i18nFile).read()));
62   }</b></font>
63   private static class BadLengthFile extends File {
64     private final long badLength;
65     public BadLengthFile(File delegate, long badLength) {
66       super(delegate.getPath());
67       this.badLength = badLength;
68     }
69     @Override
70     public long length() {
71       return badLength;
72     }
73     private static final long serialVersionUID = 0;
74 <a name="8"></a>  }
75   public void testToString() throws IOException {
76     File asciiFile = <font color="#c58917"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>getTestFile("ascii.txt");
77     File i18nFile = getTestFile("i18n.txt");
78     assertEquals(ASCII, Files.toString(asciiFile, Charsets.US_ASCII));
79     assertEquals(I18N, Files.toString(i18nFile, Charsets.UTF_8));
80     assertThat(Files.toString(i18nFile, Charsets.US_ASCII)).isNotEqualTo(I18N);
81   }
82   public void tes</b></font>tWriteString() throws IOException {
83     File temp = createTempFile();
84     Files.write(I18N, temp, Charsets.UTF_16LE);
85     assertEquals(I18N, Files.toString(temp, Charsets.UTF_16LE));
86   }
87   public void testWriteBytes() throws IOException {
88     File temp = createTempFile();
89     byte[] data = newPreFilledByteArray(2000);
90     Files.write(data, temp);
91     assertTrue(Arrays.equals(data, Files.toByteArray(temp)));
92     try {
93       Files.write(null, temp);
94       fail("expected exception");
95     } catch (NullPointerException expected) {
96     }
97 <a name="11"></a>  }
98   public void testAppendString() throws IOException {
99     File temp = <font color="#b041ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>createTempFile();
100     Files.append(I18N, temp, Charsets.UTF_16LE);
101     assertEquals(I18N, Files.toString(temp, Charsets.UTF_16LE));
102     Files.append(I18N, temp, Charsets.UTF_16LE);
103     assertEquals(I18N + I18N, Files.toString(temp, Charsets.UTF_16LE));
104     Files.append(I18N, temp, Charsets.UTF_16LE);
105     assertEquals(I18N + I18N + I18N, Files.toString(temp, Charsets.UTF_16LE));
106   }
107   public void testCopyTo</b></font>OutputStream() throws IOException {
108     File i18nFile = getTestFile("i18n.txt");
109     ByteArrayOutputStream out = new ByteArrayOutputStream();
110     Files.copy(i18nFile, out);
111     assertEquals(I18N, out.toString("UTF-8"));
112   }
113   public void testCopyToAppendable() throws IOException {
114     File i18nFile = getTestFile("i18n.txt");
115     StringBuilder sb = new StringBuilder();
116     Files.copy(i18nFile, Charsets.UTF_8, sb);
117     assertEquals(I18N, sb.toString());
118   }
119   public void testCopyFile() throws IOException {
120     File i18nFile = getTestFile("i18n.txt");
121     File temp = createTempFile();
122     Files.copy(i18nFile, temp);
123     assertEquals(I18N, Files.toString(temp, Charsets.UTF_8));
124   }
125   public void testCopyEqualFiles() throws IOException {
126     File temp1 = createTempFile();
127     File temp2 = file(temp1.getPath());
128     assertEquals(temp1, temp2);
129     Files.write(ASCII, temp1, Charsets.UTF_8);
130     try {
131       Files.copy(temp1, temp2);
132       fail("Expected an IAE to be thrown but wasn't");
133     } catch (IllegalArgumentException expected) {
134     }
135     assertEquals(ASCII, Files.toString(temp1, Charsets.UTF_8));
136   }
137   public void testCopySameFile() throws IOException {
138     File temp = createTempFile();
139     Files.write(ASCII, temp, Charsets.UTF_8);
140     try {
141       Files.copy(temp, temp);
142       fail("Expected an IAE to be thrown but wasn't");
143     } catch (IllegalArgumentException expected) {
144     }
145     assertEquals(ASCII, Files.toString(temp, Charsets.UTF_8));
146   }
147   public void testCopyIdenticalFiles() throws IOException {
148     File temp1 = createTempFile();
149     Files.write(ASCII, temp1, Charsets.UTF_8);
150     File temp2 = createTempFile();
151     Files.write(ASCII, temp2, Charsets.UTF_8);
152     Files.copy(temp1, temp2);
153     assertEquals(ASCII, Files.toString(temp2, Charsets.UTF_8));
154   }
155 <a name="7"></a>
156   public void testEqual() throws IOException {
157     File asciiFile = getTestFile("ascii.txt");
158     File i18nFile = <font color="#38a4a5"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>getTestFile("i18n.txt");
159     assertFalse(Files.equal(asciiFile, i18nFile));
160     assertTrue(Files.equal(asciiFile, asciiFile));
161     File temp = createTempFile();
162     Files.copy(asciiFile, temp);
163     assertTrue(Files.equal(asciiFile, temp));
164     Files.copy(i18nFile, temp);
165     assertTrue(Files.equal(i18nFile, temp));
166 <a name="13"></a>
167     Files.copy</b></font>(asciiFile, temp);
168     RandomAccessFile rf = new RandomAccessFile(temp, "rw");
169     <font color="#3b9c9c"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>rf.writeByte(0);
170     rf.close();
171     assertEquals(asciiFile.length(), temp.length());
172     assertFalse(Files.equal(asciiFile, temp));
173     assertTrue(Files.asByteSource(asciiFile).contentEquals(Files.asByteSource(asciiFile)));
174     assertTrue(Files.equal</b></font>(asciiFile, new BadLengthFile(asciiFile, 0)));
175   }
176   public void testNewReader() throws IOException {
177     File asciiFile = getTestFile("ascii.txt");
178     try {
179       Files.newReader(asciiFile, null);
180       fail("expected exception");
181     } catch (NullPointerException expected) {
182     }
183     try {
184       Files.newReader(null, Charsets.UTF_8);
185       fail("expected exception");
186     } catch (NullPointerException expected) {
187     }
188     BufferedReader r = Files.newReader(asciiFile, Charsets.US_ASCII);
189     try {
190       assertEquals(ASCII, r.readLine());
191     } finally {
192       r.close();
193     }
194   }
195   public void testNewWriter() throws IOException {
196     File temp = createTempFile();
197     try {
198       Files.newWriter(temp, null);
199       fail("expected exception");
200     } catch (NullPointerException expected) {
201     }
202     try {
203       Files.newWriter(null, Charsets.UTF_8);
204       fail("expected exception");
205     } catch (NullPointerException expected) {
206     }
207     BufferedWriter w = Files.newWriter(temp, Charsets.UTF_8);
208     try {
209       w.write(I18N);
210     } finally {
211       w.close();
212     }
213     File i18nFile = getTestFile("i18n.txt");
214 <a name="12"></a>    assertTrue(Files.equal(i18nFile, temp));
215   }
216   public void testTouch() throws IOException <font color="#571b7e"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>{
217     File temp = createTempFile();
218     assertTrue(temp.exists());
219     assertTrue(temp.delete());
220     assertFalse(temp.exists());
221     Files.touch(temp);
222     assertTrue(temp.exists());
223     Files.touch</b></font>(temp);
224     assertTrue(temp.exists());
225     try {
226       Files.touch(
227           new File(temp.getPath()) {
228             @Override
229             public boolean setLastModified(long t) {
230               return false;
231             }
232             private static final long serialVersionUID = 0;
233           });
234       fail("expected exception");
235     } catch (IOException expected) {
236     }
237 <a name="10"></a>  }
238   public void testTouchTime() throws IOException {
239     File temp = <font color="#ad5910"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>createTempFile();
240     assertTrue(temp.exists());
241     temp.setLastModified(0);
242     assertEquals(0, temp.lastModified());
243     Files.touch(temp);
244     assertThat(temp.lastModified()).isNotEqualTo(0);
245 <a name="17"></a>  }
246   public void testCreatePar</b></font>entDirs_root() throws IOException {
247     File file = <font color="#3090c7"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>root();
248     assertNull(file.getParentFile());
249     assertNull(file.getCanonicalFile().getParentFile());
250     Files.createParentDirs(file);
251 <a name="16"></a>  }
252   public void testCreateParentDirs_</b></font>relativePath() throws IOException {
253     File file = <font color="#2981b2"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>file("nonexistent.file");
254     assertNull(file.getParentFile());
255     assertNotNull(file.getCanonicalFile().getParentFile());
256     Files.createParentDirs(file);
257 <a name="20"></a>  }
258   public void testCreateParentDirs_noP</b></font>arentsNeeded() throws IOException {
259     File file = <font color="#4e9258"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>file(getTempDir(), "nonexistent.file");
260     assertTrue(file.getParentFile().exists());
261     Files.createParentDirs(file);
262   }
263   public void testCreateParentDirs_one</b></font>ParentNeeded() throws IOException {
264     File file = file(getTempDir(), "parent", "nonexistent.file");
265     File parent = file.getParentFile();
266     assertFalse(parent.exists());
267     try {
268       Files.createParentDirs(file);
269       assertTrue(parent.exists());
270     } finally {
271       assertTrue(parent.delete());
272     }
273   }
274 <a name="19"></a>  public void testCreateParentDirs_multipleParentsNeeded() throws IOException {
275     File file = file(getTempDir(), "grandparent", "parent", "nonexistent.file");
276     File parent = file.getParentFile();
277     File grandparent = <font color="#f62817"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>parent.getParentFile();
278     assertFalse(grandparent.exists());
279     Files.createParentDirs(file);
280     assertTrue(parent.exists());
281   }
282   public void testCreateParentDirs_nonDirectory</b></font>ParentExists() throws IOException {
283     File parent = getTestFile("ascii.txt");
284     assertTrue(parent.isFile());
285     File file = file(parent, "foo");
286     try {
287       Files.createParentDirs(file);
288       fail();
289     } catch (IOException expected) {
290     }
291 <a name="9"></a>  }
292   public void testCreateTempDir() {
293     File temp = <font color="#83a33a"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>Files.createTempDir();
294     assertTrue(temp.exists());
295     assertTrue(temp.isDirectory());
296     assertThat(temp.listFiles()).isEmpty();
297     assertTrue(temp.delete());
298   }
299   public v</b></font>oid testMove() throws IOException {
300     File i18nFile = getTestFile("i18n.txt");
301     File temp1 = createTempFile();
302     File temp2 = createTempFile();
303     Files.copy(i18nFile, temp1);
304     moveHelper(true, temp1, temp2);
305     assertTrue(Files.equal(temp2, i18nFile));
306   }
307   public void testMoveViaCopy() throws IOException {
308     File i18nFile = getTestFile("i18n.txt");
309     File temp1 = createTempFile();
310     File temp2 = createTempFile();
311     Files.copy(i18nFile, temp1);
312     moveHelper(true, new UnmovableFile(temp1, false, true), temp2);
313     assertTrue(Files.equal(temp2, i18nFile));
314   }
315   public void testMoveFailures() throws IOException {
316     File temp1 = createTempFile();
317     File temp2 = createTempFile();
318     moveHelper(false, new UnmovableFile(temp1, false, false), temp2);
319     moveHelper(
320         false, new UnmovableFile(temp1, false, false), new UnmovableFile(temp2, true, false));
321     try {
322       File asciiFile = getTestFile("ascii.txt");
323       moveHelper(false, asciiFile, asciiFile);
324       fail("expected exception");
325     } catch (IllegalArgumentException expected) {
326     }
327   }
328   private void moveHelper(boolean success, File from, File to) throws IOException {
329     try {
330       Files.move(from, to);
331       if (success) {
332         assertFalse(from.exists());
333         assertTrue(to.exists());
334       } else {
335         fail("expected exception");
336       }
337     } catch (IOException possiblyExpected) {
338       if (success) {
339         throw possiblyExpected;
340       }
341     }
342   }
343   private static class UnmovableFile extends File {
344     private final boolean canRename;
345     private final boolean canDelete;
346     public UnmovableFile(File file, boolean canRename, boolean canDelete) {
347       super(file.getPath());
348       this.canRename = canRename;
349       this.canDelete = canDelete;
350     }
351     @Override
352     public boolean renameTo(File to) {
353       return canRename &amp;&amp; super.renameTo(to);
354     }
355     @Override
356     public boolean delete() {
357       return canDelete &amp;&amp; super.delete();
358     }
359     private static final long serialVersionUID = 0;
360   }
361   public void testLineReading() throws IOException {
362     File temp = createTempFile();
363 <a name="5"></a>    assertNull(Files.readFirstLine(temp, Charsets.UTF_8));
364     assertTrue(Files.readLines(temp, Charsets.UTF_8).isEmpty());
365     PrintWriter w = new PrintWriter(<font color="#151b8d"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>Files.newWriter(temp, Charsets.UTF_8));
366     w.println("hello");
367     w.println("");
368     w.println(" world  ");
369     w.println("");
370     w.close();
371     assertEquals("hello", Files.readFirstLine(temp, Charsets.UTF_8));
372     assertEquals(
373         ImmutableList.of("hello", "", " world  ", ""), Files.readLines(temp, Charsets.UTF_8));
374     assertTrue(temp.delete());
375   }
376   public void testReadLines_withL</b></font>ineProcessor() throws IOException {
377     File temp = createTempFile();
378     LineProcessor&lt;List&lt;String&gt;&gt; collect =
379         new LineProcessor&lt;List&lt;String&gt;&gt;() {
380           List&lt;String&gt; collector = new ArrayList&lt;&gt;();
381           @Override
382           public boolean processLine(String line) {
383             collector.add(line);
384             return true;
385           }
386           @Override
387           public List&lt;String&gt; getResult() {
388             return collector;
389           }
390 <a name="14"></a>        };
391     assertThat(Files.readLines(temp, Charsets.UTF_8, collect)).isEmpty();
392     PrintWriter w = new PrintWriter(<font color="#842dce"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>Files.newWriter(temp, Charsets.UTF_8));
393     w.println("hello");
394     w.println("");
395     w.println(" world  ");
396     w.println("");
397     w.close();
398     Files.readLines(temp, Charsets.UTF_8, collect);
399     assertThat(collect.getResult</b></font>()).containsExactly("hello", "", " world  ", "").inOrder();
400     LineProcessor&lt;List&lt;String&gt;&gt; collectNonEmptyLines =
401         new LineProcessor&lt;List&lt;String&gt;&gt;() {
402           List&lt;String&gt; collector = new ArrayList&lt;&gt;();
403           @Override
404           public boolean processLine(String line) {
405             if (line.length() &gt; 0) {
406               collector.add(line);
407             }
408             return true;
409           }
410           @Override
411           public List&lt;String&gt; getResult() {
412 <a name="15"></a>            return collector;
413           }
414         };
415     <font color="#f52887"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>Files.readLines(temp, Charsets.UTF_8, collectNonEmptyLines);
416     assertThat(collectNonEmptyLines.getResult()).containsExactly("hello", " world  ").inOrder();
417     assertTrue(temp.delete());
418   }
419   public v</b></font>oid testHash() throws IOException {
420     File asciiFile = getTestFile("ascii.txt");
421     File i18nFile = getTestFile("i18n.txt");
422     String init = "d41d8cd98f00b204e9800998ecf8427e";
423     assertEquals(init, Hashing.md5().newHasher().hash().toString());
424     String asciiHash = "e5df5a39f2b8cb71b24e1d8038f93131";
425     assertEquals(asciiHash, Files.hash(asciiFile, Hashing.md5()).toString());
426     String i18nHash = "7fa826962ce2079c8334cd4ebf33aea4";
427     assertEquals(i18nHash, Files.hash(i18nFile, Hashing.md5()).toString());
428   }
429   public void testMap() throws IOException {
430     int size = 1024;
431     byte[] bytes = newPreFilledByteArray(size);
432     File file = createTempFile();
433     Files.write(bytes, file);
434     MappedByteBuffer actual = Files.map(file);
435     ByteBuffer expected = ByteBuffer.wrap(bytes);
436     assertTrue("ByteBuffers should be equal.", expected.equals(actual));
437   }
438   public void testMap_noSuchFile() throws IOException {
439     File file = createTempFile();
440     boolean deleted = file.delete();
441     assertTrue(deleted);
442     try {
443       Files.map(file);
444       fail("Should have thrown FileNotFoundException.");
445     } catch (FileNotFoundException expected) {
446     }
447   }
448   public void testMap_readWrite() throws IOException {
449     int size = 1024;
450     byte[] expectedBytes = new byte[size];
451     byte[] bytes = newPreFilledByteArray(1024);
452     File file = createTempFile();
453     Files.write(bytes, file);
454     Random random = new Random();
455     random.nextBytes(expectedBytes);
456     MappedByteBuffer map = Files.map(file, MapMode.READ_WRITE);
457     map.put(expectedBytes);
458     byte[] actualBytes = Files.toByteArray(file);
459     assertTrue(Arrays.equals(expectedBytes, actualBytes));
460   }
461   public void testMap_readWrite_creates() throws IOException {
462     int size = 1024;
463     byte[] expectedBytes = newPreFilledByteArray(1024);
464 <a name="18"></a>    File file = createTempFile();
465     boolean deleted = file.delete();
466     assertTrue(deleted);
467     assertFalse(<font color="#800517"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>file.exists());
468     MappedByteBuffer map = Files.map(file, MapMode.READ_WRITE, size);
469     map.put(expectedBytes);
470     assertTrue(file.exists());
471     assertTrue(file.isFile());
472     assertEquals(size, file.length</b></font>());
473     byte[] actualBytes = Files.toByteArray(file);
474     assertTrue(Arrays.equals(expectedBytes, actualBytes));
475   }
476   public void testMap_readWrite_max_value_plus_1() throws IOException {
477     File file = createTempFile();
478     try {
479       Files.map(file, MapMode.READ_WRITE, (long) Integer.MAX_VALUE + 1);
480       fail("Should throw when size exceeds Integer.MAX_VALUE");
481     } catch (IllegalArgumentException expected) {
482     }
483 <a name="0"></a>  }
484   public void testGetFileExtension() {
485     <font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>assertEquals("txt", Files.getFileExtension(".txt"));
486     assertEquals("txt", Files.getFileExtension("blah.txt"));
487     assertEquals("txt", Files.getFileExtension("blah..txt"));
488     assertEquals("txt", Files.getFileExtension(".blah.txt"));
489     assertEquals("txt", Files.getFileExtension("/tmp/blah.txt"));
490     assertEquals("gz", Files.getFileExtension("blah.tar.gz"));
491     assertEquals("", Files.getFileExtension("/"));
492     assertEquals("", Files.getFileExtension("."));
493     assertEquals("", Files.getFileExtension(".."));
494     assertEquals("", Files.getFileExtension("..."));
495     assertEquals("", Files.getFileExtension("blah"));
496     assertEquals("", Files.getFileExtension("blah."));
497     assertEquals("", Files.getFileExtension(".blah."));
498     assertEquals("", Files.getFileExtension("/foo.bar/blah"));
499     assertEquals("", Files.getFileExtension("/foo/.bar/blah"));
500 <a name="1"></a>  }
501   public void testGetNameWith</b></font>outExtension() {
502     <font color="#f63526"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>assertEquals("", Files.getNameWithoutExtension(".txt"));
503     assertEquals("blah", Files.getNameWithoutExtension("blah.txt"));
504     assertEquals("blah.", Files.getNameWithoutExtension("blah..txt"));
505     assertEquals(".blah", Files.getNameWithoutExtension(".blah.txt"));
506     assertEquals("blah", Files.getNameWithoutExtension("/tmp/blah.txt"));
507     assertEquals("blah.tar", Files.getNameWithoutExtension("blah.tar.gz"));
508     assertEquals("", Files.getNameWithoutExtension("/"));
509     assertEquals("", Files.getNameWithoutExtension("."));
510     assertEquals(".", Files.getNameWithoutExtension(".."));
511     assertEquals("..", Files.getNameWithoutExtension("..."));
512     assertEquals("blah", Files.getNameWithoutExtension("blah"));
513     assertEquals("blah", Files.getNameWithoutExtension("blah."));
514     assertEquals(".blah", Files.getNameWithoutExtension(".blah."));
515     assertEquals("blah", Files.getNameWithoutExtension("/foo.bar/blah"));
516     assertEquals("blah", Files.getNameWithoutExtension</b></font>("/foo/.bar/blah"));
517   }
518   public void testReadBytes() throws IOException {
519     ByteProcessor&lt;byte[]&gt; processor =
520         new ByteProcessor&lt;byte[]&gt;() {
521           private final ByteArrayOutputStream out = new ByteArrayOutputStream();
522           @Override
523           public boolean processBytes(byte[] buffer, int offset, int length) throws IOException {
524             if (length &gt;= 0) {
525               out.write(buffer, offset, length);
526             }
527             return true;
528           }
529           @Override
530           public byte[] getResult() {
531             return out.toByteArray();
532           }
533         };
534     File asciiFile = getTestFile("ascii.txt");
535     byte[] result = Files.readBytes(asciiFile, processor);
536     assertEquals(Bytes.asList(Files.toByteArray(asciiFile)), Bytes.asList(result));
537   }
538   public void testReadBytes_returnFalse() throws IOException {
539     ByteProcessor&lt;byte[]&gt; processor =
540         new ByteProcessor&lt;byte[]&gt;() {
541           private final ByteArrayOutputStream out = new ByteArrayOutputStream();
542           @Override
543           public boolean processBytes(byte[] buffer, int offset, int length) throws IOException {
544             if (length &gt; 0) {
545               out.write(buffer, offset, 1);
546               return false;
547             } else {
548               return true;
549             }
550           }
551           @Override
552           public byte[] getResult() {
553             return out.toByteArray();
554           }
555         };
556     File asciiFile = getTestFile("ascii.txt");
557     byte[] result = Files.readBytes(asciiFile, processor);
558     assertEquals(1, result.length);
559   }
560 <a name="4"></a>
561   public void testPredicates() throws IOException {
562     File asciiFile = getTestFile("ascii.txt");
563     File dir = <font color="#6cc417"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>asciiFile.getParentFile();
564     assertTrue(Files.isDirectory().apply(dir));
565     assertFalse(Files.isFile().apply(dir));
566     assertFalse(Files.isDirectory().apply(asciiFile));
567     assertTrue(Files.isFile().apply(asciiFile));
568   }
569   priv</b></font>ate static File root() {
570     return File.listRoots()[0];
571   }
572   private static File file(String first, String... more) {
573     return file(new File(first), more);
574   }
575   private static File file(File first, String... more) {
576     File file = first;
577     for (String name : more) {
578       file = new File(file, name);
579     }
580     return file;
581   }
582 }
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
