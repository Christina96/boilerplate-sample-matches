
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 10.1010101010101%, Tokens: 10</h2>
        <div class="column">
            <h3>segmentfault-lessons-MDEwOlJlcG9zaXRvcnk5MzE1NzM4MQ==-flat-UserRibbonClientHystrixCommand_78.java</h3>
            <pre><code>1  package com.segumentfault.spring.cloud.lesson14.user.service.client.hystrix;
<span onclick='openModal()' class='match'>2  import com.netflix.hystrix.HystrixCommand;
3  import com.netflix.hystrix.HystrixCommandGroupKey;
4  import org.springframework.web.client.RestTemplate;
5  import java.util.Collection;
6  import java.util.Collections;
7  public class UserRibbonClientHystrixCommand extends HystrixCommand<Collection> {
8      private final String providerServiceName;
9      private final RestTemplate restTemplate;
10      public UserRibbonClientHystrixCommand(String providerServiceName, RestTemplate restTemplate) {
</span>11          super(HystrixCommandGroupKey.Factory.asKey(
12                  "User-Ribbon-Client"),
13                  100);
14          this.providerServiceName = providerServiceName;
15          this.restTemplate = restTemplate;
16      }
17      @Override
18      protected Collection run() throws Exception {
19          return restTemplate.getForObject("http:&bsol;&bsol;" + providerServiceName + "/user/list", Collection.class);
20      }
21      protected Collection getFallback() {
22          return Collections.emptyList();
23      }
24  }
</code></pre>
        </div>
        <div class="column">
            <h3>Essentials-MDEwOlJlcG9zaXRvcnkxNzczNzU0-flat-ZPermissionsHandler.java</h3>
            <pre><code>1  package com.earth2me.essentials.perm;
2  import java.util.ArrayList;
3  import java.util.List;
4  import java.util.Set;
5  import org.bukkit.Bukkit;
6  import org.bukkit.entity.Player;
<span onclick='openModal()' class='match'>7  import org.bukkit.event.EventHandler;
8  import org.bukkit.event.Listener;
9  import org.bukkit.event.server.ServiceRegisterEvent;
10  import org.bukkit.plugin.Plugin;
11  import org.tyrannyofheaven.bukkit.zPermissions.ZPermissionsService;
12  public class ZPermissionsHandler extends SuperpermsHandler implements Listener
13  {
14  	private ZPermissionsService service = null;
15  	private boolean hasGetPlayerPrimaryGroup = false; 
16  	public ZPermissionsHandler(Plugin plugin)
</span>17  	{
18  		acquireZPermissionsService();
19  		if (!isReady())
20  		{
21  			Bukkit.getPluginManager().registerEvents(this, plugin);
22  		}
23  	}
24  	@EventHandler
25  	public void onServiceRegister(ServiceRegisterEvent event)
26  	{
27  		if (ZPermissionsService.class.equals(event.getProvider().getService()))
28  		{
29  			acquireZPermissionsService();
30  		}
31  	}
32  	@Override
33  	public String getGroup(Player base)
34  	{
35  		if (!isReady())
36  		{
37  			return super.getGroup(base);
38  		}
39  		else
40  		{
41  			return getPrimaryGroup(base.getName());
42  		}
43  	}
44  	@Override
45  	public List<String> getGroups(Player base)
46  	{
47  		if (!isReady())
48  		{
49  			return super.getGroups(base);
50  		}
51  		else
52  		{
53  			return new ArrayList<String>(service.getPlayerGroups(base.getName()));
54  		}
55  	}
56  	@Override
57  	public boolean inGroup(Player base, String group)
58  	{
59  		if (!isReady())
60  		{
61  			return super.inGroup(base, group);
62  		}
63  		else
64  		{
65  			Set<String> groups = service.getPlayerGroups(base.getName());
66  			for (String test : groups)
67  			{
68  				if (test.equalsIgnoreCase(group))
69  				{
70  					return true;
71  				}
72  			}
73  			return false;
74  		}
75  	}
76  	@Override
77  	public String getPrefix(Player base)
78  	{
79  		if (!isReady())
80  		{
81  			return super.getPrefix(base);
82  		}
83  		else
84  		{
85  			return getPrefixSuffix(base, "prefix");
86  		}
87  	}
88  	@Override
89  	public String getSuffix(Player base)
90  	{
91  		if (!isReady())
92  		{
93  			return super.getSuffix(base);
94  		}
95  		else
96  		{
97  			return getPrefixSuffix(base, "suffix");
98  		}
99  	}
100  	private String getPrefixSuffix(Player base, String metadataName)
101  	{
102  		String playerPrefixSuffix;
103  		try
104  		{
105  			playerPrefixSuffix = service.getPlayerMetadata(base.getName(), metadataName, String.class);
106  		}
107  		catch (IllegalStateException e)
108  		{
109  			playerPrefixSuffix = null;
110  		}
111  		if (playerPrefixSuffix == null)
112  		{
113  			try
114  			{
115  				return service.getGroupMetadata(getPrimaryGroup(base.getName()), metadataName, String.class);
116  			}
117  			catch (IllegalStateException e)
118  			{
119  				return null;
120  			}
121  		}
122  		else
123  		{
124  			return playerPrefixSuffix;
125  		}
126  	}
127  	private void acquireZPermissionsService()
128  	{
129  		service = Bukkit.getServicesManager().load(ZPermissionsService.class);
130  		if (isReady())
131  		{
132  			try
133  			{
134  				service.getClass().getMethod("getPlayerPrimaryGroup", String.class);
135  				hasGetPlayerPrimaryGroup = true;
136  			}
137  			catch (NoSuchMethodException e)
138  			{
139  				hasGetPlayerPrimaryGroup = false;
140  			}
141  			catch (SecurityException e)
142  			{
143  				hasGetPlayerPrimaryGroup = false;
144  			}
145  		}
146  	}
147  	private boolean isReady()
148  	{
149  		return service != null;
150  	}
151  	private String getPrimaryGroup(String playerName)
152  	{
153  		if (hasGetPlayerPrimaryGroup)
154  		{
155  			return service.getPlayerPrimaryGroup(playerName);
156  		}
157  		else
158  		{
159  			List<String> groups = service.getPlayerAssignedGroups(playerName);
160  			return groups.get(0);
161  		}
162  	}
163  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from segmentfault-lessons-MDEwOlJlcG9zaXRvcnk5MzE1NzM4MQ==-flat-UserRibbonClientHystrixCommand_78.java</div>
                <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from Essentials-MDEwOlJlcG9zaXRvcnkxNzczNzU0-flat-ZPermissionsHandler.java</div>
                <div class="column column_space"><pre><code>2  import com.netflix.hystrix.HystrixCommand;
3  import com.netflix.hystrix.HystrixCommandGroupKey;
4  import org.springframework.web.client.RestTemplate;
5  import java.util.Collection;
6  import java.util.Collections;
7  public class UserRibbonClientHystrixCommand extends HystrixCommand<Collection> {
8      private final String providerServiceName;
9      private final RestTemplate restTemplate;
10      public UserRibbonClientHystrixCommand(String providerServiceName, RestTemplate restTemplate) {
</pre></code></div>
                <div class="column column_space"><pre><code>7  import org.bukkit.event.EventHandler;
8  import org.bukkit.event.Listener;
9  import org.bukkit.event.server.ServiceRegisterEvent;
10  import org.bukkit.plugin.Plugin;
11  import org.tyrannyofheaven.bukkit.zPermissions.ZPermissionsService;
12  public class ZPermissionsHandler extends SuperpermsHandler implements Listener
13  {
14  	private ZPermissionsService service = null;
15  	private boolean hasGetPlayerPrimaryGroup = false; 
16  	public ZPermissionsHandler(Plugin plugin)
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    