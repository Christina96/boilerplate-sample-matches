<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for ImmutableTableTest.java &amp; MapInterfaceTest_1.java</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for ImmutableTableTest.java &amp; MapInterfaceTest_1.java
      </h3>
<h1 align="center">
        21.5%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>ImmutableTableTest.java (50.813007%)<th>MapInterfaceTest_1.java (13.6861315%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(241-250)<td><a href="#" name="0">(170-177)</a><td align="center"><font color="#ff0000">18</font>
<tr onclick='openModal("#f63526")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f63526"><font color="#f63526">-</font><td><a href="#" name="1">(311-318)<td><a href="#" name="1">(831-840)</a><td align="center"><font color="#f00000">17</font>
<tr onclick='openModal("#980517")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#980517"><font color="#980517">-</font><td><a href="#" name="2">(191-197)<td><a href="#" name="2">(900-909)</a><td align="center"><font color="#f00000">17</font>
<tr onclick='openModal("#53858b")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#53858b"><font color="#53858b">-</font><td><a href="#" name="3">(327-333)<td><a href="#" name="3">(807-815)</a><td align="center"><font color="#e20000">16</font>
<tr onclick='openModal("#6cc417")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#6cc417"><font color="#6cc417">-</font><td><a href="#" name="4">(259-270)<td><a href="#" name="4">(227-234)</a><td align="center"><font color="#e20000">16</font>
<tr onclick='openModal("#151b8d")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#151b8d"><font color="#151b8d">-</font><td><a href="#" name="5">(147-158)<td><a href="#" name="5">(388-395)</a><td align="center"><font color="#e20000">16</font>
<tr onclick='openModal("#8c8774")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#8c8774"><font color="#8c8774">-</font><td><a href="#" name="6">(201-208)<td><a href="#" name="6">(182-189)</a><td align="center"><font color="#d40000">15</font>
<tr onclick='openModal("#38a4a5")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#38a4a5"><font color="#38a4a5">-</font><td><a href="#" name="7">(212-224)<td><a href="#" name="7">(848-855)</a><td align="center"><font color="#c60000">14</font>
<tr onclick='openModal("#c58917")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#c58917"><font color="#c58917">-</font><td><a href="#" name="8">(360-364)<td><a href="#" name="8">(1075-1082)</a><td align="center"><font color="#b80000">13</font>
<tr onclick='openModal("#83a33a")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#83a33a"><font color="#83a33a">-</font><td><a href="#" name="9">(344-348)<td><a href="#" name="9">(989-996)</a><td align="center"><font color="#b80000">13</font>
<tr onclick='openModal("#ad5910")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#ad5910"><font color="#ad5910">-</font><td><a href="#" name="10">(280-290)<td><a href="#" name="10">(200-205)</a><td align="center"><font color="#b80000">13</font>
<tr onclick='openModal("#b041ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#b041ff"><font color="#b041ff">-</font><td><a href="#" name="11">(73-81)<td><a href="#" name="11">(416-423)</a><td align="center"><font color="#b80000">13</font>
<tr onclick='openModal("#571b7e")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#571b7e"><font color="#571b7e">-</font><td><a href="#" name="12">(47-55)<td><a href="#" name="12">(593-600)</a><td align="center"><font color="#b80000">13</font>
<tr onclick='openModal("#3b9c9c")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#3b9c9c"><font color="#3b9c9c">-</font><td><a href="#" name="13">(367-375)<td><a href="#" name="13">(1226-1234)</a><td align="center"><font color="#aa0000">12</font>
<tr onclick='openModal("#842dce")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#842dce"><font color="#842dce">-</font><td><a href="#" name="14">(300-309)<td><a href="#" name="14">(1134-1140)</a><td align="center"><font color="#aa0000">12</font>
<tr onclick='openModal("#f52887")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f52887"><font color="#f52887">-</font><td><a href="#" name="15">(270-274)<td><a href="#" name="15">(190-194)</a><td align="center"><font color="#aa0000">12</font>
<tr onclick='openModal("#2981b2")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#2981b2"><font color="#2981b2">-</font><td><a href="#" name="16">(225-235)<td><a href="#" name="16">(1018-1024)</a><td align="center"><font color="#aa0000">12</font>
<tr onclick='openModal("#3090c7")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#3090c7"><font color="#3090c7">-</font><td><a href="#" name="17">(100-106)<td><a href="#" name="17">(480-486)</a><td align="center"><font color="#aa0000">12</font>
<tr onclick='openModal("#800517")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#800517"><font color="#800517">-</font><td><a href="#" name="18">(296-298)<td><a href="#" name="18">(1107-1113)</a><td align="center"><font color="#9b0000">11</font>
<tr onclick='openModal("#f62817")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f62817"><font color="#f62817">-</font><td><a href="#" name="19">(172-178)<td><a href="#" name="19">(279-284)</a><td align="center"><font color="#9b0000">11</font>
<tr onclick='openModal("#4e9258")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#4e9258"><font color="#4e9258">-</font><td><a href="#" name="20">(94-99)<td><a href="#" name="20">(1274-1278)</a><td align="center"><font color="#9b0000">11</font>
<tr onclick='openModal("#947010")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#947010"><font color="#947010">-</font><td><a href="#" name="21">(88-93)<td><a href="#" name="21">(780-785)</a><td align="center"><font color="#9b0000">11</font>
<tr onclick='openModal("#4cc417")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#4cc417"><font color="#4cc417">-</font><td><a href="#" name="22">(350-357)<td><a href="#" name="22">(1268-1272)</a><td align="center"><font color="#8d0000">10</font>
<tr onclick='openModal("#f660ab")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f660ab"><font color="#f660ab">-</font><td><a href="#" name="23">(334-341)<td><a href="#" name="23">(465-473)</a><td align="center"><font color="#8d0000">10</font>
<tr onclick='openModal("#79764d")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#79764d"><font color="#79764d">-</font><td><a href="#" name="24">(166-171)<td><a href="#" name="24">(656-660)</a><td align="center"><font color="#8d0000">10</font>
<tr onclick='openModal("#5eac10")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#5eac10"><font color="#5eac10">-</font><td><a href="#" name="25">(160-165)<td><a href="#" name="25">(474-478)</a><td align="center"><font color="#8d0000">10</font>
<tr onclick='openModal("#68818b")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#68818b"><font color="#68818b">-</font><td><a href="#" name="26">(58-67)<td><a href="#" name="26">(537-543)</a><td align="center"><font color="#8d0000">10</font>
<tr onclick='openModal("#e77471")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#e77471"><font color="#e77471">-</font><td><a href="#" name="27">(251-253)<td><a href="#" name="27">(1047-1052)</a><td align="center"><font color="#7f0000">9</font>
<tr onclick='openModal("#717d7d")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#717d7d"><font color="#717d7d">-</font><td><a href="#" name="28">(82-86)<td><a href="#" name="28">(564-569)</a><td align="center"><font color="#7f0000">9</font>
<tr onclick='openModal("#af7a82")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#af7a82"><font color="#af7a82">-</font><td><a href="#" name="29">(19-33)<td><a href="#" name="29">(24-44)</a><td align="center"><font color="#7f0000">9</font>
</td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>ImmutableTableTest.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 <a name="29"></a>
2 package com.google.common.collect;
3 <font color="#af7a82"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>import static com.google.common.truth.Truth.assertThat;
4 import com.google.common.annotations.GwtCompatible;
5 import com.google.common.annotations.GwtIncompatible;
6 import com.google.common.collect.Table.Cell;
7 import com.google.common.testing.CollectorTester;
8 import com.google.common.testing.SerializableTester;
9 import java.util.stream.Collector;
10 @</b></font>GwtCompatible(emulated = true)
11 public class ImmutableTableTest extends AbstractTableReadTest {
12   @Override
13   protected Table&lt;String, Integer, Character&gt; create(Object... data) {
14     ImmutableTable.Builder&lt;String, Integer, Character&gt; builder = ImmutableTable.builder();
15     for (int i = 0; i &lt; data.length; i = i + 3) {
16       builder.put((String) data[i], (Integer) data[i + 1], (Character) data[i + 2]);
17     }
18     return builder.build();
19   }
20 <a name="12"></a>    public void testToImmutableTableSanityTest() {
21     <font color="#571b7e"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>Collector&lt;Cell&lt;String, String, Integer&gt;, ?, ImmutableTable&lt;String, String, Integer&gt;&gt; collector =
22         TableCollectors.toImmutableTable(Cell::getRowKey, Cell::getColumnKey, Cell::getValue);
23     CollectorTester.of(collector)
24         .expectCollects(ImmutableTable.of())
25         .expectCollects(ImmutableTable.of("one", "uno", 1), Tables.immutableCell("one", "uno", 1));
26   }
27   public void testToImmutableTableMergingSanityTest() {
28 <a name="26"></a>    Collector&lt;Cell&lt;String, String, Integer&gt;, ?, ImmutableTable&lt;String, String, Integer&gt;&gt; collector =</b></font>
29         TableCollectors.toImmutableTable(
30             Cell::getRowKey, Cell::getColumnKey, Cell::getValue, Integer::sum);
31     <font color="#68818b"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>CollectorTester.of(collector)
32         .expectCollects(ImmutableTable.of())
33         .expectCollects(
34             ImmutableTable.of("one", "uno", 3),
35             Tables.immutableCell("one", "uno", 1),
36             Tables.immutableCell("one", "uno", 2));
37   }
38   public void testBuilder() {
39     ImmutableTable.Builder&lt;Character, Integer, String&gt; builder = new ImmutableTable.Builder&lt;&gt;()</b></font>;
40     assertEquals(ImmutableTable.of(), builder.build());
41     assertEquals(ImmutableTable.of('a', 1, "foo"), builder.put('a', 1, "foo").build());
42 <a name="11"></a>    Table&lt;Character, Integer, String&gt; expectedTable = HashBasedTable.create();
43     expectedTable.put('a', 1, "foo");
44     expectedTable.put('b', 1, "bar");
45     <font color="#b041ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>expectedTable.put('a', 2, "baz");
46     Table&lt;Character, Integer, String&gt; otherTable = HashBasedTable.create();
47     otherTable.put('b', 1, "bar");
48     otherTable.put('a', 2, "baz");
49     assertEquals(expectedTable, builder.putAll(otherTable).build());
50   }
51 <a name="28"></a>
52   public void testBuilder_withImmutableCell() {
53     ImmutableTable.Builder&lt;Character, Integer, String&gt; builder = new ImmutableTable.Builder&lt;&gt;()</b></font>;
54     <font color="#717d7d"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>assertEquals(
55         ImmutableTable.of('a', 1, "foo"), builder.put(Tables.immutableCell('a', 1, "foo")).build());
56   }
57 <a name="21"></a>
58   public void testBuilder_withImmutableCellAndNullContents() {</b></font>
59     ImmutableTable.Builder&lt;Character, Integer, String&gt; builder = new ImmutableTable.Builder&lt;&gt;();
60     <font color="#947010"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>try {
61       builder.put(Tables.immutableCell((Character) null, 1, "foo"));
62       fail();
63 <a name="20"></a>    } catch (NullPointerException e) {
64     }</b></font>
65     <font color="#4e9258"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>try {
66       builder.put(Tables.immutableCell('a', (Integer) null, "foo"));
67       fail();
68 <a name="17"></a>    } catch (NullPointerException e) {
69     }</b></font>
70     <font color="#3090c7"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>try {
71       builder.put(Tables.immutableCell('a', 1, (String) null));
72       fail();
73     } catch (NullPointerException e) {
74     }
75   }</b></font>
76   private static class StringHolder {
77     String string;
78   }
79   public void testBuilder_withMutableCell() {
80     ImmutableTable.Builder&lt;Character, Integer, String&gt; builder = new ImmutableTable.Builder&lt;&gt;();
81     final StringHolder holder = new StringHolder();
82     holder.string = "foo";
83     Table.Cell&lt;Character, Integer, String&gt; mutableCell =
84         new Tables.AbstractCell&lt;Character, Integer, String&gt;() {
85           @Override
86           public Character getRowKey() {
87             return 'K';
88           }
89           @Override
90           public Integer getColumnKey() {
91             return 42;
92           }
93           @Override
94           public String getValue() {
95             return holder.string;
96           }
97         };
98     builder.put(mutableCell);
99     holder.string = "bar";
100     assertEquals(ImmutableTable.of('K', 42, "foo"), builder.build());
101   }
102 <a name="5"></a>
103   public void testBuilder_noDuplicates() {
104     ImmutableTable.Builder&lt;Character, Integer, String&gt; builder =
105         <font color="#151b8d"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>new ImmutableTable.Builder&lt;Character, Integer, String&gt;()
106             .put('a', 1, "foo")
107             .put('a', 1, "bar");
108     try {
109       builder.build();
110       fail();
111     } catch (IllegalArgumentException e) {
112     }
113   }
114 <a name="25"></a>
115   public void testBuilder_noNulls() {</b></font>
116     ImmutableTable.Builder&lt;Character, Integer, String&gt; builder = new ImmutableTable.Builder&lt;&gt;();
117     <font color="#5eac10"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>try {
118       builder.put(null, 1, "foo");
119       fail();
120 <a name="24"></a>    } catch (NullPointerException e) {
121     }</b></font>
122     <font color="#79764d"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>try {
123       builder.put('a', null, "foo");
124       fail();
125 <a name="19"></a>    } catch (NullPointerException e) {
126     }</b></font>
127     <font color="#f62817"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>try {
128       builder.put('a', 1, null);
129       fail();
130     } catch (NullPointerException e) {
131     }
132   }</b></font>
133   private static &lt;R, C, V&gt; void validateTableCopies(Table&lt;R, C, V&gt; original) {
134     Table&lt;R, C, V&gt; copy = ImmutableTable.copyOf(original);
135     assertEquals(original, copy);
136     validateViewOrdering(original, copy);
137     Table&lt;R, C, V&gt; built = ImmutableTable.&lt;R, C, V&gt;builder().putAll(original).build();
138     assertEquals(original, built);
139     validateViewOrdering(original, built);
140 <a name="2"></a>  }
141   private static &lt;R, C, V&gt; void validateViewOrdering(Table&lt;R, C, V&gt; original, Table&lt;R, C, V&gt; copy) {
142     assertThat(<font color="#980517"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>copy.cellSet()).containsExactlyElementsIn(original.cellSet()).inOrder();
143     assertThat(copy.rowKeySet()).containsExactlyElementsIn(original.rowKeySet()).inOrder();
144     assertThat(copy.values()).containsExactlyElementsIn(original.values()).inOrder();
145   }
146   public void testCopyOf() {
147     Table&lt;Character, Integer, String&gt; table = TreeBasedTable.create()</b></font>;
148 <a name="6"></a>    validateTableCopies(table);
149     table.put('b', 2, "foo");
150     validateTableCopies(table);
151     <font color="#8c8774"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>table.put('b', 1, "bar");
152     table.put('a', 2, "baz");
153     validateTableCopies(table);
154     assertThat(table.row('b').keySet()).containsExactly(1, 2).inOrder();
155     assertThat(ImmutableTable.copyOf(table).row('b').keySet()).containsExactly(2, 1).inOrder();
156   }</b></font>
157 <a name="7"></a>
158   public void testCopyOfSparse() {
159     Table&lt;Character, Integer, String&gt; table = TreeBasedTable.create();
160     <font color="#38a4a5"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>table.put('x', 2, "foo");
161     table.put('r', 1, "bar");
162     table.put('c', 3, "baz");
163     table.put('b', 7, "cat");
164     table.put('e', 5, "dog");
165     table.put('c', 0, "axe");
166     table.put('e', 3, "tub");
167     table.put('r', 4, "foo");
168     table.put('x', 5, "bar");
169     validateTableCopies(table);
170 <a name="16"></a>  }
171   public void testCopyOfDense() {</b></font>
172     <font color="#2981b2"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>Table&lt;Character, Integer, String&gt; table = TreeBasedTable.create();
173     table.put('c', 3, "foo");
174     table.put('c', 2, "bar");
175     table.put('c', 1, "baz");
176     table.put('b', 3, "cat");
177     table.put('b', 1, "dog");
178     table.put('a', 3, "foo");
179     table.put('a', 2, "bar");
180     table.put('a', 1, "baz");
181     validateTableCopies(table);
182   }</b></font>
183   public void testBuilder_orderRowsAndColumnsBy_putAll() {
184 <a name="0"></a>    Table&lt;Character, Integer, String&gt; table = HashBasedTable.create();
185     table.put('b', 2, "foo");
186     table.put('b', 1, "bar");
187     <font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>table.put('a', 2, "baz");
188     ImmutableTable.Builder&lt;Character, Integer, String&gt; builder = ImmutableTable.builder();
189     Table&lt;Character, Integer, String&gt; copy =
190         builder
191             .orderRowsBy(Ordering.natural())
192             .orderColumnsBy(Ordering.natural())
193             .putAll(table)
194 <a name="27"></a>            .build();
195     assertThat(copy.rowKeySet()).containsExactly('a', 'b').inOrder();
196     assertThat(copy.columnKeySet</b></font>()).containsExactly(1, 2).inOrder();
197     <font color="#e77471"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>assertThat(copy.values()).containsExactly("baz", "bar", "foo").inOrder();
198     assertThat(copy.row('b').keySet()).containsExactly(1, 2).inOrder();
199   }</b></font>
200   public void testBuilder_orderRowsAndColumnsBy_sparse() {
201 <a name="4"></a>    ImmutableTable.Builder&lt;Character, Integer, String&gt; builder = ImmutableTable.builder();
202     builder.orderRowsBy(Ordering.natural());
203     builder.orderColumnsBy(Ordering.natural());
204     <font color="#6cc417"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>builder.put('x', 2, "foo");
205     builder.put('r', 1, "bar");
206     builder.put('c', 3, "baz");
207     builder.put('b', 7, "cat");
208     builder.put('e', 5, "dog");
209     builder.put('c', 0, "axe");
210     builder.put('e', 3, "tub");
211     builder.put('r', 4, "foo");
212 <a name="15"></a>    builder.put('x', 5, "bar");
213     Table&lt;Character, Integer, String&gt; table = builder.build();
214     assertThat(table.rowKeySet()).containsExactly('b', 'c', 'e', 'r', 'x').inOrder();
215     <font color="#f52887"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>assertThat(table.columnKeySet()).containsExactly(0, 1, 2, 3, 4, 5, 7).inOrder</b></font>();
216     assertThat(table.values())
217         .containsExactly("cat", "axe", "baz", "tub", "dog", "bar", "foo", "foo", "bar")
218         .inOrder();
219     assertThat(table.row</b></font>('c').keySet()).containsExactly(0, 3).inOrder();
220     assertThat(table.column(5).keySet()).containsExactly('e', 'x').inOrder();
221   }
222 <a name="10"></a>
223   public void testBuilder_orderRowsAndColumnsBy_dense() {
224     ImmutableTable.Builder&lt;Character, Integer, String&gt; builder = ImmutableTable.builder();
225     builder.orderRowsBy(<font color="#ad5910"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>Ordering.natural());
226     builder.orderColumnsBy(Ordering.natural());
227     builder.put('c', 3, "foo");
228     builder.put('c', 2, "bar");
229     builder.put('c', 1, "baz");
230     builder.put('b', 3, "cat");
231     builder.put('b', 1, "dog");
232     builder.put('a', 3, "foo");
233     builder.put('a', 2, "bar");
234     builder.put('a', 1, "baz");
235     Table&lt;Character, Integer, String&gt; table = builder.build</b></font>();
236     assertThat(table.rowKeySet()).containsExactly('a', 'b', 'c').inOrder();
237     assertThat(table.columnKeySet()).containsExactly(1, 2, 3).inOrder();
238 <a name="18"></a>    assertThat(table.values())
239         .containsExactly("baz", "bar", "foo", "dog", "cat", "baz", "bar", "foo")
240         .inOrder();
241     <font color="#800517"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>assertThat(table.row('c').keySet()).containsExactly(1, 2, 3).inOrder();
242 <a name="14"></a>    assertThat(table.column(1).keySet()).containsExactly('a', 'b', 'c').inOrder();
243   }</b></font>
244   public void testBuilder_orderRowsBy_sparse() <font color="#842dce"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>{
245     ImmutableTable.Builder&lt;Character, Integer, String&gt; builder = ImmutableTable.builder();
246     builder.orderRowsBy(Ordering.natural());
247     builder.put('x', 2, "foo");
248     builder.put('r', 1, "bar");
249     builder.put('c', 3, "baz");
250     builder.put('b', 7, "cat");
251     builder.put('e', 5, "dog");
252 <a name="1"></a>    builder.put('c', 0, "axe");
253     builder.put</b></font>('e', 3, "tub");
254     builder.put('r', 4, "foo");
255     <font color="#f63526"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>builder.put('x', 5, "bar");
256     Table&lt;Character, Integer, String&gt; table = builder.build();
257     assertThat(table.rowKeySet()).containsExactly('b', 'c', 'e', 'r', 'x').inOrder();
258     assertThat(table.column(5).keySet()).containsExactly('e', 'x').inOrder();
259   }
260   public void testBuilder_orderRowsBy_dense() {
261     ImmutableTable.Builder&lt;Character, Integer, String&gt; builder = ImmutableTable.builder()</b></font>;
262     builder.orderRowsBy(Ordering.natural());
263     builder.put('c', 3, "foo");
264     builder.put('c', 2, "bar");
265     builder.put('c', 1, "baz");
266     builder.put('b', 3, "cat");
267 <a name="3"></a>    builder.put('b', 1, "dog");
268     builder.put('a', 3, "foo");
269     builder.put('a', 2, "bar");
270     <font color="#53858b"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>builder.put('a', 1, "baz");
271     Table&lt;Character, Integer, String&gt; table = builder.build();
272     assertThat(table.rowKeySet()).containsExactly('a', 'b', 'c').inOrder();
273     assertThat(table.column(1).keySet()).containsExactly('a', 'b', 'c').inOrder();
274 <a name="23"></a>  }
275   public void testBuilder_orderColumnsBy_sparse() {</b></font>
276     <font color="#f660ab"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>ImmutableTable.Builder&lt;Character, Integer, String&gt; builder = ImmutableTable.builder();
277     builder.orderColumnsBy(Ordering.natural());
278     builder.put('x', 2, "foo");
279     builder.put('r', 1, "bar");
280     builder.put('c', 3, "baz");
281     builder.put('b', 7, "cat");
282     builder.put('e', 5, "dog");
283 <a name="9"></a>    builder.put</b></font>('c', 0, "axe");
284     builder.put('e', 3, "tub");
285     builder.put('r', 4, "foo");
286     <font color="#83a33a"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>builder.put('x', 5, "bar");
287     Table&lt;Character, Integer, String&gt; table = builder.build();
288     assertThat(table.columnKeySet()).containsExactly(0, 1, 2, 3, 4, 5, 7).inOrder();
289 <a name="22"></a>    assertThat(table.row('c').keySet()).containsExactly(0, 3).inOrder();
290   }</b></font>
291   public void testBuilder_orderColumnsBy_dense() <font color="#4cc417"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>{
292     ImmutableTable.Builder&lt;Character, Integer, String&gt; builder = ImmutableTable.builder();
293     builder.orderColumnsBy(Ordering.natural());
294     builder.put('c', 3, "foo");
295     builder.put('c', 2, "bar");
296     builder.put('c', 1, "baz");
297     builder.put('b', 3, "cat");
298 <a name="8"></a>    builder.put</b></font>('b', 1, "dog");
299     builder.put('a', 3, "foo");
300     builder.put('a', 2, "bar");
301     <font color="#c58917"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>builder.put('a', 1, "baz");
302     Table&lt;Character, Integer, String&gt; table = builder.build();
303     assertThat(table.columnKeySet()).containsExactly(1, 2, 3).inOrder();
304     assertThat(table.row('c').keySet()).containsExactly(1, 2, 3).inOrder();
305 <a name="13"></a>  }</b></font>
306   public void testSerialization_empty() {
307     validateReserialization(<font color="#3b9c9c"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>ImmutableTable.of());
308   }
309   public void testSerialization_singleElement() {
310     validateReserialization(ImmutableTable.of('a', 2, "foo"));
311   }
312   public void testDenseSerialization_manualOrder() {
313     ImmutableTable.Builder&lt;Character, Integer, String&gt; builder = ImmutableTable.builder()</b></font>;
314     builder.put('b', 2, "foo");
315     builder.put('b', 1, "bar");
316     builder.put('a', 2, "baz");
317     Table&lt;Character, Integer, String&gt; table = builder.build();
318     assertThat(table).isInstanceOf(DenseImmutableTable.class);
319     validateReserialization(table);
320   }
321   public void testDenseSerialization_rowOrder() {
322     ImmutableTable.Builder&lt;Character, Integer, String&gt; builder = ImmutableTable.builder();
323     builder.orderRowsBy(Ordering.&lt;Character&gt;natural());
324     builder.put('b', 2, "foo");
325     builder.put('b', 1, "bar");
326     builder.put('a', 2, "baz");
327     Table&lt;Character, Integer, String&gt; table = builder.build();
328     assertThat(table).isInstanceOf(DenseImmutableTable.class);
329     validateReserialization(table);
330   }
331   public void testDenseSerialization_columnOrder() {
332     ImmutableTable.Builder&lt;Character, Integer, String&gt; builder = ImmutableTable.builder();
333     builder.orderColumnsBy(Ordering.&lt;Integer&gt;natural());
334     builder.put('b', 2, "foo");
335     builder.put('b', 1, "bar");
336     builder.put('a', 2, "baz");
337     Table&lt;Character, Integer, String&gt; table = builder.build();
338     assertThat(table).isInstanceOf(DenseImmutableTable.class);
339     validateReserialization(table);
340   }
341   public void testDenseSerialization_bothOrders() {
342     ImmutableTable.Builder&lt;Character, Integer, String&gt; builder = ImmutableTable.builder();
343     builder.orderRowsBy(Ordering.&lt;Character&gt;natural());
344     builder.orderColumnsBy(Ordering.&lt;Integer&gt;natural());
345     builder.put('b', 2, "foo");
346     builder.put('b', 1, "bar");
347     builder.put('a', 2, "baz");
348     Table&lt;Character, Integer, String&gt; table = builder.build();
349     assertThat(table).isInstanceOf(DenseImmutableTable.class);
350     validateReserialization(table);
351   }
352   public void testSparseSerialization_manualOrder() {
353     ImmutableTable.Builder&lt;Character, Integer, String&gt; builder = ImmutableTable.builder();
354     builder.put('b', 2, "foo");
355     builder.put('b', 1, "bar");
356     builder.put('a', 2, "baz");
357     builder.put('c', 3, "cat");
358     builder.put('d', 4, "dog");
359     Table&lt;Character, Integer, String&gt; table = builder.build();
360     assertThat(table).isInstanceOf(SparseImmutableTable.class);
361     validateReserialization(table);
362   }
363   public void testSparseSerialization_rowOrder() {
364     ImmutableTable.Builder&lt;Character, Integer, String&gt; builder = ImmutableTable.builder();
365     builder.orderRowsBy(Ordering.&lt;Character&gt;natural());
366     builder.put('b', 2, "foo");
367     builder.put('b', 1, "bar");
368     builder.put('a', 2, "baz");
369     builder.put('c', 3, "cat");
370     builder.put('d', 4, "dog");
371     Table&lt;Character, Integer, String&gt; table = builder.build();
372     assertThat(table).isInstanceOf(SparseImmutableTable.class);
373     validateReserialization(table);
374   }
375   public void testSparseSerialization_columnOrder() {
376     ImmutableTable.Builder&lt;Character, Integer, String&gt; builder = ImmutableTable.builder();
377     builder.orderColumnsBy(Ordering.&lt;Integer&gt;natural());
378     builder.put('b', 2, "foo");
379     builder.put('b', 1, "bar");
380     builder.put('a', 2, "baz");
381     builder.put('c', 3, "cat");
382     builder.put('d', 4, "dog");
383     Table&lt;Character, Integer, String&gt; table = builder.build();
384     assertThat(table).isInstanceOf(SparseImmutableTable.class);
385     validateReserialization(table);
386   }
387   public void testSparseSerialization_bothOrders() {
388     ImmutableTable.Builder&lt;Character, Integer, String&gt; builder = ImmutableTable.builder();
389     builder.orderRowsBy(Ordering.&lt;Character&gt;natural());
390     builder.orderColumnsBy(Ordering.&lt;Integer&gt;natural());
391     builder.put('b', 2, "foo");
392     builder.put('b', 1, "bar");
393     builder.put('a', 2, "baz");
394     builder.put('c', 3, "cat");
395     builder.put('d', 4, "dog");
396     Table&lt;Character, Integer, String&gt; table = builder.build();
397     assertThat(table).isInstanceOf(SparseImmutableTable.class);
398     validateReserialization(table);
399   }
400   private static &lt;R, C, V&gt; void validateReserialization(Table&lt;R, C, V&gt; original) {
401     Table&lt;R, C, V&gt; copy = SerializableTester.reserializeAndAssert(original);
402     assertThat(copy.cellSet()).containsExactlyElementsIn(original.cellSet()).inOrder();
403     assertThat(copy.rowKeySet()).containsExactlyElementsIn(original.rowKeySet()).inOrder();
404     assertThat(copy.columnKeySet()).containsExactlyElementsIn(original.columnKeySet()).inOrder();
405   }
406   @GwtIncompatible   @AndroidIncompatible   public void testOverflowCondition() {
407     ImmutableTable.Builder&lt;Integer, Integer, String&gt; builder = ImmutableTable.builder();
408     for (int i = 1; i &lt; 0x10000; i++) {
409       builder.put(i, 0, "foo");
410       builder.put(0, i, "bar");
411     }
412     assertTrue(builder.build() instanceof SparseImmutableTable);
413   }
414 }
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>MapInterfaceTest_1.java</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 package com.google.common.collect.testing;
2 import static java.util.Collections.singleton;
3 <a name="29"></a>import com.google.common.annotations.GwtCompatible;
4 import java.util.Arrays;
5 import java.util.Collection;
6 <font color="#af7a82"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>import java.util.Collections;
7 import java.util.HashSet;
8 import java.util.Iterator;
9 import java.util.Map;
10 import java.util.Map.Entry;
11 import java.util.Set;
12 import junit.framework.TestCase;
13 @</b></font>GwtCompatible
14 public abstract class MapInterfaceTest&lt;K, V&gt; extends TestCase {
15   private static final class IncompatibleKeyType {
16     @Override
17     public String toString() {
18       return "IncompatibleKeyType";
19     }
20   }
21   protected final boolean supportsPut;
22   protected final boolean supportsRemove;
23   protected final boolean supportsClear;
24   protected final boolean allowsNullKeys;
25   protected final boolean allowsNullValues;
26   protected final boolean supportsIteratorRemove;
27   protected abstract Map&lt;K, V&gt; makeEmptyMap() throws UnsupportedOperationException;
28   protected abstract Map&lt;K, V&gt; makePopulatedMap() throws UnsupportedOperationException;
29   protected abstract K getKeyNotInPopulatedMap() throws UnsupportedOperationException;
30   protected abstract V getValueNotInPopulatedMap() throws UnsupportedOperationException;
31   protected MapInterfaceTest(
32       boolean allowsNullKeys,
33       boolean allowsNullValues,
34       boolean supportsPut,
35       boolean supportsRemove,
36       boolean supportsClear) {
37     this(
38         allowsNullKeys,
39         allowsNullValues,
40         supportsPut,
41         supportsRemove,
42         supportsClear,
43         supportsRemove);
44   }
45   protected MapInterfaceTest(
46       boolean allowsNullKeys,
47       boolean allowsNullValues,
48       boolean supportsPut,
49       boolean supportsRemove,
50       boolean supportsClear,
51       boolean supportsIteratorRemove) {
52     this.supportsPut = supportsPut;
53     this.supportsRemove = supportsRemove;
54     this.supportsClear = supportsClear;
55     this.allowsNullKeys = allowsNullKeys;
56     this.allowsNullValues = allowsNullValues;
57     this.supportsIteratorRemove = supportsIteratorRemove;
58   }
59   protected Map&lt;K, V&gt; makeEitherMap() {
60     try {
61       return makePopulatedMap();
62     } catch (UnsupportedOperationException e) {
63       return makeEmptyMap();
64     }
65   }
66   protected final boolean supportsValuesHashCode(Map&lt;K, V&gt; map) {
67     Collection&lt;V&gt; values = map.values();
68     for (V value : values) {
69       if (value != null) {
70         try {
71           int unused = value.hashCode();
72         } catch (Exception e) {
73           return false;
74         }
75         return true;
76       }
77     }
78     return true;
79   }
80   protected final void assertInvariants(Map&lt;K, V&gt; map) {
81     Set&lt;K&gt; keySet = <font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>map.keySet();
82     Collection&lt;V&gt; valueCollection = map.values();
83     Set&lt;Entry&lt;K, V&gt;&gt; entrySet = map.entrySet();
84     assertEquals(map.size() == 0, map.isEmpty());
85     assertEquals(map.size(), keySet.size());
86     assertEquals(keySet.size() == 0, keySet.isEmpty());
87     assertEquals(!keySet.isEmpty(), keySet.iterator</b></font>().hasNext());
88 <a name="6"></a>    int expectedKeySetHash = 0;
89     for (K key : keySet) {
90       V value = map.get(key);
91       expectedKeySetHash += key != null ? <font color="#8c8774"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>key.hashCode() : 0;
92       assertTrue(map.containsKey(key));
93       assertTrue(map.containsValue(value));
94       assertTrue(valueCollection.contains(value));
95       assertTrue(valueCollection.containsAll(Collections.singleton(value)));
96 <a name="15"></a>      assertTrue(entrySet.contains(mapEntry(key, value)));
97       assertTrue(allowsNullKeys || (key != null));
98     }</b></font>
99     <font color="#f52887"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>assertEquals(expectedKeySetHash, keySet.hashCode());
100     assertEquals(map.size(), valueCollection.size());
101     assertEquals(valueCollection.size() == 0, valueCollection.isEmpty());
102     assertEquals(!valueCollection.isEmpty(), valueCollection.iterator</b></font>().hasNext());
103     for (V value : valueCollection) {
104       assertTrue(map.containsValue(value));
105 <a name="10"></a>      assertTrue(allowsNullValues || (value != null));
106     }
107     <font color="#ad5910"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>assertEquals(map.size(), entrySet.size());
108     assertEquals(entrySet.size() == 0, entrySet.isEmpty());
109     assertEquals(!entrySet.isEmpty(), entrySet.iterator().hasNext());
110     assertEntrySetNotContainsString(entrySet);
111     boolean supportsValuesHashCode = supportsValuesHashCode</b></font>(map);
112     if (supportsValuesHashCode) {
113       int expectedEntrySetHash = 0;
114       for (Entry&lt;K, V&gt; entry : entrySet) {
115         assertTrue(map.containsKey(entry.getKey()));
116         assertTrue(map.containsValue(entry.getValue()));
117         int expectedHash =
118             (entry.getKey() == null ? 0 : entry.getKey().hashCode())
119                 ^ (entry.getValue() == null ? 0 : entry.getValue().hashCode());
120         assertEquals(expectedHash, entry.hashCode());
121         expectedEntrySetHash += expectedHash;
122       }
123       assertEquals(expectedEntrySetHash, entrySet.hashCode());
124       assertTrue(entrySet.containsAll(new HashSet&lt;Entry&lt;K, V&gt;&gt;(entrySet)));
125       assertTrue(entrySet.equals(new HashSet&lt;Entry&lt;K, V&gt;&gt;(entrySet)));
126     }
127     Object[] entrySetToArray1 = entrySet.toArray();
128     assertEquals(map.size(), entrySetToArray1.length);
129 <a name="4"></a>    assertTrue(Arrays.asList(entrySetToArray1).containsAll(entrySet));
130     Entry&lt;?, ?&gt;[] entrySetToArray2 = new Entry&lt;?, ?&gt;[map.size() + 2];
131     entrySetToArray2[<font color="#6cc417"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>map.size()] = mapEntry("foo", 1);
132     assertSame(entrySetToArray2, entrySet.toArray(entrySetToArray2));
133     assertNull(entrySetToArray2[map.size()]);
134     assertTrue(Arrays.asList(entrySetToArray2).containsAll(entrySet));
135     Object[] valuesToArray1 = valueCollection.toArray();
136     assertEquals(map.size(), valuesToArray1.length);
137     assertTrue(Arrays.asList</b></font>(valuesToArray1).containsAll(valueCollection));
138     Object[] valuesToArray2 = new Object[map.size() + 2];
139     valuesToArray2[map.size()] = "foo";
140     assertSame(valuesToArray2, valueCollection.toArray(valuesToArray2));
141     assertNull(valuesToArray2[map.size()]);
142     assertTrue(Arrays.asList(valuesToArray2).containsAll(valueCollection));
143     if (supportsValuesHashCode) {
144       int expectedHash = 0;
145       for (Entry&lt;K, V&gt; entry : entrySet) {
146         expectedHash += entry.hashCode();
147       }
148       assertEquals(expectedHash, map.hashCode());
149     }
150     assertMoreInvariants(map);
151   }
152   @SuppressWarnings("CollectionIncompatibleType")
153   private void assertEntrySetNotContainsString(Set&lt;Entry&lt;K, V&gt;&gt; entrySet) {
154     assertFalse(entrySet.contains("foo"));
155   }
156   protected void assertMoreInvariants(Map&lt;K, V&gt; map) {}
157   public void testClear() {
158     Map&lt;K, V&gt; map;
159     try {
160       map = makePopulatedMap();
161     } catch (UnsupportedOperationException e) {
162       return;
163     }
164     if (supportsClear) {
165 <a name="19"></a>      map.clear();
166       assertTrue(map.isEmpty());
167     } else {
168       <font color="#f62817"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>try {
169         map.clear();
170         fail("Expected UnsupportedOperationException.");
171       } catch (UnsupportedOperationException expected) {
172       }
173     }</b></font>
174     assertInvariants(map);
175   }
176   public void testContainsKey() {
177     Map&lt;K, V&gt; map;
178     K unmappedKey;
179     try {
180       map = makePopulatedMap();
181       unmappedKey = getKeyNotInPopulatedMap();
182     } catch (UnsupportedOperationException e) {
183       return;
184     }
185     assertFalse(map.containsKey(unmappedKey));
186     try {
187       assertFalse(map.containsKey(new IncompatibleKeyType()));
188     } catch (ClassCastException tolerated) {
189     }
190     assertTrue(map.containsKey(map.keySet().iterator().next()));
191     if (allowsNullKeys) {
192       boolean unused = map.containsKey(null);
193     } else {
194       try {
195         boolean unused2 = map.containsKey(null);
196       } catch (NullPointerException optional) {
197       }
198     }
199     assertInvariants(map);
200   }
201   public void testContainsValue() {
202     Map&lt;K, V&gt; map;
203     V unmappedValue;
204     try {
205       map = makePopulatedMap();
206       unmappedValue = getValueNotInPopulatedMap();
207     } catch (UnsupportedOperationException e) {
208       return;
209     }
210     assertFalse(map.containsValue(unmappedValue));
211     assertTrue(map.containsValue(map.values().iterator().next()));
212     if (allowsNullValues) {
213       boolean unused = map.containsValue(null);
214     } else {
215       try {
216         boolean unused2 = map.containsKey(null);
217       } catch (NullPointerException optional) {
218       }
219     }
220     assertInvariants(map);
221   }
222   public void testEntrySet() {
223     Map&lt;K, V&gt; map;
224     Set&lt;Entry&lt;K, V&gt;&gt; entrySet;
225     try {
226       map = makePopulatedMap();
227     } catch (UnsupportedOperationException e) {
228       return;
229     }
230     assertInvariants(map);
231     entrySet = map.entrySet();
232     K unmappedKey;
233     V unmappedValue;
234     try {
235       unmappedKey = getKeyNotInPopulatedMap();
236       unmappedValue = getValueNotInPopulatedMap();
237     } catch (UnsupportedOperationException e) {
238       return;
239     }
240     for (Entry&lt;K, V&gt; entry : entrySet) {
241       assertFalse(unmappedKey.equals(entry.getKey()));
242       assertFalse(unmappedValue.equals(entry.getValue()));
243     }
244   }
245   public void testEntrySetForEmptyMap() {
246     Map&lt;K, V&gt; map;
247     try {
248       map = makeEmptyMap();
249     } catch (UnsupportedOperationException e) {
250       return;
251     }
252     assertInvariants(map);
253   }
254   public void testEntrySetContainsEntryIncompatibleKey() {
255     Map&lt;K, V&gt; map;
256     Set&lt;Entry&lt;K, V&gt;&gt; entrySet;
257     try {
258       map = makeEitherMap();
259     } catch (UnsupportedOperationException e) {
260       return;
261     }
262     assertInvariants(map);
263     entrySet = map.entrySet();
264     V unmappedValue;
265     try {
266       unmappedValue = getValueNotInPopulatedMap();
267 <a name="5"></a>    } catch (UnsupportedOperationException e) {
268       return;
269     }
270     Entry&lt;IncompatibleKeyType, V&gt; entry = <font color="#151b8d"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>mapEntry(new IncompatibleKeyType(), unmappedValue);
271     try {
272       assertFalse(entrySet.contains(entry));
273     } catch (ClassCastException tolerated) {
274     }
275   }
276   public void testEntrySetContainsEntryNullKeyPresent() {</b></font>
277     if (!allowsNullKeys || !supportsPut) {
278       return;
279     }
280     Map&lt;K, V&gt; map;
281     Set&lt;Entry&lt;K, V&gt;&gt; entrySet;
282     try {
283       map = makeEitherMap();
284     } catch (UnsupportedOperationException e) {
285       return;
286     }
287     assertInvariants(map);
288     entrySet = map.entrySet();
289     V unmappedValue;
290     try {
291       unmappedValue = getValueNotInPopulatedMap();
292     } catch (UnsupportedOperationException e) {
293 <a name="11"></a>      return;
294     }
295     <font color="#b041ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>map.put(null, unmappedValue);
296     Entry&lt;K, V&gt; entry = mapEntry(null, unmappedValue);
297     assertTrue(entrySet.contains(entry));
298     assertFalse(entrySet.contains(mapEntry(null, null)));
299   }
300   public void testEntrySetContainsEntryNullKeyMissing() {
301     Map&lt;K, V&gt; map</b></font>;
302     Set&lt;Entry&lt;K, V&gt;&gt; entrySet;
303     try {
304       map = makeEitherMap();
305     } catch (UnsupportedOperationException e) {
306       return;
307     }
308     assertInvariants(map);
309     entrySet = map.entrySet();
310     V unmappedValue;
311     try {
312       unmappedValue = getValueNotInPopulatedMap();
313     } catch (UnsupportedOperationException e) {
314       return;
315     }
316     Entry&lt;K, V&gt; entry = mapEntry(null, unmappedValue);
317     try {
318       assertFalse(entrySet.contains(entry));
319     } catch (NullPointerException e) {
320       assertFalse(allowsNullKeys);
321     }
322     try {
323       assertFalse(entrySet.contains(mapEntry(null, null)));
324     } catch (NullPointerException e) {
325       assertFalse(allowsNullKeys &amp;&amp; allowsNullValues);
326     }
327   }
328   public void testEntrySetIteratorRemove() {
329     Map&lt;K, V&gt; map;
330     try {
331       map = makePopulatedMap();
332     } catch (UnsupportedOperationException e) {
333       return;
334     }
335     Set&lt;Entry&lt;K, V&gt;&gt; entrySet = map.entrySet();
336     Iterator&lt;Entry&lt;K, V&gt;&gt; iterator = entrySet.iterator();
337 <a name="23"></a>    if (supportsIteratorRemove) {
338       int initialSize = map.size();
339       Entry&lt;K, V&gt; entry = iterator.next();
340       <font color="#f660ab"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>Entry&lt;K, V&gt; entryCopy = Helpers.mapEntry(entry.getKey(), entry.getValue());
341       iterator.remove();
342       assertEquals(initialSize - 1, map.size());
343 <a name="25"></a>            assertFalse(entrySet.contains(entryCopy));
344       assertInvariants</b></font>(map);
345       <font color="#5eac10"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>try {
346         iterator.remove();
347         fail("Expected IllegalStateException.");
348 <a name="17"></a>      } catch (IllegalStateException expected) {
349       }</b></font>
350     } else {
351       <font color="#3090c7"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>try {
352         iterator.next();
353         iterator.remove();
354         fail("Expected UnsupportedOperationException.");
355       } catch (UnsupportedOperationException expected) {
356       }
357     }</b></font>
358     assertInvariants(map);
359   }
360   public void testEntrySetRemove() {
361     Map&lt;K, V&gt; map;
362     try {
363       map = makePopulatedMap();
364     } catch (UnsupportedOperationException e) {
365       return;
366     }
367     Set&lt;Entry&lt;K, V&gt;&gt; entrySet = map.entrySet();
368     if (supportsRemove) {
369       int initialSize = map.size();
370       boolean didRemove = entrySet.remove(entrySet.iterator().next());
371       assertTrue(didRemove);
372       assertEquals(initialSize - 1, map.size());
373     } else {
374       try {
375         entrySet.remove(entrySet.iterator().next());
376         fail("Expected UnsupportedOperationException.");
377       } catch (UnsupportedOperationException expected) {
378       }
379     }
380     assertInvariants(map);
381   }
382   public void testEntrySetRemoveMissingKey() {
383     Map&lt;K, V&gt; map;
384     K key;
385     try {
386       map = makeEitherMap();
387       key = getKeyNotInPopulatedMap();
388     } catch (UnsupportedOperationException e) {
389       return;
390     }
391     Set&lt;Entry&lt;K, V&gt;&gt; entrySet = map.entrySet();
392     Entry&lt;K, V&gt; entry = mapEntry(key, getValueNotInPopulatedMap());
393     int initialSize = map.size();
394     if (supportsRemove) {
395       boolean didRemove = entrySet.remove(entry);
396       assertFalse(didRemove);
397     } else {
398       try {
399         boolean didRemove = entrySet.remove(entry);
400         assertFalse(didRemove);
401 <a name="26"></a>      } catch (UnsupportedOperationException optional) {
402       }
403     }
404     <font color="#68818b"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>assertEquals(initialSize, map.size());
405     assertFalse(map.containsKey(key));
406     assertInvariants(map);
407   }
408   public void testEntrySetRemoveDifferentValue() {
409     Map&lt;K, V&gt; map</b></font>;
410     try {
411       map = makePopulatedMap();
412     } catch (UnsupportedOperationException e) {
413       return;
414     }
415     Set&lt;Entry&lt;K, V&gt;&gt; entrySet = map.entrySet();
416     K key = map.keySet().iterator().next();
417     Entry&lt;K, V&gt; entry = mapEntry(key, getValueNotInPopulatedMap());
418     int initialSize = map.size();
419     if (supportsRemove) {
420       boolean didRemove = entrySet.remove(entry);
421       assertFalse(didRemove);
422     } else {
423       try {
424         boolean didRemove = entrySet.remove(entry);
425         assertFalse(didRemove);
426 <a name="28"></a>      } catch (UnsupportedOperationException optional) {
427       }
428     }
429     <font color="#717d7d"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>assertEquals(initialSize, map.size());
430     assertTrue(map.containsKey(key));
431     assertInvariants(map);
432   }
433   public void testEntrySetRemoveNullKeyPresent() {</b></font>
434     if (!allowsNullKeys || !supportsPut || !supportsRemove) {
435       return;
436     }
437     Map&lt;K, V&gt; map;
438     Set&lt;Entry&lt;K, V&gt;&gt; entrySet;
439     try {
440       map = makeEitherMap();
441     } catch (UnsupportedOperationException e) {
442       return;
443     }
444     assertInvariants(map);
445     entrySet = map.entrySet();
446     V unmappedValue;
447     try {
448       unmappedValue = getValueNotInPopulatedMap();
449     } catch (UnsupportedOperationException e) {
450       return;
451     }
452 <a name="12"></a>    map.put(null, unmappedValue);
453     assertEquals(unmappedValue, map.get(null));
454     assertTrue(map.containsKey(null));
455     <font color="#571b7e"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>Entry&lt;K, V&gt; entry = mapEntry(null, unmappedValue);
456     assertTrue(entrySet.remove(entry));
457     assertNull(map.get(null));
458     assertFalse(map.containsKey(null));
459   }
460   public void testEntrySetRemoveNullKeyMissing() {
461     Map&lt;K, V&gt; map</b></font>;
462     try {
463       map = makeEitherMap();
464     } catch (UnsupportedOperationException e) {
465       return;
466     }
467     Set&lt;Entry&lt;K, V&gt;&gt; entrySet = map.entrySet();
468     Entry&lt;K, V&gt; entry = mapEntry(null, getValueNotInPopulatedMap());
469     int initialSize = map.size();
470     if (supportsRemove) {
471       try {
472         boolean didRemove = entrySet.remove(entry);
473         assertFalse(didRemove);
474       } catch (NullPointerException e) {
475         assertFalse(allowsNullKeys);
476       }
477     } else {
478       try {
479         boolean didRemove = entrySet.remove(entry);
480         assertFalse(didRemove);
481       } catch (UnsupportedOperationException optional) {
482       }
483     }
484     assertEquals(initialSize, map.size());
485     assertInvariants(map);
486   }
487   public void testEntrySetRemoveAll() {
488     Map&lt;K, V&gt; map;
489     try {
490       map = makePopulatedMap();
491     } catch (UnsupportedOperationException e) {
492       return;
493     }
494     Set&lt;Entry&lt;K, V&gt;&gt; entrySet = map.entrySet();
495     Entry&lt;K, V&gt; entryToRemove = entrySet.iterator().next();
496     Set&lt;Entry&lt;K, V&gt;&gt; entriesToRemove = singleton(entryToRemove);
497     if (supportsRemove) {
498       Entry&lt;K, V&gt; entryToRemoveCopy =
499           Helpers.mapEntry(entryToRemove.getKey(), entryToRemove.getValue());
500       int initialSize = map.size();
501       boolean didRemove = entrySet.removeAll(entriesToRemove);
502       assertTrue(didRemove);
503       assertEquals(initialSize - entriesToRemove.size(), map.size());
504 <a name="24"></a>            assertFalse(entrySet.contains(entryToRemoveCopy));
505     } else {
506       <font color="#79764d"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>try {
507         entrySet.removeAll(entriesToRemove);
508         fail("Expected UnsupportedOperationException.");
509       } catch (UnsupportedOperationException expected) {
510       }</b></font>
511     }
512     assertInvariants(map);
513   }
514   public void testEntrySetRemoveAllNullFromEmpty() {
515     Map&lt;K, V&gt; map;
516     try {
517       map = makeEmptyMap();
518     } catch (UnsupportedOperationException e) {
519       return;
520     }
521     Set&lt;Entry&lt;K, V&gt;&gt; entrySet = map.entrySet();
522     if (supportsRemove) {
523       try {
524         entrySet.removeAll(null);
525         fail("Expected NullPointerException.");
526       } catch (NullPointerException expected) {
527       }
528     } else {
529       try {
530         entrySet.removeAll(null);
531         fail("Expected UnsupportedOperationException or NullPointerException.");
532       } catch (UnsupportedOperationException | NullPointerException e) {
533       }
534     }
535     assertInvariants(map);
536   }
537   public void testEntrySetRetainAll() {
538     Map&lt;K, V&gt; map;
539     try {
540       map = makePopulatedMap();
541     } catch (UnsupportedOperationException e) {
542       return;
543     }
544     Set&lt;Entry&lt;K, V&gt;&gt; entrySet = map.entrySet();
545     Set&lt;Entry&lt;K, V&gt;&gt; entriesToRetain = singleton(entrySet.iterator().next());
546     if (supportsRemove) {
547       boolean shouldRemove = (entrySet.size() &gt; entriesToRetain.size());
548       boolean didRemove = entrySet.retainAll(entriesToRetain);
549       assertEquals(shouldRemove, didRemove);
550       assertEquals(entriesToRetain.size(), map.size());
551       for (Entry&lt;K, V&gt; entry : entriesToRetain) {
552         assertTrue(entrySet.contains(entry));
553       }
554     } else {
555       try {
556         entrySet.retainAll(entriesToRetain);
557         fail("Expected UnsupportedOperationException.");
558       } catch (UnsupportedOperationException expected) {
559       }
560     }
561     assertInvariants(map);
562   }
563   public void testEntrySetRetainAllNullFromEmpty() {
564     Map&lt;K, V&gt; map;
565     try {
566       map = makeEmptyMap();
567     } catch (UnsupportedOperationException e) {
568       return;
569     }
570     Set&lt;Entry&lt;K, V&gt;&gt; entrySet = map.entrySet();
571     if (supportsRemove) {
572       try {
573         entrySet.retainAll(null);
574       } catch (NullPointerException expected) {
575       }
576     } else {
577       try {
578         entrySet.retainAll(null);
579       } catch (UnsupportedOperationException | NullPointerException e) {
580       }
581     }
582     assertInvariants(map);
583   }
584   public void testEntrySetClear() {
585     Map&lt;K, V&gt; map;
586     try {
587       map = makePopulatedMap();
588     } catch (UnsupportedOperationException e) {
589       return;
590     }
591     Set&lt;Entry&lt;K, V&gt;&gt; entrySet = map.entrySet();
592     if (supportsClear) {
593       entrySet.clear();
594       assertTrue(entrySet.isEmpty());
595     } else {
596       try {
597         entrySet.clear();
598         fail("Expected UnsupportedOperationException.");
599       } catch (UnsupportedOperationException expected) {
600       }
601     }
602     assertInvariants(map);
603   }
604   public void testEntrySetAddAndAddAll() {
605     Map&lt;K, V&gt; map = makeEitherMap();
606     Set&lt;Entry&lt;K, V&gt;&gt; entrySet = map.entrySet();
607     Entry&lt;K, V&gt; entryToAdd = mapEntry(null, null);
608     try {
609       entrySet.add(entryToAdd);
610       fail("Expected UnsupportedOperationException or NullPointerException.");
611     } catch (UnsupportedOperationException | NullPointerException e) {
612 <a name="21"></a>    }
613     assertInvariants(map);
614     <font color="#947010"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>try {
615       entrySet.addAll(singleton(entryToAdd));
616       fail("Expected UnsupportedOperationException or NullPointerException.");
617     } catch (UnsupportedOperationException | NullPointerException e) {
618     }</b></font>
619     assertInvariants(map);
620   }
621   public void testEntrySetSetValue() {
622     if (!supportsPut) {
623       return;
624     }
625     Map&lt;K, V&gt; map;
626     V valueToSet;
627     try {
628       map = makePopulatedMap();
629       valueToSet = getValueNotInPopulatedMap();
630     } catch (UnsupportedOperationException e) {
631       return;
632     }
633 <a name="3"></a>
634     Set&lt;Entry&lt;K, V&gt;&gt; entrySet = map.entrySet();
635     Entry&lt;K, V&gt; entry = entrySet.iterator().next();
636     V oldValue = <font color="#53858b"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>entry.getValue();
637     V returnedValue = entry.setValue(valueToSet);
638     assertEquals(oldValue, returnedValue);
639     assertTrue(entrySet.contains(mapEntry(entry.getKey(), valueToSet)));
640     assertEquals(valueToSet, map.get(entry.getKey()));
641     assertInvariants(map);
642   }
643   public void testEntrySetSetValueSameValue() {</b></font>
644     if (!supportsPut) {
645       return;
646     }
647     Map&lt;K, V&gt; map;
648     try {
649       map = makePopulatedMap();
650     } catch (UnsupportedOperationException e) {
651       return;
652     }
653 <a name="1"></a>
654     Set&lt;Entry&lt;K, V&gt;&gt; entrySet = map.entrySet();
655     Entry&lt;K, V&gt; entry = entrySet.iterator().next();
656     V oldValue = <font color="#f63526"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>entry.getValue();
657     V returnedValue = entry.setValue(oldValue);
658     assertEquals(oldValue, returnedValue);
659     assertTrue(entrySet.contains(mapEntry(entry.getKey(), oldValue)));
660     assertEquals(oldValue, map.get(entry.getKey()));
661     assertInvariants(map);
662   }
663   public void testEqualsForEqualMap() {
664     Map&lt;K, V&gt; map</b></font>;
665     try {
666       map = makePopulatedMap();
667     } catch (UnsupportedOperationException e) {
668       return;
669 <a name="7"></a>    }
670     <font color="#38a4a5"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>assertTrue(map.equals(map));
671     assertTrue(makePopulatedMap().equals(map));
672     assertFalse(map.equals(Collections.emptyMap()));
673     assertFalse(map.equals(null));
674   }
675   public void testEqualsForLargerMap() {</b></font>
676     if (!supportsPut) {
677       return;
678     }
679     Map&lt;K, V&gt; map;
680     Map&lt;K, V&gt; largerMap;
681     try {
682       map = makePopulatedMap();
683       largerMap = makePopulatedMap();
684       largerMap.put(getKeyNotInPopulatedMap(), getValueNotInPopulatedMap());
685     } catch (UnsupportedOperationException e) {
686       return;
687     }
688     assertFalse(map.equals(largerMap));
689   }
690   public void testEqualsForSmallerMap() {
691     if (!supportsRemove) {
692       return;
693     }
694     Map&lt;K, V&gt; map;
695     Map&lt;K, V&gt; smallerMap;
696     try {
697       map = makePopulatedMap();
698       smallerMap = makePopulatedMap();
699       smallerMap.remove(smallerMap.keySet().iterator().next());
700     } catch (UnsupportedOperationException e) {
701       return;
702     }
703     assertFalse(map.equals(smallerMap));
704   }
705   public void testEqualsForEmptyMap() {
706     Map&lt;K, V&gt; map;
707     try {
708       map = makeEmptyMap();
709     } catch (UnsupportedOperationException e) {
710       return;
711 <a name="2"></a>    }
712     <font color="#980517"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>assertTrue(map.equals(map));
713     assertTrue(makeEmptyMap().equals(map));
714     assertEquals(Collections.emptyMap(), map);
715     assertFalse(map.equals(Collections.emptySet()));
716     assertFalse(map.equals(null));
717   }
718   public void testGet() {
719     Map&lt;K, V&gt; map</b></font>;
720     try {
721       map = makePopulatedMap();
722     } catch (UnsupportedOperationException e) {
723       return;
724     }
725     for (Entry&lt;K, V&gt; entry : map.entrySet()) {
726       assertEquals(entry.getValue(), map.get(entry.getKey()));
727     }
728     K unmappedKey = null;
729     try {
730       unmappedKey = getKeyNotInPopulatedMap();
731     } catch (UnsupportedOperationException e) {
732       return;
733     }
734     assertNull(map.get(unmappedKey));
735   }
736   public void testGetForEmptyMap() {
737     Map&lt;K, V&gt; map;
738     K unmappedKey = null;
739     try {
740       map = makeEmptyMap();
741       unmappedKey = getKeyNotInPopulatedMap();
742     } catch (UnsupportedOperationException e) {
743       return;
744     }
745     assertNull(map.get(unmappedKey));
746   }
747   public void testGetNull() {
748     Map&lt;K, V&gt; map = makeEitherMap();
749     if (allowsNullKeys) {
750       if (allowsNullValues) {
751       } else {
752         assertEquals(map.containsKey(null), map.get(null) != null);
753       }
754     } else {
755       try {
756         map.get(null);
757       } catch (NullPointerException optional) {
758       }
759     }
760     assertInvariants(map);
761   }
762   public void testHashCode() {
763     Map&lt;K, V&gt; map;
764     try {
765       map = makePopulatedMap();
766     } catch (UnsupportedOperationException e) {
767       return;
768     }
769     assertInvariants(map);
770   }
771   public void testHashCodeForEmptyMap() {
772     Map&lt;K, V&gt; map;
773     try {
774       map = makeEmptyMap();
775     } catch (UnsupportedOperationException e) {
776       return;
777     }
778     assertInvariants(map);
779   }
780   public void testPutNewKey() {
781     Map&lt;K, V&gt; map = makeEitherMap();
782     K keyToPut;
783     V valueToPut;
784     try {
785       keyToPut = getKeyNotInPopulatedMap();
786       valueToPut = getValueNotInPopulatedMap();
787     } catch (UnsupportedOperationException e) {
788 <a name="9"></a>      return;
789     }
790     if (supportsPut) {
791       int initialSize = <font color="#83a33a"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>map.size();
792       V oldValue = map.put(keyToPut, valueToPut);
793       assertEquals(valueToPut, map.get(keyToPut));
794       assertTrue(map.containsKey(keyToPut));
795       assertTrue(map.containsValue(valueToPut));
796       assertEquals(initialSize + 1, map.size());
797       assertNull(oldValue);
798     }</b></font> else {
799       try {
800         map.put(keyToPut, valueToPut);
801         fail("Expected UnsupportedOperationException.");
802       } catch (UnsupportedOperationException expected) {
803       }
804     }
805     assertInvariants(map);
806   }
807   public void testPutExistingKey() {
808     Map&lt;K, V&gt; map;
809     K keyToPut;
810     V valueToPut;
811     try {
812       map = makePopulatedMap();
813       valueToPut = getValueNotInPopulatedMap();
814     } catch (UnsupportedOperationException e) {
815       return;
816 <a name="16"></a>    }
817     keyToPut = map.keySet().iterator().next();
818     if (supportsPut) {
819       <font color="#2981b2"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>int initialSize = map.size();
820       map.put(keyToPut, valueToPut);
821       assertEquals(valueToPut, map.get(keyToPut));
822       assertTrue(map.containsKey(keyToPut));
823       assertTrue(map.containsValue(valueToPut));
824       assertEquals(initialSize, map.size());
825     }</b></font> else {
826       try {
827         map.put(keyToPut, valueToPut);
828         fail("Expected UnsupportedOperationException.");
829       } catch (UnsupportedOperationException expected) {
830       }
831     }
832     assertInvariants(map);
833   }
834   public void testPutNullKey() {
835     if (!supportsPut) {
836       return;
837     }
838     Map&lt;K, V&gt; map = makeEitherMap();
839     V valueToPut;
840     try {
841       valueToPut = getValueNotInPopulatedMap();
842     } catch (UnsupportedOperationException e) {
843       return;
844 <a name="27"></a>    }
845     if (allowsNullKeys) {
846       V oldValue = map.get(null);
847       V returnedValue = <font color="#e77471"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>map.put(null, valueToPut);
848       assertEquals(oldValue, returnedValue);
849       assertEquals(valueToPut, map.get(null));
850       assertTrue(map.containsKey(null));
851       assertTrue(map.containsValue(valueToPut));
852     }</b></font> else {
853       try {
854         map.put(null, valueToPut);
855         fail("Expected RuntimeException");
856       } catch (RuntimeException expected) {
857       }
858     }
859     assertInvariants(map);
860   }
861   public void testPutNullValue() {
862     if (!supportsPut) {
863       return;
864     }
865     Map&lt;K, V&gt; map = makeEitherMap();
866     K keyToPut;
867     try {
868       keyToPut = getKeyNotInPopulatedMap();
869     } catch (UnsupportedOperationException e) {
870       return;
871 <a name="8"></a>    }
872     if (allowsNullValues) {
873       int initialSize = map.size();
874       V oldValue = <font color="#c58917"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>map.get(keyToPut);
875       V returnedValue = map.put(keyToPut, null);
876       assertEquals(oldValue, returnedValue);
877       assertNull(map.get(keyToPut));
878       assertTrue(map.containsKey(keyToPut));
879       assertTrue(map.containsValue(null));
880       assertEquals(initialSize + 1, map.size());
881     }</b></font> else {
882       try {
883         map.put(keyToPut, null);
884         fail("Expected RuntimeException");
885       } catch (RuntimeException expected) {
886       }
887     }
888     assertInvariants(map);
889   }
890   public void testPutNullValueForExistingKey() {
891     if (!supportsPut) {
892       return;
893     }
894     Map&lt;K, V&gt; map;
895     K keyToPut;
896     try {
897       map = makePopulatedMap();
898       keyToPut = map.keySet().iterator().next();
899     } catch (UnsupportedOperationException e) {
900       return;
901     }
902 <a name="18"></a>    if (allowsNullValues) {
903       int initialSize = map.size();
904       V oldValue = map.get(keyToPut);
905       V returnedValue = <font color="#800517"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>map.put(keyToPut, null);
906       assertEquals(oldValue, returnedValue);
907       assertNull(map.get(keyToPut));
908       assertTrue(map.containsKey(keyToPut));
909       assertTrue(map.containsValue(null));
910       assertEquals(initialSize, map.size());
911     }</b></font> else {
912       try {
913         map.put(keyToPut, null);
914         fail("Expected RuntimeException");
915       } catch (RuntimeException expected) {
916       }
917     }
918     assertInvariants(map);
919   }
920   public void testPutAllNewKey() {
921     Map&lt;K, V&gt; map = makeEitherMap();
922     K keyToPut;
923     V valueToPut;
924     try {
925       keyToPut = getKeyNotInPopulatedMap();
926       valueToPut = getValueNotInPopulatedMap();
927     } catch (UnsupportedOperationException e) {
928 <a name="14"></a>      return;
929     }
930     Map&lt;K, V&gt; mapToPut = Collections.singletonMap(keyToPut, valueToPut);
931     if (supportsPut) <font color="#842dce"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>{
932       int initialSize = map.size();
933       map.putAll(mapToPut);
934       assertEquals(valueToPut, map.get(keyToPut));
935       assertTrue(map.containsKey(keyToPut));
936       assertTrue(map.containsValue(valueToPut));
937       assertEquals(initialSize + 1, map.size</b></font>());
938     } else {
939       try {
940         map.putAll(mapToPut);
941         fail("Expected UnsupportedOperationException.");
942       } catch (UnsupportedOperationException expected) {
943       }
944     }
945     assertInvariants(map);
946   }
947   public void testPutAllExistingKey() {
948     Map&lt;K, V&gt; map;
949     K keyToPut;
950     V valueToPut;
951     try {
952       map = makePopulatedMap();
953       valueToPut = getValueNotInPopulatedMap();
954     } catch (UnsupportedOperationException e) {
955       return;
956     }
957     keyToPut = map.keySet().iterator().next();
958     Map&lt;K, V&gt; mapToPut = Collections.singletonMap(keyToPut, valueToPut);
959     int initialSize = map.size();
960     if (supportsPut) {
961       map.putAll(mapToPut);
962       assertEquals(valueToPut, map.get(keyToPut));
963       assertTrue(map.containsKey(keyToPut));
964       assertTrue(map.containsValue(valueToPut));
965     } else {
966       try {
967         map.putAll(mapToPut);
968         fail("Expected UnsupportedOperationException.");
969       } catch (UnsupportedOperationException expected) {
970       }
971     }
972     assertEquals(initialSize, map.size());
973     assertInvariants(map);
974   }
975   public void testRemove() {
976     Map&lt;K, V&gt; map;
977     K keyToRemove;
978     try {
979       map = makePopulatedMap();
980     } catch (UnsupportedOperationException e) {
981       return;
982     }
983     keyToRemove = map.keySet().iterator().next();
984     if (supportsRemove) {
985       int initialSize = map.size();
986       V expectedValue = map.get(keyToRemove);
987       V oldValue = map.remove(keyToRemove);
988       assertEquals(expectedValue, oldValue);
989       assertFalse(map.containsKey(keyToRemove));
990       assertEquals(initialSize - 1, map.size());
991     } else {
992       try {
993         map.remove(keyToRemove);
994         fail("Expected UnsupportedOperationException.");
995       } catch (UnsupportedOperationException expected) {
996       }
997     }
998     assertInvariants(map);
999   }
1000   public void testRemoveMissingKey() {
1001     Map&lt;K, V&gt; map;
1002     K keyToRemove;
1003     try {
1004       map = makePopulatedMap();
1005       keyToRemove = getKeyNotInPopulatedMap();
1006     } catch (UnsupportedOperationException e) {
1007       return;
1008     }
1009     if (supportsRemove) {
1010       int initialSize = map.size();
1011       assertNull(map.remove(keyToRemove));
1012       assertEquals(initialSize, map.size());
1013     } else {
1014       try {
1015         map.remove(keyToRemove);
1016         fail("Expected UnsupportedOperationException.");
1017 <a name="13"></a>      } catch (UnsupportedOperationException expected) {
1018       }
1019     }
1020     <font color="#3b9c9c"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>assertInvariants(map);
1021   }
1022   public void testSize() {
1023     assertInvariants(makeEitherMap());
1024   }
1025   public void testKeySetRemove() {
1026     Map&lt;K, V&gt; map</b></font>;
1027     try {
1028       map = makePopulatedMap();
1029     } catch (UnsupportedOperationException e) {
1030       return;
1031     }
1032     Set&lt;K&gt; keys = map.keySet();
1033     K key = keys.iterator().next();
1034     if (supportsRemove) {
1035       int initialSize = map.size();
1036       keys.remove(key);
1037       assertEquals(initialSize - 1, map.size());
1038       assertFalse(map.containsKey(key));
1039     } else {
1040       try {
1041         keys.remove(key);
1042         fail("Expected UnsupportedOperationException.");
1043       } catch (UnsupportedOperationException expected) {
1044       }
1045     }
1046     assertInvariants(map);
1047   }
1048   public void testKeySetRemoveAll() {
1049     Map&lt;K, V&gt; map;
1050     try {
1051       map = makePopulatedMap();
1052     } catch (UnsupportedOperationException e) {
1053       return;
1054     }
1055 <a name="22"></a>
1056     Set&lt;K&gt; keys = map.keySet();
1057     K key = keys.iterator().next();
1058     if (supportsRemove) <font color="#4cc417"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>{
1059       int initialSize = map.size();
1060       assertTrue(keys.removeAll(Collections.singleton(key)));
1061 <a name="20"></a>      assertEquals(initialSize - 1, map.size());
1062       assertFalse(map.containsKey</b></font>(key));
1063     } else {
1064       <font color="#4e9258"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>try {
1065         keys.removeAll(Collections.singleton(key));
1066         fail("Expected UnsupportedOperationException.");
1067       } catch (UnsupportedOperationException expected) {
1068       }</b></font>
1069     }
1070     assertInvariants(map);
1071   }
1072   public void testKeySetRetainAll() {
1073     Map&lt;K, V&gt; map;
1074     try {
1075       map = makePopulatedMap();
1076     } catch (UnsupportedOperationException e) {
1077       return;
1078     }
1079     Set&lt;K&gt; keys = map.keySet();
1080     K key = keys.iterator().next();
1081     if (supportsRemove) {
1082       keys.retainAll(Collections.singleton(key));
1083       assertEquals(1, map.size());
1084       assertTrue(map.containsKey(key));
1085     } else {
1086       try {
1087         keys.retainAll(Collections.singleton(key));
1088         fail("Expected UnsupportedOperationException.");
1089       } catch (UnsupportedOperationException expected) {
1090       }
1091     }
1092     assertInvariants(map);
1093   }
1094   public void testKeySetClear() {
1095     Map&lt;K, V&gt; map;
1096     try {
1097       map = makeEitherMap();
1098     } catch (UnsupportedOperationException e) {
1099       return;
1100     }
1101     Set&lt;K&gt; keySet = map.keySet();
1102     if (supportsClear) {
1103       keySet.clear();
1104       assertTrue(keySet.isEmpty());
1105     } else {
1106       try {
1107         keySet.clear();
1108         fail("Expected UnsupportedOperationException.");
1109       } catch (UnsupportedOperationException expected) {
1110       }
1111     }
1112     assertInvariants(map);
1113   }
1114   public void testKeySetRemoveAllNullFromEmpty() {
1115     Map&lt;K, V&gt; map;
1116     try {
1117       map = makeEmptyMap();
1118     } catch (UnsupportedOperationException e) {
1119       return;
1120     }
1121     Set&lt;K&gt; keySet = map.keySet();
1122     if (supportsRemove) {
1123       try {
1124         keySet.removeAll(null);
1125         fail("Expected NullPointerException.");
1126       } catch (NullPointerException expected) {
1127       }
1128     } else {
1129       try {
1130         keySet.removeAll(null);
1131         fail("Expected UnsupportedOperationException or NullPointerException.");
1132       } catch (UnsupportedOperationException | NullPointerException e) {
1133       }
1134     }
1135     assertInvariants(map);
1136   }
1137   public void testKeySetRetainAllNullFromEmpty() {
1138     Map&lt;K, V&gt; map;
1139     try {
1140       map = makeEmptyMap();
1141     } catch (UnsupportedOperationException e) {
1142       return;
1143     }
1144     Set&lt;K&gt; keySet = map.keySet();
1145     if (supportsRemove) {
1146       try {
1147         keySet.retainAll(null);
1148       } catch (NullPointerException expected) {
1149       }
1150     } else {
1151       try {
1152         keySet.retainAll(null);
1153       } catch (UnsupportedOperationException | NullPointerException e) {
1154       }
1155     }
1156     assertInvariants(map);
1157   }
1158   public void testValues() {
1159     Map&lt;K, V&gt; map;
1160     Collection&lt;V&gt; valueCollection;
1161     try {
1162       map = makePopulatedMap();
1163     } catch (UnsupportedOperationException e) {
1164       return;
1165     }
1166     assertInvariants(map);
1167     valueCollection = map.values();
1168     V unmappedValue;
1169     try {
1170       unmappedValue = getValueNotInPopulatedMap();
1171     } catch (UnsupportedOperationException e) {
1172       return;
1173     }
1174     for (V value : valueCollection) {
1175       assertFalse(unmappedValue.equals(value));
1176     }
1177   }
1178   public void testValuesIteratorRemove() {
1179     Map&lt;K, V&gt; map;
1180     try {
1181       map = makePopulatedMap();
1182     } catch (UnsupportedOperationException e) {
1183       return;
1184     }
1185     Collection&lt;V&gt; valueCollection = map.values();
1186     Iterator&lt;V&gt; iterator = valueCollection.iterator();
1187     if (supportsIteratorRemove) {
1188       int initialSize = map.size();
1189       iterator.next();
1190       iterator.remove();
1191       assertEquals(initialSize - 1, map.size());
1192       assertInvariants(map);
1193       try {
1194         iterator.remove();
1195         fail("Expected IllegalStateException.");
1196       } catch (IllegalStateException expected) {
1197       }
1198     } else {
1199       try {
1200         iterator.next();
1201         iterator.remove();
1202         fail("Expected UnsupportedOperationException.");
1203       } catch (UnsupportedOperationException expected) {
1204       }
1205     }
1206     assertInvariants(map);
1207   }
1208   public void testValuesRemove() {
1209     Map&lt;K, V&gt; map;
1210     try {
1211       map = makePopulatedMap();
1212     } catch (UnsupportedOperationException e) {
1213       return;
1214     }
1215     Collection&lt;V&gt; valueCollection = map.values();
1216     if (supportsRemove) {
1217       int initialSize = map.size();
1218       valueCollection.remove(valueCollection.iterator().next());
1219       assertEquals(initialSize - 1, map.size());
1220     } else {
1221       try {
1222         valueCollection.remove(valueCollection.iterator().next());
1223         fail("Expected UnsupportedOperationException.");
1224       } catch (UnsupportedOperationException expected) {
1225       }
1226     }
1227     assertInvariants(map);
1228   }
1229   public void testValuesRemoveMissing() {
1230     Map&lt;K, V&gt; map;
1231     V valueToRemove;
1232     try {
1233       map = makeEitherMap();
1234       valueToRemove = getValueNotInPopulatedMap();
1235     } catch (UnsupportedOperationException e) {
1236       return;
1237     }
1238     Collection&lt;V&gt; valueCollection = map.values();
1239     int initialSize = map.size();
1240     if (supportsRemove) {
1241       assertFalse(valueCollection.remove(valueToRemove));
1242     } else {
1243       try {
1244         assertFalse(valueCollection.remove(valueToRemove));
1245       } catch (UnsupportedOperationException e) {
1246       }
1247     }
1248     assertEquals(initialSize, map.size());
1249     assertInvariants(map);
1250   }
1251   public void testValuesRemoveAll() {
1252     Map&lt;K, V&gt; map;
1253     try {
1254       map = makePopulatedMap();
1255     } catch (UnsupportedOperationException e) {
1256       return;
1257     }
1258     Collection&lt;V&gt; valueCollection = map.values();
1259     Set&lt;V&gt; valuesToRemove = singleton(valueCollection.iterator().next());
1260     if (supportsRemove) {
1261       valueCollection.removeAll(valuesToRemove);
1262       for (V value : valuesToRemove) {
1263         assertFalse(valueCollection.contains(value));
1264       }
1265       for (V value : valueCollection) {
1266         assertFalse(valuesToRemove.contains(value));
1267       }
1268     } else {
1269       try {
1270         valueCollection.removeAll(valuesToRemove);
1271         fail("Expected UnsupportedOperationException.");
1272       } catch (UnsupportedOperationException expected) {
1273       }
1274     }
1275     assertInvariants(map);
1276   }
1277   public void testValuesRemoveAllNullFromEmpty() {
1278     Map&lt;K, V&gt; map;
1279     try {
1280       map = makeEmptyMap();
1281     } catch (UnsupportedOperationException e) {
1282       return;
1283     }
1284     Collection&lt;V&gt; values = map.values();
1285     if (supportsRemove) {
1286       try {
1287         values.removeAll(null);
1288       } catch (NullPointerException expected) {
1289       }
1290     } else {
1291       try {
1292         values.removeAll(null);
1293       } catch (UnsupportedOperationException | NullPointerException e) {
1294       }
1295     }
1296     assertInvariants(map);
1297   }
1298   public void testValuesRetainAll() {
1299     Map&lt;K, V&gt; map;
1300     try {
1301       map = makePopulatedMap();
1302     } catch (UnsupportedOperationException e) {
1303       return;
1304     }
1305     Collection&lt;V&gt; valueCollection = map.values();
1306     Set&lt;V&gt; valuesToRetain = singleton(valueCollection.iterator().next());
1307     if (supportsRemove) {
1308       valueCollection.retainAll(valuesToRetain);
1309       for (V value : valuesToRetain) {
1310         assertTrue(valueCollection.contains(value));
1311       }
1312       for (V value : valueCollection) {
1313         assertTrue(valuesToRetain.contains(value));
1314       }
1315     } else {
1316       try {
1317         valueCollection.retainAll(valuesToRetain);
1318         fail("Expected UnsupportedOperationException.");
1319       } catch (UnsupportedOperationException expected) {
1320       }
1321     }
1322     assertInvariants(map);
1323   }
1324   public void testValuesRetainAllNullFromEmpty() {
1325     Map&lt;K, V&gt; map;
1326     try {
1327       map = makeEmptyMap();
1328     } catch (UnsupportedOperationException e) {
1329       return;
1330     }
1331     Collection&lt;V&gt; values = map.values();
1332     if (supportsRemove) {
1333       try {
1334         values.retainAll(null);
1335       } catch (NullPointerException expected) {
1336       }
1337     } else {
1338       try {
1339         values.retainAll(null);
1340       } catch (UnsupportedOperationException | NullPointerException e) {
1341       }
1342     }
1343     assertInvariants(map);
1344   }
1345   public void testValuesClear() {
1346     Map&lt;K, V&gt; map;
1347     try {
1348       map = makePopulatedMap();
1349     } catch (UnsupportedOperationException e) {
1350       return;
1351     }
1352     Collection&lt;V&gt; valueCollection = map.values();
1353     if (supportsClear) {
1354       valueCollection.clear();
1355       assertTrue(valueCollection.isEmpty());
1356     } else {
1357       try {
1358         valueCollection.clear();
1359         fail("Expected UnsupportedOperationException.");
1360       } catch (UnsupportedOperationException expected) {
1361       }
1362     }
1363     assertInvariants(map);
1364   }
1365   static &lt;K, V&gt; Entry&lt;K, V&gt; mapEntry(K key, V value) {
1366     return Collections.singletonMap(key, value).entrySet().iterator().next();
1367   }
1368 }
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
