
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 4.125412541254125%, Tokens: 25, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>google-api-java-client-samples-MDEwOlJlcG9zaXRvcnkyOTc0OTA1Mg==-flat-TasksSample.java</h3>
            <pre><code>1  package com.google.api.services.samples.tasks.android;
<span onclick='openModal()' class='match'>2  import com.google.android.gms.common.GooglePlayServicesUtil;
3  import com.google.api.client.extensions.android.http.AndroidHttp;
4  import com.google.api.client.googleapis.extensions.android.gms.auth.GoogleAccountCredential;
5  import com.google.api.client.http.HttpTransport;
6  import com.google.api.client.json.JsonFactory;
7  import com.google.api.client.json.gson.GsonFactory;
8  import com.google.api.services.tasks.TasksScopes;
9  import android.accounts.AccountManager;
10  import android.app.Activity;
11  import android.app.Dialog;
12  import android.content.Context;
13  import android.content.Intent;
14  import android.content.SharedPreferences;
15  import android.os.Bundle;
16  import android.view.Menu;
17  import android.view.MenuInflater;
18  import android.view.MenuItem;
19  import android.widget.ArrayAdapter;
20  import android.widget.ListView;
21  import java.util.Collections;
22  import java.util.List;
23  import java.util.logging.Level;
24  import java.util.logging.Logger;
25  public final class TasksSample extends Activity {
26    private static final Level LOGGING_LEVEL = Level.OFF;
</span>27    private static final String PREF_ACCOUNT_NAME = "accountName";
28    static final String TAG = "TasksSample";
29    static final int REQUEST_GOOGLE_PLAY_SERVICES = 0;
30    static final int REQUEST_AUTHORIZATION = 1;
31    static final int REQUEST_ACCOUNT_PICKER = 2;
32    final HttpTransport httpTransport = AndroidHttp.newCompatibleTransport();
33    final JsonFactory jsonFactory = GsonFactory.getDefaultInstance();
34    GoogleAccountCredential credential;
35    List<String> tasksList;
36    ArrayAdapter<String> adapter;
37    com.google.api.services.tasks.Tasks service;
38    int numAsyncTasks;
39    private ListView listView;
40    @Override
41    public void onCreate(Bundle savedInstanceState) {
42      super.onCreate(savedInstanceState);
43      Logger.getLogger("com.google.api.client").setLevel(LOGGING_LEVEL);
44      setContentView(R.layout.calendarlist);
45      listView = (ListView) findViewById(R.id.list);
46      credential =
47          GoogleAccountCredential.usingOAuth2(this, Collections.singleton(TasksScopes.TASKS));
48      SharedPreferences settings = getPreferences(Context.MODE_PRIVATE);
49      credential.setSelectedAccountName(settings.getString(PREF_ACCOUNT_NAME, null));
50      service =
51          new com.google.api.services.tasks.Tasks.Builder(httpTransport, jsonFactory, credential)
52              .setApplicationName("Google-TasksAndroidSample/1.0").build();
53    }
54    void showGooglePlayServicesAvailabilityErrorDialog(final int connectionStatusCode) {
55      runOnUiThread(new Runnable() {
56        public void run() {
57          Dialog dialog =
58              GooglePlayServicesUtil.getErrorDialog(connectionStatusCode, TasksSample.this,
59                  REQUEST_GOOGLE_PLAY_SERVICES);
60          dialog.show();
61        }
62      });
63    }
64    void refreshView() {
65      adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, tasksList);
66      listView.setAdapter(adapter);
67    }
68    @Override
69    protected void onResume() {
70      super.onResume();
71      if (checkGooglePlayServicesAvailable()) {
72        haveGooglePlayServices();
73      }
74    }
75    @Override
76    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
77      super.onActivityResult(requestCode, resultCode, data);
78      switch (requestCode) {
79        case REQUEST_GOOGLE_PLAY_SERVICES:
80          if (resultCode == Activity.RESULT_OK) {
81            haveGooglePlayServices();
82          } else {
83            checkGooglePlayServicesAvailable();
84          }
85          break;
86        case REQUEST_AUTHORIZATION:
87          if (resultCode == Activity.RESULT_OK) {
88            AsyncLoadTasks.run(this);
89          } else {
90            chooseAccount();
91          }
92          break;
93        case REQUEST_ACCOUNT_PICKER:
94          if (resultCode == Activity.RESULT_OK && data != null && data.getExtras() != null) {
95            String accountName = data.getExtras().getString(AccountManager.KEY_ACCOUNT_NAME);
96            if (accountName != null) {
97              credential.setSelectedAccountName(accountName);
98              SharedPreferences settings = getPreferences(Context.MODE_PRIVATE);
99              SharedPreferences.Editor editor = settings.edit();
100              editor.putString(PREF_ACCOUNT_NAME, accountName);
101              editor.commit();
102              AsyncLoadTasks.run(this);
103            }
104          }
105          break;
106      }
107    }
108    @Override
109    public boolean onCreateOptionsMenu(Menu menu) {
110      MenuInflater inflater = getMenuInflater();
111      inflater.inflate(R.menu.main_menu, menu);
112      return super.onCreateOptionsMenu(menu);
113    }
114    @Override
115    public boolean onOptionsItemSelected(MenuItem item) {
116      switch (item.getItemId()) {
117        case R.id.menu_refresh:
118          AsyncLoadTasks.run(this);
119          break;
120        case R.id.menu_accounts:
121          chooseAccount();
122          return true;
123      }
124      return super.onOptionsItemSelected(item);
125    }
126    private boolean checkGooglePlayServicesAvailable() {
127      final int connectionStatusCode = GooglePlayServicesUtil.isGooglePlayServicesAvailable(this);
128      if (GooglePlayServicesUtil.isUserRecoverableError(connectionStatusCode)) {
129        showGooglePlayServicesAvailabilityErrorDialog(connectionStatusCode);
130        return false;
131      }
132      return true;
133    }
134    private void haveGooglePlayServices() {
135      if (credential.getSelectedAccountName() == null) {
136        chooseAccount();
137      } else {
138        AsyncLoadTasks.run(this);
139      }
140    }
141    private void chooseAccount() {
142      startActivityForResult(credential.newChooseAccountIntent(), REQUEST_ACCOUNT_PICKER);
143    }
144  }
</code></pre>
        </div>
        <div class="column">
            <h3>jedis-MDEwOlJlcG9zaXRvcnk3MTU2MDU=-flat-AllKindOfValuesCommandsTestBase.java</h3>
            <pre><code>1  package redis.clients.jedis.commands.unified;
2  import static org.junit.Assert.assertArrayEquals;
3  import static org.junit.Assert.assertEquals;
4  import static org.junit.Assert.assertFalse;
5  import static org.junit.Assert.assertTrue;
6  import static org.junit.Assert.assertNotNull;
7  import static org.junit.Assert.assertNull;
8  import static org.junit.Assert.fail;
9  import static redis.clients.jedis.Protocol.Command.BLPOP;
10  import static redis.clients.jedis.Protocol.Command.GET;
11  import static redis.clients.jedis.Protocol.Command.HGETALL;
12  import static redis.clients.jedis.Protocol.Command.LRANGE;
13  import static redis.clients.jedis.Protocol.Command.PING;
14  import static redis.clients.jedis.Protocol.Command.RPUSH;
<span onclick='openModal()' class='match'>15  import static redis.clients.jedis.Protocol.Command.SET;
16  import static redis.clients.jedis.Protocol.Command.XINFO;
17  import static redis.clients.jedis.util.SafeEncoder.encode;
18  import static redis.clients.jedis.util.SafeEncoder.encodeObject;
19  import static redis.clients.jedis.params.ScanParams.SCAN_POINTER_START;
20  import static redis.clients.jedis.params.ScanParams.SCAN_POINTER_START_BINARY;
21  import java.util.ArrayList;
22  import java.util.Arrays;
23  import java.util.Collections;
24  import java.util.HashMap;
25  import java.util.HashSet;
26  import java.util.List;
27  import java.util.Set;
28  import org.junit.Test;
29  import redis.clients.jedis.ScanIteration;
30  import redis.clients.jedis.StreamEntryID;
31  import redis.clients.jedis.args.ExpiryOption;
32  import redis.clients.jedis.params.ScanParams;
33  import redis.clients.jedis.resps.ScanResult;
34  import redis.clients.jedis.params.RestoreParams;
35  import redis.clients.jedis.exceptions.JedisDataException;
36  import redis.clients.jedis.params.SetParams;
37  import redis.clients.jedis.util.AssertUtil;
38  public abstract class AllKindOfValuesCommandsTestBase extends UnifiedJedisCommandsTestBase {
39    protected final byte[] bfoo = { 0x01, 0x02, 0x03, 0x04 };
</span>40    protected final byte[] bfoo1 = { 0x01, 0x02, 0x03, 0x04, 0x0A };
41    protected final byte[] bfoo2 = { 0x01, 0x02, 0x03, 0x04, 0x0B };
42    protected final byte[] bfoo3 = { 0x01, 0x02, 0x03, 0x04, 0x0C };
43    protected final byte[] bbar = { 0x05, 0x06, 0x07, 0x08 };
44    protected final byte[] bbar1 = { 0x05, 0x06, 0x07, 0x08, 0x0A };
45    protected final byte[] bbar2 = { 0x05, 0x06, 0x07, 0x08, 0x0B };
46    protected final byte[] bbar3 = { 0x05, 0x06, 0x07, 0x08, 0x0C };
47    protected final byte[] bfoobar = { 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08 };
48    protected final byte[] bfoostar = { 0x01, 0x02, 0x03, 0x04, '*' };
49    protected final byte[] bbarstar = { 0x05, 0x06, 0x07, 0x08, '*' };
50    protected final byte[] bnx = { 0x6E, 0x78 };
51    protected final byte[] bex = { 0x65, 0x78 };
52    final int expireSeconds = 2;
53    @Test
54    public void exists() {
55      String status = jedis.set("foo", "bar");
56      assertEquals("OK", status);
57      status = jedis.set(bfoo, bbar);
58      assertEquals("OK", status);
59      assertTrue(jedis.exists("foo"));
60      assertTrue(jedis.exists(bfoo));
61      assertEquals(1L, jedis.del("foo"));
62      assertEquals(1L, jedis.del(bfoo));
63      assertFalse(jedis.exists("foo"));
64      assertFalse(jedis.exists(bfoo));
65    }
66    @Test
67    public void existsMany() {
68      String status = jedis.set("foo1", "bar1");
69      assertEquals("OK", status);
70      status = jedis.set("foo2", "bar2");
71      assertEquals("OK", status);
72      assertEquals(2L, jedis.exists("foo1", "foo2"));
73      assertEquals(1L, jedis.del("foo1"));
74      assertEquals(1L, jedis.exists("foo1", "foo2"));
75    }
76    @Test
77    public void del() {
78      jedis.set("foo1", "bar1");
79      jedis.set("foo2", "bar2");
80      jedis.set("foo3", "bar3");
81      assertEquals(3L, jedis.del("foo1", "foo2", "foo3"));
82      assertFalse(jedis.exists("foo1"));
83      assertFalse(jedis.exists("foo2"));
84      assertFalse(jedis.exists("foo3"));
85      jedis.set("foo1", "bar1");
86      assertEquals(1L, jedis.del("foo1", "foo2"));
87      assertEquals(0L, jedis.del("foo1", "foo2"));
88      jedis.set(bfoo1, bbar1);
89      jedis.set(bfoo2, bbar2);
90      jedis.set(bfoo3, bbar3);
91      assertEquals(3L, jedis.del(bfoo1, bfoo2, bfoo3));
92      assertFalse(jedis.exists(bfoo1));
93      assertFalse(jedis.exists(bfoo2));
94      assertFalse(jedis.exists(bfoo3));
95      jedis.set(bfoo1, bbar1);
96      assertEquals(1, jedis.del(bfoo1, bfoo2));
97      assertEquals(0, jedis.del(bfoo1, bfoo2));
98    }
99    @Test
100    public void unlink() {
101      jedis.set("foo1", "bar1");
102      jedis.set("foo2", "bar2");
103      jedis.set("foo3", "bar3");
104      assertEquals(3, jedis.unlink("foo1", "foo2", "foo3"));
105      assertEquals(0, jedis.exists("foo1", "foo2", "foo3"));
106      jedis.set("foo1", "bar1");
107      assertEquals(1, jedis.unlink("foo1", "foo2"));
108      assertEquals(0, jedis.unlink("foo1", "foo2"));
109      jedis.set("foo", "bar");
110      assertEquals(1, jedis.unlink("foo"));
111      assertFalse(jedis.exists("foo"));
112      jedis.set(bfoo1, bbar1);
113      jedis.set(bfoo2, bbar2);
114      jedis.set(bfoo3, bbar3);
115      assertEquals(3, jedis.unlink(bfoo1, bfoo2, bfoo3));
116      assertEquals(0, jedis.exists(bfoo1, bfoo2, bfoo3));
117      jedis.set(bfoo1, bbar1);
118      assertEquals(1, jedis.unlink(bfoo1, bfoo2));
119      assertEquals(0, jedis.unlink(bfoo1, bfoo2));
120      jedis.set(bfoo, bbar);
121      assertEquals(1, jedis.unlink(bfoo));
122      assertFalse(jedis.exists(bfoo));
123    }
124    @Test
125    public void type() {
126      jedis.set("foo", "bar");
127      assertEquals("string", jedis.type("foo"));
128      jedis.set(bfoo, bbar);
129      assertEquals("string", jedis.type(bfoo));
130    }
131    @Test
132    public void keys() {
133      jedis.set("foo", "bar");
134      jedis.set("foobar", "bar");
135      Set<String> keys = jedis.keys("foo*");
136      AssertUtil.assertCollectionContains(keys, "foo");
137      AssertUtil.assertCollectionContains(keys, "foobar");
138      assertEquals(Collections.emptySet(), jedis.keys("bar*"));
139      jedis.set(bfoo, bbar);
140      jedis.set(bfoobar, bbar);
141      Set<byte[]> bkeys = jedis.keys(bfoostar);
142      AssertUtil.assertByteArrayCollectionContains(bkeys, bfoo);
143      AssertUtil.assertByteArrayCollectionContains(bkeys, bfoobar);
144      assertEquals(Collections.emptySet(), jedis.keys(bbarstar));
145    }
146    @Test
147    public void randomKey() {
148      assertNull(jedis.randomKey());
149      for (int i = 0; i < 100; i++) {
150        jedis.set("foo" + i, "bar"+i);
151      }
152      String key = jedis.randomKey();
153      assertNotNull(key);
154      assertTrue(key.startsWith("foo"));
155      assertEquals(key.replace("foo", "bar"), jedis.get(key));
156    }
157    @Test
158    public void rename() {
159      jedis.set("foo", "bar");
160      String status = jedis.rename("foo", "bar");
161      assertEquals("OK", status);
162      assertNull(jedis.get("foo"));
163      assertEquals("bar", jedis.get("bar"));
164      jedis.set(bfoo, bbar);
165      String bstatus = jedis.rename(bfoo, bbar);
166      assertEquals("OK", bstatus);
167      assertNull(jedis.get(bfoo));
168      assertArrayEquals(bbar, jedis.get(bbar));
169    }
170    @Test
171    public void renameOldAndNewAreTheSame() {
172      assertEquals("OK", jedis.set("foo", "bar"));
173      assertEquals("OK", jedis.rename("foo", "foo"));
174      assertEquals("OK", jedis.set(bfoo, bbar));
175      assertEquals("OK", jedis.rename(bfoo, bfoo));
176    }
177    @Test
178    public void renamenx() {
179      jedis.set("foo", "bar");
180      assertEquals(1, jedis.renamenx("foo", "bar"));
181      jedis.set("foo", "bar");
182      assertEquals(0, jedis.renamenx("foo", "bar"));
183      jedis.set(bfoo, bbar);
184      assertEquals(1, jedis.renamenx(bfoo, bbar));
185      jedis.set(bfoo, bbar);
186      assertEquals(0, jedis.renamenx(bfoo, bbar));
187    }
188    @Test
189    public void dbSize() {
190      assertEquals(0, jedis.dbSize());
191      jedis.set("foo", "bar");
192      assertEquals(1, jedis.dbSize());
193      jedis.set(bfoo, bbar);
194      assertEquals(2, jedis.dbSize());
195    }
196    @Test
197    public void expire() {
198      assertEquals(0, jedis.expire("foo", 20L));
199      jedis.set("foo", "bar");
200      assertEquals(1, jedis.expire("foo", 20L));
201      assertEquals(0, jedis.expire("foo", 20L, ExpiryOption.NX));
202      assertEquals(0, jedis.expire(bfoo, 20L));
203      jedis.set(bfoo, bbar);
204      assertEquals(1, jedis.expire(bfoo, 20L));
205      assertEquals(0, jedis.expire(bfoo, 20L, ExpiryOption.NX));
206    }
207    @Test
208    public void expireAt() {
209      long unixTime = (System.currentTimeMillis() / 1000L) + 20;
210      assertEquals(0, jedis.expireAt("foo", unixTime));
211      jedis.set("foo", "bar");
212      unixTime = (System.currentTimeMillis() / 1000L) + 20;
213      assertEquals(1, jedis.expireAt("foo", unixTime));
214      assertEquals(1, jedis.expireAt("foo", unixTime, ExpiryOption.XX));
215      assertEquals(0, jedis.expireAt(bfoo, unixTime));
216      jedis.set(bfoo, bbar);
217      unixTime = (System.currentTimeMillis() / 1000L) + 20;
218      assertEquals(1, jedis.expireAt(bfoo, unixTime));
219      assertEquals(1, jedis.expireAt(bfoo, unixTime, ExpiryOption.XX));
220    }
221    @Test
222    public void expireTime() {
223      long unixTime;
224      jedis.set("foo", "bar");
225      unixTime = (System.currentTimeMillis() / 1000L) + 20;
226      jedis.expireAt("foo", unixTime);
227      assertEquals(unixTime, jedis.expireTime("foo"), 0.0001);
228      jedis.set(bfoo, bbar);
229      unixTime = (System.currentTimeMillis() / 1000L) + 20;
230      jedis.expireAt(bfoo, unixTime);
231      assertEquals(unixTime, jedis.expireTime(bfoo), 0.0001);
232    }
233    @Test
234    public void ttl() {
235      assertEquals(-2, jedis.ttl("foo"));
236      jedis.set("foo", "bar");
237      assertEquals(-1, jedis.ttl("foo"));
238      jedis.expire("foo", 20);
239      long ttl = jedis.ttl("foo");
240      assertTrue(ttl >= 0 && ttl <= 20);
241      assertEquals(-2, jedis.ttl(bfoo));
242      jedis.set(bfoo, bbar);
243      assertEquals(-1, jedis.ttl(bfoo));
244      jedis.expire(bfoo, 20);
245      long bttl = jedis.ttl(bfoo);
246      assertTrue(bttl >= 0 && bttl <= 20);
247    }
248    @Test
249    public void touch() throws Exception {
250      assertEquals(0, jedis.touch("foo1", "foo2", "foo3"));
251      jedis.set("foo1", "bar1");
252      Thread.sleep(1100); 
253      assertTrue(jedis.objectIdletime("foo1") > 0);
254      assertEquals(1, jedis.touch("foo1"));
255      assertEquals(0L, jedis.objectIdletime("foo1").longValue());
256      assertEquals(1, jedis.touch("foo1", "foo2", "foo3"));
257      jedis.set("foo2", "bar2");
258      jedis.set("foo3", "bar3");
259      assertEquals(3, jedis.touch("foo1", "foo2", "foo3"));
260      assertEquals(0, jedis.touch(bfoo1, bfoo2, bfoo3));
261      jedis.set(bfoo1, bbar1);
262      Thread.sleep(1100); 
263      assertTrue(jedis.objectIdletime(bfoo1) > 0);
264      assertEquals(1, jedis.touch(bfoo1));
265      assertEquals(0L, jedis.objectIdletime(bfoo1).longValue());
266      assertEquals(1, jedis.touch(bfoo1, bfoo2, bfoo3));
267      jedis.set(bfoo2, bbar2);
268      jedis.set(bfoo3, bbar3);
269      assertEquals(3, jedis.touch(bfoo1, bfoo2, bfoo3));
270    }
271    @Test
272    public void persist() {
273      jedis.setex("foo", 60 * 60, "bar");
274      assertTrue(jedis.ttl("foo") > 0);
275      assertEquals(1, jedis.persist("foo"));
276      assertEquals(-1, jedis.ttl("foo"));
277      jedis.setex(bfoo, 60 * 60, bbar);
278      assertTrue(jedis.ttl(bfoo) > 0);
279      assertEquals(1, jedis.persist(bfoo));
280      assertEquals(-1, jedis.ttl(bfoo));
281    }
282    @Test
283    public void dumpAndRestore() {
284      jedis.set("foo1", "bar");
285      byte[] sv = jedis.dump("foo1");
286      jedis.restore("foo2", 0, sv);
287      assertEquals("bar", jedis.get("foo2"));
288      jedis.set(bfoo1, bbar);
289      sv = jedis.dump(bfoo1);
290      jedis.restore(bfoo2, 0, sv);
291      assertArrayEquals(bbar, jedis.get(bfoo2));
292    }
293    @Test
294    public void restoreParams() {
295      jedis.set("foo", "bar");
296      jedis.set("from", "a");
297      byte[] serialized = jedis.dump("from");
298      try {
299        jedis.restore("foo", 0, serialized);
300        fail("Simple restore on a existing key should fail");
301      } catch (JedisDataException e) {
302      }
303      try {
304        jedis.restore("foo", 0, serialized, RestoreParams.restoreParams());
305        fail("Simple restore on a existing key should fail");
306      } catch (JedisDataException e) {
307      }
308      assertEquals("bar", jedis.get("foo"));
309      jedis.restore("foo", 1000, serialized, RestoreParams.restoreParams().replace());
310      assertEquals("a", jedis.get("foo"));
311      assertTrue(jedis.pttl("foo") <= 1000);
312      jedis.restore("bar", System.currentTimeMillis() + 1000, serialized, RestoreParams.restoreParams().replace().absTtl());
313      assertTrue(jedis.pttl("bar") <= 1000);
314      jedis.restore("bar1", 1000, serialized, RestoreParams.restoreParams().replace().idleTime(1000));
315      assertEquals(1000, jedis.objectIdletime("bar1").longValue());
316    }
317    @Test
318    public void pexpire() {
319      assertEquals(0, jedis.pexpire("foo", 10000));
320      jedis.set("foo1", "bar1");
321      assertEquals(1, jedis.pexpire("foo1", 10000));
322      jedis.set("foo2", "bar2");
323      assertEquals(1, jedis.pexpire("foo2", 200000000000L));
324      assertEquals(0, jedis.pexpire("foo2", 10000000, ExpiryOption.NX));
325      assertEquals(1, jedis.pexpire("foo2", 10000000, ExpiryOption.XX));
326      assertEquals(0, jedis.pexpire("foo2", 10000, ExpiryOption.GT));
327      assertEquals(1, jedis.pexpire("foo2", 10000, ExpiryOption.LT));
328      long pttl = jedis.pttl("foo2");
329      assertTrue(pttl > 100L);
330      assertEquals(0, jedis.pexpire(bfoo, 10000));
331      jedis.set(bfoo, bbar);
332      assertEquals(1, jedis.pexpire(bfoo, 10000));
333      assertEquals(0, jedis.pexpire(bfoo, 10000, ExpiryOption.NX));
334    }
335    @Test
336    public void pexpireAt() {
337      long unixTime = (System.currentTimeMillis()) + 10000;
338      assertEquals(0, jedis.pexpireAt("foo", unixTime));
339      jedis.set("foo", "bar");
340      assertEquals(1, jedis.pexpireAt("foo", unixTime));
341      assertEquals(0, jedis.pexpireAt(bfoo, unixTime));
342      jedis.set(bfoo, bbar);
343      assertEquals(1, jedis.pexpireAt(bfoo, unixTime));
344    }
345    @Test
346    public void pexpireTime() {
347      long unixTime = (System.currentTimeMillis()) + 10000;
348      jedis.set("foo", "bar");
349      jedis.pexpireAt("foo", unixTime);
350      assertEquals(unixTime, jedis.pexpireTime("foo"), 0.0001);
351      jedis.set(bfoo, bbar);
352      jedis.pexpireAt(bfoo, unixTime);
353      assertEquals(unixTime, jedis.pexpireTime(bfoo), 0.0001);
354    }
355    @Test
356    public void pttl() {
357      assertEquals(-2, jedis.pttl("foo"));
358      jedis.set("foo", "bar");
359      assertEquals(-1, jedis.pttl("foo"));
360      jedis.pexpire("foo", 20000);
361      long pttl = jedis.pttl("foo");
362      assertTrue(pttl >= 0 && pttl <= 20000);
363      assertEquals(-2, jedis.pttl(bfoo));
364      jedis.set(bfoo, bbar);
365      assertEquals(-1, jedis.pttl(bfoo));
366      jedis.pexpire(bfoo, 20000);
367      pttl = jedis.pttl(bfoo);
368      assertTrue(pttl >= 0 && pttl <= 20000);
369    }
370    @Test
371    public void psetex() {
372      long pttl;
373      jedis.psetex("foo", 200000000000L, "bar");
374      pttl = jedis.pttl("foo");
375      assertTrue(pttl > 100000000000L);
376      jedis.psetex(bfoo, 200000000000L, bbar);
377      pttl = jedis.pttl(bfoo);
378      assertTrue(pttl > 100000000000L);
379    }
380    @Test
381    public void scan() {
382      jedis.set("b", "b");
383      jedis.set("a", "a");
384      ScanResult<String> result = jedis.scan(SCAN_POINTER_START);
385      assertEquals(SCAN_POINTER_START, result.getCursor());
386      assertFalse(result.getResult().isEmpty());
387      ScanResult<byte[]> bResult = jedis.scan(SCAN_POINTER_START_BINARY);
388      assertArrayEquals(SCAN_POINTER_START_BINARY, bResult.getCursorAsBytes());
389      assertFalse(bResult.getResult().isEmpty());
390    }
391    @Test
392    public void scanMatch() {
393      ScanParams params = new ScanParams();
394      params.match("a*");
395      jedis.set("b", "b");
396      jedis.set("a", "a");
397      jedis.set("aa", "aa");
398      ScanResult<String> result = jedis.scan(SCAN_POINTER_START, params);
399      assertEquals(SCAN_POINTER_START, result.getCursor());
400      assertFalse(result.getResult().isEmpty());
401      params = new ScanParams();
402      params.match(bfoostar);
403      jedis.set(bfoo1, bbar);
404      jedis.set(bfoo2, bbar);
405      jedis.set(bfoo3, bbar);
406      ScanResult<byte[]> bResult = jedis.scan(SCAN_POINTER_START_BINARY, params);
407      assertArrayEquals(SCAN_POINTER_START_BINARY, bResult.getCursorAsBytes());
408      assertFalse(bResult.getResult().isEmpty());
409    }
410    @Test
411    public void scanCount() {
412      ScanParams params = new ScanParams();
413      params.count(2);
414      for (int i = 0; i < 10; i++) {
415        jedis.set("a" + i, "a" + i);
416      }
417      ScanResult<String> result = jedis.scan(SCAN_POINTER_START, params);
418      assertFalse(result.getResult().isEmpty());
419      params = new ScanParams();
420      params.count(2);
421      jedis.set(bfoo1, bbar);
422      jedis.set(bfoo2, bbar);
423      jedis.set(bfoo3, bbar);
424      ScanResult<byte[]> bResult = jedis.scan(SCAN_POINTER_START_BINARY, params);
425      assertFalse(bResult.getResult().isEmpty());
426    }
427    @Test
428    public void scanType() {
429      ScanParams noParams = new ScanParams();
430      ScanParams pagingParams = new ScanParams().count(4);
431      jedis.set("a", "a");
432      jedis.hset("b", "b", "b");
433      jedis.set("c", "c");
434      jedis.sadd("d", "d");
435      jedis.set("e", "e");
436      jedis.zadd("f", 0d, "f");
437      jedis.set("g", "g");
438      ScanResult<String> scanResult;
439      scanResult = jedis.scan(SCAN_POINTER_START, pagingParams, "string");
440      assertFalse(scanResult.isCompleteIteration());
441      int page1Count = scanResult.getResult().size();
442      scanResult = jedis.scan(scanResult.getCursor(), pagingParams, "string");
443      assertTrue(scanResult.isCompleteIteration());
444      int page2Count = scanResult.getResult().size();
445      assertEquals(4, page1Count + page2Count);
446      scanResult = jedis.scan(SCAN_POINTER_START, noParams, "hash");
447      assertEquals(Collections.singletonList("b"), scanResult.getResult());
448      scanResult = jedis.scan(SCAN_POINTER_START, noParams, "set");
449      assertEquals(Collections.singletonList("d"), scanResult.getResult());
450      scanResult = jedis.scan(SCAN_POINTER_START, noParams, "zset");
451      assertEquals(Collections.singletonList("f"), scanResult.getResult());
452      final byte[] string = "string".getBytes();
453      final byte[] hash = "hash".getBytes();
454      final byte[] set = "set".getBytes();
455      final byte[] zset = "zset".getBytes();
456      ScanResult<byte[]> binaryResult;
457      jedis.set("a", "a");
458      jedis.hset("b", "b", "b");
459      jedis.set("c", "c");
460      jedis.sadd("d", "d");
461      jedis.set("e", "e");
462      jedis.zadd("f", 0d, "f");
463      jedis.set("g", "g");
464      binaryResult = jedis.scan(SCAN_POINTER_START_BINARY, pagingParams, string);
465      assertFalse(binaryResult.isCompleteIteration());
466      page1Count = binaryResult.getResult().size();
467      binaryResult = jedis.scan(binaryResult.getCursorAsBytes(), pagingParams, string);
468      assertTrue(binaryResult.isCompleteIteration());
469      page2Count = binaryResult.getResult().size();
470      assertEquals(4, page1Count + page2Count);
471      binaryResult = jedis.scan(SCAN_POINTER_START_BINARY, noParams, hash);
472      AssertUtil.assertByteArrayListEquals(Collections.singletonList(new byte[]{98}), binaryResult.getResult());
473      binaryResult = jedis.scan(SCAN_POINTER_START_BINARY, noParams, set);
474      AssertUtil.assertByteArrayListEquals(Collections.singletonList(new byte[]{100}), binaryResult.getResult());
475      binaryResult = jedis.scan(SCAN_POINTER_START_BINARY, noParams, zset);
476      AssertUtil.assertByteArrayListEquals(Collections.singletonList(new byte[]{102}), binaryResult.getResult());
477    }
478    @Test
479    public void scanIsCompleteIteration() {
480      for (int i = 0; i < 100; i++) {
481        jedis.set("a" + i, "a" + i);
482      }
483      ScanResult<String> result = jedis.scan(SCAN_POINTER_START);
484      assertFalse(result.isCompleteIteration());
485      result = scanCompletely(result.getCursor());
486      assertNotNull(result);
487      assertTrue(result.isCompleteIteration());
488    }
489    private ScanResult<String> scanCompletely(String cursor) {
490      ScanResult<String> scanResult;
491      do {
492        scanResult = jedis.scan(cursor);
493        cursor = scanResult.getCursor();
494      } while (!SCAN_POINTER_START.equals(scanResult.getCursor()));
495      return scanResult;
496    }
497    @Test
498    public void setNxExAndGet() {
499      assertEquals("OK", jedis.set("hello", "world", SetParams.setParams().nx().ex(expireSeconds)));
500      assertEquals("world", jedis.get("hello"));
501      assertNull(jedis.set("hello", "bar", SetParams.setParams().nx().ex(expireSeconds)));
502      assertEquals("world", jedis.get("hello"));
503      long ttl = jedis.ttl("hello");
504      assertTrue(ttl > 0 && ttl <= expireSeconds);
505      byte[] bworld = { 0x77, 0x6F, 0x72, 0x6C, 0x64 };
506      byte[] bhello = { 0x68, 0x65, 0x6C, 0x6C, 0x6F };
507      assertEquals("OK", jedis.set(bworld, bhello, SetParams.setParams().nx().ex(expireSeconds)));
508      assertArrayEquals(bhello, jedis.get(bworld));
509      assertNull(jedis.set(bworld, bbar, SetParams.setParams().nx().ex(expireSeconds)));
510      assertArrayEquals(bhello, jedis.get(bworld));
511      long bttl = jedis.ttl(bworld);
512      assertTrue(bttl > 0 && bttl <= expireSeconds);
513    }
514    @Test
515    public void setGetOptionTest() {
516      assertEquals("OK", jedis.set("hello", "world"));
517      assertEquals("world", jedis.setGet("hello", "jedis"));
518      assertEquals("jedis", jedis.get("hello"));
519      assertNull(jedis.setGet("key", "value"));
520    }
521    @Test
522    public void setGet() {
523      assertEquals("OK", jedis.set("hello", "world"));
524      assertEquals("world", jedis.setGet("hello", "jedis", SetParams.setParams()));
525      assertEquals("jedis", jedis.get("hello"));
526      assertNull(jedis.setGet("key", "value", SetParams.setParams()));
527    }
528    @Test
529    public void sendCommandTest() {
530      Object obj = jedis.sendCommand(SET, "x", "1");
531      String returnValue = encode((byte[]) obj);
532      assertEquals("OK", returnValue);
533      obj = jedis.sendCommand(GET, "x");
534      returnValue = encode((byte[]) obj);
535      assertEquals("1", returnValue);
536      jedis.sendCommand(RPUSH, "foo", "a");
537      jedis.sendCommand(RPUSH, "foo", "b");
538      jedis.sendCommand(RPUSH, "foo", "c");
539      obj = jedis.sendCommand(LRANGE, "foo", "0", "2");
540      List<byte[]> list = (List<byte[]>) obj;
541      List<byte[]> expected = new ArrayList<>(3);
542      expected.add("a".getBytes());
543      expected.add("b".getBytes());
544      expected.add("c".getBytes());
545      for (int i = 0; i < 3; i++)
546        assertArrayEquals(expected.get(i), list.get(i));
547      assertEquals("PONG", encode((byte[]) jedis.sendCommand(PING)));
548    }
549    @Test
550    public void sendBlockingCommandTest() {
551      assertNull(jedis.sendBlockingCommand(BLPOP, "foo", Long.toString(1L)));
552      jedis.sendCommand(RPUSH, "foo", "bar");
553      assertEquals(Arrays.asList("foo", "bar"),
554        encodeObject(jedis.sendBlockingCommand(BLPOP, "foo", Long.toString(1L))));
555      assertNull(jedis.sendBlockingCommand(BLPOP, "foo", Long.toString(1L)));
556    }
557    @Test
558    public void encodeCompleteResponse() {
559      HashMap<String, String> entry = new HashMap<>();
560      entry.put("foo", "bar");
561      StreamEntryID entryID = jedis.xadd("mystream", StreamEntryID.NEW_ENTRY, entry);
562      jedis.xgroupCreate("mystream", "mygroup", null, false);
563      Object obj = jedis.sendCommand(XINFO, "STREAM", "mystream");
564      List encodeObj = (List) encodeObject(obj);
565      assertTrue(encodeObj.size() >= 14);
566      assertEquals(0, encodeObj.size() % 2); 
567      assertEquals(1L, findValueFromMapAsList(encodeObj, "length"));
568      assertEquals(entryID.toString(), findValueFromMapAsList(encodeObj, "last-generated-id"));
569      List<String> entryAsList = new ArrayList<>(2);
570      entryAsList.add("foo");
571      entryAsList.add("bar");
572      assertEquals(entryAsList, ((List) findValueFromMapAsList(encodeObj, "first-entry")).get(1));
573      assertEquals(entryAsList, ((List) findValueFromMapAsList(encodeObj, "last-entry")).get(1));
574      assertEquals("PONG", encodeObject(jedis.sendCommand(PING)));
575      entry.put("foo2", "bar2");
576      jedis.hset("hash:test:encode", entry);
577      encodeObj = (List) encodeObject(jedis.sendCommand(HGETALL, "hash:test:encode"));
578      assertEquals(4, encodeObj.size());
579      assertTrue(encodeObj.contains("foo"));
580      assertTrue(encodeObj.contains("foo2"));
581    }
582    private Object findValueFromMapAsList(List list, Object key) {
583      for (int i = 0; i < list.size(); i += 2) {
584        if (key.equals(list.get(i))) {
585          return list.get(i + 1);
586        }
587      }
588      return null;
589    }
590    @Test
591    public void copy() {
592      assertFalse(jedis.copy("unknown", "foo", false));
593      jedis.set("foo1", "bar");
594      assertTrue(jedis.copy("foo1", "foo2", false));
595      assertEquals("bar", jedis.get("foo2"));
596      jedis.set("foo1", "bar1");
597      assertTrue(jedis.copy("foo1", "foo2", true));
598      assertEquals("bar1", jedis.get("foo2"));
599      assertFalse(jedis.copy(bfoobar, bfoo, false));
600      jedis.set(bfoo1, bbar);
601      assertTrue(jedis.copy(bfoo1, bfoo2, false));
602      assertArrayEquals(bbar, jedis.get(bfoo2));
603      jedis.set(bfoo1, bbar1);
604      assertTrue(jedis.copy(bfoo1, bfoo2, true));
605      assertArrayEquals(bbar1, jedis.get(bfoo2));
606    }
607    @Test
608    public void scanIteration() {
609      Set<String> allIn = new HashSet<>(26 * 26);
610      char[] arr = new char[2];
611      for (int i = 0; i < 26; i++) {
612        arr[0] = (char) ('a' + i);
613        for (int j = 0; j < 26; j++) {
614          arr[1] = (char) ('a' + j);
615          String str = new String(arr);
616          jedis.incr(str);
617          allIn.add(str);
618        }
619      }
620      Set<String> allScan = new HashSet<>();
621      ScanIteration scan = jedis.scanIteration(10, "*");
622      while (!scan.isIterationCompleted()) {
623        ScanResult<String> batch = scan.nextBatch();
624        allScan.addAll(batch.getResult());
625      }
626      assertEquals(allIn, allScan);
627    }
628  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from google-api-java-client-samples-MDEwOlJlcG9zaXRvcnkyOTc0OTA1Mg==-flat-TasksSample.java</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from jedis-MDEwOlJlcG9zaXRvcnk3MTU2MDU=-flat-AllKindOfValuesCommandsTestBase.java</div>
                </div>
                <div class="column column_space"><pre><code>2  import com.google.android.gms.common.GooglePlayServicesUtil;
3  import com.google.api.client.extensions.android.http.AndroidHttp;
4  import com.google.api.client.googleapis.extensions.android.gms.auth.GoogleAccountCredential;
5  import com.google.api.client.http.HttpTransport;
6  import com.google.api.client.json.JsonFactory;
7  import com.google.api.client.json.gson.GsonFactory;
8  import com.google.api.services.tasks.TasksScopes;
9  import android.accounts.AccountManager;
10  import android.app.Activity;
11  import android.app.Dialog;
12  import android.content.Context;
13  import android.content.Intent;
14  import android.content.SharedPreferences;
15  import android.os.Bundle;
16  import android.view.Menu;
17  import android.view.MenuInflater;
18  import android.view.MenuItem;
19  import android.widget.ArrayAdapter;
20  import android.widget.ListView;
21  import java.util.Collections;
22  import java.util.List;
23  import java.util.logging.Level;
24  import java.util.logging.Logger;
25  public final class TasksSample extends Activity {
26    private static final Level LOGGING_LEVEL = Level.OFF;
</pre></code></div>
                <div class="column column_space"><pre><code>15  import static redis.clients.jedis.Protocol.Command.SET;
16  import static redis.clients.jedis.Protocol.Command.XINFO;
17  import static redis.clients.jedis.util.SafeEncoder.encode;
18  import static redis.clients.jedis.util.SafeEncoder.encodeObject;
19  import static redis.clients.jedis.params.ScanParams.SCAN_POINTER_START;
20  import static redis.clients.jedis.params.ScanParams.SCAN_POINTER_START_BINARY;
21  import java.util.ArrayList;
22  import java.util.Arrays;
23  import java.util.Collections;
24  import java.util.HashMap;
25  import java.util.HashSet;
26  import java.util.List;
27  import java.util.Set;
28  import org.junit.Test;
29  import redis.clients.jedis.ScanIteration;
30  import redis.clients.jedis.StreamEntryID;
31  import redis.clients.jedis.args.ExpiryOption;
32  import redis.clients.jedis.params.ScanParams;
33  import redis.clients.jedis.resps.ScanResult;
34  import redis.clients.jedis.params.RestoreParams;
35  import redis.clients.jedis.exceptions.JedisDataException;
36  import redis.clients.jedis.params.SetParams;
37  import redis.clients.jedis.util.AssertUtil;
38  public abstract class AllKindOfValuesCommandsTestBase extends UnifiedJedisCommandsTestBase {
39    protected final byte[] bfoo = { 0x01, 0x02, 0x03, 0x04 };
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    