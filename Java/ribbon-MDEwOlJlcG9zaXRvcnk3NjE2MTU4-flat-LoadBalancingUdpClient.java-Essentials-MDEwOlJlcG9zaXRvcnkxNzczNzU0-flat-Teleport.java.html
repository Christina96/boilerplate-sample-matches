
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 6.496519721577726%, Tokens: 14, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>ribbon-MDEwOlJlcG9zaXRvcnk3NjE2MTU4-flat-LoadBalancingUdpClient.java</h3>
            <pre><code><span onclick='openModal()' class='match'>1  package com.netflix.ribbon.transport.netty.udp;
2  import com.netflix.client.RetryHandler;
3  import com.netflix.client.config.IClientConfig;
4  import com.netflix.ribbon.transport.netty.LoadBalancingRxClient;
5  import com.netflix.loadbalancer.ILoadBalancer;
6  import com.netflix.loadbalancer.Server;
7  import io.reactivex.netty.RxNetty;
8  import io.reactivex.netty.client.ClientMetricsEvent;
9  import io.reactivex.netty.client.RxClient;
10  import io.reactivex.netty.metrics.MetricEventsListener;
11  import io.reactivex.netty.pipeline.PipelineConfigurator;
12  import io.reactivex.netty.protocol.udp.client.UdpClientBuilder;
13  import io.reactivex.netty.servo.udp.UdpClientListener;
14  public class LoadBalancingUdpClient<I, O> extends LoadBalancingRxClient<I, O, RxClient<I,O>> implements RxClient<I, O> {
</span>15      public LoadBalancingUdpClient(IClientConfig config,
16              RetryHandler retryHandler,
17              PipelineConfigurator<O, I> pipelineConfigurator) {
18          super(config, retryHandler, pipelineConfigurator);
19      }
20      public LoadBalancingUdpClient(ILoadBalancer lb, IClientConfig config,
21              RetryHandler retryHandler,
22              PipelineConfigurator<O, I> pipelineConfigurator) {
23          super(lb, config, retryHandler, pipelineConfigurator);
24      }
25      @Override
26      protected RxClient<I, O> createRxClient(Server server) {
27          UdpClientBuilder<I, O> builder = RxNetty.newUdpClientBuilder(server.getHost(), server.getPort());
28          if (pipelineConfigurator != null) {
29              builder.pipelineConfigurator(pipelineConfigurator);
30          }
31          return builder.build();
32      }
33      @Override
34      protected MetricEventsListener<? extends ClientMetricsEvent<?>> createListener(
35              String name) {
36          return UdpClientListener.newUdpListener(name);
37      }
38  }
</code></pre>
        </div>
        <div class="column">
            <h3>Essentials-MDEwOlJlcG9zaXRvcnkxNzczNzU0-flat-Teleport.java</h3>
            <pre><code><span onclick='openModal()' class='match'>1  package com.earth2me.essentials;
2  import static com.earth2me.essentials.I18n.tl;
3  import com.earth2me.essentials.utils.DateUtil;
4  import com.earth2me.essentials.utils.LocationUtil;
5  import java.math.BigDecimal;
6  import java.util.Calendar;
7  import java.util.GregorianCalendar;
8  import net.ess3.api.IEssentials;
9  import net.ess3.api.IUser;
10  import org.bukkit.Location;
11  import org.bukkit.entity.Player;
12  import org.bukkit.event.player.PlayerRespawnEvent;
13  import org.bukkit.event.player.PlayerTeleportEvent.TeleportCause;
14  public class Teleport implements net.ess3.api.ITeleport
</span>15  {
16  	private final IUser teleportOwner;
17  	private final IEssentials ess;
18  	private TimedTeleport timedTeleport;
19  	public Teleport(IUser user, IEssentials ess)
20  	{
21  		this.teleportOwner = user;
22  		this.ess = ess;
23  	}
24  	public void cooldown(boolean check) throws Exception
25  	{
26  		final Calendar time = new GregorianCalendar();
27  		if (teleportOwner.getLastTeleportTimestamp() > 0)
28  		{
29  			final double cooldown = ess.getSettings().getTeleportCooldown();
30  			final Calendar earliestTime = new GregorianCalendar();
31  			earliestTime.add(Calendar.SECOND, -(int)cooldown);
32  			earliestTime.add(Calendar.MILLISECOND, -(int)((cooldown * 1000.0) % 1000.0));
33  			final long earliestLong = earliestTime.getTimeInMillis();
34  			final Long lastTime = teleportOwner.getLastTeleportTimestamp();
35  			if (lastTime > time.getTimeInMillis())
36  			{
37  				teleportOwner.setLastTeleportTimestamp(time.getTimeInMillis());
38  				return;
39  			}
40  			else if (lastTime > earliestLong && !teleportOwner.isAuthorized("essentials.teleport.cooldown.bypass"))
41  			{
42  				time.setTimeInMillis(lastTime);
43  				time.add(Calendar.SECOND, (int)cooldown);
44  				time.add(Calendar.MILLISECOND, (int)((cooldown * 1000.0) % 1000.0));
45  				throw new Exception(tl("timeBeforeTeleport", DateUtil.formatDateDiff(time.getTimeInMillis())));
46  			}
47  		}
48  		if (!check)
49  		{
50  			teleportOwner.setLastTeleportTimestamp(time.getTimeInMillis());
51  		}
52  	}
53  	private void warnUser(final IUser user, final double delay)
54  	{
55  		Calendar c = new GregorianCalendar();
56  		c.add(Calendar.SECOND, (int)delay);
57  		c.add(Calendar.MILLISECOND, (int)((delay * 1000.0) % 1000.0));
58  		user.sendMessage(tl("dontMoveMessage", DateUtil.formatDateDiff(c.getTimeInMillis())));
59  	}
60  	@Override
61  	public void now(Location loc, boolean cooldown, TeleportCause cause) throws Exception
62  	{
63  		if (cooldown)
64  		{
65  			cooldown(false);
66  		}
67  		final ITarget target = new LocationTarget(loc);
68  		now(teleportOwner, target, cause);
69  	}
70  	@Override
71  	public void now(Player entity, boolean cooldown, TeleportCause cause) throws Exception
72  	{
73  		if (cooldown)
74  		{
75  			cooldown(false);
76  		}
77  		final ITarget target = new PlayerTarget(entity);
78  		now(teleportOwner, target, cause);
79  		teleportOwner.sendMessage(tl("teleporting", target.getLocation().getWorld().getName(), target.getLocation().getBlockX(), target.getLocation().getBlockY(), target.getLocation().getBlockZ()));
80  	}
81  	protected void now(IUser teleportee, ITarget target, TeleportCause cause) throws Exception
82  	{
83  		cancel(false);
84  		teleportee.setLastLocation();
85  		final Location loc = target.getLocation();
86  		if (LocationUtil.isBlockUnsafeForUser(teleportee, loc.getWorld(), loc.getBlockX(), loc.getBlockY(), loc.getBlockZ()))
87  		{
88  			if (ess.getSettings().isTeleportSafetyEnabled())
89  			{
90  				if (teleportee.getBase().isInsideVehicle())
91  				{
92  					teleportee.getBase().leaveVehicle();
93  				}
94  				teleportee.getBase().teleport(LocationUtil.getSafeDestination(teleportee, loc), cause);
95  			}
96  			else
97  			{
98  				throw new Exception(tl("unsafeTeleportDestination", loc.getWorld().getName(), loc.getBlockX(), loc.getBlockY(), loc.getBlockZ()));
99  			}
100  		}
101  		else
102  		{
103  			if (teleportee.getBase().isInsideVehicle())
104  			{
105  				teleportee.getBase().leaveVehicle();
106  			}
107  			teleportee.getBase().teleport(LocationUtil.getRoundedDestination(loc), cause);
108  		}
109  	}
110  	@Deprecated
111  	@Override
112  	public void teleport(Location loc, Trade chargeFor) throws Exception
113  	{
114  		teleport(loc, chargeFor, TeleportCause.PLUGIN);
115  	}
116  	@Override
117  	public void teleport(Location loc, Trade chargeFor, TeleportCause cause) throws Exception
118  	{
119  		teleport(teleportOwner, new LocationTarget(loc), chargeFor, cause);
120  	}
121  	@Override
122  	public void teleport(Player entity, Trade chargeFor, TeleportCause cause) throws Exception
123  	{
124  		ITarget target = new PlayerTarget(entity);
125  		teleportOwner.sendMessage(tl("teleportToPlayer", entity.getDisplayName()));
126  		teleport(teleportOwner, target, chargeFor, cause);
127  	}
128  	@Override
129  	public void teleportPlayer(IUser teleportee, Location loc, Trade chargeFor, TeleportCause cause) throws Exception
130  	{
131  		teleport(teleportee, new LocationTarget(loc), chargeFor, cause);
132  	}
133  	@Override
134  	public void teleportPlayer(IUser teleportee, Player entity, Trade chargeFor, TeleportCause cause) throws Exception
135  	{
136  		ITarget target = new PlayerTarget(entity);
137  		teleport(teleportee, target, chargeFor, cause);
138  		teleportee.sendMessage(tl("teleporting", target.getLocation().getWorld().getName(), target.getLocation().getBlockX(), target.getLocation().getBlockY(), target.getLocation().getBlockZ()));
139  		teleportOwner.sendMessage(tl("teleporting", target.getLocation().getWorld().getName(), target.getLocation().getBlockX(), target.getLocation().getBlockY(), target.getLocation().getBlockZ()));
140  	}
141  	private void teleport(IUser teleportee, ITarget target, Trade chargeFor, TeleportCause cause) throws Exception
142  	{
143  		double delay = ess.getSettings().getTeleportDelay();
144  		Trade cashCharge = chargeFor;
145  		if (chargeFor != null)
146  		{
147  			chargeFor.isAffordableFor(teleportOwner);
148  			if (!chargeFor.getCommandCost(teleportOwner).equals(BigDecimal.ZERO))
149  			{
150  				cashCharge = new Trade(chargeFor.getCommandCost(teleportOwner), ess);
151  			}
152  		}
153  		cooldown(true);
154  		if (delay <= 0 || teleportOwner.isAuthorized("essentials.teleport.timer.bypass")
155  			|| teleportee.isAuthorized("essentials.teleport.timer.bypass"))
156  		{
157  			cooldown(false);
158  			now(teleportee, target, cause);
159  			if (cashCharge != null)
160  			{
161  				cashCharge.charge(teleportOwner);
162  			}
163  			return;
164  		}
165  		cancel(false);
166  		warnUser(teleportee, delay);
167  		initTimer((long)(delay * 1000.0), teleportee, target, cashCharge, cause, false);
168  	}
169  	@Override
170  	public void respawn(final Trade chargeFor, TeleportCause cause) throws Exception
171  	{
172  		double delay = ess.getSettings().getTeleportDelay();
173  		if (chargeFor != null)
174  		{
175  			chargeFor.isAffordableFor(teleportOwner);
176  		}
177  		cooldown(true);
178  		if (delay <= 0 || teleportOwner.isAuthorized("essentials.teleport.timer.bypass"))
179  		{
180  			cooldown(false);
181  			respawnNow(teleportOwner, cause);
182  			if (chargeFor != null)
183  			{
184  				chargeFor.charge(teleportOwner);
185  			}
186  			return;
187  		}
188  		cancel(false);
189  		warnUser(teleportOwner, delay);
190  		initTimer((long)(delay * 1000.0), teleportOwner, null, chargeFor, cause, true);
191  	}
192  	protected void respawnNow(IUser teleportee, TeleportCause cause) throws Exception
193  	{
194  		final Player player = teleportee.getBase();
195  		Location bed = player.getBedSpawnLocation();
196  		if (bed != null)
197  		{
198  			now(teleportee, new LocationTarget(bed), cause);
199  		}
200  		else
201  		{
202  			if (ess.getSettings().isDebug())
203  			{
204  				ess.getLogger().info("Could not find bed spawn, forcing respawn event.");
205  			}
206  			final PlayerRespawnEvent pre = new PlayerRespawnEvent(player, player.getWorld().getSpawnLocation(), false);
207  			ess.getServer().getPluginManager().callEvent(pre);
208  			now(teleportee, new LocationTarget(pre.getRespawnLocation()), cause);
209  		}
210  	}
211  	@Override
212  	public void warp(IUser teleportee, String warp, Trade chargeFor, TeleportCause cause) throws Exception
213  	{
214  		Location loc = ess.getWarps().getWarp(warp);
215  		teleportee.sendMessage(tl("warpingTo", warp, loc.getWorld().getName(), loc.getBlockX(), loc.getBlockY(), loc.getBlockZ()));
216  		if (!teleportee.equals(teleportOwner))
217  		{
218  			teleportOwner.sendMessage(tl("warpingTo", warp, loc.getWorld().getName(), loc.getBlockX(), loc.getBlockY(), loc.getBlockZ()));
219  		}
220  		teleport(teleportee, new LocationTarget(loc), chargeFor, cause);
221  	}
222  	@Override
223  	public void back(Trade chargeFor) throws Exception
224  	{
225  		final Location loc = teleportOwner.getLastLocation();
226  		teleportOwner.sendMessage(tl("backUsageMsg", loc.getWorld().getName(), loc.getBlockX(), loc.getBlockY(), loc.getBlockZ()));
227  		teleport(teleportOwner, new LocationTarget(loc), chargeFor, TeleportCause.COMMAND);
228  	}
229  	@Override
230  	public void back() throws Exception
231  	{
232  		now(teleportOwner, new LocationTarget(teleportOwner.getLastLocation()), TeleportCause.COMMAND);
233  	}
234  	private void cancel(boolean notifyUser)
235  	{
236  		if (timedTeleport != null)
237  		{
238  			timedTeleport.cancelTimer(notifyUser);
239  			timedTeleport = null;
240  		}
241  	}
242  	private void initTimer(long delay, IUser teleportUser, ITarget target, Trade chargeFor, TeleportCause cause, boolean respawn)
243  	{
244  		timedTeleport = new TimedTeleport(teleportOwner, ess, this, delay, teleportUser, target, chargeFor, cause, respawn);
245  	}
246  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from ribbon-MDEwOlJlcG9zaXRvcnk3NjE2MTU4-flat-LoadBalancingUdpClient.java</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from Essentials-MDEwOlJlcG9zaXRvcnkxNzczNzU0-flat-Teleport.java</div>
                </div>
                <div class="column column_space"><pre><code>1  package com.netflix.ribbon.transport.netty.udp;
2  import com.netflix.client.RetryHandler;
3  import com.netflix.client.config.IClientConfig;
4  import com.netflix.ribbon.transport.netty.LoadBalancingRxClient;
5  import com.netflix.loadbalancer.ILoadBalancer;
6  import com.netflix.loadbalancer.Server;
7  import io.reactivex.netty.RxNetty;
8  import io.reactivex.netty.client.ClientMetricsEvent;
9  import io.reactivex.netty.client.RxClient;
10  import io.reactivex.netty.metrics.MetricEventsListener;
11  import io.reactivex.netty.pipeline.PipelineConfigurator;
12  import io.reactivex.netty.protocol.udp.client.UdpClientBuilder;
13  import io.reactivex.netty.servo.udp.UdpClientListener;
14  public class LoadBalancingUdpClient<I, O> extends LoadBalancingRxClient<I, O, RxClient<I,O>> implements RxClient<I, O> {
</pre></code></div>
                <div class="column column_space"><pre><code>1  package com.earth2me.essentials;
2  import static com.earth2me.essentials.I18n.tl;
3  import com.earth2me.essentials.utils.DateUtil;
4  import com.earth2me.essentials.utils.LocationUtil;
5  import java.math.BigDecimal;
6  import java.util.Calendar;
7  import java.util.GregorianCalendar;
8  import net.ess3.api.IEssentials;
9  import net.ess3.api.IUser;
10  import org.bukkit.Location;
11  import org.bukkit.entity.Player;
12  import org.bukkit.event.player.PlayerRespawnEvent;
13  import org.bukkit.event.player.PlayerTeleportEvent.TeleportCause;
14  public class Teleport implements net.ess3.api.ITeleport
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    