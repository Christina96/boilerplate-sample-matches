
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 5.649717514124294%, Tokens: 10</h2>
        <div class="column">
            <h3>BungeeCord-MDEwOlJlcG9zaXRvcnk2MDg0MjEw-flat-ChatChain.java</h3>
            <pre><code><span onclick='openModal()' class='match'>1  package net.md_5.bungee.protocol;
2  import com.google.common.base.Preconditions;
3  import io.netty.buffer.ByteBuf;
4  import java.util.LinkedList;
5  import java.util.List;
6  import java.util.UUID;
7  import lombok.AllArgsConstructor;
8  import lombok.Data;
9  import lombok.EqualsAndHashCode;
10  import lombok.NoArgsConstructor;
</span>11  @Data
12  @NoArgsConstructor
13  @AllArgsConstructor
14  @EqualsAndHashCode(callSuper = false)
15  public class ChatChain extends DefinedPacket
16  {
17      private List<ChainLink> seen;
18      private List<ChainLink> received;
19      @Override
20      public void read(ByteBuf buf, ProtocolConstants.Direction direction, int protocolVersion)
21      {
22          seen = readLinks( buf );
23          if ( buf.readBoolean() )
24          {
25              received = readLinks( buf );
26          }
27      }
28      private static List<ChainLink> readLinks(ByteBuf buf)
29      {
30          int cnt = readVarInt( buf );
31          Preconditions.checkArgument( cnt <= 5, "Too many entries" );
32          List<ChainLink> chain = new LinkedList<>();
33          for ( int i = 0; i < cnt; i++ )
34          {
35              chain.add( new ChainLink( readUUID( buf ), readArray( buf ) ) );
36          }
37          return chain;
38      }
39      @Override
40      public void write(ByteBuf buf, ProtocolConstants.Direction direction, int protocolVersion)
41      {
42          writeLinks( seen, buf );
43          if ( received != null )
44          {
45              buf.writeBoolean( true );
46              writeLinks( received, buf );
47          } else
48          {
49              buf.writeBoolean( false );
50          }
51      }
52      private static void writeLinks(List<ChainLink> links, ByteBuf buf)
53      {
54          writeVarInt( links.size(), buf );
55          for ( ChainLink link : links )
56          {
57              writeUUID( link.sender, buf );
58              writeArray( link.signature, buf );
59          }
60      }
61      @Override
62      public void handle(AbstractPacketHandler handler) throws Exception
63      {
64          throw new UnsupportedOperationException( "Not supported." );
65      }
66      @Data
67      public static class ChainLink
68      {
69          private final UUID sender;
70          private final byte[] signature;
71      }
72  }
</code></pre>
        </div>
        <div class="column">
            <h3>jedis-MDEwOlJlcG9zaXRvcnk3MTU2MDU=-flat-ClusterCommandsTest.java</h3>
            <pre><code><span onclick='openModal()' class='match'>1  package redis.clients.jedis.commands.jedis;
2  import static org.junit.Assert.assertEquals;
3  import static org.junit.Assert.assertNotEquals;
4  import static org.junit.Assert.assertNotNull;
5  import static org.junit.Assert.assertTrue;
6  import java.util.List;
7  import java.util.Map;
8  import org.hamcrest.MatcherAssert;
9  import org.hamcrest.Matchers;
10  import org.junit.After;
</span>11  import org.junit.AfterClass;
12  import org.junit.Before;
13  import org.junit.Test;
14  import redis.clients.jedis.HostAndPort;
15  import redis.clients.jedis.Jedis;
16  import redis.clients.jedis.args.ClusterResetType;
17  import redis.clients.jedis.HostAndPorts;
18  import redis.clients.jedis.exceptions.JedisDataException;
19  import redis.clients.jedis.util.JedisClusterCRC16;
20  import redis.clients.jedis.util.JedisClusterTestUtil;
21  public class ClusterCommandsTest {
22    private static Jedis node1;
23    private static Jedis node2;
24    private static HostAndPort nodeInfo1 = HostAndPorts.getClusterServers().get(0);
25    private static HostAndPort nodeInfo2 = HostAndPorts.getClusterServers().get(1);
26    @Before
27    public void setUp() throws Exception {
28      node1 = new Jedis(nodeInfo1);
29      node1.auth("cluster");
30      node1.flushAll();
31      node2 = new Jedis(nodeInfo2);
32      node2.auth("cluster");
33      node2.flushAll();
34    }
35    @After
36    public void tearDown() {
37      node1.disconnect();
38      node2.disconnect();
39    }
40    @AfterClass
41    public static void removeSlots() throws InterruptedException {
42      try (Jedis node = new Jedis(nodeInfo1)) {
43        node.auth("cluster");
44        node.clusterReset(ClusterResetType.SOFT);
45      }
46      try (Jedis node = new Jedis(nodeInfo2)) {
47        node.auth("cluster");
48        node.clusterReset(ClusterResetType.SOFT);
49      }
50    }
51    @Test
52    public void testClusterSoftReset() {
53      node1.clusterMeet("127.0.0.1", nodeInfo2.getPort());
54      assertTrue(node1.clusterNodes().split("\n").length > 1);
55      node1.clusterReset(ClusterResetType.SOFT);
56      assertEquals(1, node1.clusterNodes().split("\n").length);
57    }
58    @Test
59    public void testClusterHardReset() {
60      String nodeId = JedisClusterTestUtil.getNodeId(node1.clusterNodes());
61      node1.clusterReset(ClusterResetType.HARD);
62      String newNodeId = JedisClusterTestUtil.getNodeId(node1.clusterNodes());
63      assertNotEquals(nodeId, newNodeId);
64    }
65    @Test
66    public void clusterSetSlotImporting() {
67      node2.clusterAddSlots(6000);
68      String[] nodes = node1.clusterNodes().split("\n");
69      String nodeId = nodes[0].split(" ")[0];
70      String status = node1.clusterSetSlotImporting(6000, nodeId);
71      assertEquals("OK", status);
72      node2.clusterDelSlots(6000);
73    }
74    @Test
75    public void clusterNodes() {
76      String nodes = node1.clusterNodes();
77      assertTrue(nodes.split("\n").length > 0);
78    }
79    @Test
80    public void clusterAddSlotsAndDelSlots() {
81      assertEquals("OK", node1.clusterAddSlots(1, 2, 3, 4, 5));
82      assertEquals("OK", node1.clusterDelSlots(1, 2, 3, 4, 5));
83    }
84    @Test
85    public void clusterInfo() {
86      String info = node1.clusterInfo();
87      assertNotNull(info);
88    }
89    @Test
90    public void addAndDelSlotsRange() {
91      assertEquals("OK", node1.clusterAddSlotsRange(100, 105));
92      String clusterNodes = node1.clusterNodes();
93      assertTrue(clusterNodes.contains("connected 100-105"));
94      assertEquals("OK", node1.clusterAddSlotsRange(110, 120));
95      clusterNodes = node1.clusterNodes();
96      assertTrue(clusterNodes.contains("connected 100-105 110-120"));
97      assertEquals("OK", node1.clusterDelSlotsRange(100, 105));
98      clusterNodes = node1.clusterNodes();
99      assertTrue(clusterNodes.contains("connected 110-120"));
100      assertEquals("OK", node1.clusterDelSlotsRange(110, 120));
101    }
102    @Test
103    public void clusterGetKeysInSlot() {
104      node1.clusterAddSlots(500);
105      List<String> keys = node1.clusterGetKeysInSlot(500, 1);
106      assertEquals(0, keys.size());
107      node1.clusterDelSlots(500);
108    }
109    @Test
110    public void clusterGetKeysInSlotBinary() {
111      node1.clusterAddSlots(501);
112      List<byte[]> keys = node1.clusterGetKeysInSlotBinary(501, 1);
113      assertEquals(0, keys.size());
114      node1.clusterDelSlots(501);
115    }
116    @Test
117    public void clusterSetSlotNode() {
118      String[] nodes = node1.clusterNodes().split("\n");
119      String nodeId = nodes[0].split(" ")[0];
120      String status = node1.clusterSetSlotNode(10000, nodeId);
121      assertEquals("OK", status);
122    }
123    @Test
124    public void clusterSetSlotMigrating() {
125      node1.clusterAddSlots(5000);
126      String[] nodes = node1.clusterNodes().split("\n");
127      String nodeId = nodes[0].split(" ")[0];
128      String status = node1.clusterSetSlotMigrating(5000, nodeId);
129      assertEquals("OK", status);
130      node1.clusterDelSlots(5000);
131    }
132    @Test
133    public void clusterSlots() {
134      assertEquals("OK", node1.clusterAddSlots(3000, 3001, 3002));
135      List<Object> slots = node1.clusterSlots();
136      assertNotNull(slots);
137      assertTrue(slots.size() > 0);
138      for (Object slotInfoObj : slots) {
139        assertNotNull(slotInfoObj);
140        List<Object> slotInfo = (List<Object>) slotInfoObj;
141        assertTrue(slotInfo.size() >= 2);
142        assertTrue(slotInfo.get(0) instanceof Long);
143        assertTrue(slotInfo.get(1) instanceof Long);
144        if (slotInfo.size() > 2) {
145          assertTrue(slotInfo.get(2) instanceof List);
146        }
147      }
148      node1.clusterDelSlots(3000, 3001, 3002);
149    }
150    @Test
151    public void clusterLinks() throws InterruptedException {
152      List<Map<String, Object>> links = node1.clusterLinks();
153      assertNotNull(links);
154      assertEquals(0, links.size());
155    }
156    @Test
157    public void testClusterKeySlot() {
158      assertEquals(JedisClusterCRC16.getSlot("{user1000}.following"),
159        node1.clusterKeySlot("{user1000}.following"));
160      assertEquals(JedisClusterCRC16.getSlot("foo{bar}{zap}"),
161          node1.clusterKeySlot("foo{bar}{zap}"));
162      assertEquals(JedisClusterCRC16.getSlot("foo{}{bar}"),
163          node1.clusterKeySlot("foo{}{bar}"));
164      assertEquals(JedisClusterCRC16.getSlot("foo{{bar}}zap"),
165          node1.clusterKeySlot("foo{{bar}}zap"));
166    }
167    @Test
168    public void clusterCountFailureReports() {
169      assertEquals(0, node1.clusterCountFailureReports(node1.clusterMyId()));
170    }
171    @Test
172    public void clusterMyId() {
173      MatcherAssert.assertThat(node1.clusterMyId(), Matchers.not(Matchers.isEmptyOrNullString()));
174    }
175    @Test
176    public void clusterMyShardId() {
177      MatcherAssert.assertThat(node1.clusterMyShardId(), Matchers.not(Matchers.isEmptyOrNullString()));
178    }
179    @Test
180    public void testClusterEpoch() {
181      try {
182        assertEquals("OK", node1.clusterSetConfigEpoch(1));
183      } catch (JedisDataException jde) {
184        assertEquals("ERR The user can assign a config epoch only when the node does not know any other node.", jde.getMessage());
185      }
186    }
187    @Test
188    public void ClusterBumpEpoch() {
189      MatcherAssert.assertThat(node1.clusterBumpEpoch(), Matchers.matchesPattern("^BUMPED|STILL [0-9]+$"));
190    }
191  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from BungeeCord-MDEwOlJlcG9zaXRvcnk2MDg0MjEw-flat-ChatChain.java</div>
                <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from jedis-MDEwOlJlcG9zaXRvcnk3MTU2MDU=-flat-ClusterCommandsTest.java</div>
                <div class="column column_space"><pre><code>1  package net.md_5.bungee.protocol;
2  import com.google.common.base.Preconditions;
3  import io.netty.buffer.ByteBuf;
4  import java.util.LinkedList;
5  import java.util.List;
6  import java.util.UUID;
7  import lombok.AllArgsConstructor;
8  import lombok.Data;
9  import lombok.EqualsAndHashCode;
10  import lombok.NoArgsConstructor;
</pre></code></div>
                <div class="column column_space"><pre><code>1  package redis.clients.jedis.commands.jedis;
2  import static org.junit.Assert.assertEquals;
3  import static org.junit.Assert.assertNotEquals;
4  import static org.junit.Assert.assertNotNull;
5  import static org.junit.Assert.assertTrue;
6  import java.util.List;
7  import java.util.Map;
8  import org.hamcrest.MatcherAssert;
9  import org.hamcrest.Matchers;
10  import org.junit.After;
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    