
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 16.666666666666664%, Tokens: 9, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>Adafruit_nRF52_Arduino-MDEwOlJlcG9zaXRvcnk3NDM1NDcyOQ==-flat-debug.h</h3>
            <pre><code>1  #ifndef _DEBUG_H
2  #define _DEBUG_H
3  #include "common_inc.h"
4  #ifdef __cplusplus
5   extern "C" {
6  #endif
7  #if CFG_DEBUG
<span onclick='openModal()' class='match'>8  const char* dbg_ble_event_str(uint16_t evt_id);
9  const char* dbg_err_str(int32_t err_id);
10  const char* dbg_hci_str(uint8_t id);
11  #endif
12  int dbgHeapTotal(void);
13  int dbgHeapUsed(void);
14  int dbgStackTotal(void);
15  int dbgStackUsed(void);
16  static inline int dbgHeapFree(void)
</span>17  {
18    return dbgHeapTotal() - dbgHeapUsed();
19  }
20  void dbgMemInfo(void);
21  void dbgPrintVersion(void);
22  void dbgDumpMemory(void const *buf, uint8_t size, uint16_t count, bool printOffset);
23  void dbgDumpMemoryCFormat(const char* str, void const *buf, uint16_t count);
24  #ifdef __cplusplus
25   }
26  #endif
27  #endif
</code></pre>
        </div>
        <div class="column">
            <h3>Adafruit_nRF52_Arduino-MDEwOlJlcG9zaXRvcnk3NDM1NDcyOQ==-flat-nrfbintool.c</h3>
            <pre><code>1  #include <stdio.h>
2  #include <stdint.h>
3  #include <stdbool.h>
4  #include <stdlib.h>
5  #include <string.h>
6  #include <assert.h>
7  #define SIGNATURE_EXTENSION "_signature.bin"
8  #define DFU_INIT_EXTENSION  "_init.dat"
9  typedef enum
10  {
11      BANK_VALID_APP   = 0x01,
12      BANK_VALID_SD    = 0xA5,
13      BANK_VALID_BOOT  = 0xAA,
14      BANK_ERASED      = 0xFE,
15      BANK_INVALID_APP = 0xFF,
16  } bootloader_bank_code_t;
17  typedef struct
18  {
19      uint32_t bank_0;          &bsol;**< Variable to store if bank 0 contains a valid application. */
20      uint32_t bank_0_crc;      &bsol;**< If bank is valid, this field will contain a valid CRC of the total image. */
<span onclick='openModal()' class='match'>21      uint32_t bank_1;          &bsol;**< Variable to store if bank 1 has been erased/prepared for new image. Bank 1 is only used in Banked Update scenario. */
22      uint32_t bank_0_size;     &bsol;**< Size of active image in bank0 if present, otherwise 0. */
23      uint32_t sd_image_size;   &bsol;**< Size of SoftDevice image in bank0 if bank_0 code is BANK_VALID_SD. */
24      uint32_t bl_image_size;   &bsol;**< Size of Bootloader image in bank0 if bank_0 code is BANK_VALID_SD. */
25      uint32_t app_image_size;  &bsol;**< Size of Application image in bank0 if bank_0 code is BANK_VALID_SD. */
26      uint32_t sd_image_start;  &bsol;**< Location in flash where SoftDevice image is stored for SoftDevice update. */
27  } bootloader_settings_t;
28  uint16_t crc16(uint8_t const *buffer, size_t len)
</span>29  {
30    uint16_t crc = 0xffff;
31    int i;
32    for (i = 0; i < len; i++)
33    {
34      crc  = (uint8_t)(crc >> 8) | (crc << 8);
35      crc ^= buffer[i];
36      crc ^= (unsigned char)(crc & 0xff) >> 4;
37      crc ^= (crc << 8) << 4;
38      crc ^= ((crc & 0xff) << 4) << 1;
39    }
40  	return crc;
41  }
42  uint32_t get_filesize(char* filename)
43  {
44    uint32_t filesize;
45    FILE* fin = fopen(filename, "rb");
46    assert(fin != NULL);
47    fseek(fin, 0, SEEK_END);
48    filesize = ftell(fin);
49    fseek(fin, 0, SEEK_SET);
50    fclose(fin);
51    return filesize;
52  }
53  uint16_t crc16_of_file(char *filename)
54  {
55    uint32_t filesize = get_filesize(filename);
56    assert(filesize > 0);
57    FILE* fin = fopen(filename, "rb");
58    assert(fin != NULL);
59    uint8_t* buf = (uint8_t*) malloc(filesize);
60    (void) fread(buf, 1, filesize, fin);
61    uint16_t crc = crc16(buf, filesize);
62    free(buf);
63    fclose(fin);
64    return crc;
65  }
66  void create_app_signature(char *filename)
67  {
68    bootloader_settings_t signature =
69    {
70        .bank_0      = BANK_VALID_APP,
71        .bank_0_crc  = crc16_of_file(filename),
72        .bank_1      = BANK_ERASED,
73        .bank_0_size = get_filesize(filename)
74    } ;
75    char output_name[256] = { 0 };
76    memcpy(output_name, filename, strlen(filename) - 4); 
77    strcat(output_name, SIGNATURE_EXTENSION);
78    FILE* fout = fopen(output_name, "wb");
79    assert(fout != NULL );
80    fwrite(&signature, 1, sizeof(signature), fout);
81    fclose(fout);
82  }
83  #define U32_FROM_U16(high, low)     ((uint32_t) (((high) << 16) | (low)))
84  #define DFU_SOFTDEVICE_ANY                  ((uint16_t)0xFFFE)
85  void create_app_dfu_init_packet(char* filename)
86  {
87    typedef struct
88    {
89      uint16_t device_type;    &bsol;**< Device type (2 bytes), for example Heart Rate. This number must be defined by the customer before production. It can be located in UICR or FICR. */
90      uint16_t device_rev;     &bsol;**< Device revision (2 bytes), for example major revision 1, minor revision 0. This number must be defined by the customer before production. It can be located in UICR or FICR. */
91      uint32_t app_version;    &bsol;**< Application version for the image software. This field allows for additional checking, for example ensuring that a downgrade is not allowed. */
92      uint16_t softdevice_len; &bsol;**< Number of different SoftDevice revisions compatible with this application. The list of SoftDevice firmware IDs is defined in @ref softdevice. */
93      uint16_t softdevice[1];  &bsol;**< Variable length array of SoftDevices compatible with this application. The length of the array is specified in the length field. SoftDevice firmware id 0xFFFE indicates any SoftDevice. */
94      uint16_t app_crc16;
95    } dfu_init_packet_t;
96    dfu_init_packet_t init_packet =
97    {
98        .device_type    = 0xffff,
99        .device_rev     = 0xffff,
100        .app_version    = U32_FROM_U16(0, 0),
101        .softdevice_len = 1,
102        .softdevice     = { DFU_SOFTDEVICE_ANY  },
103        .app_crc16      = crc16_of_file(filename)
104    };
105    char output_name[256] = { 0 };
106    memcpy(output_name, filename, strlen(filename) - 4); 
107    strcat(output_name, DFU_INIT_EXTENSION);
108    FILE* fout = fopen(output_name, "wb");
109    assert(fout != NULL );
110    fwrite(&init_packet, 1, sizeof(init_packet), fout);
111    fclose(fout);
112  }
113  int main(int argc, char *argv[])
114  {
115    if (argc != 2)
116    {
117      printf("%s <filename>", argv[0]);
118      return 0;
119    }
120    char *filename = argv[1];
121    create_app_signature(filename);
122    create_app_dfu_init_packet(filename);
123    return 0;
124  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from Adafruit_nRF52_Arduino-MDEwOlJlcG9zaXRvcnk3NDM1NDcyOQ==-flat-debug.h</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from Adafruit_nRF52_Arduino-MDEwOlJlcG9zaXRvcnk3NDM1NDcyOQ==-flat-nrfbintool.c</div>
                </div>
                <div class="column column_space"><pre><code>8  const char* dbg_ble_event_str(uint16_t evt_id);
9  const char* dbg_err_str(int32_t err_id);
10  const char* dbg_hci_str(uint8_t id);
11  #endif
12  int dbgHeapTotal(void);
13  int dbgHeapUsed(void);
14  int dbgStackTotal(void);
15  int dbgStackUsed(void);
16  static inline int dbgHeapFree(void)
</pre></code></div>
                <div class="column column_space"><pre><code>21      uint32_t bank_1;          &bsol;**< Variable to store if bank 1 has been erased/prepared for new image. Bank 1 is only used in Banked Update scenario. */
22      uint32_t bank_0_size;     &bsol;**< Size of active image in bank0 if present, otherwise 0. */
23      uint32_t sd_image_size;   &bsol;**< Size of SoftDevice image in bank0 if bank_0 code is BANK_VALID_SD. */
24      uint32_t bl_image_size;   &bsol;**< Size of Bootloader image in bank0 if bank_0 code is BANK_VALID_SD. */
25      uint32_t app_image_size;  &bsol;**< Size of Application image in bank0 if bank_0 code is BANK_VALID_SD. */
26      uint32_t sd_image_start;  &bsol;**< Location in flash where SoftDevice image is stored for SoftDevice update. */
27  } bootloader_settings_t;
28  uint16_t crc16(uint8_t const *buffer, size_t len)
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    