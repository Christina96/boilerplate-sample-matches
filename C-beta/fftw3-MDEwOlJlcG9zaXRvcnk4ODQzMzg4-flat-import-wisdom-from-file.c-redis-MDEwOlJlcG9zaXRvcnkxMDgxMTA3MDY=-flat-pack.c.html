
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 17.59259259259259%, Tokens: 11, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>fftw3-MDEwOlJlcG9zaXRvcnk4ODQzMzg4-flat-import-wisdom-from-file.c</h3>
            <pre><code>1  #include "api/api.h"
2  #include <stdio.h>
3  #define BUFSZ 256
4  typedef struct {
5       scanner super;
6       FILE *f;
7       char buf[BUFSZ];
8       char *bufr, *bufw;
9  } S;
10  static int getchr_file(scanner * sc_)
11  {
12       S *sc = (S *) sc_;
13       if (sc->bufr >= sc->bufw) {
14  	  sc->bufr = sc->buf;
15  	  sc->bufw = sc->buf + fread(sc->buf, 1, BUFSZ, sc->f);
16  	  if (sc->bufr >= sc->bufw)
17  	       return EOF;
18       }
19       return *(sc->bufr++);
20  }
21  static scanner *mkscanner_file(FILE *f)
22  {
23       S *sc = (S *) X(mkscanner)(sizeof(S), getchr_file);
24       sc->f = f;
25       sc->bufr = sc->bufw = sc->buf;
26       return &sc->super;
27  }
28  int X(import_wisdom_from_file)(FILE *input_file)
29  {
30       scanner *s = mkscanner_file(input_file);
31       planner *plnr = X(the_planner)();
32       int ret = plnr->adt->imprt(plnr, s);
<span onclick='openModal()' class='match'>33       X(scanner_destroy)(s);
34       return ret;
35  }
36  int X(import_wisdom_from_filename)(const char *filename)
37  {
38       FILE *f = fopen(filename, "r");
39       int ret;
</span>40       if (!f) return 0; &bsol;* error opening file */
41       ret = X(import_wisdom_from_file)(f);
42       if (fclose(f)) ret = 0; &bsol;* error closing file */
43       return ret;
44  }
</code></pre>
        </div>
        <div class="column">
            <h3>redis-MDEwOlJlcG9zaXRvcnkxMDgxMTA3MDY=-flat-pack.c</h3>
            <pre><code>1  #include "test/jemalloc_test.h"
2  #if LG_PAGE <= 14
3  #define SZ	(ZU(1) << (LG_PAGE - 2))
4  #else
5  #define SZ	ZU(4096)
6  #endif
7  #define NSLABS	8
8  static unsigned
9  binind_compute(void) {
10  	size_t sz;
11  	unsigned nbins, i;
12  	sz = sizeof(nbins);
13  	assert_d_eq(mallctl("arenas.nbins", (void *)&nbins, &sz, NULL, 0), 0,
14  	    "Unexpected mallctl failure");
15  	for (i = 0; i < nbins; i++) {
16  		size_t mib[4];
17  		size_t miblen = sizeof(mib)/sizeof(size_t);
18  		size_t size;
19  		assert_d_eq(mallctlnametomib("arenas.bin.0.size", mib,
20  		    &miblen), 0, "Unexpected mallctlnametomb failure");
21  		mib[2] = (size_t)i;
22  		sz = sizeof(size);
23  		assert_d_eq(mallctlbymib(mib, miblen, (void *)&size, &sz, NULL,
24  		    0), 0, "Unexpected mallctlbymib failure");
25  		if (size == SZ) {
26  			return i;
27  		}
28  	}
29  	test_fail("Unable to compute nregs_per_run");
30  	return 0;
31  }
32  static size_t
33  nregs_per_run_compute(void) {
34  	uint32_t nregs;
35  	size_t sz;
36  	unsigned binind = binind_compute();
37  	size_t mib[4];
38  	size_t miblen = sizeof(mib)/sizeof(size_t);
39  	assert_d_eq(mallctlnametomib("arenas.bin.0.nregs", mib, &miblen), 0,
40  	    "Unexpected mallctlnametomb failure");
41  	mib[2] = (size_t)binind;
42  	sz = sizeof(nregs);
<span onclick='openModal()' class='match'>43  	assert_d_eq(mallctlbymib(mib, miblen, (void *)&nregs, &sz, NULL,
44  	    0), 0, "Unexpected mallctlbymib failure");
45  	return nregs;
46  }
47  static unsigned
48  arenas_create_mallctl(void) {
49  	unsigned arena_ind;
50  	size_t sz;
51  	sz = sizeof(arena_ind);
52  	assert_d_eq(mallctl("arenas.create", (void *)&arena_ind, &sz, NULL, 0),
</span>53  	    0, "Error in arenas.create");
54  	return arena_ind;
55  }
56  static void
57  arena_reset_mallctl(unsigned arena_ind) {
58  	size_t mib[3];
59  	size_t miblen = sizeof(mib)/sizeof(size_t);
60  	assert_d_eq(mallctlnametomib("arena.0.reset", mib, &miblen), 0,
61  	    "Unexpected mallctlnametomib() failure");
62  	mib[1] = (size_t)arena_ind;
63  	assert_d_eq(mallctlbymib(mib, miblen, NULL, NULL, NULL, 0), 0,
64  	    "Unexpected mallctlbymib() failure");
65  }
66  TEST_BEGIN(test_pack) {
67  	bool prof_enabled;
68  	size_t sz = sizeof(prof_enabled);
69  	if (mallctl("opt.prof", (void *)&prof_enabled, &sz, NULL, 0) == 0) {
70  		test_skip_if(prof_enabled);
71  	}
72  	unsigned arena_ind = arenas_create_mallctl();
73  	size_t nregs_per_run = nregs_per_run_compute();
74  	size_t nregs = nregs_per_run * NSLABS;
75  	VARIABLE_ARRAY(void *, ptrs, nregs);
76  	size_t i, j, offset;
77  	for (i = offset = 0; i < NSLABS; i++) {
78  		for (j = 0; j < nregs_per_run; j++) {
79  			void *p = mallocx(SZ, MALLOCX_ARENA(arena_ind) |
80  			    MALLOCX_TCACHE_NONE);
81  			assert_ptr_not_null(p,
82  			    "Unexpected mallocx(%zu, MALLOCX_ARENA(%u) |"
83  			    " MALLOCX_TCACHE_NONE) failure, run=%zu, reg=%zu",
84  			    SZ, arena_ind, i, j);
85  			ptrs[(i * nregs_per_run) + j] = p;
86  		}
87  	}
88  	offset = 0;
89  	for (i = offset = 0;
90  	    i < NSLABS;
91  	    i++, offset = (offset + 1) % nregs_per_run) {
92  		for (j = 0; j < nregs_per_run; j++) {
93  			void *p = ptrs[(i * nregs_per_run) + j];
94  			if (offset == j) {
95  				continue;
96  			}
97  			dallocx(p, MALLOCX_ARENA(arena_ind) |
98  			    MALLOCX_TCACHE_NONE);
99  		}
100  	}
101  	offset = 0;
102  	for (i = offset = 0;
103  	    i < NSLABS;
104  	    i++, offset = (offset + 1) % nregs_per_run) {
105  		for (j = 0; j < nregs_per_run; j++) {
106  			void *p;
107  			if (offset == j) {
108  				continue;
109  			}
110  			p = mallocx(SZ, MALLOCX_ARENA(arena_ind) |
111  			    MALLOCX_TCACHE_NONE);
112  			assert_ptr_eq(p, ptrs[(i * nregs_per_run) + j],
113  			    "Unexpected refill discrepancy, run=%zu, reg=%zu\n",
114  			    i, j);
115  		}
116  	}
117  	arena_reset_mallctl(arena_ind);
118  }
119  TEST_END
120  int
121  main(void) {
122  	return test(
123  	    test_pack);
124  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from fftw3-MDEwOlJlcG9zaXRvcnk4ODQzMzg4-flat-import-wisdom-from-file.c</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from redis-MDEwOlJlcG9zaXRvcnkxMDgxMTA3MDY=-flat-pack.c</div>
                </div>
                <div class="column column_space"><pre><code>33       X(scanner_destroy)(s);
34       return ret;
35  }
36  int X(import_wisdom_from_filename)(const char *filename)
37  {
38       FILE *f = fopen(filename, "r");
39       int ret;
</pre></code></div>
                <div class="column column_space"><pre><code>43  	assert_d_eq(mallctlbymib(mib, miblen, (void *)&nregs, &sz, NULL,
44  	    0), 0, "Unexpected mallctlbymib failure");
45  	return nregs;
46  }
47  static unsigned
48  arenas_create_mallctl(void) {
49  	unsigned arena_ind;
50  	size_t sz;
51  	sz = sizeof(arena_ind);
52  	assert_d_eq(mallctl("arenas.create", (void *)&arena_ind, &sz, NULL, 0),
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    