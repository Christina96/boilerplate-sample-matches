
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Tokens: 17, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>nano-node-MDEwOlJlcG9zaXRvcnkxOTM0NzM0MA==-flat-valgrind.h</h3>
            <pre><code>1  #ifndef __VALGRIND_H
2  #define __VALGRIND_H
3  #define __VALGRIND_MAJOR__    3
4  #define __VALGRIND_MINOR__    6
5  #include <stdarg.h>
6  #undef PLAT_ppc64_aix5
7  #undef PLAT_ppc32_aix5
8  #undef PLAT_x86_darwin
9  #undef PLAT_amd64_darwin
10  #undef PLAT_x86_win32
11  #undef PLAT_x86_linux
12  #undef PLAT_amd64_linux
13  #undef PLAT_ppc32_linux
14  #undef PLAT_ppc64_linux
15  #undef PLAT_arm_linux
16  #if defined(_AIX) && defined(__64BIT__)
17  #  define PLAT_ppc64_aix5 1
18  #elif defined(_AIX) && !defined(__64BIT__)
19  #  define PLAT_ppc32_aix5 1
20  #elif defined(__APPLE__) && defined(__i386__)
21  #  define PLAT_x86_darwin 1
22  #elif defined(__APPLE__) && defined(__x86_64__)
23  #  define PLAT_amd64_darwin 1
24  #elif defined(__MINGW32__) || defined(__CYGWIN32__) || defined(_WIN32) && defined(_M_IX86)
25  #  define PLAT_x86_win32 1
26  #elif defined(__linux__) && defined(__i386__)
27  #  define PLAT_x86_linux 1
28  #elif defined(__linux__) && defined(__x86_64__)
29  #  define PLAT_amd64_linux 1
30  #elif defined(__linux__) && defined(__powerpc__) && !defined(__powerpc64__)
31  #  define PLAT_ppc32_linux 1
32  #elif defined(__linux__) && defined(__powerpc__) && defined(__powerpc64__)
33  #  define PLAT_ppc64_linux 1
34  #elif defined(__linux__) && defined(__arm__)
35  #  define PLAT_arm_linux 1
36  #else
37  #  if !defined(NVALGRIND)
38  #    define NVALGRIND 1
39  #  endif
40  #endif
41  #if defined(NVALGRIND)
42  #define VALGRIND_DO_CLIENT_REQUEST(                               \
43          _zzq_rlval, _zzq_default, _zzq_request,                   \
44          _zzq_arg1, _zzq_arg2, _zzq_arg3, _zzq_arg4, _zzq_arg5)    \
45     {                                                              \
46        (_zzq_rlval) = (_zzq_default);                              \
47     }
48  #else  &bsol;* ! NVALGRIND */
49  #if defined(PLAT_x86_linux)  ||  defined(PLAT_x86_darwin)  \
50      ||  (defined(PLAT_x86_win32) && defined(__GNUC__))
51  typedef
52     struct { 
53        unsigned int nraddr; &bsol;* where's the code? */
54     }
55     OrigFn;
56  #define __SPECIAL_INSTRUCTION_PREAMBLE                            \
57                       "roll $3,  %%edi ; roll $13, %%edi\n\t"      \
58                       "roll $29, %%edi ; roll $19, %%edi\n\t"
59  #define VALGRIND_DO_CLIENT_REQUEST(                               \
60          _zzq_rlval, _zzq_default, _zzq_request,                   \
61          _zzq_arg1, _zzq_arg2, _zzq_arg3, _zzq_arg4, _zzq_arg5)    \
62    { volatile unsigned int _zzq_args[6];                           \
63      volatile unsigned int _zzq_result;                            \
64      _zzq_args[0] = (unsigned int)(_zzq_request);                  \
65      _zzq_args[1] = (unsigned int)(_zzq_arg1);                     \
66      _zzq_args[2] = (unsigned int)(_zzq_arg2);                     \
67      _zzq_args[3] = (unsigned int)(_zzq_arg3);                     \
68      _zzq_args[4] = (unsigned int)(_zzq_arg4);                     \
69      _zzq_args[5] = (unsigned int)(_zzq_arg5);                     \
70      __asm__ volatile(__SPECIAL_INSTRUCTION_PREAMBLE               \
71                                \
72                       "xchgl %%ebx,%%ebx"                          \
73                       : "=d" (_zzq_result)                         \
74                       : "a" (&_zzq_args[0]), "0" (_zzq_default)    \
75                       : "cc", "memory"                             \
76                      );                                            \
77      _zzq_rlval = _zzq_result;                                     \
78    }
79  #define VALGRIND_GET_NR_CONTEXT(_zzq_rlval)                       \
80    { volatile OrigFn* _zzq_orig = &(_zzq_rlval);                   \
81      volatile unsigned int __addr;                                 \
82      __asm__ volatile(__SPECIAL_INSTRUCTION_PREAMBLE               \
83                                           \
84                       "xchgl %%ecx,%%ecx"                          \
85                       : "=a" (__addr)                              \
86                       :                                            \
87                       : "cc", "memory"                             \
88                      );                                            \
89      _zzq_orig->nraddr = __addr;                                   \
90    }
91  #define VALGRIND_CALL_NOREDIR_EAX                                 \
92                       __SPECIAL_INSTRUCTION_PREAMBLE               \
93                                            \
94                       "xchgl %%edx,%%edx\n\t"
95  #endif &bsol;* PLAT_x86_linux || PLAT_x86_darwin || (PLAT_x86_win32 && __GNUC__) */
96  #if defined(PLAT_x86_win32) && !defined(__GNUC__)
97  typedef
98     struct { 
99        unsigned int nraddr; &bsol;* where's the code? */
100     }
101     OrigFn;
102  #if defined(_MSC_VER)
103  #define __SPECIAL_INSTRUCTION_PREAMBLE                            \
104                       __asm rol edi, 3  __asm rol edi, 13          \
105                       __asm rol edi, 29 __asm rol edi, 19
106  #define VALGRIND_DO_CLIENT_REQUEST(                               \
107          _zzq_rlval, _zzq_default, _zzq_request,                   \
108          _zzq_arg1, _zzq_arg2, _zzq_arg3, _zzq_arg4, _zzq_arg5)    \
109    { volatile uintptr_t _zzq_args[6];                              \
110      volatile unsigned int _zzq_result;                            \
111      _zzq_args[0] = (uintptr_t)(_zzq_request);                     \
112      _zzq_args[1] = (uintptr_t)(_zzq_arg1);                        \
113      _zzq_args[2] = (uintptr_t)(_zzq_arg2);                        \
114      _zzq_args[3] = (uintptr_t)(_zzq_arg3);                        \
115      _zzq_args[4] = (uintptr_t)(_zzq_arg4);                        \
116      _zzq_args[5] = (uintptr_t)(_zzq_arg5);                        \
117      __asm { __asm lea eax, _zzq_args __asm mov edx, _zzq_default  \
118              __SPECIAL_INSTRUCTION_PREAMBLE                        \
119                                \
120              __asm xchg ebx,ebx                                    \
121              __asm mov _zzq_result, edx                            \
122      }                                                             \
123      _zzq_rlval = _zzq_result;                                     \
124    }
125  #define VALGRIND_GET_NR_CONTEXT(_zzq_rlval)                       \
126    { volatile OrigFn* _zzq_orig = &(_zzq_rlval);                   \
127      volatile unsigned int __addr;                                 \
128      __asm { __SPECIAL_INSTRUCTION_PREAMBLE                        \
129                                           \
130              __asm xchg ecx,ecx                                    \
131              __asm mov __addr, eax                                 \
132      }                                                             \
133      _zzq_orig->nraddr = __addr;                                   \
134    }
135  #define VALGRIND_CALL_NOREDIR_EAX ERROR
136  #else
137  #error Unsupported compiler.
138  #endif
139  #endif &bsol;* PLAT_x86_win32 */
140  #if defined(PLAT_amd64_linux)  ||  defined(PLAT_amd64_darwin)
141  typedef
142     struct { 
143        unsigned long long int nraddr; &bsol;* where's the code? */
144     }
145     OrigFn;
146  #define __SPECIAL_INSTRUCTION_PREAMBLE                            \
147                       "rolq $3,  %%rdi ; rolq $13, %%rdi\n\t"      \
148                       "rolq $61, %%rdi ; rolq $51, %%rdi\n\t"
149  #define VALGRIND_DO_CLIENT_REQUEST(                               \
150          _zzq_rlval, _zzq_default, _zzq_request,                   \
151          _zzq_arg1, _zzq_arg2, _zzq_arg3, _zzq_arg4, _zzq_arg5)    \
152    { volatile unsigned long long int _zzq_args[6];                 \
153      volatile unsigned long long int _zzq_result;                  \
154      _zzq_args[0] = (unsigned long long int)(_zzq_request);        \
155      _zzq_args[1] = (unsigned long long int)(_zzq_arg1);           \
156      _zzq_args[2] = (unsigned long long int)(_zzq_arg2);           \
157      _zzq_args[3] = (unsigned long long int)(_zzq_arg3);           \
158      _zzq_args[4] = (unsigned long long int)(_zzq_arg4);           \
159      _zzq_args[5] = (unsigned long long int)(_zzq_arg5);           \
160      __asm__ volatile(__SPECIAL_INSTRUCTION_PREAMBLE               \
161                                \
162                       "xchgq %%rbx,%%rbx"                          \
163                       : "=d" (_zzq_result)                         \
164                       : "a" (&_zzq_args[0]), "0" (_zzq_default)    \
165                       : "cc", "memory"                             \
166                      );                                            \
167      _zzq_rlval = _zzq_result;                                     \
168    }
169  #define VALGRIND_GET_NR_CONTEXT(_zzq_rlval)                       \
170    { volatile OrigFn* _zzq_orig = &(_zzq_rlval);                   \
171      volatile unsigned long long int __addr;                       \
172      __asm__ volatile(__SPECIAL_INSTRUCTION_PREAMBLE               \
173                                           \
174                       "xchgq %%rcx,%%rcx"                          \
175                       : "=a" (__addr)                              \
176                       :                                            \
177                       : "cc", "memory"                             \
178                      );                                            \
179      _zzq_orig->nraddr = __addr;                                   \
180    }
181  #define VALGRIND_CALL_NOREDIR_RAX                                 \
182                       __SPECIAL_INSTRUCTION_PREAMBLE               \
183                                            \
184                       "xchgq %%rdx,%%rdx\n\t"
185  #endif &bsol;* PLAT_amd64_linux || PLAT_amd64_darwin */
186  #if defined(PLAT_ppc32_linux)
187  typedef
188     struct { 
189        unsigned int nraddr; &bsol;* where's the code? */
190     }
191     OrigFn;
192  #define __SPECIAL_INSTRUCTION_PREAMBLE                            \
193                       "rlwinm 0,0,3,0,0  ; rlwinm 0,0,13,0,0\n\t"  \
194                       "rlwinm 0,0,29,0,0 ; rlwinm 0,0,19,0,0\n\t"
195  #define VALGRIND_DO_CLIENT_REQUEST(                               \
196          _zzq_rlval, _zzq_default, _zzq_request,                   \
197          _zzq_arg1, _zzq_arg2, _zzq_arg3, _zzq_arg4, _zzq_arg5)    \
198                                                                    \
199    {          unsigned int  _zzq_args[6];                          \
200               unsigned int  _zzq_result;                           \
201               unsigned int* _zzq_ptr;                              \
202      _zzq_args[0] = (unsigned int)(_zzq_request);                  \
203      _zzq_args[1] = (unsigned int)(_zzq_arg1);                     \
204      _zzq_args[2] = (unsigned int)(_zzq_arg2);                     \
205      _zzq_args[3] = (unsigned int)(_zzq_arg3);                     \
206      _zzq_args[4] = (unsigned int)(_zzq_arg4);                     \
207      _zzq_args[5] = (unsigned int)(_zzq_arg5);                     \
208      _zzq_ptr = _zzq_args;                                         \
209      __asm__ volatile("mr 3,%1\n\t" &bsol;*default*/                    \
210                       "mr 4,%2\n\t" &bsol;*ptr*/                        \
211                       __SPECIAL_INSTRUCTION_PREAMBLE               \
212                                  \
213                       "or 1,1,1\n\t"                               \
214                       "mr %0,3"     &bsol;*result*/                     \
215                       : "=b" (_zzq_result)                         \
216                       : "b" (_zzq_default), "b" (_zzq_ptr)         \
217                       : "cc", "memory", "r3", "r4");               \
218      _zzq_rlval = _zzq_result;                                     \
219    }
220  #define VALGRIND_GET_NR_CONTEXT(_zzq_rlval)                       \
221    { volatile OrigFn* _zzq_orig = &(_zzq_rlval);                   \
222      unsigned int __addr;                                          \
223      __asm__ volatile(__SPECIAL_INSTRUCTION_PREAMBLE               \
224                                            \
225                       "or 2,2,2\n\t"                               \
226                       "mr %0,3"                                    \
227                       : "=b" (__addr)                              \
228                       :                                            \
229                       : "cc", "memory", "r3"                       \
230                      );                                            \
231      _zzq_orig->nraddr = __addr;                                   \
232    }
233  #define VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                   \
234                       __SPECIAL_INSTRUCTION_PREAMBLE               \
235                              \
236                       "or 3,3,3\n\t"
237  #endif &bsol;* PLAT_ppc32_linux */
238  #if defined(PLAT_ppc64_linux)
239  typedef
240     struct { 
241        unsigned long long int nraddr; &bsol;* where's the code? */
242        unsigned long long int r2;  &bsol;* what tocptr do we need? */
243     }
244     OrigFn;
245  #define __SPECIAL_INSTRUCTION_PREAMBLE                            \
246                       "rotldi 0,0,3  ; rotldi 0,0,13\n\t"          \
247                       "rotldi 0,0,61 ; rotldi 0,0,51\n\t"
248  #define VALGRIND_DO_CLIENT_REQUEST(                               \
249          _zzq_rlval, _zzq_default, _zzq_request,                   \
250          _zzq_arg1, _zzq_arg2, _zzq_arg3, _zzq_arg4, _zzq_arg5)    \
251                                                                    \
252    {          unsigned long long int  _zzq_args[6];                \
253      register unsigned long long int  _zzq_result __asm__("r3");   \
254      register unsigned long long int* _zzq_ptr __asm__("r4");      \
255      _zzq_args[0] = (unsigned long long int)(_zzq_request);        \
256      _zzq_args[1] = (unsigned long long int)(_zzq_arg1);           \
257      _zzq_args[2] = (unsigned long long int)(_zzq_arg2);           \
258      _zzq_args[3] = (unsigned long long int)(_zzq_arg3);           \
259      _zzq_args[4] = (unsigned long long int)(_zzq_arg4);           \
260      _zzq_args[5] = (unsigned long long int)(_zzq_arg5);           \
261      _zzq_ptr = _zzq_args;                                         \
262      __asm__ volatile(__SPECIAL_INSTRUCTION_PREAMBLE               \
263                                  \
264                       "or 1,1,1"                                   \
265                       : "=r" (_zzq_result)                         \
266                       : "0" (_zzq_default), "r" (_zzq_ptr)         \
267                       : "cc", "memory");                           \
268      _zzq_rlval = _zzq_result;                                     \
269    }
270  #define VALGRIND_GET_NR_CONTEXT(_zzq_rlval)                       \
271    { volatile OrigFn* _zzq_orig = &(_zzq_rlval);                   \
272      register unsigned long long int __addr __asm__("r3");         \
273      __asm__ volatile(__SPECIAL_INSTRUCTION_PREAMBLE               \
274                                            \
275                       "or 2,2,2"                                   \
276                       : "=r" (__addr)                              \
277                       :                                            \
278                       : "cc", "memory"                             \
279                      );                                            \
280      _zzq_orig->nraddr = __addr;                                   \
281      __asm__ volatile(__SPECIAL_INSTRUCTION_PREAMBLE               \
282                                       \
283                       "or 4,4,4"                                   \
284                       : "=r" (__addr)                              \
285                       :                                            \
286                       : "cc", "memory"                             \
287                      );                                            \
288      _zzq_orig->r2 = __addr;                                       \
289    }
290  #define VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                   \
291                       __SPECIAL_INSTRUCTION_PREAMBLE               \
292                              \
293                       "or 3,3,3\n\t"
294  #endif &bsol;* PLAT_ppc64_linux */
295  #if defined(PLAT_arm_linux)
296  typedef
297     struct { 
298        unsigned int nraddr; &bsol;* where's the code? */
299     }
300     OrigFn;
301  #define __SPECIAL_INSTRUCTION_PREAMBLE                            \
302              "mov r12, r12, ror #3  ; mov r12, r12, ror #13 \n\t"  \
303              "mov r12, r12, ror #29 ; mov r12, r12, ror #19 \n\t"
304  #define VALGRIND_DO_CLIENT_REQUEST(                               \
305          _zzq_rlval, _zzq_default, _zzq_request,                   \
306          _zzq_arg1, _zzq_arg2, _zzq_arg3, _zzq_arg4, _zzq_arg5)    \
307                                                                    \
308    { volatile unsigned int  _zzq_args[6];                          \
309      volatile unsigned int  _zzq_result;                           \
310      _zzq_args[0] = (unsigned int)(_zzq_request);                  \
311      _zzq_args[1] = (unsigned int)(_zzq_arg1);                     \
312      _zzq_args[2] = (unsigned int)(_zzq_arg2);                     \
313      _zzq_args[3] = (unsigned int)(_zzq_arg3);                     \
314      _zzq_args[4] = (unsigned int)(_zzq_arg4);                     \
315      _zzq_args[5] = (unsigned int)(_zzq_arg5);                     \
316      __asm__ volatile("mov r3, %1\n\t" &bsol;*default*/                 \
317                       "mov r4, %2\n\t" &bsol;*ptr*/                     \
318                       __SPECIAL_INSTRUCTION_PREAMBLE               \
319                                    \
320                       "orr r10, r10, r10\n\t"                      \
321                       "mov %0, r3"     &bsol;*result*/                  \
322                       : "=r" (_zzq_result)                         \
323                       : "r" (_zzq_default), "r" (&_zzq_args[0])    \
324                       : "cc","memory", "r3", "r4");                \
325      _zzq_rlval = _zzq_result;                                     \
326    }
327  #define VALGRIND_GET_NR_CONTEXT(_zzq_rlval)                       \
328    { volatile OrigFn* _zzq_orig = &(_zzq_rlval);                   \
329      unsigned int __addr;                                          \
330      __asm__ volatile(__SPECIAL_INSTRUCTION_PREAMBLE               \
331                                             \
332                       "orr r11, r11, r11\n\t"                      \
333                       "mov %0, r3"                                 \
334                       : "=r" (__addr)                              \
335                       :                                            \
336                       : "cc", "memory", "r3"                       \
337                      );                                            \
338      _zzq_orig->nraddr = __addr;                                   \
339    }
340  #define VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R4                    \
341                       __SPECIAL_INSTRUCTION_PREAMBLE               \
342                               \
343                       "orr r12, r12, r12\n\t"
344  #endif &bsol;* PLAT_arm_linux */
345  #if defined(PLAT_ppc32_aix5)
346  typedef
347     struct { 
348        unsigned int nraddr; &bsol;* where's the code? */
349        unsigned int r2;  &bsol;* what tocptr do we need? */
350     }
351     OrigFn;
352  #define __SPECIAL_INSTRUCTION_PREAMBLE                            \
353                       "rlwinm 0,0,3,0,0  ; rlwinm 0,0,13,0,0\n\t"  \
354                       "rlwinm 0,0,29,0,0 ; rlwinm 0,0,19,0,0\n\t"
355  #define VALGRIND_DO_CLIENT_REQUEST(                               \
356          _zzq_rlval, _zzq_default, _zzq_request,                   \
357          _zzq_arg1, _zzq_arg2, _zzq_arg3, _zzq_arg4, _zzq_arg5)    \
358                                                                    \
359    {          unsigned int  _zzq_args[7];                          \
360      register unsigned int  _zzq_result;                           \
361      register unsigned int* _zzq_ptr;                              \
362      _zzq_args[0] = (unsigned int)(_zzq_request);                  \
363      _zzq_args[1] = (unsigned int)(_zzq_arg1);                     \
364      _zzq_args[2] = (unsigned int)(_zzq_arg2);                     \
365      _zzq_args[3] = (unsigned int)(_zzq_arg3);                     \
366      _zzq_args[4] = (unsigned int)(_zzq_arg4);                     \
367      _zzq_args[5] = (unsigned int)(_zzq_arg5);                     \
368      _zzq_args[6] = (unsigned int)(_zzq_default);                  \
369      _zzq_ptr = _zzq_args;                                         \
370      __asm__ volatile("mr 4,%1\n\t"                                \
371                       "lwz 3, 24(4)\n\t"                           \
372                       __SPECIAL_INSTRUCTION_PREAMBLE               \
373                                  \
374                       "or 1,1,1\n\t"                               \
375                       "mr %0,3"                                    \
376                       : "=b" (_zzq_result)                         \
377                       : "b" (_zzq_ptr)                             \
378                       : "r3", "r4", "cc", "memory");               \
379      _zzq_rlval = _zzq_result;                                     \
380    }
381  #define VALGRIND_GET_NR_CONTEXT(_zzq_rlval)                       \
382    { volatile OrigFn* _zzq_orig = &(_zzq_rlval);                   \
383      register unsigned int __addr;                                 \
384      __asm__ volatile(__SPECIAL_INSTRUCTION_PREAMBLE               \
385                                            \
386                       "or 2,2,2\n\t"                               \
387                       "mr %0,3"                                    \
388                       : "=b" (__addr)                              \
389                       :                                            \
390                       : "r3", "cc", "memory"                       \
391                      );                                            \
392      _zzq_orig->nraddr = __addr;                                   \
393      __asm__ volatile(__SPECIAL_INSTRUCTION_PREAMBLE               \
394                                       \
395                       "or 4,4,4\n\t"                               \
396                       "mr %0,3"                                    \
397                       : "=b" (__addr)                              \
398                       :                                            \
399                       : "r3", "cc", "memory"                       \
400                      );                                            \
401      _zzq_orig->r2 = __addr;                                       \
402    }
403  #define VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                   \
404                       __SPECIAL_INSTRUCTION_PREAMBLE               \
405                              \
406                       "or 3,3,3\n\t"
407  #endif &bsol;* PLAT_ppc32_aix5 */
408  #if defined(PLAT_ppc64_aix5)
409  typedef
410     struct { 
411        unsigned long long int nraddr; &bsol;* where's the code? */
412        unsigned long long int r2;  &bsol;* what tocptr do we need? */
413     }
414     OrigFn;
415  #define __SPECIAL_INSTRUCTION_PREAMBLE                            \
416                       "rotldi 0,0,3  ; rotldi 0,0,13\n\t"          \
417                       "rotldi 0,0,61 ; rotldi 0,0,51\n\t"
418  #define VALGRIND_DO_CLIENT_REQUEST(                               \
419          _zzq_rlval, _zzq_default, _zzq_request,                   \
420          _zzq_arg1, _zzq_arg2, _zzq_arg3, _zzq_arg4, _zzq_arg5)    \
421                                                                    \
422    {          unsigned long long int  _zzq_args[7];                \
423      register unsigned long long int  _zzq_result;                 \
424      register unsigned long long int* _zzq_ptr;                    \
425      _zzq_args[0] = (unsigned int long long)(_zzq_request);        \
426      _zzq_args[1] = (unsigned int long long)(_zzq_arg1);           \
427      _zzq_args[2] = (unsigned int long long)(_zzq_arg2);           \
428      _zzq_args[3] = (unsigned int long long)(_zzq_arg3);           \
429      _zzq_args[4] = (unsigned int long long)(_zzq_arg4);           \
430      _zzq_args[5] = (unsigned int long long)(_zzq_arg5);           \
431      _zzq_args[6] = (unsigned int long long)(_zzq_default);        \
432      _zzq_ptr = _zzq_args;                                         \
433      __asm__ volatile("mr 4,%1\n\t"                                \
434                       "ld 3, 48(4)\n\t"                            \
435                       __SPECIAL_INSTRUCTION_PREAMBLE               \
436                                  \
437                       "or 1,1,1\n\t"                               \
438                       "mr %0,3"                                    \
439                       : "=b" (_zzq_result)                         \
440                       : "b" (_zzq_ptr)                             \
441                       : "r3", "r4", "cc", "memory");               \
442      _zzq_rlval = _zzq_result;                                     \
443    }
444  #define VALGRIND_GET_NR_CONTEXT(_zzq_rlval)                       \
445    { volatile OrigFn* _zzq_orig = &(_zzq_rlval);                   \
446      register unsigned long long int __addr;                       \
447      __asm__ volatile(__SPECIAL_INSTRUCTION_PREAMBLE               \
448                                            \
449                       "or 2,2,2\n\t"                               \
450                       "mr %0,3"                                    \
451                       : "=b" (__addr)                              \
452                       :                                            \
453                       : "r3", "cc", "memory"                       \
454                      );                                            \
455      _zzq_orig->nraddr = __addr;                                   \
456      __asm__ volatile(__SPECIAL_INSTRUCTION_PREAMBLE               \
457                                       \
458                       "or 4,4,4\n\t"                               \
459                       "mr %0,3"                                    \
460                       : "=b" (__addr)                              \
461                       :                                            \
462                       : "r3", "cc", "memory"                       \
463                      );                                            \
464      _zzq_orig->r2 = __addr;                                       \
465    }
466  #define VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                   \
467                       __SPECIAL_INSTRUCTION_PREAMBLE               \
468                              \
469                       "or 3,3,3\n\t"
470  #endif &bsol;* PLAT_ppc64_aix5 */
471  #endif &bsol;* NVALGRIND */
472  #define VG_CONCAT4(_aa,_bb,_cc,_dd) _aa##_bb##_cc##_dd
473  #define I_WRAP_SONAME_FNNAME_ZU(soname,fnname)                    \
474     VG_CONCAT4(_vgwZU_,soname,_,fnname)
475  #define I_WRAP_SONAME_FNNAME_ZZ(soname,fnname)                    \
476     VG_CONCAT4(_vgwZZ_,soname,_,fnname)
477  #define VALGRIND_GET_ORIG_FN(_lval)  VALGRIND_GET_NR_CONTEXT(_lval)
478  #define CALL_FN_v_v(fnptr)                                        \
479     do { volatile unsigned long _junk;                             \
480          CALL_FN_W_v(_junk,fnptr); } while (0)
481  #define CALL_FN_v_W(fnptr, arg1)                                  \
482     do { volatile unsigned long _junk;                             \
483          CALL_FN_W_W(_junk,fnptr,arg1); } while (0)
484  #define CALL_FN_v_WW(fnptr, arg1,arg2)                            \
485     do { volatile unsigned long _junk;                             \
486          CALL_FN_W_WW(_junk,fnptr,arg1,arg2); } while (0)
487  #define CALL_FN_v_WWW(fnptr, arg1,arg2,arg3)                      \
488     do { volatile unsigned long _junk;                             \
489          CALL_FN_W_WWW(_junk,fnptr,arg1,arg2,arg3); } while (0)
490  #define CALL_FN_v_WWWW(fnptr, arg1,arg2,arg3,arg4)                \
491     do { volatile unsigned long _junk;                             \
492          CALL_FN_W_WWWW(_junk,fnptr,arg1,arg2,arg3,arg4); } while (0)
493  #define CALL_FN_v_5W(fnptr, arg1,arg2,arg3,arg4,arg5)             \
494     do { volatile unsigned long _junk;                             \
495          CALL_FN_W_5W(_junk,fnptr,arg1,arg2,arg3,arg4,arg5); } while (0)
496  #define CALL_FN_v_6W(fnptr, arg1,arg2,arg3,arg4,arg5,arg6)        \
497     do { volatile unsigned long _junk;                             \
498          CALL_FN_W_6W(_junk,fnptr,arg1,arg2,arg3,arg4,arg5,arg6); } while (0)
499  #define CALL_FN_v_7W(fnptr, arg1,arg2,arg3,arg4,arg5,arg6,arg7)   \
500     do { volatile unsigned long _junk;                             \
501          CALL_FN_W_7W(_junk,fnptr,arg1,arg2,arg3,arg4,arg5,arg6,arg7); } while (0)
502  #if defined(PLAT_x86_linux)  ||  defined(PLAT_x86_darwin)
503  #define __CALLER_SAVED_REGS &bsol;*"eax"*/ "ecx", "edx"
504  #define CALL_FN_W_v(lval, orig)                                   \
505     do {                                                           \
506        volatile OrigFn        _orig = (orig);                      \
507        volatile unsigned long _argvec[1];                          \
508        volatile unsigned long _res;                                \
509        _argvec[0] = (unsigned long)_orig.nraddr;                   \
510        __asm__ volatile(                                           \
511           "movl (%%eax), %%eax\n\t"  &bsol;* target->%eax */            \
512           VALGRIND_CALL_NOREDIR_EAX                                \
513           : &bsol;*out*/   "=a" (_res)                                  \
514           : &bsol;*in*/    "a" (&_argvec[0])                            \
515           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
516        );                                                          \
517        lval = (__typeof__(lval)) _res;                             \
518     } while (0)
519  #define CALL_FN_W_W(lval, orig, arg1)                             \
520     do {                                                           \
521        volatile OrigFn        _orig = (orig);                      \
522        volatile unsigned long _argvec[2];                          \
523        volatile unsigned long _res;                                \
524        _argvec[0] = (unsigned long)_orig.nraddr;                   \
525        _argvec[1] = (unsigned long)(arg1);                         \
526        __asm__ volatile(                                           \
527           "subl $12, %%esp\n\t"                                    \
528           "pushl 4(%%eax)\n\t"                                     \
529           "movl (%%eax), %%eax\n\t"  &bsol;* target->%eax */            \
530           VALGRIND_CALL_NOREDIR_EAX                                \
531           "addl $16, %%esp\n"                                      \
532           : &bsol;*out*/   "=a" (_res)                                  \
533           : &bsol;*in*/    "a" (&_argvec[0])                            \
534           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
535        );                                                          \
536        lval = (__typeof__(lval)) _res;                             \
537     } while (0)
538  #define CALL_FN_W_WW(lval, orig, arg1,arg2)                       \
539     do {                                                           \
540        volatile OrigFn        _orig = (orig);                      \
541        volatile unsigned long _argvec[3];                          \
542        volatile unsigned long _res;                                \
543        _argvec[0] = (unsigned long)_orig.nraddr;                   \
544        _argvec[1] = (unsigned long)(arg1);                         \
545        _argvec[2] = (unsigned long)(arg2);                         \
546        __asm__ volatile(                                           \
547           "subl $8, %%esp\n\t"                                     \
548           "pushl 8(%%eax)\n\t"                                     \
549           "pushl 4(%%eax)\n\t"                                     \
550           "movl (%%eax), %%eax\n\t"  &bsol;* target->%eax */            \
551           VALGRIND_CALL_NOREDIR_EAX                                \
552           "addl $16, %%esp\n"                                      \
553           : &bsol;*out*/   "=a" (_res)                                  \
554           : &bsol;*in*/    "a" (&_argvec[0])                            \
555           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
556        );                                                          \
557        lval = (__typeof__(lval)) _res;                             \
558     } while (0)
559  #define CALL_FN_W_WWW(lval, orig, arg1,arg2,arg3)                 \
560     do {                                                           \
561        volatile OrigFn        _orig = (orig);                      \
562        volatile unsigned long _argvec[4];                          \
563        volatile unsigned long _res;                                \
564        _argvec[0] = (unsigned long)_orig.nraddr;                   \
565        _argvec[1] = (unsigned long)(arg1);                         \
566        _argvec[2] = (unsigned long)(arg2);                         \
567        _argvec[3] = (unsigned long)(arg3);                         \
568        __asm__ volatile(                                           \
569           "subl $4, %%esp\n\t"                                     \
570           "pushl 12(%%eax)\n\t"                                    \
571           "pushl 8(%%eax)\n\t"                                     \
572           "pushl 4(%%eax)\n\t"                                     \
573           "movl (%%eax), %%eax\n\t"  &bsol;* target->%eax */            \
574           VALGRIND_CALL_NOREDIR_EAX                                \
575           "addl $16, %%esp\n"                                      \
576           : &bsol;*out*/   "=a" (_res)                                  \
577           : &bsol;*in*/    "a" (&_argvec[0])                            \
578           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
579        );                                                          \
580        lval = (__typeof__(lval)) _res;                             \
581     } while (0)
582  #define CALL_FN_W_WWWW(lval, orig, arg1,arg2,arg3,arg4)           \
583     do {                                                           \
584        volatile OrigFn        _orig = (orig);                      \
585        volatile unsigned long _argvec[5];                          \
586        volatile unsigned long _res;                                \
587        _argvec[0] = (unsigned long)_orig.nraddr;                   \
588        _argvec[1] = (unsigned long)(arg1);                         \
589        _argvec[2] = (unsigned long)(arg2);                         \
590        _argvec[3] = (unsigned long)(arg3);                         \
591        _argvec[4] = (unsigned long)(arg4);                         \
592        __asm__ volatile(                                           \
593           "pushl 16(%%eax)\n\t"                                    \
594           "pushl 12(%%eax)\n\t"                                    \
595           "pushl 8(%%eax)\n\t"                                     \
596           "pushl 4(%%eax)\n\t"                                     \
597           "movl (%%eax), %%eax\n\t"  &bsol;* target->%eax */            \
598           VALGRIND_CALL_NOREDIR_EAX                                \
599           "addl $16, %%esp\n"                                      \
600           : &bsol;*out*/   "=a" (_res)                                  \
601           : &bsol;*in*/    "a" (&_argvec[0])                            \
602           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
603        );                                                          \
604        lval = (__typeof__(lval)) _res;                             \
605     } while (0)
606  #define CALL_FN_W_5W(lval, orig, arg1,arg2,arg3,arg4,arg5)        \
607     do {                                                           \
608        volatile OrigFn        _orig = (orig);                      \
609        volatile unsigned long _argvec[6];                          \
610        volatile unsigned long _res;                                \
611        _argvec[0] = (unsigned long)_orig.nraddr;                   \
612        _argvec[1] = (unsigned long)(arg1);                         \
613        _argvec[2] = (unsigned long)(arg2);                         \
614        _argvec[3] = (unsigned long)(arg3);                         \
615        _argvec[4] = (unsigned long)(arg4);                         \
616        _argvec[5] = (unsigned long)(arg5);                         \
617        __asm__ volatile(                                           \
618           "subl $12, %%esp\n\t"                                    \
619           "pushl 20(%%eax)\n\t"                                    \
620           "pushl 16(%%eax)\n\t"                                    \
621           "pushl 12(%%eax)\n\t"                                    \
622           "pushl 8(%%eax)\n\t"                                     \
623           "pushl 4(%%eax)\n\t"                                     \
624           "movl (%%eax), %%eax\n\t"  &bsol;* target->%eax */            \
625           VALGRIND_CALL_NOREDIR_EAX                                \
626           "addl $32, %%esp\n"                                      \
627           : &bsol;*out*/   "=a" (_res)                                  \
628           : &bsol;*in*/    "a" (&_argvec[0])                            \
629           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
630        );                                                          \
631        lval = (__typeof__(lval)) _res;                             \
632     } while (0)
633  #define CALL_FN_W_6W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6)   \
634     do {                                                           \
635        volatile OrigFn        _orig = (orig);                      \
636        volatile unsigned long _argvec[7];                          \
637        volatile unsigned long _res;                                \
638        _argvec[0] = (unsigned long)_orig.nraddr;                   \
639        _argvec[1] = (unsigned long)(arg1);                         \
640        _argvec[2] = (unsigned long)(arg2);                         \
641        _argvec[3] = (unsigned long)(arg3);                         \
642        _argvec[4] = (unsigned long)(arg4);                         \
643        _argvec[5] = (unsigned long)(arg5);                         \
644        _argvec[6] = (unsigned long)(arg6);                         \
645        __asm__ volatile(                                           \
646           "subl $8, %%esp\n\t"                                     \
647           "pushl 24(%%eax)\n\t"                                    \
648           "pushl 20(%%eax)\n\t"                                    \
649           "pushl 16(%%eax)\n\t"                                    \
650           "pushl 12(%%eax)\n\t"                                    \
651           "pushl 8(%%eax)\n\t"                                     \
652           "pushl 4(%%eax)\n\t"                                     \
653           "movl (%%eax), %%eax\n\t"  &bsol;* target->%eax */            \
654           VALGRIND_CALL_NOREDIR_EAX                                \
655           "addl $32, %%esp\n"                                      \
656           : &bsol;*out*/   "=a" (_res)                                  \
657           : &bsol;*in*/    "a" (&_argvec[0])                            \
658           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
659        );                                                          \
660        lval = (__typeof__(lval)) _res;                             \
661     } while (0)
662  #define CALL_FN_W_7W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
663                                   arg7)                            \
664     do {                                                           \
665        volatile OrigFn        _orig = (orig);                      \
666        volatile unsigned long _argvec[8];                          \
667        volatile unsigned long _res;                                \
668        _argvec[0] = (unsigned long)_orig.nraddr;                   \
669        _argvec[1] = (unsigned long)(arg1);                         \
670        _argvec[2] = (unsigned long)(arg2);                         \
671        _argvec[3] = (unsigned long)(arg3);                         \
672        _argvec[4] = (unsigned long)(arg4);                         \
673        _argvec[5] = (unsigned long)(arg5);                         \
674        _argvec[6] = (unsigned long)(arg6);                         \
675        _argvec[7] = (unsigned long)(arg7);                         \
676        __asm__ volatile(                                           \
677           "subl $4, %%esp\n\t"                                     \
678           "pushl 28(%%eax)\n\t"                                    \
679           "pushl 24(%%eax)\n\t"                                    \
680           "pushl 20(%%eax)\n\t"                                    \
681           "pushl 16(%%eax)\n\t"                                    \
682           "pushl 12(%%eax)\n\t"                                    \
683           "pushl 8(%%eax)\n\t"                                     \
684           "pushl 4(%%eax)\n\t"                                     \
685           "movl (%%eax), %%eax\n\t"  &bsol;* target->%eax */            \
686           VALGRIND_CALL_NOREDIR_EAX                                \
687           "addl $32, %%esp\n"                                      \
688           : &bsol;*out*/   "=a" (_res)                                  \
689           : &bsol;*in*/    "a" (&_argvec[0])                            \
690           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
691        );                                                          \
692        lval = (__typeof__(lval)) _res;                             \
693     } while (0)
694  #define CALL_FN_W_8W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
695                                   arg7,arg8)                       \
696     do {                                                           \
697        volatile OrigFn        _orig = (orig);                      \
698        volatile unsigned long _argvec[9];                          \
699        volatile unsigned long _res;                                \
700        _argvec[0] = (unsigned long)_orig.nraddr;                   \
701        _argvec[1] = (unsigned long)(arg1);                         \
702        _argvec[2] = (unsigned long)(arg2);                         \
703        _argvec[3] = (unsigned long)(arg3);                         \
704        _argvec[4] = (unsigned long)(arg4);                         \
705        _argvec[5] = (unsigned long)(arg5);                         \
706        _argvec[6] = (unsigned long)(arg6);                         \
707        _argvec[7] = (unsigned long)(arg7);                         \
708        _argvec[8] = (unsigned long)(arg8);                         \
709        __asm__ volatile(                                           \
710           "pushl 32(%%eax)\n\t"                                    \
711           "pushl 28(%%eax)\n\t"                                    \
712           "pushl 24(%%eax)\n\t"                                    \
713           "pushl 20(%%eax)\n\t"                                    \
714           "pushl 16(%%eax)\n\t"                                    \
715           "pushl 12(%%eax)\n\t"                                    \
716           "pushl 8(%%eax)\n\t"                                     \
717           "pushl 4(%%eax)\n\t"                                     \
718           "movl (%%eax), %%eax\n\t"  &bsol;* target->%eax */            \
719           VALGRIND_CALL_NOREDIR_EAX                                \
720           "addl $32, %%esp\n"                                      \
721           : &bsol;*out*/   "=a" (_res)                                  \
722           : &bsol;*in*/    "a" (&_argvec[0])                            \
723           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
724        );                                                          \
725        lval = (__typeof__(lval)) _res;                             \
726     } while (0)
727  #define CALL_FN_W_9W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
728                                   arg7,arg8,arg9)                  \
729     do {                                                           \
730        volatile OrigFn        _orig = (orig);                      \
731        volatile unsigned long _argvec[10];                         \
732        volatile unsigned long _res;                                \
733        _argvec[0] = (unsigned long)_orig.nraddr;                   \
734        _argvec[1] = (unsigned long)(arg1);                         \
735        _argvec[2] = (unsigned long)(arg2);                         \
736        _argvec[3] = (unsigned long)(arg3);                         \
737        _argvec[4] = (unsigned long)(arg4);                         \
738        _argvec[5] = (unsigned long)(arg5);                         \
739        _argvec[6] = (unsigned long)(arg6);                         \
740        _argvec[7] = (unsigned long)(arg7);                         \
741        _argvec[8] = (unsigned long)(arg8);                         \
742        _argvec[9] = (unsigned long)(arg9);                         \
743        __asm__ volatile(                                           \
744           "subl $12, %%esp\n\t"                                    \
745           "pushl 36(%%eax)\n\t"                                    \
746           "pushl 32(%%eax)\n\t"                                    \
747           "pushl 28(%%eax)\n\t"                                    \
748           "pushl 24(%%eax)\n\t"                                    \
749           "pushl 20(%%eax)\n\t"                                    \
750           "pushl 16(%%eax)\n\t"                                    \
751           "pushl 12(%%eax)\n\t"                                    \
752           "pushl 8(%%eax)\n\t"                                     \
753           "pushl 4(%%eax)\n\t"                                     \
754           "movl (%%eax), %%eax\n\t"  &bsol;* target->%eax */            \
755           VALGRIND_CALL_NOREDIR_EAX                                \
756           "addl $48, %%esp\n"                                      \
757           : &bsol;*out*/   "=a" (_res)                                  \
758           : &bsol;*in*/    "a" (&_argvec[0])                            \
759           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
760        );                                                          \
761        lval = (__typeof__(lval)) _res;                             \
762     } while (0)
763  #define CALL_FN_W_10W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
764                                    arg7,arg8,arg9,arg10)           \
765     do {                                                           \
766        volatile OrigFn        _orig = (orig);                      \
767        volatile unsigned long _argvec[11];                         \
768        volatile unsigned long _res;                                \
769        _argvec[0] = (unsigned long)_orig.nraddr;                   \
770        _argvec[1] = (unsigned long)(arg1);                         \
771        _argvec[2] = (unsigned long)(arg2);                         \
772        _argvec[3] = (unsigned long)(arg3);                         \
773        _argvec[4] = (unsigned long)(arg4);                         \
774        _argvec[5] = (unsigned long)(arg5);                         \
775        _argvec[6] = (unsigned long)(arg6);                         \
776        _argvec[7] = (unsigned long)(arg7);                         \
777        _argvec[8] = (unsigned long)(arg8);                         \
778        _argvec[9] = (unsigned long)(arg9);                         \
779        _argvec[10] = (unsigned long)(arg10);                       \
780        __asm__ volatile(                                           \
781           "subl $8, %%esp\n\t"                                     \
782           "pushl 40(%%eax)\n\t"                                    \
783           "pushl 36(%%eax)\n\t"                                    \
784           "pushl 32(%%eax)\n\t"                                    \
785           "pushl 28(%%eax)\n\t"                                    \
786           "pushl 24(%%eax)\n\t"                                    \
787           "pushl 20(%%eax)\n\t"                                    \
788           "pushl 16(%%eax)\n\t"                                    \
789           "pushl 12(%%eax)\n\t"                                    \
790           "pushl 8(%%eax)\n\t"                                     \
791           "pushl 4(%%eax)\n\t"                                     \
792           "movl (%%eax), %%eax\n\t"  &bsol;* target->%eax */            \
793           VALGRIND_CALL_NOREDIR_EAX                                \
794           "addl $48, %%esp\n"                                      \
795           : &bsol;*out*/   "=a" (_res)                                  \
796           : &bsol;*in*/    "a" (&_argvec[0])                            \
797           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
798        );                                                          \
799        lval = (__typeof__(lval)) _res;                             \
800     } while (0)
801  #define CALL_FN_W_11W(lval, orig, arg1,arg2,arg3,arg4,arg5,       \
802                                    arg6,arg7,arg8,arg9,arg10,      \
803                                    arg11)                          \
804     do {                                                           \
805        volatile OrigFn        _orig = (orig);                      \
806        volatile unsigned long _argvec[12];                         \
807        volatile unsigned long _res;                                \
808        _argvec[0] = (unsigned long)_orig.nraddr;                   \
809        _argvec[1] = (unsigned long)(arg1);                         \
810        _argvec[2] = (unsigned long)(arg2);                         \
811        _argvec[3] = (unsigned long)(arg3);                         \
812        _argvec[4] = (unsigned long)(arg4);                         \
813        _argvec[5] = (unsigned long)(arg5);                         \
814        _argvec[6] = (unsigned long)(arg6);                         \
815        _argvec[7] = (unsigned long)(arg7);                         \
816        _argvec[8] = (unsigned long)(arg8);                         \
817        _argvec[9] = (unsigned long)(arg9);                         \
818        _argvec[10] = (unsigned long)(arg10);                       \
819        _argvec[11] = (unsigned long)(arg11);                       \
820        __asm__ volatile(                                           \
821           "subl $4, %%esp\n\t"                                     \
822           "pushl 44(%%eax)\n\t"                                    \
823           "pushl 40(%%eax)\n\t"                                    \
824           "pushl 36(%%eax)\n\t"                                    \
825           "pushl 32(%%eax)\n\t"                                    \
826           "pushl 28(%%eax)\n\t"                                    \
827           "pushl 24(%%eax)\n\t"                                    \
828           "pushl 20(%%eax)\n\t"                                    \
829           "pushl 16(%%eax)\n\t"                                    \
830           "pushl 12(%%eax)\n\t"                                    \
831           "pushl 8(%%eax)\n\t"                                     \
832           "pushl 4(%%eax)\n\t"                                     \
833           "movl (%%eax), %%eax\n\t"  &bsol;* target->%eax */            \
834           VALGRIND_CALL_NOREDIR_EAX                                \
835           "addl $48, %%esp\n"                                      \
836           : &bsol;*out*/   "=a" (_res)                                  \
837           : &bsol;*in*/    "a" (&_argvec[0])                            \
838           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
839        );                                                          \
840        lval = (__typeof__(lval)) _res;                             \
841     } while (0)
842  #define CALL_FN_W_12W(lval, orig, arg1,arg2,arg3,arg4,arg5,       \
843                                    arg6,arg7,arg8,arg9,arg10,      \
844                                    arg11,arg12)                    \
845     do {                                                           \
846        volatile OrigFn        _orig = (orig);                      \
847        volatile unsigned long _argvec[13];                         \
848        volatile unsigned long _res;                                \
849        _argvec[0] = (unsigned long)_orig.nraddr;                   \
850        _argvec[1] = (unsigned long)(arg1);                         \
851        _argvec[2] = (unsigned long)(arg2);                         \
852        _argvec[3] = (unsigned long)(arg3);                         \
853        _argvec[4] = (unsigned long)(arg4);                         \
854        _argvec[5] = (unsigned long)(arg5);                         \
855        _argvec[6] = (unsigned long)(arg6);                         \
856        _argvec[7] = (unsigned long)(arg7);                         \
857        _argvec[8] = (unsigned long)(arg8);                         \
858        _argvec[9] = (unsigned long)(arg9);                         \
859        _argvec[10] = (unsigned long)(arg10);                       \
860        _argvec[11] = (unsigned long)(arg11);                       \
861        _argvec[12] = (unsigned long)(arg12);                       \
862        __asm__ volatile(                                           \
863           "pushl 48(%%eax)\n\t"                                    \
864           "pushl 44(%%eax)\n\t"                                    \
865           "pushl 40(%%eax)\n\t"                                    \
866           "pushl 36(%%eax)\n\t"                                    \
867           "pushl 32(%%eax)\n\t"                                    \
868           "pushl 28(%%eax)\n\t"                                    \
869           "pushl 24(%%eax)\n\t"                                    \
870           "pushl 20(%%eax)\n\t"                                    \
871           "pushl 16(%%eax)\n\t"                                    \
872           "pushl 12(%%eax)\n\t"                                    \
873           "pushl 8(%%eax)\n\t"                                     \
874           "pushl 4(%%eax)\n\t"                                     \
875           "movl (%%eax), %%eax\n\t"  &bsol;* target->%eax */            \
876           VALGRIND_CALL_NOREDIR_EAX                                \
877           "addl $48, %%esp\n"                                      \
878           : &bsol;*out*/   "=a" (_res)                                  \
879           : &bsol;*in*/    "a" (&_argvec[0])                            \
880           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
881        );                                                          \
882        lval = (__typeof__(lval)) _res;                             \
883     } while (0)
884  #endif &bsol;* PLAT_x86_linux || PLAT_x86_darwin */
885  #if defined(PLAT_amd64_linux)  ||  defined(PLAT_amd64_darwin)
886  #define __CALLER_SAVED_REGS &bsol;*"rax",*/ "rcx", "rdx", "rsi",       \
887                              "rdi", "r8", "r9", "r10", "r11"
888  #if defined(__GNUC__) && defined(__GCC_HAVE_DWARF2_CFI_ASM)
889  #  define __FRAME_POINTER                                         \
890        ,"r"(__builtin_dwarf_cfa())
891  #  define VALGRIND_CFI_PROLOGUE                                   \
892        "movq %%rbp, %%r15\n\t"                                     \
893        "movq %2, %%rbp\n\t"                                        \
894        ".cfi_remember_state\n\t"                                   \
895        ".cfi_def_cfa rbp, 0\n\t"
896  #  define VALGRIND_CFI_EPILOGUE                                   \
897        "movq %%r15, %%rbp\n\t"                                     \
898        ".cfi_restore_state\n\t"
899  #else
900  #  define __FRAME_POINTER
901  #  define VALGRIND_CFI_PROLOGUE
902  #  define VALGRIND_CFI_EPILOGUE
903  #endif
904  #define CALL_FN_W_v(lval, orig)                                   \
905     do {                                                           \
906        volatile OrigFn        _orig = (orig);                      \
907        volatile unsigned long _argvec[1];                          \
908        volatile unsigned long _res;                                \
909        _argvec[0] = (unsigned long)_orig.nraddr;                   \
910        __asm__ volatile(                                           \
911           VALGRIND_CFI_PROLOGUE                                    \
912           "subq $128,%%rsp\n\t"                                    \
913           "movq (%%rax), %%rax\n\t"  &bsol;* target->%rax */            \
914           VALGRIND_CALL_NOREDIR_RAX                                \
915           "addq $128,%%rsp\n\t"                                    \
916           VALGRIND_CFI_EPILOGUE                                    \
917           : &bsol;*out*/   "=a" (_res)                                  \
918           : &bsol;*in*/    "a" (&_argvec[0]) __FRAME_POINTER            \
919           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS, "r15"   \
920        );                                                          \
921        lval = (__typeof__(lval)) _res;                             \
922     } while (0)
923  #define CALL_FN_W_W(lval, orig, arg1)                             \
924     do {                                                           \
925        volatile OrigFn        _orig = (orig);                      \
926        volatile unsigned long _argvec[2];                          \
927        volatile unsigned long _res;                                \
928        _argvec[0] = (unsigned long)_orig.nraddr;                   \
929        _argvec[1] = (unsigned long)(arg1);                         \
930        __asm__ volatile(                                           \
931           VALGRIND_CFI_PROLOGUE                                    \
932           "subq $128,%%rsp\n\t"                                    \
933           "movq 8(%%rax), %%rdi\n\t"                               \
934           "movq (%%rax), %%rax\n\t"  &bsol;* target->%rax */            \
935           VALGRIND_CALL_NOREDIR_RAX                                \
936           "addq $128,%%rsp\n\t"                                    \
937           VALGRIND_CFI_EPILOGUE                                    \
938           : &bsol;*out*/   "=a" (_res)                                  \
939           : &bsol;*in*/    "a" (&_argvec[0]) __FRAME_POINTER            \
940           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS, "r15"   \
941        );                                                          \
942        lval = (__typeof__(lval)) _res;                             \
943     } while (0)
944  #define CALL_FN_W_WW(lval, orig, arg1,arg2)                       \
945     do {                                                           \
946        volatile OrigFn        _orig = (orig);                      \
947        volatile unsigned long _argvec[3];                          \
948        volatile unsigned long _res;                                \
949        _argvec[0] = (unsigned long)_orig.nraddr;                   \
950        _argvec[1] = (unsigned long)(arg1);                         \
951        _argvec[2] = (unsigned long)(arg2);                         \
952        __asm__ volatile(                                           \
953           VALGRIND_CFI_PROLOGUE                                    \
954           "subq $128,%%rsp\n\t"                                    \
955           "movq 16(%%rax), %%rsi\n\t"                              \
956           "movq 8(%%rax), %%rdi\n\t"                               \
957           "movq (%%rax), %%rax\n\t"  &bsol;* target->%rax */            \
958           VALGRIND_CALL_NOREDIR_RAX                                \
959           "addq $128,%%rsp\n\t"                                    \
960           VALGRIND_CFI_EPILOGUE                                    \
961           : &bsol;*out*/   "=a" (_res)                                  \
962           : &bsol;*in*/    "a" (&_argvec[0]) __FRAME_POINTER            \
963           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS, "r15"   \
964        );                                                          \
965        lval = (__typeof__(lval)) _res;                             \
966     } while (0)
967  #define CALL_FN_W_WWW(lval, orig, arg1,arg2,arg3)                 \
968     do {                                                           \
969        volatile OrigFn        _orig = (orig);                      \
970        volatile unsigned long _argvec[4];                          \
971        volatile unsigned long _res;                                \
972        _argvec[0] = (unsigned long)_orig.nraddr;                   \
973        _argvec[1] = (unsigned long)(arg1);                         \
974        _argvec[2] = (unsigned long)(arg2);                         \
975        _argvec[3] = (unsigned long)(arg3);                         \
976        __asm__ volatile(                                           \
977           VALGRIND_CFI_PROLOGUE                                    \
978           "subq $128,%%rsp\n\t"                                    \
979           "movq 24(%%rax), %%rdx\n\t"                              \
980           "movq 16(%%rax), %%rsi\n\t"                              \
981           "movq 8(%%rax), %%rdi\n\t"                               \
982           "movq (%%rax), %%rax\n\t"  &bsol;* target->%rax */            \
983           VALGRIND_CALL_NOREDIR_RAX                                \
984           "addq $128,%%rsp\n\t"                                    \
985           VALGRIND_CFI_EPILOGUE                                    \
986           : &bsol;*out*/   "=a" (_res)                                  \
987           : &bsol;*in*/    "a" (&_argvec[0]) __FRAME_POINTER            \
988           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS, "r15"   \
989        );                                                          \
990        lval = (__typeof__(lval)) _res;                             \
991     } while (0)
992  #define CALL_FN_W_WWWW(lval, orig, arg1,arg2,arg3,arg4)           \
993     do {                                                           \
994        volatile OrigFn        _orig = (orig);                      \
995        volatile unsigned long _argvec[5];                          \
996        volatile unsigned long _res;                                \
997        _argvec[0] = (unsigned long)_orig.nraddr;                   \
998        _argvec[1] = (unsigned long)(arg1);                         \
999        _argvec[2] = (unsigned long)(arg2);                         \
1000        _argvec[3] = (unsigned long)(arg3);                         \
1001        _argvec[4] = (unsigned long)(arg4);                         \
1002        __asm__ volatile(                                           \
1003           VALGRIND_CFI_PROLOGUE                                    \
1004           "subq $128,%%rsp\n\t"                                    \
1005           "movq 32(%%rax), %%rcx\n\t"                              \
1006           "movq 24(%%rax), %%rdx\n\t"                              \
1007           "movq 16(%%rax), %%rsi\n\t"                              \
1008           "movq 8(%%rax), %%rdi\n\t"                               \
1009           "movq (%%rax), %%rax\n\t"  &bsol;* target->%rax */            \
1010           VALGRIND_CALL_NOREDIR_RAX                                \
1011           "addq $128,%%rsp\n\t"                                    \
1012           VALGRIND_CFI_EPILOGUE                                    \
1013           : &bsol;*out*/   "=a" (_res)                                  \
1014           : &bsol;*in*/    "a" (&_argvec[0]) __FRAME_POINTER            \
1015           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS, "r15"   \
1016        );                                                          \
1017        lval = (__typeof__(lval)) _res;                             \
1018     } while (0)
1019  #define CALL_FN_W_5W(lval, orig, arg1,arg2,arg3,arg4,arg5)        \
1020     do {                                                           \
1021        volatile OrigFn        _orig = (orig);                      \
1022        volatile unsigned long _argvec[6];                          \
1023        volatile unsigned long _res;                                \
1024        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1025        _argvec[1] = (unsigned long)(arg1);                         \
1026        _argvec[2] = (unsigned long)(arg2);                         \
1027        _argvec[3] = (unsigned long)(arg3);                         \
1028        _argvec[4] = (unsigned long)(arg4);                         \
1029        _argvec[5] = (unsigned long)(arg5);                         \
1030        __asm__ volatile(                                           \
1031           VALGRIND_CFI_PROLOGUE                                    \
1032           "subq $128,%%rsp\n\t"                                    \
1033           "movq 40(%%rax), %%r8\n\t"                               \
1034           "movq 32(%%rax), %%rcx\n\t"                              \
1035           "movq 24(%%rax), %%rdx\n\t"                              \
1036           "movq 16(%%rax), %%rsi\n\t"                              \
1037           "movq 8(%%rax), %%rdi\n\t"                               \
1038           "movq (%%rax), %%rax\n\t"  &bsol;* target->%rax */            \
1039           VALGRIND_CALL_NOREDIR_RAX                                \
1040           "addq $128,%%rsp\n\t"                                    \
1041           VALGRIND_CFI_EPILOGUE                                    \
1042           : &bsol;*out*/   "=a" (_res)                                  \
1043           : &bsol;*in*/    "a" (&_argvec[0]) __FRAME_POINTER            \
1044           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS, "r15"   \
1045        );                                                          \
1046        lval = (__typeof__(lval)) _res;                             \
1047     } while (0)
1048  #define CALL_FN_W_6W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6)   \
1049     do {                                                           \
1050        volatile OrigFn        _orig = (orig);                      \
1051        volatile unsigned long _argvec[7];                          \
1052        volatile unsigned long _res;                                \
1053        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1054        _argvec[1] = (unsigned long)(arg1);                         \
1055        _argvec[2] = (unsigned long)(arg2);                         \
1056        _argvec[3] = (unsigned long)(arg3);                         \
1057        _argvec[4] = (unsigned long)(arg4);                         \
1058        _argvec[5] = (unsigned long)(arg5);                         \
1059        _argvec[6] = (unsigned long)(arg6);                         \
1060        __asm__ volatile(                                           \
1061           VALGRIND_CFI_PROLOGUE                                    \
1062           "subq $128,%%rsp\n\t"                                    \
1063           "movq 48(%%rax), %%r9\n\t"                               \
1064           "movq 40(%%rax), %%r8\n\t"                               \
1065           "movq 32(%%rax), %%rcx\n\t"                              \
1066           "movq 24(%%rax), %%rdx\n\t"                              \
1067           "movq 16(%%rax), %%rsi\n\t"                              \
1068           "movq 8(%%rax), %%rdi\n\t"                               \
1069           "movq (%%rax), %%rax\n\t"  &bsol;* target->%rax */            \
1070           VALGRIND_CALL_NOREDIR_RAX                                \
1071           "addq $128,%%rsp\n\t"                                    \
1072           VALGRIND_CFI_EPILOGUE                                    \
1073           : &bsol;*out*/   "=a" (_res)                                  \
1074           : &bsol;*in*/    "a" (&_argvec[0]) __FRAME_POINTER            \
1075           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS, "r15"   \
1076        );                                                          \
1077        lval = (__typeof__(lval)) _res;                             \
1078     } while (0)
1079  #define CALL_FN_W_7W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
1080                                   arg7)                            \
1081     do {                                                           \
1082        volatile OrigFn        _orig = (orig);                      \
1083        volatile unsigned long _argvec[8];                          \
1084        volatile unsigned long _res;                                \
1085        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1086        _argvec[1] = (unsigned long)(arg1);                         \
1087        _argvec[2] = (unsigned long)(arg2);                         \
1088        _argvec[3] = (unsigned long)(arg3);                         \
1089        _argvec[4] = (unsigned long)(arg4);                         \
1090        _argvec[5] = (unsigned long)(arg5);                         \
1091        _argvec[6] = (unsigned long)(arg6);                         \
1092        _argvec[7] = (unsigned long)(arg7);                         \
1093        __asm__ volatile(                                           \
1094           VALGRIND_CFI_PROLOGUE                                    \
1095           "subq $136,%%rsp\n\t"                                    \
1096           "pushq 56(%%rax)\n\t"                                    \
1097           "movq 48(%%rax), %%r9\n\t"                               \
1098           "movq 40(%%rax), %%r8\n\t"                               \
1099           "movq 32(%%rax), %%rcx\n\t"                              \
1100           "movq 24(%%rax), %%rdx\n\t"                              \
1101           "movq 16(%%rax), %%rsi\n\t"                              \
1102           "movq 8(%%rax), %%rdi\n\t"                               \
1103           "movq (%%rax), %%rax\n\t"  &bsol;* target->%rax */            \
1104           VALGRIND_CALL_NOREDIR_RAX                                \
1105           "addq $8, %%rsp\n"                                       \
1106           "addq $136,%%rsp\n\t"                                    \
1107           VALGRIND_CFI_EPILOGUE                                    \
1108           : &bsol;*out*/   "=a" (_res)                                  \
1109           : &bsol;*in*/    "a" (&_argvec[0]) __FRAME_POINTER            \
1110           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS, "r15"   \
1111        );                                                          \
1112        lval = (__typeof__(lval)) _res;                             \
1113     } while (0)
1114  #define CALL_FN_W_8W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
1115                                   arg7,arg8)                       \
1116     do {                                                           \
1117        volatile OrigFn        _orig = (orig);                      \
1118        volatile unsigned long _argvec[9];                          \
1119        volatile unsigned long _res;                                \
1120        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1121        _argvec[1] = (unsigned long)(arg1);                         \
1122        _argvec[2] = (unsigned long)(arg2);                         \
1123        _argvec[3] = (unsigned long)(arg3);                         \
1124        _argvec[4] = (unsigned long)(arg4);                         \
1125        _argvec[5] = (unsigned long)(arg5);                         \
1126        _argvec[6] = (unsigned long)(arg6);                         \
1127        _argvec[7] = (unsigned long)(arg7);                         \
1128        _argvec[8] = (unsigned long)(arg8);                         \
1129        __asm__ volatile(                                           \
1130           VALGRIND_CFI_PROLOGUE                                    \
1131           "subq $128,%%rsp\n\t"                                    \
1132           "pushq 64(%%rax)\n\t"                                    \
1133           "pushq 56(%%rax)\n\t"                                    \
1134           "movq 48(%%rax), %%r9\n\t"                               \
1135           "movq 40(%%rax), %%r8\n\t"                               \
1136           "movq 32(%%rax), %%rcx\n\t"                              \
1137           "movq 24(%%rax), %%rdx\n\t"                              \
1138           "movq 16(%%rax), %%rsi\n\t"                              \
1139           "movq 8(%%rax), %%rdi\n\t"                               \
1140           "movq (%%rax), %%rax\n\t"  &bsol;* target->%rax */            \
1141           VALGRIND_CALL_NOREDIR_RAX                                \
1142           "addq $16, %%rsp\n"                                      \
1143           "addq $128,%%rsp\n\t"                                    \
1144           VALGRIND_CFI_EPILOGUE                                    \
1145           : &bsol;*out*/   "=a" (_res)                                  \
1146           : &bsol;*in*/    "a" (&_argvec[0]) __FRAME_POINTER            \
1147           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS, "r15"   \
1148        );                                                          \
1149        lval = (__typeof__(lval)) _res;                             \
1150     } while (0)
1151  #define CALL_FN_W_9W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
1152                                   arg7,arg8,arg9)                  \
1153     do {                                                           \
1154        volatile OrigFn        _orig = (orig);                      \
1155        volatile unsigned long _argvec[10];                         \
1156        volatile unsigned long _res;                                \
1157        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1158        _argvec[1] = (unsigned long)(arg1);                         \
1159        _argvec[2] = (unsigned long)(arg2);                         \
1160        _argvec[3] = (unsigned long)(arg3);                         \
1161        _argvec[4] = (unsigned long)(arg4);                         \
1162        _argvec[5] = (unsigned long)(arg5);                         \
1163        _argvec[6] = (unsigned long)(arg6);                         \
1164        _argvec[7] = (unsigned long)(arg7);                         \
1165        _argvec[8] = (unsigned long)(arg8);                         \
1166        _argvec[9] = (unsigned long)(arg9);                         \
1167        __asm__ volatile(                                           \
1168           VALGRIND_CFI_PROLOGUE                                    \
1169           "subq $136,%%rsp\n\t"                                    \
1170           "pushq 72(%%rax)\n\t"                                    \
1171           "pushq 64(%%rax)\n\t"                                    \
1172           "pushq 56(%%rax)\n\t"                                    \
1173           "movq 48(%%rax), %%r9\n\t"                               \
1174           "movq 40(%%rax), %%r8\n\t"                               \
1175           "movq 32(%%rax), %%rcx\n\t"                              \
1176           "movq 24(%%rax), %%rdx\n\t"                              \
1177           "movq 16(%%rax), %%rsi\n\t"                              \
1178           "movq 8(%%rax), %%rdi\n\t"                               \
1179           "movq (%%rax), %%rax\n\t"  &bsol;* target->%rax */            \
1180           VALGRIND_CALL_NOREDIR_RAX                                \
1181           "addq $24, %%rsp\n"                                      \
1182           "addq $136,%%rsp\n\t"                                    \
1183           VALGRIND_CFI_EPILOGUE                                    \
1184           : &bsol;*out*/   "=a" (_res)                                  \
1185           : &bsol;*in*/    "a" (&_argvec[0]) __FRAME_POINTER            \
1186           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS, "r15"   \
1187        );                                                          \
1188        lval = (__typeof__(lval)) _res;                             \
1189     } while (0)
1190  #define CALL_FN_W_10W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
1191                                    arg7,arg8,arg9,arg10)           \
1192     do {                                                           \
1193        volatile OrigFn        _orig = (orig);                      \
1194        volatile unsigned long _argvec[11];                         \
1195        volatile unsigned long _res;                                \
1196        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1197        _argvec[1] = (unsigned long)(arg1);                         \
1198        _argvec[2] = (unsigned long)(arg2);                         \
1199        _argvec[3] = (unsigned long)(arg3);                         \
1200        _argvec[4] = (unsigned long)(arg4);                         \
1201        _argvec[5] = (unsigned long)(arg5);                         \
1202        _argvec[6] = (unsigned long)(arg6);                         \
1203        _argvec[7] = (unsigned long)(arg7);                         \
1204        _argvec[8] = (unsigned long)(arg8);                         \
1205        _argvec[9] = (unsigned long)(arg9);                         \
1206        _argvec[10] = (unsigned long)(arg10);                       \
1207        __asm__ volatile(                                           \
1208           VALGRIND_CFI_PROLOGUE                                    \
1209           "subq $128,%%rsp\n\t"                                    \
1210           "pushq 80(%%rax)\n\t"                                    \
1211           "pushq 72(%%rax)\n\t"                                    \
1212           "pushq 64(%%rax)\n\t"                                    \
1213           "pushq 56(%%rax)\n\t"                                    \
1214           "movq 48(%%rax), %%r9\n\t"                               \
1215           "movq 40(%%rax), %%r8\n\t"                               \
1216           "movq 32(%%rax), %%rcx\n\t"                              \
1217           "movq 24(%%rax), %%rdx\n\t"                              \
1218           "movq 16(%%rax), %%rsi\n\t"                              \
1219           "movq 8(%%rax), %%rdi\n\t"                               \
1220           "movq (%%rax), %%rax\n\t"  &bsol;* target->%rax */            \
1221           VALGRIND_CALL_NOREDIR_RAX                                \
1222           "addq $32, %%rsp\n"                                      \
1223           "addq $128,%%rsp\n\t"                                    \
1224           VALGRIND_CFI_EPILOGUE                                    \
1225           : &bsol;*out*/   "=a" (_res)                                  \
1226           : &bsol;*in*/    "a" (&_argvec[0]) __FRAME_POINTER            \
1227           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS, "r15"   \
1228        );                                                          \
1229        lval = (__typeof__(lval)) _res;                             \
1230     } while (0)
1231  #define CALL_FN_W_11W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
1232                                    arg7,arg8,arg9,arg10,arg11)     \
1233     do {                                                           \
1234        volatile OrigFn        _orig = (orig);                      \
1235        volatile unsigned long _argvec[12];                         \
1236        volatile unsigned long _res;                                \
1237        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1238        _argvec[1] = (unsigned long)(arg1);                         \
1239        _argvec[2] = (unsigned long)(arg2);                         \
1240        _argvec[3] = (unsigned long)(arg3);                         \
1241        _argvec[4] = (unsigned long)(arg4);                         \
1242        _argvec[5] = (unsigned long)(arg5);                         \
1243        _argvec[6] = (unsigned long)(arg6);                         \
1244        _argvec[7] = (unsigned long)(arg7);                         \
1245        _argvec[8] = (unsigned long)(arg8);                         \
1246        _argvec[9] = (unsigned long)(arg9);                         \
1247        _argvec[10] = (unsigned long)(arg10);                       \
1248        _argvec[11] = (unsigned long)(arg11);                       \
1249        __asm__ volatile(                                           \
1250           VALGRIND_CFI_PROLOGUE                                    \
1251           "subq $136,%%rsp\n\t"                                    \
1252           "pushq 88(%%rax)\n\t"                                    \
1253           "pushq 80(%%rax)\n\t"                                    \
1254           "pushq 72(%%rax)\n\t"                                    \
1255           "pushq 64(%%rax)\n\t"                                    \
1256           "pushq 56(%%rax)\n\t"                                    \
1257           "movq 48(%%rax), %%r9\n\t"                               \
1258           "movq 40(%%rax), %%r8\n\t"                               \
1259           "movq 32(%%rax), %%rcx\n\t"                              \
1260           "movq 24(%%rax), %%rdx\n\t"                              \
1261           "movq 16(%%rax), %%rsi\n\t"                              \
1262           "movq 8(%%rax), %%rdi\n\t"                               \
1263           "movq (%%rax), %%rax\n\t"  &bsol;* target->%rax */            \
1264           VALGRIND_CALL_NOREDIR_RAX                                \
1265           "addq $40, %%rsp\n"                                      \
1266           "addq $136,%%rsp\n\t"                                    \
1267           VALGRIND_CFI_EPILOGUE                                    \
1268           : &bsol;*out*/   "=a" (_res)                                  \
1269           : &bsol;*in*/    "a" (&_argvec[0]) __FRAME_POINTER            \
1270           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS, "r15"   \
1271        );                                                          \
1272        lval = (__typeof__(lval)) _res;                             \
1273     } while (0)
1274  #define CALL_FN_W_12W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
1275                                  arg7,arg8,arg9,arg10,arg11,arg12) \
1276     do {                                                           \
1277        volatile OrigFn        _orig = (orig);                      \
1278        volatile unsigned long _argvec[13];                         \
1279        volatile unsigned long _res;                                \
1280        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1281        _argvec[1] = (unsigned long)(arg1);                         \
1282        _argvec[2] = (unsigned long)(arg2);                         \
1283        _argvec[3] = (unsigned long)(arg3);                         \
1284        _argvec[4] = (unsigned long)(arg4);                         \
1285        _argvec[5] = (unsigned long)(arg5);                         \
1286        _argvec[6] = (unsigned long)(arg6);                         \
1287        _argvec[7] = (unsigned long)(arg7);                         \
1288        _argvec[8] = (unsigned long)(arg8);                         \
1289        _argvec[9] = (unsigned long)(arg9);                         \
1290        _argvec[10] = (unsigned long)(arg10);                       \
1291        _argvec[11] = (unsigned long)(arg11);                       \
1292        _argvec[12] = (unsigned long)(arg12);                       \
1293        __asm__ volatile(                                           \
1294           VALGRIND_CFI_PROLOGUE                                    \
1295           "subq $128,%%rsp\n\t"                                    \
1296           "pushq 96(%%rax)\n\t"                                    \
1297           "pushq 88(%%rax)\n\t"                                    \
1298           "pushq 80(%%rax)\n\t"                                    \
1299           "pushq 72(%%rax)\n\t"                                    \
1300           "pushq 64(%%rax)\n\t"                                    \
1301           "pushq 56(%%rax)\n\t"                                    \
1302           "movq 48(%%rax), %%r9\n\t"                               \
1303           "movq 40(%%rax), %%r8\n\t"                               \
1304           "movq 32(%%rax), %%rcx\n\t"                              \
1305           "movq 24(%%rax), %%rdx\n\t"                              \
1306           "movq 16(%%rax), %%rsi\n\t"                              \
1307           "movq 8(%%rax), %%rdi\n\t"                               \
1308           "movq (%%rax), %%rax\n\t"  &bsol;* target->%rax */            \
1309           VALGRIND_CALL_NOREDIR_RAX                                \
1310           "addq $48, %%rsp\n"                                      \
1311           "addq $128,%%rsp\n\t"                                    \
1312           VALGRIND_CFI_EPILOGUE                                    \
1313           : &bsol;*out*/   "=a" (_res)                                  \
1314           : &bsol;*in*/    "a" (&_argvec[0]) __FRAME_POINTER            \
1315           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS, "r15"   \
1316        );                                                          \
1317        lval = (__typeof__(lval)) _res;                             \
1318     } while (0)
1319  #endif &bsol;* PLAT_amd64_linux || PLAT_amd64_darwin */
1320  #if defined(PLAT_ppc32_linux)
1321  #define __CALLER_SAVED_REGS                                       \
1322     "lr", "ctr", "xer",                                            \
1323     "cr0", "cr1", "cr2", "cr3", "cr4", "cr5", "cr6", "cr7",        \
1324     "r0", "r2", "r3", "r4", "r5", "r6", "r7", "r8", "r9", "r10",   \
1325     "r11", "r12", "r13"
1326  #define CALL_FN_W_v(lval, orig)                                   \
1327     do {                                                           \
1328        volatile OrigFn        _orig = (orig);                      \
1329        volatile unsigned long _argvec[1];                          \
1330        volatile unsigned long _res;                                \
1331        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1332        __asm__ volatile(                                           \
1333           "mr 11,%1\n\t"                                           \
1334           "lwz 11,0(11)\n\t"  &bsol;* target->r11 */                    \
1335           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1336           "mr %0,3"                                                \
1337           : &bsol;*out*/   "=r" (_res)                                  \
1338           : &bsol;*in*/    "r" (&_argvec[0])                            \
1339           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1340        );                                                          \
1341        lval = (__typeof__(lval)) _res;                             \
1342     } while (0)
1343  #define CALL_FN_W_W(lval, orig, arg1)                             \
1344     do {                                                           \
1345        volatile OrigFn        _orig = (orig);                      \
1346        volatile unsigned long _argvec[2];                          \
1347        volatile unsigned long _res;                                \
1348        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1349        _argvec[1] = (unsigned long)arg1;                           \
<span onclick='openModal()' class='match'>1350        __asm__ volatile(                                           \
1351           "mr 11,%1\n\t"                                           \
1352           "lwz 3,4(11)\n\t"   &bsol;* arg1->r3 */                       \
1353           "lwz 11,0(11)\n\t"  &bsol;* target->r11 */                    \
</span>1354           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1355           "mr %0,3"                                                \
1356           : &bsol;*out*/   "=r" (_res)                                  \
1357           : &bsol;*in*/    "r" (&_argvec[0])                            \
1358           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1359        );                                                          \
1360        lval = (__typeof__(lval)) _res;                             \
1361     } while (0)
1362  #define CALL_FN_W_WW(lval, orig, arg1,arg2)                       \
1363     do {                                                           \
1364        volatile OrigFn        _orig = (orig);                      \
1365        volatile unsigned long _argvec[3];                          \
1366        volatile unsigned long _res;                                \
1367        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1368        _argvec[1] = (unsigned long)arg1;                           \
1369        _argvec[2] = (unsigned long)arg2;                           \
1370        __asm__ volatile(                                           \
1371           "mr 11,%1\n\t"                                           \
1372           "lwz 3,4(11)\n\t"   &bsol;* arg1->r3 */                       \
1373           "lwz 4,8(11)\n\t"                                        \
1374           "lwz 11,0(11)\n\t"  &bsol;* target->r11 */                    \
1375           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1376           "mr %0,3"                                                \
1377           : &bsol;*out*/   "=r" (_res)                                  \
1378           : &bsol;*in*/    "r" (&_argvec[0])                            \
1379           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1380        );                                                          \
1381        lval = (__typeof__(lval)) _res;                             \
1382     } while (0)
1383  #define CALL_FN_W_WWW(lval, orig, arg1,arg2,arg3)                 \
1384     do {                                                           \
1385        volatile OrigFn        _orig = (orig);                      \
1386        volatile unsigned long _argvec[4];                          \
1387        volatile unsigned long _res;                                \
1388        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1389        _argvec[1] = (unsigned long)arg1;                           \
1390        _argvec[2] = (unsigned long)arg2;                           \
1391        _argvec[3] = (unsigned long)arg3;                           \
1392        __asm__ volatile(                                           \
1393           "mr 11,%1\n\t"                                           \
1394           "lwz 3,4(11)\n\t"   &bsol;* arg1->r3 */                       \
1395           "lwz 4,8(11)\n\t"                                        \
1396           "lwz 5,12(11)\n\t"                                       \
1397           "lwz 11,0(11)\n\t"  &bsol;* target->r11 */                    \
1398           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1399           "mr %0,3"                                                \
1400           : &bsol;*out*/   "=r" (_res)                                  \
1401           : &bsol;*in*/    "r" (&_argvec[0])                            \
1402           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1403        );                                                          \
1404        lval = (__typeof__(lval)) _res;                             \
1405     } while (0)
1406  #define CALL_FN_W_WWWW(lval, orig, arg1,arg2,arg3,arg4)           \
1407     do {                                                           \
1408        volatile OrigFn        _orig = (orig);                      \
1409        volatile unsigned long _argvec[5];                          \
1410        volatile unsigned long _res;                                \
1411        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1412        _argvec[1] = (unsigned long)arg1;                           \
1413        _argvec[2] = (unsigned long)arg2;                           \
1414        _argvec[3] = (unsigned long)arg3;                           \
1415        _argvec[4] = (unsigned long)arg4;                           \
1416        __asm__ volatile(                                           \
1417           "mr 11,%1\n\t"                                           \
1418           "lwz 3,4(11)\n\t"   &bsol;* arg1->r3 */                       \
1419           "lwz 4,8(11)\n\t"                                        \
1420           "lwz 5,12(11)\n\t"                                       \
1421           "lwz 6,16(11)\n\t"  &bsol;* arg4->r6 */                       \
1422           "lwz 11,0(11)\n\t"  &bsol;* target->r11 */                    \
1423           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1424           "mr %0,3"                                                \
1425           : &bsol;*out*/   "=r" (_res)                                  \
1426           : &bsol;*in*/    "r" (&_argvec[0])                            \
1427           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1428        );                                                          \
1429        lval = (__typeof__(lval)) _res;                             \
1430     } while (0)
1431  #define CALL_FN_W_5W(lval, orig, arg1,arg2,arg3,arg4,arg5)        \
1432     do {                                                           \
1433        volatile OrigFn        _orig = (orig);                      \
1434        volatile unsigned long _argvec[6];                          \
1435        volatile unsigned long _res;                                \
1436        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1437        _argvec[1] = (unsigned long)arg1;                           \
1438        _argvec[2] = (unsigned long)arg2;                           \
1439        _argvec[3] = (unsigned long)arg3;                           \
1440        _argvec[4] = (unsigned long)arg4;                           \
1441        _argvec[5] = (unsigned long)arg5;                           \
1442        __asm__ volatile(                                           \
1443           "mr 11,%1\n\t"                                           \
1444           "lwz 3,4(11)\n\t"   &bsol;* arg1->r3 */                       \
1445           "lwz 4,8(11)\n\t"                                        \
1446           "lwz 5,12(11)\n\t"                                       \
1447           "lwz 6,16(11)\n\t"  &bsol;* arg4->r6 */                       \
1448           "lwz 7,20(11)\n\t"                                       \
1449           "lwz 11,0(11)\n\t"  &bsol;* target->r11 */                    \
1450           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1451           "mr %0,3"                                                \
1452           : &bsol;*out*/   "=r" (_res)                                  \
1453           : &bsol;*in*/    "r" (&_argvec[0])                            \
1454           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1455        );                                                          \
1456        lval = (__typeof__(lval)) _res;                             \
1457     } while (0)
1458  #define CALL_FN_W_6W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6)   \
1459     do {                                                           \
1460        volatile OrigFn        _orig = (orig);                      \
1461        volatile unsigned long _argvec[7];                          \
1462        volatile unsigned long _res;                                \
1463        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1464        _argvec[1] = (unsigned long)arg1;                           \
1465        _argvec[2] = (unsigned long)arg2;                           \
1466        _argvec[3] = (unsigned long)arg3;                           \
1467        _argvec[4] = (unsigned long)arg4;                           \
1468        _argvec[5] = (unsigned long)arg5;                           \
1469        _argvec[6] = (unsigned long)arg6;                           \
1470        __asm__ volatile(                                           \
1471           "mr 11,%1\n\t"                                           \
1472           "lwz 3,4(11)\n\t"   &bsol;* arg1->r3 */                       \
1473           "lwz 4,8(11)\n\t"                                        \
1474           "lwz 5,12(11)\n\t"                                       \
1475           "lwz 6,16(11)\n\t"  &bsol;* arg4->r6 */                       \
1476           "lwz 7,20(11)\n\t"                                       \
1477           "lwz 8,24(11)\n\t"                                       \
1478           "lwz 11,0(11)\n\t"  &bsol;* target->r11 */                    \
1479           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1480           "mr %0,3"                                                \
1481           : &bsol;*out*/   "=r" (_res)                                  \
1482           : &bsol;*in*/    "r" (&_argvec[0])                            \
1483           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1484        );                                                          \
1485        lval = (__typeof__(lval)) _res;                             \
1486     } while (0)
1487  #define CALL_FN_W_7W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
1488                                   arg7)                            \
1489     do {                                                           \
1490        volatile OrigFn        _orig = (orig);                      \
1491        volatile unsigned long _argvec[8];                          \
1492        volatile unsigned long _res;                                \
1493        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1494        _argvec[1] = (unsigned long)arg1;                           \
1495        _argvec[2] = (unsigned long)arg2;                           \
1496        _argvec[3] = (unsigned long)arg3;                           \
1497        _argvec[4] = (unsigned long)arg4;                           \
1498        _argvec[5] = (unsigned long)arg5;                           \
1499        _argvec[6] = (unsigned long)arg6;                           \
1500        _argvec[7] = (unsigned long)arg7;                           \
1501        __asm__ volatile(                                           \
1502           "mr 11,%1\n\t"                                           \
1503           "lwz 3,4(11)\n\t"   &bsol;* arg1->r3 */                       \
1504           "lwz 4,8(11)\n\t"                                        \
1505           "lwz 5,12(11)\n\t"                                       \
1506           "lwz 6,16(11)\n\t"  &bsol;* arg4->r6 */                       \
1507           "lwz 7,20(11)\n\t"                                       \
1508           "lwz 8,24(11)\n\t"                                       \
1509           "lwz 9,28(11)\n\t"                                       \
1510           "lwz 11,0(11)\n\t"  &bsol;* target->r11 */                    \
1511           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1512           "mr %0,3"                                                \
1513           : &bsol;*out*/   "=r" (_res)                                  \
1514           : &bsol;*in*/    "r" (&_argvec[0])                            \
1515           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1516        );                                                          \
1517        lval = (__typeof__(lval)) _res;                             \
1518     } while (0)
1519  #define CALL_FN_W_8W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
1520                                   arg7,arg8)                       \
1521     do {                                                           \
1522        volatile OrigFn        _orig = (orig);                      \
1523        volatile unsigned long _argvec[9];                          \
1524        volatile unsigned long _res;                                \
1525        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1526        _argvec[1] = (unsigned long)arg1;                           \
1527        _argvec[2] = (unsigned long)arg2;                           \
1528        _argvec[3] = (unsigned long)arg3;                           \
1529        _argvec[4] = (unsigned long)arg4;                           \
1530        _argvec[5] = (unsigned long)arg5;                           \
1531        _argvec[6] = (unsigned long)arg6;                           \
1532        _argvec[7] = (unsigned long)arg7;                           \
1533        _argvec[8] = (unsigned long)arg8;                           \
1534        __asm__ volatile(                                           \
1535           "mr 11,%1\n\t"                                           \
1536           "lwz 3,4(11)\n\t"   &bsol;* arg1->r3 */                       \
1537           "lwz 4,8(11)\n\t"                                        \
1538           "lwz 5,12(11)\n\t"                                       \
1539           "lwz 6,16(11)\n\t"  &bsol;* arg4->r6 */                       \
1540           "lwz 7,20(11)\n\t"                                       \
1541           "lwz 8,24(11)\n\t"                                       \
1542           "lwz 9,28(11)\n\t"                                       \
1543           "lwz 10,32(11)\n\t" &bsol;* arg8->r10 */                      \
1544           "lwz 11,0(11)\n\t"  &bsol;* target->r11 */                    \
1545           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1546           "mr %0,3"                                                \
1547           : &bsol;*out*/   "=r" (_res)                                  \
1548           : &bsol;*in*/    "r" (&_argvec[0])                            \
1549           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1550        );                                                          \
1551        lval = (__typeof__(lval)) _res;                             \
1552     } while (0)
1553  #define CALL_FN_W_9W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
1554                                   arg7,arg8,arg9)                  \
1555     do {                                                           \
1556        volatile OrigFn        _orig = (orig);                      \
1557        volatile unsigned long _argvec[10];                         \
1558        volatile unsigned long _res;                                \
1559        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1560        _argvec[1] = (unsigned long)arg1;                           \
1561        _argvec[2] = (unsigned long)arg2;                           \
1562        _argvec[3] = (unsigned long)arg3;                           \
1563        _argvec[4] = (unsigned long)arg4;                           \
1564        _argvec[5] = (unsigned long)arg5;                           \
1565        _argvec[6] = (unsigned long)arg6;                           \
1566        _argvec[7] = (unsigned long)arg7;                           \
1567        _argvec[8] = (unsigned long)arg8;                           \
1568        _argvec[9] = (unsigned long)arg9;                           \
1569        __asm__ volatile(                                           \
1570           "mr 11,%1\n\t"                                           \
1571           "addi 1,1,-16\n\t"                                       \
1572                                                          \
1573           "lwz 3,36(11)\n\t"                                       \
1574           "stw 3,8(1)\n\t"                                         \
1575                                                       \
1576           "lwz 3,4(11)\n\t"   &bsol;* arg1->r3 */                       \
1577           "lwz 4,8(11)\n\t"                                        \
1578           "lwz 5,12(11)\n\t"                                       \
1579           "lwz 6,16(11)\n\t"  &bsol;* arg4->r6 */                       \
1580           "lwz 7,20(11)\n\t"                                       \
1581           "lwz 8,24(11)\n\t"                                       \
1582           "lwz 9,28(11)\n\t"                                       \
1583           "lwz 10,32(11)\n\t" &bsol;* arg8->r10 */                      \
1584           "lwz 11,0(11)\n\t"  &bsol;* target->r11 */                    \
1585           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1586           "addi 1,1,16\n\t"                                        \
1587           "mr %0,3"                                                \
1588           : &bsol;*out*/   "=r" (_res)                                  \
1589           : &bsol;*in*/    "r" (&_argvec[0])                            \
1590           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1591        );                                                          \
1592        lval = (__typeof__(lval)) _res;                             \
1593     } while (0)
1594  #define CALL_FN_W_10W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
1595                                    arg7,arg8,arg9,arg10)           \
1596     do {                                                           \
1597        volatile OrigFn        _orig = (orig);                      \
1598        volatile unsigned long _argvec[11];                         \
1599        volatile unsigned long _res;                                \
1600        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1601        _argvec[1] = (unsigned long)arg1;                           \
1602        _argvec[2] = (unsigned long)arg2;                           \
1603        _argvec[3] = (unsigned long)arg3;                           \
1604        _argvec[4] = (unsigned long)arg4;                           \
1605        _argvec[5] = (unsigned long)arg5;                           \
1606        _argvec[6] = (unsigned long)arg6;                           \
1607        _argvec[7] = (unsigned long)arg7;                           \
1608        _argvec[8] = (unsigned long)arg8;                           \
1609        _argvec[9] = (unsigned long)arg9;                           \
1610        _argvec[10] = (unsigned long)arg10;                         \
1611        __asm__ volatile(                                           \
1612           "mr 11,%1\n\t"                                           \
1613           "addi 1,1,-16\n\t"                                       \
1614                                                         \
1615           "lwz 3,40(11)\n\t"                                       \
1616           "stw 3,12(1)\n\t"                                        \
1617                                                          \
1618           "lwz 3,36(11)\n\t"                                       \
1619           "stw 3,8(1)\n\t"                                         \
1620                                                       \
1621           "lwz 3,4(11)\n\t"   &bsol;* arg1->r3 */                       \
1622           "lwz 4,8(11)\n\t"                                        \
1623           "lwz 5,12(11)\n\t"                                       \
1624           "lwz 6,16(11)\n\t"  &bsol;* arg4->r6 */                       \
1625           "lwz 7,20(11)\n\t"                                       \
1626           "lwz 8,24(11)\n\t"                                       \
1627           "lwz 9,28(11)\n\t"                                       \
1628           "lwz 10,32(11)\n\t" &bsol;* arg8->r10 */                      \
1629           "lwz 11,0(11)\n\t"  &bsol;* target->r11 */                    \
1630           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1631           "addi 1,1,16\n\t"                                        \
1632           "mr %0,3"                                                \
1633           : &bsol;*out*/   "=r" (_res)                                  \
1634           : &bsol;*in*/    "r" (&_argvec[0])                            \
1635           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1636        );                                                          \
1637        lval = (__typeof__(lval)) _res;                             \
1638     } while (0)
1639  #define CALL_FN_W_11W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
1640                                    arg7,arg8,arg9,arg10,arg11)     \
1641     do {                                                           \
1642        volatile OrigFn        _orig = (orig);                      \
1643        volatile unsigned long _argvec[12];                         \
1644        volatile unsigned long _res;                                \
1645        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1646        _argvec[1] = (unsigned long)arg1;                           \
1647        _argvec[2] = (unsigned long)arg2;                           \
1648        _argvec[3] = (unsigned long)arg3;                           \
1649        _argvec[4] = (unsigned long)arg4;                           \
1650        _argvec[5] = (unsigned long)arg5;                           \
1651        _argvec[6] = (unsigned long)arg6;                           \
1652        _argvec[7] = (unsigned long)arg7;                           \
1653        _argvec[8] = (unsigned long)arg8;                           \
1654        _argvec[9] = (unsigned long)arg9;                           \
1655        _argvec[10] = (unsigned long)arg10;                         \
1656        _argvec[11] = (unsigned long)arg11;                         \
1657        __asm__ volatile(                                           \
1658           "mr 11,%1\n\t"                                           \
1659           "addi 1,1,-32\n\t"                                       \
1660                                                         \
1661           "lwz 3,44(11)\n\t"                                       \
1662           "stw 3,16(1)\n\t"                                        \
1663                                                         \
1664           "lwz 3,40(11)\n\t"                                       \
1665           "stw 3,12(1)\n\t"                                        \
1666                                                          \
1667           "lwz 3,36(11)\n\t"                                       \
1668           "stw 3,8(1)\n\t"                                         \
1669                                                       \
1670           "lwz 3,4(11)\n\t"   &bsol;* arg1->r3 */                       \
1671           "lwz 4,8(11)\n\t"                                        \
1672           "lwz 5,12(11)\n\t"                                       \
1673           "lwz 6,16(11)\n\t"  &bsol;* arg4->r6 */                       \
1674           "lwz 7,20(11)\n\t"                                       \
1675           "lwz 8,24(11)\n\t"                                       \
1676           "lwz 9,28(11)\n\t"                                       \
1677           "lwz 10,32(11)\n\t" &bsol;* arg8->r10 */                      \
1678           "lwz 11,0(11)\n\t"  &bsol;* target->r11 */                    \
1679           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1680           "addi 1,1,32\n\t"                                        \
1681           "mr %0,3"                                                \
1682           : &bsol;*out*/   "=r" (_res)                                  \
1683           : &bsol;*in*/    "r" (&_argvec[0])                            \
1684           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1685        );                                                          \
1686        lval = (__typeof__(lval)) _res;                             \
1687     } while (0)
1688  #define CALL_FN_W_12W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
1689                                  arg7,arg8,arg9,arg10,arg11,arg12) \
1690     do {                                                           \
1691        volatile OrigFn        _orig = (orig);                      \
1692        volatile unsigned long _argvec[13];                         \
1693        volatile unsigned long _res;                                \
1694        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1695        _argvec[1] = (unsigned long)arg1;                           \
1696        _argvec[2] = (unsigned long)arg2;                           \
1697        _argvec[3] = (unsigned long)arg3;                           \
1698        _argvec[4] = (unsigned long)arg4;                           \
1699        _argvec[5] = (unsigned long)arg5;                           \
1700        _argvec[6] = (unsigned long)arg6;                           \
1701        _argvec[7] = (unsigned long)arg7;                           \
1702        _argvec[8] = (unsigned long)arg8;                           \
1703        _argvec[9] = (unsigned long)arg9;                           \
1704        _argvec[10] = (unsigned long)arg10;                         \
1705        _argvec[11] = (unsigned long)arg11;                         \
1706        _argvec[12] = (unsigned long)arg12;                         \
1707        __asm__ volatile(                                           \
1708           "mr 11,%1\n\t"                                           \
1709           "addi 1,1,-32\n\t"                                       \
1710                                                         \
1711           "lwz 3,48(11)\n\t"                                       \
1712           "stw 3,20(1)\n\t"                                        \
1713                                                         \
1714           "lwz 3,44(11)\n\t"                                       \
1715           "stw 3,16(1)\n\t"                                        \
1716                                                         \
1717           "lwz 3,40(11)\n\t"                                       \
1718           "stw 3,12(1)\n\t"                                        \
1719                                                          \
1720           "lwz 3,36(11)\n\t"                                       \
1721           "stw 3,8(1)\n\t"                                         \
1722                                                       \
1723           "lwz 3,4(11)\n\t"   &bsol;* arg1->r3 */                       \
1724           "lwz 4,8(11)\n\t"                                        \
1725           "lwz 5,12(11)\n\t"                                       \
1726           "lwz 6,16(11)\n\t"  &bsol;* arg4->r6 */                       \
1727           "lwz 7,20(11)\n\t"                                       \
1728           "lwz 8,24(11)\n\t"                                       \
1729           "lwz 9,28(11)\n\t"                                       \
1730           "lwz 10,32(11)\n\t" &bsol;* arg8->r10 */                      \
1731           "lwz 11,0(11)\n\t"  &bsol;* target->r11 */                    \
1732           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1733           "addi 1,1,32\n\t"                                        \
1734           "mr %0,3"                                                \
1735           : &bsol;*out*/   "=r" (_res)                                  \
1736           : &bsol;*in*/    "r" (&_argvec[0])                            \
1737           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1738        );                                                          \
1739        lval = (__typeof__(lval)) _res;                             \
1740     } while (0)
1741  #endif &bsol;* PLAT_ppc32_linux */
1742  #if defined(PLAT_ppc64_linux)
1743  #define __CALLER_SAVED_REGS                                       \
1744     "lr", "ctr", "xer",                                            \
1745     "cr0", "cr1", "cr2", "cr3", "cr4", "cr5", "cr6", "cr7",        \
1746     "r0", "r2", "r3", "r4", "r5", "r6", "r7", "r8", "r9", "r10",   \
1747     "r11", "r12", "r13"
1748  #define CALL_FN_W_v(lval, orig)                                   \
1749     do {                                                           \
1750        volatile OrigFn        _orig = (orig);                      \
1751        volatile unsigned long _argvec[3+0];                        \
1752        volatile unsigned long _res;                                \
1753                   \
1754        _argvec[1] = (unsigned long)_orig.r2;                       \
1755        _argvec[2] = (unsigned long)_orig.nraddr;                   \
1756        __asm__ volatile(                                           \
1757           "mr 11,%1\n\t"                                           \
1758           "std 2,-16(11)\n\t"  &bsol;* save tocptr */                   \
1759           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
1760           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
1761           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1762           "mr 11,%1\n\t"                                           \
1763           "mr %0,3\n\t"                                            \
1764           "ld 2,-16(11)" &bsol;* restore tocptr */                      \
1765           : &bsol;*out*/   "=r" (_res)                                  \
1766           : &bsol;*in*/    "r" (&_argvec[2])                            \
1767           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1768        );                                                          \
1769        lval = (__typeof__(lval)) _res;                             \
1770     } while (0)
1771  #define CALL_FN_W_W(lval, orig, arg1)                             \
1772     do {                                                           \
1773        volatile OrigFn        _orig = (orig);                      \
1774        volatile unsigned long _argvec[3+1];                        \
1775        volatile unsigned long _res;                                \
1776                   \
1777        _argvec[1]   = (unsigned long)_orig.r2;                     \
1778        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
1779        _argvec[2+1] = (unsigned long)arg1;                         \
1780        __asm__ volatile(                                           \
1781           "mr 11,%1\n\t"                                           \
1782           "std 2,-16(11)\n\t"  &bsol;* save tocptr */                   \
1783           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
1784           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
1785           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
1786           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1787           "mr 11,%1\n\t"                                           \
1788           "mr %0,3\n\t"                                            \
1789           "ld 2,-16(11)" &bsol;* restore tocptr */                      \
1790           : &bsol;*out*/   "=r" (_res)                                  \
1791           : &bsol;*in*/    "r" (&_argvec[2])                            \
1792           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1793        );                                                          \
1794        lval = (__typeof__(lval)) _res;                             \
1795     } while (0)
1796  #define CALL_FN_W_WW(lval, orig, arg1,arg2)                       \
1797     do {                                                           \
1798        volatile OrigFn        _orig = (orig);                      \
1799        volatile unsigned long _argvec[3+2];                        \
1800        volatile unsigned long _res;                                \
1801                   \
1802        _argvec[1]   = (unsigned long)_orig.r2;                     \
1803        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
1804        _argvec[2+1] = (unsigned long)arg1;                         \
1805        _argvec[2+2] = (unsigned long)arg2;                         \
1806        __asm__ volatile(                                           \
1807           "mr 11,%1\n\t"                                           \
1808           "std 2,-16(11)\n\t"  &bsol;* save tocptr */                   \
1809           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
1810           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
1811           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
1812           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
1813           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1814           "mr 11,%1\n\t"                                           \
1815           "mr %0,3\n\t"                                            \
1816           "ld 2,-16(11)" &bsol;* restore tocptr */                      \
1817           : &bsol;*out*/   "=r" (_res)                                  \
1818           : &bsol;*in*/    "r" (&_argvec[2])                            \
1819           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1820        );                                                          \
1821        lval = (__typeof__(lval)) _res;                             \
1822     } while (0)
1823  #define CALL_FN_W_WWW(lval, orig, arg1,arg2,arg3)                 \
1824     do {                                                           \
1825        volatile OrigFn        _orig = (orig);                      \
1826        volatile unsigned long _argvec[3+3];                        \
1827        volatile unsigned long _res;                                \
1828                   \
1829        _argvec[1]   = (unsigned long)_orig.r2;                     \
1830        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
1831        _argvec[2+1] = (unsigned long)arg1;                         \
1832        _argvec[2+2] = (unsigned long)arg2;                         \
1833        _argvec[2+3] = (unsigned long)arg3;                         \
1834        __asm__ volatile(                                           \
1835           "mr 11,%1\n\t"                                           \
1836           "std 2,-16(11)\n\t"  &bsol;* save tocptr */                   \
1837           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
1838           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
1839           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
1840           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
1841           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
1842           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1843           "mr 11,%1\n\t"                                           \
1844           "mr %0,3\n\t"                                            \
1845           "ld 2,-16(11)" &bsol;* restore tocptr */                      \
1846           : &bsol;*out*/   "=r" (_res)                                  \
1847           : &bsol;*in*/    "r" (&_argvec[2])                            \
1848           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1849        );                                                          \
1850        lval = (__typeof__(lval)) _res;                             \
1851     } while (0)
1852  #define CALL_FN_W_WWWW(lval, orig, arg1,arg2,arg3,arg4)           \
1853     do {                                                           \
1854        volatile OrigFn        _orig = (orig);                      \
1855        volatile unsigned long _argvec[3+4];                        \
1856        volatile unsigned long _res;                                \
1857                   \
1858        _argvec[1]   = (unsigned long)_orig.r2;                     \
1859        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
1860        _argvec[2+1] = (unsigned long)arg1;                         \
1861        _argvec[2+2] = (unsigned long)arg2;                         \
1862        _argvec[2+3] = (unsigned long)arg3;                         \
1863        _argvec[2+4] = (unsigned long)arg4;                         \
1864        __asm__ volatile(                                           \
1865           "mr 11,%1\n\t"                                           \
1866           "std 2,-16(11)\n\t"  &bsol;* save tocptr */                   \
1867           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
1868           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
1869           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
1870           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
1871           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
1872           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
1873           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1874           "mr 11,%1\n\t"                                           \
1875           "mr %0,3\n\t"                                            \
1876           "ld 2,-16(11)" &bsol;* restore tocptr */                      \
1877           : &bsol;*out*/   "=r" (_res)                                  \
1878           : &bsol;*in*/    "r" (&_argvec[2])                            \
1879           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1880        );                                                          \
1881        lval = (__typeof__(lval)) _res;                             \
1882     } while (0)
1883  #define CALL_FN_W_5W(lval, orig, arg1,arg2,arg3,arg4,arg5)        \
1884     do {                                                           \
1885        volatile OrigFn        _orig = (orig);                      \
1886        volatile unsigned long _argvec[3+5];                        \
1887        volatile unsigned long _res;                                \
1888                   \
1889        _argvec[1]   = (unsigned long)_orig.r2;                     \
1890        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
1891        _argvec[2+1] = (unsigned long)arg1;                         \
1892        _argvec[2+2] = (unsigned long)arg2;                         \
1893        _argvec[2+3] = (unsigned long)arg3;                         \
1894        _argvec[2+4] = (unsigned long)arg4;                         \
1895        _argvec[2+5] = (unsigned long)arg5;                         \
1896        __asm__ volatile(                                           \
1897           "mr 11,%1\n\t"                                           \
1898           "std 2,-16(11)\n\t"  &bsol;* save tocptr */                   \
1899           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
1900           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
1901           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
1902           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
1903           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
1904           "ld   7, 40(11)\n\t" &bsol;* arg5->r7 */                      \
1905           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
1906           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1907           "mr 11,%1\n\t"                                           \
1908           "mr %0,3\n\t"                                            \
1909           "ld 2,-16(11)" &bsol;* restore tocptr */                      \
1910           : &bsol;*out*/   "=r" (_res)                                  \
1911           : &bsol;*in*/    "r" (&_argvec[2])                            \
1912           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1913        );                                                          \
1914        lval = (__typeof__(lval)) _res;                             \
1915     } while (0)
1916  #define CALL_FN_W_6W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6)   \
1917     do {                                                           \
1918        volatile OrigFn        _orig = (orig);                      \
1919        volatile unsigned long _argvec[3+6];                        \
1920        volatile unsigned long _res;                                \
1921                   \
1922        _argvec[1]   = (unsigned long)_orig.r2;                     \
1923        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
1924        _argvec[2+1] = (unsigned long)arg1;                         \
1925        _argvec[2+2] = (unsigned long)arg2;                         \
1926        _argvec[2+3] = (unsigned long)arg3;                         \
1927        _argvec[2+4] = (unsigned long)arg4;                         \
1928        _argvec[2+5] = (unsigned long)arg5;                         \
1929        _argvec[2+6] = (unsigned long)arg6;                         \
1930        __asm__ volatile(                                           \
1931           "mr 11,%1\n\t"                                           \
1932           "std 2,-16(11)\n\t"  &bsol;* save tocptr */                   \
1933           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
1934           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
1935           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
1936           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
1937           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
1938           "ld   7, 40(11)\n\t" &bsol;* arg5->r7 */                      \
1939           "ld   8, 48(11)\n\t" &bsol;* arg6->r8 */                      \
1940           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
1941           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1942           "mr 11,%1\n\t"                                           \
1943           "mr %0,3\n\t"                                            \
1944           "ld 2,-16(11)" &bsol;* restore tocptr */                      \
1945           : &bsol;*out*/   "=r" (_res)                                  \
1946           : &bsol;*in*/    "r" (&_argvec[2])                            \
1947           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1948        );                                                          \
1949        lval = (__typeof__(lval)) _res;                             \
1950     } while (0)
1951  #define CALL_FN_W_7W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
1952                                   arg7)                            \
1953     do {                                                           \
1954        volatile OrigFn        _orig = (orig);                      \
1955        volatile unsigned long _argvec[3+7];                        \
1956        volatile unsigned long _res;                                \
1957                   \
1958        _argvec[1]   = (unsigned long)_orig.r2;                     \
1959        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
1960        _argvec[2+1] = (unsigned long)arg1;                         \
1961        _argvec[2+2] = (unsigned long)arg2;                         \
1962        _argvec[2+3] = (unsigned long)arg3;                         \
1963        _argvec[2+4] = (unsigned long)arg4;                         \
1964        _argvec[2+5] = (unsigned long)arg5;                         \
1965        _argvec[2+6] = (unsigned long)arg6;                         \
1966        _argvec[2+7] = (unsigned long)arg7;                         \
1967        __asm__ volatile(                                           \
1968           "mr 11,%1\n\t"                                           \
1969           "std 2,-16(11)\n\t"  &bsol;* save tocptr */                   \
1970           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
1971           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
1972           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
1973           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
1974           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
1975           "ld   7, 40(11)\n\t" &bsol;* arg5->r7 */                      \
1976           "ld   8, 48(11)\n\t" &bsol;* arg6->r8 */                      \
1977           "ld   9, 56(11)\n\t" &bsol;* arg7->r9 */                      \
1978           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
1979           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1980           "mr 11,%1\n\t"                                           \
1981           "mr %0,3\n\t"                                            \
1982           "ld 2,-16(11)" &bsol;* restore tocptr */                      \
1983           : &bsol;*out*/   "=r" (_res)                                  \
1984           : &bsol;*in*/    "r" (&_argvec[2])                            \
1985           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1986        );                                                          \
1987        lval = (__typeof__(lval)) _res;                             \
1988     } while (0)
1989  #define CALL_FN_W_8W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
1990                                   arg7,arg8)                       \
1991     do {                                                           \
1992        volatile OrigFn        _orig = (orig);                      \
1993        volatile unsigned long _argvec[3+8];                        \
1994        volatile unsigned long _res;                                \
1995                   \
1996        _argvec[1]   = (unsigned long)_orig.r2;                     \
1997        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
1998        _argvec[2+1] = (unsigned long)arg1;                         \
1999        _argvec[2+2] = (unsigned long)arg2;                         \
2000        _argvec[2+3] = (unsigned long)arg3;                         \
2001        _argvec[2+4] = (unsigned long)arg4;                         \
2002        _argvec[2+5] = (unsigned long)arg5;                         \
2003        _argvec[2+6] = (unsigned long)arg6;                         \
2004        _argvec[2+7] = (unsigned long)arg7;                         \
2005        _argvec[2+8] = (unsigned long)arg8;                         \
2006        __asm__ volatile(                                           \
2007           "mr 11,%1\n\t"                                           \
2008           "std 2,-16(11)\n\t"  &bsol;* save tocptr */                   \
2009           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
2010           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
2011           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
2012           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
2013           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
2014           "ld   7, 40(11)\n\t" &bsol;* arg5->r7 */                      \
2015           "ld   8, 48(11)\n\t" &bsol;* arg6->r8 */                      \
2016           "ld   9, 56(11)\n\t" &bsol;* arg7->r9 */                      \
2017           "ld  10, 64(11)\n\t" &bsol;* arg8->r10 */                     \
2018           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
2019           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
2020           "mr 11,%1\n\t"                                           \
2021           "mr %0,3\n\t"                                            \
2022           "ld 2,-16(11)" &bsol;* restore tocptr */                      \
2023           : &bsol;*out*/   "=r" (_res)                                  \
2024           : &bsol;*in*/    "r" (&_argvec[2])                            \
2025           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2026        );                                                          \
2027        lval = (__typeof__(lval)) _res;                             \
2028     } while (0)
2029  #define CALL_FN_W_9W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
2030                                   arg7,arg8,arg9)                  \
2031     do {                                                           \
2032        volatile OrigFn        _orig = (orig);                      \
2033        volatile unsigned long _argvec[3+9];                        \
2034        volatile unsigned long _res;                                \
2035                   \
2036        _argvec[1]   = (unsigned long)_orig.r2;                     \
2037        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
2038        _argvec[2+1] = (unsigned long)arg1;                         \
2039        _argvec[2+2] = (unsigned long)arg2;                         \
2040        _argvec[2+3] = (unsigned long)arg3;                         \
2041        _argvec[2+4] = (unsigned long)arg4;                         \
2042        _argvec[2+5] = (unsigned long)arg5;                         \
2043        _argvec[2+6] = (unsigned long)arg6;                         \
2044        _argvec[2+7] = (unsigned long)arg7;                         \
2045        _argvec[2+8] = (unsigned long)arg8;                         \
2046        _argvec[2+9] = (unsigned long)arg9;                         \
2047        __asm__ volatile(                                           \
2048           "mr 11,%1\n\t"                                           \
2049           "std 2,-16(11)\n\t"  &bsol;* save tocptr */                   \
2050           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
2051           "addi 1,1,-128\n\t"  &bsol;* expand stack frame */            \
2052                                                          \
2053           "ld  3,72(11)\n\t"                                       \
2054           "std 3,112(1)\n\t"                                       \
2055                                                       \
2056           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
2057           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
2058           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
2059           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
2060           "ld   7, 40(11)\n\t" &bsol;* arg5->r7 */                      \
2061           "ld   8, 48(11)\n\t" &bsol;* arg6->r8 */                      \
2062           "ld   9, 56(11)\n\t" &bsol;* arg7->r9 */                      \
2063           "ld  10, 64(11)\n\t" &bsol;* arg8->r10 */                     \
2064           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
2065           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
2066           "mr 11,%1\n\t"                                           \
2067           "mr %0,3\n\t"                                            \
2068           "ld 2,-16(11)\n\t" &bsol;* restore tocptr */                  \
2069           "addi 1,1,128"     &bsol;* restore frame */                   \
2070           : &bsol;*out*/   "=r" (_res)                                  \
2071           : &bsol;*in*/    "r" (&_argvec[2])                            \
2072           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2073        );                                                          \
2074        lval = (__typeof__(lval)) _res;                             \
2075     } while (0)
2076  #define CALL_FN_W_10W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
2077                                    arg7,arg8,arg9,arg10)           \
2078     do {                                                           \
2079        volatile OrigFn        _orig = (orig);                      \
2080        volatile unsigned long _argvec[3+10];                       \
2081        volatile unsigned long _res;                                \
2082                   \
2083        _argvec[1]   = (unsigned long)_orig.r2;                     \
2084        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
2085        _argvec[2+1] = (unsigned long)arg1;                         \
2086        _argvec[2+2] = (unsigned long)arg2;                         \
2087        _argvec[2+3] = (unsigned long)arg3;                         \
2088        _argvec[2+4] = (unsigned long)arg4;                         \
2089        _argvec[2+5] = (unsigned long)arg5;                         \
2090        _argvec[2+6] = (unsigned long)arg6;                         \
2091        _argvec[2+7] = (unsigned long)arg7;                         \
2092        _argvec[2+8] = (unsigned long)arg8;                         \
2093        _argvec[2+9] = (unsigned long)arg9;                         \
2094        _argvec[2+10] = (unsigned long)arg10;                       \
2095        __asm__ volatile(                                           \
2096           "mr 11,%1\n\t"                                           \
2097           "std 2,-16(11)\n\t"  &bsol;* save tocptr */                   \
2098           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
2099           "addi 1,1,-128\n\t"  &bsol;* expand stack frame */            \
2100                                                         \
2101           "ld  3,80(11)\n\t"                                       \
2102           "std 3,120(1)\n\t"                                       \
2103                                                          \
2104           "ld  3,72(11)\n\t"                                       \
2105           "std 3,112(1)\n\t"                                       \
2106                                                       \
2107           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
2108           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
2109           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
2110           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
2111           "ld   7, 40(11)\n\t" &bsol;* arg5->r7 */                      \
2112           "ld   8, 48(11)\n\t" &bsol;* arg6->r8 */                      \
2113           "ld   9, 56(11)\n\t" &bsol;* arg7->r9 */                      \
2114           "ld  10, 64(11)\n\t" &bsol;* arg8->r10 */                     \
2115           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
2116           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
2117           "mr 11,%1\n\t"                                           \
2118           "mr %0,3\n\t"                                            \
2119           "ld 2,-16(11)\n\t" &bsol;* restore tocptr */                  \
2120           "addi 1,1,128"     &bsol;* restore frame */                   \
2121           : &bsol;*out*/   "=r" (_res)                                  \
2122           : &bsol;*in*/    "r" (&_argvec[2])                            \
2123           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2124        );                                                          \
2125        lval = (__typeof__(lval)) _res;                             \
2126     } while (0)
2127  #define CALL_FN_W_11W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
2128                                    arg7,arg8,arg9,arg10,arg11)     \
2129     do {                                                           \
2130        volatile OrigFn        _orig = (orig);                      \
2131        volatile unsigned long _argvec[3+11];                       \
2132        volatile unsigned long _res;                                \
2133                   \
2134        _argvec[1]   = (unsigned long)_orig.r2;                     \
2135        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
2136        _argvec[2+1] = (unsigned long)arg1;                         \
2137        _argvec[2+2] = (unsigned long)arg2;                         \
2138        _argvec[2+3] = (unsigned long)arg3;                         \
2139        _argvec[2+4] = (unsigned long)arg4;                         \
2140        _argvec[2+5] = (unsigned long)arg5;                         \
2141        _argvec[2+6] = (unsigned long)arg6;                         \
2142        _argvec[2+7] = (unsigned long)arg7;                         \
2143        _argvec[2+8] = (unsigned long)arg8;                         \
2144        _argvec[2+9] = (unsigned long)arg9;                         \
2145        _argvec[2+10] = (unsigned long)arg10;                       \
2146        _argvec[2+11] = (unsigned long)arg11;                       \
2147        __asm__ volatile(                                           \
2148           "mr 11,%1\n\t"                                           \
2149           "std 2,-16(11)\n\t"  &bsol;* save tocptr */                   \
2150           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
2151           "addi 1,1,-144\n\t"  &bsol;* expand stack frame */            \
2152                                                         \
2153           "ld  3,88(11)\n\t"                                       \
2154           "std 3,128(1)\n\t"                                       \
2155                                                         \
2156           "ld  3,80(11)\n\t"                                       \
2157           "std 3,120(1)\n\t"                                       \
2158                                                          \
2159           "ld  3,72(11)\n\t"                                       \
2160           "std 3,112(1)\n\t"                                       \
2161                                                       \
2162           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
2163           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
2164           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
2165           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
2166           "ld   7, 40(11)\n\t" &bsol;* arg5->r7 */                      \
2167           "ld   8, 48(11)\n\t" &bsol;* arg6->r8 */                      \
2168           "ld   9, 56(11)\n\t" &bsol;* arg7->r9 */                      \
2169           "ld  10, 64(11)\n\t" &bsol;* arg8->r10 */                     \
2170           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
2171           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
2172           "mr 11,%1\n\t"                                           \
2173           "mr %0,3\n\t"                                            \
2174           "ld 2,-16(11)\n\t" &bsol;* restore tocptr */                  \
2175           "addi 1,1,144"     &bsol;* restore frame */                   \
2176           : &bsol;*out*/   "=r" (_res)                                  \
2177           : &bsol;*in*/    "r" (&_argvec[2])                            \
2178           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2179        );                                                          \
2180        lval = (__typeof__(lval)) _res;                             \
2181     } while (0)
2182  #define CALL_FN_W_12W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
2183                                  arg7,arg8,arg9,arg10,arg11,arg12) \
2184     do {                                                           \
2185        volatile OrigFn        _orig = (orig);                      \
2186        volatile unsigned long _argvec[3+12];                       \
2187        volatile unsigned long _res;                                \
2188                   \
2189        _argvec[1]   = (unsigned long)_orig.r2;                     \
2190        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
2191        _argvec[2+1] = (unsigned long)arg1;                         \
2192        _argvec[2+2] = (unsigned long)arg2;                         \
2193        _argvec[2+3] = (unsigned long)arg3;                         \
2194        _argvec[2+4] = (unsigned long)arg4;                         \
2195        _argvec[2+5] = (unsigned long)arg5;                         \
2196        _argvec[2+6] = (unsigned long)arg6;                         \
2197        _argvec[2+7] = (unsigned long)arg7;                         \
2198        _argvec[2+8] = (unsigned long)arg8;                         \
2199        _argvec[2+9] = (unsigned long)arg9;                         \
2200        _argvec[2+10] = (unsigned long)arg10;                       \
2201        _argvec[2+11] = (unsigned long)arg11;                       \
2202        _argvec[2+12] = (unsigned long)arg12;                       \
2203        __asm__ volatile(                                           \
2204           "mr 11,%1\n\t"                                           \
2205           "std 2,-16(11)\n\t"  &bsol;* save tocptr */                   \
2206           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
2207           "addi 1,1,-144\n\t"  &bsol;* expand stack frame */            \
2208                                                         \
2209           "ld  3,96(11)\n\t"                                       \
2210           "std 3,136(1)\n\t"                                       \
2211                                                         \
2212           "ld  3,88(11)\n\t"                                       \
2213           "std 3,128(1)\n\t"                                       \
2214                                                         \
2215           "ld  3,80(11)\n\t"                                       \
2216           "std 3,120(1)\n\t"                                       \
2217                                                          \
2218           "ld  3,72(11)\n\t"                                       \
2219           "std 3,112(1)\n\t"                                       \
2220                                                       \
2221           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
2222           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
2223           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
2224           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
2225           "ld   7, 40(11)\n\t" &bsol;* arg5->r7 */                      \
2226           "ld   8, 48(11)\n\t" &bsol;* arg6->r8 */                      \
2227           "ld   9, 56(11)\n\t" &bsol;* arg7->r9 */                      \
2228           "ld  10, 64(11)\n\t" &bsol;* arg8->r10 */                     \
2229           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
2230           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
2231           "mr 11,%1\n\t"                                           \
2232           "mr %0,3\n\t"                                            \
2233           "ld 2,-16(11)\n\t" &bsol;* restore tocptr */                  \
2234           "addi 1,1,144"     &bsol;* restore frame */                   \
2235           : &bsol;*out*/   "=r" (_res)                                  \
2236           : &bsol;*in*/    "r" (&_argvec[2])                            \
2237           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2238        );                                                          \
2239        lval = (__typeof__(lval)) _res;                             \
2240     } while (0)
2241  #endif &bsol;* PLAT_ppc64_linux */
2242  #if defined(PLAT_arm_linux)
2243  #define __CALLER_SAVED_REGS "r0", "r1", "r2", "r3","r4","r14"
2244  #define CALL_FN_W_v(lval, orig)                                   \
2245     do {                                                           \
2246        volatile OrigFn        _orig = (orig);                      \
2247        volatile unsigned long _argvec[1];                          \
2248        volatile unsigned long _res;                                \
2249        _argvec[0] = (unsigned long)_orig.nraddr;                   \
2250        __asm__ volatile(                                           \
2251           "ldr r4, [%1] \n\t"  &bsol;* target->r4 */                    \
2252           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R4                   \
2253           "mov %0, r0\n"                                           \
2254           : &bsol;*out*/   "=r" (_res)                                  \
2255           : &bsol;*in*/    "0" (&_argvec[0])                            \
2256           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2257        );                                                          \
2258        lval = (__typeof__(lval)) _res;                             \
2259     } while (0)
2260  #define CALL_FN_W_W(lval, orig, arg1)                             \
2261     do {                                                           \
2262        volatile OrigFn        _orig = (orig);                      \
2263        volatile unsigned long _argvec[2];                          \
2264        volatile unsigned long _res;                                \
2265        _argvec[0] = (unsigned long)_orig.nraddr;                   \
2266        _argvec[1] = (unsigned long)(arg1);                         \
2267        __asm__ volatile(                                           \
2268           "ldr r0, [%1, #4] \n\t"                                  \
2269           "ldr r4, [%1] \n\t"  &bsol;* target->r4 */                    \
2270           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R4                   \
2271           "mov %0, r0\n"                                           \
2272           : &bsol;*out*/   "=r" (_res)                                  \
2273           : &bsol;*in*/    "0" (&_argvec[0])                            \
2274           : &bsol;*trash*/ "cc", "memory",  __CALLER_SAVED_REGS         \
2275        );                                                          \
2276        lval = (__typeof__(lval)) _res;                             \
2277     } while (0)
2278  #define CALL_FN_W_WW(lval, orig, arg1,arg2)                       \
2279     do {                                                           \
2280        volatile OrigFn        _orig = (orig);                      \
2281        volatile unsigned long _argvec[3];                          \
2282        volatile unsigned long _res;                                \
2283        _argvec[0] = (unsigned long)_orig.nraddr;                   \
2284        _argvec[1] = (unsigned long)(arg1);                         \
2285        _argvec[2] = (unsigned long)(arg2);                         \
2286        __asm__ volatile(                                           \
2287           "ldr r0, [%1, #4] \n\t"                                  \
2288           "ldr r1, [%1, #8] \n\t"                                  \
2289           "ldr r4, [%1] \n\t"  &bsol;* target->r4 */                    \
2290           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R4                   \
2291           "mov %0, r0\n"                                           \
2292           : &bsol;*out*/   "=r" (_res)                                  \
2293           : &bsol;*in*/    "0" (&_argvec[0])                            \
2294           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2295        );                                                          \
2296        lval = (__typeof__(lval)) _res;                             \
2297     } while (0)
2298  #define CALL_FN_W_WWW(lval, orig, arg1,arg2,arg3)                 \
2299     do {                                                           \
2300        volatile OrigFn        _orig = (orig);                      \
2301        volatile unsigned long _argvec[4];                          \
2302        volatile unsigned long _res;                                \
2303        _argvec[0] = (unsigned long)_orig.nraddr;                   \
2304        _argvec[1] = (unsigned long)(arg1);                         \
2305        _argvec[2] = (unsigned long)(arg2);                         \
2306        _argvec[3] = (unsigned long)(arg3);                         \
2307        __asm__ volatile(                                           \
2308           "ldr r0, [%1, #4] \n\t"                                  \
2309           "ldr r1, [%1, #8] \n\t"                                  \
2310           "ldr r2, [%1, #12] \n\t"                                 \
2311           "ldr r4, [%1] \n\t"  &bsol;* target->r4 */                    \
2312           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R4                   \
2313           "mov %0, r0\n"                                           \
2314           : &bsol;*out*/   "=r" (_res)                                  \
2315           : &bsol;*in*/    "0" (&_argvec[0])                            \
2316           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2317        );                                                          \
2318        lval = (__typeof__(lval)) _res;                             \
2319     } while (0)
2320  #define CALL_FN_W_WWWW(lval, orig, arg1,arg2,arg3,arg4)           \
2321     do {                                                           \
2322        volatile OrigFn        _orig = (orig);                      \
2323        volatile unsigned long _argvec[5];                          \
2324        volatile unsigned long _res;                                \
2325        _argvec[0] = (unsigned long)_orig.nraddr;                   \
2326        _argvec[1] = (unsigned long)(arg1);                         \
2327        _argvec[2] = (unsigned long)(arg2);                         \
2328        _argvec[3] = (unsigned long)(arg3);                         \
2329        _argvec[4] = (unsigned long)(arg4);                         \
2330        __asm__ volatile(                                           \
2331           "ldr r0, [%1, #4] \n\t"                                  \
2332           "ldr r1, [%1, #8] \n\t"                                  \
2333           "ldr r2, [%1, #12] \n\t"                                 \
2334           "ldr r3, [%1, #16] \n\t"                                 \
2335           "ldr r4, [%1] \n\t"  &bsol;* target->r4 */                    \
2336           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R4                   \
2337           "mov %0, r0"                                             \
2338           : &bsol;*out*/   "=r" (_res)                                  \
2339           : &bsol;*in*/    "0" (&_argvec[0])                            \
2340           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2341        );                                                          \
2342        lval = (__typeof__(lval)) _res;                             \
2343     } while (0)
2344  #define CALL_FN_W_5W(lval, orig, arg1,arg2,arg3,arg4,arg5)        \
2345     do {                                                           \
2346        volatile OrigFn        _orig = (orig);                      \
2347        volatile unsigned long _argvec[6];                          \
2348        volatile unsigned long _res;                                \
2349        _argvec[0] = (unsigned long)_orig.nraddr;                   \
2350        _argvec[1] = (unsigned long)(arg1);                         \
2351        _argvec[2] = (unsigned long)(arg2);                         \
2352        _argvec[3] = (unsigned long)(arg3);                         \
2353        _argvec[4] = (unsigned long)(arg4);                         \
2354        _argvec[5] = (unsigned long)(arg5);                         \
2355        __asm__ volatile(                                           \
2356           "ldr r0, [%1, #20] \n\t"                                 \
2357           "push {r0} \n\t"                                         \
2358           "ldr r0, [%1, #4] \n\t"                                  \
2359           "ldr r1, [%1, #8] \n\t"                                  \
2360           "ldr r2, [%1, #12] \n\t"                                 \
2361           "ldr r3, [%1, #16] \n\t"                                 \
2362           "ldr r4, [%1] \n\t"  &bsol;* target->r4 */                    \
2363           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R4                   \
2364           "add sp, sp, #4 \n\t"                                    \
2365           "mov %0, r0"                                             \
2366           : &bsol;*out*/   "=r" (_res)                                  \
2367           : &bsol;*in*/    "0" (&_argvec[0])                            \
2368           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2369        );                                                          \
2370        lval = (__typeof__(lval)) _res;                             \
2371     } while (0)
2372  #define CALL_FN_W_6W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6)   \
2373     do {                                                           \
2374        volatile OrigFn        _orig = (orig);                      \
2375        volatile unsigned long _argvec[7];                          \
2376        volatile unsigned long _res;                                \
2377        _argvec[0] = (unsigned long)_orig.nraddr;                   \
2378        _argvec[1] = (unsigned long)(arg1);                         \
2379        _argvec[2] = (unsigned long)(arg2);                         \
2380        _argvec[3] = (unsigned long)(arg3);                         \
2381        _argvec[4] = (unsigned long)(arg4);                         \
2382        _argvec[5] = (unsigned long)(arg5);                         \
2383        _argvec[6] = (unsigned long)(arg6);                         \
2384        __asm__ volatile(                                           \
2385           "ldr r0, [%1, #20] \n\t"                                 \
2386           "ldr r1, [%1, #24] \n\t"                                 \
2387           "push {r0, r1} \n\t"                                     \
2388           "ldr r0, [%1, #4] \n\t"                                  \
2389           "ldr r1, [%1, #8] \n\t"                                  \
2390           "ldr r2, [%1, #12] \n\t"                                 \
2391           "ldr r3, [%1, #16] \n\t"                                 \
2392           "ldr r4, [%1] \n\t"  &bsol;* target->r4 */                    \
2393           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R4                   \
2394           "add sp, sp, #8 \n\t"                                    \
2395           "mov %0, r0"                                             \
2396           : &bsol;*out*/   "=r" (_res)                                  \
2397           : &bsol;*in*/    "0" (&_argvec[0])                            \
2398           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2399        );                                                          \
2400        lval = (__typeof__(lval)) _res;                             \
2401     } while (0)
2402  #define CALL_FN_W_7W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
2403                                   arg7)                            \
2404     do {                                                           \
2405        volatile OrigFn        _orig = (orig);                      \
2406        volatile unsigned long _argvec[8];                          \
2407        volatile unsigned long _res;                                \
2408        _argvec[0] = (unsigned long)_orig.nraddr;                   \
2409        _argvec[1] = (unsigned long)(arg1);                         \
2410        _argvec[2] = (unsigned long)(arg2);                         \
2411        _argvec[3] = (unsigned long)(arg3);                         \
2412        _argvec[4] = (unsigned long)(arg4);                         \
2413        _argvec[5] = (unsigned long)(arg5);                         \
2414        _argvec[6] = (unsigned long)(arg6);                         \
2415        _argvec[7] = (unsigned long)(arg7);                         \
2416        __asm__ volatile(                                           \
2417           "ldr r0, [%1, #20] \n\t"                                 \
2418           "ldr r1, [%1, #24] \n\t"                                 \
2419           "ldr r2, [%1, #28] \n\t"                                 \
2420           "push {r0, r1, r2} \n\t"                                 \
2421           "ldr r0, [%1, #4] \n\t"                                  \
2422           "ldr r1, [%1, #8] \n\t"                                  \
2423           "ldr r2, [%1, #12] \n\t"                                 \
2424           "ldr r3, [%1, #16] \n\t"                                 \
2425           "ldr r4, [%1] \n\t"  &bsol;* target->r4 */                    \
2426           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R4                   \
2427           "add sp, sp, #12 \n\t"                                   \
2428           "mov %0, r0"                                             \
2429           : &bsol;*out*/   "=r" (_res)                                  \
2430           : &bsol;*in*/    "0" (&_argvec[0])                            \
2431           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2432        );                                                          \
2433        lval = (__typeof__(lval)) _res;                             \
2434     } while (0)
2435  #define CALL_FN_W_8W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
2436                                   arg7,arg8)                       \
2437     do {                                                           \
2438        volatile OrigFn        _orig = (orig);                      \
2439        volatile unsigned long _argvec[9];                          \
2440        volatile unsigned long _res;                                \
2441        _argvec[0] = (unsigned long)_orig.nraddr;                   \
2442        _argvec[1] = (unsigned long)(arg1);                         \
2443        _argvec[2] = (unsigned long)(arg2);                         \
2444        _argvec[3] = (unsigned long)(arg3);                         \
2445        _argvec[4] = (unsigned long)(arg4);                         \
2446        _argvec[5] = (unsigned long)(arg5);                         \
2447        _argvec[6] = (unsigned long)(arg6);                         \
2448        _argvec[7] = (unsigned long)(arg7);                         \
2449        _argvec[8] = (unsigned long)(arg8);                         \
2450        __asm__ volatile(                                           \
2451           "ldr r0, [%1, #20] \n\t"                                 \
2452           "ldr r1, [%1, #24] \n\t"                                 \
2453           "ldr r2, [%1, #28] \n\t"                                 \
2454           "ldr r3, [%1, #32] \n\t"                                 \
2455           "push {r0, r1, r2, r3} \n\t"                             \
2456           "ldr r0, [%1, #4] \n\t"                                  \
2457           "ldr r1, [%1, #8] \n\t"                                  \
2458           "ldr r2, [%1, #12] \n\t"                                 \
2459           "ldr r3, [%1, #16] \n\t"                                 \
2460           "ldr r4, [%1] \n\t"  &bsol;* target->r4 */                    \
2461           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R4                   \
2462           "add sp, sp, #16 \n\t"                                   \
2463           "mov %0, r0"                                             \
2464           : &bsol;*out*/   "=r" (_res)                                  \
2465           : &bsol;*in*/    "0" (&_argvec[0])                            \
2466           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2467        );                                                          \
2468        lval = (__typeof__(lval)) _res;                             \
2469     } while (0)
2470  #define CALL_FN_W_9W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
2471                                   arg7,arg8,arg9)                  \
2472     do {                                                           \
2473        volatile OrigFn        _orig = (orig);                      \
2474        volatile unsigned long _argvec[10];                         \
2475        volatile unsigned long _res;                                \
2476        _argvec[0] = (unsigned long)_orig.nraddr;                   \
2477        _argvec[1] = (unsigned long)(arg1);                         \
2478        _argvec[2] = (unsigned long)(arg2);                         \
2479        _argvec[3] = (unsigned long)(arg3);                         \
2480        _argvec[4] = (unsigned long)(arg4);                         \
2481        _argvec[5] = (unsigned long)(arg5);                         \
2482        _argvec[6] = (unsigned long)(arg6);                         \
2483        _argvec[7] = (unsigned long)(arg7);                         \
2484        _argvec[8] = (unsigned long)(arg8);                         \
2485        _argvec[9] = (unsigned long)(arg9);                         \
2486        __asm__ volatile(                                           \
2487           "ldr r0, [%1, #20] \n\t"                                 \
2488           "ldr r1, [%1, #24] \n\t"                                 \
2489           "ldr r2, [%1, #28] \n\t"                                 \
2490           "ldr r3, [%1, #32] \n\t"                                 \
2491           "ldr r4, [%1, #36] \n\t"                                 \
2492           "push {r0, r1, r2, r3, r4} \n\t"                         \
2493           "ldr r0, [%1, #4] \n\t"                                  \
2494           "ldr r1, [%1, #8] \n\t"                                  \
2495           "ldr r2, [%1, #12] \n\t"                                 \
2496           "ldr r3, [%1, #16] \n\t"                                 \
2497           "ldr r4, [%1] \n\t"  &bsol;* target->r4 */                    \
2498           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R4                   \
2499           "add sp, sp, #20 \n\t"                                   \
2500           "mov %0, r0"                                             \
2501           : &bsol;*out*/   "=r" (_res)                                  \
2502           : &bsol;*in*/    "0" (&_argvec[0])                            \
2503           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2504        );                                                          \
2505        lval = (__typeof__(lval)) _res;                             \
2506     } while (0)
2507  #define CALL_FN_W_10W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
2508                                    arg7,arg8,arg9,arg10)           \
2509     do {                                                           \
2510        volatile OrigFn        _orig = (orig);                      \
2511        volatile unsigned long _argvec[11];                         \
2512        volatile unsigned long _res;                                \
2513        _argvec[0] = (unsigned long)_orig.nraddr;                   \
2514        _argvec[1] = (unsigned long)(arg1);                         \
2515        _argvec[2] = (unsigned long)(arg2);                         \
2516        _argvec[3] = (unsigned long)(arg3);                         \
2517        _argvec[4] = (unsigned long)(arg4);                         \
2518        _argvec[5] = (unsigned long)(arg5);                         \
2519        _argvec[6] = (unsigned long)(arg6);                         \
2520        _argvec[7] = (unsigned long)(arg7);                         \
2521        _argvec[8] = (unsigned long)(arg8);                         \
2522        _argvec[9] = (unsigned long)(arg9);                         \
2523        _argvec[10] = (unsigned long)(arg10);                       \
2524        __asm__ volatile(                                           \
2525           "ldr r0, [%1, #40] \n\t"                                 \
2526           "push {r0} \n\t"                                         \
2527           "ldr r0, [%1, #20] \n\t"                                 \
2528           "ldr r1, [%1, #24] \n\t"                                 \
2529           "ldr r2, [%1, #28] \n\t"                                 \
2530           "ldr r3, [%1, #32] \n\t"                                 \
2531           "ldr r4, [%1, #36] \n\t"                                 \
2532           "push {r0, r1, r2, r3, r4} \n\t"                         \
2533           "ldr r0, [%1, #4] \n\t"                                  \
2534           "ldr r1, [%1, #8] \n\t"                                  \
2535           "ldr r2, [%1, #12] \n\t"                                 \
2536           "ldr r3, [%1, #16] \n\t"                                 \
2537           "ldr r4, [%1] \n\t"  &bsol;* target->r4 */                    \
2538           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R4                   \
2539           "add sp, sp, #24 \n\t"                                   \
2540           "mov %0, r0"                                             \
2541           : &bsol;*out*/   "=r" (_res)                                  \
2542           : &bsol;*in*/    "0" (&_argvec[0])                            \
2543           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2544        );                                                          \
2545        lval = (__typeof__(lval)) _res;                             \
2546     } while (0)
2547  #define CALL_FN_W_11W(lval, orig, arg1,arg2,arg3,arg4,arg5,       \
2548                                    arg6,arg7,arg8,arg9,arg10,      \
2549                                    arg11)                          \
2550     do {                                                           \
2551        volatile OrigFn        _orig = (orig);                      \
2552        volatile unsigned long _argvec[12];                         \
2553        volatile unsigned long _res;                                \
2554        _argvec[0] = (unsigned long)_orig.nraddr;                   \
2555        _argvec[1] = (unsigned long)(arg1);                         \
2556        _argvec[2] = (unsigned long)(arg2);                         \
2557        _argvec[3] = (unsigned long)(arg3);                         \
2558        _argvec[4] = (unsigned long)(arg4);                         \
2559        _argvec[5] = (unsigned long)(arg5);                         \
2560        _argvec[6] = (unsigned long)(arg6);                         \
2561        _argvec[7] = (unsigned long)(arg7);                         \
2562        _argvec[8] = (unsigned long)(arg8);                         \
2563        _argvec[9] = (unsigned long)(arg9);                         \
2564        _argvec[10] = (unsigned long)(arg10);                       \
2565        _argvec[11] = (unsigned long)(arg11);                       \
2566        __asm__ volatile(                                           \
2567           "ldr r0, [%1, #40] \n\t"                                 \
2568           "ldr r1, [%1, #44] \n\t"                                 \
2569           "push {r0, r1} \n\t"                                     \
2570           "ldr r0, [%1, #20] \n\t"                                 \
2571           "ldr r1, [%1, #24] \n\t"                                 \
2572           "ldr r2, [%1, #28] \n\t"                                 \
2573           "ldr r3, [%1, #32] \n\t"                                 \
2574           "ldr r4, [%1, #36] \n\t"                                 \
2575           "push {r0, r1, r2, r3, r4} \n\t"                         \
2576           "ldr r0, [%1, #4] \n\t"                                  \
2577           "ldr r1, [%1, #8] \n\t"                                  \
2578           "ldr r2, [%1, #12] \n\t"                                 \
2579           "ldr r3, [%1, #16] \n\t"                                 \
2580           "ldr r4, [%1] \n\t"  &bsol;* target->r4 */                    \
2581           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R4                   \
2582           "add sp, sp, #28 \n\t"                                   \
2583           "mov %0, r0"                                             \
2584           : &bsol;*out*/   "=r" (_res)                                  \
2585           : &bsol;*in*/    "0" (&_argvec[0])                            \
2586           : &bsol;*trash*/ "cc", "memory",__CALLER_SAVED_REGS           \
2587        );                                                          \
2588        lval = (__typeof__(lval)) _res;                             \
2589     } while (0)
2590  #define CALL_FN_W_12W(lval, orig, arg1,arg2,arg3,arg4,arg5,       \
2591                                    arg6,arg7,arg8,arg9,arg10,      \
2592                                    arg11,arg12)                    \
2593     do {                                                           \
2594        volatile OrigFn        _orig = (orig);                      \
2595        volatile unsigned long _argvec[13];                         \
2596        volatile unsigned long _res;                                \
2597        _argvec[0] = (unsigned long)_orig.nraddr;                   \
2598        _argvec[1] = (unsigned long)(arg1);                         \
2599        _argvec[2] = (unsigned long)(arg2);                         \
2600        _argvec[3] = (unsigned long)(arg3);                         \
2601        _argvec[4] = (unsigned long)(arg4);                         \
2602        _argvec[5] = (unsigned long)(arg5);                         \
2603        _argvec[6] = (unsigned long)(arg6);                         \
2604        _argvec[7] = (unsigned long)(arg7);                         \
2605        _argvec[8] = (unsigned long)(arg8);                         \
2606        _argvec[9] = (unsigned long)(arg9);                         \
2607        _argvec[10] = (unsigned long)(arg10);                       \
2608        _argvec[11] = (unsigned long)(arg11);                       \
2609        _argvec[12] = (unsigned long)(arg12);                       \
2610        __asm__ volatile(                                           \
2611           "ldr r0, [%1, #40] \n\t"                                 \
2612           "ldr r1, [%1, #44] \n\t"                                 \
2613           "ldr r2, [%1, #48] \n\t"                                 \
2614           "push {r0, r1, r2} \n\t"                                 \
2615           "ldr r0, [%1, #20] \n\t"                                 \
2616           "ldr r1, [%1, #24] \n\t"                                 \
2617           "ldr r2, [%1, #28] \n\t"                                 \
2618           "ldr r3, [%1, #32] \n\t"                                 \
2619           "ldr r4, [%1, #36] \n\t"                                 \
2620           "push {r0, r1, r2, r3, r4} \n\t"                         \
2621           "ldr r0, [%1, #4] \n\t"                                  \
2622           "ldr r1, [%1, #8] \n\t"                                  \
2623           "ldr r2, [%1, #12] \n\t"                                 \
2624           "ldr r3, [%1, #16] \n\t"                                 \
2625           "ldr r4, [%1] \n\t"  &bsol;* target->r4 */                    \
2626           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R4                   \
2627           "add sp, sp, #32 \n\t"                                   \
2628           "mov %0, r0"                                             \
2629           : &bsol;*out*/   "=r" (_res)                                  \
2630           : &bsol;*in*/    "0" (&_argvec[0])                            \
2631           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2632        );                                                          \
2633        lval = (__typeof__(lval)) _res;                             \
2634     } while (0)
2635  #endif &bsol;* PLAT_arm_linux */
2636  #if defined(PLAT_ppc32_aix5)
2637  #define __CALLER_SAVED_REGS                                       \
2638     "lr", "ctr", "xer",                                            \
2639     "cr0", "cr1", "cr2", "cr3", "cr4", "cr5", "cr6", "cr7",        \
2640     "r0", "r2", "r3", "r4", "r5", "r6", "r7", "r8", "r9", "r10",   \
2641     "r11", "r12", "r13"
2642  #define VG_EXPAND_FRAME_BY_trashes_r3(_n_fr)                      \
2643           "addi 1,1,-" #_n_fr "\n\t"                               \
2644           "lwz  3," #_n_fr "(1)\n\t"                               \
2645           "stw  3,0(1)\n\t"
2646  #define VG_CONTRACT_FRAME_BY(_n_fr)                               \
2647           "addi 1,1," #_n_fr "\n\t"
2648  #define CALL_FN_W_v(lval, orig)                                   \
2649     do {                                                           \
2650        volatile OrigFn        _orig = (orig);                      \
2651        volatile unsigned long _argvec[3+0];                        \
2652        volatile unsigned long _res;                                \
2653                   \
2654        _argvec[1] = (unsigned long)_orig.r2;                       \
2655        _argvec[2] = (unsigned long)_orig.nraddr;                   \
2656        __asm__ volatile(                                           \
2657           "mr 11,%1\n\t"                                           \
2658           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
2659           "stw  2,-8(11)\n\t"  &bsol;* save tocptr */                   \
2660           "lwz  2,-4(11)\n\t"  &bsol;* use nraddr's tocptr */           \
2661           "lwz 11, 0(11)\n\t"  &bsol;* target->r11 */                   \
2662           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
2663           "mr 11,%1\n\t"                                           \
2664           "mr %0,3\n\t"                                            \
2665           "lwz 2,-8(11)\n\t" &bsol;* restore tocptr */                  \
2666           VG_CONTRACT_FRAME_BY(512)                                \
2667           : &bsol;*out*/   "=r" (_res)                                  \
2668           : &bsol;*in*/    "r" (&_argvec[2])                            \
2669           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2670        );                                                          \
2671        lval = (__typeof__(lval)) _res;                             \
2672     } while (0)
2673  #define CALL_FN_W_W(lval, orig, arg1)                             \
2674     do {                                                           \
2675        volatile OrigFn        _orig = (orig);                      \
2676        volatile unsigned long _argvec[3+1];                        \
2677        volatile unsigned long _res;                                \
2678                   \
2679        _argvec[1]   = (unsigned long)_orig.r2;                     \
2680        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
2681        _argvec[2+1] = (unsigned long)arg1;                         \
2682        __asm__ volatile(                                           \
2683           "mr 11,%1\n\t"                                           \
2684           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
2685           "stw  2,-8(11)\n\t"  &bsol;* save tocptr */                   \
2686           "lwz  2,-4(11)\n\t"  &bsol;* use nraddr's tocptr */           \
2687           "lwz  3, 4(11)\n\t"  &bsol;* arg1->r3 */                      \
2688           "lwz 11, 0(11)\n\t"  &bsol;* target->r11 */                   \
2689           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
2690           "mr 11,%1\n\t"                                           \
2691           "mr %0,3\n\t"                                            \
2692           "lwz 2,-8(11)\n\t" &bsol;* restore tocptr */                  \
2693           VG_CONTRACT_FRAME_BY(512)                                \
2694           : &bsol;*out*/   "=r" (_res)                                  \
2695           : &bsol;*in*/    "r" (&_argvec[2])                            \
2696           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2697        );                                                          \
2698        lval = (__typeof__(lval)) _res;                             \
2699     } while (0)
2700  #define CALL_FN_W_WW(lval, orig, arg1,arg2)                       \
2701     do {                                                           \
2702        volatile OrigFn        _orig = (orig);                      \
2703        volatile unsigned long _argvec[3+2];                        \
2704        volatile unsigned long _res;                                \
2705                   \
2706        _argvec[1]   = (unsigned long)_orig.r2;                     \
2707        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
2708        _argvec[2+1] = (unsigned long)arg1;                         \
2709        _argvec[2+2] = (unsigned long)arg2;                         \
2710        __asm__ volatile(                                           \
2711           "mr 11,%1\n\t"                                           \
2712           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
2713           "stw  2,-8(11)\n\t"  &bsol;* save tocptr */                   \
2714           "lwz  2,-4(11)\n\t"  &bsol;* use nraddr's tocptr */           \
2715           "lwz  3, 4(11)\n\t"  &bsol;* arg1->r3 */                      \
2716           "lwz  4, 8(11)\n\t"  &bsol;* arg2->r4 */                      \
2717           "lwz 11, 0(11)\n\t"  &bsol;* target->r11 */                   \
2718           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
2719           "mr 11,%1\n\t"                                           \
2720           "mr %0,3\n\t"                                            \
2721           "lwz 2,-8(11)\n\t" &bsol;* restore tocptr */                  \
2722           VG_CONTRACT_FRAME_BY(512)                                \
2723           : &bsol;*out*/   "=r" (_res)                                  \
2724           : &bsol;*in*/    "r" (&_argvec[2])                            \
2725           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2726        );                                                          \
2727        lval = (__typeof__(lval)) _res;                             \
2728     } while (0)
2729  #define CALL_FN_W_WWW(lval, orig, arg1,arg2,arg3)                 \
2730     do {                                                           \
2731        volatile OrigFn        _orig = (orig);                      \
2732        volatile unsigned long _argvec[3+3];                        \
2733        volatile unsigned long _res;                                \
2734                   \
2735        _argvec[1]   = (unsigned long)_orig.r2;                     \
2736        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
2737        _argvec[2+1] = (unsigned long)arg1;                         \
2738        _argvec[2+2] = (unsigned long)arg2;                         \
2739        _argvec[2+3] = (unsigned long)arg3;                         \
2740        __asm__ volatile(                                           \
2741           "mr 11,%1\n\t"                                           \
2742           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
2743           "stw  2,-8(11)\n\t"  &bsol;* save tocptr */                   \
2744           "lwz  2,-4(11)\n\t"  &bsol;* use nraddr's tocptr */           \
2745           "lwz  3, 4(11)\n\t"  &bsol;* arg1->r3 */                      \
2746           "lwz  4, 8(11)\n\t"  &bsol;* arg2->r4 */                      \
2747           "lwz  5, 12(11)\n\t" &bsol;* arg3->r5 */                      \
2748           "lwz 11, 0(11)\n\t"  &bsol;* target->r11 */                   \
2749           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
2750           "mr 11,%1\n\t"                                           \
2751           "mr %0,3\n\t"                                            \
2752           "lwz 2,-8(11)\n\t" &bsol;* restore tocptr */                  \
2753           VG_CONTRACT_FRAME_BY(512)                                \
2754           : &bsol;*out*/   "=r" (_res)                                  \
2755           : &bsol;*in*/    "r" (&_argvec[2])                            \
2756           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2757        );                                                          \
2758        lval = (__typeof__(lval)) _res;                             \
2759     } while (0)
2760  #define CALL_FN_W_WWWW(lval, orig, arg1,arg2,arg3,arg4)           \
2761     do {                                                           \
2762        volatile OrigFn        _orig = (orig);                      \
2763        volatile unsigned long _argvec[3+4];                        \
2764        volatile unsigned long _res;                                \
2765                   \
2766        _argvec[1]   = (unsigned long)_orig.r2;                     \
2767        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
2768        _argvec[2+1] = (unsigned long)arg1;                         \
2769        _argvec[2+2] = (unsigned long)arg2;                         \
2770        _argvec[2+3] = (unsigned long)arg3;                         \
2771        _argvec[2+4] = (unsigned long)arg4;                         \
2772        __asm__ volatile(                                           \
2773           "mr 11,%1\n\t"                                           \
2774           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
2775           "stw  2,-8(11)\n\t"  &bsol;* save tocptr */                   \
2776           "lwz  2,-4(11)\n\t"  &bsol;* use nraddr's tocptr */           \
2777           "lwz  3, 4(11)\n\t"  &bsol;* arg1->r3 */                      \
2778           "lwz  4, 8(11)\n\t"  &bsol;* arg2->r4 */                      \
2779           "lwz  5, 12(11)\n\t" &bsol;* arg3->r5 */                      \
2780           "lwz  6, 16(11)\n\t" &bsol;* arg4->r6 */                      \
2781           "lwz 11, 0(11)\n\t"  &bsol;* target->r11 */                   \
2782           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
2783           "mr 11,%1\n\t"                                           \
2784           "mr %0,3\n\t"                                            \
2785           "lwz 2,-8(11)\n\t" &bsol;* restore tocptr */                  \
2786           VG_CONTRACT_FRAME_BY(512)                                \
2787           : &bsol;*out*/   "=r" (_res)                                  \
2788           : &bsol;*in*/    "r" (&_argvec[2])                            \
2789           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2790        );                                                          \
2791        lval = (__typeof__(lval)) _res;                             \
2792     } while (0)
2793  #define CALL_FN_W_5W(lval, orig, arg1,arg2,arg3,arg4,arg5)        \
2794     do {                                                           \
2795        volatile OrigFn        _orig = (orig);                      \
2796        volatile unsigned long _argvec[3+5];                        \
2797        volatile unsigned long _res;                                \
2798                   \
2799        _argvec[1]   = (unsigned long)_orig.r2;                     \
2800        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
2801        _argvec[2+1] = (unsigned long)arg1;                         \
2802        _argvec[2+2] = (unsigned long)arg2;                         \
2803        _argvec[2+3] = (unsigned long)arg3;                         \
2804        _argvec[2+4] = (unsigned long)arg4;                         \
2805        _argvec[2+5] = (unsigned long)arg5;                         \
2806        __asm__ volatile(                                           \
2807           "mr 11,%1\n\t"                                           \
2808           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
2809           "stw  2,-8(11)\n\t"  &bsol;* save tocptr */                   \
2810           "lwz  2,-4(11)\n\t"  &bsol;* use nraddr's tocptr */           \
2811           "lwz  3, 4(11)\n\t"  &bsol;* arg1->r3 */                      \
2812           "lwz  4, 8(11)\n\t" &bsol;* arg2->r4 */                       \
2813           "lwz  5, 12(11)\n\t" &bsol;* arg3->r5 */                      \
2814           "lwz  6, 16(11)\n\t" &bsol;* arg4->r6 */                      \
2815           "lwz  7, 20(11)\n\t" &bsol;* arg5->r7 */                      \
2816           "lwz 11, 0(11)\n\t"  &bsol;* target->r11 */                   \
2817           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
2818           "mr 11,%1\n\t"                                           \
2819           "mr %0,3\n\t"                                            \
2820           "lwz 2,-8(11)\n\t" &bsol;* restore tocptr */                  \
2821           VG_CONTRACT_FRAME_BY(512)                                \
2822           : &bsol;*out*/   "=r" (_res)                                  \
2823           : &bsol;*in*/    "r" (&_argvec[2])                            \
2824           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2825        );                                                          \
2826        lval = (__typeof__(lval)) _res;                             \
2827     } while (0)
2828  #define CALL_FN_W_6W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6)   \
2829     do {                                                           \
2830        volatile OrigFn        _orig = (orig);                      \
2831        volatile unsigned long _argvec[3+6];                        \
2832        volatile unsigned long _res;                                \
2833                   \
2834        _argvec[1]   = (unsigned long)_orig.r2;                     \
2835        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
2836        _argvec[2+1] = (unsigned long)arg1;                         \
2837        _argvec[2+2] = (unsigned long)arg2;                         \
2838        _argvec[2+3] = (unsigned long)arg3;                         \
2839        _argvec[2+4] = (unsigned long)arg4;                         \
2840        _argvec[2+5] = (unsigned long)arg5;                         \
2841        _argvec[2+6] = (unsigned long)arg6;                         \
2842        __asm__ volatile(                                           \
2843           "mr 11,%1\n\t"                                           \
2844           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
2845           "stw  2,-8(11)\n\t"  &bsol;* save tocptr */                   \
2846           "lwz  2,-4(11)\n\t"  &bsol;* use nraddr's tocptr */           \
2847           "lwz  3, 4(11)\n\t"  &bsol;* arg1->r3 */                      \
2848           "lwz  4, 8(11)\n\t"  &bsol;* arg2->r4 */                      \
2849           "lwz  5, 12(11)\n\t" &bsol;* arg3->r5 */                      \
2850           "lwz  6, 16(11)\n\t" &bsol;* arg4->r6 */                      \
2851           "lwz  7, 20(11)\n\t" &bsol;* arg5->r7 */                      \
2852           "lwz  8, 24(11)\n\t" &bsol;* arg6->r8 */                      \
2853           "lwz 11, 0(11)\n\t"  &bsol;* target->r11 */                   \
2854           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
2855           "mr 11,%1\n\t"                                           \
2856           "mr %0,3\n\t"                                            \
2857           "lwz 2,-8(11)\n\t" &bsol;* restore tocptr */                  \
2858           VG_CONTRACT_FRAME_BY(512)                                \
2859           : &bsol;*out*/   "=r" (_res)                                  \
2860           : &bsol;*in*/    "r" (&_argvec[2])                            \
2861           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2862        );                                                          \
2863        lval = (__typeof__(lval)) _res;                             \
2864     } while (0)
2865  #define CALL_FN_W_7W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
2866                                   arg7)                            \
2867     do {                                                           \
2868        volatile OrigFn        _orig = (orig);                      \
2869        volatile unsigned long _argvec[3+7];                        \
2870        volatile unsigned long _res;                                \
2871                   \
2872        _argvec[1]   = (unsigned long)_orig.r2;                     \
2873        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
2874        _argvec[2+1] = (unsigned long)arg1;                         \
2875        _argvec[2+2] = (unsigned long)arg2;                         \
2876        _argvec[2+3] = (unsigned long)arg3;                         \
2877        _argvec[2+4] = (unsigned long)arg4;                         \
2878        _argvec[2+5] = (unsigned long)arg5;                         \
2879        _argvec[2+6] = (unsigned long)arg6;                         \
2880        _argvec[2+7] = (unsigned long)arg7;                         \
2881        __asm__ volatile(                                           \
2882           "mr 11,%1\n\t"                                           \
2883           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
2884           "stw  2,-8(11)\n\t"  &bsol;* save tocptr */                   \
2885           "lwz  2,-4(11)\n\t"  &bsol;* use nraddr's tocptr */           \
2886           "lwz  3, 4(11)\n\t"  &bsol;* arg1->r3 */                      \
2887           "lwz  4, 8(11)\n\t"  &bsol;* arg2->r4 */                      \
2888           "lwz  5, 12(11)\n\t" &bsol;* arg3->r5 */                      \
2889           "lwz  6, 16(11)\n\t" &bsol;* arg4->r6 */                      \
2890           "lwz  7, 20(11)\n\t" &bsol;* arg5->r7 */                      \
2891           "lwz  8, 24(11)\n\t" &bsol;* arg6->r8 */                      \
2892           "lwz  9, 28(11)\n\t" &bsol;* arg7->r9 */                      \
2893           "lwz 11, 0(11)\n\t"  &bsol;* target->r11 */                   \
2894           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
2895           "mr 11,%1\n\t"                                           \
2896           "mr %0,3\n\t"                                            \
2897           "lwz 2,-8(11)\n\t" &bsol;* restore tocptr */                  \
2898           VG_CONTRACT_FRAME_BY(512)                                \
2899           : &bsol;*out*/   "=r" (_res)                                  \
2900           : &bsol;*in*/    "r" (&_argvec[2])                            \
2901           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2902        );                                                          \
2903        lval = (__typeof__(lval)) _res;                             \
2904     } while (0)
2905  #define CALL_FN_W_8W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
2906                                   arg7,arg8)                       \
2907     do {                                                           \
2908        volatile OrigFn        _orig = (orig);                      \
2909        volatile unsigned long _argvec[3+8];                        \
2910        volatile unsigned long _res;                                \
2911                   \
2912        _argvec[1]   = (unsigned long)_orig.r2;                     \
2913        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
2914        _argvec[2+1] = (unsigned long)arg1;                         \
2915        _argvec[2+2] = (unsigned long)arg2;                         \
2916        _argvec[2+3] = (unsigned long)arg3;                         \
2917        _argvec[2+4] = (unsigned long)arg4;                         \
2918        _argvec[2+5] = (unsigned long)arg5;                         \
2919        _argvec[2+6] = (unsigned long)arg6;                         \
2920        _argvec[2+7] = (unsigned long)arg7;                         \
2921        _argvec[2+8] = (unsigned long)arg8;                         \
2922        __asm__ volatile(                                           \
2923           "mr 11,%1\n\t"                                           \
2924           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
2925           "stw  2,-8(11)\n\t"  &bsol;* save tocptr */                   \
2926           "lwz  2,-4(11)\n\t"  &bsol;* use nraddr's tocptr */           \
2927           "lwz  3, 4(11)\n\t"  &bsol;* arg1->r3 */                      \
2928           "lwz  4, 8(11)\n\t"  &bsol;* arg2->r4 */                      \
2929           "lwz  5, 12(11)\n\t" &bsol;* arg3->r5 */                      \
2930           "lwz  6, 16(11)\n\t" &bsol;* arg4->r6 */                      \
2931           "lwz  7, 20(11)\n\t" &bsol;* arg5->r7 */                      \
2932           "lwz  8, 24(11)\n\t" &bsol;* arg6->r8 */                      \
2933           "lwz  9, 28(11)\n\t" &bsol;* arg7->r9 */                      \
2934           "lwz 10, 32(11)\n\t" &bsol;* arg8->r10 */                     \
2935           "lwz 11, 0(11)\n\t"  &bsol;* target->r11 */                   \
2936           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
2937           "mr 11,%1\n\t"                                           \
2938           "mr %0,3\n\t"                                            \
2939           "lwz 2,-8(11)\n\t" &bsol;* restore tocptr */                  \
2940           VG_CONTRACT_FRAME_BY(512)                                \
2941           : &bsol;*out*/   "=r" (_res)                                  \
2942           : &bsol;*in*/    "r" (&_argvec[2])                            \
2943           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2944        );                                                          \
2945        lval = (__typeof__(lval)) _res;                             \
2946     } while (0)
2947  #define CALL_FN_W_9W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
2948                                   arg7,arg8,arg9)                  \
2949     do {                                                           \
2950        volatile OrigFn        _orig = (orig);                      \
2951        volatile unsigned long _argvec[3+9];                        \
2952        volatile unsigned long _res;                                \
2953                   \
2954        _argvec[1]   = (unsigned long)_orig.r2;                     \
2955        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
2956        _argvec[2+1] = (unsigned long)arg1;                         \
2957        _argvec[2+2] = (unsigned long)arg2;                         \
2958        _argvec[2+3] = (unsigned long)arg3;                         \
2959        _argvec[2+4] = (unsigned long)arg4;                         \
2960        _argvec[2+5] = (unsigned long)arg5;                         \
2961        _argvec[2+6] = (unsigned long)arg6;                         \
2962        _argvec[2+7] = (unsigned long)arg7;                         \
2963        _argvec[2+8] = (unsigned long)arg8;                         \
2964        _argvec[2+9] = (unsigned long)arg9;                         \
2965        __asm__ volatile(                                           \
2966           "mr 11,%1\n\t"                                           \
2967           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
2968           "stw  2,-8(11)\n\t"  &bsol;* save tocptr */                   \
2969           "lwz  2,-4(11)\n\t"  &bsol;* use nraddr's tocptr */           \
2970           VG_EXPAND_FRAME_BY_trashes_r3(64)                        \
2971                                                          \
2972           "lwz 3,36(11)\n\t"                                       \
2973           "stw 3,56(1)\n\t"                                        \
2974                                                       \
2975           "lwz  3, 4(11)\n\t"  &bsol;* arg1->r3 */                      \
2976           "lwz  4, 8(11)\n\t"  &bsol;* arg2->r4 */                      \
2977           "lwz  5, 12(11)\n\t" &bsol;* arg3->r5 */                      \
2978           "lwz  6, 16(11)\n\t" &bsol;* arg4->r6 */                      \
2979           "lwz  7, 20(11)\n\t" &bsol;* arg5->r7 */                      \
2980           "lwz  8, 24(11)\n\t" &bsol;* arg6->r8 */                      \
2981           "lwz  9, 28(11)\n\t" &bsol;* arg7->r9 */                      \
2982           "lwz 10, 32(11)\n\t" &bsol;* arg8->r10 */                     \
2983           "lwz 11, 0(11)\n\t"  &bsol;* target->r11 */                   \
2984           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
2985           "mr 11,%1\n\t"                                           \
2986           "mr %0,3\n\t"                                            \
2987           "lwz 2,-8(11)\n\t" &bsol;* restore tocptr */                  \
2988           VG_CONTRACT_FRAME_BY(64)                                 \
2989           VG_CONTRACT_FRAME_BY(512)                                \
2990           : &bsol;*out*/   "=r" (_res)                                  \
2991           : &bsol;*in*/    "r" (&_argvec[2])                            \
2992           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2993        );                                                          \
2994        lval = (__typeof__(lval)) _res;                             \
2995     } while (0)
2996  #define CALL_FN_W_10W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
2997                                    arg7,arg8,arg9,arg10)           \
2998     do {                                                           \
2999        volatile OrigFn        _orig = (orig);                      \
3000        volatile unsigned long _argvec[3+10];                       \
3001        volatile unsigned long _res;                                \
3002                   \
3003        _argvec[1]   = (unsigned long)_orig.r2;                     \
3004        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
3005        _argvec[2+1] = (unsigned long)arg1;                         \
3006        _argvec[2+2] = (unsigned long)arg2;                         \
3007        _argvec[2+3] = (unsigned long)arg3;                         \
3008        _argvec[2+4] = (unsigned long)arg4;                         \
3009        _argvec[2+5] = (unsigned long)arg5;                         \
3010        _argvec[2+6] = (unsigned long)arg6;                         \
3011        _argvec[2+7] = (unsigned long)arg7;                         \
3012        _argvec[2+8] = (unsigned long)arg8;                         \
3013        _argvec[2+9] = (unsigned long)arg9;                         \
3014        _argvec[2+10] = (unsigned long)arg10;                       \
3015        __asm__ volatile(                                           \
3016           "mr 11,%1\n\t"                                           \
3017           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
3018           "stw  2,-8(11)\n\t"  &bsol;* save tocptr */                   \
3019           "lwz  2,-4(11)\n\t"  &bsol;* use nraddr's tocptr */           \
3020           VG_EXPAND_FRAME_BY_trashes_r3(64)                        \
3021                                                         \
3022           "lwz 3,40(11)\n\t"                                       \
3023           "stw 3,60(1)\n\t"                                        \
3024                                                          \
3025           "lwz 3,36(11)\n\t"                                       \
3026           "stw 3,56(1)\n\t"                                        \
3027                                                       \
3028           "lwz  3, 4(11)\n\t"  &bsol;* arg1->r3 */                      \
3029           "lwz  4, 8(11)\n\t"  &bsol;* arg2->r4 */                      \
3030           "lwz  5, 12(11)\n\t" &bsol;* arg3->r5 */                      \
3031           "lwz  6, 16(11)\n\t" &bsol;* arg4->r6 */                      \
3032           "lwz  7, 20(11)\n\t" &bsol;* arg5->r7 */                      \
3033           "lwz  8, 24(11)\n\t" &bsol;* arg6->r8 */                      \
3034           "lwz  9, 28(11)\n\t" &bsol;* arg7->r9 */                      \
3035           "lwz 10, 32(11)\n\t" &bsol;* arg8->r10 */                     \
3036           "lwz 11, 0(11)\n\t"  &bsol;* target->r11 */                   \
3037           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
3038           "mr 11,%1\n\t"                                           \
3039           "mr %0,3\n\t"                                            \
3040           "lwz 2,-8(11)\n\t" &bsol;* restore tocptr */                  \
3041           VG_CONTRACT_FRAME_BY(64)                                 \
3042           VG_CONTRACT_FRAME_BY(512)                                \
3043           : &bsol;*out*/   "=r" (_res)                                  \
3044           : &bsol;*in*/    "r" (&_argvec[2])                            \
3045           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
3046        );                                                          \
3047        lval = (__typeof__(lval)) _res;                             \
3048     } while (0)
3049  #define CALL_FN_W_11W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
3050                                    arg7,arg8,arg9,arg10,arg11)     \
3051     do {                                                           \
3052        volatile OrigFn        _orig = (orig);                      \
3053        volatile unsigned long _argvec[3+11];                       \
3054        volatile unsigned long _res;                                \
3055                   \
3056        _argvec[1]   = (unsigned long)_orig.r2;                     \
3057        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
3058        _argvec[2+1] = (unsigned long)arg1;                         \
3059        _argvec[2+2] = (unsigned long)arg2;                         \
3060        _argvec[2+3] = (unsigned long)arg3;                         \
3061        _argvec[2+4] = (unsigned long)arg4;                         \
3062        _argvec[2+5] = (unsigned long)arg5;                         \
3063        _argvec[2+6] = (unsigned long)arg6;                         \
3064        _argvec[2+7] = (unsigned long)arg7;                         \
3065        _argvec[2+8] = (unsigned long)arg8;                         \
3066        _argvec[2+9] = (unsigned long)arg9;                         \
3067        _argvec[2+10] = (unsigned long)arg10;                       \
3068        _argvec[2+11] = (unsigned long)arg11;                       \
3069        __asm__ volatile(                                           \
3070           "mr 11,%1\n\t"                                           \
3071           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
3072           "stw  2,-8(11)\n\t"  &bsol;* save tocptr */                   \
3073           "lwz  2,-4(11)\n\t"  &bsol;* use nraddr's tocptr */           \
3074           VG_EXPAND_FRAME_BY_trashes_r3(72)                        \
3075                                                         \
3076           "lwz 3,44(11)\n\t"                                       \
3077           "stw 3,64(1)\n\t"                                        \
3078                                                         \
3079           "lwz 3,40(11)\n\t"                                       \
3080           "stw 3,60(1)\n\t"                                        \
3081                                                          \
3082           "lwz 3,36(11)\n\t"                                       \
3083           "stw 3,56(1)\n\t"                                        \
3084                                                       \
3085           "lwz  3, 4(11)\n\t"  &bsol;* arg1->r3 */                      \
3086           "lwz  4, 8(11)\n\t"  &bsol;* arg2->r4 */                      \
3087           "lwz  5, 12(11)\n\t" &bsol;* arg3->r5 */                      \
3088           "lwz  6, 16(11)\n\t" &bsol;* arg4->r6 */                      \
3089           "lwz  7, 20(11)\n\t" &bsol;* arg5->r7 */                      \
3090           "lwz  8, 24(11)\n\t" &bsol;* arg6->r8 */                      \
3091           "lwz  9, 28(11)\n\t" &bsol;* arg7->r9 */                      \
3092           "lwz 10, 32(11)\n\t" &bsol;* arg8->r10 */                     \
3093           "lwz 11, 0(11)\n\t"  &bsol;* target->r11 */                   \
3094           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
3095           "mr 11,%1\n\t"                                           \
3096           "mr %0,3\n\t"                                            \
3097           "lwz 2,-8(11)\n\t" &bsol;* restore tocptr */                  \
3098           VG_CONTRACT_FRAME_BY(72)                                 \
3099           VG_CONTRACT_FRAME_BY(512)                                \
3100           : &bsol;*out*/   "=r" (_res)                                  \
3101           : &bsol;*in*/    "r" (&_argvec[2])                            \
3102           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
3103        );                                                          \
3104        lval = (__typeof__(lval)) _res;                             \
3105     } while (0)
3106  #define CALL_FN_W_12W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
3107                                  arg7,arg8,arg9,arg10,arg11,arg12) \
3108     do {                                                           \
3109        volatile OrigFn        _orig = (orig);                      \
3110        volatile unsigned long _argvec[3+12];                       \
3111        volatile unsigned long _res;                                \
3112                   \
3113        _argvec[1]   = (unsigned long)_orig.r2;                     \
3114        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
3115        _argvec[2+1] = (unsigned long)arg1;                         \
3116        _argvec[2+2] = (unsigned long)arg2;                         \
3117        _argvec[2+3] = (unsigned long)arg3;                         \
3118        _argvec[2+4] = (unsigned long)arg4;                         \
3119        _argvec[2+5] = (unsigned long)arg5;                         \
3120        _argvec[2+6] = (unsigned long)arg6;                         \
3121        _argvec[2+7] = (unsigned long)arg7;                         \
3122        _argvec[2+8] = (unsigned long)arg8;                         \
3123        _argvec[2+9] = (unsigned long)arg9;                         \
3124        _argvec[2+10] = (unsigned long)arg10;                       \
3125        _argvec[2+11] = (unsigned long)arg11;                       \
3126        _argvec[2+12] = (unsigned long)arg12;                       \
3127        __asm__ volatile(                                           \
3128           "mr 11,%1\n\t"                                           \
3129           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
3130           "stw  2,-8(11)\n\t"  &bsol;* save tocptr */                   \
3131           "lwz  2,-4(11)\n\t"  &bsol;* use nraddr's tocptr */           \
3132           VG_EXPAND_FRAME_BY_trashes_r3(72)                        \
3133                                                         \
3134           "lwz 3,48(11)\n\t"                                       \
3135           "stw 3,68(1)\n\t"                                        \
3136                                                         \
3137           "lwz 3,44(11)\n\t"                                       \
3138           "stw 3,64(1)\n\t"                                        \
3139                                                         \
3140           "lwz 3,40(11)\n\t"                                       \
3141           "stw 3,60(1)\n\t"                                        \
3142                                                          \
3143           "lwz 3,36(11)\n\t"                                       \
3144           "stw 3,56(1)\n\t"                                        \
3145                                                       \
3146           "lwz  3, 4(11)\n\t"  &bsol;* arg1->r3 */                      \
3147           "lwz  4, 8(11)\n\t"  &bsol;* arg2->r4 */                      \
3148           "lwz  5, 12(11)\n\t" &bsol;* arg3->r5 */                      \
3149           "lwz  6, 16(11)\n\t" &bsol;* arg4->r6 */                      \
3150           "lwz  7, 20(11)\n\t" &bsol;* arg5->r7 */                      \
3151           "lwz  8, 24(11)\n\t" &bsol;* arg6->r8 */                      \
3152           "lwz  9, 28(11)\n\t" &bsol;* arg7->r9 */                      \
3153           "lwz 10, 32(11)\n\t" &bsol;* arg8->r10 */                     \
3154           "lwz 11, 0(11)\n\t"  &bsol;* target->r11 */                   \
3155           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
3156           "mr 11,%1\n\t"                                           \
3157           "mr %0,3\n\t"                                            \
3158           "lwz 2,-8(11)\n\t" &bsol;* restore tocptr */                  \
3159           VG_CONTRACT_FRAME_BY(72)                                 \
3160           VG_CONTRACT_FRAME_BY(512)                                \
3161           : &bsol;*out*/   "=r" (_res)                                  \
3162           : &bsol;*in*/    "r" (&_argvec[2])                            \
3163           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
3164        );                                                          \
3165        lval = (__typeof__(lval)) _res;                             \
3166     } while (0)
3167  #endif &bsol;* PLAT_ppc32_aix5 */
3168  #if defined(PLAT_ppc64_aix5)
3169  #define __CALLER_SAVED_REGS                                       \
3170     "lr", "ctr", "xer",                                            \
3171     "cr0", "cr1", "cr2", "cr3", "cr4", "cr5", "cr6", "cr7",        \
3172     "r0", "r2", "r3", "r4", "r5", "r6", "r7", "r8", "r9", "r10",   \
3173     "r11", "r12", "r13"
3174  #define VG_EXPAND_FRAME_BY_trashes_r3(_n_fr)                      \
3175           "addi 1,1,-" #_n_fr "\n\t"                               \
3176           "ld   3," #_n_fr "(1)\n\t"                               \
3177           "std  3,0(1)\n\t"
3178  #define VG_CONTRACT_FRAME_BY(_n_fr)                               \
3179           "addi 1,1," #_n_fr "\n\t"
3180  #define CALL_FN_W_v(lval, orig)                                   \
3181     do {                                                           \
3182        volatile OrigFn        _orig = (orig);                      \
3183        volatile unsigned long _argvec[3+0];                        \
3184        volatile unsigned long _res;                                \
3185                   \
3186        _argvec[1] = (unsigned long)_orig.r2;                       \
3187        _argvec[2] = (unsigned long)_orig.nraddr;                   \
3188        __asm__ volatile(                                           \
3189           "mr 11,%1\n\t"                                           \
3190           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
3191           "std  2,-16(11)\n\t" &bsol;* save tocptr */                   \
3192           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
3193           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
3194           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
3195           "mr 11,%1\n\t"                                           \
3196           "mr %0,3\n\t"                                            \
3197           "ld 2,-16(11)\n\t" &bsol;* restore tocptr */                  \
3198           VG_CONTRACT_FRAME_BY(512)                                \
3199           : &bsol;*out*/   "=r" (_res)                                  \
3200           : &bsol;*in*/    "r" (&_argvec[2])                            \
3201           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
3202        );                                                          \
3203        lval = (__typeof__(lval)) _res;                             \
3204     } while (0)
3205  #define CALL_FN_W_W(lval, orig, arg1)                             \
3206     do {                                                           \
3207        volatile OrigFn        _orig = (orig);                      \
3208        volatile unsigned long _argvec[3+1];                        \
3209        volatile unsigned long _res;                                \
3210                   \
3211        _argvec[1]   = (unsigned long)_orig.r2;                     \
3212        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
3213        _argvec[2+1] = (unsigned long)arg1;                         \
3214        __asm__ volatile(                                           \
3215           "mr 11,%1\n\t"                                           \
3216           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
3217           "std  2,-16(11)\n\t" &bsol;* save tocptr */                   \
3218           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
3219           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
3220           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
3221           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
3222           "mr 11,%1\n\t"                                           \
3223           "mr %0,3\n\t"                                            \
3224           "ld 2,-16(11)\n\t" &bsol;* restore tocptr */                  \
3225           VG_CONTRACT_FRAME_BY(512)                                \
3226           : &bsol;*out*/   "=r" (_res)                                  \
3227           : &bsol;*in*/    "r" (&_argvec[2])                            \
3228           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
3229        );                                                          \
3230        lval = (__typeof__(lval)) _res;                             \
3231     } while (0)
3232  #define CALL_FN_W_WW(lval, orig, arg1,arg2)                       \
3233     do {                                                           \
3234        volatile OrigFn        _orig = (orig);                      \
3235        volatile unsigned long _argvec[3+2];                        \
3236        volatile unsigned long _res;                                \
3237                   \
3238        _argvec[1]   = (unsigned long)_orig.r2;                     \
3239        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
3240        _argvec[2+1] = (unsigned long)arg1;                         \
3241        _argvec[2+2] = (unsigned long)arg2;                         \
3242        __asm__ volatile(                                           \
3243           "mr 11,%1\n\t"                                           \
3244           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
3245           "std  2,-16(11)\n\t" &bsol;* save tocptr */                   \
3246           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
3247           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
3248           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
3249           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
3250           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
3251           "mr 11,%1\n\t"                                           \
3252           "mr %0,3\n\t"                                            \
3253           "ld  2,-16(11)\n\t" &bsol;* restore tocptr */                 \
3254           VG_CONTRACT_FRAME_BY(512)                                \
3255           : &bsol;*out*/   "=r" (_res)                                  \
3256           : &bsol;*in*/    "r" (&_argvec[2])                            \
3257           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
3258        );                                                          \
3259        lval = (__typeof__(lval)) _res;                             \
3260     } while (0)
3261  #define CALL_FN_W_WWW(lval, orig, arg1,arg2,arg3)                 \
3262     do {                                                           \
3263        volatile OrigFn        _orig = (orig);                      \
3264        volatile unsigned long _argvec[3+3];                        \
3265        volatile unsigned long _res;                                \
3266                   \
3267        _argvec[1]   = (unsigned long)_orig.r2;                     \
3268        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
3269        _argvec[2+1] = (unsigned long)arg1;                         \
3270        _argvec[2+2] = (unsigned long)arg2;                         \
3271        _argvec[2+3] = (unsigned long)arg3;                         \
3272        __asm__ volatile(                                           \
3273           "mr 11,%1\n\t"                                           \
3274           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
3275           "std  2,-16(11)\n\t" &bsol;* save tocptr */                   \
3276           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
3277           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
3278           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
3279           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
3280           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
3281           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
3282           "mr 11,%1\n\t"                                           \
3283           "mr %0,3\n\t"                                            \
3284           "ld  2,-16(11)\n\t" &bsol;* restore tocptr */                 \
3285           VG_CONTRACT_FRAME_BY(512)                                \
3286           : &bsol;*out*/   "=r" (_res)                                  \
3287           : &bsol;*in*/    "r" (&_argvec[2])                            \
3288           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
3289        );                                                          \
3290        lval = (__typeof__(lval)) _res;                             \
3291     } while (0)
3292  #define CALL_FN_W_WWWW(lval, orig, arg1,arg2,arg3,arg4)           \
3293     do {                                                           \
3294        volatile OrigFn        _orig = (orig);                      \
3295        volatile unsigned long _argvec[3+4];                        \
3296        volatile unsigned long _res;                                \
3297                   \
3298        _argvec[1]   = (unsigned long)_orig.r2;                     \
3299        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
3300        _argvec[2+1] = (unsigned long)arg1;                         \
3301        _argvec[2+2] = (unsigned long)arg2;                         \
3302        _argvec[2+3] = (unsigned long)arg3;                         \
3303        _argvec[2+4] = (unsigned long)arg4;                         \
3304        __asm__ volatile(                                           \
3305           "mr 11,%1\n\t"                                           \
3306           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
3307           "std  2,-16(11)\n\t" &bsol;* save tocptr */                   \
3308           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
3309           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
3310           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
3311           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
3312           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
3313           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
3314           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
3315           "mr 11,%1\n\t"                                           \
3316           "mr %0,3\n\t"                                            \
3317           "ld  2,-16(11)\n\t" &bsol;* restore tocptr */                 \
3318           VG_CONTRACT_FRAME_BY(512)                                \
3319           : &bsol;*out*/   "=r" (_res)                                  \
3320           : &bsol;*in*/    "r" (&_argvec[2])                            \
3321           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
3322        );                                                          \
3323        lval = (__typeof__(lval)) _res;                             \
3324     } while (0)
3325  #define CALL_FN_W_5W(lval, orig, arg1,arg2,arg3,arg4,arg5)        \
3326     do {                                                           \
3327        volatile OrigFn        _orig = (orig);                      \
3328        volatile unsigned long _argvec[3+5];                        \
3329        volatile unsigned long _res;                                \
3330                   \
3331        _argvec[1]   = (unsigned long)_orig.r2;                     \
3332        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
3333        _argvec[2+1] = (unsigned long)arg1;                         \
3334        _argvec[2+2] = (unsigned long)arg2;                         \
3335        _argvec[2+3] = (unsigned long)arg3;                         \
3336        _argvec[2+4] = (unsigned long)arg4;                         \
3337        _argvec[2+5] = (unsigned long)arg5;                         \
3338        __asm__ volatile(                                           \
3339           "mr 11,%1\n\t"                                           \
3340           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
3341           "std  2,-16(11)\n\t" &bsol;* save tocptr */                   \
3342           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
3343           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
3344           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
3345           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
3346           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
3347           "ld   7, 40(11)\n\t" &bsol;* arg5->r7 */                      \
3348           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
3349           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
3350           "mr 11,%1\n\t"                                           \
3351           "mr %0,3\n\t"                                            \
3352           "ld  2,-16(11)\n\t" &bsol;* restore tocptr */                 \
3353           VG_CONTRACT_FRAME_BY(512)                                \
3354           : &bsol;*out*/   "=r" (_res)                                  \
3355           : &bsol;*in*/    "r" (&_argvec[2])                            \
3356           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
3357        );                                                          \
3358        lval = (__typeof__(lval)) _res;                             \
3359     } while (0)
3360  #define CALL_FN_W_6W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6)   \
3361     do {                                                           \
3362        volatile OrigFn        _orig = (orig);                      \
3363        volatile unsigned long _argvec[3+6];                        \
3364        volatile unsigned long _res;                                \
3365                   \
3366        _argvec[1]   = (unsigned long)_orig.r2;                     \
3367        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
3368        _argvec[2+1] = (unsigned long)arg1;                         \
3369        _argvec[2+2] = (unsigned long)arg2;                         \
3370        _argvec[2+3] = (unsigned long)arg3;                         \
3371        _argvec[2+4] = (unsigned long)arg4;                         \
3372        _argvec[2+5] = (unsigned long)arg5;                         \
3373        _argvec[2+6] = (unsigned long)arg6;                         \
3374        __asm__ volatile(                                           \
3375           "mr 11,%1\n\t"                                           \
3376           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
3377           "std  2,-16(11)\n\t" &bsol;* save tocptr */                   \
3378           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
3379           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
3380           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
3381           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
3382           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
3383           "ld   7, 40(11)\n\t" &bsol;* arg5->r7 */                      \
3384           "ld   8, 48(11)\n\t" &bsol;* arg6->r8 */                      \
3385           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
3386           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
3387           "mr 11,%1\n\t"                                           \
3388           "mr %0,3\n\t"                                            \
3389           "ld  2,-16(11)\n\t" &bsol;* restore tocptr */                 \
3390           VG_CONTRACT_FRAME_BY(512)                                \
3391           : &bsol;*out*/   "=r" (_res)                                  \
3392           : &bsol;*in*/    "r" (&_argvec[2])                            \
3393           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
3394        );                                                          \
3395        lval = (__typeof__(lval)) _res;                             \
3396     } while (0)
3397  #define CALL_FN_W_7W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
3398                                   arg7)                            \
3399     do {                                                           \
3400        volatile OrigFn        _orig = (orig);                      \
3401        volatile unsigned long _argvec[3+7];                        \
3402        volatile unsigned long _res;                                \
3403                   \
3404        _argvec[1]   = (unsigned long)_orig.r2;                     \
3405        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
3406        _argvec[2+1] = (unsigned long)arg1;                         \
3407        _argvec[2+2] = (unsigned long)arg2;                         \
3408        _argvec[2+3] = (unsigned long)arg3;                         \
3409        _argvec[2+4] = (unsigned long)arg4;                         \
3410        _argvec[2+5] = (unsigned long)arg5;                         \
3411        _argvec[2+6] = (unsigned long)arg6;                         \
3412        _argvec[2+7] = (unsigned long)arg7;                         \
3413        __asm__ volatile(                                           \
3414           "mr 11,%1\n\t"                                           \
3415           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
3416           "std  2,-16(11)\n\t" &bsol;* save tocptr */                   \
3417           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
3418           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
3419           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
3420           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
3421           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
3422           "ld   7, 40(11)\n\t" &bsol;* arg5->r7 */                      \
3423           "ld   8, 48(11)\n\t" &bsol;* arg6->r8 */                      \
3424           "ld   9, 56(11)\n\t" &bsol;* arg7->r9 */                      \
3425           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
3426           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
3427           "mr 11,%1\n\t"                                           \
3428           "mr %0,3\n\t"                                            \
3429           "ld  2,-16(11)\n\t" &bsol;* restore tocptr */                 \
3430           VG_CONTRACT_FRAME_BY(512)                                \
3431           : &bsol;*out*/   "=r" (_res)                                  \
3432           : &bsol;*in*/    "r" (&_argvec[2])                            \
3433           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
3434        );                                                          \
3435        lval = (__typeof__(lval)) _res;                             \
3436     } while (0)
3437  #define CALL_FN_W_8W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
3438                                   arg7,arg8)                       \
3439     do {                                                           \
3440        volatile OrigFn        _orig = (orig);                      \
3441        volatile unsigned long _argvec[3+8];                        \
3442        volatile unsigned long _res;                                \
3443                   \
3444        _argvec[1]   = (unsigned long)_orig.r2;                     \
3445        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
3446        _argvec[2+1] = (unsigned long)arg1;                         \
3447        _argvec[2+2] = (unsigned long)arg2;                         \
3448        _argvec[2+3] = (unsigned long)arg3;                         \
3449        _argvec[2+4] = (unsigned long)arg4;                         \
3450        _argvec[2+5] = (unsigned long)arg5;                         \
3451        _argvec[2+6] = (unsigned long)arg6;                         \
3452        _argvec[2+7] = (unsigned long)arg7;                         \
3453        _argvec[2+8] = (unsigned long)arg8;                         \
3454        __asm__ volatile(                                           \
3455           "mr 11,%1\n\t"                                           \
3456           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
3457           "std  2,-16(11)\n\t" &bsol;* save tocptr */                   \
3458           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
3459           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
3460           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
3461           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
3462           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
3463           "ld   7, 40(11)\n\t" &bsol;* arg5->r7 */                      \
3464           "ld   8, 48(11)\n\t" &bsol;* arg6->r8 */                      \
3465           "ld   9, 56(11)\n\t" &bsol;* arg7->r9 */                      \
3466           "ld  10, 64(11)\n\t" &bsol;* arg8->r10 */                     \
3467           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
3468           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
3469           "mr 11,%1\n\t"                                           \
3470           "mr %0,3\n\t"                                            \
3471           "ld  2,-16(11)\n\t" &bsol;* restore tocptr */                 \
3472           VG_CONTRACT_FRAME_BY(512)                                \
3473           : &bsol;*out*/   "=r" (_res)                                  \
3474           : &bsol;*in*/    "r" (&_argvec[2])                            \
3475           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
3476        );                                                          \
3477        lval = (__typeof__(lval)) _res;                             \
3478     } while (0)
3479  #define CALL_FN_W_9W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
3480                                   arg7,arg8,arg9)                  \
3481     do {                                                           \
3482        volatile OrigFn        _orig = (orig);                      \
3483        volatile unsigned long _argvec[3+9];                        \
3484        volatile unsigned long _res;                                \
3485                   \
3486        _argvec[1]   = (unsigned long)_orig.r2;                     \
3487        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
3488        _argvec[2+1] = (unsigned long)arg1;                         \
3489        _argvec[2+2] = (unsigned long)arg2;                         \
3490        _argvec[2+3] = (unsigned long)arg3;                         \
3491        _argvec[2+4] = (unsigned long)arg4;                         \
3492        _argvec[2+5] = (unsigned long)arg5;                         \
3493        _argvec[2+6] = (unsigned long)arg6;                         \
3494        _argvec[2+7] = (unsigned long)arg7;                         \
3495        _argvec[2+8] = (unsigned long)arg8;                         \
3496        _argvec[2+9] = (unsigned long)arg9;                         \
3497        __asm__ volatile(                                           \
3498           "mr 11,%1\n\t"                                           \
3499           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
3500           "std  2,-16(11)\n\t" &bsol;* save tocptr */                   \
3501           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
3502           VG_EXPAND_FRAME_BY_trashes_r3(128)                       \
3503                                                          \
3504           "ld  3,72(11)\n\t"                                       \
3505           "std 3,112(1)\n\t"                                       \
3506                                                       \
3507           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
3508           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
3509           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
3510           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
3511           "ld   7, 40(11)\n\t" &bsol;* arg5->r7 */                      \
3512           "ld   8, 48(11)\n\t" &bsol;* arg6->r8 */                      \
3513           "ld   9, 56(11)\n\t" &bsol;* arg7->r9 */                      \
3514           "ld  10, 64(11)\n\t" &bsol;* arg8->r10 */                     \
3515           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
3516           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
3517           "mr 11,%1\n\t"                                           \
3518           "mr %0,3\n\t"                                            \
3519           "ld  2,-16(11)\n\t" &bsol;* restore tocptr */                 \
3520           VG_CONTRACT_FRAME_BY(128)                                \
3521           VG_CONTRACT_FRAME_BY(512)                                \
3522           : &bsol;*out*/   "=r" (_res)                                  \
3523           : &bsol;*in*/    "r" (&_argvec[2])                            \
3524           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
3525        );                                                          \
3526        lval = (__typeof__(lval)) _res;                             \
3527     } while (0)
3528  #define CALL_FN_W_10W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
3529                                    arg7,arg8,arg9,arg10)           \
3530     do {                                                           \
3531        volatile OrigFn        _orig = (orig);                      \
3532        volatile unsigned long _argvec[3+10];                       \
3533        volatile unsigned long _res;                                \
3534                   \
3535        _argvec[1]   = (unsigned long)_orig.r2;                     \
3536        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
3537        _argvec[2+1] = (unsigned long)arg1;                         \
3538        _argvec[2+2] = (unsigned long)arg2;                         \
3539        _argvec[2+3] = (unsigned long)arg3;                         \
3540        _argvec[2+4] = (unsigned long)arg4;                         \
3541        _argvec[2+5] = (unsigned long)arg5;                         \
3542        _argvec[2+6] = (unsigned long)arg6;                         \
3543        _argvec[2+7] = (unsigned long)arg7;                         \
3544        _argvec[2+8] = (unsigned long)arg8;                         \
3545        _argvec[2+9] = (unsigned long)arg9;                         \
3546        _argvec[2+10] = (unsigned long)arg10;                       \
3547        __asm__ volatile(                                           \
3548           "mr 11,%1\n\t"                                           \
3549           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
3550           "std  2,-16(11)\n\t" &bsol;* save tocptr */                   \
3551           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
3552           VG_EXPAND_FRAME_BY_trashes_r3(128)                       \
3553                                                         \
3554           "ld  3,80(11)\n\t"                                       \
3555           "std 3,120(1)\n\t"                                       \
3556                                                          \
3557           "ld  3,72(11)\n\t"                                       \
3558           "std 3,112(1)\n\t"                                       \
3559                                                       \
3560           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
3561           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
3562           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
3563           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
3564           "ld   7, 40(11)\n\t" &bsol;* arg5->r7 */                      \
3565           "ld   8, 48(11)\n\t" &bsol;* arg6->r8 */                      \
3566           "ld   9, 56(11)\n\t" &bsol;* arg7->r9 */                      \
3567           "ld  10, 64(11)\n\t" &bsol;* arg8->r10 */                     \
3568           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
3569           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
3570           "mr 11,%1\n\t"                                           \
3571           "mr %0,3\n\t"                                            \
3572           "ld  2,-16(11)\n\t" &bsol;* restore tocptr */                 \
3573           VG_CONTRACT_FRAME_BY(128)                                \
3574           VG_CONTRACT_FRAME_BY(512)                                \
3575           : &bsol;*out*/   "=r" (_res)                                  \
3576           : &bsol;*in*/    "r" (&_argvec[2])                            \
3577           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
3578        );                                                          \
3579        lval = (__typeof__(lval)) _res;                             \
3580     } while (0)
3581  #define CALL_FN_W_11W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
3582                                    arg7,arg8,arg9,arg10,arg11)     \
3583     do {                                                           \
3584        volatile OrigFn        _orig = (orig);                      \
3585        volatile unsigned long _argvec[3+11];                       \
3586        volatile unsigned long _res;                                \
3587                   \
3588        _argvec[1]   = (unsigned long)_orig.r2;                     \
3589        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
3590        _argvec[2+1] = (unsigned long)arg1;                         \
3591        _argvec[2+2] = (unsigned long)arg2;                         \
3592        _argvec[2+3] = (unsigned long)arg3;                         \
3593        _argvec[2+4] = (unsigned long)arg4;                         \
3594        _argvec[2+5] = (unsigned long)arg5;                         \
3595        _argvec[2+6] = (unsigned long)arg6;                         \
3596        _argvec[2+7] = (unsigned long)arg7;                         \
3597        _argvec[2+8] = (unsigned long)arg8;                         \
3598        _argvec[2+9] = (unsigned long)arg9;                         \
3599        _argvec[2+10] = (unsigned long)arg10;                       \
3600        _argvec[2+11] = (unsigned long)arg11;                       \
3601        __asm__ volatile(                                           \
3602           "mr 11,%1\n\t"                                           \
3603           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
3604           "std  2,-16(11)\n\t" &bsol;* save tocptr */                   \
3605           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
3606           VG_EXPAND_FRAME_BY_trashes_r3(144)                       \
3607                                                         \
3608           "ld  3,88(11)\n\t"                                       \
3609           "std 3,128(1)\n\t"                                       \
3610                                                         \
3611           "ld  3,80(11)\n\t"                                       \
3612           "std 3,120(1)\n\t"                                       \
3613                                                          \
3614           "ld  3,72(11)\n\t"                                       \
3615           "std 3,112(1)\n\t"                                       \
3616                                                       \
3617           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
3618           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
3619           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
3620           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
3621           "ld   7, 40(11)\n\t" &bsol;* arg5->r7 */                      \
3622           "ld   8, 48(11)\n\t" &bsol;* arg6->r8 */                      \
3623           "ld   9, 56(11)\n\t" &bsol;* arg7->r9 */                      \
3624           "ld  10, 64(11)\n\t" &bsol;* arg8->r10 */                     \
3625           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
3626           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
3627           "mr 11,%1\n\t"                                           \
3628           "mr %0,3\n\t"                                            \
3629           "ld  2,-16(11)\n\t" &bsol;* restore tocptr */                 \
3630           VG_CONTRACT_FRAME_BY(144)                                \
3631           VG_CONTRACT_FRAME_BY(512)                                \
3632           : &bsol;*out*/   "=r" (_res)                                  \
3633           : &bsol;*in*/    "r" (&_argvec[2])                            \
3634           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
3635        );                                                          \
3636        lval = (__typeof__(lval)) _res;                             \
3637     } while (0)
3638  #define CALL_FN_W_12W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
3639                                  arg7,arg8,arg9,arg10,arg11,arg12) \
3640     do {                                                           \
3641        volatile OrigFn        _orig = (orig);                      \
3642        volatile unsigned long _argvec[3+12];                       \
3643        volatile unsigned long _res;                                \
3644                   \
3645        _argvec[1]   = (unsigned long)_orig.r2;                     \
3646        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
3647        _argvec[2+1] = (unsigned long)arg1;                         \
3648        _argvec[2+2] = (unsigned long)arg2;                         \
3649        _argvec[2+3] = (unsigned long)arg3;                         \
3650        _argvec[2+4] = (unsigned long)arg4;                         \
3651        _argvec[2+5] = (unsigned long)arg5;                         \
3652        _argvec[2+6] = (unsigned long)arg6;                         \
3653        _argvec[2+7] = (unsigned long)arg7;                         \
3654        _argvec[2+8] = (unsigned long)arg8;                         \
3655        _argvec[2+9] = (unsigned long)arg9;                         \
3656        _argvec[2+10] = (unsigned long)arg10;                       \
3657        _argvec[2+11] = (unsigned long)arg11;                       \
3658        _argvec[2+12] = (unsigned long)arg12;                       \
3659        __asm__ volatile(                                           \
3660           "mr 11,%1\n\t"                                           \
3661           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
3662           "std  2,-16(11)\n\t" &bsol;* save tocptr */                   \
3663           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
3664           VG_EXPAND_FRAME_BY_trashes_r3(144)                       \
3665                                                         \
3666           "ld  3,96(11)\n\t"                                       \
3667           "std 3,136(1)\n\t"                                       \
3668                                                         \
3669           "ld  3,88(11)\n\t"                                       \
3670           "std 3,128(1)\n\t"                                       \
3671                                                         \
3672           "ld  3,80(11)\n\t"                                       \
3673           "std 3,120(1)\n\t"                                       \
3674                                                          \
3675           "ld  3,72(11)\n\t"                                       \
3676           "std 3,112(1)\n\t"                                       \
3677                                                       \
3678           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
3679           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
3680           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
3681           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
3682           "ld   7, 40(11)\n\t" &bsol;* arg5->r7 */                      \
3683           "ld   8, 48(11)\n\t" &bsol;* arg6->r8 */                      \
3684           "ld   9, 56(11)\n\t" &bsol;* arg7->r9 */                      \
3685           "ld  10, 64(11)\n\t" &bsol;* arg8->r10 */                     \
3686           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
3687           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
3688           "mr 11,%1\n\t"                                           \
3689           "mr %0,3\n\t"                                            \
3690           "ld  2,-16(11)\n\t" &bsol;* restore tocptr */                 \
3691           VG_CONTRACT_FRAME_BY(144)                                \
3692           VG_CONTRACT_FRAME_BY(512)                                \
3693           : &bsol;*out*/   "=r" (_res)                                  \
3694           : &bsol;*in*/    "r" (&_argvec[2])                            \
3695           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
3696        );                                                          \
3697        lval = (__typeof__(lval)) _res;                             \
3698     } while (0)
3699  #endif &bsol;* PLAT_ppc64_aix5 */
3700  #define VG_USERREQ_TOOL_BASE(a,b) \
3701     ((unsigned int)(((a)&0xff) << 24 | ((b)&0xff) << 16))
3702  #define VG_IS_TOOL_USERREQ(a, b, v) \
3703     (VG_USERREQ_TOOL_BASE(a,b) == ((v) & 0xffff0000))
3704  typedef
3705     enum { VG_USERREQ__RUNNING_ON_VALGRIND  = 0x1001,
3706            VG_USERREQ__DISCARD_TRANSLATIONS = 0x1002,
3707            VG_USERREQ__CLIENT_CALL0 = 0x1101,
3708            VG_USERREQ__CLIENT_CALL1 = 0x1102,
3709            VG_USERREQ__CLIENT_CALL2 = 0x1103,
3710            VG_USERREQ__CLIENT_CALL3 = 0x1104,
3711            VG_USERREQ__COUNT_ERRORS = 0x1201,
3712            VG_USERREQ__MALLOCLIKE_BLOCK = 0x1301,
3713            VG_USERREQ__FREELIKE_BLOCK   = 0x1302,
3714            VG_USERREQ__CREATE_MEMPOOL   = 0x1303,
3715            VG_USERREQ__DESTROY_MEMPOOL  = 0x1304,
3716            VG_USERREQ__MEMPOOL_ALLOC    = 0x1305,
3717            VG_USERREQ__MEMPOOL_FREE     = 0x1306,
3718            VG_USERREQ__MEMPOOL_TRIM     = 0x1307,
3719            VG_USERREQ__MOVE_MEMPOOL     = 0x1308,
3720            VG_USERREQ__MEMPOOL_CHANGE   = 0x1309,
3721            VG_USERREQ__MEMPOOL_EXISTS   = 0x130a,
3722            VG_USERREQ__PRINTF           = 0x1401,
3723            VG_USERREQ__PRINTF_BACKTRACE = 0x1402,
3724            VG_USERREQ__PRINTF_VALIST_BY_REF = 0x1403,
3725            VG_USERREQ__PRINTF_BACKTRACE_VALIST_BY_REF = 0x1404,
3726            VG_USERREQ__STACK_REGISTER   = 0x1501,
3727            VG_USERREQ__STACK_DEREGISTER = 0x1502,
3728            VG_USERREQ__STACK_CHANGE     = 0x1503,
3729            VG_USERREQ__LOAD_PDB_DEBUGINFO = 0x1601,
3730            VG_USERREQ__MAP_IP_TO_SRCLOC = 0x1701
3731     } Vg_ClientRequest;
3732  #if !defined(__GNUC__)
3733  #  define __extension__ &bsol;* */
3734  #endif
3735  #if defined(NVALGRIND)
3736  #define VALGRIND_DO_CLIENT_REQUEST_EXPR(                               \
3737          _zzq_default, _zzq_request,                                    \
3738          _zzq_arg1, _zzq_arg2, _zzq_arg3, _zzq_arg4, _zzq_arg5)         \
3739     (_zzq_default)
3740  #else &bsol;*defined(NVALGRIND)*/
3741  #if defined(_MSC_VER)
3742  #define VALGRIND_DO_CLIENT_REQUEST_EXPR(                                \
3743          _zzq_default, _zzq_request,                                     \
3744          _zzq_arg1, _zzq_arg2, _zzq_arg3, _zzq_arg4, _zzq_arg5)          \
3745     (vg_VALGRIND_DO_CLIENT_REQUEST_EXPR((uintptr_t)(_zzq_default),       \
3746          (_zzq_request), (uintptr_t)(_zzq_arg1), (uintptr_t)(_zzq_arg2), \
3747          (uintptr_t)(_zzq_arg3), (uintptr_t)(_zzq_arg4),                 \
3748          (uintptr_t)(_zzq_arg5)))
3749  static __inline unsigned
3750  vg_VALGRIND_DO_CLIENT_REQUEST_EXPR(uintptr_t _zzq_default,
3751                                     unsigned _zzq_request, uintptr_t _zzq_arg1,
3752                                     uintptr_t _zzq_arg2, uintptr_t _zzq_arg3,
3753                                     uintptr_t _zzq_arg4, uintptr_t _zzq_arg5)
3754  {
3755      unsigned _zzq_rlval;
3756      VALGRIND_DO_CLIENT_REQUEST(_zzq_rlval, _zzq_default, _zzq_request,
3757                        _zzq_arg1, _zzq_arg2, _zzq_arg3, _zzq_arg4, _zzq_arg5);
3758      return _zzq_rlval;
3759  }
3760  #else &bsol;*defined(_MSC_VER)*/
3761  #define VALGRIND_DO_CLIENT_REQUEST_EXPR(                               \
3762          _zzq_default, _zzq_request,                                    \
3763          _zzq_arg1, _zzq_arg2, _zzq_arg3, _zzq_arg4, _zzq_arg5)         \
3764     (__extension__({unsigned int _zzq_rlval;                            \
3765      VALGRIND_DO_CLIENT_REQUEST(_zzq_rlval, _zzq_default, _zzq_request, \
3766                  _zzq_arg1, _zzq_arg2, _zzq_arg3, _zzq_arg4, _zzq_arg5) \
3767      _zzq_rlval;                                                        \
3768     }))
3769  #endif &bsol;*defined(_MSC_VER)*/
3770  #endif &bsol;*defined(NVALGRIND)*/
3771  #define RUNNING_ON_VALGRIND                                           \
3772      VALGRIND_DO_CLIENT_REQUEST_EXPR(0 &bsol;* if not */,                   \
3773                                      VG_USERREQ__RUNNING_ON_VALGRIND,  \
3774                                      0, 0, 0, 0, 0)                    \
3775  
3776  #define VALGRIND_DISCARD_TRANSLATIONS(_qzz_addr,_qzz_len)         \
3777     {unsigned int _qzz_res;                                        \
3778      VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,                       \
3779                                 VG_USERREQ__DISCARD_TRANSLATIONS,  \
3780                                 _qzz_addr, _qzz_len, 0, 0, 0);     \
3781     }
3782  #if defined(NVALGRIND)
3783  #  define VALGRIND_PRINTF(...)
3784  #  define VALGRIND_PRINTF_BACKTRACE(...)
3785  #else &bsol;* NVALGRIND */
3786  #if !defined(_MSC_VER)
3787  static int VALGRIND_PRINTF(const char *format, ...)
3788     __attribute__((format(__printf__, 1, 2), __unused__));
3789  #endif
3790  static int
3791  #if defined(_MSC_VER)
3792  __inline
3793  #endif
3794  VALGRIND_PRINTF(const char *format, ...)
3795  {
3796     unsigned long _qzz_res;
3797     va_list vargs;
3798     va_start(vargs, format);
3799  #if defined(_MSC_VER)
3800     VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,
3801                                VG_USERREQ__PRINTF_VALIST_BY_REF,
3802                                (uintptr_t)format,
3803                                (uintptr_t)&vargs,
3804                                0, 0, 0);
3805  #else
3806     VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,
3807                                VG_USERREQ__PRINTF_VALIST_BY_REF,
3808                                (unsigned long)format,
3809                                (unsigned long)&vargs, 
3810                                0, 0, 0);
3811  #endif
3812     va_end(vargs);
3813     return (int)_qzz_res;
3814  }
3815  #if !defined(_MSC_VER)
3816  static int VALGRIND_PRINTF_BACKTRACE(const char *format, ...)
3817     __attribute__((format(__printf__, 1, 2), __unused__));
3818  #endif
3819  static int
3820  #if defined(_MSC_VER)
3821  __inline
3822  #endif
3823  VALGRIND_PRINTF_BACKTRACE(const char *format, ...)
3824  {
3825     unsigned long _qzz_res;
3826     va_list vargs;
3827     va_start(vargs, format);
3828  #if defined(_MSC_VER)
3829     VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,
3830                                VG_USERREQ__PRINTF_BACKTRACE_VALIST_BY_REF,
3831                                (uintptr_t)format,
3832                                (uintptr_t)&vargs,
3833                                0, 0, 0);
3834  #else
3835     VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,
3836                                VG_USERREQ__PRINTF_BACKTRACE_VALIST_BY_REF,
3837                                (unsigned long)format,
3838                                (unsigned long)&vargs, 
3839                                0, 0, 0);
3840  #endif
3841     va_end(vargs);
3842     return (int)_qzz_res;
3843  }
3844  #endif &bsol;* NVALGRIND */
3845  #define VALGRIND_NON_SIMD_CALL0(_qyy_fn)                          \
3846     __extension__                                                  \
3847     ({unsigned long _qyy_res;                                      \
3848      VALGRIND_DO_CLIENT_REQUEST(_qyy_res, 0 &bsol;* default return */,  \
3849                                 VG_USERREQ__CLIENT_CALL0,          \
3850                                 _qyy_fn,                           \
3851                                 0, 0, 0, 0);                       \
3852      _qyy_res;                                                     \
3853     })
3854  #define VALGRIND_NON_SIMD_CALL1(_qyy_fn, _qyy_arg1)               \
3855     __extension__                                                  \
3856     ({unsigned long _qyy_res;                                      \
3857      VALGRIND_DO_CLIENT_REQUEST(_qyy_res, 0 &bsol;* default return */,  \
3858                                 VG_USERREQ__CLIENT_CALL1,          \
3859                                 _qyy_fn,                           \
3860                                 _qyy_arg1, 0, 0, 0);               \
3861      _qyy_res;                                                     \
3862     })
3863  #define VALGRIND_NON_SIMD_CALL2(_qyy_fn, _qyy_arg1, _qyy_arg2)    \
3864     __extension__                                                  \
3865     ({unsigned long _qyy_res;                                      \
3866      VALGRIND_DO_CLIENT_REQUEST(_qyy_res, 0 &bsol;* default return */,  \
3867                                 VG_USERREQ__CLIENT_CALL2,          \
3868                                 _qyy_fn,                           \
3869                                 _qyy_arg1, _qyy_arg2, 0, 0);       \
3870      _qyy_res;                                                     \
3871     })
3872  #define VALGRIND_NON_SIMD_CALL3(_qyy_fn, _qyy_arg1, _qyy_arg2, _qyy_arg3) \
3873     __extension__                                                  \
3874     ({unsigned long _qyy_res;                                      \
3875      VALGRIND_DO_CLIENT_REQUEST(_qyy_res, 0 &bsol;* default return */,  \
3876                                 VG_USERREQ__CLIENT_CALL3,          \
3877                                 _qyy_fn,                           \
3878                                 _qyy_arg1, _qyy_arg2,              \
3879                                 _qyy_arg3, 0);                     \
3880      _qyy_res;                                                     \
3881     })
3882  #define VALGRIND_COUNT_ERRORS                                     \
3883     __extension__                                                  \
3884     ({unsigned int _qyy_res;                                       \
3885      VALGRIND_DO_CLIENT_REQUEST(_qyy_res, 0 &bsol;* default return */,  \
3886                                 VG_USERREQ__COUNT_ERRORS,          \
3887                                 0, 0, 0, 0, 0);                    \
3888      _qyy_res;                                                     \
3889     })
3890  #define VALGRIND_MALLOCLIKE_BLOCK(addr, sizeB, rzB, is_zeroed)    \
3891     {unsigned int _qzz_res;                                        \
3892      VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,                       \
3893                                 VG_USERREQ__MALLOCLIKE_BLOCK,      \
3894                                 addr, sizeB, rzB, is_zeroed, 0);   \
3895     }
3896  #define VALGRIND_FREELIKE_BLOCK(addr, rzB)                        \
3897     {unsigned int _qzz_res;                                        \
3898      VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,                       \
3899                                 VG_USERREQ__FREELIKE_BLOCK,        \
3900                                 addr, rzB, 0, 0, 0);               \
3901     }
3902  #define VALGRIND_CREATE_MEMPOOL(pool, rzB, is_zeroed)             \
3903     {unsigned int _qzz_res;                                        \
3904      VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,                       \
3905                                 VG_USERREQ__CREATE_MEMPOOL,        \
3906                                 pool, rzB, is_zeroed, 0, 0);       \
3907     }
3908  #define VALGRIND_DESTROY_MEMPOOL(pool)                            \
3909     {unsigned int _qzz_res;                                        \
3910      VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,                       \
3911                                 VG_USERREQ__DESTROY_MEMPOOL,       \
3912                                 pool, 0, 0, 0, 0);                 \
3913     }
3914  #define VALGRIND_MEMPOOL_ALLOC(pool, addr, size)                  \
3915     {unsigned int _qzz_res;                                        \
3916      VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,                       \
3917                                 VG_USERREQ__MEMPOOL_ALLOC,         \
3918                                 pool, addr, size, 0, 0);           \
3919     }
3920  #define VALGRIND_MEMPOOL_FREE(pool, addr)                         \
3921     {unsigned int _qzz_res;                                        \
3922      VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,                       \
3923                                 VG_USERREQ__MEMPOOL_FREE,          \
3924                                 pool, addr, 0, 0, 0);              \
3925     }
3926  #define VALGRIND_MEMPOOL_TRIM(pool, addr, size)                   \
3927     {unsigned int _qzz_res;                                        \
3928      VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,                       \
3929                                 VG_USERREQ__MEMPOOL_TRIM,          \
3930                                 pool, addr, size, 0, 0);           \
3931     }
3932  #define VALGRIND_MOVE_MEMPOOL(poolA, poolB)                       \
3933     {unsigned int _qzz_res;                                        \
3934      VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,                       \
3935                                 VG_USERREQ__MOVE_MEMPOOL,          \
3936                                 poolA, poolB, 0, 0, 0);            \
3937     }
3938  #define VALGRIND_MEMPOOL_CHANGE(pool, addrA, addrB, size)         \
3939     {unsigned int _qzz_res;                                        \
3940      VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,                       \
3941                                 VG_USERREQ__MEMPOOL_CHANGE,        \
3942                                 pool, addrA, addrB, size, 0);      \
3943     }
3944  #define VALGRIND_MEMPOOL_EXISTS(pool)                             \
3945     __extension__                                                  \
3946     ({unsigned int _qzz_res;                                       \
3947      VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,                       \
3948                                 VG_USERREQ__MEMPOOL_EXISTS,        \
3949                                 pool, 0, 0, 0, 0);                 \
3950      _qzz_res;                                                     \
3951     })
3952  #define VALGRIND_STACK_REGISTER(start, end)                       \
3953     __extension__                                                  \
3954     ({unsigned int _qzz_res;                                       \
3955      VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,                       \
3956                                 VG_USERREQ__STACK_REGISTER,        \
3957                                 start, end, 0, 0, 0);              \
3958      _qzz_res;                                                     \
3959     })
3960  #define VALGRIND_STACK_DEREGISTER(id)                             \
3961     {unsigned int _qzz_res;                                        \
3962      VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,                       \
3963                                 VG_USERREQ__STACK_DEREGISTER,      \
3964                                 id, 0, 0, 0, 0);                   \
3965     }
3966  #define VALGRIND_STACK_CHANGE(id, start, end)                     \
3967     {unsigned int _qzz_res;                                        \
3968      VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,                       \
3969                                 VG_USERREQ__STACK_CHANGE,          \
3970                                 id, start, end, 0, 0);             \
3971     }
3972  #define VALGRIND_LOAD_PDB_DEBUGINFO(fd, ptr, total_size, delta)   \
3973     {unsigned int _qzz_res;                                        \
3974      VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,                       \
3975                                 VG_USERREQ__LOAD_PDB_DEBUGINFO,    \
3976                                 fd, ptr, total_size, delta, 0);    \
3977     }
3978  #define VALGRIND_MAP_IP_TO_SRCLOC(addr, buf64)                    \
3979     {unsigned int _qzz_res;                                        \
3980      VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,                       \
3981                                 VG_USERREQ__MAP_IP_TO_SRCLOC,      \
3982                                 addr, buf64, 0, 0, 0);             \
3983     }
3984  #undef PLAT_x86_linux
3985  #undef PLAT_amd64_linux
3986  #undef PLAT_ppc32_linux
3987  #undef PLAT_ppc64_linux
3988  #undef PLAT_arm_linux
3989  #undef PLAT_ppc32_aix5
3990  #undef PLAT_ppc64_aix5
3991  #endif   &bsol;* __VALGRIND_H */
</code></pre>
        </div>
        <div class="column">
            <h3>nano-node-MDEwOlJlcG9zaXRvcnkxOTM0NzM0MA==-flat-valgrind.h</h3>
            <pre><code>1  #ifndef __VALGRIND_H
2  #define __VALGRIND_H
3  #define __VALGRIND_MAJOR__    3
4  #define __VALGRIND_MINOR__    6
5  #include <stdarg.h>
6  #undef PLAT_ppc64_aix5
7  #undef PLAT_ppc32_aix5
8  #undef PLAT_x86_darwin
9  #undef PLAT_amd64_darwin
10  #undef PLAT_x86_win32
11  #undef PLAT_x86_linux
12  #undef PLAT_amd64_linux
13  #undef PLAT_ppc32_linux
14  #undef PLAT_ppc64_linux
15  #undef PLAT_arm_linux
16  #if defined(_AIX) && defined(__64BIT__)
17  #  define PLAT_ppc64_aix5 1
18  #elif defined(_AIX) && !defined(__64BIT__)
19  #  define PLAT_ppc32_aix5 1
20  #elif defined(__APPLE__) && defined(__i386__)
21  #  define PLAT_x86_darwin 1
22  #elif defined(__APPLE__) && defined(__x86_64__)
23  #  define PLAT_amd64_darwin 1
24  #elif defined(__MINGW32__) || defined(__CYGWIN32__) || defined(_WIN32) && defined(_M_IX86)
25  #  define PLAT_x86_win32 1
26  #elif defined(__linux__) && defined(__i386__)
27  #  define PLAT_x86_linux 1
28  #elif defined(__linux__) && defined(__x86_64__)
29  #  define PLAT_amd64_linux 1
30  #elif defined(__linux__) && defined(__powerpc__) && !defined(__powerpc64__)
31  #  define PLAT_ppc32_linux 1
32  #elif defined(__linux__) && defined(__powerpc__) && defined(__powerpc64__)
33  #  define PLAT_ppc64_linux 1
34  #elif defined(__linux__) && defined(__arm__)
35  #  define PLAT_arm_linux 1
36  #else
37  #  if !defined(NVALGRIND)
38  #    define NVALGRIND 1
39  #  endif
40  #endif
41  #if defined(NVALGRIND)
42  #define VALGRIND_DO_CLIENT_REQUEST(                               \
43          _zzq_rlval, _zzq_default, _zzq_request,                   \
44          _zzq_arg1, _zzq_arg2, _zzq_arg3, _zzq_arg4, _zzq_arg5)    \
45     {                                                              \
46        (_zzq_rlval) = (_zzq_default);                              \
47     }
48  #else  &bsol;* ! NVALGRIND */
49  #if defined(PLAT_x86_linux)  ||  defined(PLAT_x86_darwin)  \
50      ||  (defined(PLAT_x86_win32) && defined(__GNUC__))
51  typedef
52     struct { 
53        unsigned int nraddr; &bsol;* where's the code? */
54     }
55     OrigFn;
56  #define __SPECIAL_INSTRUCTION_PREAMBLE                            \
57                       "roll $3,  %%edi ; roll $13, %%edi\n\t"      \
58                       "roll $29, %%edi ; roll $19, %%edi\n\t"
59  #define VALGRIND_DO_CLIENT_REQUEST(                               \
60          _zzq_rlval, _zzq_default, _zzq_request,                   \
61          _zzq_arg1, _zzq_arg2, _zzq_arg3, _zzq_arg4, _zzq_arg5)    \
62    { volatile unsigned int _zzq_args[6];                           \
63      volatile unsigned int _zzq_result;                            \
64      _zzq_args[0] = (unsigned int)(_zzq_request);                  \
65      _zzq_args[1] = (unsigned int)(_zzq_arg1);                     \
66      _zzq_args[2] = (unsigned int)(_zzq_arg2);                     \
67      _zzq_args[3] = (unsigned int)(_zzq_arg3);                     \
68      _zzq_args[4] = (unsigned int)(_zzq_arg4);                     \
69      _zzq_args[5] = (unsigned int)(_zzq_arg5);                     \
70      __asm__ volatile(__SPECIAL_INSTRUCTION_PREAMBLE               \
71                                \
72                       "xchgl %%ebx,%%ebx"                          \
73                       : "=d" (_zzq_result)                         \
74                       : "a" (&_zzq_args[0]), "0" (_zzq_default)    \
75                       : "cc", "memory"                             \
76                      );                                            \
77      _zzq_rlval = _zzq_result;                                     \
78    }
79  #define VALGRIND_GET_NR_CONTEXT(_zzq_rlval)                       \
80    { volatile OrigFn* _zzq_orig = &(_zzq_rlval);                   \
81      volatile unsigned int __addr;                                 \
82      __asm__ volatile(__SPECIAL_INSTRUCTION_PREAMBLE               \
83                                           \
84                       "xchgl %%ecx,%%ecx"                          \
85                       : "=a" (__addr)                              \
86                       :                                            \
87                       : "cc", "memory"                             \
88                      );                                            \
89      _zzq_orig->nraddr = __addr;                                   \
90    }
91  #define VALGRIND_CALL_NOREDIR_EAX                                 \
92                       __SPECIAL_INSTRUCTION_PREAMBLE               \
93                                            \
94                       "xchgl %%edx,%%edx\n\t"
95  #endif &bsol;* PLAT_x86_linux || PLAT_x86_darwin || (PLAT_x86_win32 && __GNUC__) */
96  #if defined(PLAT_x86_win32) && !defined(__GNUC__)
97  typedef
98     struct { 
99        unsigned int nraddr; &bsol;* where's the code? */
100     }
101     OrigFn;
102  #if defined(_MSC_VER)
103  #define __SPECIAL_INSTRUCTION_PREAMBLE                            \
104                       __asm rol edi, 3  __asm rol edi, 13          \
105                       __asm rol edi, 29 __asm rol edi, 19
106  #define VALGRIND_DO_CLIENT_REQUEST(                               \
107          _zzq_rlval, _zzq_default, _zzq_request,                   \
108          _zzq_arg1, _zzq_arg2, _zzq_arg3, _zzq_arg4, _zzq_arg5)    \
109    { volatile uintptr_t _zzq_args[6];                              \
110      volatile unsigned int _zzq_result;                            \
111      _zzq_args[0] = (uintptr_t)(_zzq_request);                     \
112      _zzq_args[1] = (uintptr_t)(_zzq_arg1);                        \
113      _zzq_args[2] = (uintptr_t)(_zzq_arg2);                        \
114      _zzq_args[3] = (uintptr_t)(_zzq_arg3);                        \
115      _zzq_args[4] = (uintptr_t)(_zzq_arg4);                        \
116      _zzq_args[5] = (uintptr_t)(_zzq_arg5);                        \
117      __asm { __asm lea eax, _zzq_args __asm mov edx, _zzq_default  \
118              __SPECIAL_INSTRUCTION_PREAMBLE                        \
119                                \
120              __asm xchg ebx,ebx                                    \
121              __asm mov _zzq_result, edx                            \
122      }                                                             \
123      _zzq_rlval = _zzq_result;                                     \
124    }
125  #define VALGRIND_GET_NR_CONTEXT(_zzq_rlval)                       \
126    { volatile OrigFn* _zzq_orig = &(_zzq_rlval);                   \
127      volatile unsigned int __addr;                                 \
128      __asm { __SPECIAL_INSTRUCTION_PREAMBLE                        \
129                                           \
130              __asm xchg ecx,ecx                                    \
131              __asm mov __addr, eax                                 \
132      }                                                             \
133      _zzq_orig->nraddr = __addr;                                   \
134    }
135  #define VALGRIND_CALL_NOREDIR_EAX ERROR
136  #else
137  #error Unsupported compiler.
138  #endif
139  #endif &bsol;* PLAT_x86_win32 */
140  #if defined(PLAT_amd64_linux)  ||  defined(PLAT_amd64_darwin)
141  typedef
142     struct { 
143        unsigned long long int nraddr; &bsol;* where's the code? */
144     }
145     OrigFn;
146  #define __SPECIAL_INSTRUCTION_PREAMBLE                            \
147                       "rolq $3,  %%rdi ; rolq $13, %%rdi\n\t"      \
148                       "rolq $61, %%rdi ; rolq $51, %%rdi\n\t"
149  #define VALGRIND_DO_CLIENT_REQUEST(                               \
150          _zzq_rlval, _zzq_default, _zzq_request,                   \
151          _zzq_arg1, _zzq_arg2, _zzq_arg3, _zzq_arg4, _zzq_arg5)    \
152    { volatile unsigned long long int _zzq_args[6];                 \
153      volatile unsigned long long int _zzq_result;                  \
154      _zzq_args[0] = (unsigned long long int)(_zzq_request);        \
155      _zzq_args[1] = (unsigned long long int)(_zzq_arg1);           \
156      _zzq_args[2] = (unsigned long long int)(_zzq_arg2);           \
157      _zzq_args[3] = (unsigned long long int)(_zzq_arg3);           \
158      _zzq_args[4] = (unsigned long long int)(_zzq_arg4);           \
159      _zzq_args[5] = (unsigned long long int)(_zzq_arg5);           \
160      __asm__ volatile(__SPECIAL_INSTRUCTION_PREAMBLE               \
161                                \
162                       "xchgq %%rbx,%%rbx"                          \
163                       : "=d" (_zzq_result)                         \
164                       : "a" (&_zzq_args[0]), "0" (_zzq_default)    \
165                       : "cc", "memory"                             \
166                      );                                            \
167      _zzq_rlval = _zzq_result;                                     \
168    }
169  #define VALGRIND_GET_NR_CONTEXT(_zzq_rlval)                       \
170    { volatile OrigFn* _zzq_orig = &(_zzq_rlval);                   \
171      volatile unsigned long long int __addr;                       \
172      __asm__ volatile(__SPECIAL_INSTRUCTION_PREAMBLE               \
173                                           \
174                       "xchgq %%rcx,%%rcx"                          \
175                       : "=a" (__addr)                              \
176                       :                                            \
177                       : "cc", "memory"                             \
178                      );                                            \
179      _zzq_orig->nraddr = __addr;                                   \
180    }
181  #define VALGRIND_CALL_NOREDIR_RAX                                 \
182                       __SPECIAL_INSTRUCTION_PREAMBLE               \
183                                            \
184                       "xchgq %%rdx,%%rdx\n\t"
185  #endif &bsol;* PLAT_amd64_linux || PLAT_amd64_darwin */
186  #if defined(PLAT_ppc32_linux)
187  typedef
188     struct { 
189        unsigned int nraddr; &bsol;* where's the code? */
190     }
191     OrigFn;
192  #define __SPECIAL_INSTRUCTION_PREAMBLE                            \
193                       "rlwinm 0,0,3,0,0  ; rlwinm 0,0,13,0,0\n\t"  \
194                       "rlwinm 0,0,29,0,0 ; rlwinm 0,0,19,0,0\n\t"
195  #define VALGRIND_DO_CLIENT_REQUEST(                               \
196          _zzq_rlval, _zzq_default, _zzq_request,                   \
197          _zzq_arg1, _zzq_arg2, _zzq_arg3, _zzq_arg4, _zzq_arg5)    \
198                                                                    \
199    {          unsigned int  _zzq_args[6];                          \
200               unsigned int  _zzq_result;                           \
201               unsigned int* _zzq_ptr;                              \
202      _zzq_args[0] = (unsigned int)(_zzq_request);                  \
203      _zzq_args[1] = (unsigned int)(_zzq_arg1);                     \
204      _zzq_args[2] = (unsigned int)(_zzq_arg2);                     \
205      _zzq_args[3] = (unsigned int)(_zzq_arg3);                     \
206      _zzq_args[4] = (unsigned int)(_zzq_arg4);                     \
207      _zzq_args[5] = (unsigned int)(_zzq_arg5);                     \
208      _zzq_ptr = _zzq_args;                                         \
209      __asm__ volatile("mr 3,%1\n\t" &bsol;*default*/                    \
210                       "mr 4,%2\n\t" &bsol;*ptr*/                        \
211                       __SPECIAL_INSTRUCTION_PREAMBLE               \
212                                  \
213                       "or 1,1,1\n\t"                               \
214                       "mr %0,3"     &bsol;*result*/                     \
215                       : "=b" (_zzq_result)                         \
216                       : "b" (_zzq_default), "b" (_zzq_ptr)         \
217                       : "cc", "memory", "r3", "r4");               \
218      _zzq_rlval = _zzq_result;                                     \
219    }
220  #define VALGRIND_GET_NR_CONTEXT(_zzq_rlval)                       \
221    { volatile OrigFn* _zzq_orig = &(_zzq_rlval);                   \
222      unsigned int __addr;                                          \
223      __asm__ volatile(__SPECIAL_INSTRUCTION_PREAMBLE               \
224                                            \
225                       "or 2,2,2\n\t"                               \
226                       "mr %0,3"                                    \
227                       : "=b" (__addr)                              \
228                       :                                            \
229                       : "cc", "memory", "r3"                       \
230                      );                                            \
231      _zzq_orig->nraddr = __addr;                                   \
232    }
233  #define VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                   \
234                       __SPECIAL_INSTRUCTION_PREAMBLE               \
235                              \
236                       "or 3,3,3\n\t"
237  #endif &bsol;* PLAT_ppc32_linux */
238  #if defined(PLAT_ppc64_linux)
239  typedef
240     struct { 
241        unsigned long long int nraddr; &bsol;* where's the code? */
242        unsigned long long int r2;  &bsol;* what tocptr do we need? */
243     }
244     OrigFn;
245  #define __SPECIAL_INSTRUCTION_PREAMBLE                            \
246                       "rotldi 0,0,3  ; rotldi 0,0,13\n\t"          \
247                       "rotldi 0,0,61 ; rotldi 0,0,51\n\t"
248  #define VALGRIND_DO_CLIENT_REQUEST(                               \
249          _zzq_rlval, _zzq_default, _zzq_request,                   \
250          _zzq_arg1, _zzq_arg2, _zzq_arg3, _zzq_arg4, _zzq_arg5)    \
251                                                                    \
252    {          unsigned long long int  _zzq_args[6];                \
253      register unsigned long long int  _zzq_result __asm__("r3");   \
254      register unsigned long long int* _zzq_ptr __asm__("r4");      \
255      _zzq_args[0] = (unsigned long long int)(_zzq_request);        \
256      _zzq_args[1] = (unsigned long long int)(_zzq_arg1);           \
257      _zzq_args[2] = (unsigned long long int)(_zzq_arg2);           \
258      _zzq_args[3] = (unsigned long long int)(_zzq_arg3);           \
259      _zzq_args[4] = (unsigned long long int)(_zzq_arg4);           \
260      _zzq_args[5] = (unsigned long long int)(_zzq_arg5);           \
261      _zzq_ptr = _zzq_args;                                         \
262      __asm__ volatile(__SPECIAL_INSTRUCTION_PREAMBLE               \
263                                  \
264                       "or 1,1,1"                                   \
265                       : "=r" (_zzq_result)                         \
266                       : "0" (_zzq_default), "r" (_zzq_ptr)         \
267                       : "cc", "memory");                           \
268      _zzq_rlval = _zzq_result;                                     \
269    }
270  #define VALGRIND_GET_NR_CONTEXT(_zzq_rlval)                       \
271    { volatile OrigFn* _zzq_orig = &(_zzq_rlval);                   \
272      register unsigned long long int __addr __asm__("r3");         \
273      __asm__ volatile(__SPECIAL_INSTRUCTION_PREAMBLE               \
274                                            \
275                       "or 2,2,2"                                   \
276                       : "=r" (__addr)                              \
277                       :                                            \
278                       : "cc", "memory"                             \
279                      );                                            \
280      _zzq_orig->nraddr = __addr;                                   \
281      __asm__ volatile(__SPECIAL_INSTRUCTION_PREAMBLE               \
282                                       \
283                       "or 4,4,4"                                   \
284                       : "=r" (__addr)                              \
285                       :                                            \
286                       : "cc", "memory"                             \
287                      );                                            \
288      _zzq_orig->r2 = __addr;                                       \
289    }
290  #define VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                   \
291                       __SPECIAL_INSTRUCTION_PREAMBLE               \
292                              \
293                       "or 3,3,3\n\t"
294  #endif &bsol;* PLAT_ppc64_linux */
295  #if defined(PLAT_arm_linux)
296  typedef
297     struct { 
298        unsigned int nraddr; &bsol;* where's the code? */
299     }
300     OrigFn;
301  #define __SPECIAL_INSTRUCTION_PREAMBLE                            \
302              "mov r12, r12, ror #3  ; mov r12, r12, ror #13 \n\t"  \
303              "mov r12, r12, ror #29 ; mov r12, r12, ror #19 \n\t"
304  #define VALGRIND_DO_CLIENT_REQUEST(                               \
305          _zzq_rlval, _zzq_default, _zzq_request,                   \
306          _zzq_arg1, _zzq_arg2, _zzq_arg3, _zzq_arg4, _zzq_arg5)    \
307                                                                    \
308    { volatile unsigned int  _zzq_args[6];                          \
309      volatile unsigned int  _zzq_result;                           \
310      _zzq_args[0] = (unsigned int)(_zzq_request);                  \
311      _zzq_args[1] = (unsigned int)(_zzq_arg1);                     \
312      _zzq_args[2] = (unsigned int)(_zzq_arg2);                     \
313      _zzq_args[3] = (unsigned int)(_zzq_arg3);                     \
314      _zzq_args[4] = (unsigned int)(_zzq_arg4);                     \
315      _zzq_args[5] = (unsigned int)(_zzq_arg5);                     \
316      __asm__ volatile("mov r3, %1\n\t" &bsol;*default*/                 \
317                       "mov r4, %2\n\t" &bsol;*ptr*/                     \
318                       __SPECIAL_INSTRUCTION_PREAMBLE               \
319                                    \
320                       "orr r10, r10, r10\n\t"                      \
321                       "mov %0, r3"     &bsol;*result*/                  \
322                       : "=r" (_zzq_result)                         \
323                       : "r" (_zzq_default), "r" (&_zzq_args[0])    \
324                       : "cc","memory", "r3", "r4");                \
325      _zzq_rlval = _zzq_result;                                     \
326    }
327  #define VALGRIND_GET_NR_CONTEXT(_zzq_rlval)                       \
328    { volatile OrigFn* _zzq_orig = &(_zzq_rlval);                   \
329      unsigned int __addr;                                          \
330      __asm__ volatile(__SPECIAL_INSTRUCTION_PREAMBLE               \
331                                             \
332                       "orr r11, r11, r11\n\t"                      \
333                       "mov %0, r3"                                 \
334                       : "=r" (__addr)                              \
335                       :                                            \
336                       : "cc", "memory", "r3"                       \
337                      );                                            \
338      _zzq_orig->nraddr = __addr;                                   \
339    }
340  #define VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R4                    \
341                       __SPECIAL_INSTRUCTION_PREAMBLE               \
342                               \
343                       "orr r12, r12, r12\n\t"
344  #endif &bsol;* PLAT_arm_linux */
345  #if defined(PLAT_ppc32_aix5)
346  typedef
347     struct { 
348        unsigned int nraddr; &bsol;* where's the code? */
349        unsigned int r2;  &bsol;* what tocptr do we need? */
350     }
351     OrigFn;
352  #define __SPECIAL_INSTRUCTION_PREAMBLE                            \
353                       "rlwinm 0,0,3,0,0  ; rlwinm 0,0,13,0,0\n\t"  \
354                       "rlwinm 0,0,29,0,0 ; rlwinm 0,0,19,0,0\n\t"
355  #define VALGRIND_DO_CLIENT_REQUEST(                               \
356          _zzq_rlval, _zzq_default, _zzq_request,                   \
357          _zzq_arg1, _zzq_arg2, _zzq_arg3, _zzq_arg4, _zzq_arg5)    \
358                                                                    \
359    {          unsigned int  _zzq_args[7];                          \
360      register unsigned int  _zzq_result;                           \
361      register unsigned int* _zzq_ptr;                              \
362      _zzq_args[0] = (unsigned int)(_zzq_request);                  \
363      _zzq_args[1] = (unsigned int)(_zzq_arg1);                     \
364      _zzq_args[2] = (unsigned int)(_zzq_arg2);                     \
365      _zzq_args[3] = (unsigned int)(_zzq_arg3);                     \
366      _zzq_args[4] = (unsigned int)(_zzq_arg4);                     \
367      _zzq_args[5] = (unsigned int)(_zzq_arg5);                     \
368      _zzq_args[6] = (unsigned int)(_zzq_default);                  \
369      _zzq_ptr = _zzq_args;                                         \
370      __asm__ volatile("mr 4,%1\n\t"                                \
371                       "lwz 3, 24(4)\n\t"                           \
372                       __SPECIAL_INSTRUCTION_PREAMBLE               \
373                                  \
374                       "or 1,1,1\n\t"                               \
375                       "mr %0,3"                                    \
376                       : "=b" (_zzq_result)                         \
377                       : "b" (_zzq_ptr)                             \
378                       : "r3", "r4", "cc", "memory");               \
379      _zzq_rlval = _zzq_result;                                     \
380    }
381  #define VALGRIND_GET_NR_CONTEXT(_zzq_rlval)                       \
382    { volatile OrigFn* _zzq_orig = &(_zzq_rlval);                   \
383      register unsigned int __addr;                                 \
384      __asm__ volatile(__SPECIAL_INSTRUCTION_PREAMBLE               \
385                                            \
386                       "or 2,2,2\n\t"                               \
387                       "mr %0,3"                                    \
388                       : "=b" (__addr)                              \
389                       :                                            \
390                       : "r3", "cc", "memory"                       \
391                      );                                            \
392      _zzq_orig->nraddr = __addr;                                   \
393      __asm__ volatile(__SPECIAL_INSTRUCTION_PREAMBLE               \
394                                       \
395                       "or 4,4,4\n\t"                               \
396                       "mr %0,3"                                    \
397                       : "=b" (__addr)                              \
398                       :                                            \
399                       : "r3", "cc", "memory"                       \
400                      );                                            \
401      _zzq_orig->r2 = __addr;                                       \
402    }
403  #define VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                   \
404                       __SPECIAL_INSTRUCTION_PREAMBLE               \
405                              \
406                       "or 3,3,3\n\t"
407  #endif &bsol;* PLAT_ppc32_aix5 */
408  #if defined(PLAT_ppc64_aix5)
409  typedef
410     struct { 
411        unsigned long long int nraddr; &bsol;* where's the code? */
412        unsigned long long int r2;  &bsol;* what tocptr do we need? */
413     }
414     OrigFn;
415  #define __SPECIAL_INSTRUCTION_PREAMBLE                            \
416                       "rotldi 0,0,3  ; rotldi 0,0,13\n\t"          \
417                       "rotldi 0,0,61 ; rotldi 0,0,51\n\t"
418  #define VALGRIND_DO_CLIENT_REQUEST(                               \
419          _zzq_rlval, _zzq_default, _zzq_request,                   \
420          _zzq_arg1, _zzq_arg2, _zzq_arg3, _zzq_arg4, _zzq_arg5)    \
421                                                                    \
422    {          unsigned long long int  _zzq_args[7];                \
423      register unsigned long long int  _zzq_result;                 \
424      register unsigned long long int* _zzq_ptr;                    \
425      _zzq_args[0] = (unsigned int long long)(_zzq_request);        \
426      _zzq_args[1] = (unsigned int long long)(_zzq_arg1);           \
427      _zzq_args[2] = (unsigned int long long)(_zzq_arg2);           \
428      _zzq_args[3] = (unsigned int long long)(_zzq_arg3);           \
429      _zzq_args[4] = (unsigned int long long)(_zzq_arg4);           \
430      _zzq_args[5] = (unsigned int long long)(_zzq_arg5);           \
431      _zzq_args[6] = (unsigned int long long)(_zzq_default);        \
432      _zzq_ptr = _zzq_args;                                         \
433      __asm__ volatile("mr 4,%1\n\t"                                \
434                       "ld 3, 48(4)\n\t"                            \
435                       __SPECIAL_INSTRUCTION_PREAMBLE               \
436                                  \
437                       "or 1,1,1\n\t"                               \
438                       "mr %0,3"                                    \
439                       : "=b" (_zzq_result)                         \
440                       : "b" (_zzq_ptr)                             \
441                       : "r3", "r4", "cc", "memory");               \
442      _zzq_rlval = _zzq_result;                                     \
443    }
444  #define VALGRIND_GET_NR_CONTEXT(_zzq_rlval)                       \
445    { volatile OrigFn* _zzq_orig = &(_zzq_rlval);                   \
446      register unsigned long long int __addr;                       \
447      __asm__ volatile(__SPECIAL_INSTRUCTION_PREAMBLE               \
448                                            \
449                       "or 2,2,2\n\t"                               \
450                       "mr %0,3"                                    \
451                       : "=b" (__addr)                              \
452                       :                                            \
453                       : "r3", "cc", "memory"                       \
454                      );                                            \
455      _zzq_orig->nraddr = __addr;                                   \
456      __asm__ volatile(__SPECIAL_INSTRUCTION_PREAMBLE               \
457                                       \
458                       "or 4,4,4\n\t"                               \
459                       "mr %0,3"                                    \
460                       : "=b" (__addr)                              \
461                       :                                            \
462                       : "r3", "cc", "memory"                       \
463                      );                                            \
464      _zzq_orig->r2 = __addr;                                       \
465    }
466  #define VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                   \
467                       __SPECIAL_INSTRUCTION_PREAMBLE               \
468                              \
469                       "or 3,3,3\n\t"
470  #endif &bsol;* PLAT_ppc64_aix5 */
471  #endif &bsol;* NVALGRIND */
472  #define VG_CONCAT4(_aa,_bb,_cc,_dd) _aa##_bb##_cc##_dd
473  #define I_WRAP_SONAME_FNNAME_ZU(soname,fnname)                    \
474     VG_CONCAT4(_vgwZU_,soname,_,fnname)
475  #define I_WRAP_SONAME_FNNAME_ZZ(soname,fnname)                    \
476     VG_CONCAT4(_vgwZZ_,soname,_,fnname)
477  #define VALGRIND_GET_ORIG_FN(_lval)  VALGRIND_GET_NR_CONTEXT(_lval)
478  #define CALL_FN_v_v(fnptr)                                        \
479     do { volatile unsigned long _junk;                             \
480          CALL_FN_W_v(_junk,fnptr); } while (0)
481  #define CALL_FN_v_W(fnptr, arg1)                                  \
482     do { volatile unsigned long _junk;                             \
483          CALL_FN_W_W(_junk,fnptr,arg1); } while (0)
484  #define CALL_FN_v_WW(fnptr, arg1,arg2)                            \
485     do { volatile unsigned long _junk;                             \
486          CALL_FN_W_WW(_junk,fnptr,arg1,arg2); } while (0)
487  #define CALL_FN_v_WWW(fnptr, arg1,arg2,arg3)                      \
488     do { volatile unsigned long _junk;                             \
489          CALL_FN_W_WWW(_junk,fnptr,arg1,arg2,arg3); } while (0)
490  #define CALL_FN_v_WWWW(fnptr, arg1,arg2,arg3,arg4)                \
491     do { volatile unsigned long _junk;                             \
492          CALL_FN_W_WWWW(_junk,fnptr,arg1,arg2,arg3,arg4); } while (0)
493  #define CALL_FN_v_5W(fnptr, arg1,arg2,arg3,arg4,arg5)             \
494     do { volatile unsigned long _junk;                             \
495          CALL_FN_W_5W(_junk,fnptr,arg1,arg2,arg3,arg4,arg5); } while (0)
496  #define CALL_FN_v_6W(fnptr, arg1,arg2,arg3,arg4,arg5,arg6)        \
497     do { volatile unsigned long _junk;                             \
498          CALL_FN_W_6W(_junk,fnptr,arg1,arg2,arg3,arg4,arg5,arg6); } while (0)
499  #define CALL_FN_v_7W(fnptr, arg1,arg2,arg3,arg4,arg5,arg6,arg7)   \
500     do { volatile unsigned long _junk;                             \
501          CALL_FN_W_7W(_junk,fnptr,arg1,arg2,arg3,arg4,arg5,arg6,arg7); } while (0)
502  #if defined(PLAT_x86_linux)  ||  defined(PLAT_x86_darwin)
503  #define __CALLER_SAVED_REGS &bsol;*"eax"*/ "ecx", "edx"
504  #define CALL_FN_W_v(lval, orig)                                   \
505     do {                                                           \
506        volatile OrigFn        _orig = (orig);                      \
507        volatile unsigned long _argvec[1];                          \
508        volatile unsigned long _res;                                \
509        _argvec[0] = (unsigned long)_orig.nraddr;                   \
510        __asm__ volatile(                                           \
511           "movl (%%eax), %%eax\n\t"  &bsol;* target->%eax */            \
512           VALGRIND_CALL_NOREDIR_EAX                                \
513           : &bsol;*out*/   "=a" (_res)                                  \
514           : &bsol;*in*/    "a" (&_argvec[0])                            \
515           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
516        );                                                          \
517        lval = (__typeof__(lval)) _res;                             \
518     } while (0)
519  #define CALL_FN_W_W(lval, orig, arg1)                             \
520     do {                                                           \
521        volatile OrigFn        _orig = (orig);                      \
522        volatile unsigned long _argvec[2];                          \
523        volatile unsigned long _res;                                \
524        _argvec[0] = (unsigned long)_orig.nraddr;                   \
525        _argvec[1] = (unsigned long)(arg1);                         \
526        __asm__ volatile(                                           \
527           "subl $12, %%esp\n\t"                                    \
528           "pushl 4(%%eax)\n\t"                                     \
529           "movl (%%eax), %%eax\n\t"  &bsol;* target->%eax */            \
530           VALGRIND_CALL_NOREDIR_EAX                                \
531           "addl $16, %%esp\n"                                      \
532           : &bsol;*out*/   "=a" (_res)                                  \
533           : &bsol;*in*/    "a" (&_argvec[0])                            \
534           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
535        );                                                          \
536        lval = (__typeof__(lval)) _res;                             \
537     } while (0)
538  #define CALL_FN_W_WW(lval, orig, arg1,arg2)                       \
539     do {                                                           \
540        volatile OrigFn        _orig = (orig);                      \
541        volatile unsigned long _argvec[3];                          \
542        volatile unsigned long _res;                                \
543        _argvec[0] = (unsigned long)_orig.nraddr;                   \
544        _argvec[1] = (unsigned long)(arg1);                         \
545        _argvec[2] = (unsigned long)(arg2);                         \
546        __asm__ volatile(                                           \
547           "subl $8, %%esp\n\t"                                     \
548           "pushl 8(%%eax)\n\t"                                     \
549           "pushl 4(%%eax)\n\t"                                     \
550           "movl (%%eax), %%eax\n\t"  &bsol;* target->%eax */            \
551           VALGRIND_CALL_NOREDIR_EAX                                \
552           "addl $16, %%esp\n"                                      \
553           : &bsol;*out*/   "=a" (_res)                                  \
554           : &bsol;*in*/    "a" (&_argvec[0])                            \
555           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
556        );                                                          \
557        lval = (__typeof__(lval)) _res;                             \
558     } while (0)
559  #define CALL_FN_W_WWW(lval, orig, arg1,arg2,arg3)                 \
560     do {                                                           \
561        volatile OrigFn        _orig = (orig);                      \
562        volatile unsigned long _argvec[4];                          \
563        volatile unsigned long _res;                                \
564        _argvec[0] = (unsigned long)_orig.nraddr;                   \
565        _argvec[1] = (unsigned long)(arg1);                         \
566        _argvec[2] = (unsigned long)(arg2);                         \
567        _argvec[3] = (unsigned long)(arg3);                         \
568        __asm__ volatile(                                           \
569           "subl $4, %%esp\n\t"                                     \
570           "pushl 12(%%eax)\n\t"                                    \
571           "pushl 8(%%eax)\n\t"                                     \
572           "pushl 4(%%eax)\n\t"                                     \
573           "movl (%%eax), %%eax\n\t"  &bsol;* target->%eax */            \
574           VALGRIND_CALL_NOREDIR_EAX                                \
575           "addl $16, %%esp\n"                                      \
576           : &bsol;*out*/   "=a" (_res)                                  \
577           : &bsol;*in*/    "a" (&_argvec[0])                            \
578           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
579        );                                                          \
580        lval = (__typeof__(lval)) _res;                             \
581     } while (0)
582  #define CALL_FN_W_WWWW(lval, orig, arg1,arg2,arg3,arg4)           \
583     do {                                                           \
584        volatile OrigFn        _orig = (orig);                      \
585        volatile unsigned long _argvec[5];                          \
586        volatile unsigned long _res;                                \
587        _argvec[0] = (unsigned long)_orig.nraddr;                   \
588        _argvec[1] = (unsigned long)(arg1);                         \
589        _argvec[2] = (unsigned long)(arg2);                         \
590        _argvec[3] = (unsigned long)(arg3);                         \
591        _argvec[4] = (unsigned long)(arg4);                         \
592        __asm__ volatile(                                           \
593           "pushl 16(%%eax)\n\t"                                    \
594           "pushl 12(%%eax)\n\t"                                    \
595           "pushl 8(%%eax)\n\t"                                     \
596           "pushl 4(%%eax)\n\t"                                     \
597           "movl (%%eax), %%eax\n\t"  &bsol;* target->%eax */            \
598           VALGRIND_CALL_NOREDIR_EAX                                \
599           "addl $16, %%esp\n"                                      \
600           : &bsol;*out*/   "=a" (_res)                                  \
601           : &bsol;*in*/    "a" (&_argvec[0])                            \
602           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
603        );                                                          \
604        lval = (__typeof__(lval)) _res;                             \
605     } while (0)
606  #define CALL_FN_W_5W(lval, orig, arg1,arg2,arg3,arg4,arg5)        \
607     do {                                                           \
608        volatile OrigFn        _orig = (orig);                      \
609        volatile unsigned long _argvec[6];                          \
610        volatile unsigned long _res;                                \
611        _argvec[0] = (unsigned long)_orig.nraddr;                   \
612        _argvec[1] = (unsigned long)(arg1);                         \
613        _argvec[2] = (unsigned long)(arg2);                         \
614        _argvec[3] = (unsigned long)(arg3);                         \
615        _argvec[4] = (unsigned long)(arg4);                         \
616        _argvec[5] = (unsigned long)(arg5);                         \
617        __asm__ volatile(                                           \
618           "subl $12, %%esp\n\t"                                    \
619           "pushl 20(%%eax)\n\t"                                    \
620           "pushl 16(%%eax)\n\t"                                    \
621           "pushl 12(%%eax)\n\t"                                    \
622           "pushl 8(%%eax)\n\t"                                     \
623           "pushl 4(%%eax)\n\t"                                     \
624           "movl (%%eax), %%eax\n\t"  &bsol;* target->%eax */            \
625           VALGRIND_CALL_NOREDIR_EAX                                \
626           "addl $32, %%esp\n"                                      \
627           : &bsol;*out*/   "=a" (_res)                                  \
628           : &bsol;*in*/    "a" (&_argvec[0])                            \
629           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
630        );                                                          \
631        lval = (__typeof__(lval)) _res;                             \
632     } while (0)
633  #define CALL_FN_W_6W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6)   \
634     do {                                                           \
635        volatile OrigFn        _orig = (orig);                      \
636        volatile unsigned long _argvec[7];                          \
637        volatile unsigned long _res;                                \
638        _argvec[0] = (unsigned long)_orig.nraddr;                   \
639        _argvec[1] = (unsigned long)(arg1);                         \
640        _argvec[2] = (unsigned long)(arg2);                         \
641        _argvec[3] = (unsigned long)(arg3);                         \
642        _argvec[4] = (unsigned long)(arg4);                         \
643        _argvec[5] = (unsigned long)(arg5);                         \
644        _argvec[6] = (unsigned long)(arg6);                         \
645        __asm__ volatile(                                           \
646           "subl $8, %%esp\n\t"                                     \
647           "pushl 24(%%eax)\n\t"                                    \
648           "pushl 20(%%eax)\n\t"                                    \
649           "pushl 16(%%eax)\n\t"                                    \
650           "pushl 12(%%eax)\n\t"                                    \
651           "pushl 8(%%eax)\n\t"                                     \
652           "pushl 4(%%eax)\n\t"                                     \
653           "movl (%%eax), %%eax\n\t"  &bsol;* target->%eax */            \
654           VALGRIND_CALL_NOREDIR_EAX                                \
655           "addl $32, %%esp\n"                                      \
656           : &bsol;*out*/   "=a" (_res)                                  \
657           : &bsol;*in*/    "a" (&_argvec[0])                            \
658           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
659        );                                                          \
660        lval = (__typeof__(lval)) _res;                             \
661     } while (0)
662  #define CALL_FN_W_7W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
663                                   arg7)                            \
664     do {                                                           \
665        volatile OrigFn        _orig = (orig);                      \
666        volatile unsigned long _argvec[8];                          \
667        volatile unsigned long _res;                                \
668        _argvec[0] = (unsigned long)_orig.nraddr;                   \
669        _argvec[1] = (unsigned long)(arg1);                         \
670        _argvec[2] = (unsigned long)(arg2);                         \
671        _argvec[3] = (unsigned long)(arg3);                         \
672        _argvec[4] = (unsigned long)(arg4);                         \
673        _argvec[5] = (unsigned long)(arg5);                         \
674        _argvec[6] = (unsigned long)(arg6);                         \
675        _argvec[7] = (unsigned long)(arg7);                         \
676        __asm__ volatile(                                           \
677           "subl $4, %%esp\n\t"                                     \
678           "pushl 28(%%eax)\n\t"                                    \
679           "pushl 24(%%eax)\n\t"                                    \
680           "pushl 20(%%eax)\n\t"                                    \
681           "pushl 16(%%eax)\n\t"                                    \
682           "pushl 12(%%eax)\n\t"                                    \
683           "pushl 8(%%eax)\n\t"                                     \
684           "pushl 4(%%eax)\n\t"                                     \
685           "movl (%%eax), %%eax\n\t"  &bsol;* target->%eax */            \
686           VALGRIND_CALL_NOREDIR_EAX                                \
687           "addl $32, %%esp\n"                                      \
688           : &bsol;*out*/   "=a" (_res)                                  \
689           : &bsol;*in*/    "a" (&_argvec[0])                            \
690           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
691        );                                                          \
692        lval = (__typeof__(lval)) _res;                             \
693     } while (0)
694  #define CALL_FN_W_8W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
695                                   arg7,arg8)                       \
696     do {                                                           \
697        volatile OrigFn        _orig = (orig);                      \
698        volatile unsigned long _argvec[9];                          \
699        volatile unsigned long _res;                                \
700        _argvec[0] = (unsigned long)_orig.nraddr;                   \
701        _argvec[1] = (unsigned long)(arg1);                         \
702        _argvec[2] = (unsigned long)(arg2);                         \
703        _argvec[3] = (unsigned long)(arg3);                         \
704        _argvec[4] = (unsigned long)(arg4);                         \
705        _argvec[5] = (unsigned long)(arg5);                         \
706        _argvec[6] = (unsigned long)(arg6);                         \
707        _argvec[7] = (unsigned long)(arg7);                         \
708        _argvec[8] = (unsigned long)(arg8);                         \
709        __asm__ volatile(                                           \
710           "pushl 32(%%eax)\n\t"                                    \
711           "pushl 28(%%eax)\n\t"                                    \
712           "pushl 24(%%eax)\n\t"                                    \
713           "pushl 20(%%eax)\n\t"                                    \
714           "pushl 16(%%eax)\n\t"                                    \
715           "pushl 12(%%eax)\n\t"                                    \
716           "pushl 8(%%eax)\n\t"                                     \
717           "pushl 4(%%eax)\n\t"                                     \
718           "movl (%%eax), %%eax\n\t"  &bsol;* target->%eax */            \
719           VALGRIND_CALL_NOREDIR_EAX                                \
720           "addl $32, %%esp\n"                                      \
721           : &bsol;*out*/   "=a" (_res)                                  \
722           : &bsol;*in*/    "a" (&_argvec[0])                            \
723           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
724        );                                                          \
725        lval = (__typeof__(lval)) _res;                             \
726     } while (0)
727  #define CALL_FN_W_9W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
728                                   arg7,arg8,arg9)                  \
729     do {                                                           \
730        volatile OrigFn        _orig = (orig);                      \
731        volatile unsigned long _argvec[10];                         \
732        volatile unsigned long _res;                                \
733        _argvec[0] = (unsigned long)_orig.nraddr;                   \
734        _argvec[1] = (unsigned long)(arg1);                         \
735        _argvec[2] = (unsigned long)(arg2);                         \
736        _argvec[3] = (unsigned long)(arg3);                         \
737        _argvec[4] = (unsigned long)(arg4);                         \
738        _argvec[5] = (unsigned long)(arg5);                         \
739        _argvec[6] = (unsigned long)(arg6);                         \
740        _argvec[7] = (unsigned long)(arg7);                         \
741        _argvec[8] = (unsigned long)(arg8);                         \
742        _argvec[9] = (unsigned long)(arg9);                         \
743        __asm__ volatile(                                           \
744           "subl $12, %%esp\n\t"                                    \
745           "pushl 36(%%eax)\n\t"                                    \
746           "pushl 32(%%eax)\n\t"                                    \
747           "pushl 28(%%eax)\n\t"                                    \
748           "pushl 24(%%eax)\n\t"                                    \
749           "pushl 20(%%eax)\n\t"                                    \
750           "pushl 16(%%eax)\n\t"                                    \
751           "pushl 12(%%eax)\n\t"                                    \
752           "pushl 8(%%eax)\n\t"                                     \
753           "pushl 4(%%eax)\n\t"                                     \
754           "movl (%%eax), %%eax\n\t"  &bsol;* target->%eax */            \
755           VALGRIND_CALL_NOREDIR_EAX                                \
756           "addl $48, %%esp\n"                                      \
757           : &bsol;*out*/   "=a" (_res)                                  \
758           : &bsol;*in*/    "a" (&_argvec[0])                            \
759           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
760        );                                                          \
761        lval = (__typeof__(lval)) _res;                             \
762     } while (0)
763  #define CALL_FN_W_10W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
764                                    arg7,arg8,arg9,arg10)           \
765     do {                                                           \
766        volatile OrigFn        _orig = (orig);                      \
767        volatile unsigned long _argvec[11];                         \
768        volatile unsigned long _res;                                \
769        _argvec[0] = (unsigned long)_orig.nraddr;                   \
770        _argvec[1] = (unsigned long)(arg1);                         \
771        _argvec[2] = (unsigned long)(arg2);                         \
772        _argvec[3] = (unsigned long)(arg3);                         \
773        _argvec[4] = (unsigned long)(arg4);                         \
774        _argvec[5] = (unsigned long)(arg5);                         \
775        _argvec[6] = (unsigned long)(arg6);                         \
776        _argvec[7] = (unsigned long)(arg7);                         \
777        _argvec[8] = (unsigned long)(arg8);                         \
778        _argvec[9] = (unsigned long)(arg9);                         \
779        _argvec[10] = (unsigned long)(arg10);                       \
780        __asm__ volatile(                                           \
781           "subl $8, %%esp\n\t"                                     \
782           "pushl 40(%%eax)\n\t"                                    \
783           "pushl 36(%%eax)\n\t"                                    \
784           "pushl 32(%%eax)\n\t"                                    \
785           "pushl 28(%%eax)\n\t"                                    \
786           "pushl 24(%%eax)\n\t"                                    \
787           "pushl 20(%%eax)\n\t"                                    \
788           "pushl 16(%%eax)\n\t"                                    \
789           "pushl 12(%%eax)\n\t"                                    \
790           "pushl 8(%%eax)\n\t"                                     \
791           "pushl 4(%%eax)\n\t"                                     \
792           "movl (%%eax), %%eax\n\t"  &bsol;* target->%eax */            \
793           VALGRIND_CALL_NOREDIR_EAX                                \
794           "addl $48, %%esp\n"                                      \
795           : &bsol;*out*/   "=a" (_res)                                  \
796           : &bsol;*in*/    "a" (&_argvec[0])                            \
797           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
798        );                                                          \
799        lval = (__typeof__(lval)) _res;                             \
800     } while (0)
801  #define CALL_FN_W_11W(lval, orig, arg1,arg2,arg3,arg4,arg5,       \
802                                    arg6,arg7,arg8,arg9,arg10,      \
803                                    arg11)                          \
804     do {                                                           \
805        volatile OrigFn        _orig = (orig);                      \
806        volatile unsigned long _argvec[12];                         \
807        volatile unsigned long _res;                                \
808        _argvec[0] = (unsigned long)_orig.nraddr;                   \
809        _argvec[1] = (unsigned long)(arg1);                         \
810        _argvec[2] = (unsigned long)(arg2);                         \
811        _argvec[3] = (unsigned long)(arg3);                         \
812        _argvec[4] = (unsigned long)(arg4);                         \
813        _argvec[5] = (unsigned long)(arg5);                         \
814        _argvec[6] = (unsigned long)(arg6);                         \
815        _argvec[7] = (unsigned long)(arg7);                         \
816        _argvec[8] = (unsigned long)(arg8);                         \
817        _argvec[9] = (unsigned long)(arg9);                         \
818        _argvec[10] = (unsigned long)(arg10);                       \
819        _argvec[11] = (unsigned long)(arg11);                       \
820        __asm__ volatile(                                           \
821           "subl $4, %%esp\n\t"                                     \
822           "pushl 44(%%eax)\n\t"                                    \
823           "pushl 40(%%eax)\n\t"                                    \
824           "pushl 36(%%eax)\n\t"                                    \
825           "pushl 32(%%eax)\n\t"                                    \
826           "pushl 28(%%eax)\n\t"                                    \
827           "pushl 24(%%eax)\n\t"                                    \
828           "pushl 20(%%eax)\n\t"                                    \
829           "pushl 16(%%eax)\n\t"                                    \
830           "pushl 12(%%eax)\n\t"                                    \
831           "pushl 8(%%eax)\n\t"                                     \
832           "pushl 4(%%eax)\n\t"                                     \
833           "movl (%%eax), %%eax\n\t"  &bsol;* target->%eax */            \
834           VALGRIND_CALL_NOREDIR_EAX                                \
835           "addl $48, %%esp\n"                                      \
836           : &bsol;*out*/   "=a" (_res)                                  \
837           : &bsol;*in*/    "a" (&_argvec[0])                            \
838           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
839        );                                                          \
840        lval = (__typeof__(lval)) _res;                             \
841     } while (0)
842  #define CALL_FN_W_12W(lval, orig, arg1,arg2,arg3,arg4,arg5,       \
843                                    arg6,arg7,arg8,arg9,arg10,      \
844                                    arg11,arg12)                    \
845     do {                                                           \
846        volatile OrigFn        _orig = (orig);                      \
847        volatile unsigned long _argvec[13];                         \
848        volatile unsigned long _res;                                \
849        _argvec[0] = (unsigned long)_orig.nraddr;                   \
850        _argvec[1] = (unsigned long)(arg1);                         \
851        _argvec[2] = (unsigned long)(arg2);                         \
852        _argvec[3] = (unsigned long)(arg3);                         \
853        _argvec[4] = (unsigned long)(arg4);                         \
854        _argvec[5] = (unsigned long)(arg5);                         \
855        _argvec[6] = (unsigned long)(arg6);                         \
856        _argvec[7] = (unsigned long)(arg7);                         \
857        _argvec[8] = (unsigned long)(arg8);                         \
858        _argvec[9] = (unsigned long)(arg9);                         \
859        _argvec[10] = (unsigned long)(arg10);                       \
860        _argvec[11] = (unsigned long)(arg11);                       \
861        _argvec[12] = (unsigned long)(arg12);                       \
862        __asm__ volatile(                                           \
863           "pushl 48(%%eax)\n\t"                                    \
864           "pushl 44(%%eax)\n\t"                                    \
865           "pushl 40(%%eax)\n\t"                                    \
866           "pushl 36(%%eax)\n\t"                                    \
867           "pushl 32(%%eax)\n\t"                                    \
868           "pushl 28(%%eax)\n\t"                                    \
869           "pushl 24(%%eax)\n\t"                                    \
870           "pushl 20(%%eax)\n\t"                                    \
871           "pushl 16(%%eax)\n\t"                                    \
872           "pushl 12(%%eax)\n\t"                                    \
873           "pushl 8(%%eax)\n\t"                                     \
874           "pushl 4(%%eax)\n\t"                                     \
875           "movl (%%eax), %%eax\n\t"  &bsol;* target->%eax */            \
876           VALGRIND_CALL_NOREDIR_EAX                                \
877           "addl $48, %%esp\n"                                      \
878           : &bsol;*out*/   "=a" (_res)                                  \
879           : &bsol;*in*/    "a" (&_argvec[0])                            \
880           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
881        );                                                          \
882        lval = (__typeof__(lval)) _res;                             \
883     } while (0)
884  #endif &bsol;* PLAT_x86_linux || PLAT_x86_darwin */
885  #if defined(PLAT_amd64_linux)  ||  defined(PLAT_amd64_darwin)
886  #define __CALLER_SAVED_REGS &bsol;*"rax",*/ "rcx", "rdx", "rsi",       \
887                              "rdi", "r8", "r9", "r10", "r11"
888  #if defined(__GNUC__) && defined(__GCC_HAVE_DWARF2_CFI_ASM)
889  #  define __FRAME_POINTER                                         \
890        ,"r"(__builtin_dwarf_cfa())
891  #  define VALGRIND_CFI_PROLOGUE                                   \
892        "movq %%rbp, %%r15\n\t"                                     \
893        "movq %2, %%rbp\n\t"                                        \
894        ".cfi_remember_state\n\t"                                   \
895        ".cfi_def_cfa rbp, 0\n\t"
896  #  define VALGRIND_CFI_EPILOGUE                                   \
897        "movq %%r15, %%rbp\n\t"                                     \
898        ".cfi_restore_state\n\t"
899  #else
900  #  define __FRAME_POINTER
901  #  define VALGRIND_CFI_PROLOGUE
902  #  define VALGRIND_CFI_EPILOGUE
903  #endif
904  #define CALL_FN_W_v(lval, orig)                                   \
905     do {                                                           \
906        volatile OrigFn        _orig = (orig);                      \
907        volatile unsigned long _argvec[1];                          \
908        volatile unsigned long _res;                                \
909        _argvec[0] = (unsigned long)_orig.nraddr;                   \
910        __asm__ volatile(                                           \
911           VALGRIND_CFI_PROLOGUE                                    \
912           "subq $128,%%rsp\n\t"                                    \
913           "movq (%%rax), %%rax\n\t"  &bsol;* target->%rax */            \
914           VALGRIND_CALL_NOREDIR_RAX                                \
915           "addq $128,%%rsp\n\t"                                    \
916           VALGRIND_CFI_EPILOGUE                                    \
917           : &bsol;*out*/   "=a" (_res)                                  \
918           : &bsol;*in*/    "a" (&_argvec[0]) __FRAME_POINTER            \
919           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS, "r15"   \
920        );                                                          \
921        lval = (__typeof__(lval)) _res;                             \
922     } while (0)
923  #define CALL_FN_W_W(lval, orig, arg1)                             \
924     do {                                                           \
925        volatile OrigFn        _orig = (orig);                      \
926        volatile unsigned long _argvec[2];                          \
927        volatile unsigned long _res;                                \
928        _argvec[0] = (unsigned long)_orig.nraddr;                   \
929        _argvec[1] = (unsigned long)(arg1);                         \
930        __asm__ volatile(                                           \
931           VALGRIND_CFI_PROLOGUE                                    \
932           "subq $128,%%rsp\n\t"                                    \
933           "movq 8(%%rax), %%rdi\n\t"                               \
934           "movq (%%rax), %%rax\n\t"  &bsol;* target->%rax */            \
935           VALGRIND_CALL_NOREDIR_RAX                                \
936           "addq $128,%%rsp\n\t"                                    \
937           VALGRIND_CFI_EPILOGUE                                    \
938           : &bsol;*out*/   "=a" (_res)                                  \
939           : &bsol;*in*/    "a" (&_argvec[0]) __FRAME_POINTER            \
940           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS, "r15"   \
941        );                                                          \
942        lval = (__typeof__(lval)) _res;                             \
943     } while (0)
944  #define CALL_FN_W_WW(lval, orig, arg1,arg2)                       \
945     do {                                                           \
946        volatile OrigFn        _orig = (orig);                      \
947        volatile unsigned long _argvec[3];                          \
948        volatile unsigned long _res;                                \
949        _argvec[0] = (unsigned long)_orig.nraddr;                   \
950        _argvec[1] = (unsigned long)(arg1);                         \
951        _argvec[2] = (unsigned long)(arg2);                         \
952        __asm__ volatile(                                           \
953           VALGRIND_CFI_PROLOGUE                                    \
954           "subq $128,%%rsp\n\t"                                    \
955           "movq 16(%%rax), %%rsi\n\t"                              \
956           "movq 8(%%rax), %%rdi\n\t"                               \
957           "movq (%%rax), %%rax\n\t"  &bsol;* target->%rax */            \
958           VALGRIND_CALL_NOREDIR_RAX                                \
959           "addq $128,%%rsp\n\t"                                    \
960           VALGRIND_CFI_EPILOGUE                                    \
961           : &bsol;*out*/   "=a" (_res)                                  \
962           : &bsol;*in*/    "a" (&_argvec[0]) __FRAME_POINTER            \
963           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS, "r15"   \
964        );                                                          \
965        lval = (__typeof__(lval)) _res;                             \
966     } while (0)
967  #define CALL_FN_W_WWW(lval, orig, arg1,arg2,arg3)                 \
968     do {                                                           \
969        volatile OrigFn        _orig = (orig);                      \
970        volatile unsigned long _argvec[4];                          \
971        volatile unsigned long _res;                                \
972        _argvec[0] = (unsigned long)_orig.nraddr;                   \
973        _argvec[1] = (unsigned long)(arg1);                         \
974        _argvec[2] = (unsigned long)(arg2);                         \
975        _argvec[3] = (unsigned long)(arg3);                         \
976        __asm__ volatile(                                           \
977           VALGRIND_CFI_PROLOGUE                                    \
978           "subq $128,%%rsp\n\t"                                    \
979           "movq 24(%%rax), %%rdx\n\t"                              \
980           "movq 16(%%rax), %%rsi\n\t"                              \
981           "movq 8(%%rax), %%rdi\n\t"                               \
982           "movq (%%rax), %%rax\n\t"  &bsol;* target->%rax */            \
983           VALGRIND_CALL_NOREDIR_RAX                                \
984           "addq $128,%%rsp\n\t"                                    \
985           VALGRIND_CFI_EPILOGUE                                    \
986           : &bsol;*out*/   "=a" (_res)                                  \
987           : &bsol;*in*/    "a" (&_argvec[0]) __FRAME_POINTER            \
988           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS, "r15"   \
989        );                                                          \
990        lval = (__typeof__(lval)) _res;                             \
991     } while (0)
992  #define CALL_FN_W_WWWW(lval, orig, arg1,arg2,arg3,arg4)           \
993     do {                                                           \
994        volatile OrigFn        _orig = (orig);                      \
995        volatile unsigned long _argvec[5];                          \
996        volatile unsigned long _res;                                \
997        _argvec[0] = (unsigned long)_orig.nraddr;                   \
998        _argvec[1] = (unsigned long)(arg1);                         \
999        _argvec[2] = (unsigned long)(arg2);                         \
1000        _argvec[3] = (unsigned long)(arg3);                         \
1001        _argvec[4] = (unsigned long)(arg4);                         \
1002        __asm__ volatile(                                           \
1003           VALGRIND_CFI_PROLOGUE                                    \
1004           "subq $128,%%rsp\n\t"                                    \
1005           "movq 32(%%rax), %%rcx\n\t"                              \
1006           "movq 24(%%rax), %%rdx\n\t"                              \
1007           "movq 16(%%rax), %%rsi\n\t"                              \
1008           "movq 8(%%rax), %%rdi\n\t"                               \
1009           "movq (%%rax), %%rax\n\t"  &bsol;* target->%rax */            \
1010           VALGRIND_CALL_NOREDIR_RAX                                \
1011           "addq $128,%%rsp\n\t"                                    \
1012           VALGRIND_CFI_EPILOGUE                                    \
1013           : &bsol;*out*/   "=a" (_res)                                  \
1014           : &bsol;*in*/    "a" (&_argvec[0]) __FRAME_POINTER            \
1015           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS, "r15"   \
1016        );                                                          \
1017        lval = (__typeof__(lval)) _res;                             \
1018     } while (0)
1019  #define CALL_FN_W_5W(lval, orig, arg1,arg2,arg3,arg4,arg5)        \
1020     do {                                                           \
1021        volatile OrigFn        _orig = (orig);                      \
1022        volatile unsigned long _argvec[6];                          \
1023        volatile unsigned long _res;                                \
1024        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1025        _argvec[1] = (unsigned long)(arg1);                         \
1026        _argvec[2] = (unsigned long)(arg2);                         \
1027        _argvec[3] = (unsigned long)(arg3);                         \
1028        _argvec[4] = (unsigned long)(arg4);                         \
1029        _argvec[5] = (unsigned long)(arg5);                         \
1030        __asm__ volatile(                                           \
1031           VALGRIND_CFI_PROLOGUE                                    \
1032           "subq $128,%%rsp\n\t"                                    \
1033           "movq 40(%%rax), %%r8\n\t"                               \
1034           "movq 32(%%rax), %%rcx\n\t"                              \
1035           "movq 24(%%rax), %%rdx\n\t"                              \
1036           "movq 16(%%rax), %%rsi\n\t"                              \
1037           "movq 8(%%rax), %%rdi\n\t"                               \
1038           "movq (%%rax), %%rax\n\t"  &bsol;* target->%rax */            \
1039           VALGRIND_CALL_NOREDIR_RAX                                \
1040           "addq $128,%%rsp\n\t"                                    \
1041           VALGRIND_CFI_EPILOGUE                                    \
1042           : &bsol;*out*/   "=a" (_res)                                  \
1043           : &bsol;*in*/    "a" (&_argvec[0]) __FRAME_POINTER            \
1044           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS, "r15"   \
1045        );                                                          \
1046        lval = (__typeof__(lval)) _res;                             \
1047     } while (0)
1048  #define CALL_FN_W_6W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6)   \
1049     do {                                                           \
1050        volatile OrigFn        _orig = (orig);                      \
1051        volatile unsigned long _argvec[7];                          \
1052        volatile unsigned long _res;                                \
1053        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1054        _argvec[1] = (unsigned long)(arg1);                         \
1055        _argvec[2] = (unsigned long)(arg2);                         \
1056        _argvec[3] = (unsigned long)(arg3);                         \
1057        _argvec[4] = (unsigned long)(arg4);                         \
1058        _argvec[5] = (unsigned long)(arg5);                         \
1059        _argvec[6] = (unsigned long)(arg6);                         \
1060        __asm__ volatile(                                           \
1061           VALGRIND_CFI_PROLOGUE                                    \
1062           "subq $128,%%rsp\n\t"                                    \
1063           "movq 48(%%rax), %%r9\n\t"                               \
1064           "movq 40(%%rax), %%r8\n\t"                               \
1065           "movq 32(%%rax), %%rcx\n\t"                              \
1066           "movq 24(%%rax), %%rdx\n\t"                              \
1067           "movq 16(%%rax), %%rsi\n\t"                              \
1068           "movq 8(%%rax), %%rdi\n\t"                               \
1069           "movq (%%rax), %%rax\n\t"  &bsol;* target->%rax */            \
1070           VALGRIND_CALL_NOREDIR_RAX                                \
1071           "addq $128,%%rsp\n\t"                                    \
1072           VALGRIND_CFI_EPILOGUE                                    \
1073           : &bsol;*out*/   "=a" (_res)                                  \
1074           : &bsol;*in*/    "a" (&_argvec[0]) __FRAME_POINTER            \
1075           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS, "r15"   \
1076        );                                                          \
1077        lval = (__typeof__(lval)) _res;                             \
1078     } while (0)
1079  #define CALL_FN_W_7W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
1080                                   arg7)                            \
1081     do {                                                           \
1082        volatile OrigFn        _orig = (orig);                      \
1083        volatile unsigned long _argvec[8];                          \
1084        volatile unsigned long _res;                                \
1085        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1086        _argvec[1] = (unsigned long)(arg1);                         \
1087        _argvec[2] = (unsigned long)(arg2);                         \
1088        _argvec[3] = (unsigned long)(arg3);                         \
1089        _argvec[4] = (unsigned long)(arg4);                         \
1090        _argvec[5] = (unsigned long)(arg5);                         \
1091        _argvec[6] = (unsigned long)(arg6);                         \
1092        _argvec[7] = (unsigned long)(arg7);                         \
1093        __asm__ volatile(                                           \
1094           VALGRIND_CFI_PROLOGUE                                    \
1095           "subq $136,%%rsp\n\t"                                    \
1096           "pushq 56(%%rax)\n\t"                                    \
1097           "movq 48(%%rax), %%r9\n\t"                               \
1098           "movq 40(%%rax), %%r8\n\t"                               \
1099           "movq 32(%%rax), %%rcx\n\t"                              \
1100           "movq 24(%%rax), %%rdx\n\t"                              \
1101           "movq 16(%%rax), %%rsi\n\t"                              \
1102           "movq 8(%%rax), %%rdi\n\t"                               \
1103           "movq (%%rax), %%rax\n\t"  &bsol;* target->%rax */            \
1104           VALGRIND_CALL_NOREDIR_RAX                                \
1105           "addq $8, %%rsp\n"                                       \
1106           "addq $136,%%rsp\n\t"                                    \
1107           VALGRIND_CFI_EPILOGUE                                    \
1108           : &bsol;*out*/   "=a" (_res)                                  \
1109           : &bsol;*in*/    "a" (&_argvec[0]) __FRAME_POINTER            \
1110           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS, "r15"   \
1111        );                                                          \
1112        lval = (__typeof__(lval)) _res;                             \
1113     } while (0)
1114  #define CALL_FN_W_8W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
1115                                   arg7,arg8)                       \
1116     do {                                                           \
1117        volatile OrigFn        _orig = (orig);                      \
1118        volatile unsigned long _argvec[9];                          \
1119        volatile unsigned long _res;                                \
1120        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1121        _argvec[1] = (unsigned long)(arg1);                         \
1122        _argvec[2] = (unsigned long)(arg2);                         \
1123        _argvec[3] = (unsigned long)(arg3);                         \
1124        _argvec[4] = (unsigned long)(arg4);                         \
1125        _argvec[5] = (unsigned long)(arg5);                         \
1126        _argvec[6] = (unsigned long)(arg6);                         \
1127        _argvec[7] = (unsigned long)(arg7);                         \
1128        _argvec[8] = (unsigned long)(arg8);                         \
1129        __asm__ volatile(                                           \
1130           VALGRIND_CFI_PROLOGUE                                    \
1131           "subq $128,%%rsp\n\t"                                    \
1132           "pushq 64(%%rax)\n\t"                                    \
1133           "pushq 56(%%rax)\n\t"                                    \
1134           "movq 48(%%rax), %%r9\n\t"                               \
1135           "movq 40(%%rax), %%r8\n\t"                               \
1136           "movq 32(%%rax), %%rcx\n\t"                              \
1137           "movq 24(%%rax), %%rdx\n\t"                              \
1138           "movq 16(%%rax), %%rsi\n\t"                              \
1139           "movq 8(%%rax), %%rdi\n\t"                               \
1140           "movq (%%rax), %%rax\n\t"  &bsol;* target->%rax */            \
1141           VALGRIND_CALL_NOREDIR_RAX                                \
1142           "addq $16, %%rsp\n"                                      \
1143           "addq $128,%%rsp\n\t"                                    \
1144           VALGRIND_CFI_EPILOGUE                                    \
1145           : &bsol;*out*/   "=a" (_res)                                  \
1146           : &bsol;*in*/    "a" (&_argvec[0]) __FRAME_POINTER            \
1147           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS, "r15"   \
1148        );                                                          \
1149        lval = (__typeof__(lval)) _res;                             \
1150     } while (0)
1151  #define CALL_FN_W_9W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
1152                                   arg7,arg8,arg9)                  \
1153     do {                                                           \
1154        volatile OrigFn        _orig = (orig);                      \
1155        volatile unsigned long _argvec[10];                         \
1156        volatile unsigned long _res;                                \
1157        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1158        _argvec[1] = (unsigned long)(arg1);                         \
1159        _argvec[2] = (unsigned long)(arg2);                         \
1160        _argvec[3] = (unsigned long)(arg3);                         \
1161        _argvec[4] = (unsigned long)(arg4);                         \
1162        _argvec[5] = (unsigned long)(arg5);                         \
1163        _argvec[6] = (unsigned long)(arg6);                         \
1164        _argvec[7] = (unsigned long)(arg7);                         \
1165        _argvec[8] = (unsigned long)(arg8);                         \
1166        _argvec[9] = (unsigned long)(arg9);                         \
1167        __asm__ volatile(                                           \
1168           VALGRIND_CFI_PROLOGUE                                    \
1169           "subq $136,%%rsp\n\t"                                    \
1170           "pushq 72(%%rax)\n\t"                                    \
1171           "pushq 64(%%rax)\n\t"                                    \
1172           "pushq 56(%%rax)\n\t"                                    \
1173           "movq 48(%%rax), %%r9\n\t"                               \
1174           "movq 40(%%rax), %%r8\n\t"                               \
1175           "movq 32(%%rax), %%rcx\n\t"                              \
1176           "movq 24(%%rax), %%rdx\n\t"                              \
1177           "movq 16(%%rax), %%rsi\n\t"                              \
1178           "movq 8(%%rax), %%rdi\n\t"                               \
1179           "movq (%%rax), %%rax\n\t"  &bsol;* target->%rax */            \
1180           VALGRIND_CALL_NOREDIR_RAX                                \
1181           "addq $24, %%rsp\n"                                      \
1182           "addq $136,%%rsp\n\t"                                    \
1183           VALGRIND_CFI_EPILOGUE                                    \
1184           : &bsol;*out*/   "=a" (_res)                                  \
1185           : &bsol;*in*/    "a" (&_argvec[0]) __FRAME_POINTER            \
1186           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS, "r15"   \
1187        );                                                          \
1188        lval = (__typeof__(lval)) _res;                             \
1189     } while (0)
1190  #define CALL_FN_W_10W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
1191                                    arg7,arg8,arg9,arg10)           \
1192     do {                                                           \
1193        volatile OrigFn        _orig = (orig);                      \
1194        volatile unsigned long _argvec[11];                         \
1195        volatile unsigned long _res;                                \
1196        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1197        _argvec[1] = (unsigned long)(arg1);                         \
1198        _argvec[2] = (unsigned long)(arg2);                         \
1199        _argvec[3] = (unsigned long)(arg3);                         \
1200        _argvec[4] = (unsigned long)(arg4);                         \
1201        _argvec[5] = (unsigned long)(arg5);                         \
1202        _argvec[6] = (unsigned long)(arg6);                         \
1203        _argvec[7] = (unsigned long)(arg7);                         \
1204        _argvec[8] = (unsigned long)(arg8);                         \
1205        _argvec[9] = (unsigned long)(arg9);                         \
1206        _argvec[10] = (unsigned long)(arg10);                       \
1207        __asm__ volatile(                                           \
1208           VALGRIND_CFI_PROLOGUE                                    \
1209           "subq $128,%%rsp\n\t"                                    \
1210           "pushq 80(%%rax)\n\t"                                    \
1211           "pushq 72(%%rax)\n\t"                                    \
1212           "pushq 64(%%rax)\n\t"                                    \
1213           "pushq 56(%%rax)\n\t"                                    \
1214           "movq 48(%%rax), %%r9\n\t"                               \
1215           "movq 40(%%rax), %%r8\n\t"                               \
1216           "movq 32(%%rax), %%rcx\n\t"                              \
1217           "movq 24(%%rax), %%rdx\n\t"                              \
1218           "movq 16(%%rax), %%rsi\n\t"                              \
1219           "movq 8(%%rax), %%rdi\n\t"                               \
1220           "movq (%%rax), %%rax\n\t"  &bsol;* target->%rax */            \
1221           VALGRIND_CALL_NOREDIR_RAX                                \
1222           "addq $32, %%rsp\n"                                      \
1223           "addq $128,%%rsp\n\t"                                    \
1224           VALGRIND_CFI_EPILOGUE                                    \
1225           : &bsol;*out*/   "=a" (_res)                                  \
1226           : &bsol;*in*/    "a" (&_argvec[0]) __FRAME_POINTER            \
1227           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS, "r15"   \
1228        );                                                          \
1229        lval = (__typeof__(lval)) _res;                             \
1230     } while (0)
1231  #define CALL_FN_W_11W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
1232                                    arg7,arg8,arg9,arg10,arg11)     \
1233     do {                                                           \
1234        volatile OrigFn        _orig = (orig);                      \
1235        volatile unsigned long _argvec[12];                         \
1236        volatile unsigned long _res;                                \
1237        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1238        _argvec[1] = (unsigned long)(arg1);                         \
1239        _argvec[2] = (unsigned long)(arg2);                         \
1240        _argvec[3] = (unsigned long)(arg3);                         \
1241        _argvec[4] = (unsigned long)(arg4);                         \
1242        _argvec[5] = (unsigned long)(arg5);                         \
1243        _argvec[6] = (unsigned long)(arg6);                         \
1244        _argvec[7] = (unsigned long)(arg7);                         \
1245        _argvec[8] = (unsigned long)(arg8);                         \
1246        _argvec[9] = (unsigned long)(arg9);                         \
1247        _argvec[10] = (unsigned long)(arg10);                       \
1248        _argvec[11] = (unsigned long)(arg11);                       \
1249        __asm__ volatile(                                           \
1250           VALGRIND_CFI_PROLOGUE                                    \
1251           "subq $136,%%rsp\n\t"                                    \
1252           "pushq 88(%%rax)\n\t"                                    \
1253           "pushq 80(%%rax)\n\t"                                    \
1254           "pushq 72(%%rax)\n\t"                                    \
1255           "pushq 64(%%rax)\n\t"                                    \
1256           "pushq 56(%%rax)\n\t"                                    \
1257           "movq 48(%%rax), %%r9\n\t"                               \
1258           "movq 40(%%rax), %%r8\n\t"                               \
1259           "movq 32(%%rax), %%rcx\n\t"                              \
1260           "movq 24(%%rax), %%rdx\n\t"                              \
1261           "movq 16(%%rax), %%rsi\n\t"                              \
1262           "movq 8(%%rax), %%rdi\n\t"                               \
1263           "movq (%%rax), %%rax\n\t"  &bsol;* target->%rax */            \
1264           VALGRIND_CALL_NOREDIR_RAX                                \
1265           "addq $40, %%rsp\n"                                      \
1266           "addq $136,%%rsp\n\t"                                    \
1267           VALGRIND_CFI_EPILOGUE                                    \
1268           : &bsol;*out*/   "=a" (_res)                                  \
1269           : &bsol;*in*/    "a" (&_argvec[0]) __FRAME_POINTER            \
1270           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS, "r15"   \
1271        );                                                          \
1272        lval = (__typeof__(lval)) _res;                             \
1273     } while (0)
1274  #define CALL_FN_W_12W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
1275                                  arg7,arg8,arg9,arg10,arg11,arg12) \
1276     do {                                                           \
1277        volatile OrigFn        _orig = (orig);                      \
1278        volatile unsigned long _argvec[13];                         \
1279        volatile unsigned long _res;                                \
1280        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1281        _argvec[1] = (unsigned long)(arg1);                         \
1282        _argvec[2] = (unsigned long)(arg2);                         \
1283        _argvec[3] = (unsigned long)(arg3);                         \
1284        _argvec[4] = (unsigned long)(arg4);                         \
1285        _argvec[5] = (unsigned long)(arg5);                         \
1286        _argvec[6] = (unsigned long)(arg6);                         \
1287        _argvec[7] = (unsigned long)(arg7);                         \
1288        _argvec[8] = (unsigned long)(arg8);                         \
1289        _argvec[9] = (unsigned long)(arg9);                         \
1290        _argvec[10] = (unsigned long)(arg10);                       \
1291        _argvec[11] = (unsigned long)(arg11);                       \
1292        _argvec[12] = (unsigned long)(arg12);                       \
1293        __asm__ volatile(                                           \
1294           VALGRIND_CFI_PROLOGUE                                    \
1295           "subq $128,%%rsp\n\t"                                    \
1296           "pushq 96(%%rax)\n\t"                                    \
1297           "pushq 88(%%rax)\n\t"                                    \
1298           "pushq 80(%%rax)\n\t"                                    \
1299           "pushq 72(%%rax)\n\t"                                    \
1300           "pushq 64(%%rax)\n\t"                                    \
1301           "pushq 56(%%rax)\n\t"                                    \
1302           "movq 48(%%rax), %%r9\n\t"                               \
1303           "movq 40(%%rax), %%r8\n\t"                               \
1304           "movq 32(%%rax), %%rcx\n\t"                              \
1305           "movq 24(%%rax), %%rdx\n\t"                              \
1306           "movq 16(%%rax), %%rsi\n\t"                              \
1307           "movq 8(%%rax), %%rdi\n\t"                               \
1308           "movq (%%rax), %%rax\n\t"  &bsol;* target->%rax */            \
1309           VALGRIND_CALL_NOREDIR_RAX                                \
1310           "addq $48, %%rsp\n"                                      \
1311           "addq $128,%%rsp\n\t"                                    \
1312           VALGRIND_CFI_EPILOGUE                                    \
1313           : &bsol;*out*/   "=a" (_res)                                  \
1314           : &bsol;*in*/    "a" (&_argvec[0]) __FRAME_POINTER            \
1315           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS, "r15"   \
1316        );                                                          \
1317        lval = (__typeof__(lval)) _res;                             \
1318     } while (0)
1319  #endif &bsol;* PLAT_amd64_linux || PLAT_amd64_darwin */
1320  #if defined(PLAT_ppc32_linux)
1321  #define __CALLER_SAVED_REGS                                       \
1322     "lr", "ctr", "xer",                                            \
1323     "cr0", "cr1", "cr2", "cr3", "cr4", "cr5", "cr6", "cr7",        \
1324     "r0", "r2", "r3", "r4", "r5", "r6", "r7", "r8", "r9", "r10",   \
1325     "r11", "r12", "r13"
1326  #define CALL_FN_W_v(lval, orig)                                   \
1327     do {                                                           \
1328        volatile OrigFn        _orig = (orig);                      \
1329        volatile unsigned long _argvec[1];                          \
1330        volatile unsigned long _res;                                \
1331        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1332        __asm__ volatile(                                           \
1333           "mr 11,%1\n\t"                                           \
1334           "lwz 11,0(11)\n\t"  &bsol;* target->r11 */                    \
1335           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1336           "mr %0,3"                                                \
1337           : &bsol;*out*/   "=r" (_res)                                  \
1338           : &bsol;*in*/    "r" (&_argvec[0])                            \
1339           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1340        );                                                          \
1341        lval = (__typeof__(lval)) _res;                             \
1342     } while (0)
1343  #define CALL_FN_W_W(lval, orig, arg1)                             \
1344     do {                                                           \
1345        volatile OrigFn        _orig = (orig);                      \
1346        volatile unsigned long _argvec[2];                          \
1347        volatile unsigned long _res;                                \
1348        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1349        _argvec[1] = (unsigned long)arg1;                           \
1350        __asm__ volatile(                                           \
1351           "mr 11,%1\n\t"                                           \
1352           "lwz 3,4(11)\n\t"   &bsol;* arg1->r3 */                       \
1353           "lwz 11,0(11)\n\t"  &bsol;* target->r11 */                    \
1354           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1355           "mr %0,3"                                                \
1356           : &bsol;*out*/   "=r" (_res)                                  \
1357           : &bsol;*in*/    "r" (&_argvec[0])                            \
1358           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1359        );                                                          \
1360        lval = (__typeof__(lval)) _res;                             \
1361     } while (0)
1362  #define CALL_FN_W_WW(lval, orig, arg1,arg2)                       \
1363     do {                                                           \
1364        volatile OrigFn        _orig = (orig);                      \
1365        volatile unsigned long _argvec[3];                          \
1366        volatile unsigned long _res;                                \
1367        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1368        _argvec[1] = (unsigned long)arg1;                           \
1369        _argvec[2] = (unsigned long)arg2;                           \
1370        __asm__ volatile(                                           \
1371           "mr 11,%1\n\t"                                           \
1372           "lwz 3,4(11)\n\t"   &bsol;* arg1->r3 */                       \
1373           "lwz 4,8(11)\n\t"                                        \
1374           "lwz 11,0(11)\n\t"  &bsol;* target->r11 */                    \
1375           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1376           "mr %0,3"                                                \
1377           : &bsol;*out*/   "=r" (_res)                                  \
1378           : &bsol;*in*/    "r" (&_argvec[0])                            \
1379           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1380        );                                                          \
1381        lval = (__typeof__(lval)) _res;                             \
1382     } while (0)
1383  #define CALL_FN_W_WWW(lval, orig, arg1,arg2,arg3)                 \
1384     do {                                                           \
1385        volatile OrigFn        _orig = (orig);                      \
1386        volatile unsigned long _argvec[4];                          \
1387        volatile unsigned long _res;                                \
1388        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1389        _argvec[1] = (unsigned long)arg1;                           \
1390        _argvec[2] = (unsigned long)arg2;                           \
1391        _argvec[3] = (unsigned long)arg3;                           \
1392        __asm__ volatile(                                           \
1393           "mr 11,%1\n\t"                                           \
1394           "lwz 3,4(11)\n\t"   &bsol;* arg1->r3 */                       \
1395           "lwz 4,8(11)\n\t"                                        \
1396           "lwz 5,12(11)\n\t"                                       \
1397           "lwz 11,0(11)\n\t"  &bsol;* target->r11 */                    \
1398           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1399           "mr %0,3"                                                \
1400           : &bsol;*out*/   "=r" (_res)                                  \
1401           : &bsol;*in*/    "r" (&_argvec[0])                            \
1402           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1403        );                                                          \
1404        lval = (__typeof__(lval)) _res;                             \
1405     } while (0)
1406  #define CALL_FN_W_WWWW(lval, orig, arg1,arg2,arg3,arg4)           \
1407     do {                                                           \
1408        volatile OrigFn        _orig = (orig);                      \
1409        volatile unsigned long _argvec[5];                          \
1410        volatile unsigned long _res;                                \
1411        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1412        _argvec[1] = (unsigned long)arg1;                           \
1413        _argvec[2] = (unsigned long)arg2;                           \
1414        _argvec[3] = (unsigned long)arg3;                           \
1415        _argvec[4] = (unsigned long)arg4;                           \
<span onclick='openModal()' class='match'>1416        __asm__ volatile(                                           \
1417           "mr 11,%1\n\t"                                           \
1418           "lwz 3,4(11)\n\t"   &bsol;* arg1->r3 */                       \
1419           "lwz 4,8(11)\n\t"                                        \
</span>1420           "lwz 5,12(11)\n\t"                                       \
1421           "lwz 6,16(11)\n\t"  &bsol;* arg4->r6 */                       \
1422           "lwz 11,0(11)\n\t"  &bsol;* target->r11 */                    \
1423           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1424           "mr %0,3"                                                \
1425           : &bsol;*out*/   "=r" (_res)                                  \
1426           : &bsol;*in*/    "r" (&_argvec[0])                            \
1427           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1428        );                                                          \
1429        lval = (__typeof__(lval)) _res;                             \
1430     } while (0)
1431  #define CALL_FN_W_5W(lval, orig, arg1,arg2,arg3,arg4,arg5)        \
1432     do {                                                           \
1433        volatile OrigFn        _orig = (orig);                      \
1434        volatile unsigned long _argvec[6];                          \
1435        volatile unsigned long _res;                                \
1436        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1437        _argvec[1] = (unsigned long)arg1;                           \
1438        _argvec[2] = (unsigned long)arg2;                           \
1439        _argvec[3] = (unsigned long)arg3;                           \
1440        _argvec[4] = (unsigned long)arg4;                           \
1441        _argvec[5] = (unsigned long)arg5;                           \
1442        __asm__ volatile(                                           \
1443           "mr 11,%1\n\t"                                           \
1444           "lwz 3,4(11)\n\t"   &bsol;* arg1->r3 */                       \
1445           "lwz 4,8(11)\n\t"                                        \
1446           "lwz 5,12(11)\n\t"                                       \
1447           "lwz 6,16(11)\n\t"  &bsol;* arg4->r6 */                       \
1448           "lwz 7,20(11)\n\t"                                       \
1449           "lwz 11,0(11)\n\t"  &bsol;* target->r11 */                    \
1450           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1451           "mr %0,3"                                                \
1452           : &bsol;*out*/   "=r" (_res)                                  \
1453           : &bsol;*in*/    "r" (&_argvec[0])                            \
1454           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1455        );                                                          \
1456        lval = (__typeof__(lval)) _res;                             \
1457     } while (0)
1458  #define CALL_FN_W_6W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6)   \
1459     do {                                                           \
1460        volatile OrigFn        _orig = (orig);                      \
1461        volatile unsigned long _argvec[7];                          \
1462        volatile unsigned long _res;                                \
1463        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1464        _argvec[1] = (unsigned long)arg1;                           \
1465        _argvec[2] = (unsigned long)arg2;                           \
1466        _argvec[3] = (unsigned long)arg3;                           \
1467        _argvec[4] = (unsigned long)arg4;                           \
1468        _argvec[5] = (unsigned long)arg5;                           \
1469        _argvec[6] = (unsigned long)arg6;                           \
1470        __asm__ volatile(                                           \
1471           "mr 11,%1\n\t"                                           \
1472           "lwz 3,4(11)\n\t"   &bsol;* arg1->r3 */                       \
1473           "lwz 4,8(11)\n\t"                                        \
1474           "lwz 5,12(11)\n\t"                                       \
1475           "lwz 6,16(11)\n\t"  &bsol;* arg4->r6 */                       \
1476           "lwz 7,20(11)\n\t"                                       \
1477           "lwz 8,24(11)\n\t"                                       \
1478           "lwz 11,0(11)\n\t"  &bsol;* target->r11 */                    \
1479           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1480           "mr %0,3"                                                \
1481           : &bsol;*out*/   "=r" (_res)                                  \
1482           : &bsol;*in*/    "r" (&_argvec[0])                            \
1483           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1484        );                                                          \
1485        lval = (__typeof__(lval)) _res;                             \
1486     } while (0)
1487  #define CALL_FN_W_7W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
1488                                   arg7)                            \
1489     do {                                                           \
1490        volatile OrigFn        _orig = (orig);                      \
1491        volatile unsigned long _argvec[8];                          \
1492        volatile unsigned long _res;                                \
1493        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1494        _argvec[1] = (unsigned long)arg1;                           \
1495        _argvec[2] = (unsigned long)arg2;                           \
1496        _argvec[3] = (unsigned long)arg3;                           \
1497        _argvec[4] = (unsigned long)arg4;                           \
1498        _argvec[5] = (unsigned long)arg5;                           \
1499        _argvec[6] = (unsigned long)arg6;                           \
1500        _argvec[7] = (unsigned long)arg7;                           \
1501        __asm__ volatile(                                           \
1502           "mr 11,%1\n\t"                                           \
1503           "lwz 3,4(11)\n\t"   &bsol;* arg1->r3 */                       \
1504           "lwz 4,8(11)\n\t"                                        \
1505           "lwz 5,12(11)\n\t"                                       \
1506           "lwz 6,16(11)\n\t"  &bsol;* arg4->r6 */                       \
1507           "lwz 7,20(11)\n\t"                                       \
1508           "lwz 8,24(11)\n\t"                                       \
1509           "lwz 9,28(11)\n\t"                                       \
1510           "lwz 11,0(11)\n\t"  &bsol;* target->r11 */                    \
1511           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1512           "mr %0,3"                                                \
1513           : &bsol;*out*/   "=r" (_res)                                  \
1514           : &bsol;*in*/    "r" (&_argvec[0])                            \
1515           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1516        );                                                          \
1517        lval = (__typeof__(lval)) _res;                             \
1518     } while (0)
1519  #define CALL_FN_W_8W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
1520                                   arg7,arg8)                       \
1521     do {                                                           \
1522        volatile OrigFn        _orig = (orig);                      \
1523        volatile unsigned long _argvec[9];                          \
1524        volatile unsigned long _res;                                \
1525        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1526        _argvec[1] = (unsigned long)arg1;                           \
1527        _argvec[2] = (unsigned long)arg2;                           \
1528        _argvec[3] = (unsigned long)arg3;                           \
1529        _argvec[4] = (unsigned long)arg4;                           \
1530        _argvec[5] = (unsigned long)arg5;                           \
1531        _argvec[6] = (unsigned long)arg6;                           \
1532        _argvec[7] = (unsigned long)arg7;                           \
1533        _argvec[8] = (unsigned long)arg8;                           \
1534        __asm__ volatile(                                           \
1535           "mr 11,%1\n\t"                                           \
1536           "lwz 3,4(11)\n\t"   &bsol;* arg1->r3 */                       \
1537           "lwz 4,8(11)\n\t"                                        \
1538           "lwz 5,12(11)\n\t"                                       \
1539           "lwz 6,16(11)\n\t"  &bsol;* arg4->r6 */                       \
1540           "lwz 7,20(11)\n\t"                                       \
1541           "lwz 8,24(11)\n\t"                                       \
1542           "lwz 9,28(11)\n\t"                                       \
1543           "lwz 10,32(11)\n\t" &bsol;* arg8->r10 */                      \
1544           "lwz 11,0(11)\n\t"  &bsol;* target->r11 */                    \
1545           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1546           "mr %0,3"                                                \
1547           : &bsol;*out*/   "=r" (_res)                                  \
1548           : &bsol;*in*/    "r" (&_argvec[0])                            \
1549           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1550        );                                                          \
1551        lval = (__typeof__(lval)) _res;                             \
1552     } while (0)
1553  #define CALL_FN_W_9W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
1554                                   arg7,arg8,arg9)                  \
1555     do {                                                           \
1556        volatile OrigFn        _orig = (orig);                      \
1557        volatile unsigned long _argvec[10];                         \
1558        volatile unsigned long _res;                                \
1559        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1560        _argvec[1] = (unsigned long)arg1;                           \
1561        _argvec[2] = (unsigned long)arg2;                           \
1562        _argvec[3] = (unsigned long)arg3;                           \
1563        _argvec[4] = (unsigned long)arg4;                           \
1564        _argvec[5] = (unsigned long)arg5;                           \
1565        _argvec[6] = (unsigned long)arg6;                           \
1566        _argvec[7] = (unsigned long)arg7;                           \
1567        _argvec[8] = (unsigned long)arg8;                           \
1568        _argvec[9] = (unsigned long)arg9;                           \
1569        __asm__ volatile(                                           \
1570           "mr 11,%1\n\t"                                           \
1571           "addi 1,1,-16\n\t"                                       \
1572                                                          \
1573           "lwz 3,36(11)\n\t"                                       \
1574           "stw 3,8(1)\n\t"                                         \
1575                                                       \
1576           "lwz 3,4(11)\n\t"   &bsol;* arg1->r3 */                       \
1577           "lwz 4,8(11)\n\t"                                        \
1578           "lwz 5,12(11)\n\t"                                       \
1579           "lwz 6,16(11)\n\t"  &bsol;* arg4->r6 */                       \
1580           "lwz 7,20(11)\n\t"                                       \
1581           "lwz 8,24(11)\n\t"                                       \
1582           "lwz 9,28(11)\n\t"                                       \
1583           "lwz 10,32(11)\n\t" &bsol;* arg8->r10 */                      \
1584           "lwz 11,0(11)\n\t"  &bsol;* target->r11 */                    \
1585           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1586           "addi 1,1,16\n\t"                                        \
1587           "mr %0,3"                                                \
1588           : &bsol;*out*/   "=r" (_res)                                  \
1589           : &bsol;*in*/    "r" (&_argvec[0])                            \
1590           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1591        );                                                          \
1592        lval = (__typeof__(lval)) _res;                             \
1593     } while (0)
1594  #define CALL_FN_W_10W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
1595                                    arg7,arg8,arg9,arg10)           \
1596     do {                                                           \
1597        volatile OrigFn        _orig = (orig);                      \
1598        volatile unsigned long _argvec[11];                         \
1599        volatile unsigned long _res;                                \
1600        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1601        _argvec[1] = (unsigned long)arg1;                           \
1602        _argvec[2] = (unsigned long)arg2;                           \
1603        _argvec[3] = (unsigned long)arg3;                           \
1604        _argvec[4] = (unsigned long)arg4;                           \
1605        _argvec[5] = (unsigned long)arg5;                           \
1606        _argvec[6] = (unsigned long)arg6;                           \
1607        _argvec[7] = (unsigned long)arg7;                           \
1608        _argvec[8] = (unsigned long)arg8;                           \
1609        _argvec[9] = (unsigned long)arg9;                           \
1610        _argvec[10] = (unsigned long)arg10;                         \
1611        __asm__ volatile(                                           \
1612           "mr 11,%1\n\t"                                           \
1613           "addi 1,1,-16\n\t"                                       \
1614                                                         \
1615           "lwz 3,40(11)\n\t"                                       \
1616           "stw 3,12(1)\n\t"                                        \
1617                                                          \
1618           "lwz 3,36(11)\n\t"                                       \
1619           "stw 3,8(1)\n\t"                                         \
1620                                                       \
1621           "lwz 3,4(11)\n\t"   &bsol;* arg1->r3 */                       \
1622           "lwz 4,8(11)\n\t"                                        \
1623           "lwz 5,12(11)\n\t"                                       \
1624           "lwz 6,16(11)\n\t"  &bsol;* arg4->r6 */                       \
1625           "lwz 7,20(11)\n\t"                                       \
1626           "lwz 8,24(11)\n\t"                                       \
1627           "lwz 9,28(11)\n\t"                                       \
1628           "lwz 10,32(11)\n\t" &bsol;* arg8->r10 */                      \
1629           "lwz 11,0(11)\n\t"  &bsol;* target->r11 */                    \
1630           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1631           "addi 1,1,16\n\t"                                        \
1632           "mr %0,3"                                                \
1633           : &bsol;*out*/   "=r" (_res)                                  \
1634           : &bsol;*in*/    "r" (&_argvec[0])                            \
1635           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1636        );                                                          \
1637        lval = (__typeof__(lval)) _res;                             \
1638     } while (0)
1639  #define CALL_FN_W_11W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
1640                                    arg7,arg8,arg9,arg10,arg11)     \
1641     do {                                                           \
1642        volatile OrigFn        _orig = (orig);                      \
1643        volatile unsigned long _argvec[12];                         \
1644        volatile unsigned long _res;                                \
1645        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1646        _argvec[1] = (unsigned long)arg1;                           \
1647        _argvec[2] = (unsigned long)arg2;                           \
1648        _argvec[3] = (unsigned long)arg3;                           \
1649        _argvec[4] = (unsigned long)arg4;                           \
1650        _argvec[5] = (unsigned long)arg5;                           \
1651        _argvec[6] = (unsigned long)arg6;                           \
1652        _argvec[7] = (unsigned long)arg7;                           \
1653        _argvec[8] = (unsigned long)arg8;                           \
1654        _argvec[9] = (unsigned long)arg9;                           \
1655        _argvec[10] = (unsigned long)arg10;                         \
1656        _argvec[11] = (unsigned long)arg11;                         \
1657        __asm__ volatile(                                           \
1658           "mr 11,%1\n\t"                                           \
1659           "addi 1,1,-32\n\t"                                       \
1660                                                         \
1661           "lwz 3,44(11)\n\t"                                       \
1662           "stw 3,16(1)\n\t"                                        \
1663                                                         \
1664           "lwz 3,40(11)\n\t"                                       \
1665           "stw 3,12(1)\n\t"                                        \
1666                                                          \
1667           "lwz 3,36(11)\n\t"                                       \
1668           "stw 3,8(1)\n\t"                                         \
1669                                                       \
1670           "lwz 3,4(11)\n\t"   &bsol;* arg1->r3 */                       \
1671           "lwz 4,8(11)\n\t"                                        \
1672           "lwz 5,12(11)\n\t"                                       \
1673           "lwz 6,16(11)\n\t"  &bsol;* arg4->r6 */                       \
1674           "lwz 7,20(11)\n\t"                                       \
1675           "lwz 8,24(11)\n\t"                                       \
1676           "lwz 9,28(11)\n\t"                                       \
1677           "lwz 10,32(11)\n\t" &bsol;* arg8->r10 */                      \
1678           "lwz 11,0(11)\n\t"  &bsol;* target->r11 */                    \
1679           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1680           "addi 1,1,32\n\t"                                        \
1681           "mr %0,3"                                                \
1682           : &bsol;*out*/   "=r" (_res)                                  \
1683           : &bsol;*in*/    "r" (&_argvec[0])                            \
1684           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1685        );                                                          \
1686        lval = (__typeof__(lval)) _res;                             \
1687     } while (0)
1688  #define CALL_FN_W_12W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
1689                                  arg7,arg8,arg9,arg10,arg11,arg12) \
1690     do {                                                           \
1691        volatile OrigFn        _orig = (orig);                      \
1692        volatile unsigned long _argvec[13];                         \
1693        volatile unsigned long _res;                                \
1694        _argvec[0] = (unsigned long)_orig.nraddr;                   \
1695        _argvec[1] = (unsigned long)arg1;                           \
1696        _argvec[2] = (unsigned long)arg2;                           \
1697        _argvec[3] = (unsigned long)arg3;                           \
1698        _argvec[4] = (unsigned long)arg4;                           \
1699        _argvec[5] = (unsigned long)arg5;                           \
1700        _argvec[6] = (unsigned long)arg6;                           \
1701        _argvec[7] = (unsigned long)arg7;                           \
1702        _argvec[8] = (unsigned long)arg8;                           \
1703        _argvec[9] = (unsigned long)arg9;                           \
1704        _argvec[10] = (unsigned long)arg10;                         \
1705        _argvec[11] = (unsigned long)arg11;                         \
1706        _argvec[12] = (unsigned long)arg12;                         \
1707        __asm__ volatile(                                           \
1708           "mr 11,%1\n\t"                                           \
1709           "addi 1,1,-32\n\t"                                       \
1710                                                         \
1711           "lwz 3,48(11)\n\t"                                       \
1712           "stw 3,20(1)\n\t"                                        \
1713                                                         \
1714           "lwz 3,44(11)\n\t"                                       \
1715           "stw 3,16(1)\n\t"                                        \
1716                                                         \
1717           "lwz 3,40(11)\n\t"                                       \
1718           "stw 3,12(1)\n\t"                                        \
1719                                                          \
1720           "lwz 3,36(11)\n\t"                                       \
1721           "stw 3,8(1)\n\t"                                         \
1722                                                       \
1723           "lwz 3,4(11)\n\t"   &bsol;* arg1->r3 */                       \
1724           "lwz 4,8(11)\n\t"                                        \
1725           "lwz 5,12(11)\n\t"                                       \
1726           "lwz 6,16(11)\n\t"  &bsol;* arg4->r6 */                       \
1727           "lwz 7,20(11)\n\t"                                       \
1728           "lwz 8,24(11)\n\t"                                       \
1729           "lwz 9,28(11)\n\t"                                       \
1730           "lwz 10,32(11)\n\t" &bsol;* arg8->r10 */                      \
1731           "lwz 11,0(11)\n\t"  &bsol;* target->r11 */                    \
1732           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1733           "addi 1,1,32\n\t"                                        \
1734           "mr %0,3"                                                \
1735           : &bsol;*out*/   "=r" (_res)                                  \
1736           : &bsol;*in*/    "r" (&_argvec[0])                            \
1737           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1738        );                                                          \
1739        lval = (__typeof__(lval)) _res;                             \
1740     } while (0)
1741  #endif &bsol;* PLAT_ppc32_linux */
1742  #if defined(PLAT_ppc64_linux)
1743  #define __CALLER_SAVED_REGS                                       \
1744     "lr", "ctr", "xer",                                            \
1745     "cr0", "cr1", "cr2", "cr3", "cr4", "cr5", "cr6", "cr7",        \
1746     "r0", "r2", "r3", "r4", "r5", "r6", "r7", "r8", "r9", "r10",   \
1747     "r11", "r12", "r13"
1748  #define CALL_FN_W_v(lval, orig)                                   \
1749     do {                                                           \
1750        volatile OrigFn        _orig = (orig);                      \
1751        volatile unsigned long _argvec[3+0];                        \
1752        volatile unsigned long _res;                                \
1753                   \
1754        _argvec[1] = (unsigned long)_orig.r2;                       \
1755        _argvec[2] = (unsigned long)_orig.nraddr;                   \
1756        __asm__ volatile(                                           \
1757           "mr 11,%1\n\t"                                           \
1758           "std 2,-16(11)\n\t"  &bsol;* save tocptr */                   \
1759           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
1760           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
1761           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1762           "mr 11,%1\n\t"                                           \
1763           "mr %0,3\n\t"                                            \
1764           "ld 2,-16(11)" &bsol;* restore tocptr */                      \
1765           : &bsol;*out*/   "=r" (_res)                                  \
1766           : &bsol;*in*/    "r" (&_argvec[2])                            \
1767           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1768        );                                                          \
1769        lval = (__typeof__(lval)) _res;                             \
1770     } while (0)
1771  #define CALL_FN_W_W(lval, orig, arg1)                             \
1772     do {                                                           \
1773        volatile OrigFn        _orig = (orig);                      \
1774        volatile unsigned long _argvec[3+1];                        \
1775        volatile unsigned long _res;                                \
1776                   \
1777        _argvec[1]   = (unsigned long)_orig.r2;                     \
1778        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
1779        _argvec[2+1] = (unsigned long)arg1;                         \
1780        __asm__ volatile(                                           \
1781           "mr 11,%1\n\t"                                           \
1782           "std 2,-16(11)\n\t"  &bsol;* save tocptr */                   \
1783           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
1784           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
1785           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
1786           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1787           "mr 11,%1\n\t"                                           \
1788           "mr %0,3\n\t"                                            \
1789           "ld 2,-16(11)" &bsol;* restore tocptr */                      \
1790           : &bsol;*out*/   "=r" (_res)                                  \
1791           : &bsol;*in*/    "r" (&_argvec[2])                            \
1792           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1793        );                                                          \
1794        lval = (__typeof__(lval)) _res;                             \
1795     } while (0)
1796  #define CALL_FN_W_WW(lval, orig, arg1,arg2)                       \
1797     do {                                                           \
1798        volatile OrigFn        _orig = (orig);                      \
1799        volatile unsigned long _argvec[3+2];                        \
1800        volatile unsigned long _res;                                \
1801                   \
1802        _argvec[1]   = (unsigned long)_orig.r2;                     \
1803        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
1804        _argvec[2+1] = (unsigned long)arg1;                         \
1805        _argvec[2+2] = (unsigned long)arg2;                         \
1806        __asm__ volatile(                                           \
1807           "mr 11,%1\n\t"                                           \
1808           "std 2,-16(11)\n\t"  &bsol;* save tocptr */                   \
1809           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
1810           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
1811           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
1812           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
1813           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1814           "mr 11,%1\n\t"                                           \
1815           "mr %0,3\n\t"                                            \
1816           "ld 2,-16(11)" &bsol;* restore tocptr */                      \
1817           : &bsol;*out*/   "=r" (_res)                                  \
1818           : &bsol;*in*/    "r" (&_argvec[2])                            \
1819           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1820        );                                                          \
1821        lval = (__typeof__(lval)) _res;                             \
1822     } while (0)
1823  #define CALL_FN_W_WWW(lval, orig, arg1,arg2,arg3)                 \
1824     do {                                                           \
1825        volatile OrigFn        _orig = (orig);                      \
1826        volatile unsigned long _argvec[3+3];                        \
1827        volatile unsigned long _res;                                \
1828                   \
1829        _argvec[1]   = (unsigned long)_orig.r2;                     \
1830        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
1831        _argvec[2+1] = (unsigned long)arg1;                         \
1832        _argvec[2+2] = (unsigned long)arg2;                         \
1833        _argvec[2+3] = (unsigned long)arg3;                         \
1834        __asm__ volatile(                                           \
1835           "mr 11,%1\n\t"                                           \
1836           "std 2,-16(11)\n\t"  &bsol;* save tocptr */                   \
1837           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
1838           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
1839           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
1840           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
1841           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
1842           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1843           "mr 11,%1\n\t"                                           \
1844           "mr %0,3\n\t"                                            \
1845           "ld 2,-16(11)" &bsol;* restore tocptr */                      \
1846           : &bsol;*out*/   "=r" (_res)                                  \
1847           : &bsol;*in*/    "r" (&_argvec[2])                            \
1848           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1849        );                                                          \
1850        lval = (__typeof__(lval)) _res;                             \
1851     } while (0)
1852  #define CALL_FN_W_WWWW(lval, orig, arg1,arg2,arg3,arg4)           \
1853     do {                                                           \
1854        volatile OrigFn        _orig = (orig);                      \
1855        volatile unsigned long _argvec[3+4];                        \
1856        volatile unsigned long _res;                                \
1857                   \
1858        _argvec[1]   = (unsigned long)_orig.r2;                     \
1859        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
1860        _argvec[2+1] = (unsigned long)arg1;                         \
1861        _argvec[2+2] = (unsigned long)arg2;                         \
1862        _argvec[2+3] = (unsigned long)arg3;                         \
1863        _argvec[2+4] = (unsigned long)arg4;                         \
1864        __asm__ volatile(                                           \
1865           "mr 11,%1\n\t"                                           \
1866           "std 2,-16(11)\n\t"  &bsol;* save tocptr */                   \
1867           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
1868           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
1869           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
1870           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
1871           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
1872           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
1873           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1874           "mr 11,%1\n\t"                                           \
1875           "mr %0,3\n\t"                                            \
1876           "ld 2,-16(11)" &bsol;* restore tocptr */                      \
1877           : &bsol;*out*/   "=r" (_res)                                  \
1878           : &bsol;*in*/    "r" (&_argvec[2])                            \
1879           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1880        );                                                          \
1881        lval = (__typeof__(lval)) _res;                             \
1882     } while (0)
1883  #define CALL_FN_W_5W(lval, orig, arg1,arg2,arg3,arg4,arg5)        \
1884     do {                                                           \
1885        volatile OrigFn        _orig = (orig);                      \
1886        volatile unsigned long _argvec[3+5];                        \
1887        volatile unsigned long _res;                                \
1888                   \
1889        _argvec[1]   = (unsigned long)_orig.r2;                     \
1890        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
1891        _argvec[2+1] = (unsigned long)arg1;                         \
1892        _argvec[2+2] = (unsigned long)arg2;                         \
1893        _argvec[2+3] = (unsigned long)arg3;                         \
1894        _argvec[2+4] = (unsigned long)arg4;                         \
1895        _argvec[2+5] = (unsigned long)arg5;                         \
1896        __asm__ volatile(                                           \
1897           "mr 11,%1\n\t"                                           \
1898           "std 2,-16(11)\n\t"  &bsol;* save tocptr */                   \
1899           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
1900           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
1901           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
1902           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
1903           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
1904           "ld   7, 40(11)\n\t" &bsol;* arg5->r7 */                      \
1905           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
1906           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1907           "mr 11,%1\n\t"                                           \
1908           "mr %0,3\n\t"                                            \
1909           "ld 2,-16(11)" &bsol;* restore tocptr */                      \
1910           : &bsol;*out*/   "=r" (_res)                                  \
1911           : &bsol;*in*/    "r" (&_argvec[2])                            \
1912           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1913        );                                                          \
1914        lval = (__typeof__(lval)) _res;                             \
1915     } while (0)
1916  #define CALL_FN_W_6W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6)   \
1917     do {                                                           \
1918        volatile OrigFn        _orig = (orig);                      \
1919        volatile unsigned long _argvec[3+6];                        \
1920        volatile unsigned long _res;                                \
1921                   \
1922        _argvec[1]   = (unsigned long)_orig.r2;                     \
1923        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
1924        _argvec[2+1] = (unsigned long)arg1;                         \
1925        _argvec[2+2] = (unsigned long)arg2;                         \
1926        _argvec[2+3] = (unsigned long)arg3;                         \
1927        _argvec[2+4] = (unsigned long)arg4;                         \
1928        _argvec[2+5] = (unsigned long)arg5;                         \
1929        _argvec[2+6] = (unsigned long)arg6;                         \
1930        __asm__ volatile(                                           \
1931           "mr 11,%1\n\t"                                           \
1932           "std 2,-16(11)\n\t"  &bsol;* save tocptr */                   \
1933           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
1934           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
1935           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
1936           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
1937           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
1938           "ld   7, 40(11)\n\t" &bsol;* arg5->r7 */                      \
1939           "ld   8, 48(11)\n\t" &bsol;* arg6->r8 */                      \
1940           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
1941           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1942           "mr 11,%1\n\t"                                           \
1943           "mr %0,3\n\t"                                            \
1944           "ld 2,-16(11)" &bsol;* restore tocptr */                      \
1945           : &bsol;*out*/   "=r" (_res)                                  \
1946           : &bsol;*in*/    "r" (&_argvec[2])                            \
1947           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1948        );                                                          \
1949        lval = (__typeof__(lval)) _res;                             \
1950     } while (0)
1951  #define CALL_FN_W_7W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
1952                                   arg7)                            \
1953     do {                                                           \
1954        volatile OrigFn        _orig = (orig);                      \
1955        volatile unsigned long _argvec[3+7];                        \
1956        volatile unsigned long _res;                                \
1957                   \
1958        _argvec[1]   = (unsigned long)_orig.r2;                     \
1959        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
1960        _argvec[2+1] = (unsigned long)arg1;                         \
1961        _argvec[2+2] = (unsigned long)arg2;                         \
1962        _argvec[2+3] = (unsigned long)arg3;                         \
1963        _argvec[2+4] = (unsigned long)arg4;                         \
1964        _argvec[2+5] = (unsigned long)arg5;                         \
1965        _argvec[2+6] = (unsigned long)arg6;                         \
1966        _argvec[2+7] = (unsigned long)arg7;                         \
1967        __asm__ volatile(                                           \
1968           "mr 11,%1\n\t"                                           \
1969           "std 2,-16(11)\n\t"  &bsol;* save tocptr */                   \
1970           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
1971           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
1972           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
1973           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
1974           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
1975           "ld   7, 40(11)\n\t" &bsol;* arg5->r7 */                      \
1976           "ld   8, 48(11)\n\t" &bsol;* arg6->r8 */                      \
1977           "ld   9, 56(11)\n\t" &bsol;* arg7->r9 */                      \
1978           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
1979           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
1980           "mr 11,%1\n\t"                                           \
1981           "mr %0,3\n\t"                                            \
1982           "ld 2,-16(11)" &bsol;* restore tocptr */                      \
1983           : &bsol;*out*/   "=r" (_res)                                  \
1984           : &bsol;*in*/    "r" (&_argvec[2])                            \
1985           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
1986        );                                                          \
1987        lval = (__typeof__(lval)) _res;                             \
1988     } while (0)
1989  #define CALL_FN_W_8W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
1990                                   arg7,arg8)                       \
1991     do {                                                           \
1992        volatile OrigFn        _orig = (orig);                      \
1993        volatile unsigned long _argvec[3+8];                        \
1994        volatile unsigned long _res;                                \
1995                   \
1996        _argvec[1]   = (unsigned long)_orig.r2;                     \
1997        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
1998        _argvec[2+1] = (unsigned long)arg1;                         \
1999        _argvec[2+2] = (unsigned long)arg2;                         \
2000        _argvec[2+3] = (unsigned long)arg3;                         \
2001        _argvec[2+4] = (unsigned long)arg4;                         \
2002        _argvec[2+5] = (unsigned long)arg5;                         \
2003        _argvec[2+6] = (unsigned long)arg6;                         \
2004        _argvec[2+7] = (unsigned long)arg7;                         \
2005        _argvec[2+8] = (unsigned long)arg8;                         \
2006        __asm__ volatile(                                           \
2007           "mr 11,%1\n\t"                                           \
2008           "std 2,-16(11)\n\t"  &bsol;* save tocptr */                   \
2009           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
2010           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
2011           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
2012           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
2013           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
2014           "ld   7, 40(11)\n\t" &bsol;* arg5->r7 */                      \
2015           "ld   8, 48(11)\n\t" &bsol;* arg6->r8 */                      \
2016           "ld   9, 56(11)\n\t" &bsol;* arg7->r9 */                      \
2017           "ld  10, 64(11)\n\t" &bsol;* arg8->r10 */                     \
2018           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
2019           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
2020           "mr 11,%1\n\t"                                           \
2021           "mr %0,3\n\t"                                            \
2022           "ld 2,-16(11)" &bsol;* restore tocptr */                      \
2023           : &bsol;*out*/   "=r" (_res)                                  \
2024           : &bsol;*in*/    "r" (&_argvec[2])                            \
2025           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2026        );                                                          \
2027        lval = (__typeof__(lval)) _res;                             \
2028     } while (0)
2029  #define CALL_FN_W_9W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
2030                                   arg7,arg8,arg9)                  \
2031     do {                                                           \
2032        volatile OrigFn        _orig = (orig);                      \
2033        volatile unsigned long _argvec[3+9];                        \
2034        volatile unsigned long _res;                                \
2035                   \
2036        _argvec[1]   = (unsigned long)_orig.r2;                     \
2037        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
2038        _argvec[2+1] = (unsigned long)arg1;                         \
2039        _argvec[2+2] = (unsigned long)arg2;                         \
2040        _argvec[2+3] = (unsigned long)arg3;                         \
2041        _argvec[2+4] = (unsigned long)arg4;                         \
2042        _argvec[2+5] = (unsigned long)arg5;                         \
2043        _argvec[2+6] = (unsigned long)arg6;                         \
2044        _argvec[2+7] = (unsigned long)arg7;                         \
2045        _argvec[2+8] = (unsigned long)arg8;                         \
2046        _argvec[2+9] = (unsigned long)arg9;                         \
2047        __asm__ volatile(                                           \
2048           "mr 11,%1\n\t"                                           \
2049           "std 2,-16(11)\n\t"  &bsol;* save tocptr */                   \
2050           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
2051           "addi 1,1,-128\n\t"  &bsol;* expand stack frame */            \
2052                                                          \
2053           "ld  3,72(11)\n\t"                                       \
2054           "std 3,112(1)\n\t"                                       \
2055                                                       \
2056           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
2057           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
2058           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
2059           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
2060           "ld   7, 40(11)\n\t" &bsol;* arg5->r7 */                      \
2061           "ld   8, 48(11)\n\t" &bsol;* arg6->r8 */                      \
2062           "ld   9, 56(11)\n\t" &bsol;* arg7->r9 */                      \
2063           "ld  10, 64(11)\n\t" &bsol;* arg8->r10 */                     \
2064           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
2065           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
2066           "mr 11,%1\n\t"                                           \
2067           "mr %0,3\n\t"                                            \
2068           "ld 2,-16(11)\n\t" &bsol;* restore tocptr */                  \
2069           "addi 1,1,128"     &bsol;* restore frame */                   \
2070           : &bsol;*out*/   "=r" (_res)                                  \
2071           : &bsol;*in*/    "r" (&_argvec[2])                            \
2072           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2073        );                                                          \
2074        lval = (__typeof__(lval)) _res;                             \
2075     } while (0)
2076  #define CALL_FN_W_10W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
2077                                    arg7,arg8,arg9,arg10)           \
2078     do {                                                           \
2079        volatile OrigFn        _orig = (orig);                      \
2080        volatile unsigned long _argvec[3+10];                       \
2081        volatile unsigned long _res;                                \
2082                   \
2083        _argvec[1]   = (unsigned long)_orig.r2;                     \
2084        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
2085        _argvec[2+1] = (unsigned long)arg1;                         \
2086        _argvec[2+2] = (unsigned long)arg2;                         \
2087        _argvec[2+3] = (unsigned long)arg3;                         \
2088        _argvec[2+4] = (unsigned long)arg4;                         \
2089        _argvec[2+5] = (unsigned long)arg5;                         \
2090        _argvec[2+6] = (unsigned long)arg6;                         \
2091        _argvec[2+7] = (unsigned long)arg7;                         \
2092        _argvec[2+8] = (unsigned long)arg8;                         \
2093        _argvec[2+9] = (unsigned long)arg9;                         \
2094        _argvec[2+10] = (unsigned long)arg10;                       \
2095        __asm__ volatile(                                           \
2096           "mr 11,%1\n\t"                                           \
2097           "std 2,-16(11)\n\t"  &bsol;* save tocptr */                   \
2098           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
2099           "addi 1,1,-128\n\t"  &bsol;* expand stack frame */            \
2100                                                         \
2101           "ld  3,80(11)\n\t"                                       \
2102           "std 3,120(1)\n\t"                                       \
2103                                                          \
2104           "ld  3,72(11)\n\t"                                       \
2105           "std 3,112(1)\n\t"                                       \
2106                                                       \
2107           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
2108           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
2109           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
2110           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
2111           "ld   7, 40(11)\n\t" &bsol;* arg5->r7 */                      \
2112           "ld   8, 48(11)\n\t" &bsol;* arg6->r8 */                      \
2113           "ld   9, 56(11)\n\t" &bsol;* arg7->r9 */                      \
2114           "ld  10, 64(11)\n\t" &bsol;* arg8->r10 */                     \
2115           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
2116           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
2117           "mr 11,%1\n\t"                                           \
2118           "mr %0,3\n\t"                                            \
2119           "ld 2,-16(11)\n\t" &bsol;* restore tocptr */                  \
2120           "addi 1,1,128"     &bsol;* restore frame */                   \
2121           : &bsol;*out*/   "=r" (_res)                                  \
2122           : &bsol;*in*/    "r" (&_argvec[2])                            \
2123           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2124        );                                                          \
2125        lval = (__typeof__(lval)) _res;                             \
2126     } while (0)
2127  #define CALL_FN_W_11W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
2128                                    arg7,arg8,arg9,arg10,arg11)     \
2129     do {                                                           \
2130        volatile OrigFn        _orig = (orig);                      \
2131        volatile unsigned long _argvec[3+11];                       \
2132        volatile unsigned long _res;                                \
2133                   \
2134        _argvec[1]   = (unsigned long)_orig.r2;                     \
2135        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
2136        _argvec[2+1] = (unsigned long)arg1;                         \
2137        _argvec[2+2] = (unsigned long)arg2;                         \
2138        _argvec[2+3] = (unsigned long)arg3;                         \
2139        _argvec[2+4] = (unsigned long)arg4;                         \
2140        _argvec[2+5] = (unsigned long)arg5;                         \
2141        _argvec[2+6] = (unsigned long)arg6;                         \
2142        _argvec[2+7] = (unsigned long)arg7;                         \
2143        _argvec[2+8] = (unsigned long)arg8;                         \
2144        _argvec[2+9] = (unsigned long)arg9;                         \
2145        _argvec[2+10] = (unsigned long)arg10;                       \
2146        _argvec[2+11] = (unsigned long)arg11;                       \
2147        __asm__ volatile(                                           \
2148           "mr 11,%1\n\t"                                           \
2149           "std 2,-16(11)\n\t"  &bsol;* save tocptr */                   \
2150           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
2151           "addi 1,1,-144\n\t"  &bsol;* expand stack frame */            \
2152                                                         \
2153           "ld  3,88(11)\n\t"                                       \
2154           "std 3,128(1)\n\t"                                       \
2155                                                         \
2156           "ld  3,80(11)\n\t"                                       \
2157           "std 3,120(1)\n\t"                                       \
2158                                                          \
2159           "ld  3,72(11)\n\t"                                       \
2160           "std 3,112(1)\n\t"                                       \
2161                                                       \
2162           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
2163           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
2164           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
2165           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
2166           "ld   7, 40(11)\n\t" &bsol;* arg5->r7 */                      \
2167           "ld   8, 48(11)\n\t" &bsol;* arg6->r8 */                      \
2168           "ld   9, 56(11)\n\t" &bsol;* arg7->r9 */                      \
2169           "ld  10, 64(11)\n\t" &bsol;* arg8->r10 */                     \
2170           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
2171           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
2172           "mr 11,%1\n\t"                                           \
2173           "mr %0,3\n\t"                                            \
2174           "ld 2,-16(11)\n\t" &bsol;* restore tocptr */                  \
2175           "addi 1,1,144"     &bsol;* restore frame */                   \
2176           : &bsol;*out*/   "=r" (_res)                                  \
2177           : &bsol;*in*/    "r" (&_argvec[2])                            \
2178           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2179        );                                                          \
2180        lval = (__typeof__(lval)) _res;                             \
2181     } while (0)
2182  #define CALL_FN_W_12W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
2183                                  arg7,arg8,arg9,arg10,arg11,arg12) \
2184     do {                                                           \
2185        volatile OrigFn        _orig = (orig);                      \
2186        volatile unsigned long _argvec[3+12];                       \
2187        volatile unsigned long _res;                                \
2188                   \
2189        _argvec[1]   = (unsigned long)_orig.r2;                     \
2190        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
2191        _argvec[2+1] = (unsigned long)arg1;                         \
2192        _argvec[2+2] = (unsigned long)arg2;                         \
2193        _argvec[2+3] = (unsigned long)arg3;                         \
2194        _argvec[2+4] = (unsigned long)arg4;                         \
2195        _argvec[2+5] = (unsigned long)arg5;                         \
2196        _argvec[2+6] = (unsigned long)arg6;                         \
2197        _argvec[2+7] = (unsigned long)arg7;                         \
2198        _argvec[2+8] = (unsigned long)arg8;                         \
2199        _argvec[2+9] = (unsigned long)arg9;                         \
2200        _argvec[2+10] = (unsigned long)arg10;                       \
2201        _argvec[2+11] = (unsigned long)arg11;                       \
2202        _argvec[2+12] = (unsigned long)arg12;                       \
2203        __asm__ volatile(                                           \
2204           "mr 11,%1\n\t"                                           \
2205           "std 2,-16(11)\n\t"  &bsol;* save tocptr */                   \
2206           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
2207           "addi 1,1,-144\n\t"  &bsol;* expand stack frame */            \
2208                                                         \
2209           "ld  3,96(11)\n\t"                                       \
2210           "std 3,136(1)\n\t"                                       \
2211                                                         \
2212           "ld  3,88(11)\n\t"                                       \
2213           "std 3,128(1)\n\t"                                       \
2214                                                         \
2215           "ld  3,80(11)\n\t"                                       \
2216           "std 3,120(1)\n\t"                                       \
2217                                                          \
2218           "ld  3,72(11)\n\t"                                       \
2219           "std 3,112(1)\n\t"                                       \
2220                                                       \
2221           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
2222           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
2223           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
2224           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
2225           "ld   7, 40(11)\n\t" &bsol;* arg5->r7 */                      \
2226           "ld   8, 48(11)\n\t" &bsol;* arg6->r8 */                      \
2227           "ld   9, 56(11)\n\t" &bsol;* arg7->r9 */                      \
2228           "ld  10, 64(11)\n\t" &bsol;* arg8->r10 */                     \
2229           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
2230           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
2231           "mr 11,%1\n\t"                                           \
2232           "mr %0,3\n\t"                                            \
2233           "ld 2,-16(11)\n\t" &bsol;* restore tocptr */                  \
2234           "addi 1,1,144"     &bsol;* restore frame */                   \
2235           : &bsol;*out*/   "=r" (_res)                                  \
2236           : &bsol;*in*/    "r" (&_argvec[2])                            \
2237           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2238        );                                                          \
2239        lval = (__typeof__(lval)) _res;                             \
2240     } while (0)
2241  #endif &bsol;* PLAT_ppc64_linux */
2242  #if defined(PLAT_arm_linux)
2243  #define __CALLER_SAVED_REGS "r0", "r1", "r2", "r3","r4","r14"
2244  #define CALL_FN_W_v(lval, orig)                                   \
2245     do {                                                           \
2246        volatile OrigFn        _orig = (orig);                      \
2247        volatile unsigned long _argvec[1];                          \
2248        volatile unsigned long _res;                                \
2249        _argvec[0] = (unsigned long)_orig.nraddr;                   \
2250        __asm__ volatile(                                           \
2251           "ldr r4, [%1] \n\t"  &bsol;* target->r4 */                    \
2252           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R4                   \
2253           "mov %0, r0\n"                                           \
2254           : &bsol;*out*/   "=r" (_res)                                  \
2255           : &bsol;*in*/    "0" (&_argvec[0])                            \
2256           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2257        );                                                          \
2258        lval = (__typeof__(lval)) _res;                             \
2259     } while (0)
2260  #define CALL_FN_W_W(lval, orig, arg1)                             \
2261     do {                                                           \
2262        volatile OrigFn        _orig = (orig);                      \
2263        volatile unsigned long _argvec[2];                          \
2264        volatile unsigned long _res;                                \
2265        _argvec[0] = (unsigned long)_orig.nraddr;                   \
2266        _argvec[1] = (unsigned long)(arg1);                         \
2267        __asm__ volatile(                                           \
2268           "ldr r0, [%1, #4] \n\t"                                  \
2269           "ldr r4, [%1] \n\t"  &bsol;* target->r4 */                    \
2270           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R4                   \
2271           "mov %0, r0\n"                                           \
2272           : &bsol;*out*/   "=r" (_res)                                  \
2273           : &bsol;*in*/    "0" (&_argvec[0])                            \
2274           : &bsol;*trash*/ "cc", "memory",  __CALLER_SAVED_REGS         \
2275        );                                                          \
2276        lval = (__typeof__(lval)) _res;                             \
2277     } while (0)
2278  #define CALL_FN_W_WW(lval, orig, arg1,arg2)                       \
2279     do {                                                           \
2280        volatile OrigFn        _orig = (orig);                      \
2281        volatile unsigned long _argvec[3];                          \
2282        volatile unsigned long _res;                                \
2283        _argvec[0] = (unsigned long)_orig.nraddr;                   \
2284        _argvec[1] = (unsigned long)(arg1);                         \
2285        _argvec[2] = (unsigned long)(arg2);                         \
2286        __asm__ volatile(                                           \
2287           "ldr r0, [%1, #4] \n\t"                                  \
2288           "ldr r1, [%1, #8] \n\t"                                  \
2289           "ldr r4, [%1] \n\t"  &bsol;* target->r4 */                    \
2290           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R4                   \
2291           "mov %0, r0\n"                                           \
2292           : &bsol;*out*/   "=r" (_res)                                  \
2293           : &bsol;*in*/    "0" (&_argvec[0])                            \
2294           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2295        );                                                          \
2296        lval = (__typeof__(lval)) _res;                             \
2297     } while (0)
2298  #define CALL_FN_W_WWW(lval, orig, arg1,arg2,arg3)                 \
2299     do {                                                           \
2300        volatile OrigFn        _orig = (orig);                      \
2301        volatile unsigned long _argvec[4];                          \
2302        volatile unsigned long _res;                                \
2303        _argvec[0] = (unsigned long)_orig.nraddr;                   \
2304        _argvec[1] = (unsigned long)(arg1);                         \
2305        _argvec[2] = (unsigned long)(arg2);                         \
2306        _argvec[3] = (unsigned long)(arg3);                         \
2307        __asm__ volatile(                                           \
2308           "ldr r0, [%1, #4] \n\t"                                  \
2309           "ldr r1, [%1, #8] \n\t"                                  \
2310           "ldr r2, [%1, #12] \n\t"                                 \
2311           "ldr r4, [%1] \n\t"  &bsol;* target->r4 */                    \
2312           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R4                   \
2313           "mov %0, r0\n"                                           \
2314           : &bsol;*out*/   "=r" (_res)                                  \
2315           : &bsol;*in*/    "0" (&_argvec[0])                            \
2316           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2317        );                                                          \
2318        lval = (__typeof__(lval)) _res;                             \
2319     } while (0)
2320  #define CALL_FN_W_WWWW(lval, orig, arg1,arg2,arg3,arg4)           \
2321     do {                                                           \
2322        volatile OrigFn        _orig = (orig);                      \
2323        volatile unsigned long _argvec[5];                          \
2324        volatile unsigned long _res;                                \
2325        _argvec[0] = (unsigned long)_orig.nraddr;                   \
2326        _argvec[1] = (unsigned long)(arg1);                         \
2327        _argvec[2] = (unsigned long)(arg2);                         \
2328        _argvec[3] = (unsigned long)(arg3);                         \
2329        _argvec[4] = (unsigned long)(arg4);                         \
2330        __asm__ volatile(                                           \
2331           "ldr r0, [%1, #4] \n\t"                                  \
2332           "ldr r1, [%1, #8] \n\t"                                  \
2333           "ldr r2, [%1, #12] \n\t"                                 \
2334           "ldr r3, [%1, #16] \n\t"                                 \
2335           "ldr r4, [%1] \n\t"  &bsol;* target->r4 */                    \
2336           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R4                   \
2337           "mov %0, r0"                                             \
2338           : &bsol;*out*/   "=r" (_res)                                  \
2339           : &bsol;*in*/    "0" (&_argvec[0])                            \
2340           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2341        );                                                          \
2342        lval = (__typeof__(lval)) _res;                             \
2343     } while (0)
2344  #define CALL_FN_W_5W(lval, orig, arg1,arg2,arg3,arg4,arg5)        \
2345     do {                                                           \
2346        volatile OrigFn        _orig = (orig);                      \
2347        volatile unsigned long _argvec[6];                          \
2348        volatile unsigned long _res;                                \
2349        _argvec[0] = (unsigned long)_orig.nraddr;                   \
2350        _argvec[1] = (unsigned long)(arg1);                         \
2351        _argvec[2] = (unsigned long)(arg2);                         \
2352        _argvec[3] = (unsigned long)(arg3);                         \
2353        _argvec[4] = (unsigned long)(arg4);                         \
2354        _argvec[5] = (unsigned long)(arg5);                         \
2355        __asm__ volatile(                                           \
2356           "ldr r0, [%1, #20] \n\t"                                 \
2357           "push {r0} \n\t"                                         \
2358           "ldr r0, [%1, #4] \n\t"                                  \
2359           "ldr r1, [%1, #8] \n\t"                                  \
2360           "ldr r2, [%1, #12] \n\t"                                 \
2361           "ldr r3, [%1, #16] \n\t"                                 \
2362           "ldr r4, [%1] \n\t"  &bsol;* target->r4 */                    \
2363           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R4                   \
2364           "add sp, sp, #4 \n\t"                                    \
2365           "mov %0, r0"                                             \
2366           : &bsol;*out*/   "=r" (_res)                                  \
2367           : &bsol;*in*/    "0" (&_argvec[0])                            \
2368           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2369        );                                                          \
2370        lval = (__typeof__(lval)) _res;                             \
2371     } while (0)
2372  #define CALL_FN_W_6W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6)   \
2373     do {                                                           \
2374        volatile OrigFn        _orig = (orig);                      \
2375        volatile unsigned long _argvec[7];                          \
2376        volatile unsigned long _res;                                \
2377        _argvec[0] = (unsigned long)_orig.nraddr;                   \
2378        _argvec[1] = (unsigned long)(arg1);                         \
2379        _argvec[2] = (unsigned long)(arg2);                         \
2380        _argvec[3] = (unsigned long)(arg3);                         \
2381        _argvec[4] = (unsigned long)(arg4);                         \
2382        _argvec[5] = (unsigned long)(arg5);                         \
2383        _argvec[6] = (unsigned long)(arg6);                         \
2384        __asm__ volatile(                                           \
2385           "ldr r0, [%1, #20] \n\t"                                 \
2386           "ldr r1, [%1, #24] \n\t"                                 \
2387           "push {r0, r1} \n\t"                                     \
2388           "ldr r0, [%1, #4] \n\t"                                  \
2389           "ldr r1, [%1, #8] \n\t"                                  \
2390           "ldr r2, [%1, #12] \n\t"                                 \
2391           "ldr r3, [%1, #16] \n\t"                                 \
2392           "ldr r4, [%1] \n\t"  &bsol;* target->r4 */                    \
2393           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R4                   \
2394           "add sp, sp, #8 \n\t"                                    \
2395           "mov %0, r0"                                             \
2396           : &bsol;*out*/   "=r" (_res)                                  \
2397           : &bsol;*in*/    "0" (&_argvec[0])                            \
2398           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2399        );                                                          \
2400        lval = (__typeof__(lval)) _res;                             \
2401     } while (0)
2402  #define CALL_FN_W_7W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
2403                                   arg7)                            \
2404     do {                                                           \
2405        volatile OrigFn        _orig = (orig);                      \
2406        volatile unsigned long _argvec[8];                          \
2407        volatile unsigned long _res;                                \
2408        _argvec[0] = (unsigned long)_orig.nraddr;                   \
2409        _argvec[1] = (unsigned long)(arg1);                         \
2410        _argvec[2] = (unsigned long)(arg2);                         \
2411        _argvec[3] = (unsigned long)(arg3);                         \
2412        _argvec[4] = (unsigned long)(arg4);                         \
2413        _argvec[5] = (unsigned long)(arg5);                         \
2414        _argvec[6] = (unsigned long)(arg6);                         \
2415        _argvec[7] = (unsigned long)(arg7);                         \
2416        __asm__ volatile(                                           \
2417           "ldr r0, [%1, #20] \n\t"                                 \
2418           "ldr r1, [%1, #24] \n\t"                                 \
2419           "ldr r2, [%1, #28] \n\t"                                 \
2420           "push {r0, r1, r2} \n\t"                                 \
2421           "ldr r0, [%1, #4] \n\t"                                  \
2422           "ldr r1, [%1, #8] \n\t"                                  \
2423           "ldr r2, [%1, #12] \n\t"                                 \
2424           "ldr r3, [%1, #16] \n\t"                                 \
2425           "ldr r4, [%1] \n\t"  &bsol;* target->r4 */                    \
2426           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R4                   \
2427           "add sp, sp, #12 \n\t"                                   \
2428           "mov %0, r0"                                             \
2429           : &bsol;*out*/   "=r" (_res)                                  \
2430           : &bsol;*in*/    "0" (&_argvec[0])                            \
2431           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2432        );                                                          \
2433        lval = (__typeof__(lval)) _res;                             \
2434     } while (0)
2435  #define CALL_FN_W_8W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
2436                                   arg7,arg8)                       \
2437     do {                                                           \
2438        volatile OrigFn        _orig = (orig);                      \
2439        volatile unsigned long _argvec[9];                          \
2440        volatile unsigned long _res;                                \
2441        _argvec[0] = (unsigned long)_orig.nraddr;                   \
2442        _argvec[1] = (unsigned long)(arg1);                         \
2443        _argvec[2] = (unsigned long)(arg2);                         \
2444        _argvec[3] = (unsigned long)(arg3);                         \
2445        _argvec[4] = (unsigned long)(arg4);                         \
2446        _argvec[5] = (unsigned long)(arg5);                         \
2447        _argvec[6] = (unsigned long)(arg6);                         \
2448        _argvec[7] = (unsigned long)(arg7);                         \
2449        _argvec[8] = (unsigned long)(arg8);                         \
2450        __asm__ volatile(                                           \
2451           "ldr r0, [%1, #20] \n\t"                                 \
2452           "ldr r1, [%1, #24] \n\t"                                 \
2453           "ldr r2, [%1, #28] \n\t"                                 \
2454           "ldr r3, [%1, #32] \n\t"                                 \
2455           "push {r0, r1, r2, r3} \n\t"                             \
2456           "ldr r0, [%1, #4] \n\t"                                  \
2457           "ldr r1, [%1, #8] \n\t"                                  \
2458           "ldr r2, [%1, #12] \n\t"                                 \
2459           "ldr r3, [%1, #16] \n\t"                                 \
2460           "ldr r4, [%1] \n\t"  &bsol;* target->r4 */                    \
2461           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R4                   \
2462           "add sp, sp, #16 \n\t"                                   \
2463           "mov %0, r0"                                             \
2464           : &bsol;*out*/   "=r" (_res)                                  \
2465           : &bsol;*in*/    "0" (&_argvec[0])                            \
2466           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2467        );                                                          \
2468        lval = (__typeof__(lval)) _res;                             \
2469     } while (0)
2470  #define CALL_FN_W_9W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
2471                                   arg7,arg8,arg9)                  \
2472     do {                                                           \
2473        volatile OrigFn        _orig = (orig);                      \
2474        volatile unsigned long _argvec[10];                         \
2475        volatile unsigned long _res;                                \
2476        _argvec[0] = (unsigned long)_orig.nraddr;                   \
2477        _argvec[1] = (unsigned long)(arg1);                         \
2478        _argvec[2] = (unsigned long)(arg2);                         \
2479        _argvec[3] = (unsigned long)(arg3);                         \
2480        _argvec[4] = (unsigned long)(arg4);                         \
2481        _argvec[5] = (unsigned long)(arg5);                         \
2482        _argvec[6] = (unsigned long)(arg6);                         \
2483        _argvec[7] = (unsigned long)(arg7);                         \
2484        _argvec[8] = (unsigned long)(arg8);                         \
2485        _argvec[9] = (unsigned long)(arg9);                         \
2486        __asm__ volatile(                                           \
2487           "ldr r0, [%1, #20] \n\t"                                 \
2488           "ldr r1, [%1, #24] \n\t"                                 \
2489           "ldr r2, [%1, #28] \n\t"                                 \
2490           "ldr r3, [%1, #32] \n\t"                                 \
2491           "ldr r4, [%1, #36] \n\t"                                 \
2492           "push {r0, r1, r2, r3, r4} \n\t"                         \
2493           "ldr r0, [%1, #4] \n\t"                                  \
2494           "ldr r1, [%1, #8] \n\t"                                  \
2495           "ldr r2, [%1, #12] \n\t"                                 \
2496           "ldr r3, [%1, #16] \n\t"                                 \
2497           "ldr r4, [%1] \n\t"  &bsol;* target->r4 */                    \
2498           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R4                   \
2499           "add sp, sp, #20 \n\t"                                   \
2500           "mov %0, r0"                                             \
2501           : &bsol;*out*/   "=r" (_res)                                  \
2502           : &bsol;*in*/    "0" (&_argvec[0])                            \
2503           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2504        );                                                          \
2505        lval = (__typeof__(lval)) _res;                             \
2506     } while (0)
2507  #define CALL_FN_W_10W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
2508                                    arg7,arg8,arg9,arg10)           \
2509     do {                                                           \
2510        volatile OrigFn        _orig = (orig);                      \
2511        volatile unsigned long _argvec[11];                         \
2512        volatile unsigned long _res;                                \
2513        _argvec[0] = (unsigned long)_orig.nraddr;                   \
2514        _argvec[1] = (unsigned long)(arg1);                         \
2515        _argvec[2] = (unsigned long)(arg2);                         \
2516        _argvec[3] = (unsigned long)(arg3);                         \
2517        _argvec[4] = (unsigned long)(arg4);                         \
2518        _argvec[5] = (unsigned long)(arg5);                         \
2519        _argvec[6] = (unsigned long)(arg6);                         \
2520        _argvec[7] = (unsigned long)(arg7);                         \
2521        _argvec[8] = (unsigned long)(arg8);                         \
2522        _argvec[9] = (unsigned long)(arg9);                         \
2523        _argvec[10] = (unsigned long)(arg10);                       \
2524        __asm__ volatile(                                           \
2525           "ldr r0, [%1, #40] \n\t"                                 \
2526           "push {r0} \n\t"                                         \
2527           "ldr r0, [%1, #20] \n\t"                                 \
2528           "ldr r1, [%1, #24] \n\t"                                 \
2529           "ldr r2, [%1, #28] \n\t"                                 \
2530           "ldr r3, [%1, #32] \n\t"                                 \
2531           "ldr r4, [%1, #36] \n\t"                                 \
2532           "push {r0, r1, r2, r3, r4} \n\t"                         \
2533           "ldr r0, [%1, #4] \n\t"                                  \
2534           "ldr r1, [%1, #8] \n\t"                                  \
2535           "ldr r2, [%1, #12] \n\t"                                 \
2536           "ldr r3, [%1, #16] \n\t"                                 \
2537           "ldr r4, [%1] \n\t"  &bsol;* target->r4 */                    \
2538           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R4                   \
2539           "add sp, sp, #24 \n\t"                                   \
2540           "mov %0, r0"                                             \
2541           : &bsol;*out*/   "=r" (_res)                                  \
2542           : &bsol;*in*/    "0" (&_argvec[0])                            \
2543           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2544        );                                                          \
2545        lval = (__typeof__(lval)) _res;                             \
2546     } while (0)
2547  #define CALL_FN_W_11W(lval, orig, arg1,arg2,arg3,arg4,arg5,       \
2548                                    arg6,arg7,arg8,arg9,arg10,      \
2549                                    arg11)                          \
2550     do {                                                           \
2551        volatile OrigFn        _orig = (orig);                      \
2552        volatile unsigned long _argvec[12];                         \
2553        volatile unsigned long _res;                                \
2554        _argvec[0] = (unsigned long)_orig.nraddr;                   \
2555        _argvec[1] = (unsigned long)(arg1);                         \
2556        _argvec[2] = (unsigned long)(arg2);                         \
2557        _argvec[3] = (unsigned long)(arg3);                         \
2558        _argvec[4] = (unsigned long)(arg4);                         \
2559        _argvec[5] = (unsigned long)(arg5);                         \
2560        _argvec[6] = (unsigned long)(arg6);                         \
2561        _argvec[7] = (unsigned long)(arg7);                         \
2562        _argvec[8] = (unsigned long)(arg8);                         \
2563        _argvec[9] = (unsigned long)(arg9);                         \
2564        _argvec[10] = (unsigned long)(arg10);                       \
2565        _argvec[11] = (unsigned long)(arg11);                       \
2566        __asm__ volatile(                                           \
2567           "ldr r0, [%1, #40] \n\t"                                 \
2568           "ldr r1, [%1, #44] \n\t"                                 \
2569           "push {r0, r1} \n\t"                                     \
2570           "ldr r0, [%1, #20] \n\t"                                 \
2571           "ldr r1, [%1, #24] \n\t"                                 \
2572           "ldr r2, [%1, #28] \n\t"                                 \
2573           "ldr r3, [%1, #32] \n\t"                                 \
2574           "ldr r4, [%1, #36] \n\t"                                 \
2575           "push {r0, r1, r2, r3, r4} \n\t"                         \
2576           "ldr r0, [%1, #4] \n\t"                                  \
2577           "ldr r1, [%1, #8] \n\t"                                  \
2578           "ldr r2, [%1, #12] \n\t"                                 \
2579           "ldr r3, [%1, #16] \n\t"                                 \
2580           "ldr r4, [%1] \n\t"  &bsol;* target->r4 */                    \
2581           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R4                   \
2582           "add sp, sp, #28 \n\t"                                   \
2583           "mov %0, r0"                                             \
2584           : &bsol;*out*/   "=r" (_res)                                  \
2585           : &bsol;*in*/    "0" (&_argvec[0])                            \
2586           : &bsol;*trash*/ "cc", "memory",__CALLER_SAVED_REGS           \
2587        );                                                          \
2588        lval = (__typeof__(lval)) _res;                             \
2589     } while (0)
2590  #define CALL_FN_W_12W(lval, orig, arg1,arg2,arg3,arg4,arg5,       \
2591                                    arg6,arg7,arg8,arg9,arg10,      \
2592                                    arg11,arg12)                    \
2593     do {                                                           \
2594        volatile OrigFn        _orig = (orig);                      \
2595        volatile unsigned long _argvec[13];                         \
2596        volatile unsigned long _res;                                \
2597        _argvec[0] = (unsigned long)_orig.nraddr;                   \
2598        _argvec[1] = (unsigned long)(arg1);                         \
2599        _argvec[2] = (unsigned long)(arg2);                         \
2600        _argvec[3] = (unsigned long)(arg3);                         \
2601        _argvec[4] = (unsigned long)(arg4);                         \
2602        _argvec[5] = (unsigned long)(arg5);                         \
2603        _argvec[6] = (unsigned long)(arg6);                         \
2604        _argvec[7] = (unsigned long)(arg7);                         \
2605        _argvec[8] = (unsigned long)(arg8);                         \
2606        _argvec[9] = (unsigned long)(arg9);                         \
2607        _argvec[10] = (unsigned long)(arg10);                       \
2608        _argvec[11] = (unsigned long)(arg11);                       \
2609        _argvec[12] = (unsigned long)(arg12);                       \
2610        __asm__ volatile(                                           \
2611           "ldr r0, [%1, #40] \n\t"                                 \
2612           "ldr r1, [%1, #44] \n\t"                                 \
2613           "ldr r2, [%1, #48] \n\t"                                 \
2614           "push {r0, r1, r2} \n\t"                                 \
2615           "ldr r0, [%1, #20] \n\t"                                 \
2616           "ldr r1, [%1, #24] \n\t"                                 \
2617           "ldr r2, [%1, #28] \n\t"                                 \
2618           "ldr r3, [%1, #32] \n\t"                                 \
2619           "ldr r4, [%1, #36] \n\t"                                 \
2620           "push {r0, r1, r2, r3, r4} \n\t"                         \
2621           "ldr r0, [%1, #4] \n\t"                                  \
2622           "ldr r1, [%1, #8] \n\t"                                  \
2623           "ldr r2, [%1, #12] \n\t"                                 \
2624           "ldr r3, [%1, #16] \n\t"                                 \
2625           "ldr r4, [%1] \n\t"  &bsol;* target->r4 */                    \
2626           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R4                   \
2627           "add sp, sp, #32 \n\t"                                   \
2628           "mov %0, r0"                                             \
2629           : &bsol;*out*/   "=r" (_res)                                  \
2630           : &bsol;*in*/    "0" (&_argvec[0])                            \
2631           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2632        );                                                          \
2633        lval = (__typeof__(lval)) _res;                             \
2634     } while (0)
2635  #endif &bsol;* PLAT_arm_linux */
2636  #if defined(PLAT_ppc32_aix5)
2637  #define __CALLER_SAVED_REGS                                       \
2638     "lr", "ctr", "xer",                                            \
2639     "cr0", "cr1", "cr2", "cr3", "cr4", "cr5", "cr6", "cr7",        \
2640     "r0", "r2", "r3", "r4", "r5", "r6", "r7", "r8", "r9", "r10",   \
2641     "r11", "r12", "r13"
2642  #define VG_EXPAND_FRAME_BY_trashes_r3(_n_fr)                      \
2643           "addi 1,1,-" #_n_fr "\n\t"                               \
2644           "lwz  3," #_n_fr "(1)\n\t"                               \
2645           "stw  3,0(1)\n\t"
2646  #define VG_CONTRACT_FRAME_BY(_n_fr)                               \
2647           "addi 1,1," #_n_fr "\n\t"
2648  #define CALL_FN_W_v(lval, orig)                                   \
2649     do {                                                           \
2650        volatile OrigFn        _orig = (orig);                      \
2651        volatile unsigned long _argvec[3+0];                        \
2652        volatile unsigned long _res;                                \
2653                   \
2654        _argvec[1] = (unsigned long)_orig.r2;                       \
2655        _argvec[2] = (unsigned long)_orig.nraddr;                   \
2656        __asm__ volatile(                                           \
2657           "mr 11,%1\n\t"                                           \
2658           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
2659           "stw  2,-8(11)\n\t"  &bsol;* save tocptr */                   \
2660           "lwz  2,-4(11)\n\t"  &bsol;* use nraddr's tocptr */           \
2661           "lwz 11, 0(11)\n\t"  &bsol;* target->r11 */                   \
2662           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
2663           "mr 11,%1\n\t"                                           \
2664           "mr %0,3\n\t"                                            \
2665           "lwz 2,-8(11)\n\t" &bsol;* restore tocptr */                  \
2666           VG_CONTRACT_FRAME_BY(512)                                \
2667           : &bsol;*out*/   "=r" (_res)                                  \
2668           : &bsol;*in*/    "r" (&_argvec[2])                            \
2669           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2670        );                                                          \
2671        lval = (__typeof__(lval)) _res;                             \
2672     } while (0)
2673  #define CALL_FN_W_W(lval, orig, arg1)                             \
2674     do {                                                           \
2675        volatile OrigFn        _orig = (orig);                      \
2676        volatile unsigned long _argvec[3+1];                        \
2677        volatile unsigned long _res;                                \
2678                   \
2679        _argvec[1]   = (unsigned long)_orig.r2;                     \
2680        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
2681        _argvec[2+1] = (unsigned long)arg1;                         \
2682        __asm__ volatile(                                           \
2683           "mr 11,%1\n\t"                                           \
2684           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
2685           "stw  2,-8(11)\n\t"  &bsol;* save tocptr */                   \
2686           "lwz  2,-4(11)\n\t"  &bsol;* use nraddr's tocptr */           \
2687           "lwz  3, 4(11)\n\t"  &bsol;* arg1->r3 */                      \
2688           "lwz 11, 0(11)\n\t"  &bsol;* target->r11 */                   \
2689           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
2690           "mr 11,%1\n\t"                                           \
2691           "mr %0,3\n\t"                                            \
2692           "lwz 2,-8(11)\n\t" &bsol;* restore tocptr */                  \
2693           VG_CONTRACT_FRAME_BY(512)                                \
2694           : &bsol;*out*/   "=r" (_res)                                  \
2695           : &bsol;*in*/    "r" (&_argvec[2])                            \
2696           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2697        );                                                          \
2698        lval = (__typeof__(lval)) _res;                             \
2699     } while (0)
2700  #define CALL_FN_W_WW(lval, orig, arg1,arg2)                       \
2701     do {                                                           \
2702        volatile OrigFn        _orig = (orig);                      \
2703        volatile unsigned long _argvec[3+2];                        \
2704        volatile unsigned long _res;                                \
2705                   \
2706        _argvec[1]   = (unsigned long)_orig.r2;                     \
2707        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
2708        _argvec[2+1] = (unsigned long)arg1;                         \
2709        _argvec[2+2] = (unsigned long)arg2;                         \
2710        __asm__ volatile(                                           \
2711           "mr 11,%1\n\t"                                           \
2712           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
2713           "stw  2,-8(11)\n\t"  &bsol;* save tocptr */                   \
2714           "lwz  2,-4(11)\n\t"  &bsol;* use nraddr's tocptr */           \
2715           "lwz  3, 4(11)\n\t"  &bsol;* arg1->r3 */                      \
2716           "lwz  4, 8(11)\n\t"  &bsol;* arg2->r4 */                      \
2717           "lwz 11, 0(11)\n\t"  &bsol;* target->r11 */                   \
2718           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
2719           "mr 11,%1\n\t"                                           \
2720           "mr %0,3\n\t"                                            \
2721           "lwz 2,-8(11)\n\t" &bsol;* restore tocptr */                  \
2722           VG_CONTRACT_FRAME_BY(512)                                \
2723           : &bsol;*out*/   "=r" (_res)                                  \
2724           : &bsol;*in*/    "r" (&_argvec[2])                            \
2725           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2726        );                                                          \
2727        lval = (__typeof__(lval)) _res;                             \
2728     } while (0)
2729  #define CALL_FN_W_WWW(lval, orig, arg1,arg2,arg3)                 \
2730     do {                                                           \
2731        volatile OrigFn        _orig = (orig);                      \
2732        volatile unsigned long _argvec[3+3];                        \
2733        volatile unsigned long _res;                                \
2734                   \
2735        _argvec[1]   = (unsigned long)_orig.r2;                     \
2736        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
2737        _argvec[2+1] = (unsigned long)arg1;                         \
2738        _argvec[2+2] = (unsigned long)arg2;                         \
2739        _argvec[2+3] = (unsigned long)arg3;                         \
2740        __asm__ volatile(                                           \
2741           "mr 11,%1\n\t"                                           \
2742           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
2743           "stw  2,-8(11)\n\t"  &bsol;* save tocptr */                   \
2744           "lwz  2,-4(11)\n\t"  &bsol;* use nraddr's tocptr */           \
2745           "lwz  3, 4(11)\n\t"  &bsol;* arg1->r3 */                      \
2746           "lwz  4, 8(11)\n\t"  &bsol;* arg2->r4 */                      \
2747           "lwz  5, 12(11)\n\t" &bsol;* arg3->r5 */                      \
2748           "lwz 11, 0(11)\n\t"  &bsol;* target->r11 */                   \
2749           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
2750           "mr 11,%1\n\t"                                           \
2751           "mr %0,3\n\t"                                            \
2752           "lwz 2,-8(11)\n\t" &bsol;* restore tocptr */                  \
2753           VG_CONTRACT_FRAME_BY(512)                                \
2754           : &bsol;*out*/   "=r" (_res)                                  \
2755           : &bsol;*in*/    "r" (&_argvec[2])                            \
2756           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2757        );                                                          \
2758        lval = (__typeof__(lval)) _res;                             \
2759     } while (0)
2760  #define CALL_FN_W_WWWW(lval, orig, arg1,arg2,arg3,arg4)           \
2761     do {                                                           \
2762        volatile OrigFn        _orig = (orig);                      \
2763        volatile unsigned long _argvec[3+4];                        \
2764        volatile unsigned long _res;                                \
2765                   \
2766        _argvec[1]   = (unsigned long)_orig.r2;                     \
2767        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
2768        _argvec[2+1] = (unsigned long)arg1;                         \
2769        _argvec[2+2] = (unsigned long)arg2;                         \
2770        _argvec[2+3] = (unsigned long)arg3;                         \
2771        _argvec[2+4] = (unsigned long)arg4;                         \
2772        __asm__ volatile(                                           \
2773           "mr 11,%1\n\t"                                           \
2774           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
2775           "stw  2,-8(11)\n\t"  &bsol;* save tocptr */                   \
2776           "lwz  2,-4(11)\n\t"  &bsol;* use nraddr's tocptr */           \
2777           "lwz  3, 4(11)\n\t"  &bsol;* arg1->r3 */                      \
2778           "lwz  4, 8(11)\n\t"  &bsol;* arg2->r4 */                      \
2779           "lwz  5, 12(11)\n\t" &bsol;* arg3->r5 */                      \
2780           "lwz  6, 16(11)\n\t" &bsol;* arg4->r6 */                      \
2781           "lwz 11, 0(11)\n\t"  &bsol;* target->r11 */                   \
2782           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
2783           "mr 11,%1\n\t"                                           \
2784           "mr %0,3\n\t"                                            \
2785           "lwz 2,-8(11)\n\t" &bsol;* restore tocptr */                  \
2786           VG_CONTRACT_FRAME_BY(512)                                \
2787           : &bsol;*out*/   "=r" (_res)                                  \
2788           : &bsol;*in*/    "r" (&_argvec[2])                            \
2789           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2790        );                                                          \
2791        lval = (__typeof__(lval)) _res;                             \
2792     } while (0)
2793  #define CALL_FN_W_5W(lval, orig, arg1,arg2,arg3,arg4,arg5)        \
2794     do {                                                           \
2795        volatile OrigFn        _orig = (orig);                      \
2796        volatile unsigned long _argvec[3+5];                        \
2797        volatile unsigned long _res;                                \
2798                   \
2799        _argvec[1]   = (unsigned long)_orig.r2;                     \
2800        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
2801        _argvec[2+1] = (unsigned long)arg1;                         \
2802        _argvec[2+2] = (unsigned long)arg2;                         \
2803        _argvec[2+3] = (unsigned long)arg3;                         \
2804        _argvec[2+4] = (unsigned long)arg4;                         \
2805        _argvec[2+5] = (unsigned long)arg5;                         \
2806        __asm__ volatile(                                           \
2807           "mr 11,%1\n\t"                                           \
2808           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
2809           "stw  2,-8(11)\n\t"  &bsol;* save tocptr */                   \
2810           "lwz  2,-4(11)\n\t"  &bsol;* use nraddr's tocptr */           \
2811           "lwz  3, 4(11)\n\t"  &bsol;* arg1->r3 */                      \
2812           "lwz  4, 8(11)\n\t" &bsol;* arg2->r4 */                       \
2813           "lwz  5, 12(11)\n\t" &bsol;* arg3->r5 */                      \
2814           "lwz  6, 16(11)\n\t" &bsol;* arg4->r6 */                      \
2815           "lwz  7, 20(11)\n\t" &bsol;* arg5->r7 */                      \
2816           "lwz 11, 0(11)\n\t"  &bsol;* target->r11 */                   \
2817           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
2818           "mr 11,%1\n\t"                                           \
2819           "mr %0,3\n\t"                                            \
2820           "lwz 2,-8(11)\n\t" &bsol;* restore tocptr */                  \
2821           VG_CONTRACT_FRAME_BY(512)                                \
2822           : &bsol;*out*/   "=r" (_res)                                  \
2823           : &bsol;*in*/    "r" (&_argvec[2])                            \
2824           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2825        );                                                          \
2826        lval = (__typeof__(lval)) _res;                             \
2827     } while (0)
2828  #define CALL_FN_W_6W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6)   \
2829     do {                                                           \
2830        volatile OrigFn        _orig = (orig);                      \
2831        volatile unsigned long _argvec[3+6];                        \
2832        volatile unsigned long _res;                                \
2833                   \
2834        _argvec[1]   = (unsigned long)_orig.r2;                     \
2835        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
2836        _argvec[2+1] = (unsigned long)arg1;                         \
2837        _argvec[2+2] = (unsigned long)arg2;                         \
2838        _argvec[2+3] = (unsigned long)arg3;                         \
2839        _argvec[2+4] = (unsigned long)arg4;                         \
2840        _argvec[2+5] = (unsigned long)arg5;                         \
2841        _argvec[2+6] = (unsigned long)arg6;                         \
2842        __asm__ volatile(                                           \
2843           "mr 11,%1\n\t"                                           \
2844           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
2845           "stw  2,-8(11)\n\t"  &bsol;* save tocptr */                   \
2846           "lwz  2,-4(11)\n\t"  &bsol;* use nraddr's tocptr */           \
2847           "lwz  3, 4(11)\n\t"  &bsol;* arg1->r3 */                      \
2848           "lwz  4, 8(11)\n\t"  &bsol;* arg2->r4 */                      \
2849           "lwz  5, 12(11)\n\t" &bsol;* arg3->r5 */                      \
2850           "lwz  6, 16(11)\n\t" &bsol;* arg4->r6 */                      \
2851           "lwz  7, 20(11)\n\t" &bsol;* arg5->r7 */                      \
2852           "lwz  8, 24(11)\n\t" &bsol;* arg6->r8 */                      \
2853           "lwz 11, 0(11)\n\t"  &bsol;* target->r11 */                   \
2854           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
2855           "mr 11,%1\n\t"                                           \
2856           "mr %0,3\n\t"                                            \
2857           "lwz 2,-8(11)\n\t" &bsol;* restore tocptr */                  \
2858           VG_CONTRACT_FRAME_BY(512)                                \
2859           : &bsol;*out*/   "=r" (_res)                                  \
2860           : &bsol;*in*/    "r" (&_argvec[2])                            \
2861           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2862        );                                                          \
2863        lval = (__typeof__(lval)) _res;                             \
2864     } while (0)
2865  #define CALL_FN_W_7W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
2866                                   arg7)                            \
2867     do {                                                           \
2868        volatile OrigFn        _orig = (orig);                      \
2869        volatile unsigned long _argvec[3+7];                        \
2870        volatile unsigned long _res;                                \
2871                   \
2872        _argvec[1]   = (unsigned long)_orig.r2;                     \
2873        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
2874        _argvec[2+1] = (unsigned long)arg1;                         \
2875        _argvec[2+2] = (unsigned long)arg2;                         \
2876        _argvec[2+3] = (unsigned long)arg3;                         \
2877        _argvec[2+4] = (unsigned long)arg4;                         \
2878        _argvec[2+5] = (unsigned long)arg5;                         \
2879        _argvec[2+6] = (unsigned long)arg6;                         \
2880        _argvec[2+7] = (unsigned long)arg7;                         \
2881        __asm__ volatile(                                           \
2882           "mr 11,%1\n\t"                                           \
2883           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
2884           "stw  2,-8(11)\n\t"  &bsol;* save tocptr */                   \
2885           "lwz  2,-4(11)\n\t"  &bsol;* use nraddr's tocptr */           \
2886           "lwz  3, 4(11)\n\t"  &bsol;* arg1->r3 */                      \
2887           "lwz  4, 8(11)\n\t"  &bsol;* arg2->r4 */                      \
2888           "lwz  5, 12(11)\n\t" &bsol;* arg3->r5 */                      \
2889           "lwz  6, 16(11)\n\t" &bsol;* arg4->r6 */                      \
2890           "lwz  7, 20(11)\n\t" &bsol;* arg5->r7 */                      \
2891           "lwz  8, 24(11)\n\t" &bsol;* arg6->r8 */                      \
2892           "lwz  9, 28(11)\n\t" &bsol;* arg7->r9 */                      \
2893           "lwz 11, 0(11)\n\t"  &bsol;* target->r11 */                   \
2894           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
2895           "mr 11,%1\n\t"                                           \
2896           "mr %0,3\n\t"                                            \
2897           "lwz 2,-8(11)\n\t" &bsol;* restore tocptr */                  \
2898           VG_CONTRACT_FRAME_BY(512)                                \
2899           : &bsol;*out*/   "=r" (_res)                                  \
2900           : &bsol;*in*/    "r" (&_argvec[2])                            \
2901           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2902        );                                                          \
2903        lval = (__typeof__(lval)) _res;                             \
2904     } while (0)
2905  #define CALL_FN_W_8W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
2906                                   arg7,arg8)                       \
2907     do {                                                           \
2908        volatile OrigFn        _orig = (orig);                      \
2909        volatile unsigned long _argvec[3+8];                        \
2910        volatile unsigned long _res;                                \
2911                   \
2912        _argvec[1]   = (unsigned long)_orig.r2;                     \
2913        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
2914        _argvec[2+1] = (unsigned long)arg1;                         \
2915        _argvec[2+2] = (unsigned long)arg2;                         \
2916        _argvec[2+3] = (unsigned long)arg3;                         \
2917        _argvec[2+4] = (unsigned long)arg4;                         \
2918        _argvec[2+5] = (unsigned long)arg5;                         \
2919        _argvec[2+6] = (unsigned long)arg6;                         \
2920        _argvec[2+7] = (unsigned long)arg7;                         \
2921        _argvec[2+8] = (unsigned long)arg8;                         \
2922        __asm__ volatile(                                           \
2923           "mr 11,%1\n\t"                                           \
2924           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
2925           "stw  2,-8(11)\n\t"  &bsol;* save tocptr */                   \
2926           "lwz  2,-4(11)\n\t"  &bsol;* use nraddr's tocptr */           \
2927           "lwz  3, 4(11)\n\t"  &bsol;* arg1->r3 */                      \
2928           "lwz  4, 8(11)\n\t"  &bsol;* arg2->r4 */                      \
2929           "lwz  5, 12(11)\n\t" &bsol;* arg3->r5 */                      \
2930           "lwz  6, 16(11)\n\t" &bsol;* arg4->r6 */                      \
2931           "lwz  7, 20(11)\n\t" &bsol;* arg5->r7 */                      \
2932           "lwz  8, 24(11)\n\t" &bsol;* arg6->r8 */                      \
2933           "lwz  9, 28(11)\n\t" &bsol;* arg7->r9 */                      \
2934           "lwz 10, 32(11)\n\t" &bsol;* arg8->r10 */                     \
2935           "lwz 11, 0(11)\n\t"  &bsol;* target->r11 */                   \
2936           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
2937           "mr 11,%1\n\t"                                           \
2938           "mr %0,3\n\t"                                            \
2939           "lwz 2,-8(11)\n\t" &bsol;* restore tocptr */                  \
2940           VG_CONTRACT_FRAME_BY(512)                                \
2941           : &bsol;*out*/   "=r" (_res)                                  \
2942           : &bsol;*in*/    "r" (&_argvec[2])                            \
2943           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2944        );                                                          \
2945        lval = (__typeof__(lval)) _res;                             \
2946     } while (0)
2947  #define CALL_FN_W_9W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
2948                                   arg7,arg8,arg9)                  \
2949     do {                                                           \
2950        volatile OrigFn        _orig = (orig);                      \
2951        volatile unsigned long _argvec[3+9];                        \
2952        volatile unsigned long _res;                                \
2953                   \
2954        _argvec[1]   = (unsigned long)_orig.r2;                     \
2955        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
2956        _argvec[2+1] = (unsigned long)arg1;                         \
2957        _argvec[2+2] = (unsigned long)arg2;                         \
2958        _argvec[2+3] = (unsigned long)arg3;                         \
2959        _argvec[2+4] = (unsigned long)arg4;                         \
2960        _argvec[2+5] = (unsigned long)arg5;                         \
2961        _argvec[2+6] = (unsigned long)arg6;                         \
2962        _argvec[2+7] = (unsigned long)arg7;                         \
2963        _argvec[2+8] = (unsigned long)arg8;                         \
2964        _argvec[2+9] = (unsigned long)arg9;                         \
2965        __asm__ volatile(                                           \
2966           "mr 11,%1\n\t"                                           \
2967           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
2968           "stw  2,-8(11)\n\t"  &bsol;* save tocptr */                   \
2969           "lwz  2,-4(11)\n\t"  &bsol;* use nraddr's tocptr */           \
2970           VG_EXPAND_FRAME_BY_trashes_r3(64)                        \
2971                                                          \
2972           "lwz 3,36(11)\n\t"                                       \
2973           "stw 3,56(1)\n\t"                                        \
2974                                                       \
2975           "lwz  3, 4(11)\n\t"  &bsol;* arg1->r3 */                      \
2976           "lwz  4, 8(11)\n\t"  &bsol;* arg2->r4 */                      \
2977           "lwz  5, 12(11)\n\t" &bsol;* arg3->r5 */                      \
2978           "lwz  6, 16(11)\n\t" &bsol;* arg4->r6 */                      \
2979           "lwz  7, 20(11)\n\t" &bsol;* arg5->r7 */                      \
2980           "lwz  8, 24(11)\n\t" &bsol;* arg6->r8 */                      \
2981           "lwz  9, 28(11)\n\t" &bsol;* arg7->r9 */                      \
2982           "lwz 10, 32(11)\n\t" &bsol;* arg8->r10 */                     \
2983           "lwz 11, 0(11)\n\t"  &bsol;* target->r11 */                   \
2984           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
2985           "mr 11,%1\n\t"                                           \
2986           "mr %0,3\n\t"                                            \
2987           "lwz 2,-8(11)\n\t" &bsol;* restore tocptr */                  \
2988           VG_CONTRACT_FRAME_BY(64)                                 \
2989           VG_CONTRACT_FRAME_BY(512)                                \
2990           : &bsol;*out*/   "=r" (_res)                                  \
2991           : &bsol;*in*/    "r" (&_argvec[2])                            \
2992           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
2993        );                                                          \
2994        lval = (__typeof__(lval)) _res;                             \
2995     } while (0)
2996  #define CALL_FN_W_10W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
2997                                    arg7,arg8,arg9,arg10)           \
2998     do {                                                           \
2999        volatile OrigFn        _orig = (orig);                      \
3000        volatile unsigned long _argvec[3+10];                       \
3001        volatile unsigned long _res;                                \
3002                   \
3003        _argvec[1]   = (unsigned long)_orig.r2;                     \
3004        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
3005        _argvec[2+1] = (unsigned long)arg1;                         \
3006        _argvec[2+2] = (unsigned long)arg2;                         \
3007        _argvec[2+3] = (unsigned long)arg3;                         \
3008        _argvec[2+4] = (unsigned long)arg4;                         \
3009        _argvec[2+5] = (unsigned long)arg5;                         \
3010        _argvec[2+6] = (unsigned long)arg6;                         \
3011        _argvec[2+7] = (unsigned long)arg7;                         \
3012        _argvec[2+8] = (unsigned long)arg8;                         \
3013        _argvec[2+9] = (unsigned long)arg9;                         \
3014        _argvec[2+10] = (unsigned long)arg10;                       \
3015        __asm__ volatile(                                           \
3016           "mr 11,%1\n\t"                                           \
3017           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
3018           "stw  2,-8(11)\n\t"  &bsol;* save tocptr */                   \
3019           "lwz  2,-4(11)\n\t"  &bsol;* use nraddr's tocptr */           \
3020           VG_EXPAND_FRAME_BY_trashes_r3(64)                        \
3021                                                         \
3022           "lwz 3,40(11)\n\t"                                       \
3023           "stw 3,60(1)\n\t"                                        \
3024                                                          \
3025           "lwz 3,36(11)\n\t"                                       \
3026           "stw 3,56(1)\n\t"                                        \
3027                                                       \
3028           "lwz  3, 4(11)\n\t"  &bsol;* arg1->r3 */                      \
3029           "lwz  4, 8(11)\n\t"  &bsol;* arg2->r4 */                      \
3030           "lwz  5, 12(11)\n\t" &bsol;* arg3->r5 */                      \
3031           "lwz  6, 16(11)\n\t" &bsol;* arg4->r6 */                      \
3032           "lwz  7, 20(11)\n\t" &bsol;* arg5->r7 */                      \
3033           "lwz  8, 24(11)\n\t" &bsol;* arg6->r8 */                      \
3034           "lwz  9, 28(11)\n\t" &bsol;* arg7->r9 */                      \
3035           "lwz 10, 32(11)\n\t" &bsol;* arg8->r10 */                     \
3036           "lwz 11, 0(11)\n\t"  &bsol;* target->r11 */                   \
3037           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
3038           "mr 11,%1\n\t"                                           \
3039           "mr %0,3\n\t"                                            \
3040           "lwz 2,-8(11)\n\t" &bsol;* restore tocptr */                  \
3041           VG_CONTRACT_FRAME_BY(64)                                 \
3042           VG_CONTRACT_FRAME_BY(512)                                \
3043           : &bsol;*out*/   "=r" (_res)                                  \
3044           : &bsol;*in*/    "r" (&_argvec[2])                            \
3045           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
3046        );                                                          \
3047        lval = (__typeof__(lval)) _res;                             \
3048     } while (0)
3049  #define CALL_FN_W_11W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
3050                                    arg7,arg8,arg9,arg10,arg11)     \
3051     do {                                                           \
3052        volatile OrigFn        _orig = (orig);                      \
3053        volatile unsigned long _argvec[3+11];                       \
3054        volatile unsigned long _res;                                \
3055                   \
3056        _argvec[1]   = (unsigned long)_orig.r2;                     \
3057        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
3058        _argvec[2+1] = (unsigned long)arg1;                         \
3059        _argvec[2+2] = (unsigned long)arg2;                         \
3060        _argvec[2+3] = (unsigned long)arg3;                         \
3061        _argvec[2+4] = (unsigned long)arg4;                         \
3062        _argvec[2+5] = (unsigned long)arg5;                         \
3063        _argvec[2+6] = (unsigned long)arg6;                         \
3064        _argvec[2+7] = (unsigned long)arg7;                         \
3065        _argvec[2+8] = (unsigned long)arg8;                         \
3066        _argvec[2+9] = (unsigned long)arg9;                         \
3067        _argvec[2+10] = (unsigned long)arg10;                       \
3068        _argvec[2+11] = (unsigned long)arg11;                       \
3069        __asm__ volatile(                                           \
3070           "mr 11,%1\n\t"                                           \
3071           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
3072           "stw  2,-8(11)\n\t"  &bsol;* save tocptr */                   \
3073           "lwz  2,-4(11)\n\t"  &bsol;* use nraddr's tocptr */           \
3074           VG_EXPAND_FRAME_BY_trashes_r3(72)                        \
3075                                                         \
3076           "lwz 3,44(11)\n\t"                                       \
3077           "stw 3,64(1)\n\t"                                        \
3078                                                         \
3079           "lwz 3,40(11)\n\t"                                       \
3080           "stw 3,60(1)\n\t"                                        \
3081                                                          \
3082           "lwz 3,36(11)\n\t"                                       \
3083           "stw 3,56(1)\n\t"                                        \
3084                                                       \
3085           "lwz  3, 4(11)\n\t"  &bsol;* arg1->r3 */                      \
3086           "lwz  4, 8(11)\n\t"  &bsol;* arg2->r4 */                      \
3087           "lwz  5, 12(11)\n\t" &bsol;* arg3->r5 */                      \
3088           "lwz  6, 16(11)\n\t" &bsol;* arg4->r6 */                      \
3089           "lwz  7, 20(11)\n\t" &bsol;* arg5->r7 */                      \
3090           "lwz  8, 24(11)\n\t" &bsol;* arg6->r8 */                      \
3091           "lwz  9, 28(11)\n\t" &bsol;* arg7->r9 */                      \
3092           "lwz 10, 32(11)\n\t" &bsol;* arg8->r10 */                     \
3093           "lwz 11, 0(11)\n\t"  &bsol;* target->r11 */                   \
3094           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
3095           "mr 11,%1\n\t"                                           \
3096           "mr %0,3\n\t"                                            \
3097           "lwz 2,-8(11)\n\t" &bsol;* restore tocptr */                  \
3098           VG_CONTRACT_FRAME_BY(72)                                 \
3099           VG_CONTRACT_FRAME_BY(512)                                \
3100           : &bsol;*out*/   "=r" (_res)                                  \
3101           : &bsol;*in*/    "r" (&_argvec[2])                            \
3102           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
3103        );                                                          \
3104        lval = (__typeof__(lval)) _res;                             \
3105     } while (0)
3106  #define CALL_FN_W_12W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
3107                                  arg7,arg8,arg9,arg10,arg11,arg12) \
3108     do {                                                           \
3109        volatile OrigFn        _orig = (orig);                      \
3110        volatile unsigned long _argvec[3+12];                       \
3111        volatile unsigned long _res;                                \
3112                   \
3113        _argvec[1]   = (unsigned long)_orig.r2;                     \
3114        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
3115        _argvec[2+1] = (unsigned long)arg1;                         \
3116        _argvec[2+2] = (unsigned long)arg2;                         \
3117        _argvec[2+3] = (unsigned long)arg3;                         \
3118        _argvec[2+4] = (unsigned long)arg4;                         \
3119        _argvec[2+5] = (unsigned long)arg5;                         \
3120        _argvec[2+6] = (unsigned long)arg6;                         \
3121        _argvec[2+7] = (unsigned long)arg7;                         \
3122        _argvec[2+8] = (unsigned long)arg8;                         \
3123        _argvec[2+9] = (unsigned long)arg9;                         \
3124        _argvec[2+10] = (unsigned long)arg10;                       \
3125        _argvec[2+11] = (unsigned long)arg11;                       \
3126        _argvec[2+12] = (unsigned long)arg12;                       \
3127        __asm__ volatile(                                           \
3128           "mr 11,%1\n\t"                                           \
3129           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
3130           "stw  2,-8(11)\n\t"  &bsol;* save tocptr */                   \
3131           "lwz  2,-4(11)\n\t"  &bsol;* use nraddr's tocptr */           \
3132           VG_EXPAND_FRAME_BY_trashes_r3(72)                        \
3133                                                         \
3134           "lwz 3,48(11)\n\t"                                       \
3135           "stw 3,68(1)\n\t"                                        \
3136                                                         \
3137           "lwz 3,44(11)\n\t"                                       \
3138           "stw 3,64(1)\n\t"                                        \
3139                                                         \
3140           "lwz 3,40(11)\n\t"                                       \
3141           "stw 3,60(1)\n\t"                                        \
3142                                                          \
3143           "lwz 3,36(11)\n\t"                                       \
3144           "stw 3,56(1)\n\t"                                        \
3145                                                       \
3146           "lwz  3, 4(11)\n\t"  &bsol;* arg1->r3 */                      \
3147           "lwz  4, 8(11)\n\t"  &bsol;* arg2->r4 */                      \
3148           "lwz  5, 12(11)\n\t" &bsol;* arg3->r5 */                      \
3149           "lwz  6, 16(11)\n\t" &bsol;* arg4->r6 */                      \
3150           "lwz  7, 20(11)\n\t" &bsol;* arg5->r7 */                      \
3151           "lwz  8, 24(11)\n\t" &bsol;* arg6->r8 */                      \
3152           "lwz  9, 28(11)\n\t" &bsol;* arg7->r9 */                      \
3153           "lwz 10, 32(11)\n\t" &bsol;* arg8->r10 */                     \
3154           "lwz 11, 0(11)\n\t"  &bsol;* target->r11 */                   \
3155           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
3156           "mr 11,%1\n\t"                                           \
3157           "mr %0,3\n\t"                                            \
3158           "lwz 2,-8(11)\n\t" &bsol;* restore tocptr */                  \
3159           VG_CONTRACT_FRAME_BY(72)                                 \
3160           VG_CONTRACT_FRAME_BY(512)                                \
3161           : &bsol;*out*/   "=r" (_res)                                  \
3162           : &bsol;*in*/    "r" (&_argvec[2])                            \
3163           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
3164        );                                                          \
3165        lval = (__typeof__(lval)) _res;                             \
3166     } while (0)
3167  #endif &bsol;* PLAT_ppc32_aix5 */
3168  #if defined(PLAT_ppc64_aix5)
3169  #define __CALLER_SAVED_REGS                                       \
3170     "lr", "ctr", "xer",                                            \
3171     "cr0", "cr1", "cr2", "cr3", "cr4", "cr5", "cr6", "cr7",        \
3172     "r0", "r2", "r3", "r4", "r5", "r6", "r7", "r8", "r9", "r10",   \
3173     "r11", "r12", "r13"
3174  #define VG_EXPAND_FRAME_BY_trashes_r3(_n_fr)                      \
3175           "addi 1,1,-" #_n_fr "\n\t"                               \
3176           "ld   3," #_n_fr "(1)\n\t"                               \
3177           "std  3,0(1)\n\t"
3178  #define VG_CONTRACT_FRAME_BY(_n_fr)                               \
3179           "addi 1,1," #_n_fr "\n\t"
3180  #define CALL_FN_W_v(lval, orig)                                   \
3181     do {                                                           \
3182        volatile OrigFn        _orig = (orig);                      \
3183        volatile unsigned long _argvec[3+0];                        \
3184        volatile unsigned long _res;                                \
3185                   \
3186        _argvec[1] = (unsigned long)_orig.r2;                       \
3187        _argvec[2] = (unsigned long)_orig.nraddr;                   \
3188        __asm__ volatile(                                           \
3189           "mr 11,%1\n\t"                                           \
3190           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
3191           "std  2,-16(11)\n\t" &bsol;* save tocptr */                   \
3192           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
3193           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
3194           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
3195           "mr 11,%1\n\t"                                           \
3196           "mr %0,3\n\t"                                            \
3197           "ld 2,-16(11)\n\t" &bsol;* restore tocptr */                  \
3198           VG_CONTRACT_FRAME_BY(512)                                \
3199           : &bsol;*out*/   "=r" (_res)                                  \
3200           : &bsol;*in*/    "r" (&_argvec[2])                            \
3201           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
3202        );                                                          \
3203        lval = (__typeof__(lval)) _res;                             \
3204     } while (0)
3205  #define CALL_FN_W_W(lval, orig, arg1)                             \
3206     do {                                                           \
3207        volatile OrigFn        _orig = (orig);                      \
3208        volatile unsigned long _argvec[3+1];                        \
3209        volatile unsigned long _res;                                \
3210                   \
3211        _argvec[1]   = (unsigned long)_orig.r2;                     \
3212        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
3213        _argvec[2+1] = (unsigned long)arg1;                         \
3214        __asm__ volatile(                                           \
3215           "mr 11,%1\n\t"                                           \
3216           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
3217           "std  2,-16(11)\n\t" &bsol;* save tocptr */                   \
3218           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
3219           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
3220           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
3221           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
3222           "mr 11,%1\n\t"                                           \
3223           "mr %0,3\n\t"                                            \
3224           "ld 2,-16(11)\n\t" &bsol;* restore tocptr */                  \
3225           VG_CONTRACT_FRAME_BY(512)                                \
3226           : &bsol;*out*/   "=r" (_res)                                  \
3227           : &bsol;*in*/    "r" (&_argvec[2])                            \
3228           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
3229        );                                                          \
3230        lval = (__typeof__(lval)) _res;                             \
3231     } while (0)
3232  #define CALL_FN_W_WW(lval, orig, arg1,arg2)                       \
3233     do {                                                           \
3234        volatile OrigFn        _orig = (orig);                      \
3235        volatile unsigned long _argvec[3+2];                        \
3236        volatile unsigned long _res;                                \
3237                   \
3238        _argvec[1]   = (unsigned long)_orig.r2;                     \
3239        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
3240        _argvec[2+1] = (unsigned long)arg1;                         \
3241        _argvec[2+2] = (unsigned long)arg2;                         \
3242        __asm__ volatile(                                           \
3243           "mr 11,%1\n\t"                                           \
3244           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
3245           "std  2,-16(11)\n\t" &bsol;* save tocptr */                   \
3246           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
3247           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
3248           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
3249           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
3250           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
3251           "mr 11,%1\n\t"                                           \
3252           "mr %0,3\n\t"                                            \
3253           "ld  2,-16(11)\n\t" &bsol;* restore tocptr */                 \
3254           VG_CONTRACT_FRAME_BY(512)                                \
3255           : &bsol;*out*/   "=r" (_res)                                  \
3256           : &bsol;*in*/    "r" (&_argvec[2])                            \
3257           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
3258        );                                                          \
3259        lval = (__typeof__(lval)) _res;                             \
3260     } while (0)
3261  #define CALL_FN_W_WWW(lval, orig, arg1,arg2,arg3)                 \
3262     do {                                                           \
3263        volatile OrigFn        _orig = (orig);                      \
3264        volatile unsigned long _argvec[3+3];                        \
3265        volatile unsigned long _res;                                \
3266                   \
3267        _argvec[1]   = (unsigned long)_orig.r2;                     \
3268        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
3269        _argvec[2+1] = (unsigned long)arg1;                         \
3270        _argvec[2+2] = (unsigned long)arg2;                         \
3271        _argvec[2+3] = (unsigned long)arg3;                         \
3272        __asm__ volatile(                                           \
3273           "mr 11,%1\n\t"                                           \
3274           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
3275           "std  2,-16(11)\n\t" &bsol;* save tocptr */                   \
3276           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
3277           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
3278           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
3279           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
3280           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
3281           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
3282           "mr 11,%1\n\t"                                           \
3283           "mr %0,3\n\t"                                            \
3284           "ld  2,-16(11)\n\t" &bsol;* restore tocptr */                 \
3285           VG_CONTRACT_FRAME_BY(512)                                \
3286           : &bsol;*out*/   "=r" (_res)                                  \
3287           : &bsol;*in*/    "r" (&_argvec[2])                            \
3288           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
3289        );                                                          \
3290        lval = (__typeof__(lval)) _res;                             \
3291     } while (0)
3292  #define CALL_FN_W_WWWW(lval, orig, arg1,arg2,arg3,arg4)           \
3293     do {                                                           \
3294        volatile OrigFn        _orig = (orig);                      \
3295        volatile unsigned long _argvec[3+4];                        \
3296        volatile unsigned long _res;                                \
3297                   \
3298        _argvec[1]   = (unsigned long)_orig.r2;                     \
3299        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
3300        _argvec[2+1] = (unsigned long)arg1;                         \
3301        _argvec[2+2] = (unsigned long)arg2;                         \
3302        _argvec[2+3] = (unsigned long)arg3;                         \
3303        _argvec[2+4] = (unsigned long)arg4;                         \
3304        __asm__ volatile(                                           \
3305           "mr 11,%1\n\t"                                           \
3306           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
3307           "std  2,-16(11)\n\t" &bsol;* save tocptr */                   \
3308           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
3309           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
3310           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
3311           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
3312           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
3313           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
3314           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
3315           "mr 11,%1\n\t"                                           \
3316           "mr %0,3\n\t"                                            \
3317           "ld  2,-16(11)\n\t" &bsol;* restore tocptr */                 \
3318           VG_CONTRACT_FRAME_BY(512)                                \
3319           : &bsol;*out*/   "=r" (_res)                                  \
3320           : &bsol;*in*/    "r" (&_argvec[2])                            \
3321           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
3322        );                                                          \
3323        lval = (__typeof__(lval)) _res;                             \
3324     } while (0)
3325  #define CALL_FN_W_5W(lval, orig, arg1,arg2,arg3,arg4,arg5)        \
3326     do {                                                           \
3327        volatile OrigFn        _orig = (orig);                      \
3328        volatile unsigned long _argvec[3+5];                        \
3329        volatile unsigned long _res;                                \
3330                   \
3331        _argvec[1]   = (unsigned long)_orig.r2;                     \
3332        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
3333        _argvec[2+1] = (unsigned long)arg1;                         \
3334        _argvec[2+2] = (unsigned long)arg2;                         \
3335        _argvec[2+3] = (unsigned long)arg3;                         \
3336        _argvec[2+4] = (unsigned long)arg4;                         \
3337        _argvec[2+5] = (unsigned long)arg5;                         \
3338        __asm__ volatile(                                           \
3339           "mr 11,%1\n\t"                                           \
3340           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
3341           "std  2,-16(11)\n\t" &bsol;* save tocptr */                   \
3342           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
3343           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
3344           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
3345           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
3346           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
3347           "ld   7, 40(11)\n\t" &bsol;* arg5->r7 */                      \
3348           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
3349           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
3350           "mr 11,%1\n\t"                                           \
3351           "mr %0,3\n\t"                                            \
3352           "ld  2,-16(11)\n\t" &bsol;* restore tocptr */                 \
3353           VG_CONTRACT_FRAME_BY(512)                                \
3354           : &bsol;*out*/   "=r" (_res)                                  \
3355           : &bsol;*in*/    "r" (&_argvec[2])                            \
3356           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
3357        );                                                          \
3358        lval = (__typeof__(lval)) _res;                             \
3359     } while (0)
3360  #define CALL_FN_W_6W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6)   \
3361     do {                                                           \
3362        volatile OrigFn        _orig = (orig);                      \
3363        volatile unsigned long _argvec[3+6];                        \
3364        volatile unsigned long _res;                                \
3365                   \
3366        _argvec[1]   = (unsigned long)_orig.r2;                     \
3367        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
3368        _argvec[2+1] = (unsigned long)arg1;                         \
3369        _argvec[2+2] = (unsigned long)arg2;                         \
3370        _argvec[2+3] = (unsigned long)arg3;                         \
3371        _argvec[2+4] = (unsigned long)arg4;                         \
3372        _argvec[2+5] = (unsigned long)arg5;                         \
3373        _argvec[2+6] = (unsigned long)arg6;                         \
3374        __asm__ volatile(                                           \
3375           "mr 11,%1\n\t"                                           \
3376           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
3377           "std  2,-16(11)\n\t" &bsol;* save tocptr */                   \
3378           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
3379           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
3380           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
3381           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
3382           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
3383           "ld   7, 40(11)\n\t" &bsol;* arg5->r7 */                      \
3384           "ld   8, 48(11)\n\t" &bsol;* arg6->r8 */                      \
3385           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
3386           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
3387           "mr 11,%1\n\t"                                           \
3388           "mr %0,3\n\t"                                            \
3389           "ld  2,-16(11)\n\t" &bsol;* restore tocptr */                 \
3390           VG_CONTRACT_FRAME_BY(512)                                \
3391           : &bsol;*out*/   "=r" (_res)                                  \
3392           : &bsol;*in*/    "r" (&_argvec[2])                            \
3393           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
3394        );                                                          \
3395        lval = (__typeof__(lval)) _res;                             \
3396     } while (0)
3397  #define CALL_FN_W_7W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
3398                                   arg7)                            \
3399     do {                                                           \
3400        volatile OrigFn        _orig = (orig);                      \
3401        volatile unsigned long _argvec[3+7];                        \
3402        volatile unsigned long _res;                                \
3403                   \
3404        _argvec[1]   = (unsigned long)_orig.r2;                     \
3405        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
3406        _argvec[2+1] = (unsigned long)arg1;                         \
3407        _argvec[2+2] = (unsigned long)arg2;                         \
3408        _argvec[2+3] = (unsigned long)arg3;                         \
3409        _argvec[2+4] = (unsigned long)arg4;                         \
3410        _argvec[2+5] = (unsigned long)arg5;                         \
3411        _argvec[2+6] = (unsigned long)arg6;                         \
3412        _argvec[2+7] = (unsigned long)arg7;                         \
3413        __asm__ volatile(                                           \
3414           "mr 11,%1\n\t"                                           \
3415           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
3416           "std  2,-16(11)\n\t" &bsol;* save tocptr */                   \
3417           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
3418           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
3419           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
3420           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
3421           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
3422           "ld   7, 40(11)\n\t" &bsol;* arg5->r7 */                      \
3423           "ld   8, 48(11)\n\t" &bsol;* arg6->r8 */                      \
3424           "ld   9, 56(11)\n\t" &bsol;* arg7->r9 */                      \
3425           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
3426           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
3427           "mr 11,%1\n\t"                                           \
3428           "mr %0,3\n\t"                                            \
3429           "ld  2,-16(11)\n\t" &bsol;* restore tocptr */                 \
3430           VG_CONTRACT_FRAME_BY(512)                                \
3431           : &bsol;*out*/   "=r" (_res)                                  \
3432           : &bsol;*in*/    "r" (&_argvec[2])                            \
3433           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
3434        );                                                          \
3435        lval = (__typeof__(lval)) _res;                             \
3436     } while (0)
3437  #define CALL_FN_W_8W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
3438                                   arg7,arg8)                       \
3439     do {                                                           \
3440        volatile OrigFn        _orig = (orig);                      \
3441        volatile unsigned long _argvec[3+8];                        \
3442        volatile unsigned long _res;                                \
3443                   \
3444        _argvec[1]   = (unsigned long)_orig.r2;                     \
3445        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
3446        _argvec[2+1] = (unsigned long)arg1;                         \
3447        _argvec[2+2] = (unsigned long)arg2;                         \
3448        _argvec[2+3] = (unsigned long)arg3;                         \
3449        _argvec[2+4] = (unsigned long)arg4;                         \
3450        _argvec[2+5] = (unsigned long)arg5;                         \
3451        _argvec[2+6] = (unsigned long)arg6;                         \
3452        _argvec[2+7] = (unsigned long)arg7;                         \
3453        _argvec[2+8] = (unsigned long)arg8;                         \
3454        __asm__ volatile(                                           \
3455           "mr 11,%1\n\t"                                           \
3456           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
3457           "std  2,-16(11)\n\t" &bsol;* save tocptr */                   \
3458           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
3459           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
3460           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
3461           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
3462           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
3463           "ld   7, 40(11)\n\t" &bsol;* arg5->r7 */                      \
3464           "ld   8, 48(11)\n\t" &bsol;* arg6->r8 */                      \
3465           "ld   9, 56(11)\n\t" &bsol;* arg7->r9 */                      \
3466           "ld  10, 64(11)\n\t" &bsol;* arg8->r10 */                     \
3467           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
3468           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
3469           "mr 11,%1\n\t"                                           \
3470           "mr %0,3\n\t"                                            \
3471           "ld  2,-16(11)\n\t" &bsol;* restore tocptr */                 \
3472           VG_CONTRACT_FRAME_BY(512)                                \
3473           : &bsol;*out*/   "=r" (_res)                                  \
3474           : &bsol;*in*/    "r" (&_argvec[2])                            \
3475           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
3476        );                                                          \
3477        lval = (__typeof__(lval)) _res;                             \
3478     } while (0)
3479  #define CALL_FN_W_9W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,   \
3480                                   arg7,arg8,arg9)                  \
3481     do {                                                           \
3482        volatile OrigFn        _orig = (orig);                      \
3483        volatile unsigned long _argvec[3+9];                        \
3484        volatile unsigned long _res;                                \
3485                   \
3486        _argvec[1]   = (unsigned long)_orig.r2;                     \
3487        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
3488        _argvec[2+1] = (unsigned long)arg1;                         \
3489        _argvec[2+2] = (unsigned long)arg2;                         \
3490        _argvec[2+3] = (unsigned long)arg3;                         \
3491        _argvec[2+4] = (unsigned long)arg4;                         \
3492        _argvec[2+5] = (unsigned long)arg5;                         \
3493        _argvec[2+6] = (unsigned long)arg6;                         \
3494        _argvec[2+7] = (unsigned long)arg7;                         \
3495        _argvec[2+8] = (unsigned long)arg8;                         \
3496        _argvec[2+9] = (unsigned long)arg9;                         \
3497        __asm__ volatile(                                           \
3498           "mr 11,%1\n\t"                                           \
3499           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
3500           "std  2,-16(11)\n\t" &bsol;* save tocptr */                   \
3501           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
3502           VG_EXPAND_FRAME_BY_trashes_r3(128)                       \
3503                                                          \
3504           "ld  3,72(11)\n\t"                                       \
3505           "std 3,112(1)\n\t"                                       \
3506                                                       \
3507           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
3508           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
3509           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
3510           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
3511           "ld   7, 40(11)\n\t" &bsol;* arg5->r7 */                      \
3512           "ld   8, 48(11)\n\t" &bsol;* arg6->r8 */                      \
3513           "ld   9, 56(11)\n\t" &bsol;* arg7->r9 */                      \
3514           "ld  10, 64(11)\n\t" &bsol;* arg8->r10 */                     \
3515           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
3516           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
3517           "mr 11,%1\n\t"                                           \
3518           "mr %0,3\n\t"                                            \
3519           "ld  2,-16(11)\n\t" &bsol;* restore tocptr */                 \
3520           VG_CONTRACT_FRAME_BY(128)                                \
3521           VG_CONTRACT_FRAME_BY(512)                                \
3522           : &bsol;*out*/   "=r" (_res)                                  \
3523           : &bsol;*in*/    "r" (&_argvec[2])                            \
3524           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
3525        );                                                          \
3526        lval = (__typeof__(lval)) _res;                             \
3527     } while (0)
3528  #define CALL_FN_W_10W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
3529                                    arg7,arg8,arg9,arg10)           \
3530     do {                                                           \
3531        volatile OrigFn        _orig = (orig);                      \
3532        volatile unsigned long _argvec[3+10];                       \
3533        volatile unsigned long _res;                                \
3534                   \
3535        _argvec[1]   = (unsigned long)_orig.r2;                     \
3536        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
3537        _argvec[2+1] = (unsigned long)arg1;                         \
3538        _argvec[2+2] = (unsigned long)arg2;                         \
3539        _argvec[2+3] = (unsigned long)arg3;                         \
3540        _argvec[2+4] = (unsigned long)arg4;                         \
3541        _argvec[2+5] = (unsigned long)arg5;                         \
3542        _argvec[2+6] = (unsigned long)arg6;                         \
3543        _argvec[2+7] = (unsigned long)arg7;                         \
3544        _argvec[2+8] = (unsigned long)arg8;                         \
3545        _argvec[2+9] = (unsigned long)arg9;                         \
3546        _argvec[2+10] = (unsigned long)arg10;                       \
3547        __asm__ volatile(                                           \
3548           "mr 11,%1\n\t"                                           \
3549           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
3550           "std  2,-16(11)\n\t" &bsol;* save tocptr */                   \
3551           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
3552           VG_EXPAND_FRAME_BY_trashes_r3(128)                       \
3553                                                         \
3554           "ld  3,80(11)\n\t"                                       \
3555           "std 3,120(1)\n\t"                                       \
3556                                                          \
3557           "ld  3,72(11)\n\t"                                       \
3558           "std 3,112(1)\n\t"                                       \
3559                                                       \
3560           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
3561           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
3562           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
3563           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
3564           "ld   7, 40(11)\n\t" &bsol;* arg5->r7 */                      \
3565           "ld   8, 48(11)\n\t" &bsol;* arg6->r8 */                      \
3566           "ld   9, 56(11)\n\t" &bsol;* arg7->r9 */                      \
3567           "ld  10, 64(11)\n\t" &bsol;* arg8->r10 */                     \
3568           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
3569           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
3570           "mr 11,%1\n\t"                                           \
3571           "mr %0,3\n\t"                                            \
3572           "ld  2,-16(11)\n\t" &bsol;* restore tocptr */                 \
3573           VG_CONTRACT_FRAME_BY(128)                                \
3574           VG_CONTRACT_FRAME_BY(512)                                \
3575           : &bsol;*out*/   "=r" (_res)                                  \
3576           : &bsol;*in*/    "r" (&_argvec[2])                            \
3577           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
3578        );                                                          \
3579        lval = (__typeof__(lval)) _res;                             \
3580     } while (0)
3581  #define CALL_FN_W_11W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
3582                                    arg7,arg8,arg9,arg10,arg11)     \
3583     do {                                                           \
3584        volatile OrigFn        _orig = (orig);                      \
3585        volatile unsigned long _argvec[3+11];                       \
3586        volatile unsigned long _res;                                \
3587                   \
3588        _argvec[1]   = (unsigned long)_orig.r2;                     \
3589        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
3590        _argvec[2+1] = (unsigned long)arg1;                         \
3591        _argvec[2+2] = (unsigned long)arg2;                         \
3592        _argvec[2+3] = (unsigned long)arg3;                         \
3593        _argvec[2+4] = (unsigned long)arg4;                         \
3594        _argvec[2+5] = (unsigned long)arg5;                         \
3595        _argvec[2+6] = (unsigned long)arg6;                         \
3596        _argvec[2+7] = (unsigned long)arg7;                         \
3597        _argvec[2+8] = (unsigned long)arg8;                         \
3598        _argvec[2+9] = (unsigned long)arg9;                         \
3599        _argvec[2+10] = (unsigned long)arg10;                       \
3600        _argvec[2+11] = (unsigned long)arg11;                       \
3601        __asm__ volatile(                                           \
3602           "mr 11,%1\n\t"                                           \
3603           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
3604           "std  2,-16(11)\n\t" &bsol;* save tocptr */                   \
3605           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
3606           VG_EXPAND_FRAME_BY_trashes_r3(144)                       \
3607                                                         \
3608           "ld  3,88(11)\n\t"                                       \
3609           "std 3,128(1)\n\t"                                       \
3610                                                         \
3611           "ld  3,80(11)\n\t"                                       \
3612           "std 3,120(1)\n\t"                                       \
3613                                                          \
3614           "ld  3,72(11)\n\t"                                       \
3615           "std 3,112(1)\n\t"                                       \
3616                                                       \
3617           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
3618           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
3619           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
3620           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
3621           "ld   7, 40(11)\n\t" &bsol;* arg5->r7 */                      \
3622           "ld   8, 48(11)\n\t" &bsol;* arg6->r8 */                      \
3623           "ld   9, 56(11)\n\t" &bsol;* arg7->r9 */                      \
3624           "ld  10, 64(11)\n\t" &bsol;* arg8->r10 */                     \
3625           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
3626           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
3627           "mr 11,%1\n\t"                                           \
3628           "mr %0,3\n\t"                                            \
3629           "ld  2,-16(11)\n\t" &bsol;* restore tocptr */                 \
3630           VG_CONTRACT_FRAME_BY(144)                                \
3631           VG_CONTRACT_FRAME_BY(512)                                \
3632           : &bsol;*out*/   "=r" (_res)                                  \
3633           : &bsol;*in*/    "r" (&_argvec[2])                            \
3634           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
3635        );                                                          \
3636        lval = (__typeof__(lval)) _res;                             \
3637     } while (0)
3638  #define CALL_FN_W_12W(lval, orig, arg1,arg2,arg3,arg4,arg5,arg6,  \
3639                                  arg7,arg8,arg9,arg10,arg11,arg12) \
3640     do {                                                           \
3641        volatile OrigFn        _orig = (orig);                      \
3642        volatile unsigned long _argvec[3+12];                       \
3643        volatile unsigned long _res;                                \
3644                   \
3645        _argvec[1]   = (unsigned long)_orig.r2;                     \
3646        _argvec[2]   = (unsigned long)_orig.nraddr;                 \
3647        _argvec[2+1] = (unsigned long)arg1;                         \
3648        _argvec[2+2] = (unsigned long)arg2;                         \
3649        _argvec[2+3] = (unsigned long)arg3;                         \
3650        _argvec[2+4] = (unsigned long)arg4;                         \
3651        _argvec[2+5] = (unsigned long)arg5;                         \
3652        _argvec[2+6] = (unsigned long)arg6;                         \
3653        _argvec[2+7] = (unsigned long)arg7;                         \
3654        _argvec[2+8] = (unsigned long)arg8;                         \
3655        _argvec[2+9] = (unsigned long)arg9;                         \
3656        _argvec[2+10] = (unsigned long)arg10;                       \
3657        _argvec[2+11] = (unsigned long)arg11;                       \
3658        _argvec[2+12] = (unsigned long)arg12;                       \
3659        __asm__ volatile(                                           \
3660           "mr 11,%1\n\t"                                           \
3661           VG_EXPAND_FRAME_BY_trashes_r3(512)                       \
3662           "std  2,-16(11)\n\t" &bsol;* save tocptr */                   \
3663           "ld   2,-8(11)\n\t"  &bsol;* use nraddr's tocptr */           \
3664           VG_EXPAND_FRAME_BY_trashes_r3(144)                       \
3665                                                         \
3666           "ld  3,96(11)\n\t"                                       \
3667           "std 3,136(1)\n\t"                                       \
3668                                                         \
3669           "ld  3,88(11)\n\t"                                       \
3670           "std 3,128(1)\n\t"                                       \
3671                                                         \
3672           "ld  3,80(11)\n\t"                                       \
3673           "std 3,120(1)\n\t"                                       \
3674                                                          \
3675           "ld  3,72(11)\n\t"                                       \
3676           "std 3,112(1)\n\t"                                       \
3677                                                       \
3678           "ld   3, 8(11)\n\t"  &bsol;* arg1->r3 */                      \
3679           "ld   4, 16(11)\n\t" &bsol;* arg2->r4 */                      \
3680           "ld   5, 24(11)\n\t" &bsol;* arg3->r5 */                      \
3681           "ld   6, 32(11)\n\t" &bsol;* arg4->r6 */                      \
3682           "ld   7, 40(11)\n\t" &bsol;* arg5->r7 */                      \
3683           "ld   8, 48(11)\n\t" &bsol;* arg6->r8 */                      \
3684           "ld   9, 56(11)\n\t" &bsol;* arg7->r9 */                      \
3685           "ld  10, 64(11)\n\t" &bsol;* arg8->r10 */                     \
3686           "ld  11, 0(11)\n\t"  &bsol;* target->r11 */                   \
3687           VALGRIND_BRANCH_AND_LINK_TO_NOREDIR_R11                  \
3688           "mr 11,%1\n\t"                                           \
3689           "mr %0,3\n\t"                                            \
3690           "ld  2,-16(11)\n\t" &bsol;* restore tocptr */                 \
3691           VG_CONTRACT_FRAME_BY(144)                                \
3692           VG_CONTRACT_FRAME_BY(512)                                \
3693           : &bsol;*out*/   "=r" (_res)                                  \
3694           : &bsol;*in*/    "r" (&_argvec[2])                            \
3695           : &bsol;*trash*/ "cc", "memory", __CALLER_SAVED_REGS          \
3696        );                                                          \
3697        lval = (__typeof__(lval)) _res;                             \
3698     } while (0)
3699  #endif &bsol;* PLAT_ppc64_aix5 */
3700  #define VG_USERREQ_TOOL_BASE(a,b) \
3701     ((unsigned int)(((a)&0xff) << 24 | ((b)&0xff) << 16))
3702  #define VG_IS_TOOL_USERREQ(a, b, v) \
3703     (VG_USERREQ_TOOL_BASE(a,b) == ((v) & 0xffff0000))
3704  typedef
3705     enum { VG_USERREQ__RUNNING_ON_VALGRIND  = 0x1001,
3706            VG_USERREQ__DISCARD_TRANSLATIONS = 0x1002,
3707            VG_USERREQ__CLIENT_CALL0 = 0x1101,
3708            VG_USERREQ__CLIENT_CALL1 = 0x1102,
3709            VG_USERREQ__CLIENT_CALL2 = 0x1103,
3710            VG_USERREQ__CLIENT_CALL3 = 0x1104,
3711            VG_USERREQ__COUNT_ERRORS = 0x1201,
3712            VG_USERREQ__MALLOCLIKE_BLOCK = 0x1301,
3713            VG_USERREQ__FREELIKE_BLOCK   = 0x1302,
3714            VG_USERREQ__CREATE_MEMPOOL   = 0x1303,
3715            VG_USERREQ__DESTROY_MEMPOOL  = 0x1304,
3716            VG_USERREQ__MEMPOOL_ALLOC    = 0x1305,
3717            VG_USERREQ__MEMPOOL_FREE     = 0x1306,
3718            VG_USERREQ__MEMPOOL_TRIM     = 0x1307,
3719            VG_USERREQ__MOVE_MEMPOOL     = 0x1308,
3720            VG_USERREQ__MEMPOOL_CHANGE   = 0x1309,
3721            VG_USERREQ__MEMPOOL_EXISTS   = 0x130a,
3722            VG_USERREQ__PRINTF           = 0x1401,
3723            VG_USERREQ__PRINTF_BACKTRACE = 0x1402,
3724            VG_USERREQ__PRINTF_VALIST_BY_REF = 0x1403,
3725            VG_USERREQ__PRINTF_BACKTRACE_VALIST_BY_REF = 0x1404,
3726            VG_USERREQ__STACK_REGISTER   = 0x1501,
3727            VG_USERREQ__STACK_DEREGISTER = 0x1502,
3728            VG_USERREQ__STACK_CHANGE     = 0x1503,
3729            VG_USERREQ__LOAD_PDB_DEBUGINFO = 0x1601,
3730            VG_USERREQ__MAP_IP_TO_SRCLOC = 0x1701
3731     } Vg_ClientRequest;
3732  #if !defined(__GNUC__)
3733  #  define __extension__ &bsol;* */
3734  #endif
3735  #if defined(NVALGRIND)
3736  #define VALGRIND_DO_CLIENT_REQUEST_EXPR(                               \
3737          _zzq_default, _zzq_request,                                    \
3738          _zzq_arg1, _zzq_arg2, _zzq_arg3, _zzq_arg4, _zzq_arg5)         \
3739     (_zzq_default)
3740  #else &bsol;*defined(NVALGRIND)*/
3741  #if defined(_MSC_VER)
3742  #define VALGRIND_DO_CLIENT_REQUEST_EXPR(                                \
3743          _zzq_default, _zzq_request,                                     \
3744          _zzq_arg1, _zzq_arg2, _zzq_arg3, _zzq_arg4, _zzq_arg5)          \
3745     (vg_VALGRIND_DO_CLIENT_REQUEST_EXPR((uintptr_t)(_zzq_default),       \
3746          (_zzq_request), (uintptr_t)(_zzq_arg1), (uintptr_t)(_zzq_arg2), \
3747          (uintptr_t)(_zzq_arg3), (uintptr_t)(_zzq_arg4),                 \
3748          (uintptr_t)(_zzq_arg5)))
3749  static __inline unsigned
3750  vg_VALGRIND_DO_CLIENT_REQUEST_EXPR(uintptr_t _zzq_default,
3751                                     unsigned _zzq_request, uintptr_t _zzq_arg1,
3752                                     uintptr_t _zzq_arg2, uintptr_t _zzq_arg3,
3753                                     uintptr_t _zzq_arg4, uintptr_t _zzq_arg5)
3754  {
3755      unsigned _zzq_rlval;
3756      VALGRIND_DO_CLIENT_REQUEST(_zzq_rlval, _zzq_default, _zzq_request,
3757                        _zzq_arg1, _zzq_arg2, _zzq_arg3, _zzq_arg4, _zzq_arg5);
3758      return _zzq_rlval;
3759  }
3760  #else &bsol;*defined(_MSC_VER)*/
3761  #define VALGRIND_DO_CLIENT_REQUEST_EXPR(                               \
3762          _zzq_default, _zzq_request,                                    \
3763          _zzq_arg1, _zzq_arg2, _zzq_arg3, _zzq_arg4, _zzq_arg5)         \
3764     (__extension__({unsigned int _zzq_rlval;                            \
3765      VALGRIND_DO_CLIENT_REQUEST(_zzq_rlval, _zzq_default, _zzq_request, \
3766                  _zzq_arg1, _zzq_arg2, _zzq_arg3, _zzq_arg4, _zzq_arg5) \
3767      _zzq_rlval;                                                        \
3768     }))
3769  #endif &bsol;*defined(_MSC_VER)*/
3770  #endif &bsol;*defined(NVALGRIND)*/
3771  #define RUNNING_ON_VALGRIND                                           \
3772      VALGRIND_DO_CLIENT_REQUEST_EXPR(0 &bsol;* if not */,                   \
3773                                      VG_USERREQ__RUNNING_ON_VALGRIND,  \
3774                                      0, 0, 0, 0, 0)                    \
3775  
3776  #define VALGRIND_DISCARD_TRANSLATIONS(_qzz_addr,_qzz_len)         \
3777     {unsigned int _qzz_res;                                        \
3778      VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,                       \
3779                                 VG_USERREQ__DISCARD_TRANSLATIONS,  \
3780                                 _qzz_addr, _qzz_len, 0, 0, 0);     \
3781     }
3782  #if defined(NVALGRIND)
3783  #  define VALGRIND_PRINTF(...)
3784  #  define VALGRIND_PRINTF_BACKTRACE(...)
3785  #else &bsol;* NVALGRIND */
3786  #if !defined(_MSC_VER)
3787  static int VALGRIND_PRINTF(const char *format, ...)
3788     __attribute__((format(__printf__, 1, 2), __unused__));
3789  #endif
3790  static int
3791  #if defined(_MSC_VER)
3792  __inline
3793  #endif
3794  VALGRIND_PRINTF(const char *format, ...)
3795  {
3796     unsigned long _qzz_res;
3797     va_list vargs;
3798     va_start(vargs, format);
3799  #if defined(_MSC_VER)
3800     VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,
3801                                VG_USERREQ__PRINTF_VALIST_BY_REF,
3802                                (uintptr_t)format,
3803                                (uintptr_t)&vargs,
3804                                0, 0, 0);
3805  #else
3806     VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,
3807                                VG_USERREQ__PRINTF_VALIST_BY_REF,
3808                                (unsigned long)format,
3809                                (unsigned long)&vargs, 
3810                                0, 0, 0);
3811  #endif
3812     va_end(vargs);
3813     return (int)_qzz_res;
3814  }
3815  #if !defined(_MSC_VER)
3816  static int VALGRIND_PRINTF_BACKTRACE(const char *format, ...)
3817     __attribute__((format(__printf__, 1, 2), __unused__));
3818  #endif
3819  static int
3820  #if defined(_MSC_VER)
3821  __inline
3822  #endif
3823  VALGRIND_PRINTF_BACKTRACE(const char *format, ...)
3824  {
3825     unsigned long _qzz_res;
3826     va_list vargs;
3827     va_start(vargs, format);
3828  #if defined(_MSC_VER)
3829     VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,
3830                                VG_USERREQ__PRINTF_BACKTRACE_VALIST_BY_REF,
3831                                (uintptr_t)format,
3832                                (uintptr_t)&vargs,
3833                                0, 0, 0);
3834  #else
3835     VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,
3836                                VG_USERREQ__PRINTF_BACKTRACE_VALIST_BY_REF,
3837                                (unsigned long)format,
3838                                (unsigned long)&vargs, 
3839                                0, 0, 0);
3840  #endif
3841     va_end(vargs);
3842     return (int)_qzz_res;
3843  }
3844  #endif &bsol;* NVALGRIND */
3845  #define VALGRIND_NON_SIMD_CALL0(_qyy_fn)                          \
3846     __extension__                                                  \
3847     ({unsigned long _qyy_res;                                      \
3848      VALGRIND_DO_CLIENT_REQUEST(_qyy_res, 0 &bsol;* default return */,  \
3849                                 VG_USERREQ__CLIENT_CALL0,          \
3850                                 _qyy_fn,                           \
3851                                 0, 0, 0, 0);                       \
3852      _qyy_res;                                                     \
3853     })
3854  #define VALGRIND_NON_SIMD_CALL1(_qyy_fn, _qyy_arg1)               \
3855     __extension__                                                  \
3856     ({unsigned long _qyy_res;                                      \
3857      VALGRIND_DO_CLIENT_REQUEST(_qyy_res, 0 &bsol;* default return */,  \
3858                                 VG_USERREQ__CLIENT_CALL1,          \
3859                                 _qyy_fn,                           \
3860                                 _qyy_arg1, 0, 0, 0);               \
3861      _qyy_res;                                                     \
3862     })
3863  #define VALGRIND_NON_SIMD_CALL2(_qyy_fn, _qyy_arg1, _qyy_arg2)    \
3864     __extension__                                                  \
3865     ({unsigned long _qyy_res;                                      \
3866      VALGRIND_DO_CLIENT_REQUEST(_qyy_res, 0 &bsol;* default return */,  \
3867                                 VG_USERREQ__CLIENT_CALL2,          \
3868                                 _qyy_fn,                           \
3869                                 _qyy_arg1, _qyy_arg2, 0, 0);       \
3870      _qyy_res;                                                     \
3871     })
3872  #define VALGRIND_NON_SIMD_CALL3(_qyy_fn, _qyy_arg1, _qyy_arg2, _qyy_arg3) \
3873     __extension__                                                  \
3874     ({unsigned long _qyy_res;                                      \
3875      VALGRIND_DO_CLIENT_REQUEST(_qyy_res, 0 &bsol;* default return */,  \
3876                                 VG_USERREQ__CLIENT_CALL3,          \
3877                                 _qyy_fn,                           \
3878                                 _qyy_arg1, _qyy_arg2,              \
3879                                 _qyy_arg3, 0);                     \
3880      _qyy_res;                                                     \
3881     })
3882  #define VALGRIND_COUNT_ERRORS                                     \
3883     __extension__                                                  \
3884     ({unsigned int _qyy_res;                                       \
3885      VALGRIND_DO_CLIENT_REQUEST(_qyy_res, 0 &bsol;* default return */,  \
3886                                 VG_USERREQ__COUNT_ERRORS,          \
3887                                 0, 0, 0, 0, 0);                    \
3888      _qyy_res;                                                     \
3889     })
3890  #define VALGRIND_MALLOCLIKE_BLOCK(addr, sizeB, rzB, is_zeroed)    \
3891     {unsigned int _qzz_res;                                        \
3892      VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,                       \
3893                                 VG_USERREQ__MALLOCLIKE_BLOCK,      \
3894                                 addr, sizeB, rzB, is_zeroed, 0);   \
3895     }
3896  #define VALGRIND_FREELIKE_BLOCK(addr, rzB)                        \
3897     {unsigned int _qzz_res;                                        \
3898      VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,                       \
3899                                 VG_USERREQ__FREELIKE_BLOCK,        \
3900                                 addr, rzB, 0, 0, 0);               \
3901     }
3902  #define VALGRIND_CREATE_MEMPOOL(pool, rzB, is_zeroed)             \
3903     {unsigned int _qzz_res;                                        \
3904      VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,                       \
3905                                 VG_USERREQ__CREATE_MEMPOOL,        \
3906                                 pool, rzB, is_zeroed, 0, 0);       \
3907     }
3908  #define VALGRIND_DESTROY_MEMPOOL(pool)                            \
3909     {unsigned int _qzz_res;                                        \
3910      VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,                       \
3911                                 VG_USERREQ__DESTROY_MEMPOOL,       \
3912                                 pool, 0, 0, 0, 0);                 \
3913     }
3914  #define VALGRIND_MEMPOOL_ALLOC(pool, addr, size)                  \
3915     {unsigned int _qzz_res;                                        \
3916      VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,                       \
3917                                 VG_USERREQ__MEMPOOL_ALLOC,         \
3918                                 pool, addr, size, 0, 0);           \
3919     }
3920  #define VALGRIND_MEMPOOL_FREE(pool, addr)                         \
3921     {unsigned int _qzz_res;                                        \
3922      VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,                       \
3923                                 VG_USERREQ__MEMPOOL_FREE,          \
3924                                 pool, addr, 0, 0, 0);              \
3925     }
3926  #define VALGRIND_MEMPOOL_TRIM(pool, addr, size)                   \
3927     {unsigned int _qzz_res;                                        \
3928      VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,                       \
3929                                 VG_USERREQ__MEMPOOL_TRIM,          \
3930                                 pool, addr, size, 0, 0);           \
3931     }
3932  #define VALGRIND_MOVE_MEMPOOL(poolA, poolB)                       \
3933     {unsigned int _qzz_res;                                        \
3934      VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,                       \
3935                                 VG_USERREQ__MOVE_MEMPOOL,          \
3936                                 poolA, poolB, 0, 0, 0);            \
3937     }
3938  #define VALGRIND_MEMPOOL_CHANGE(pool, addrA, addrB, size)         \
3939     {unsigned int _qzz_res;                                        \
3940      VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,                       \
3941                                 VG_USERREQ__MEMPOOL_CHANGE,        \
3942                                 pool, addrA, addrB, size, 0);      \
3943     }
3944  #define VALGRIND_MEMPOOL_EXISTS(pool)                             \
3945     __extension__                                                  \
3946     ({unsigned int _qzz_res;                                       \
3947      VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,                       \
3948                                 VG_USERREQ__MEMPOOL_EXISTS,        \
3949                                 pool, 0, 0, 0, 0);                 \
3950      _qzz_res;                                                     \
3951     })
3952  #define VALGRIND_STACK_REGISTER(start, end)                       \
3953     __extension__                                                  \
3954     ({unsigned int _qzz_res;                                       \
3955      VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,                       \
3956                                 VG_USERREQ__STACK_REGISTER,        \
3957                                 start, end, 0, 0, 0);              \
3958      _qzz_res;                                                     \
3959     })
3960  #define VALGRIND_STACK_DEREGISTER(id)                             \
3961     {unsigned int _qzz_res;                                        \
3962      VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,                       \
3963                                 VG_USERREQ__STACK_DEREGISTER,      \
3964                                 id, 0, 0, 0, 0);                   \
3965     }
3966  #define VALGRIND_STACK_CHANGE(id, start, end)                     \
3967     {unsigned int _qzz_res;                                        \
3968      VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,                       \
3969                                 VG_USERREQ__STACK_CHANGE,          \
3970                                 id, start, end, 0, 0);             \
3971     }
3972  #define VALGRIND_LOAD_PDB_DEBUGINFO(fd, ptr, total_size, delta)   \
3973     {unsigned int _qzz_res;                                        \
3974      VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,                       \
3975                                 VG_USERREQ__LOAD_PDB_DEBUGINFO,    \
3976                                 fd, ptr, total_size, delta, 0);    \
3977     }
3978  #define VALGRIND_MAP_IP_TO_SRCLOC(addr, buf64)                    \
3979     {unsigned int _qzz_res;                                        \
3980      VALGRIND_DO_CLIENT_REQUEST(_qzz_res, 0,                       \
3981                                 VG_USERREQ__MAP_IP_TO_SRCLOC,      \
3982                                 addr, buf64, 0, 0, 0);             \
3983     }
3984  #undef PLAT_x86_linux
3985  #undef PLAT_amd64_linux
3986  #undef PLAT_ppc32_linux
3987  #undef PLAT_ppc64_linux
3988  #undef PLAT_arm_linux
3989  #undef PLAT_ppc32_aix5
3990  #undef PLAT_ppc64_aix5
3991  #endif   &bsol;* __VALGRIND_H */
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from nano-node-MDEwOlJlcG9zaXRvcnkxOTM0NzM0MA==-flat-valgrind.h</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from nano-node-MDEwOlJlcG9zaXRvcnkxOTM0NzM0MA==-flat-valgrind.h</div>
                </div>
                <div class="column column_space"><pre><code>1350        __asm__ volatile(                                           \
1351           "mr 11,%1\n\t"                                           \
1352           "lwz 3,4(11)\n\t"   &bsol;* arg1->r3 */                       \
1353           "lwz 11,0(11)\n\t"  &bsol;* target->r11 */                    \
</pre></code></div>
                <div class="column column_space"><pre><code>1416        __asm__ volatile(                                           \
1417           "mr 11,%1\n\t"                                           \
1418           "lwz 3,4(11)\n\t"   &bsol;* arg1->r3 */                       \
1419           "lwz 4,8(11)\n\t"                                        \
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    