<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Matches for ini_option_2.h & fuse_fs_entry.h</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
</HEAD>
<body>
  <div style="align-items: center; display: flex; justify-content: space-around;">
    <div>
      <h3 align="center">
Matches for ini_option_2.h & fuse_fs_entry.h
      </h3>
      <h1 align="center">
        19.2%
      </h1>
      <center>
        <a href="index.html" target="_top">
          INDEX
        </a>
        <span>-</span>
        <a href="help-en.html" target="_top">
          HELP
        </a>
      </center>
    </div>
    <div>
<TABLE BORDER="1" CELLSPACING="0" BGCOLOR="#d0d0d0">
<TR><TH><TH>ini_option_2.h (32.954544%)<TH>fuse_fs_entry.h (13.551402%)<TH>Tokens
<TR><TD BGCOLOR="#0000ff"><FONT COLOR="#0000ff">-</FONT><TD><A HREF="javascript:ZweiFrames('match188-0.html#0',2,'match188-1.html#0',3)" NAME="0">(71-75)<TD><A HREF="javascript:ZweiFrames('match188-0.html#0',2,'match188-1.html#0',3)" NAME="0">(116-120)</A><TD ALIGN=center><FONT COLOR="#ff0000">17</FONT>
<TR><TD BGCOLOR="#f63526"><FONT COLOR="#f63526">-</FONT><TD><A HREF="javascript:ZweiFrames('match188-0.html#1',2,'match188-1.html#1',3)" NAME="1">(45-58)<TD><A HREF="javascript:ZweiFrames('match188-0.html#1',2,'match188-1.html#1',3)" NAME="1">(83-97)</A><TD ALIGN=center><FONT COLOR="#b40000">12</FONT>
</TABLE>
    </div>
  </div>
  <hr>
  <div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>ini_option_2.h</span>
<span> - </span>
<span></span>
</center>
</h3>
<HR>
<PRE>
/*
 * Flare
 * --------------
 * Copyright (C) 2008-2014 GREE, Inc.
 * 
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public License
 * as published by the Free Software Foundation; either version 2
 * of the License, or (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
 */
/**
 *	ini_option.h
 *
 *	@author	Masaki Fujimoto &lt;fujimoto@php.net&gt;
 *
 *	$Id$
 */
#ifndef INI_OPTION_H
#define INI_OPTION_H

#include &quot;ini.h&quot;

namespace gree {
namespace flare {

#define	ini_option_object()			singleton&lt;ini_option&gt;::instance()

/**
 *	flarefs global configuration class
 */
class ini_option : public ini {
private:
<A NAME="1"></A>	int					_argc;
	char**			_argv;

<FONT color="#f63526"><A HREF="javascript:ZweiFrames('match188-1.html#1',3,'match188-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>	int					_chunk_size;
	string			_config_path;
	int					_connection_pool_size;
	string			_data_dir;
	bool				_fuse_allow_other;
	bool				_fuse_allow_root;
	string			_mount_dir;
	string			_node_server_name;
	int					_node_server_port;
	string			_log_facility;
	
public:
	static const int default_chunk_size = 8192;
	static const int default_connection_pool_size = 8;</B></FONT>
	static const int default_node_server_port = 12121;

	ini_option();
	virtual ~ini_option();

	int load();
	int reload();

	int set_args(int argc, char** argv) { this-&gt;_argc = argc; this-&gt;_argv = argv; return 0; };
<A NAME="0"></A>
	int get_chunk_size() { return this-&gt;_chunk_size; };
	string get_config_path() { return this-&gt;_config_path; };
<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match188-1.html#0',3,'match188-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>	int get_connection_pool_size() { return this-&gt;_connection_pool_size; };
	string get_data_dir() { return this-&gt;_data_dir; };
	bool is_fuse_allow_other() { return this-&gt;_fuse_allow_other; };
	bool is_fuse_allow_root() { return this-&gt;_fuse_allow_root; };
	string get_mount_dir() { return this-&gt;_mount_dir; };</B></FONT>
	string get_node_server_name() { return this-&gt;_node_server_name; };
	int get_node_server_port() { return this-&gt;_node_server_port; };
	string get_log_facility() { return this-&gt;_log_facility; };

private:
	int _setup_cli_option(program_options::options_description&amp; option);
	int _setup_config_option(program_options:: options_description&amp; option);
};

}	// namespace flare
}	// namespace gree

#endif // INI_OPTION_H
// vim: foldmethod=marker tabstop=2 shiftwidth=2 autoindent
</PRE>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>fuse_fs_entry.h</span>
<span> - </span>
<span></span>
</center>
</h3>
<HR>
<PRE>
/*
 * Flare
 * --------------
 * Copyright (C) 2008-2014 GREE, Inc.
 * 
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public License
 * as published by the Free Software Foundation; either version 2
 * of the License, or (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
 */
/**
 *	fuse_fs_entry.h
 *
 *	@author	Masaki Fujimoto &lt;fujimoto@php.net&gt;
 *
 *	$Id$
 */
#ifndef	FUSE_FS_ENTRY_H
#define	FUSE_FS_ENTRY_H

#include &lt;sys/types.h&gt;
#include &lt;sys/stat.h&gt;
#include &lt;sys/xattr.h&gt;
#include &lt;unistd.h&gt;

#include &lt;fstream&gt;
#include &lt;sstream&gt;

#include &lt;boost/archive/binary_oarchive.hpp&gt;
#include &lt;boost/archive/binary_iarchive.hpp&gt;
#include &lt;boost/serialization/serialization.hpp&gt;
#include &lt;boost/serialization/string.hpp&gt;
#include &lt;boost/serialization/vector.hpp&gt;
#include &lt;boost/serialization/map.hpp&gt;
#include &lt;boost/serialization/split_member.hpp&gt;
#include &lt;boost/serialization/version.hpp&gt;
#include &lt;boost/lexical_cast.hpp&gt;

#include &quot;flarefs.h&quot;

namespace gree {
namespace flare {

typedef class fuse_fs fuse_fs;
typedef class fuse_fs_entry fuse_fs_entry;
typedef shared_ptr&lt;fuse_fs_entry&gt; shared_fs_entry;   

namespace fuse_fs_entry_const {
} // namespace fuse_fs_entry_const

/**
 *	flarefs file system entry implementation
 */
class fuse_fs_entry {
public:
	enum 								type {
		type_none					= 0,
		type_dir,
		type_file,
	};

	typedef	pair&lt;uint64_t, uint64_t&gt; chunk_id_t;
	typedef	vector&lt;chunk_id_t&gt; chunk_list_t;

protected:
	string								_path;
	fuse_fs*							_fs;

	shared_client					_client;
	type									_type;
<A NAME="1"></A>	uint64_t							_version;

	int										_access;
<FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match188-0.html#1',2,'match188-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>	int										_uid;
	int										_gid;
	off_t									_size;
	time_t								_atime;
	time_t								_ctime;
	time_t								_mtime;

	map&lt;string, string&gt;		_xattr;

	int										_chunk_size;
	chunk_list_t					_chunk_list;

public:
	static const int cas_retry_max = 8;
	static const int cas_retry_wait = 500;</B></FONT>

	fuse_fs_entry(string path, fuse_fs* fs);
	virtual ~fuse_fs_entry();

	static shared_fs_entry create(string path, type t, fuse_fs* fs);
	static op::result get(string path, fuse_fs* fs, shared_fs_entry&amp; fe);

	string get_path() { return this-&gt;_path; };
	type get_type() { return this-&gt;_type; };
	int get_parent(shared_fs_entry&amp; fe);
	string get_parent_path();
	virtual int add_fs_entry(shared_fs_entry fe);

	int get_access() { return this-&gt;_access; };
	int set_access(int m) { this-&gt;_access = m; return 0; };
<A NAME="0"></A>	int get_uid() { return this-&gt;_uid; };
	int set_uid(int uid) { this-&gt;_uid = uid; return 0; };
	int get_gid() { return this-&gt;_gid; };
<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match188-0.html#0',2,'match188-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>	int set_gid(int gid) { this-&gt;_gid = gid; return 0; };
	off_t get_size() { return this-&gt;_size; };
	time_t get_atime() { return this-&gt;_atime; };
	time_t get_ctime() { return this-&gt;_ctime; };
	time_t get_mtime() { return this-&gt;_mtime; };</B></FONT>

	inline int get_mode() {
		int m = this-&gt;_access;
		switch (this-&gt;_type) {
		case type_dir:
			m |= S_IFDIR;
			break;
		case type_file:
			m |= S_IFREG;
			break;
		default:
			break;
		}
		return m;
	};
	struct stat get_stat();
	int set_xattr(const char* name, const char* value, size_t value_size, int flag);
	int get_xattr(const char* name, char* value, size_t value_size);
	virtual int get_dirent(off_t o, string&amp; name, struct stat&amp; st);

	virtual const char* serialize(int&amp; data_size);
	virtual int unserialize(const char* data, int data_size, uint64_t version);
	int reload();
	op::result store(bool force = false);

protected:
	friend class boost::serialization::access;
	BOOST_SERIALIZATION_SPLIT_MEMBER();

	template&lt;class Archive&gt; void save(Archive&amp; ar, const unsigned int version) const {
		log_debug(&quot;version: %d&quot;, version);

		log_debug(&quot;access: %d&quot;, this-&gt;_access);
		ar &amp; this-&gt;_access;
		log_debug(&quot;uid: %d&quot;, this-&gt;_uid);
		ar &amp; this-&gt;_uid;
		log_debug(&quot;gid: %d&quot;, this-&gt;_gid);
		ar &amp; this-&gt;_gid;
		log_debug(&quot;size: %d&quot;, this-&gt;_size);
		ar &amp; this-&gt;_size;
		log_debug(&quot;atime: %d&quot;, this-&gt;_atime);
		ar &amp; this-&gt;_atime;
		log_debug(&quot;ctime: %d&quot;, this-&gt;_ctime);
		ar &amp; this-&gt;_ctime;
		log_debug(&quot;mtime: %d&quot;, this-&gt;_mtime);
		ar &amp; this-&gt;_mtime;
		log_debug(&quot;xattr: size=%d&quot;, this-&gt;_xattr.size());
		ar &amp; this-&gt;_xattr;
		log_debug(&quot;chunk_list: size=%d&quot;, this-&gt;_chunk_list.size());
		ar &amp; this-&gt;_chunk_list;
	};

	template&lt;class Archive&gt; void load(Archive&amp; ar, const unsigned int version) {
		log_debug(&quot;version: %d&quot;, version);
		switch (version) {
		case 1:
			ar &amp; this-&gt;_access;
			log_debug(&quot;access: %d&quot;, this-&gt;_access);
			ar &amp; this-&gt;_uid;
			log_debug(&quot;uid: %d&quot;, this-&gt;_uid);
			ar &amp; this-&gt;_gid;
			log_debug(&quot;gid: %d&quot;, this-&gt;_gid);
			ar &amp; this-&gt;_size;
			log_debug(&quot;size: %d&quot;, this-&gt;_size);
			ar &amp; this-&gt;_atime;
			log_debug(&quot;atime: %d&quot;, this-&gt;_atime);
			ar &amp; this-&gt;_ctime;
			log_debug(&quot;ctime: %d&quot;, this-&gt;_ctime);
			ar &amp; this-&gt;_mtime;
			log_debug(&quot;mtime: %d&quot;, this-&gt;_mtime);
			ar &amp; this-&gt;_xattr;
			log_debug(&quot;xattr: size=%d&quot;, this-&gt;_xattr.size());
			ar &amp; this-&gt;_chunk_list;
			log_debug(&quot;chunk_list: size=%d&quot;, this-&gt;_chunk_list.size());

			break;
		}
	};

private:
};

}	// namespace flare
}	// namespace gree

BOOST_CLASS_VERSION(gree::flare::fuse_fs_entry, 1);

#endif	// FUSE_FS_ENTRY_H
// vim: foldmethod=marker tabstop=2 shiftwidth=2 autoindent
</PRE>
</div>
  </div>
</body>
</html>
