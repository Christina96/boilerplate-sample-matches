<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for test_socket.cpp &amp; test_context.cpp</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for test_socket.cpp &amp; test_context.cpp
      </h3>
<h1 align="center">
        7.3%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>test_socket.cpp (3.9577837%)<th>test_context.cpp (50.0%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(58-74)<td><a href="#" name="0">(29-52)</a><td align="center"><font color="#ff0000">15</font>
</td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>test_socket.cpp</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 #include &lt;array&gt;
2 #include &lt;list&gt;
3 #include &lt;memory&gt;
4 #include &lt;string&gt;
5 #include &lt;boost/test/unit_test.hpp&gt;
6 #include "zmqpp/context.hpp"
7 #include "zmqpp/socket.hpp"
8 #include "zmqpp/message.hpp"
9 #include "zmqpp/signal.hpp"
10 BOOST_AUTO_TEST_SUITE( socket )
11 const int bubble_poll_timeout = 1;
12 const int max_poll_timeout = 100;
13 void bubble_subscriptions(zmqpp::socket&amp; socket)
14 {
15 	zmq_pollitem_t item = { socket, 0, ZMQ_POLLIN, 0 };
16 	int result = zmq_poll(&amp;item, 1, bubble_poll_timeout);
17 	BOOST_REQUIRE_MESSAGE(0 == result, "polling command failed to timeout during subscription bubble");
18 }
19 void wait_for_socket(zmqpp::socket&amp; socket)
20 {
21 	zmq_pollitem_t item = { socket, 0, ZMQ_POLLIN, 0 };
22 	int result = zmq_poll(&amp;item, 1, max_poll_timeout);
23 	BOOST_REQUIRE_MESSAGE(result &gt;= 0, "polling command returned without expected value: " &lt;&lt; zmq_strerror(zmq_errno()));
24 	BOOST_REQUIRE_MESSAGE(0 != result, "polling command returned with timeout after " &lt;&lt; max_poll_timeout &lt;&lt; " milliseconds");
25 	BOOST_REQUIRE_MESSAGE(1 == result, "polling command claims " &lt;&lt; result &lt;&lt; " sockets have events but we only gave it one");
26 	BOOST_REQUIRE_MESSAGE(item.revents &amp; ZMQ_POLLIN, "events do not match expected POLLIN event: " &lt;&lt; item.revents);
27 }
28 BOOST_AUTO_TEST_CASE( socket_creation )
29 {
30 	zmqpp::context context;
31 	zmqpp::socket socket(context, zmqpp::socket_type::pull);
32 }
33 <a name="0"></a>BOOST_AUTO_TEST_CASE( socket_creation_bad_type )
34 {
35 	zmqpp::context context;
36 <font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>	BOOST_CHECK_THROW(zmqpp::socket socket(context, static_cast&lt;zmqpp::socket_type&gt;(-1)), zmqpp::zmq_internal_exception);
37 }
38 BOOST_AUTO_TEST_CASE( valid_socket )
39 {
40 	zmqpp::context context;
41 	zmqpp::socket socket(context, zmqpp::socket_type::pull);
42 	socket.bind("inproc://test");
43 	zmqpp::message message;
44 	BOOST_CHECK(!socket.receive(message, true));
45 }
46 BOOST_AUTO_TEST_CASE( valid_move_supporting )
47 {
48 	zmqpp::context context;
49 	std::unique_ptr&lt;zmqpp::socket&gt; original(new zmqpp::socket(context, zmqpp::socket_type::pull));</b></font>
50 	original-&gt;bind("inproc://test");
51 	zmqpp::socket clone(std::move(*original));
52 	zmqpp::message message;
53 	BOOST_CHECK(!clone.receive(message, true));
54 }
55 BOOST_AUTO_TEST_CASE( simple_pull_push )
56 {
57 	zmqpp::context context;
58 	zmqpp::socket puller(context, zmqpp::socket_type::pull);
59 	puller.bind("inproc://test");
60 	zmqpp::socket pusher(context, zmqpp::socket_type::push);
61 	pusher.connect("inproc://test");
62 	BOOST_CHECK(pusher.send("hello world!"));
63 	wait_for_socket(puller);
64 	std::string message;
65 	BOOST_CHECK(puller.receive(message));
66 	BOOST_CHECK_EQUAL("hello world!", message);
67 	BOOST_CHECK(!puller.has_more_parts());
68 }
69 BOOST_AUTO_TEST_CASE( simple_receive_raw )
70 {
71 	zmqpp::context context;
72 	char buf[64];
73 	size_t len;
74 	zmqpp::socket puller(context, zmqpp::socket_type::pull);
75 	puller.bind("inproc://test");
76 	zmqpp::socket pusher(context, zmqpp::socket_type::push);
77 	pusher.connect("inproc://test");
78 	BOOST_CHECK(pusher.send("hello world!"));
79 	wait_for_socket(puller);
80 	len = sizeof(buf);
81 	BOOST_CHECK(puller.receive_raw(buf, len));
82 	std::string message(buf, len);
83 	BOOST_CHECK_EQUAL("hello world!", message);
84 	BOOST_CHECK(!puller.has_more_parts());
85 }
86 BOOST_AUTO_TEST_CASE( simple_receive_raw_short_buf )
87 {
88 	zmqpp::context context;
89 	char buf[64];
90 	size_t len;
91 	zmqpp::socket puller(context, zmqpp::socket_type::pull);
92 	puller.bind("inproc://test");
93 	zmqpp::socket pusher(context, zmqpp::socket_type::push);
94 	pusher.connect("inproc://test");
95 	BOOST_CHECK(pusher.send("hello world!"));
96 	wait_for_socket(puller);
97 	memset(buf, 0xee, sizeof(buf));
98 	len = 5;
99 	BOOST_CHECK(puller.receive_raw(buf, len));
100 	BOOST_CHECK_EQUAL(5, len);
101 	BOOST_CHECK_EQUAL(0xee, buf[5] &amp; 0xff);
102 	BOOST_CHECK_EQUAL(0xee, buf[6] &amp; 0xff);
103 	std::string message(buf, len);
104 	BOOST_CHECK_EQUAL("hello", message);
105 	BOOST_CHECK(!puller.has_more_parts());
106 }
107 BOOST_AUTO_TEST_CASE( multipart_pair )
108 {
109 	zmqpp::context context;
110 	zmqpp::socket alpha(context, zmqpp::socket_type::pair);
111 	alpha.bind("inproc://test");
112 	zmqpp::socket omega(context, zmqpp::socket_type::pair);
113 	omega.connect("inproc://test");
114 	BOOST_CHECK(alpha.send("hello", zmqpp::socket::send_more));
115 	BOOST_CHECK(alpha.send("world", zmqpp::socket::send_more));
116 	BOOST_CHECK(alpha.send("!"));
117 	wait_for_socket(omega);
118 	std::string message;
119 	BOOST_CHECK(omega.receive(message));
120 	BOOST_CHECK_EQUAL("hello", message);
121 	BOOST_REQUIRE(omega.has_more_parts());
122 	BOOST_CHECK(omega.receive(message));
123 	BOOST_CHECK_EQUAL("world", message);
124 	BOOST_REQUIRE(omega.has_more_parts());
125 	BOOST_CHECK(omega.receive(message));
126 	BOOST_CHECK_EQUAL("!", message);
127 	BOOST_CHECK(!omega.has_more_parts());
128 }
129 BOOST_AUTO_TEST_CASE( subscribe_via_option )
130 {
131 	zmqpp::context context;
132 	zmqpp::socket publisher(context, zmqpp::socket_type::publish);
133 	publisher.bind("inproc://test");
134 	zmqpp::socket subscriber(context, zmqpp::socket_type::subscribe);
135 	subscriber.connect("inproc://test");
136 	subscriber.set(zmqpp::socket_option::subscribe, "watch1");
137 	BOOST_CHECK(publisher.send("watch0", zmqpp::socket::send_more));
138 	BOOST_CHECK(publisher.send("contents0"));
139 	BOOST_CHECK(publisher.send("watch1", zmqpp::socket::send_more));
140 	BOOST_CHECK(publisher.send("contents1"));
141 	wait_for_socket(subscriber);
142 	std::string message;
143 	BOOST_CHECK(subscriber.receive(message));
144 	BOOST_CHECK_EQUAL("watch1", message);
145 	BOOST_REQUIRE(subscriber.has_more_parts());
146 	BOOST_CHECK(subscriber.receive(message));
147 	BOOST_CHECK_EQUAL("contents1", message);
148 	BOOST_CHECK(!subscriber.has_more_parts());
149 }
150 BOOST_AUTO_TEST_CASE( subscribe_helpers )
151 {
152 	zmqpp::context context;
153 	zmqpp::socket publisher(context, zmqpp::socket_type::publish);
154 	publisher.bind("inproc://test");
155 	zmqpp::socket subscriber(context, zmqpp::socket_type::subscribe);
156 	subscriber.connect("inproc://test");
157 	subscriber.subscribe("watch1");
158 	subscriber.subscribe("watch2");
159 	BOOST_CHECK(publisher.send("watch0", zmqpp::socket::send_more));
160 	BOOST_CHECK(publisher.send("contents0"));
161 	BOOST_CHECK(publisher.send("watch1", zmqpp::socket::send_more));
162 	BOOST_CHECK(publisher.send("contents1"));
163 	BOOST_CHECK(publisher.send("watch2", zmqpp::socket::send_more));
164 	BOOST_CHECK(publisher.send("contents2"));
165 	BOOST_CHECK(publisher.send("watch3", zmqpp::socket::send_more));
166 	BOOST_CHECK(publisher.send("contents3"));
167 	wait_for_socket(subscriber);
168 	std::string message;
169 	BOOST_CHECK(subscriber.receive(message));
170 	BOOST_CHECK_EQUAL("watch1", message);
171 	BOOST_REQUIRE(subscriber.has_more_parts());
172 	BOOST_CHECK(subscriber.receive(message));
173 	BOOST_CHECK_EQUAL("contents1", message);
174 	BOOST_CHECK(!subscriber.has_more_parts());
175 	wait_for_socket(subscriber);
176 	BOOST_CHECK(subscriber.receive(message));
177 	BOOST_CHECK_EQUAL("watch2", message);
178 	BOOST_REQUIRE(subscriber.has_more_parts());
179 	BOOST_CHECK(subscriber.receive(message));
180 	BOOST_CHECK_EQUAL("contents2", message);
181 	BOOST_CHECK(!subscriber.has_more_parts());
182 	subscriber.unsubscribe("watch1");
183 	bubble_subscriptions(subscriber);
184 	BOOST_CHECK(publisher.send("watch0", zmqpp::socket::send_more));
185 	BOOST_CHECK(publisher.send("contents0"));
186 	BOOST_CHECK(publisher.send("watch1", zmqpp::socket::send_more));
187 	BOOST_CHECK(publisher.send("contents1"));
188 	BOOST_CHECK(publisher.send("watch2", zmqpp::socket::send_more));
189 	BOOST_CHECK(publisher.send("contents2"));
190 	wait_for_socket(subscriber);
191 	BOOST_CHECK(subscriber.receive(message));
192 	BOOST_CHECK_EQUAL("watch2", message);
193 	BOOST_REQUIRE(subscriber.has_more_parts());
194 	BOOST_CHECK(subscriber.receive(message));
195 	BOOST_CHECK_EQUAL("contents2", message);
196 	BOOST_CHECK(!subscriber.has_more_parts());
197 }
198 BOOST_AUTO_TEST_CASE( subscribe_helpers_multitopic_method )
199 {
200 	std::list&lt;std::string&gt; topics = { "watch1", "watch2" };
201 	zmqpp::context context;
202 	zmqpp::socket publisher(context, zmqpp::socket_type::publish);
203 	publisher.bind("inproc://test");
204 	zmqpp::socket subscriber(context, zmqpp::socket_type::subscribe);
205 	subscriber.connect("inproc://test");
206 	subscriber.subscribe(topics.begin(), topics.end());
207 	BOOST_CHECK(publisher.send("watch0", zmqpp::socket::send_more));
208 	BOOST_CHECK(publisher.send("contents0"));
209 	BOOST_CHECK(publisher.send("watch1", zmqpp::socket::send_more));
210 	BOOST_CHECK(publisher.send("contents1"));
211 	BOOST_CHECK(publisher.send("watch2", zmqpp::socket::send_more));
212 	BOOST_CHECK(publisher.send("contents2"));
213 	BOOST_CHECK(publisher.send("watch3", zmqpp::socket::send_more));
214 	BOOST_CHECK(publisher.send("contents3"));
215 	wait_for_socket(subscriber);
216 	std::string message;
217 	BOOST_CHECK(subscriber.receive(message));
218 	BOOST_CHECK_EQUAL("watch1", message);
219 	BOOST_REQUIRE(subscriber.has_more_parts());
220 	BOOST_CHECK(subscriber.receive(message));
221 	BOOST_CHECK_EQUAL("contents1", message);
222 	BOOST_CHECK(!subscriber.has_more_parts());
223 	wait_for_socket(subscriber);
224 	BOOST_CHECK(subscriber.receive(message));
225 	BOOST_CHECK_EQUAL("watch2", message);
226 	BOOST_REQUIRE(subscriber.has_more_parts());
227 	BOOST_CHECK(subscriber.receive(message));
228 	BOOST_CHECK_EQUAL("contents2", message);
229 	BOOST_CHECK(!subscriber.has_more_parts());
230 }
231 BOOST_AUTO_TEST_CASE( sending_messages )
232 {
233 	zmqpp::context context;
234 	zmqpp::socket pusher(context, zmqpp::socket_type::push);
235 	pusher.bind("inproc://test");
236 	zmqpp::socket puller(context, zmqpp::socket_type::pull);
237 	puller.connect("inproc://test");
238 	zmqpp::message message;
239 	std::string part("another world");
240 	message.add("hello world!");
241 	message.add(part);
242 	pusher.send(message);
243 	BOOST_CHECK_EQUAL(0, message.parts());
244 	wait_for_socket(puller);
245 	BOOST_CHECK(puller.receive(part));
246 	BOOST_CHECK_EQUAL("hello world!", part);
247 	BOOST_REQUIRE(puller.has_more_parts());
248 	BOOST_CHECK(puller.receive(part));
249 	BOOST_CHECK_EQUAL("another world", part);
250 	BOOST_CHECK(!puller.has_more_parts());
251 }
252 BOOST_AUTO_TEST_CASE( receiving_messages )
253 {
254 	zmqpp::context context;
255 	zmqpp::socket pusher(context, zmqpp::socket_type::push);
256 	pusher.bind("inproc://test");
257 	zmqpp::socket puller(context, zmqpp::socket_type::pull);
258 	puller.connect("inproc://test");
259 	zmqpp::message message;
260 	std::string part("another world");
261 	message.add("hello world!");
262 	message.add(part);
263 	pusher.send(message);
264 	BOOST_CHECK_EQUAL(0, message.parts());
265 	wait_for_socket(puller);
266 	BOOST_CHECK(puller.receive(message));
267 	BOOST_REQUIRE_EQUAL(2, message.parts());
268 	BOOST_CHECK_EQUAL("hello world!", message.get(0));
269 	BOOST_CHECK_EQUAL("another world", message.get(1));
270 	BOOST_CHECK(!puller.has_more_parts());
271 }
272 BOOST_AUTO_TEST_CASE( receive_over_old_messages )
273 {
274 	zmqpp::context context;
275 	zmqpp::socket pusher( context, zmqpp::socket_type::push );
276 	pusher.bind( "inproc://test" );
277 	zmqpp::socket puller( context, zmqpp::socket_type::pull );
278 	puller.connect( "inproc://test");
279 	pusher.send( "first message" );
280 	pusher.send( "second message" );
281 	wait_for_socket( puller );
282 	zmqpp::message message;
283 	BOOST_CHECK( puller.receive( message ) );
284 	BOOST_REQUIRE_EQUAL( 1, message.parts() );
285 	BOOST_CHECK_EQUAL( "first message", message.get(0) );
286 	BOOST_CHECK( puller.receive( message ) );
287 	BOOST_REQUIRE_EQUAL( 1, message.parts() );
288 	BOOST_CHECK_EQUAL( "second message", message.get(0) );
289 }
290 BOOST_AUTO_TEST_CASE( cleanup_safe_with_pending_data )
291 {
292 	zmqpp::context context;
293 	zmqpp::socket pusher(context, zmqpp::socket_type::push);
294 	pusher.bind("inproc://test");
295 	zmqpp::socket puller(context, zmqpp::socket_type::pull);
296 	puller.connect("inproc://test");
297 	zmqpp::message message;
298 	std::string part("another world");
299 	message.add("hello world!");
300 	message.add(part);
301 	pusher.send(message);
302 	BOOST_CHECK_EQUAL(0, message.parts());
303 }
304 BOOST_AUTO_TEST_CASE( multitarget_puller )
305 {
306 	std::vector&lt;std::string&gt; endpoints = { "inproc://test1", "inproc://test2" };
307 	zmqpp::context context;
308 	zmqpp::socket pusher1(context, zmqpp::socket_type::push);
309 	pusher1.bind(endpoints[0]);
310 	zmqpp::socket pusher2(context, zmqpp::socket_type::push);
311 	pusher2.bind(endpoints[1]);
312 	zmqpp::socket puller(context, zmqpp::socket_type::pull);
313 	puller.connect(endpoints.begin(), endpoints.end());
314 	BOOST_CHECK(pusher1.send("hello world!"));
315 	BOOST_CHECK(pusher2.send("a test message"));
316 	wait_for_socket(puller);
317 	std::string message;
318 	BOOST_CHECK(puller.receive(message));
319 	BOOST_CHECK_EQUAL("hello world!", message);
320 	BOOST_CHECK(puller.receive(message));
321 	BOOST_CHECK_EQUAL("a test message", message);
322 }
323 BOOST_AUTO_TEST_CASE( test_receive_send_signals )
324 {
325     zmqpp::context ctx;
326     zmqpp::socket p1(ctx, zmqpp::socket_type::pair);
327     zmqpp::socket p2(ctx, zmqpp::socket_type::pair);
328     p1.bind("inproc://test");
329     p2.connect("inproc://test");
330     p1.send(zmqpp::signal::test);
331     p1.send("....");
332     p1.send(zmqpp::signal::stop);
333     zmqpp::signal s;
334     std::string str;
335     p2.receive(s);
336     BOOST_CHECK_EQUAL(zmqpp::signal::test, s);
337     p2.receive(str);
338     p2.send(zmqpp::signal::test);
339     p2.receive(s);
340     BOOST_CHECK_EQUAL(zmqpp::signal::stop, s);
341     p1.receive(s);
342     BOOST_CHECK_EQUAL(zmqpp::signal::test, s);
343 }
344 BOOST_AUTO_TEST_CASE( test_wait )
345 {
346     zmqpp::context ctx;
347     zmqpp::socket p1(ctx, zmqpp::socket_type::pair);
348     zmqpp::socket p2(ctx, zmqpp::socket_type::pair);
349     p1.bind("inproc://test");
350     p2.connect("inproc://test");
351     p1.send(zmqpp::signal::test);
352     p1.send("....");
353     p1.send("___");
354     p1.send(zmqpp::signal::stop);
355     BOOST_CHECK_EQUAL(zmqpp::signal::test, p2.wait());
356     BOOST_CHECK_EQUAL(zmqpp::signal::stop, p2.wait());
357 }
358 BOOST_AUTO_TEST_CASE( test_signal_block_noblock )
359 {
360     zmqpp::context ctx;
361     zmqpp::socket p1(ctx, zmqpp::socket_type::pair);
362     zmqpp::socket p2(ctx, zmqpp::socket_type::pair);
363     p1.bind("inproc://test");
364     BOOST_CHECK_EQUAL(false, p1.send(zmqpp::signal::test, true)); //noblock
365     //p1.send(zmqpp::signal::test);     p2.connect("inproc://test");
366     zmqpp::signal sig;
367     BOOST_CHECK_EQUAL(false, p1.receive(sig, true)); //noblock
368     p1.send(zmqpp::signal::test);
369     BOOST_CHECK_EQUAL(true, p2.receive(sig, true)); //noblock
370 }
371 #if (ZMQ_VERSION_MAJOR &gt;= 4)
372 BOOST_AUTO_TEST_CASE( simple_stream )
373 {
374 	zmqpp::context context;
375 	zmqpp::socket s1(context, zmqpp::socket_type::stream);
376 	zmqpp::socket s2(context, zmqpp::socket_type::stream);
377 	s1.bind("inproc://test");
378 	s2.connect("inproc://test");
379 	std::string identity;
380 	s2.get(zmqpp::socket_option::identity, identity);
381 	zmqpp::message request;
382 	request &lt;&lt; identity;
383 	request &lt;&lt; "Hello world!";
384 	BOOST_CHECK(s2.send(request));
385 	zmqpp::message response;
386 	BOOST_CHECK(s1.receive(response));
387 	BOOST_CHECK(response.parts() == 2);
388 	BOOST_CHECK(response.get(1) == "Hello world!");
389 }
390 #endif
391 #ifndef TRAVIS_CI_BUILD //do not run when building on travis-ci (this cause oom error and kill the test process)
392 BOOST_AUTO_TEST_CASE( sending_large_messages_string )
393 {
394 	zmqpp::context context;
395 	zmqpp::socket pusher(context, zmqpp::socket_type::push);
396 	pusher.bind("inproc://test");
397 	zmqpp::socket puller(context, zmqpp::socket_type::pull);
398 	puller.connect("inproc://test");
399 	std::string message;
400     const size_t bytes_to_send = static_cast&lt;size_t&gt;(1024 * 1024 * 1024);
401     message.reserve(bytes_to_send);
402     for (size_t i = 0; i &lt; bytes_to_send; i++)
403     {
404         message.push_back('A' + (i % 26));
405     }
406 	BOOST_CHECK(pusher.send(message));
407 	zmq_pollitem_t item = { puller, 0, ZMQ_POLLIN, 0 };
408     const int poll_timeout = 1000000;
409 	int result = zmq_poll(&amp;item, 1, poll_timeout);
410 	BOOST_REQUIRE_MESSAGE(result &gt;= 0, "polling command returned without expected value: " &lt;&lt; zmq_strerror(zmq_errno()));
411 	BOOST_REQUIRE_MESSAGE(0 != result, "polling command returned with timeout after " &lt;&lt; poll_timeout &lt;&lt; " milliseconds");
412 	BOOST_REQUIRE_MESSAGE(1 == result, "polling command claims " &lt;&lt; result &lt;&lt; " sockets have events but we only gave it one");
413 	BOOST_REQUIRE_MESSAGE(item.revents &amp; ZMQ_POLLIN, "events do not match expected POLLIN event: " &lt;&lt; item.revents);
414     std::string received_message;
415 	BOOST_CHECK(puller.receive(received_message));
416 	BOOST_CHECK_EQUAL(0, message.compare(received_message));
417 	BOOST_CHECK(!puller.has_more_parts());
418 }
419 #endif
420 #if (ZMQ_VERSION_MAJOR &gt;= 4)
421 BOOST_AUTO_TEST_CASE( test_simple_monitor )
422 {
423     zmqpp::context ctx;
424     zmqpp::socket server(ctx, zmqpp::socket_type::push);
425 <font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>	zmqpp::context first;
426 	BOOST_CHECK(first);
427 	zmqpp::context second( std::move(first) );
428 	BOOST_CHECK(second);
429 	BOOST_CHECK(!first);
430 }
431 BOOST_AUTO_TEST_CASE( defaults )
432 {
433 	zmqpp::context context;
434 	BOOST_CHECK_GE(context.get(zmqpp::context_option::io_threads), ZMQ_IO_THREADS_DFLT);
435 	BOOST_CHECK_GE(context.get(zmqpp::context_option::max_sockets), ZMQ_MAX_SOCKETS_DFLT);
436 }
437 BOOST_AUTO_TEST_CASE( validaty )
438 {
439 	zmqpp::context context;
440 	BOOST_CHECK(context);
441 	context.terminate();
442 	BOOST_CHECK(!context);
443 	BOOST_CHECK_THROW(context.get(zmqpp::context_option::io_threads), zmqpp::invalid_instance);</b></font>
444 }
445 BOOST_AUTO_TEST_CASE( throws_exception )
446 {
447 #if (ZMQ_VERSION_MAJOR &lt; 3) || ((ZMQ_VERSION_MAJOR == 3) &amp;&amp; (ZMQ_VERSION_MINOR &lt; 2))
448 	BOOST_CHECK_THROW(new zmqpp::context(-1), zmqpp::zmq_internal_exception);
449 #else
450 	zmqpp::context context;
451 	BOOST_CHECK_THROW(context.set(zmqpp::context_option::io_threads, -1), zmqpp::zmq_internal_exception);
452 #endif
453 }
454 BOOST_AUTO_TEST_SUITE_END()
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
