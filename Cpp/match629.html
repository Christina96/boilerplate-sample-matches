<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Matches for lab5.cpp & TestTimer.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
</HEAD>
<body>
  <div style="align-items: center; display: flex; justify-content: space-around;">
    <div>
      <h3 align="center">
Matches for lab5.cpp & TestTimer.cpp
      </h3>
      <h1 align="center">
        23.9%
      </h1>
      <center>
        <a href="index.html" target="_top">
          INDEX
        </a>
        <span>-</span>
        <a href="help-en.html" target="_top">
          HELP
        </a>
      </center>
    </div>
    <div>
<TABLE BORDER="1" CELLSPACING="0" BGCOLOR="#d0d0d0">
<TR><TH><TH>lab5.cpp (31.52174%)<TH>TestTimer.cpp (19.333334%)<TH>Tokens
<TR><TD BGCOLOR="#0000ff"><FONT COLOR="#0000ff">-</FONT><TD><A HREF="javascript:ZweiFrames('match629-0.html#0',2,'match629-1.html#0',3)" NAME="0">(62-64)<TD><A HREF="javascript:ZweiFrames('match629-0.html#0',2,'match629-1.html#0',3)" NAME="0">(39-40)</A><TD ALIGN=center><FONT COLOR="#ff0000">15</FONT>
<TR><TD BGCOLOR="#f63526"><FONT COLOR="#f63526">-</FONT><TD><A HREF="javascript:ZweiFrames('match629-0.html#1',2,'match629-1.html#1',3)" NAME="1">(64-65)<TD><A HREF="javascript:ZweiFrames('match629-0.html#1',2,'match629-1.html#1',3)" NAME="1">(86-87)</A><TD ALIGN=center><FONT COLOR="#ee0000">14</FONT>
</TABLE>
    </div>
  </div>
  <hr>
  <div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>lab5.cpp</span>
<span> - </span>
<span></span>
</center>
</h3>
<HR>
<PRE>
//============================================================================
//                                  I B E X                                   
// File        : lab5.cpp
// Author      : Gilles Chabert
// Copyright   : Ecole des Mines de Nantes (France)
// License     : See the LICENSE file
// Created     : Jun 8, 2015
//============================================================================

#include &quot;ibex.h&quot;
#include &quot;vibes.cpp&quot;

using namespace std;
using namespace ibex;

class ToVibes : public SetVisitor {

public:

  /**
   * Plot a  box within the frame [-max,max]x[-max,max]
   *
   * The frame avoids, in particular, to plot unbounded OUT boxes.
   */
  ToVibes(double max) : frame(2,max*Interval(0,1)) {  }

  /**
   * Function that will be called automatically on every boxes (leaves) of the set.
   */
  void visit_leaf(const IntervalVector&amp; box, BoolInterval status) {

    // Intersect the box with the frame
    IntervalVector framebox=box &amp; frame;

    //  Associate a color to the box.
    //  - YES (means &quot;inside&quot;) is in green
    //  - NO (means &quot;outside&quot;) is in red
    //  - MAYBE (means &quot;boundary&quot;) is in blue.
    const char* color;

    switch (status) {
    case YES:  color=&quot;g&quot;; break;
    case NO:   color=&quot;r&quot;; break;
    case MAYBE : color=&quot;b&quot;; break;
    }

    // Plot the box with Vibes
    vibes::drawBox(framebox[0].lb(), framebox[0].ub(), framebox[1].lb(), framebox[1].ub(), color);
  }

   IntervalVector frame;
};

int main() {
	vibes::beginDrawing ();
	vibes::newFigure(&quot;lab5&quot;);

	double eps=0.001;
<A NAME="0"></A>
	Function f(&quot;p1&quot;,&quot;p2&quot;,&quot;t&quot;,&quot;20*exp(-p1*t)-8*exp(-p2*t)&quot;);
<A NAME="1"></A>
<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match629-1.html#0',3,'match629-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>	const int n=10;

	double _t[n][2] = {{1,1}, {2,2}, {3,3}, {4,4}, {5,5}, {6,6}, {7,7}, {8,8}, {9,9}, {10,10}};</B></FONT><FONT color="#f63526"><A HREF="javascript:ZweiFrames('match629-1.html#1',3,'match629-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>
	double _y[n][2] = {{4.5,7.5}, {0.67,4.6}, {-1,2.8}, {-1.7,1.7}, {-1.9,0.93}, {-1.8,0.5}, {-1.6,0.24}, {-1.4,0.09}, {-1.2,0.0089}, {-1,-0.031}};</B></FONT>

	IntervalVector t(n,_t);
	IntervalVector y(n,_y);


	// =============== 1st variant: building a function f:RÂ²-&gt;R^n ====================
//	Variable p1,p2;
//
//	Array&lt;const ExprNode&gt; y(n);
//
//	for (int i=0; i&lt;n; i++)
//		y.set_ref(i, f(p1,p2,Interval(t[i])));
//
//	Function fn(p1,p2,ExprVector::new_(y,ExprVector::COL));
//
//	SepFwdBwd sep(fn,y);
	// ==============================================================================


	// =============== 2nd variant: with constraints ====================
	Variable p1,p2;
	SystemFactory fac;
	fac.add_var(p1);
	fac.add_var(p2);
	for (int i=0; i&lt;n; i++)
		fac.add_ctr(f(p1,p2,t[i])=y[i]);

	// add bound constraints
	fac.add_ctr(p1&gt;=0);
	fac.add_ctr(p1&lt;=1);
	fac.add_ctr(p2&gt;=0);
	fac.add_ctr(p2&lt;=1);

	System sys(fac);

	Set set(sys,0.001);

	ToVibes to_vibes(1);
	set.visit(to_vibes);

	vibes::endDrawing();

}


// the following piece of code is how we have generated data...
/*
	double p1=0.6;
	double p2=0.2;
	int n=10;
	for (double t=1; t&lt;=n; t++) {
		p1=0.4; p2=0.2;
		Interval x=20*::exp(-p1*t)-8*::exp(-p2*t);
		p1=0.6;
		x |= 20*::exp(-p1*t)-8*::exp(-p2*t);
		p2=0.3;
		x |= 20*::exp(-p1*t)-8*::exp(-p2*t);
		p1=0.4;
		x |= 20*::exp(-p1*t)-8*::exp(-p2*t);
		cout &lt;&lt; setprecision(2) &lt;&lt; &quot;{&quot; &lt;&lt; x.lb() &lt;&lt; &quot;,&quot; &lt;&lt; x.ub() &lt;&lt; &quot;}, &quot;;
	}
	cout &lt;&lt; endl;
 */
</PRE>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>TestTimer.cpp</span>
<span> - </span>
<span></span>
</center>
</h3>
<HR>
<PRE>
/* ============================================================================
 * I B E X - String Tests
 * ============================================================================
 * Copyright   : Ecole des Mines de Nantes (FRANCE)
 * License     : This program can be distributed under the terms of the GNU LGPL.
 *               See the file COPYING.LESSER.
 *
 * Author(s)   : Gilles Chabert
 * Created     : Mar 2, 2012
 * ---------------------------------------------------------------------------- */

#include &quot;TestTimer.h&quot;
#include &quot;ibex_Timer.h&quot;
#include &quot;ibex_Interval.h&quot;

using namespace std;

namespace ibex {


void TestTimer::test01() {
	Timer timer;
	CPPUNIT_ASSERT(timer.get_time()==0);
	timer.start();
	CPPUNIT_ASSERT(timer.get_time()&gt;=0);
	timer.stop();
	double tmp = timer.get_time();
	CPPUNIT_ASSERT(timer.get_time()==tmp);
	timer.restart();
	CPPUNIT_ASSERT(timer.get_time()&gt;=0);
	timer.stop();
	tmp = timer.get_time();
	CPPUNIT_ASSERT(timer.get_time()==tmp);

}
<A NAME="0"></A>

void TestTimer::test02() {
<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match629-0.html#0',2,'match629-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>	int n= 1.e5;
	double a[5][4]= { {4,4,4,4}, {1,1,1,1}, {8,8,8,8}, {6,6,6,6}, { 3,7,3,7}};</B></FONT>
	double c[5] = {0.1, 0.2, 0.2, 0.4, 0.4};

	double x1[4] = {4,4,4,4};
	double f, z, tmp;
	Timer t1;
	t1.start();

	Timer t2;
	int m=10;
	double toto=0;
	tmp = 0.1;
	for (int kk=1;kk&lt;m;kk++) {
//		cout &lt;&lt; &quot;debut iter = &quot;&lt;&lt; kk&lt;&lt;&quot;  t2.get_time() = &quot;&lt;&lt; t2.get_time()&lt;&lt; endl;
		t2.restart();
		CPPUNIT_ASSERT(t2.get_time()&lt;tmp);
//		cout &lt;&lt; &quot;debut iter = &quot;&lt;&lt; kk&lt;&lt;&quot;  t2.get_time() = &quot;&lt;&lt; t2.get_time()&lt;&lt; endl;

		for (int k =0; k&lt;n; k++){
			f= 0;
			for (int i=0; i&lt;5; i++) {
				z= 0;
				for (int j=0; j&lt;4; j++) {
					z = z+ ::pow((x1[j]-a[i][j]),2);
				}
				f -= 1/(z+c[i]);
			}
		}
		CPPUNIT_ASSERT(t2.get_time()&gt;0);
//		cout &lt;&lt; &quot;fin iter = &quot;&lt;&lt; kk &lt;&lt;&quot;  t2.get_time() = &quot;&lt;&lt; t2.get_time()&lt;&lt; &quot;  &quot;&lt;&lt; f &lt;&lt; endl;
		t2.stop();
		if (kk&gt;1) check(t2.get_time(),tmp, 0.1);

		tmp= t2.get_time();
		CPPUNIT_ASSERT(t2.get_time()&lt;10);
		CPPUNIT_ASSERT(t2.get_time()&gt;0);
		toto += tmp;
	}
	t1.stop();
	CPPUNIT_ASSERT(t1.get_time()&gt;t2.get_time());
	CPPUNIT_ASSERT(t1.get_time()&gt;tmp);
	check_relatif(t1.get_time() , toto, 1.e-1);
	check(t2.get_time() , tmp);
<A NAME="1"></A>}

void TestTimer::test03() {
<FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match629-0.html#1',2,'match629-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>	double a[5][4]= { {4,4,4,4}, {1,1,1,1}, {8,8,8,8}, {6,6,6,6}, { 3,7,3,7}};
	double c[5] = {0.1, 0.2, 0.2, 0.4, 0.4};</B></FONT>

	double x1[4] = {4,4,4,4};
	Timer t0;
	t0.start();

	Timer t1;
	t1.start();
	int n= 1.e5;
	double f, z;
	for (int k =0; k&lt;n; k++){
		f= 0;
		for (int i=0; i&lt;5; i++) {
			z= 0;
			for (int j=0; j&lt;4; j++) {
				z = z+ ::pow((x1[j]-a[i][j]),2);
			}
			f -= 1/(z+c[i]);
		}
	}
	t1.stop();

	Timer t2;
	t2.start();
	n =1.e5;
	IntervalVector x(4,Interval(4));
	Interval fi, zi;
	for (int k =0; k&lt;n; k++){
		fi= 0;
		for (int i=0; i&lt;5; i++) {
			zi= 0;
			for (int j=0; j&lt;4; j++) {
				zi = zi+pow((x[j]-a[i][j]),2);
			}
			fi -= 1/(zi+c[i]);
		}
	}
	t2.stop();

	t0.stop();
//	cout&lt;&lt;endl &lt;&lt; &quot; t0.get_time() = &quot;&lt;&lt; t0.get_time()&lt;&lt; &quot; /  t1.get_time() =   &quot;&lt;&lt;t1.get_time()&lt;&lt;&quot; /  t2.get_time() = &quot;&lt;&lt;t2.get_time();
//	cout  &lt;&lt; &quot; / t1 + t2 = &quot; &lt;&lt;( t1.get_time()+t2.get_time()) &lt;&lt; endl;
	CPPUNIT_ASSERT(t2.get_time()&gt; t1.get_time());
	CPPUNIT_ASSERT(t0.get_time()&gt; t1.get_time());
	CPPUNIT_ASSERT(t0.get_time()&gt; t2.get_time());
//	CPPUNIT_ASSERT(t0.get_time() &gt;= ( t1.get_time()+t2.get_time()));
	check_relatif(t0.get_time() , ( t1.get_time()+t2.get_time()), 1.e-2);

}

} // end namespace
</PRE>
</div>
  </div>
</body>
</html>
