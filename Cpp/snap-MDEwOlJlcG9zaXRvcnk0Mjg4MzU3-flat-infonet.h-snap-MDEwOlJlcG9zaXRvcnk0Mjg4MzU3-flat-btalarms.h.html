
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 29.57920792079208%, Tokens: 9</h2>
        <div class="column">
            <h3>snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-infonet.h</h3>
            <pre><code>1  #ifndef infonet_h
2  #define infonet_h
3  #include "base.h"
4  ClassTP(TThermalSch, PThermalSch)
5  private:
6    PXmlDoc TherapyPlacesXmlDoc;
7    PXmlDoc ActivitiesXmlDoc;
8    PXmlDoc AvailableTherapyPlacesXmlDoc;
9    PXmlDoc AvailableActivitiesXmlDoc;
10    PXmlDoc ScheduledActivitiesXmlDoc;
11    PXmlDoc HolidaysXmlDoc;
12    PXmlDoc MakeScheduleXmlDoc;
13    PXmlDoc CheckScheduleXmlDoc;
14  public:
15    TThermalSch(){}
16    static PThermalSch New(){return PThermalSch(new TThermalSch());}
17    TThermalSch(TSIn&){Fail;}
18    static PThermalSch Load(TSIn& SIn){return new TThermalSch(SIn);}
19    void Save(TSOut&){Fail;}
20    TThermalSch& operator=(const TThermalSch&){Fail; return *this;}
21    TStr GetFldVal(const PXmlTok& RecXmlTok, const TStr& FldNm) const;
22    TStr GetFldVal(const PXmlDoc& RecXmlDoc, const TStr& FldNm) const;
23    TStr GetFldDateVal(const PXmlTok& RecXmlTok, const TStr& FldNm) const;
24    TStr GetFldDateVal(const PXmlDoc& RecXmlDoc, const TStr& FldNm) const;
25    TStrV GetFldValV(const PXmlTok& RecXmlTok, const TStr& FldNm,
26     const TStr& XFldNm, const TStr& SubFldNm=TStr()) const;
27    static TStr GetXmlOut_Ok(const TStr& OpNm);
28    static TStr GetXmlOut_Error(const TStr& OpNm, const TStr& MsgStr);
29    TStr ExeCmFromXml(const PSIn& SIn);
30    TStr ExeCmFromXmlFile(const TStr& FNm, const TStr& FPath);
31    TStr ExeCmFromXmlStr(const TStr& Str);
32    TStr ExeCm_SetCatalogueTherapyPlaces(const PXmlDoc& XmlDoc);
33    TStr ExeCm_SetCatalogueActivities(const PXmlDoc& XmlDoc);
34    TStr ExeCm_SetCatalogueAvailableTherapyPlaces(const PXmlDoc& XmlDoc);
35    TStr ExeCm_SetCatalogueAvailableActivities(const PXmlDoc& XmlDoc);
36    TStr ExeCm_SetScheduledActivities(const PXmlDoc& XmlDoc);
37    TStr ExeCm_SetCatalogueHolidays(const PXmlDoc& XmlDoc);
38    TStr ExeCm_MakeSchedule(const PXmlDoc& XmlDoc);
39    TStr ExeCm_CheckSchedule(const PXmlDoc& XmlDoc);
40    bool IsTherapyPlacesOk(TStr& MsgStr) const;
41    int GetTherapyPlaces() const;
42    PXmlTok GetTherapyPlace(const int& TherapyPlaceN) const;
43    TStr GetTherapyPlace_Code(const PXmlTok& TherapyPlace) const {
44      return GetFldVal(TherapyPlace, "Code");}
45    TStr GetTherapyPlace_Type(const PXmlTok& TherapyPlace) const {
46      return GetFldVal(TherapyPlace, "Type");}
47    TStr GetTherapyPlace_Location(const PXmlTok& TherapyPlace) const {
48      return GetFldVal(TherapyPlace, "Location");}
49    TStr GetTherapyPlace_Capacity(const PXmlTok& TherapyPlace) const {
50      return GetFldVal(TherapyPlace, "Capacity");}
51    TStr GetTherapyPlace_Distance(const PXmlTok& TherapyPlace) const {
52      return GetFldVal(TherapyPlace, "Distance");}
53    TStr GetTherapyPlace_Gender(const PXmlTok& TherapyPlace) const {
54      return GetFldVal(TherapyPlace, "Gender");}
55    TStr GetTherapyPlace_AlternateScheduling(const PXmlTok& TherapyPlace) const {
56      return GetFldVal(TherapyPlace, "AlternateScheduling");}
57    TStr GetTherapyPlace_FamilyScheduling(const PXmlTok& TherapyPlace) const {
58      return GetFldVal(TherapyPlace, "FamilyScheduling");}
59    TStr GetTherapyPlace_TherapistType(const PXmlTok& TherapyPlace) const {
60      return GetFldVal(TherapyPlace, "TherapistType");}
61    bool IsActivitiesOk(TStr& MsgStr) const;
62    int GetActivities() const;
63    PXmlTok GetActivity(const int& ActivityN) const;
64    TStr GetActivity_Code(const PXmlTok& Activity) const {
65      return GetFldVal(Activity, "Code");}
66    TStr GetActivity_Type(const PXmlTok& Activity) const {
67      return GetFldVal(Activity, "Type");}
68    TStr GetActivity_Name(const PXmlTok& Activity) const {
69      return GetFldVal(Activity, "Name");}
70    TStr GetActivity_Priority(const PXmlTok& Activity) const {
71      return GetFldVal(Activity, "Priority");}
72    TStr GetActivity_Duration(const PXmlTok& Activity) const {
73      TStr DurationSecsStr=GetFldVal(Activity, "Duration");
74      int DurationSecs=DurationSecsStr.GetInt(0);
75      int DurationMins=DurationSecs/60;
76      return TInt::GetStr(DurationMins);}
77    TStr GetActivity_TPDuration(const PXmlTok& Activity) const {
78      TStr DurationSecsStr=GetFldVal(Activity, "TPDuration");
79      int DurationSecs=DurationSecsStr.GetInt(0);
80      int DurationMins=DurationSecs/60;
81      return TInt::GetStr(DurationMins);}
82    TStr GetActivity_PatientDuration(const PXmlTok& Activity) const {
83      TStr DurationSecsStr=GetFldVal(Activity, "PatientDuration");
84      int DurationSecs=DurationSecsStr.GetInt(0);
85      int DurationMins=DurationSecs/60;
86      return TInt::GetStr(DurationMins);}
87    TStr GetActivity_TherapistDurationPreparation(const PXmlTok& Activity) const {
88      return GetFldVal(Activity, "TherapistDuration|Preparation");}
89    TStr GetActivity_TherapistDurationExecution(const PXmlTok& Activity) const {
90      return GetFldVal(Activity, "TherapistDuration|Execution");}
91    TStr GetActivity_TherapistDurationAdditionalTime(const PXmlTok& Activity) const {
92      return GetFldVal(Activity, "TherapistDuration|AdditionalTime");}
93    TStr GetActivity_Weariness(const PXmlTok& Activity) const {
94      return GetFldVal(Activity, "Weariness");}
95    TStr GetActivity_Dry(const PXmlTok& Activity) const {
96      return GetFldVal(Activity, "Dry");}
97    bool IsAvailableTherapyPlacesOk(TStr& MsgStr) const;
98    int GetAvailableTherapyPlaces() const;
99    PXmlTok GetAvailableTherapyPlace(const int& AvailableTherapyPlaceN) const;
100    TStr GetAvailableTherapyPlace_Code(const PXmlTok& AvailableTherapyPlace) const {
101      return GetFldVal(AvailableTherapyPlace, "Code");}
102    int GetTherapyPlaceSchedules(const PXmlTok& AvailableTherapyPlace) const;
103    PXmlTok GetTherapyPlaceSchedule(
104     const PXmlTok& AvailableTherapyPlace, const int& TherapyPlaceScheduleN) const;
105    TStrV GetTherapyPlaceSchedule_WeekDays(const PXmlTok& TherapyPlaceSchedule) const {
106      return GetFldValV(TherapyPlaceSchedule, "Days", "Day");}
107    TStr GetTherapyPlaceSchedule_OpenFrom(const PXmlTok& TherapyPlaceSchedule) const {
108      return GetFldVal(TherapyPlaceSchedule, "OpenTimes|Open|From");}
109    TStr GetTherapyPlaceSchedule_OpenTill(const PXmlTok& TherapyPlaceSchedule) const {
110      return GetFldVal(TherapyPlaceSchedule, "OpenTimes|Open|Till");}
111    TStr GetTherapyPlaceSchedule_ValidFrom(const PXmlTok& TherapyPlaceSchedule) const {
112      return GetFldDateVal(TherapyPlaceSchedule, "ValidFrom");}
113    TStr GetTherapyPlaceSchedule_ValidTo(const PXmlTok& TherapyPlaceSchedule) const {
114      return GetFldDateVal(TherapyPlaceSchedule, "ValidTo");}
115    bool IsAvailableActivitiesOk(TStr& MsgStr) const;
116    int GetAvailableActivities() const;
117    PXmlTok GetAvailableActivity(const int& AvailableActivityN) const;
118    TStr GetAvailableActivity_Code(const PXmlTok& AvailableActivity) const {
119      return GetFldVal(AvailableActivity, "Code");}
120    int GetActivitySchedules(const PXmlTok& AvailableActivity) const;
121    PXmlTok GetActivitySchedule(
122     const PXmlTok& AvailableActivity, const int& ActivityScheduleN) const;
123    TStrV GetActivitySchedule_WeekDays(const PXmlTok& TherapyPlaceSchedule) const {
124      return GetFldValV(TherapyPlaceSchedule, "Days", "Day");}
125    TStr GetActivitySchedule_StartTime(const PXmlTok& TherapyPlaceSchedule) const {
126      return GetFldVal(TherapyPlaceSchedule, "StartTime");}
127    TStr GetActivitySchedule_EndTime(const PXmlTok& TherapyPlaceSchedule) const {
128      return GetFldVal(TherapyPlaceSchedule, "EndTime");}
129    TStr GetActivitySchedule_TherapyPlaceType(const PXmlTok& TherapyPlaceSchedule) const {
130      return GetFldVal(TherapyPlaceSchedule, "TherapyPlaceType");}
<span onclick='openModal()' class='match'>131    TStr GetActivitySchedule_Gender(const PXmlTok& TherapyPlaceSchedule) const {
132      return GetFldVal(TherapyPlaceSchedule, "Attributes|Gender");}
133    TStr GetActivitySchedule_ValidFrom(const PXmlTok& TherapyPlaceSchedule) const {
134      return GetFldDateVal(TherapyPlaceSchedule, "ValidFrom");}
</span>135    TStr GetActivitySchedule_ValidTo(const PXmlTok& TherapyPlaceSchedule) const {
136      return GetFldDateVal(TherapyPlaceSchedule, "ValidTo");}
137    bool IsScheduledActivitiesOk(TStr& MsgStr) const;
138    int GetScheduledActivities() const;
139    PXmlTok GetScheduledActivity(const int& ScheduledActivityN) const;
140    TStr GetScheduledActivity_Code(const PXmlTok& ScheduledActivity) const {
141      return GetFldVal(ScheduledActivity, "Code");}
142    TStr GetScheduledActivity_PatientATPCode(const PXmlTok& ScheduledActivity) const {
143      return GetFldVal(ScheduledActivity, "ATPCode");}
144    TStr GetScheduledActivity_Patient(const PXmlTok& ScheduledActivity) const {
145      return GetFldVal(ScheduledActivity, "Code");}
146    TStr GetScheduledActivity_TherapistCode(const PXmlTok& ScheduledActivity) const {
147      return GetFldVal(ScheduledActivity, "TherapistCode");}
148    TStr GetScheduledActivity_StartDateTime(const PXmlTok& ScheduledActivity) const {
149      return GetFldDateVal(ScheduledActivity, "StartDateTime");}
150    TStr GetScheduledActivity_RepetitionNumber(const PXmlTok& ScheduledActivity) const {
151      return GetFldVal(ScheduledActivity, "RepetitionNumber");}
152    TStr GetScheduledActivity_StartingPoint(const PXmlTok& ScheduledActivity) const {
153      return GetFldVal(ScheduledActivity, "StartingPoint");}
154    TStr GetScheduledActivity_PatientCode(const PXmlTok& ScheduledActivity) const {
155      return GetFldVal(ScheduledActivity, "PatientCode");}
156    TStr GetScheduledActivity_ActivityCode(const PXmlTok& ScheduledActivity) const {
157      return GetFldVal(ScheduledActivity, "ActivityCode");}
158    TStr GetScheduledActivity_TherapyPlaceCode(const PXmlTok& ScheduledActivity) const {
159      return GetFldVal(ScheduledActivity, "TherapyPlaceCode");}
160    TStr GetScheduledActivity_Date(const PXmlTok& ScheduledActivity) const {
161      return GetFldVal(ScheduledActivity, "Date");}
162    TStr GetScheduledActivity_StartTime(const PXmlTok& ScheduledActivity) const {
163      return GetFldVal(ScheduledActivity, "StartTime");}
164    TStr GetScheduledActivity_PatientDuration(const PXmlTok& ScheduledActivity) const {
165      return GetFldVal(ScheduledActivity, "PatientDuration");}
166    TStr GetScheduledActivity_TPDuration(const PXmlTok& ScheduledActivity) const {
167      return GetFldVal(ScheduledActivity, "TPDuration");}
168    TStr GetScheduledActivity_Accordance(const PXmlTok& ScheduledActivity) const {
169      return GetFldVal(ScheduledActivity, "Accordance");}
170    bool IsHolidaysOk(TStr& MsgStr) const;
171    int GetHolidays() const;
172    PXmlTok GetHoliday(const int& HolidayN) const;
173    TStr GetHoliday_Date(const PXmlTok& Holiday) const {
174      return GetFldDateVal(Holiday, "");}
175    bool IsMakeScheduleOk(TStr& MsgStr) const;
176    TStr GetMakeSchedule_PatientCode() const {
177      return GetFldVal(MakeScheduleXmlDoc, "Operation|Parameter|Patient|Code");}
178    TStr GetMakeSchedule_PatientGender() const {
179      return GetFldVal(MakeScheduleXmlDoc, "Operation|Parameter|Patient|Attributes|Gender");}
180    TStr GetMakeSchedule_PatientFamily() const {
181      return GetFldVal(MakeScheduleXmlDoc, "Operation|Parameter|Patient|Attributes|Family");}
182    TStr GetMakeSchedule_PatientATPCode() const {
183      return GetFldVal(MakeScheduleXmlDoc, "Operation|Parameter|Patient|ATPCode");}
184    int GetMakeSchedule_PlanRequests() const;
185    PXmlTok GetMakeSchedule_PlanRequest(const int& PlanRequestN) const;
186    TStr GetMakeSchedule_PlanRequest_ActivityCode(const PXmlTok& PlanRequest) const {
187      return GetFldVal(PlanRequest, "ActivityCode");}
188    TStr GetMakeSchedule_PlanRequest_Quantity(const PXmlTok& PlanRequest) const {
189      return GetFldVal(PlanRequest, "Quantity");}
190    TStr GetMakeSchedule_PlanRequest_DayQuantity(const PXmlTok& PlanRequest) const {
191      return GetFldVal(PlanRequest, "DayQuantity");}
192    TStr GetMakeSchedule_PlanRequest_Frequency(const PXmlTok& PlanRequest) const {
193      return GetFldVal(PlanRequest, "Frequency");}
194    TStr GetMakeSchedule_PlanRequest_AlternatingActivityCode(const PXmlTok& PlanRequest) const {
195      return GetFldVal(PlanRequest, "AlternatingActivityCode");}
196    TStrV GetMakeSchedule_PlanRequest_ExcludedActivities_ActivityCode(const PXmlTok& PlanRequest) const {
197      return GetFldValV(PlanRequest, "ExcludedActivities", "ExcludedActivity", "ActivityCode");}
198    TStrV GetMakeSchedule_PlanRequest_ExcludedActivities_Time(const PXmlTok& PlanRequest) const {
199      TStrV TimeStrV=GetFldValV(PlanRequest, "ExcludedActivities", "ExcludedActivity", "Time");
200      for (int TimeStrN=0; TimeStrN<TimeStrV.Len(); TimeStrN++){
201        TimeStrV[TimeStrN]=TInt::GetStr(TimeStrV[TimeStrN].GetInt(0)/60);}
202      return TimeStrV;
203    }
204    TStr GetMakeSchedule_PlanRequest_FamilyActivity(const PXmlTok& PlanRequest) const {
205      return GetFldVal(PlanRequest, "FamilyActivity");}
206    TStr GetMakeSchedule_PlanRequest_TreatmentDate(const PXmlTok& PlanRequest) const {
207      return GetFldDateVal(PlanRequest, "TreatmentDate");}
208    TStr GetMakeSchedule_PlanRequest_DesiredStartTime(const PXmlTok& PlanRequest) const {
209      return GetFldVal(PlanRequest, "DesiredStartTime");}
210    TStr GetMakeSchedule_PlanRequest_DesiredFinishTime(const PXmlTok& PlanRequest) const {
211      return GetFldVal(PlanRequest, "DesiredFinishTime");}
212    TStr GetMakeSchedule_PlanRequest_AttrNm(const PXmlTok& PlanRequest) const {
213      TStr FldVal=GetFldVal(PlanRequest, "Attributes|Name");
214      if (FldVal=="Family"){return "DRUZINA";}
215      if (FldVal=="Gender"){return "SPOL_300";}
216      return FldVal.GetUc();}
217    bool IsCheckScheduleOk(TStr& MsgStr) const;
218    TStr GetCheckSchedule_PatientCode() const {
219      return GetFldVal(CheckScheduleXmlDoc, "Operation|Parameter|Patient|Code");}
220    TStr GetCheckSchedule_PatientGender() const {
221      return GetFldVal(CheckScheduleXmlDoc, "Operation|Parameter|Patient|Gender");}
222    TStr GetCheckSchedule_PatientATPCode() const {
223      return GetFldVal(CheckScheduleXmlDoc, "Operation|Parameter|Patient|ATPCode");}
224    TStr GetCheckSchedule_IntRequestedActivityActivityCode() const {
225      return GetFldVal(CheckScheduleXmlDoc, "Operation|Parameter|IntRequestedActivity|ActivityCode");}
226    TStr GetCheckSchedule_IntRequestedActivityDayQuantity() const {
227      return GetFldVal(CheckScheduleXmlDoc, "Operation|Parameter|IntRequestedActivity|DayQuantity");}
228    TStr GetCheckSchedule_IntRequestedActivityTreatmentDate() const {
229      return GetFldDateVal(CheckScheduleXmlDoc, "Operation|Parameter|IntRequestedActivity|TreatmentDate");}
230    TStr GetCheckSchedule_IntRequestedActivityDesiredStartTime() const {
231      return GetFldVal(CheckScheduleXmlDoc, "Operation|Parameter|IntRequestedActivity|DesiredStartTime");}
232    TStr GetCheckSchedule_IntRequestedActivityDesiredFinishTime() const {
233      return GetFldVal(CheckScheduleXmlDoc, "Operation|Parameter|IntRequestedActivity|DesiredFinishTime");}
234    void SaveFldDef(FILE* FId, const TStr& FldNm) const {
235      fprintf(FId, "\"%s\"\r\n", FldNm.CStr());}
236    void SaveFldVal(FILE* FId, const TStr& FldVal, const bool& EolnP=false) const {
237      fprintf(FId, "\"%s\"", FldVal.CStr());
238      if (EolnP){fprintf(FId, "\r\n");} else {fprintf(FId, ",");}}
239    void SaveFldValV(FILE* FId, const TStrV& FldValV, const bool& EolnP=false) const {
240      fprintf(FId, "\"");
241      for (int FldValN=0; FldValN<FldValV.Len(); FldValN++){
242        if (FldValN!=0){fprintf(FId, ",");}
243        fprintf(FId, "%s", FldValV[FldValN].CStr());
244      }
245      fprintf(FId, "\"");
246      if (EolnP){fprintf(FId, "\r\n");} else {fprintf(FId, ",");}}
247    static void SaveCsvToXml(
248     const TStr& DefFNm, const TStr& DatFNm, const TStr& OutXmlFNm);
249    static void SaveCsvToXmlParamOut(
250     const TStr& DefFNm, const TStr& DatFNm, const TStr& OutXmlFNm);
251    void SaveOldCsv() const;
252    void SaveOldCsv_KatalogZdrDelavcev() const;
253    void SaveOldCsv_KatalogAparatov() const;
254    void SaveOldCsv_KatalogAktivnosti() const;
255    void SaveOldCsv_UrnikZaTerapevte() const;
256    void SaveOldCsv_UrnikZaAparate() const;
257    void SaveOldCsv_UrnikAktivnosti() const;
258    void SaveOldCsv_MozniTerminiVDnevu() const;
259    void SaveOldCsv_Prazniki() const;
260    void SaveOldCsv_PredpisaneTerapije() const;
261    void SaveOldCsv_PlaniraneAktivnosti() const;
262    void SaveOldCsv_UrnikXX() const;
263    static PThermalSch DllThermalSch;
264    static void DllNewThermalSch(){
265      DllThermalSch=TThermalSch::New();}
266    static char* DllExeCmFromXmlFile(char* FNm, char* FPath);
267    static char* DllExeCmFromXmlStr(char* XmlStr);
268  };
269  #endif
</code></pre>
        </div>
        <div class="column">
            <h3>snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-btalarms.h</h3>
            <pre><code>1  #ifndef btalarms_h
2  #define btalarms_h
3  #define BIN_02
4  #include "base.h"
5  #include "mine.h"
6  #include "odbc.h"
7  ClassHdTP(TBtaEventBs, PBtaEventBs);
8  ClassTPV(TBtaDevDef, PBtaDevDef, TBtaDevDefV)
9  public:
10    TInt IpNumId;
11    TInt NodeId;
12    TInt ZoneId;
13    TInt LocId;
14    TInt ProjId;
15    TInt TypeId;
16  public:
17    TBtaDevDef():
18      IpNumId(-1), NodeId(-1), ZoneId(-1), LocId(-1), ProjId(-1), TypeId(-1){}
19    TBtaDevDef(const TBtaDevDef& DevDef):
20      IpNumId(DevDef.IpNumId), NodeId(DevDef.NodeId), ZoneId(DevDef.ZoneId),
21      LocId(DevDef.LocId), ProjId(DevDef.ProjId), TypeId(DevDef.TypeId){}
22    static PBtaDevDef New(
23     const int& IpNumId, const int& NodeId, const int& ZoneId,
24     const int& LocId, const int& ProjId, const int& TypeId){
25      PBtaDevDef DevDef=new TBtaDevDef();
26      DevDef->IpNumId=IpNumId; DevDef->NodeId=NodeId; DevDef->ZoneId=ZoneId;
27      DevDef->LocId=LocId; DevDef->ProjId=ProjId; DevDef->TypeId=TypeId;
28      return DevDef;}
29    TBtaDevDef(TSIn& SIn):
30      IpNumId(SIn), NodeId(SIn), ZoneId(SIn),
31      LocId(SIn), ProjId(SIn), TypeId(SIn){}
32    static PBtaDevDef Load(TSIn& SIn){return new TBtaDevDef(SIn);}
33    void Save(TSOut& SOut) const {
34      IpNumId.Save(SOut); NodeId.Save(SOut); ZoneId.Save(SOut);
35      LocId.Save(SOut); ProjId.Save(SOut); TypeId.Save(SOut);}
36    TBtaDevDef& operator=(const TBtaDevDef& DevDef){
37      IpNumId=DevDef.IpNumId; NodeId=DevDef.NodeId; ZoneId=DevDef.ZoneId;
38      LocId=DevDef.LocId; ProjId=DevDef.ProjId; TypeId=DevDef.TypeId;
39      return *this;}
40    bool operator==(const TBtaDevDef& DevDef) const {return IpNumId==DevDef.IpNumId;}
41    bool operator<(const TBtaDevDef& DevDef) const {return IpNumId<DevDef.IpNumId;}
42    static PBtaDevDef LoadBin(const TStr& FNm){
43      TFIn FIn(FNm); return new TBtaDevDef(FIn);}
44    void SaveBin(const TStr& FNm){
45      TFOut FOut(FNm); Save(FOut);}
46  };
47  typedef THash<TStr, TInt, TStrHashF_OldGLib> TStrOldH;
48  ClassTP(TBtaDevDefBs, PBtaDevDefBs)
49  private:
50    TStrOldH IpNumNmH;
51    TStrOldH NodeNmH;
52    TStrOldH ZoneNmH;
53    TStrOldH LocNmH;
54    TStrOldH ProjNmH;
55    TStrOldH TypeNmH;
56    THash<TInt, PBtaDevDef> IpNumToDevDefH;
57    UndefCopyAssign(TBtaDevDefBs);
58  public:
59    TBtaDevDefBs(){}
60    static PBtaDevDefBs New(){
61      return new TBtaDevDefBs();}
62    TBtaDevDefBs(TSIn& SIn):
63      IpNumNmH(SIn), NodeNmH(SIn), ZoneNmH(SIn),
64      LocNmH(SIn), ProjNmH(SIn), TypeNmH(SIn),
65      IpNumToDevDefH(SIn){}
66    static PBtaDevDefBs Load(TSIn& SIn){return new TBtaDevDefBs(SIn);}
67    void Save(TSOut& SOut) const {
68      IpNumNmH.Save(SOut); NodeNmH.Save(SOut); ZoneNmH.Save(SOut);
69      LocNmH.Save(SOut); ProjNmH.Save(SOut); TypeNmH.Save(SOut);
70      IpNumToDevDefH.Save(SOut);}
71    int GetIpNums() const {return IpNumNmH.Len();}
72    int AddIpNumNm(const TStr& IpNumNm){return IpNumNmH.AddKey(IpNumNm);}
73    bool IsIpNumId(const TStr& IpNumNm) const {return IpNumNmH.IsKey(IpNumNm);}
74    int GetIpNumId(const TStr& IpNumNm) const {return IpNumNmH.GetKeyId(IpNumNm);}
75    TStr GetIpNumNm(const int& IpNumId) const {return IpNumNmH.GetKey(IpNumId);}
76    const TStrOldH& GetIpNumNmH() const {return IpNumNmH;}
77    int GetNodes() const {return NodeNmH.Len();}
78    int AddNodeNm(const TStr& NodeNm){return NodeNmH.AddKey(NodeNm);}
79    bool IsNodeId(const TStr& NodeNm) const {return NodeNmH.IsKey(NodeNm);}
80    int GetNodeId(const TStr& NodeNm) const {return NodeNmH.GetKeyId(NodeNm);}
81    TStr GetNodeNm(const int& NodeId) const {return NodeNmH.GetKey(NodeId);}
82    const TStrOldH& GetNodeNmH() const {return NodeNmH;}
83    int GetZones() const {return ZoneNmH.Len();}
84    int AddZoneNm(const TStr& ZoneNm){return ZoneNmH.AddKey(ZoneNm);}
85    bool IsZoneId(const TStr& ZoneNm) const {return ZoneNmH.IsKey(ZoneNm);}
86    int GetZoneId(const TStr& ZoneNm) const {return ZoneNmH.GetKeyId(ZoneNm);}
87    TStr GetZoneNm(const int& ZoneId) const {return ZoneNmH.GetKey(ZoneId);}
88    const TStrOldH& GetZoneNmH() const {return ZoneNmH;}
89    int GetLocs() const {return LocNmH.Len();}
90    int AddLocNm(const TStr& LocNm){return LocNmH.AddKey(LocNm);}
91    bool IsLocId(const TStr& LocNm) const {return LocNmH.IsKey(LocNm);}
92    int GetLocId(const TStr& LocNm) const {return LocNmH.GetKeyId(LocNm);}
93    TStr GetLocNm(const int& LocId) const {return LocNmH.GetKey(LocId);}
94    const TStrOldH& GetLocNmH() const {return LocNmH;}
95    int GetProjs() const {return ProjNmH.Len();}
96    int AddProjNm(const TStr& ProjNm){return ProjNmH.AddKey(ProjNm);}
97    bool IsProjId(const TStr& ProjNm) const {return ProjNmH.IsKey(ProjNm);}
98    int GetProjId(const TStr& ProjNm) const {return ProjNmH.GetKeyId(ProjNm);}
<span onclick='openModal()' class='match'>99    TStr GetProjNm(const int& ProjId) const {return ProjNmH.GetKey(ProjId);}
100    const TStrOldH& GetProjNmH() const {return ProjNmH;}
</span>101    int GetTypes() const {return TypeNmH.Len();}
102    int AddTypeNm(const TStr& TypeNm){return TypeNmH.AddKey(TypeNm);}
103    bool IsTypeId(const TStr& TypeNm) const {return TypeNmH.IsKey(TypeNm);}
104    int GetTypeId(const TStr& TypeNm) const {return TypeNmH.GetKeyId(TypeNm);}
105    TStr GetTypeNm(const int& TypeId) const {return TypeNmH.GetKey(TypeId);}
106    const TStrOldH& GetTypeNmH() const {return TypeNmH;}
107    int GetNms(const TStrOldH& NmH) const {return NmH.Len();}
108    bool IsId(const TStrOldH& NmH, const TStr& Nm) const {return NmH.IsKey(Nm);}
109    int GetId(const TStrOldH& NmH, const TStr& Nm) const {return NmH.GetKeyId(Nm);}
110    TStr GetNm(const TStrOldH& NmH, const int& Id) const {return NmH.GetKey(Id);}
111    void AddDevDef(const PBtaDevDef& DevDef){
112      IpNumToDevDefH.AddDat(DevDef->IpNumId, DevDef);}
113    bool IsDevDef(const PBtaDevDef& DevDef){
114      return IpNumToDevDefH.IsKey(DevDef->IpNumId);}
115    PBtaDevDef GetDevDef(const int& IpNumId){
116      return IpNumToDevDefH.GetDat(IpNumId);}
117    static PBtaDevDefBs LoadBin(const TStr& FNm){
118      TFIn SIn(FNm); return Load(SIn);}
119    void SaveBin(const TStr& FNm){
120      TFOut SOut(FNm); Save(SOut);}
121    static PBtaDevDefBs LoadTxt(const TStr& FNm);
122  };
123  ClassTV(TBtaEventDat, TBtaEventDatV)
124  public:
125      TStrStrH FldNmToValH;
126  public:
127    TBtaEventDat() {}
128    void Load(TSIn& SIn) { FldNmToValH.Load(SIn); }
129    TBtaEventDat(TSIn& SIn) { Load(SIn); }
130    void Save(TSOut& SOut) const { FldNmToValH.Save(SOut); }
131    void Clr() { FldNmToValH.Clr(); }
132    void AddFld(const TStr& FldNm, const TStr& FldVal) { FldNmToValH.AddDat(FldNm, FldVal); }
133    bool IsFld(const TStr& FldNm) const { return FldNmToValH.IsKey(FldNm); }
134    const TStr& GetFld(const TStr& FldNm) const { return FldNmToValH.GetDat(FldNm); }
135    const TStrStrH& GetFldNmToValH() const { return FldNmToValH; }
136    TStr GetNodeId() const;
137    TStr GetComponentId() const;
138    TStr GetFirstTm() const;
139    TStr GetLastTm() const;
140    TStr GetSeverity() const;
141    TStr GetSummary() const;
142    TStr GetIR() const;
143  };
144  ClassTV(TBtaEvent, TBtaEventV)
145  private:
146    TInt IpNumId; 
147    TInt ProjId; 
148    TInt Severity; 
149    TUInt64 FirstTmMSecs; 
150    TUInt64 LastTmMSecs; 
151    TInt CaseId; 
152    TInt BtaEventDatPt; 
153  public:
154    TBtaEvent();
155    TBtaEvent(const int& _IpNumId, const int& _ProjId, const int& _Severity,
156      const uint64& _FirstTmMSecs, const uint64& _LastTmMSecs, 
157      const int& _CaseId, const int& _BtaEventDatPt);
158    TBtaEvent(TSIn& SIn);
159    void Save(TSOut& SOut) const;
160    int GetIpNumId() const { return IpNumId; }
161    int GetProjId() const { return ProjId; }
162    int GetSeverity() const { return Severity; }
163    uint64 GetFirstTmMSecs() const { return FirstTmMSecs; }
164    TTm GetFirstTm() const { return TTm::GetTmFromMSecs(FirstTmMSecs); }
165    uint64 GetLastTmMSecs() const { return LastTmMSecs; }
166    TTm GetLastTm() const { return TTm::GetTmFromMSecs(LastTmMSecs); }
167    int GetCaseId() const { return CaseId; }
168    int GetBlobPt() const { return BtaEventDatPt; }
169    bool operator==(const TBtaEvent& Event) const { Fail; }
170    bool operator<(const TBtaEvent& Event) const { Fail; }
171  };
172  ClassTP(TBtaEventBs, PBtaEventBs)
173  private:
174      PBtaDevDefBs DevDefBs;
175      TBtaEventV EventV;
176      TStrHash<TInt> CaseNmFqH;    
177      POdbcDb OdbcDb;
178      POdbcQuery Query;
179      TStrHash<TVoid> ValidColumnH;
180      TInt LastEventId;
181  private:
182      void LoadValidColumnH();
183      bool IsValidColumn(const TStr& ColumnNm) const { return ValidColumnH.IsKey(ColumnNm); }
184      void LoadLastEventId();
185      int GetNextEventId() { LastEventId++; return LastEventId; }
186      void ParseBtaEventDat(const TBtaEventDat& EventDat, 
187          const int& BtaEventDatPt, TBtaEvent& Event);
188      int StoreEventDat(const TBtaEventDat& EventDat, const TStr& TableNm);
189      bool GetEventDat(const int& EventDatPt, 
190          const TStr& TableNm, TBtaEventDat& EventDat) const;
191      int AddCase(const TStr& CaseNm);
192      int AddEvent(const TBtaEvent& Event) { return EventV.Add(Event); }
193      UndefCopyAssign(TBtaEventBs);
194  public:
195      TBtaEventBs(const PBtaDevDefBs& _DevDefBs, const POdbcDb& _OdbcDb, const int& ExpEvents = 10000000);
196      static PBtaEventBs New(const PBtaDevDefBs& _DevDefBs, const POdbcDb& OdbcDb, 
197          const int& ExpEvents = 10000000) { return new TBtaEventBs(_DevDefBs, OdbcDb, ExpEvents); }
198      TBtaEventBs(TSIn& SIn, const POdbcDb& _OdbcDb);
199      static PBtaEventBs Load(TSIn& SIn, const POdbcDb& OdbcDb) {
200          return new TBtaEventBs(SIn, OdbcDb); }
201      void Save(TSOut& SOut) const;
202      PBtaDevDefBs GetDevDefBs() const {return DevDefBs;}
203      TStr GetCase(const int& CaseId) const { return CaseNmFqH.GetKey(CaseId); }
204      int GetEvents() const { return EventV.Len(); }
205      TBtaEvent& GetEvent(const int& EventN) { return EventV[EventN]; }
206      int GetNextEvent(const int& StartEventN, const int& IpNumId);
207      void GetEventDat(const int& EventDatPt, TBtaEventDat& EventDat) const;    
208      const TBtaEvent& GetFirstEvent() const { return EventV[0]; }
209      const TBtaEvent& GetLastEvent() const { return EventV.Last(); }
210      TTm GetFirstTime() const { return GetFirstEvent().GetFirstTm(); }
211      TTm GetLastTime() const { return GetLastEvent().GetFirstTm(); }
212      void GetMostActiveProjs(const int64& TimeWnd, 
213          const int& EventWnd, const int& MnSeverity, TIntKdV& ProjIdFqV);
214      int AddBtEvent(const TBtaEventDat& EventDat, const bool& BatchP);
215      void AddNewBuffer(TIntV& EventIdV);
216      void SaveDumpBuffer();
217      void RescueDumpBuffer(TIntV& EventIdV);
218      static PBtaEventBs LoadBin(const TStr& FNm, const POdbcDb& OdbcDb) {
219          TFIn FIn(FNm); return TBtaEventBs::Load(FIn, OdbcDb); }
220      void SaveBin(const TStr& FNm) { TFOut FOut(FNm); Save(FOut); }
221      static PBtaEventBs LoadBtTxt(const PBtaDevDefBs& DevDefBs, const TStr& TxtFNm, 
222          const POdbcDb& OdbcDb, const int& ExpEvents, const int& Offset);
223      static PBtaEventBs LoadBankTxt(const PBtaDevDefBs& DevDefBs, 
224          const TStr& TxtFNm, const POdbcDb& OdbcDb, const int& ExpEvents);
225  };
226  ClassTP(TBtaCorrBs, PBtaCorrBs)
227  public:
228      typedef enum { baerOk, baerUnknowIpNum, 
229          baerUnknowProjId, baerLowSeverity } TBtaAddEventRes;
230  private:
231      TInt MnSeverity; 
232      TInt MxEvents; 
233      TInt MxEventWnd; 
234      TUInt64 MxTmMSecWnd; 
235      TInt IpNumIdEvents; 
236      TInt ProjIdEvents; 
237      TIntIntVH IpNumIdToEventVH; 
238      TIntIntVH ProjIdToEventVH; 
239      TInt IpNumIdPrEvents; 
240      TInt ProjIdPrEvents; 
241      TIntPrIntPrVH IpNumIdPrToEventPrVH; 
242      TIntPrIntPrVH ProjIdPrToEventPrVH; 
243      TIntIntHH IpNumIdToCorrIpNumIdFqHH; 
244      TIntIntHH ProjIdToCorrProjIdFqHH; 
245      TIntIntHH CorrIpNumIdToIpNumIdFqHH; 
246      TIntIntHH CorrProjIdToProjIdFqHH; 
247      TIntIntH IpNumIdToProjIdH; 
248      TIntIntVH ProjIdToIpNumIdVH; 
249      TIntIntVH CaseIdToEventIdVH; 
250      TInt NextEventN; 
251      TIntV RecentEventV; 
252  private:
253      int SumFqV(const TIntH& IdFqH) const;
254      int CountEvents(const TIntV& EventV, const int& MxEventId) const;
255      int CountEvents(const TIntPrV& EventPrV, const int& MxEventId) const;
256  public:
257      TBtaCorrBs(const int& _MnSeverity, const int& _MxEvents, 
258          const int& _MxEventWnd, const int64& _MxTmMSecWnd);
259      static PBtaCorrBs New(const int& MnSeverity, const int& MxEvents, 
260          const int& MxEventWnd, const int64& MxTmMSecWnd) {
261              return new TBtaCorrBs(MnSeverity, MxEvents, MxEventWnd, MxTmMSecWnd); }
262      TBtaCorrBs(TSIn& SIn);
263      static PBtaCorrBs Load(TSIn& SIn) { return new TBtaCorrBs(SIn); }
264      void Save(TSOut& SOut) const;
265      void AddEventBs(const PBtaEventBs& BtaEventBs);
266      TBtaAddEventRes AddEvent(const PBtaEventBs& BtaEventBs, const int& EventN);
267      TStr GetErrorMsgStr(const TBtaAddEventRes& ErrorCode) const;
268      const TIntPrIntPrVH& GetIpNumIdPrH() const { return IpNumIdPrToEventPrVH; }
269      const TIntPrIntPrVH& GetProjIdPrH() const { return ProjIdPrToEventPrVH; }
270      bool IsIpNumId(const int& IpNumId) const { 
271          return IpNumIdToCorrIpNumIdFqHH.IsKey(IpNumId); }
272      bool IsCorrIpNumId(const int& CorrIpNumId) const { 
273          return CorrIpNumIdToIpNumIdFqHH.IsKey(CorrIpNumId); }
274      bool IsIpNumIdPrCorr(const int& IpNumId, const int& CorrIpNumId) const {
275          return IpNumIdPrToEventPrVH.IsKey(TIntPr(IpNumId, CorrIpNumId)); }
276      int GetIpNumCorrIpNums(const int& IpNumId) const {
277          return IpNumIdToCorrIpNumIdFqHH.GetDat(IpNumId).Len(); }
278      int GetIpNumCorrIpNumFqs(const int& IpNumId) const {
279          return SumFqV(IpNumIdToCorrIpNumIdFqHH.GetDat(IpNumId)); }
280      int GetCorrIpNumIpNumFqs(const int& CorrIpNumId) const {
281          return SumFqV(CorrIpNumIdToIpNumIdFqHH.GetDat(CorrIpNumId)); }
282      const TIntH& GetIpNumCorrIpNumH(const int& IpNumId) const {
283          return IpNumIdToCorrIpNumIdFqHH.GetDat(IpNumId); }
284      const TIntH& GetCorrIpNumIpNumH(const int& IpNumId) const {
285          return CorrIpNumIdToIpNumIdFqHH.GetDat(IpNumId); }
286      const TIntV& GetIpNumEventV(const int& IpNumId) const {
287          return IpNumIdToEventVH.GetDat(IpNumId); }
288      const TIntPrV& GetIpNumCorrIpNumPrEventV(const int& IpNumId, const int& CorrIpNumId) const {
289          return IpNumIdPrToEventPrVH.GetDat(TIntPr(IpNumId, CorrIpNumId)); }
290      double ProbIpNumId(const int& IpNumId) const;
291      double ProbIpNumIdAndCorrIpNumId(const int& IpNumId, const int& CorrIpNumId) const;
292      double ProbCorrIpNumIdGivenIpNumId(const int& IpNumId, const int& CorrIpNumId) const;
293      double GetIpNumMxCorrIpNumProb(const int& IpNumId) const;
294      double ProbIpNumId(const int& IpNumId, const int& MxEvent) const;
295      double ProbIpNumIdAndCorrIpNumId(const int& IpNumId, 
296          const int& CorrIpNumId, const int& MxEvent) const;
297      double ProbCorrIpNumIdGivenIpNumId(const int& IpNumId, 
298          const int& CorrIpNumId, const int& MxEvent) const;
299      bool IsProjId(const int& ProjId) const { 
300          return ProjIdToCorrProjIdFqHH.IsKey(ProjId); }
301      bool IsCorrProjId(const int& CorrProjId) const { 
302          return CorrProjIdToProjIdFqHH.IsKey(CorrProjId); }
303      int GetProjCorrProjs(const int& ProjId) const { 
304          return ProjIdToCorrProjIdFqHH.GetDat(ProjId).Len(); }
305      int GetProjCorrProjFqs(const int& ProjId) const { 
306          return SumFqV(ProjIdToCorrProjIdFqHH.GetDat(ProjId)); }
307      int GetCorrProjProjFqs(const int& CorrProjId) const {
308          return SumFqV(CorrProjIdToProjIdFqHH.GetDat(CorrProjId)); }
309      const TIntV& GetProjEventV(const int& ProjId) const {
310          return ProjIdToEventVH.GetDat(ProjId); }
311      const TIntH& GetProjCorrProjH(const int& ProjId) const {
312          return ProjIdToCorrProjIdFqHH.GetDat(ProjId); }
313      double GetProjCorrProjProb(const int& ProjId, const int& CorrProjId) const;
314      double GetProjMxCorrProjProb(const int& ProjId) const;
315      bool IsIpNumProj(const int& IpNumId) const {
316          return IpNumIdToProjIdH.IsKey(IpNumId); }
317      int GetIpNumProjId(const int& IpNumId) const {
318          return IpNumIdToProjIdH.GetDat(IpNumId); }
319      bool IsProjIpNums(const int& ProjId) const {
320          return ProjIdToIpNumIdVH.IsKey(ProjId); }
321      const TIntV& GetProjIpNumV(const int& ProjId) const {
322          return ProjIdToIpNumIdVH.GetDat(ProjId); }
323      int GetIpNumIdEvents(const int& IpNumId) const {
324          return IpNumIdToEventVH.GetDat(IpNumId).Len(); }
325      int GetProjIdEvents(const int& ProjId) const {
326          return ProjIdToEventVH.GetDat(ProjId).Len(); }
327      const TIntIntVH& GetCaseIdH() const { return CaseIdToEventIdVH; }
328      void GetIpNumCorrDevices(const int& IpNumId, const bool& SameProjP, 
329          const int& MxItems, TIntFltKdV& CorrIpNumIdProbV) const;
330      void GetProjCorrDevices(const int& ProjId, 
331          const int& MxItems, TIntPrFltKdV& CorrIpNumIdPrProbV) const;
332      void GetNextIpNumIdProb(const int& LastEventN, const int& ProjId,
333          const PBtaEventBs& BtaEventBs, const int& MxEventWnd, 
334          const int64& MxTmMSecWnd, TIntFltH& IpNumIdProbH) const;
335      void GetListOfFutureIpNums(const PBtaEventBs& BtaEventBs, const int& LastEventN, 
336          const int& MxEventWnd, const int64& MxTmMSecWnd, TIntH& FutureIpNumH) const;
337      void GetPredStat(const PBtaEventBs& BtaEventBs, const int& MxEvents, 
338          const int& MxEventWnd, const int64& MxTmMSecWnd, const int& MxEvalWnd) const;
339      void EventRootCauseProb(const PBtaEventBs& BtaEventBs, 
340          const int& EventId, const int& RootCouseEventWnd, 
341          const int64& RootCouseTimeWnd, TIntFltKdV& EventIdScoreV) const;
342      void EventRootCauseText(const PBtaEventBs& BtaEventBs, 
343          const int& EventId,const int& RootCouseEventWnd, 
344          const int64& RootCouseTimeWnd, TIntFltKdV& EventIdScoreV) const;
345      void EventRootCause(const PBtaEventBs& BtaEventBs, const int& EventId, 
346          const int& RootCouseEventWnd, const int64& RootCouseTimeWnd,
347          TIntFltKdV& EventIdScoreV, TStrV& CorrTypeV) const;
348      void GetRootCauseStat(const PBtaEventBs& BtaEventBs, 
349          const int& MxEvents, const int& MnSeverity, const int& RootCouseEventWnd, 
350          const int64& RootCouseTimeWnd, const bool& PropP, 
351          const bool& TextP, TIntV& AllScoresCountV, TIntV& ProbScoresCountV,
352          TIntV& TextScoresCountV, int& AllEvents) const;
353      void GetStat(const PBtaEventBs& BtaEventBs) const;
354      static PBtaCorrBs LoadBin(const TStr& FNm) {
355          TFIn FIn(FNm); return TBtaCorrBs::Load(FIn); }
356      void SaveBin(const TStr& FNm) { TFOut FOut(FNm); Save(FOut); }
357  };
358  ClassTP(TBtaLongProj, PBtaLongProj)
359  private:
360      TIntIntHH DayToIpNumIdFqHH;
361      TIntIntPrVH DayToIpNumIdFqVH;
362      void GetCountV(const TTm& StartDate, const TTm& BreakDate, 
363          const TTm& EndDate, TIntH& IpNumIdH, TFltV& OldV, TFltV& NewV) const;
364  public:
365      TBtaLongProj() { }
366      static PBtaLongProj New() { return new TBtaLongProj(); }    
367      TBtaLongProj(TSIn& SIn) { DayToIpNumIdFqVH.Load(SIn); }
368      static PBtaLongProj Load(TSIn& SIn){ return new TBtaLongProj(SIn); }
369      void Save(TSOut& SOut) const { DayToIpNumIdFqVH.Save(SOut); }
370      void AddEvent(const uint64& DateMSecs, const int& IpNumId);
371      void Def();
372      void Count(const TTm& StartDate, const TTm& BreakDate, 
373          const TTm& EndDate, int& BeforeCount, int& AfterCount) const;
374      double ChiSquare(const TTm& StartDate, const TTm& BreakDate, const TTm& EndDate) const;
375      bool IsTrendPos(const TTm& StartDate, const TTm& BreakDate, const TTm& EndDate) const;
376      void GetIpNumWgtV(const TTm& StartDate, const TTm& BreakDate, 
377          const TTm& EndDate, TIntFltKdV& IpNumIdWgtV) const;
378      static double GetNormFact(const TTm& StartDate, 
379          const TTm& BreakDate, const TTm& EndDate);
380  };
381  ClassTP(TBtaLongBs, PBtaLongBs)
382  private:
383      THash<TInt, PBtaLongProj> ProjIdToProfileH;
384  public:
385      TBtaLongBs(const PBtaEventBs& BtaEventBs, 
386          const PBtaCorrBs& BtaCorrBs, const int& MnSeverity);
387      static PBtaLongBs New(const PBtaEventBs& BtaEventBs, const PBtaCorrBs& BtaCorrBs,
388          const int& MnSeverity) { return new TBtaLongBs(BtaEventBs, BtaCorrBs, MnSeverity); }
389      TBtaLongBs(TSIn& SIn) { printf("Loading trends ... "); ProjIdToProfileH.Load(SIn); printf("(1)\n"); }
390      static PBtaLongBs Load(TSIn& SIn) { return new TBtaLongBs(SIn); }
391      void Save(TSOut& SOut) const { ProjIdToProfileH.Save(SOut); }
392      int FFirstKeyId() const { return ProjIdToProfileH.FFirstKeyId(); }
393      bool FNextKeyId(int& KeyId) const { return ProjIdToProfileH.FNextKeyId(KeyId); }
394      int GetProjId(const int& KeyId) const { return ProjIdToProfileH.GetKey(KeyId); }
395      PBtaLongProj GetLongProj(const int& KeyId) const { 
396          return ProjIdToProfileH[KeyId]; }
397      PBtaLongProj GetLongProjFromId(const int& ProjId) const { 
398          return ProjIdToProfileH.GetDat(ProjId); }
399      static PBtaLongBs LoadBin(const TStr& FNm){
400          TFIn FIn(FNm); return TBtaLongBs::Load(FIn); }
401      void SaveBin(const TStr& FNm){
402          TFOut FOut(FNm); Save(FOut);}
403  };
404  #endif
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-infonet.h</div>
                <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-btalarms.h</div>
                <div class="column column_space"><pre><code>131    TStr GetActivitySchedule_Gender(const PXmlTok& TherapyPlaceSchedule) const {
132      return GetFldVal(TherapyPlaceSchedule, "Attributes|Gender");}
133    TStr GetActivitySchedule_ValidFrom(const PXmlTok& TherapyPlaceSchedule) const {
134      return GetFldDateVal(TherapyPlaceSchedule, "ValidFrom");}
</pre></code></div>
                <div class="column column_space"><pre><code>99    TStr GetProjNm(const int& ProjId) const {return ProjNmH.GetKey(ProjId);}
100    const TStrOldH& GetProjNmH() const {return ProjNmH;}
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    