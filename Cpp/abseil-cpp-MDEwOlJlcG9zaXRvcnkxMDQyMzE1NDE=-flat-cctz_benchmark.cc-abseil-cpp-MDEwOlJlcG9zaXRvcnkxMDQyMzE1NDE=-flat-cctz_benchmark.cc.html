
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Tokens: 64, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>abseil-cpp-MDEwOlJlcG9zaXRvcnkxMDQyMzE1NDE=-flat-cctz_benchmark.cc</h3>
            <pre><code>1  #include <algorithm>
2  #include <cassert>
3  #include <chrono>
4  #include <ctime>
5  #include <random>
6  #include <string>
7  #include <vector>
8  #include "benchmark/benchmark.h"
9  #include "absl/time/internal/cctz/include/cctz/civil_time.h"
10  #include "absl/time/internal/cctz/include/cctz/time_zone.h"
11  #include "time_zone_impl.h"
12  namespace {
13  namespace cctz = absl::time_internal::cctz;
14  void BM_Difference_Days(benchmark::State& state) {
15    const cctz::civil_day c(2014, 8, 22);
16    const cctz::civil_day epoch(1970, 1, 1);
17    while (state.KeepRunning()) {
18      benchmark::DoNotOptimize(c - epoch);
19    }
20  }
21  BENCHMARK(BM_Difference_Days);
22  void BM_Step_Days(benchmark::State& state) {
23    const cctz::civil_day kStart(2014, 8, 22);
24    cctz::civil_day c = kStart;
25    while (state.KeepRunning()) {
26      benchmark::DoNotOptimize(++c);
27    }
28  }
29  BENCHMARK(BM_Step_Days);
30  void BM_GetWeekday(benchmark::State& state) {
31    const cctz::civil_day c(2014, 8, 22);
32    while (state.KeepRunning()) {
33      benchmark::DoNotOptimize(cctz::get_weekday(c));
34    }
35  }
36  BENCHMARK(BM_GetWeekday);
37  void BM_NextWeekday(benchmark::State& state) {
38    const cctz::civil_day kStart(2014, 8, 22);
39    const cctz::civil_day kDays[7] = {
40        kStart + 0, kStart + 1, kStart + 2, kStart + 3,
41        kStart + 4, kStart + 5, kStart + 6,
42    };
43    const cctz::weekday kWeekdays[7] = {
44        cctz::weekday::monday,   cctz::weekday::tuesday, cctz::weekday::wednesday,
45        cctz::weekday::thursday, cctz::weekday::friday,  cctz::weekday::saturday,
46        cctz::weekday::sunday,
47    };
48    while (state.KeepRunningBatch(7 * 7)) {
49      for (const auto from : kDays) {
50        for (const auto to : kWeekdays) {
51          benchmark::DoNotOptimize(cctz::next_weekday(from, to));
52        }
53      }
54    }
55  }
56  BENCHMARK(BM_NextWeekday);
57  void BM_PrevWeekday(benchmark::State& state) {
58    const cctz::civil_day kStart(2014, 8, 22);
59    const cctz::civil_day kDays[7] = {
60        kStart + 0, kStart + 1, kStart + 2, kStart + 3,
61        kStart + 4, kStart + 5, kStart + 6,
62    };
63    const cctz::weekday kWeekdays[7] = {
64        cctz::weekday::monday,   cctz::weekday::tuesday, cctz::weekday::wednesday,
65        cctz::weekday::thursday, cctz::weekday::friday,  cctz::weekday::saturday,
66        cctz::weekday::sunday,
67    };
68    while (state.KeepRunningBatch(7 * 7)) {
69      for (const auto from : kDays) {
70        for (const auto to : kWeekdays) {
71          benchmark::DoNotOptimize(cctz::prev_weekday(from, to));
72        }
73      }
74    }
75  }
76  BENCHMARK(BM_PrevWeekday);
77  const char RFC3339_full[] = "%Y-%m-%d%ET%H:%M:%E*S%Ez";
78  const char RFC3339_sec[] = "%Y-%m-%d%ET%H:%M:%S%Ez";
79  const char RFC1123_full[] = "%a, %d %b %Y %H:%M:%S %z";
80  const char RFC1123_no_wday[] = "%d %b %Y %H:%M:%S %z";
81  const char* const kTimeZoneNames[] = {"Africa/Abidjan",
82                                        "Africa/Accra",
83                                        "Africa/Addis_Ababa",
84                                        "Africa/Algiers",
85                                        "Africa/Asmara",
86                                        "Africa/Asmera",
87                                        "Africa/Bamako",
88                                        "Africa/Bangui",
89                                        "Africa/Banjul",
90                                        "Africa/Bissau",
91                                        "Africa/Blantyre",
92                                        "Africa/Brazzaville",
93                                        "Africa/Bujumbura",
94                                        "Africa/Cairo",
95                                        "Africa/Casablanca",
96                                        "Africa/Ceuta",
97                                        "Africa/Conakry",
98                                        "Africa/Dakar",
99                                        "Africa/Dar_es_Salaam",
100                                        "Africa/Djibouti",
101                                        "Africa/Douala",
102                                        "Africa/El_Aaiun",
103                                        "Africa/Freetown",
104                                        "Africa/Gaborone",
105                                        "Africa/Harare",
106                                        "Africa/Johannesburg",
107                                        "Africa/Juba",
108                                        "Africa/Kampala",
109                                        "Africa/Khartoum",
110                                        "Africa/Kigali",
111                                        "Africa/Kinshasa",
112                                        "Africa/Lagos",
113                                        "Africa/Libreville",
114                                        "Africa/Lome",
115                                        "Africa/Luanda",
116                                        "Africa/Lubumbashi",
117                                        "Africa/Lusaka",
118                                        "Africa/Malabo",
119                                        "Africa/Maputo",
120                                        "Africa/Maseru",
121                                        "Africa/Mbabane",
122                                        "Africa/Mogadishu",
123                                        "Africa/Monrovia",
124                                        "Africa/Nairobi",
125                                        "Africa/Ndjamena",
126                                        "Africa/Niamey",
127                                        "Africa/Nouakchott",
128                                        "Africa/Ouagadougou",
129                                        "Africa/Porto-Novo",
130                                        "Africa/Sao_Tome",
131                                        "Africa/Timbuktu",
132                                        "Africa/Tripoli",
133                                        "Africa/Tunis",
134                                        "Africa/Windhoek",
135                                        "America/Adak",
136                                        "America/Anchorage",
137                                        "America/Anguilla",
138                                        "America/Antigua",
139                                        "America/Araguaina",
140                                        "America/Argentina/Buenos_Aires",
141                                        "America/Argentina/Catamarca",
142                                        "America/Argentina/ComodRivadavia",
143                                        "America/Argentina/Cordoba",
144                                        "America/Argentina/Jujuy",
145                                        "America/Argentina/La_Rioja",
146                                        "America/Argentina/Mendoza",
147                                        "America/Argentina/Rio_Gallegos",
148                                        "America/Argentina/Salta",
149                                        "America/Argentina/San_Juan",
150                                        "America/Argentina/San_Luis",
151                                        "America/Argentina/Tucuman",
152                                        "America/Argentina/Ushuaia",
153                                        "America/Aruba",
154                                        "America/Asuncion",
155                                        "America/Atikokan",
156                                        "America/Atka",
157                                        "America/Bahia",
158                                        "America/Bahia_Banderas",
159                                        "America/Barbados",
160                                        "America/Belem",
161                                        "America/Belize",
162                                        "America/Blanc-Sablon",
163                                        "America/Boa_Vista",
164                                        "America/Bogota",
165                                        "America/Boise",
166                                        "America/Buenos_Aires",
167                                        "America/Cambridge_Bay",
168                                        "America/Campo_Grande",
169                                        "America/Cancun",
170                                        "America/Caracas",
171                                        "America/Catamarca",
172                                        "America/Cayenne",
173                                        "America/Cayman",
174                                        "America/Chicago",
175                                        "America/Chihuahua",
176                                        "America/Coral_Harbour",
177                                        "America/Cordoba",
178                                        "America/Costa_Rica",
179                                        "America/Creston",
180                                        "America/Cuiaba",
181                                        "America/Curacao",
182                                        "America/Danmarkshavn",
183                                        "America/Dawson",
184                                        "America/Dawson_Creek",
185                                        "America/Denver",
186                                        "America/Detroit",
187                                        "America/Dominica",
188                                        "America/Edmonton",
189                                        "America/Eirunepe",
190                                        "America/El_Salvador",
191                                        "America/Ensenada",
192                                        "America/Fort_Nelson",
193                                        "America/Fort_Wayne",
194                                        "America/Fortaleza",
195                                        "America/Glace_Bay",
196                                        "America/Godthab",
197                                        "America/Goose_Bay",
198                                        "America/Grand_Turk",
199                                        "America/Grenada",
200                                        "America/Guadeloupe",
201                                        "America/Guatemala",
202                                        "America/Guayaquil",
203                                        "America/Guyana",
204                                        "America/Halifax",
205                                        "America/Havana",
206                                        "America/Hermosillo",
207                                        "America/Indiana/Indianapolis",
208                                        "America/Indiana/Knox",
209                                        "America/Indiana/Marengo",
210                                        "America/Indiana/Petersburg",
211                                        "America/Indiana/Tell_City",
212                                        "America/Indiana/Vevay",
213                                        "America/Indiana/Vincennes",
214                                        "America/Indiana/Winamac",
215                                        "America/Indianapolis",
216                                        "America/Inuvik",
217                                        "America/Iqaluit",
218                                        "America/Jamaica",
219                                        "America/Jujuy",
220                                        "America/Juneau",
221                                        "America/Kentucky/Louisville",
222                                        "America/Kentucky/Monticello",
223                                        "America/Knox_IN",
224                                        "America/Kralendijk",
225                                        "America/La_Paz",
226                                        "America/Lima",
227                                        "America/Los_Angeles",
228                                        "America/Louisville",
229                                        "America/Lower_Princes",
230                                        "America/Maceio",
231                                        "America/Managua",
232                                        "America/Manaus",
233                                        "America/Marigot",
234                                        "America/Martinique",
235                                        "America/Matamoros",
236                                        "America/Mazatlan",
237                                        "America/Mendoza",
238                                        "America/Menominee",
239                                        "America/Merida",
240                                        "America/Metlakatla",
241                                        "America/Mexico_City",
242                                        "America/Miquelon",
243                                        "America/Moncton",
244                                        "America/Monterrey",
245                                        "America/Montevideo",
246                                        "America/Montreal",
247                                        "America/Montserrat",
248                                        "America/Nassau",
249                                        "America/New_York",
250                                        "America/Nipigon",
251                                        "America/Nome",
252                                        "America/Noronha",
253                                        "America/North_Dakota/Beulah",
254                                        "America/North_Dakota/Center",
255                                        "America/North_Dakota/New_Salem",
256                                        "America/Nuuk",
257                                        "America/Ojinaga",
258                                        "America/Panama",
259                                        "America/Pangnirtung",
260                                        "America/Paramaribo",
261                                        "America/Phoenix",
262                                        "America/Port-au-Prince",
263                                        "America/Port_of_Spain",
264                                        "America/Porto_Acre",
265                                        "America/Porto_Velho",
266                                        "America/Puerto_Rico",
267                                        "America/Punta_Arenas",
268                                        "America/Rainy_River",
269                                        "America/Rankin_Inlet",
270                                        "America/Recife",
271                                        "America/Regina",
272                                        "America/Resolute",
273                                        "America/Rio_Branco",
274                                        "America/Rosario",
275                                        "America/Santa_Isabel",
276                                        "America/Santarem",
277                                        "America/Santiago",
278                                        "America/Santo_Domingo",
279                                        "America/Sao_Paulo",
280                                        "America/Scoresbysund",
281                                        "America/Shiprock",
282                                        "America/Sitka",
283                                        "America/St_Barthelemy",
284                                        "America/St_Johns",
285                                        "America/St_Kitts",
286                                        "America/St_Lucia",
287                                        "America/St_Thomas",
288                                        "America/St_Vincent",
289                                        "America/Swift_Current",
290                                        "America/Tegucigalpa",
291                                        "America/Thule",
292                                        "America/Thunder_Bay",
293                                        "America/Tijuana",
294                                        "America/Toronto",
295                                        "America/Tortola",
296                                        "America/Vancouver",
297                                        "America/Virgin",
298                                        "America/Whitehorse",
299                                        "America/Winnipeg",
300                                        "America/Yakutat",
301                                        "America/Yellowknife",
302                                        "Antarctica/Casey",
303                                        "Antarctica/Davis",
304                                        "Antarctica/DumontDUrville",
305                                        "Antarctica/Macquarie",
306                                        "Antarctica/Mawson",
307                                        "Antarctica/McMurdo",
308                                        "Antarctica/Palmer",
309                                        "Antarctica/Rothera",
310                                        "Antarctica/South_Pole",
311                                        "Antarctica/Syowa",
312                                        "Antarctica/Troll",
313                                        "Antarctica/Vostok",
314                                        "Arctic/Longyearbyen",
315                                        "Asia/Aden",
316                                        "Asia/Almaty",
317                                        "Asia/Amman",
318                                        "Asia/Anadyr",
319                                        "Asia/Aqtau",
320                                        "Asia/Aqtobe",
321                                        "Asia/Ashgabat",
322                                        "Asia/Ashkhabad",
323                                        "Asia/Atyrau",
324                                        "Asia/Baghdad",
325                                        "Asia/Bahrain",
326                                        "Asia/Baku",
327                                        "Asia/Bangkok",
328                                        "Asia/Barnaul",
329                                        "Asia/Beirut",
330                                        "Asia/Bishkek",
331                                        "Asia/Brunei",
332                                        "Asia/Calcutta",
333                                        "Asia/Chita",
334                                        "Asia/Choibalsan",
335                                        "Asia/Chongqing",
336                                        "Asia/Chungking",
337                                        "Asia/Colombo",
338                                        "Asia/Dacca",
339                                        "Asia/Damascus",
340                                        "Asia/Dhaka",
341                                        "Asia/Dili",
342                                        "Asia/Dubai",
343                                        "Asia/Dushanbe",
344                                        "Asia/Famagusta",
345                                        "Asia/Gaza",
346                                        "Asia/Harbin",
347                                        "Asia/Hebron",
348                                        "Asia/Ho_Chi_Minh",
349                                        "Asia/Hong_Kong",
350                                        "Asia/Hovd",
351                                        "Asia/Irkutsk",
352                                        "Asia/Istanbul",
353                                        "Asia/Jakarta",
354                                        "Asia/Jayapura",
355                                        "Asia/Jerusalem",
356                                        "Asia/Kabul",
357                                        "Asia/Kamchatka",
358                                        "Asia/Karachi",
359                                        "Asia/Kashgar",
360                                        "Asia/Kathmandu",
361                                        "Asia/Katmandu",
362                                        "Asia/Khandyga",
363                                        "Asia/Kolkata",
364                                        "Asia/Krasnoyarsk",
365                                        "Asia/Kuala_Lumpur",
366                                        "Asia/Kuching",
367                                        "Asia/Kuwait",
368                                        "Asia/Macao",
369                                        "Asia/Macau",
370                                        "Asia/Magadan",
371                                        "Asia/Makassar",
372                                        "Asia/Manila",
373                                        "Asia/Muscat",
374                                        "Asia/Nicosia",
375                                        "Asia/Novokuznetsk",
376                                        "Asia/Novosibirsk",
377                                        "Asia/Omsk",
378                                        "Asia/Oral",
379                                        "Asia/Phnom_Penh",
380                                        "Asia/Pontianak",
381                                        "Asia/Pyongyang",
382                                        "Asia/Qatar",
383                                        "Asia/Qostanay",
384                                        "Asia/Qyzylorda",
385                                        "Asia/Rangoon",
386                                        "Asia/Riyadh",
387                                        "Asia/Saigon",
388                                        "Asia/Sakhalin",
389                                        "Asia/Samarkand",
390                                        "Asia/Seoul",
391                                        "Asia/Shanghai",
392                                        "Asia/Singapore",
393                                        "Asia/Srednekolymsk",
394                                        "Asia/Taipei",
395                                        "Asia/Tashkent",
396                                        "Asia/Tbilisi",
397                                        "Asia/Tehran",
398                                        "Asia/Tel_Aviv",
399                                        "Asia/Thimbu",
400                                        "Asia/Thimphu",
401                                        "Asia/Tokyo",
402                                        "Asia/Tomsk",
403                                        "Asia/Ujung_Pandang",
404                                        "Asia/Ulaanbaatar",
405                                        "Asia/Ulan_Bator",
406                                        "Asia/Urumqi",
407                                        "Asia/Ust-Nera",
408                                        "Asia/Vientiane",
409                                        "Asia/Vladivostok",
410                                        "Asia/Yakutsk",
411                                        "Asia/Yangon",
412                                        "Asia/Yekaterinburg",
413                                        "Asia/Yerevan",
414                                        "Atlantic/Azores",
415                                        "Atlantic/Bermuda",
416                                        "Atlantic/Canary",
417                                        "Atlantic/Cape_Verde",
418                                        "Atlantic/Faeroe",
419                                        "Atlantic/Faroe",
420                                        "Atlantic/Jan_Mayen",
421                                        "Atlantic/Madeira",
422                                        "Atlantic/Reykjavik",
423                                        "Atlantic/South_Georgia",
424                                        "Atlantic/St_Helena",
425                                        "Atlantic/Stanley",
426                                        "Australia/ACT",
427                                        "Australia/Adelaide",
428                                        "Australia/Brisbane",
429                                        "Australia/Broken_Hill",
430                                        "Australia/Canberra",
431                                        "Australia/Currie",
432                                        "Australia/Darwin",
433                                        "Australia/Eucla",
434                                        "Australia/Hobart",
435                                        "Australia/LHI",
436                                        "Australia/Lindeman",
437                                        "Australia/Lord_Howe",
438                                        "Australia/Melbourne",
439                                        "Australia/NSW",
440                                        "Australia/North",
441                                        "Australia/Perth",
442                                        "Australia/Queensland",
443                                        "Australia/South",
444                                        "Australia/Sydney",
445                                        "Australia/Tasmania",
446                                        "Australia/Victoria",
447                                        "Australia/West",
448                                        "Australia/Yancowinna",
449                                        "Brazil/Acre",
450                                        "Brazil/DeNoronha",
451                                        "Brazil/East",
452                                        "Brazil/West",
453                                        "CET",
454                                        "CST6CDT",
455                                        "Canada/Atlantic",
456                                        "Canada/Central",
457                                        "Canada/Eastern",
458                                        "Canada/Mountain",
459                                        "Canada/Newfoundland",
460                                        "Canada/Pacific",
461                                        "Canada/Saskatchewan",
462                                        "Canada/Yukon",
463                                        "Chile/Continental",
464                                        "Chile/EasterIsland",
465                                        "Cuba",
466                                        "EET",
467                                        "EST",
468                                        "EST5EDT",
469                                        "Egypt",
470                                        "Eire",
471                                        "Etc/GMT",
472                                        "Etc/GMT+0",
473                                        "Etc/GMT+1",
474                                        "Etc/GMT+10",
475                                        "Etc/GMT+11",
476                                        "Etc/GMT+12",
477                                        "Etc/GMT+2",
478                                        "Etc/GMT+3",
479                                        "Etc/GMT+4",
480                                        "Etc/GMT+5",
481                                        "Etc/GMT+6",
482                                        "Etc/GMT+7",
483                                        "Etc/GMT+8",
484                                        "Etc/GMT+9",
485                                        "Etc/GMT-0",
486                                        "Etc/GMT-1",
487                                        "Etc/GMT-10",
488                                        "Etc/GMT-11",
489                                        "Etc/GMT-12",
490                                        "Etc/GMT-13",
491                                        "Etc/GMT-14",
492                                        "Etc/GMT-2",
493                                        "Etc/GMT-3",
494                                        "Etc/GMT-4",
495                                        "Etc/GMT-5",
496                                        "Etc/GMT-6",
497                                        "Etc/GMT-7",
498                                        "Etc/GMT-8",
499                                        "Etc/GMT-9",
500                                        "Etc/GMT0",
501                                        "Etc/Greenwich",
502                                        "Etc/UCT",
503                                        "Etc/UTC",
504                                        "Etc/Universal",
505                                        "Etc/Zulu",
506                                        "Europe/Amsterdam",
507                                        "Europe/Andorra",
508                                        "Europe/Astrakhan",
509                                        "Europe/Athens",
510                                        "Europe/Belfast",
511                                        "Europe/Belgrade",
512                                        "Europe/Berlin",
513                                        "Europe/Bratislava",
514                                        "Europe/Brussels",
515                                        "Europe/Bucharest",
516                                        "Europe/Budapest",
517                                        "Europe/Busingen",
518                                        "Europe/Chisinau",
519                                        "Europe/Copenhagen",
520                                        "Europe/Dublin",
521                                        "Europe/Gibraltar",
522                                        "Europe/Guernsey",
523                                        "Europe/Helsinki",
524                                        "Europe/Isle_of_Man",
525                                        "Europe/Istanbul",
526                                        "Europe/Jersey",
527                                        "Europe/Kaliningrad",
528                                        "Europe/Kiev",
529                                        "Europe/Kirov",
530                                        "Europe/Kyiv",
531                                        "Europe/Lisbon",
532                                        "Europe/Ljubljana",
533                                        "Europe/London",
534                                        "Europe/Luxembourg",
535                                        "Europe/Madrid",
536                                        "Europe/Malta",
537                                        "Europe/Mariehamn",
538                                        "Europe/Minsk",
539                                        "Europe/Monaco",
540                                        "Europe/Moscow",
541                                        "Europe/Nicosia",
542                                        "Europe/Oslo",
543                                        "Europe/Paris",
544                                        "Europe/Podgorica",
545                                        "Europe/Prague",
546                                        "Europe/Riga",
547                                        "Europe/Rome",
548                                        "Europe/Samara",
549                                        "Europe/San_Marino",
550                                        "Europe/Sarajevo",
551                                        "Europe/Saratov",
552                                        "Europe/Simferopol",
553                                        "Europe/Skopje",
554                                        "Europe/Sofia",
555                                        "Europe/Stockholm",
556                                        "Europe/Tallinn",
557                                        "Europe/Tirane",
558                                        "Europe/Tiraspol",
559                                        "Europe/Ulyanovsk",
560                                        "Europe/Uzhgorod",
561                                        "Europe/Vaduz",
562                                        "Europe/Vatican",
563                                        "Europe/Vienna",
564                                        "Europe/Vilnius",
565                                        "Europe/Volgograd",
566                                        "Europe/Warsaw",
567                                        "Europe/Zagreb",
568                                        "Europe/Zaporozhye",
569                                        "Europe/Zurich",
570                                        "Factory",
571                                        "GB",
572                                        "GB-Eire",
573                                        "GMT",
574                                        "GMT+0",
575                                        "GMT-0",
576                                        "GMT0",
577                                        "Greenwich",
578                                        "HST",
579                                        "Hongkong",
580                                        "Iceland",
581                                        "Indian/Antananarivo",
582                                        "Indian/Chagos",
583                                        "Indian/Christmas",
584                                        "Indian/Cocos",
585                                        "Indian/Comoro",
586                                        "Indian/Kerguelen",
587                                        "Indian/Mahe",
588                                        "Indian/Maldives",
589                                        "Indian/Mauritius",
590                                        "Indian/Mayotte",
591                                        "Indian/Reunion",
592                                        "Iran",
593                                        "Israel",
594                                        "Jamaica",
595                                        "Japan",
596                                        "Kwajalein",
597                                        "Libya",
598                                        "MET",
599                                        "MST",
600                                        "MST7MDT",
601                                        "Mexico/BajaNorte",
602                                        "Mexico/BajaSur",
603                                        "Mexico/General",
604                                        "NZ",
605                                        "NZ-CHAT",
606                                        "Navajo",
607                                        "PRC",
608                                        "PST8PDT",
609                                        "Pacific/Apia",
610                                        "Pacific/Auckland",
611                                        "Pacific/Bougainville",
612                                        "Pacific/Chatham",
613                                        "Pacific/Chuuk",
614                                        "Pacific/Easter",
615                                        "Pacific/Efate",
616                                        "Pacific/Enderbury",
617                                        "Pacific/Fakaofo",
618                                        "Pacific/Fiji",
619                                        "Pacific/Funafuti",
620                                        "Pacific/Galapagos",
621                                        "Pacific/Gambier",
622                                        "Pacific/Guadalcanal",
623                                        "Pacific/Guam",
624                                        "Pacific/Honolulu",
625                                        "Pacific/Johnston",
626                                        "Pacific/Kanton",
627                                        "Pacific/Kiritimati",
628                                        "Pacific/Kosrae",
629                                        "Pacific/Kwajalein",
630                                        "Pacific/Majuro",
631                                        "Pacific/Marquesas",
632                                        "Pacific/Midway",
633                                        "Pacific/Nauru",
634                                        "Pacific/Niue",
635                                        "Pacific/Norfolk",
636                                        "Pacific/Noumea",
637                                        "Pacific/Pago_Pago",
638                                        "Pacific/Palau",
639                                        "Pacific/Pitcairn",
640                                        "Pacific/Pohnpei",
641                                        "Pacific/Ponape",
642                                        "Pacific/Port_Moresby",
643                                        "Pacific/Rarotonga",
644                                        "Pacific/Saipan",
645                                        "Pacific/Samoa",
646                                        "Pacific/Tahiti",
647                                        "Pacific/Tarawa",
648                                        "Pacific/Tongatapu",
649                                        "Pacific/Truk",
650                                        "Pacific/Wake",
651                                        "Pacific/Wallis",
652                                        "Pacific/Yap",
653                                        "Poland",
654                                        "Portugal",
655                                        "ROC",
656                                        "ROK",
657                                        "Singapore",
658                                        "Turkey",
659                                        "UCT",
660                                        "US/Alaska",
661                                        "US/Aleutian",
662                                        "US/Arizona",
663                                        "US/Central",
664                                        "US/East-Indiana",
665                                        "US/Eastern",
666                                        "US/Hawaii",
667                                        "US/Indiana-Starke",
668                                        "US/Michigan",
669                                        "US/Mountain",
670                                        "US/Pacific",
671                                        "US/Samoa",
672                                        "UTC",
673                                        "Universal",
674                                        "W-SU",
675                                        "WET",
676                                        "Zulu",
677                                        nullptr};
678  std::vector<std::string> AllTimeZoneNames() {
679    std::vector<std::string> names;
680    for (const char* const* namep = kTimeZoneNames; *namep != nullptr; ++namep) {
681      names.push_back(std::string("file:") + *namep);
682    }
683    assert(!names.empty());
684    std::mt19937 urbg(42);  
685    std::shuffle(names.begin(), names.end(), urbg);
686    return names;
687  }
688  cctz::time_zone TestTimeZone() {
689    cctz::time_zone tz;
690    cctz::load_time_zone("America/Los_Angeles", &tz);
691    return tz;
692  }
693  void BM_Zone_LoadUTCTimeZoneFirst(benchmark::State& state) {
694    cctz::time_zone tz;
695    cctz::load_time_zone("UTC", &tz);  
696    cctz::time_zone::Impl::ClearTimeZoneMapTestOnly();
697    while (state.KeepRunning()) {
698      benchmark::DoNotOptimize(cctz::load_time_zone("UTC", &tz));
699    }
700  }
701  BENCHMARK(BM_Zone_LoadUTCTimeZoneFirst);
702  void BM_Zone_LoadUTCTimeZoneLast(benchmark::State& state) {
703    cctz::time_zone tz;
704    for (const auto& name : AllTimeZoneNames()) {
705      cctz::load_time_zone(name, &tz);  
706    }
707    while (state.KeepRunning()) {
708      benchmark::DoNotOptimize(cctz::load_time_zone("UTC", &tz));
709    }
710  }
711  BENCHMARK(BM_Zone_LoadUTCTimeZoneLast);
712  void BM_Zone_LoadTimeZoneFirst(benchmark::State& state) {
713    cctz::time_zone tz = cctz::utc_time_zone();  
714    const std::string name = "file:America/Los_Angeles";
715    while (state.KeepRunning()) {
716      state.PauseTiming();
717      cctz::time_zone::Impl::ClearTimeZoneMapTestOnly();
718      state.ResumeTiming();
719      benchmark::DoNotOptimize(cctz::load_time_zone(name, &tz));
720    }
721  }
722  BENCHMARK(BM_Zone_LoadTimeZoneFirst);
723  void BM_Zone_LoadTimeZoneCached(benchmark::State& state) {
724    cctz::time_zone tz = cctz::utc_time_zone();  
725    cctz::time_zone::Impl::ClearTimeZoneMapTestOnly();
726    const std::string name = "file:America/Los_Angeles";
727    cctz::load_time_zone(name, &tz);  
728    while (state.KeepRunning()) {
729      benchmark::DoNotOptimize(cctz::load_time_zone(name, &tz));
730    }
731  }
732  BENCHMARK(BM_Zone_LoadTimeZoneCached);
733  void BM_Zone_LoadLocalTimeZoneCached(benchmark::State& state) {
734    cctz::utc_time_zone();  
735    cctz::time_zone::Impl::ClearTimeZoneMapTestOnly();
736    cctz::local_time_zone();  
737    while (state.KeepRunning()) {
738      benchmark::DoNotOptimize(cctz::local_time_zone());
739    }
740  }
741  BENCHMARK(BM_Zone_LoadLocalTimeZoneCached);
742  void BM_Zone_LoadAllTimeZonesFirst(benchmark::State& state) {
743    cctz::time_zone tz;
744    const std::vector<std::string> names = AllTimeZoneNames();
745    for (auto index = names.size(); state.KeepRunning(); ++index) {
746      if (index == names.size()) {
747        index = 0;
748      }
749      if (index == 0) {
750        state.PauseTiming();
751        cctz::time_zone::Impl::ClearTimeZoneMapTestOnly();
752        state.ResumeTiming();
753      }
754      benchmark::DoNotOptimize(cctz::load_time_zone(names[index], &tz));
755    }
756  }
757  BENCHMARK(BM_Zone_LoadAllTimeZonesFirst);
758  void BM_Zone_LoadAllTimeZonesCached(benchmark::State& state) {
759    cctz::time_zone tz;
760    const std::vector<std::string> names = AllTimeZoneNames();
761    for (const auto& name : names) {
762      cctz::load_time_zone(name, &tz);  
763    }
764    for (auto index = names.size(); state.KeepRunning(); ++index) {
765      if (index == names.size()) {
766        index = 0;
767      }
768      benchmark::DoNotOptimize(cctz::load_time_zone(names[index], &tz));
769    }
770  }
771  BENCHMARK(BM_Zone_LoadAllTimeZonesCached);
772  void BM_Zone_TimeZoneEqualityImplicit(benchmark::State& state) {
773    cctz::time_zone tz;  
774    while (state.KeepRunning()) {
775      benchmark::DoNotOptimize(tz == tz);
776    }
777  }
778  BENCHMARK(BM_Zone_TimeZoneEqualityImplicit);
779  void BM_Zone_TimeZoneEqualityExplicit(benchmark::State& state) {
780    cctz::time_zone tz = cctz::utc_time_zone();  
781    while (state.KeepRunning()) {
782      benchmark::DoNotOptimize(tz == tz);
783    }
784  }
785  BENCHMARK(BM_Zone_TimeZoneEqualityExplicit);
786  void BM_Zone_UTCTimeZone(benchmark::State& state) {
787    cctz::time_zone tz;
788    while (state.KeepRunning()) {
789      benchmark::DoNotOptimize(cctz::utc_time_zone());
790    }
791  }
792  BENCHMARK(BM_Zone_UTCTimeZone);
793  void BM_Time_ToCivil_CCTZ(benchmark::State& state) {
794    const cctz::time_zone tz = TestTimeZone();
795    std::chrono::system_clock::time_point tp =
796        std::chrono::system_clock::from_time_t(1384569027);
797    std::chrono::system_clock::time_point tp2 =
798        std::chrono::system_clock::from_time_t(1418962578);
799    while (state.KeepRunning()) {
800      std::swap(tp, tp2);
801      tp += std::chrono::seconds(1);
802      benchmark::DoNotOptimize(cctz::convert(tp, tz));
803    }
804  }
805  BENCHMARK(BM_Time_ToCivil_CCTZ);
806  void BM_Time_ToCivil_Libc(benchmark::State& state) {
807    time_t t = 1384569027;
808    time_t t2 = 1418962578;
809    struct tm tm;
810    while (state.KeepRunning()) {
811      std::swap(t, t2);
<span onclick='openModal()' class='match'>812      t += 1;
813  #if defined(_WIN32) || defined(_WIN64)
814      benchmark::DoNotOptimize(localtime_s(&tm, &t));
815  #else
816      benchmark::DoNotOptimize(localtime_r(&t, &tm));
817  #endif
818    }
819  }
820  BENCHMARK(BM_Time_ToCivil_Libc);
821  void BM_Time_ToCivilUTC_CCTZ(benchmark::State& state) {
822    const cctz::time_zone tz = cctz::utc_time_zone();
</span>823    std::chrono::system_clock::time_point tp =
824        std::chrono::system_clock::from_time_t(1384569027);
825    while (state.KeepRunning()) {
826      tp += std::chrono::seconds(1);
827      benchmark::DoNotOptimize(cctz::convert(tp, tz));
828    }
829  }
830  BENCHMARK(BM_Time_ToCivilUTC_CCTZ);
831  void BM_Time_ToCivilUTC_Libc(benchmark::State& state) {
832    time_t t = 1384569027;
833    struct tm tm;
834    while (state.KeepRunning()) {
835      t += 1;
836  #if defined(_WIN32) || defined(_WIN64)
837      benchmark::DoNotOptimize(gmtime_s(&tm, &t));
838  #else
839      benchmark::DoNotOptimize(gmtime_r(&t, &tm));
840  #endif
841    }
842  }
843  BENCHMARK(BM_Time_ToCivilUTC_Libc);
844  void BM_Time_FromCivil_CCTZ(benchmark::State& state) {
845    const cctz::time_zone tz = TestTimeZone();
846    int i = 0;
847    while (state.KeepRunning()) {
848      if ((i++ & 1) == 0) {
849        benchmark::DoNotOptimize(
850            cctz::convert(cctz::civil_second(2014, 12, 18, 20, 16, 18), tz));
851      } else {
852        benchmark::DoNotOptimize(
853            cctz::convert(cctz::civil_second(2013, 11, 15, 18, 30, 27), tz));
854      }
855    }
856  }
857  BENCHMARK(BM_Time_FromCivil_CCTZ);
858  void BM_Time_FromCivil_Libc(benchmark::State& state) {
859    int i = 0;
860    while (state.KeepRunning()) {
861      struct tm tm;
862      if ((i++ & 1) == 0) {
863        tm.tm_year = 2014 - 1900;
864        tm.tm_mon = 12 - 1;
865        tm.tm_mday = 18;
866        tm.tm_hour = 20;
867        tm.tm_min = 16;
868        tm.tm_sec = 18;
869      } else {
870        tm.tm_year = 2013 - 1900;
871        tm.tm_mon = 11 - 1;
872        tm.tm_mday = 15;
873        tm.tm_hour = 18;
874        tm.tm_min = 30;
875        tm.tm_sec = 27;
876      }
877      tm.tm_isdst = -1;
878      benchmark::DoNotOptimize(mktime(&tm));
879    }
880  }
881  BENCHMARK(BM_Time_FromCivil_Libc);
882  void BM_Time_FromCivilUTC_CCTZ(benchmark::State& state) {
883    const cctz::time_zone tz = cctz::utc_time_zone();
884    while (state.KeepRunning()) {
885      benchmark::DoNotOptimize(
886          cctz::convert(cctz::civil_second(2014, 12, 18, 20, 16, 18), tz));
887    }
888  }
889  BENCHMARK(BM_Time_FromCivilUTC_CCTZ);
890  void BM_Time_FromCivilDay0_CCTZ(benchmark::State& state) {
891    const cctz::time_zone tz = TestTimeZone();
892    int i = 0;
893    while (state.KeepRunning()) {
894      if ((i++ & 1) == 0) {
895        benchmark::DoNotOptimize(
896            cctz::convert(cctz::civil_second(2014, 12, 0, 20, 16, 18), tz));
897      } else {
898        benchmark::DoNotOptimize(
899            cctz::convert(cctz::civil_second(2013, 11, 0, 18, 30, 27), tz));
900      }
901    }
902  }
903  BENCHMARK(BM_Time_FromCivilDay0_CCTZ);
904  void BM_Time_FromCivilDay0_Libc(benchmark::State& state) {
905    int i = 0;
906    while (state.KeepRunning()) {
907      struct tm tm;
908      if ((i++ & 1) == 0) {
909        tm.tm_year = 2014 - 1900;
910        tm.tm_mon = 12 - 1;
911        tm.tm_mday = 0;
912        tm.tm_hour = 20;
913        tm.tm_min = 16;
914        tm.tm_sec = 18;
915      } else {
916        tm.tm_year = 2013 - 1900;
917        tm.tm_mon = 11 - 1;
918        tm.tm_mday = 0;
919        tm.tm_hour = 18;
920        tm.tm_min = 30;
921        tm.tm_sec = 27;
922      }
923      tm.tm_isdst = -1;
924      benchmark::DoNotOptimize(mktime(&tm));
925    }
926  }
927  BENCHMARK(BM_Time_FromCivilDay0_Libc);
928  const char* const kFormats[] = {
929      RFC1123_full,           
930      RFC1123_no_wday,        
931      RFC3339_full,           
932      RFC3339_sec,            
933      "%Y-%m-%d%ET%H:%M:%S",  
934      "%Y-%m-%d",             
935  };
936  const int kNumFormats = sizeof(kFormats) / sizeof(kFormats[0]);
937  void BM_Format_FormatTime(benchmark::State& state) {
938    const std::string fmt = kFormats[state.range(0)];
939    state.SetLabel(fmt);
940    const cctz::time_zone tz = TestTimeZone();
941    const std::chrono::system_clock::time_point tp =
942        cctz::convert(cctz::civil_second(1977, 6, 28, 9, 8, 7), tz) +
943        std::chrono::microseconds(1);
944    while (state.KeepRunning()) {
945      benchmark::DoNotOptimize(cctz::format(fmt, tp, tz));
946    }
947  }
948  BENCHMARK(BM_Format_FormatTime)->DenseRange(0, kNumFormats - 1);
949  void BM_Format_ParseTime(benchmark::State& state) {
950    const std::string fmt = kFormats[state.range(0)];
951    state.SetLabel(fmt);
952    const cctz::time_zone tz = TestTimeZone();
953    std::chrono::system_clock::time_point tp =
954        cctz::convert(cctz::civil_second(1977, 6, 28, 9, 8, 7), tz) +
955        std::chrono::microseconds(1);
956    const std::string when = cctz::format(fmt, tp, tz);
957    while (state.KeepRunning()) {
958      benchmark::DoNotOptimize(cctz::parse(fmt, when, tz, &tp));
959    }
960  }
961  BENCHMARK(BM_Format_ParseTime)->DenseRange(0, kNumFormats - 1);
962  }  
</code></pre>
        </div>
        <div class="column">
            <h3>abseil-cpp-MDEwOlJlcG9zaXRvcnkxMDQyMzE1NDE=-flat-cctz_benchmark.cc</h3>
            <pre><code>1  #include <algorithm>
2  #include <cassert>
3  #include <chrono>
4  #include <ctime>
5  #include <random>
6  #include <string>
7  #include <vector>
8  #include "benchmark/benchmark.h"
9  #include "absl/time/internal/cctz/include/cctz/civil_time.h"
10  #include "absl/time/internal/cctz/include/cctz/time_zone.h"
11  #include "time_zone_impl.h"
12  namespace {
13  namespace cctz = absl::time_internal::cctz;
14  void BM_Difference_Days(benchmark::State& state) {
15    const cctz::civil_day c(2014, 8, 22);
16    const cctz::civil_day epoch(1970, 1, 1);
17    while (state.KeepRunning()) {
18      benchmark::DoNotOptimize(c - epoch);
19    }
20  }
21  BENCHMARK(BM_Difference_Days);
22  void BM_Step_Days(benchmark::State& state) {
23    const cctz::civil_day kStart(2014, 8, 22);
24    cctz::civil_day c = kStart;
25    while (state.KeepRunning()) {
26      benchmark::DoNotOptimize(++c);
27    }
28  }
29  BENCHMARK(BM_Step_Days);
30  void BM_GetWeekday(benchmark::State& state) {
31    const cctz::civil_day c(2014, 8, 22);
32    while (state.KeepRunning()) {
33      benchmark::DoNotOptimize(cctz::get_weekday(c));
34    }
35  }
36  BENCHMARK(BM_GetWeekday);
37  void BM_NextWeekday(benchmark::State& state) {
38    const cctz::civil_day kStart(2014, 8, 22);
39    const cctz::civil_day kDays[7] = {
40        kStart + 0, kStart + 1, kStart + 2, kStart + 3,
41        kStart + 4, kStart + 5, kStart + 6,
42    };
43    const cctz::weekday kWeekdays[7] = {
44        cctz::weekday::monday,   cctz::weekday::tuesday, cctz::weekday::wednesday,
45        cctz::weekday::thursday, cctz::weekday::friday,  cctz::weekday::saturday,
46        cctz::weekday::sunday,
47    };
48    while (state.KeepRunningBatch(7 * 7)) {
49      for (const auto from : kDays) {
50        for (const auto to : kWeekdays) {
51          benchmark::DoNotOptimize(cctz::next_weekday(from, to));
52        }
53      }
54    }
55  }
56  BENCHMARK(BM_NextWeekday);
57  void BM_PrevWeekday(benchmark::State& state) {
58    const cctz::civil_day kStart(2014, 8, 22);
59    const cctz::civil_day kDays[7] = {
60        kStart + 0, kStart + 1, kStart + 2, kStart + 3,
61        kStart + 4, kStart + 5, kStart + 6,
62    };
63    const cctz::weekday kWeekdays[7] = {
64        cctz::weekday::monday,   cctz::weekday::tuesday, cctz::weekday::wednesday,
65        cctz::weekday::thursday, cctz::weekday::friday,  cctz::weekday::saturday,
66        cctz::weekday::sunday,
67    };
68    while (state.KeepRunningBatch(7 * 7)) {
69      for (const auto from : kDays) {
70        for (const auto to : kWeekdays) {
71          benchmark::DoNotOptimize(cctz::prev_weekday(from, to));
72        }
73      }
74    }
75  }
76  BENCHMARK(BM_PrevWeekday);
77  const char RFC3339_full[] = "%Y-%m-%d%ET%H:%M:%E*S%Ez";
78  const char RFC3339_sec[] = "%Y-%m-%d%ET%H:%M:%S%Ez";
79  const char RFC1123_full[] = "%a, %d %b %Y %H:%M:%S %z";
80  const char RFC1123_no_wday[] = "%d %b %Y %H:%M:%S %z";
81  const char* const kTimeZoneNames[] = {"Africa/Abidjan",
82                                        "Africa/Accra",
83                                        "Africa/Addis_Ababa",
84                                        "Africa/Algiers",
85                                        "Africa/Asmara",
86                                        "Africa/Asmera",
87                                        "Africa/Bamako",
88                                        "Africa/Bangui",
89                                        "Africa/Banjul",
90                                        "Africa/Bissau",
91                                        "Africa/Blantyre",
92                                        "Africa/Brazzaville",
93                                        "Africa/Bujumbura",
94                                        "Africa/Cairo",
95                                        "Africa/Casablanca",
96                                        "Africa/Ceuta",
97                                        "Africa/Conakry",
98                                        "Africa/Dakar",
99                                        "Africa/Dar_es_Salaam",
100                                        "Africa/Djibouti",
101                                        "Africa/Douala",
102                                        "Africa/El_Aaiun",
103                                        "Africa/Freetown",
104                                        "Africa/Gaborone",
105                                        "Africa/Harare",
106                                        "Africa/Johannesburg",
107                                        "Africa/Juba",
108                                        "Africa/Kampala",
109                                        "Africa/Khartoum",
110                                        "Africa/Kigali",
111                                        "Africa/Kinshasa",
112                                        "Africa/Lagos",
113                                        "Africa/Libreville",
114                                        "Africa/Lome",
115                                        "Africa/Luanda",
116                                        "Africa/Lubumbashi",
117                                        "Africa/Lusaka",
118                                        "Africa/Malabo",
119                                        "Africa/Maputo",
120                                        "Africa/Maseru",
121                                        "Africa/Mbabane",
122                                        "Africa/Mogadishu",
123                                        "Africa/Monrovia",
124                                        "Africa/Nairobi",
125                                        "Africa/Ndjamena",
126                                        "Africa/Niamey",
127                                        "Africa/Nouakchott",
128                                        "Africa/Ouagadougou",
129                                        "Africa/Porto-Novo",
130                                        "Africa/Sao_Tome",
131                                        "Africa/Timbuktu",
132                                        "Africa/Tripoli",
133                                        "Africa/Tunis",
134                                        "Africa/Windhoek",
135                                        "America/Adak",
136                                        "America/Anchorage",
137                                        "America/Anguilla",
138                                        "America/Antigua",
139                                        "America/Araguaina",
140                                        "America/Argentina/Buenos_Aires",
141                                        "America/Argentina/Catamarca",
142                                        "America/Argentina/ComodRivadavia",
143                                        "America/Argentina/Cordoba",
144                                        "America/Argentina/Jujuy",
145                                        "America/Argentina/La_Rioja",
146                                        "America/Argentina/Mendoza",
147                                        "America/Argentina/Rio_Gallegos",
148                                        "America/Argentina/Salta",
149                                        "America/Argentina/San_Juan",
150                                        "America/Argentina/San_Luis",
151                                        "America/Argentina/Tucuman",
152                                        "America/Argentina/Ushuaia",
153                                        "America/Aruba",
154                                        "America/Asuncion",
155                                        "America/Atikokan",
156                                        "America/Atka",
157                                        "America/Bahia",
158                                        "America/Bahia_Banderas",
159                                        "America/Barbados",
160                                        "America/Belem",
161                                        "America/Belize",
162                                        "America/Blanc-Sablon",
163                                        "America/Boa_Vista",
164                                        "America/Bogota",
165                                        "America/Boise",
166                                        "America/Buenos_Aires",
167                                        "America/Cambridge_Bay",
168                                        "America/Campo_Grande",
169                                        "America/Cancun",
170                                        "America/Caracas",
171                                        "America/Catamarca",
172                                        "America/Cayenne",
173                                        "America/Cayman",
174                                        "America/Chicago",
175                                        "America/Chihuahua",
176                                        "America/Coral_Harbour",
177                                        "America/Cordoba",
178                                        "America/Costa_Rica",
179                                        "America/Creston",
180                                        "America/Cuiaba",
181                                        "America/Curacao",
182                                        "America/Danmarkshavn",
183                                        "America/Dawson",
184                                        "America/Dawson_Creek",
185                                        "America/Denver",
186                                        "America/Detroit",
187                                        "America/Dominica",
188                                        "America/Edmonton",
189                                        "America/Eirunepe",
190                                        "America/El_Salvador",
191                                        "America/Ensenada",
192                                        "America/Fort_Nelson",
193                                        "America/Fort_Wayne",
194                                        "America/Fortaleza",
195                                        "America/Glace_Bay",
196                                        "America/Godthab",
197                                        "America/Goose_Bay",
198                                        "America/Grand_Turk",
199                                        "America/Grenada",
200                                        "America/Guadeloupe",
201                                        "America/Guatemala",
202                                        "America/Guayaquil",
203                                        "America/Guyana",
204                                        "America/Halifax",
205                                        "America/Havana",
206                                        "America/Hermosillo",
207                                        "America/Indiana/Indianapolis",
208                                        "America/Indiana/Knox",
209                                        "America/Indiana/Marengo",
210                                        "America/Indiana/Petersburg",
211                                        "America/Indiana/Tell_City",
212                                        "America/Indiana/Vevay",
213                                        "America/Indiana/Vincennes",
214                                        "America/Indiana/Winamac",
215                                        "America/Indianapolis",
216                                        "America/Inuvik",
217                                        "America/Iqaluit",
218                                        "America/Jamaica",
219                                        "America/Jujuy",
220                                        "America/Juneau",
221                                        "America/Kentucky/Louisville",
222                                        "America/Kentucky/Monticello",
223                                        "America/Knox_IN",
224                                        "America/Kralendijk",
225                                        "America/La_Paz",
226                                        "America/Lima",
227                                        "America/Los_Angeles",
228                                        "America/Louisville",
229                                        "America/Lower_Princes",
230                                        "America/Maceio",
231                                        "America/Managua",
232                                        "America/Manaus",
233                                        "America/Marigot",
234                                        "America/Martinique",
235                                        "America/Matamoros",
236                                        "America/Mazatlan",
237                                        "America/Mendoza",
238                                        "America/Menominee",
239                                        "America/Merida",
240                                        "America/Metlakatla",
241                                        "America/Mexico_City",
242                                        "America/Miquelon",
243                                        "America/Moncton",
244                                        "America/Monterrey",
245                                        "America/Montevideo",
246                                        "America/Montreal",
247                                        "America/Montserrat",
248                                        "America/Nassau",
249                                        "America/New_York",
250                                        "America/Nipigon",
251                                        "America/Nome",
252                                        "America/Noronha",
253                                        "America/North_Dakota/Beulah",
254                                        "America/North_Dakota/Center",
255                                        "America/North_Dakota/New_Salem",
256                                        "America/Nuuk",
257                                        "America/Ojinaga",
258                                        "America/Panama",
259                                        "America/Pangnirtung",
260                                        "America/Paramaribo",
261                                        "America/Phoenix",
262                                        "America/Port-au-Prince",
263                                        "America/Port_of_Spain",
264                                        "America/Porto_Acre",
265                                        "America/Porto_Velho",
266                                        "America/Puerto_Rico",
267                                        "America/Punta_Arenas",
268                                        "America/Rainy_River",
269                                        "America/Rankin_Inlet",
270                                        "America/Recife",
271                                        "America/Regina",
272                                        "America/Resolute",
273                                        "America/Rio_Branco",
274                                        "America/Rosario",
275                                        "America/Santa_Isabel",
276                                        "America/Santarem",
277                                        "America/Santiago",
278                                        "America/Santo_Domingo",
279                                        "America/Sao_Paulo",
280                                        "America/Scoresbysund",
281                                        "America/Shiprock",
282                                        "America/Sitka",
283                                        "America/St_Barthelemy",
284                                        "America/St_Johns",
285                                        "America/St_Kitts",
286                                        "America/St_Lucia",
287                                        "America/St_Thomas",
288                                        "America/St_Vincent",
289                                        "America/Swift_Current",
290                                        "America/Tegucigalpa",
291                                        "America/Thule",
292                                        "America/Thunder_Bay",
293                                        "America/Tijuana",
294                                        "America/Toronto",
295                                        "America/Tortola",
296                                        "America/Vancouver",
297                                        "America/Virgin",
298                                        "America/Whitehorse",
299                                        "America/Winnipeg",
300                                        "America/Yakutat",
301                                        "America/Yellowknife",
302                                        "Antarctica/Casey",
303                                        "Antarctica/Davis",
304                                        "Antarctica/DumontDUrville",
305                                        "Antarctica/Macquarie",
306                                        "Antarctica/Mawson",
307                                        "Antarctica/McMurdo",
308                                        "Antarctica/Palmer",
309                                        "Antarctica/Rothera",
310                                        "Antarctica/South_Pole",
311                                        "Antarctica/Syowa",
312                                        "Antarctica/Troll",
313                                        "Antarctica/Vostok",
314                                        "Arctic/Longyearbyen",
315                                        "Asia/Aden",
316                                        "Asia/Almaty",
317                                        "Asia/Amman",
318                                        "Asia/Anadyr",
319                                        "Asia/Aqtau",
320                                        "Asia/Aqtobe",
321                                        "Asia/Ashgabat",
322                                        "Asia/Ashkhabad",
323                                        "Asia/Atyrau",
324                                        "Asia/Baghdad",
325                                        "Asia/Bahrain",
326                                        "Asia/Baku",
327                                        "Asia/Bangkok",
328                                        "Asia/Barnaul",
329                                        "Asia/Beirut",
330                                        "Asia/Bishkek",
331                                        "Asia/Brunei",
332                                        "Asia/Calcutta",
333                                        "Asia/Chita",
334                                        "Asia/Choibalsan",
335                                        "Asia/Chongqing",
336                                        "Asia/Chungking",
337                                        "Asia/Colombo",
338                                        "Asia/Dacca",
339                                        "Asia/Damascus",
340                                        "Asia/Dhaka",
341                                        "Asia/Dili",
342                                        "Asia/Dubai",
343                                        "Asia/Dushanbe",
344                                        "Asia/Famagusta",
345                                        "Asia/Gaza",
346                                        "Asia/Harbin",
347                                        "Asia/Hebron",
348                                        "Asia/Ho_Chi_Minh",
349                                        "Asia/Hong_Kong",
350                                        "Asia/Hovd",
351                                        "Asia/Irkutsk",
352                                        "Asia/Istanbul",
353                                        "Asia/Jakarta",
354                                        "Asia/Jayapura",
355                                        "Asia/Jerusalem",
356                                        "Asia/Kabul",
357                                        "Asia/Kamchatka",
358                                        "Asia/Karachi",
359                                        "Asia/Kashgar",
360                                        "Asia/Kathmandu",
361                                        "Asia/Katmandu",
362                                        "Asia/Khandyga",
363                                        "Asia/Kolkata",
364                                        "Asia/Krasnoyarsk",
365                                        "Asia/Kuala_Lumpur",
366                                        "Asia/Kuching",
367                                        "Asia/Kuwait",
368                                        "Asia/Macao",
369                                        "Asia/Macau",
370                                        "Asia/Magadan",
371                                        "Asia/Makassar",
372                                        "Asia/Manila",
373                                        "Asia/Muscat",
374                                        "Asia/Nicosia",
375                                        "Asia/Novokuznetsk",
376                                        "Asia/Novosibirsk",
377                                        "Asia/Omsk",
378                                        "Asia/Oral",
379                                        "Asia/Phnom_Penh",
380                                        "Asia/Pontianak",
381                                        "Asia/Pyongyang",
382                                        "Asia/Qatar",
383                                        "Asia/Qostanay",
384                                        "Asia/Qyzylorda",
385                                        "Asia/Rangoon",
386                                        "Asia/Riyadh",
387                                        "Asia/Saigon",
388                                        "Asia/Sakhalin",
389                                        "Asia/Samarkand",
390                                        "Asia/Seoul",
391                                        "Asia/Shanghai",
392                                        "Asia/Singapore",
393                                        "Asia/Srednekolymsk",
394                                        "Asia/Taipei",
395                                        "Asia/Tashkent",
396                                        "Asia/Tbilisi",
397                                        "Asia/Tehran",
398                                        "Asia/Tel_Aviv",
399                                        "Asia/Thimbu",
400                                        "Asia/Thimphu",
401                                        "Asia/Tokyo",
402                                        "Asia/Tomsk",
403                                        "Asia/Ujung_Pandang",
404                                        "Asia/Ulaanbaatar",
405                                        "Asia/Ulan_Bator",
406                                        "Asia/Urumqi",
407                                        "Asia/Ust-Nera",
408                                        "Asia/Vientiane",
409                                        "Asia/Vladivostok",
410                                        "Asia/Yakutsk",
411                                        "Asia/Yangon",
412                                        "Asia/Yekaterinburg",
413                                        "Asia/Yerevan",
414                                        "Atlantic/Azores",
415                                        "Atlantic/Bermuda",
416                                        "Atlantic/Canary",
417                                        "Atlantic/Cape_Verde",
418                                        "Atlantic/Faeroe",
419                                        "Atlantic/Faroe",
420                                        "Atlantic/Jan_Mayen",
421                                        "Atlantic/Madeira",
422                                        "Atlantic/Reykjavik",
423                                        "Atlantic/South_Georgia",
424                                        "Atlantic/St_Helena",
425                                        "Atlantic/Stanley",
426                                        "Australia/ACT",
427                                        "Australia/Adelaide",
428                                        "Australia/Brisbane",
429                                        "Australia/Broken_Hill",
430                                        "Australia/Canberra",
431                                        "Australia/Currie",
432                                        "Australia/Darwin",
433                                        "Australia/Eucla",
434                                        "Australia/Hobart",
435                                        "Australia/LHI",
436                                        "Australia/Lindeman",
437                                        "Australia/Lord_Howe",
438                                        "Australia/Melbourne",
439                                        "Australia/NSW",
440                                        "Australia/North",
441                                        "Australia/Perth",
442                                        "Australia/Queensland",
443                                        "Australia/South",
444                                        "Australia/Sydney",
445                                        "Australia/Tasmania",
446                                        "Australia/Victoria",
447                                        "Australia/West",
448                                        "Australia/Yancowinna",
449                                        "Brazil/Acre",
450                                        "Brazil/DeNoronha",
451                                        "Brazil/East",
452                                        "Brazil/West",
453                                        "CET",
454                                        "CST6CDT",
455                                        "Canada/Atlantic",
456                                        "Canada/Central",
457                                        "Canada/Eastern",
458                                        "Canada/Mountain",
459                                        "Canada/Newfoundland",
460                                        "Canada/Pacific",
461                                        "Canada/Saskatchewan",
462                                        "Canada/Yukon",
463                                        "Chile/Continental",
464                                        "Chile/EasterIsland",
465                                        "Cuba",
466                                        "EET",
467                                        "EST",
468                                        "EST5EDT",
469                                        "Egypt",
470                                        "Eire",
471                                        "Etc/GMT",
472                                        "Etc/GMT+0",
473                                        "Etc/GMT+1",
474                                        "Etc/GMT+10",
475                                        "Etc/GMT+11",
476                                        "Etc/GMT+12",
477                                        "Etc/GMT+2",
478                                        "Etc/GMT+3",
479                                        "Etc/GMT+4",
480                                        "Etc/GMT+5",
481                                        "Etc/GMT+6",
482                                        "Etc/GMT+7",
483                                        "Etc/GMT+8",
484                                        "Etc/GMT+9",
485                                        "Etc/GMT-0",
486                                        "Etc/GMT-1",
487                                        "Etc/GMT-10",
488                                        "Etc/GMT-11",
489                                        "Etc/GMT-12",
490                                        "Etc/GMT-13",
491                                        "Etc/GMT-14",
492                                        "Etc/GMT-2",
493                                        "Etc/GMT-3",
494                                        "Etc/GMT-4",
495                                        "Etc/GMT-5",
496                                        "Etc/GMT-6",
497                                        "Etc/GMT-7",
498                                        "Etc/GMT-8",
499                                        "Etc/GMT-9",
500                                        "Etc/GMT0",
501                                        "Etc/Greenwich",
502                                        "Etc/UCT",
503                                        "Etc/UTC",
504                                        "Etc/Universal",
505                                        "Etc/Zulu",
506                                        "Europe/Amsterdam",
507                                        "Europe/Andorra",
508                                        "Europe/Astrakhan",
509                                        "Europe/Athens",
510                                        "Europe/Belfast",
511                                        "Europe/Belgrade",
512                                        "Europe/Berlin",
513                                        "Europe/Bratislava",
514                                        "Europe/Brussels",
515                                        "Europe/Bucharest",
516                                        "Europe/Budapest",
517                                        "Europe/Busingen",
518                                        "Europe/Chisinau",
519                                        "Europe/Copenhagen",
520                                        "Europe/Dublin",
521                                        "Europe/Gibraltar",
522                                        "Europe/Guernsey",
523                                        "Europe/Helsinki",
524                                        "Europe/Isle_of_Man",
525                                        "Europe/Istanbul",
526                                        "Europe/Jersey",
527                                        "Europe/Kaliningrad",
528                                        "Europe/Kiev",
529                                        "Europe/Kirov",
530                                        "Europe/Kyiv",
531                                        "Europe/Lisbon",
532                                        "Europe/Ljubljana",
533                                        "Europe/London",
534                                        "Europe/Luxembourg",
535                                        "Europe/Madrid",
536                                        "Europe/Malta",
537                                        "Europe/Mariehamn",
538                                        "Europe/Minsk",
539                                        "Europe/Monaco",
540                                        "Europe/Moscow",
541                                        "Europe/Nicosia",
542                                        "Europe/Oslo",
543                                        "Europe/Paris",
544                                        "Europe/Podgorica",
545                                        "Europe/Prague",
546                                        "Europe/Riga",
547                                        "Europe/Rome",
548                                        "Europe/Samara",
549                                        "Europe/San_Marino",
550                                        "Europe/Sarajevo",
551                                        "Europe/Saratov",
552                                        "Europe/Simferopol",
553                                        "Europe/Skopje",
554                                        "Europe/Sofia",
555                                        "Europe/Stockholm",
556                                        "Europe/Tallinn",
557                                        "Europe/Tirane",
558                                        "Europe/Tiraspol",
559                                        "Europe/Ulyanovsk",
560                                        "Europe/Uzhgorod",
561                                        "Europe/Vaduz",
562                                        "Europe/Vatican",
563                                        "Europe/Vienna",
564                                        "Europe/Vilnius",
565                                        "Europe/Volgograd",
566                                        "Europe/Warsaw",
567                                        "Europe/Zagreb",
568                                        "Europe/Zaporozhye",
569                                        "Europe/Zurich",
570                                        "Factory",
571                                        "GB",
572                                        "GB-Eire",
573                                        "GMT",
574                                        "GMT+0",
575                                        "GMT-0",
576                                        "GMT0",
577                                        "Greenwich",
578                                        "HST",
579                                        "Hongkong",
580                                        "Iceland",
581                                        "Indian/Antananarivo",
582                                        "Indian/Chagos",
583                                        "Indian/Christmas",
584                                        "Indian/Cocos",
585                                        "Indian/Comoro",
586                                        "Indian/Kerguelen",
587                                        "Indian/Mahe",
588                                        "Indian/Maldives",
589                                        "Indian/Mauritius",
590                                        "Indian/Mayotte",
591                                        "Indian/Reunion",
592                                        "Iran",
593                                        "Israel",
594                                        "Jamaica",
595                                        "Japan",
596                                        "Kwajalein",
597                                        "Libya",
598                                        "MET",
599                                        "MST",
600                                        "MST7MDT",
601                                        "Mexico/BajaNorte",
602                                        "Mexico/BajaSur",
603                                        "Mexico/General",
604                                        "NZ",
605                                        "NZ-CHAT",
606                                        "Navajo",
607                                        "PRC",
608                                        "PST8PDT",
609                                        "Pacific/Apia",
610                                        "Pacific/Auckland",
611                                        "Pacific/Bougainville",
612                                        "Pacific/Chatham",
613                                        "Pacific/Chuuk",
614                                        "Pacific/Easter",
615                                        "Pacific/Efate",
616                                        "Pacific/Enderbury",
617                                        "Pacific/Fakaofo",
618                                        "Pacific/Fiji",
619                                        "Pacific/Funafuti",
620                                        "Pacific/Galapagos",
621                                        "Pacific/Gambier",
622                                        "Pacific/Guadalcanal",
623                                        "Pacific/Guam",
624                                        "Pacific/Honolulu",
625                                        "Pacific/Johnston",
626                                        "Pacific/Kanton",
627                                        "Pacific/Kiritimati",
628                                        "Pacific/Kosrae",
629                                        "Pacific/Kwajalein",
630                                        "Pacific/Majuro",
631                                        "Pacific/Marquesas",
632                                        "Pacific/Midway",
633                                        "Pacific/Nauru",
634                                        "Pacific/Niue",
635                                        "Pacific/Norfolk",
636                                        "Pacific/Noumea",
637                                        "Pacific/Pago_Pago",
638                                        "Pacific/Palau",
639                                        "Pacific/Pitcairn",
640                                        "Pacific/Pohnpei",
641                                        "Pacific/Ponape",
642                                        "Pacific/Port_Moresby",
643                                        "Pacific/Rarotonga",
644                                        "Pacific/Saipan",
645                                        "Pacific/Samoa",
646                                        "Pacific/Tahiti",
647                                        "Pacific/Tarawa",
648                                        "Pacific/Tongatapu",
649                                        "Pacific/Truk",
650                                        "Pacific/Wake",
651                                        "Pacific/Wallis",
652                                        "Pacific/Yap",
653                                        "Poland",
654                                        "Portugal",
655                                        "ROC",
656                                        "ROK",
657                                        "Singapore",
658                                        "Turkey",
659                                        "UCT",
660                                        "US/Alaska",
661                                        "US/Aleutian",
662                                        "US/Arizona",
663                                        "US/Central",
664                                        "US/East-Indiana",
665                                        "US/Eastern",
666                                        "US/Hawaii",
667                                        "US/Indiana-Starke",
668                                        "US/Michigan",
669                                        "US/Mountain",
670                                        "US/Pacific",
671                                        "US/Samoa",
672                                        "UTC",
673                                        "Universal",
674                                        "W-SU",
675                                        "WET",
676                                        "Zulu",
677                                        nullptr};
678  std::vector<std::string> AllTimeZoneNames() {
679    std::vector<std::string> names;
680    for (const char* const* namep = kTimeZoneNames; *namep != nullptr; ++namep) {
681      names.push_back(std::string("file:") + *namep);
682    }
683    assert(!names.empty());
684    std::mt19937 urbg(42);  
685    std::shuffle(names.begin(), names.end(), urbg);
686    return names;
687  }
688  cctz::time_zone TestTimeZone() {
689    cctz::time_zone tz;
690    cctz::load_time_zone("America/Los_Angeles", &tz);
691    return tz;
692  }
693  void BM_Zone_LoadUTCTimeZoneFirst(benchmark::State& state) {
694    cctz::time_zone tz;
695    cctz::load_time_zone("UTC", &tz);  
696    cctz::time_zone::Impl::ClearTimeZoneMapTestOnly();
697    while (state.KeepRunning()) {
698      benchmark::DoNotOptimize(cctz::load_time_zone("UTC", &tz));
699    }
700  }
701  BENCHMARK(BM_Zone_LoadUTCTimeZoneFirst);
702  void BM_Zone_LoadUTCTimeZoneLast(benchmark::State& state) {
703    cctz::time_zone tz;
704    for (const auto& name : AllTimeZoneNames()) {
705      cctz::load_time_zone(name, &tz);  
706    }
707    while (state.KeepRunning()) {
708      benchmark::DoNotOptimize(cctz::load_time_zone("UTC", &tz));
709    }
710  }
711  BENCHMARK(BM_Zone_LoadUTCTimeZoneLast);
712  void BM_Zone_LoadTimeZoneFirst(benchmark::State& state) {
713    cctz::time_zone tz = cctz::utc_time_zone();  
714    const std::string name = "file:America/Los_Angeles";
715    while (state.KeepRunning()) {
716      state.PauseTiming();
717      cctz::time_zone::Impl::ClearTimeZoneMapTestOnly();
718      state.ResumeTiming();
719      benchmark::DoNotOptimize(cctz::load_time_zone(name, &tz));
720    }
721  }
722  BENCHMARK(BM_Zone_LoadTimeZoneFirst);
723  void BM_Zone_LoadTimeZoneCached(benchmark::State& state) {
724    cctz::time_zone tz = cctz::utc_time_zone();  
725    cctz::time_zone::Impl::ClearTimeZoneMapTestOnly();
726    const std::string name = "file:America/Los_Angeles";
727    cctz::load_time_zone(name, &tz);  
728    while (state.KeepRunning()) {
729      benchmark::DoNotOptimize(cctz::load_time_zone(name, &tz));
730    }
731  }
732  BENCHMARK(BM_Zone_LoadTimeZoneCached);
733  void BM_Zone_LoadLocalTimeZoneCached(benchmark::State& state) {
734    cctz::utc_time_zone();  
735    cctz::time_zone::Impl::ClearTimeZoneMapTestOnly();
736    cctz::local_time_zone();  
737    while (state.KeepRunning()) {
738      benchmark::DoNotOptimize(cctz::local_time_zone());
739    }
740  }
741  BENCHMARK(BM_Zone_LoadLocalTimeZoneCached);
742  void BM_Zone_LoadAllTimeZonesFirst(benchmark::State& state) {
743    cctz::time_zone tz;
744    const std::vector<std::string> names = AllTimeZoneNames();
745    for (auto index = names.size(); state.KeepRunning(); ++index) {
746      if (index == names.size()) {
747        index = 0;
748      }
749      if (index == 0) {
750        state.PauseTiming();
751        cctz::time_zone::Impl::ClearTimeZoneMapTestOnly();
752        state.ResumeTiming();
753      }
754      benchmark::DoNotOptimize(cctz::load_time_zone(names[index], &tz));
755    }
756  }
757  BENCHMARK(BM_Zone_LoadAllTimeZonesFirst);
758  void BM_Zone_LoadAllTimeZonesCached(benchmark::State& state) {
759    cctz::time_zone tz;
760    const std::vector<std::string> names = AllTimeZoneNames();
761    for (const auto& name : names) {
762      cctz::load_time_zone(name, &tz);  
763    }
764    for (auto index = names.size(); state.KeepRunning(); ++index) {
765      if (index == names.size()) {
766        index = 0;
767      }
768      benchmark::DoNotOptimize(cctz::load_time_zone(names[index], &tz));
769    }
770  }
771  BENCHMARK(BM_Zone_LoadAllTimeZonesCached);
772  void BM_Zone_TimeZoneEqualityImplicit(benchmark::State& state) {
773    cctz::time_zone tz;  
774    while (state.KeepRunning()) {
775      benchmark::DoNotOptimize(tz == tz);
776    }
777  }
778  BENCHMARK(BM_Zone_TimeZoneEqualityImplicit);
779  void BM_Zone_TimeZoneEqualityExplicit(benchmark::State& state) {
780    cctz::time_zone tz = cctz::utc_time_zone();  
781    while (state.KeepRunning()) {
782      benchmark::DoNotOptimize(tz == tz);
783    }
784  }
785  BENCHMARK(BM_Zone_TimeZoneEqualityExplicit);
786  void BM_Zone_UTCTimeZone(benchmark::State& state) {
787    cctz::time_zone tz;
788    while (state.KeepRunning()) {
789      benchmark::DoNotOptimize(cctz::utc_time_zone());
790    }
791  }
792  BENCHMARK(BM_Zone_UTCTimeZone);
793  void BM_Time_ToCivil_CCTZ(benchmark::State& state) {
794    const cctz::time_zone tz = TestTimeZone();
795    std::chrono::system_clock::time_point tp =
796        std::chrono::system_clock::from_time_t(1384569027);
797    std::chrono::system_clock::time_point tp2 =
798        std::chrono::system_clock::from_time_t(1418962578);
799    while (state.KeepRunning()) {
800      std::swap(tp, tp2);
801      tp += std::chrono::seconds(1);
802      benchmark::DoNotOptimize(cctz::convert(tp, tz));
803    }
804  }
805  BENCHMARK(BM_Time_ToCivil_CCTZ);
806  void BM_Time_ToCivil_Libc(benchmark::State& state) {
807    time_t t = 1384569027;
808    time_t t2 = 1418962578;
809    struct tm tm;
810    while (state.KeepRunning()) {
811      std::swap(t, t2);
<span onclick='openModal()' class='match'>812      t += 1;
813  #if defined(_WIN32) || defined(_WIN64)
814      benchmark::DoNotOptimize(localtime_s(&tm, &t));
815  #else
816      benchmark::DoNotOptimize(localtime_r(&t, &tm));
817  #endif
818    }
819  }
820  BENCHMARK(BM_Time_ToCivil_Libc);
821  void BM_Time_ToCivilUTC_CCTZ(benchmark::State& state) {
822    const cctz::time_zone tz = cctz::utc_time_zone();
</span>823    std::chrono::system_clock::time_point tp =
824        std::chrono::system_clock::from_time_t(1384569027);
825    while (state.KeepRunning()) {
826      tp += std::chrono::seconds(1);
827      benchmark::DoNotOptimize(cctz::convert(tp, tz));
828    }
829  }
830  BENCHMARK(BM_Time_ToCivilUTC_CCTZ);
831  void BM_Time_ToCivilUTC_Libc(benchmark::State& state) {
832    time_t t = 1384569027;
833    struct tm tm;
834    while (state.KeepRunning()) {
835      t += 1;
836  #if defined(_WIN32) || defined(_WIN64)
837      benchmark::DoNotOptimize(gmtime_s(&tm, &t));
838  #else
839      benchmark::DoNotOptimize(gmtime_r(&t, &tm));
840  #endif
841    }
842  }
843  BENCHMARK(BM_Time_ToCivilUTC_Libc);
844  void BM_Time_FromCivil_CCTZ(benchmark::State& state) {
845    const cctz::time_zone tz = TestTimeZone();
846    int i = 0;
847    while (state.KeepRunning()) {
848      if ((i++ & 1) == 0) {
849        benchmark::DoNotOptimize(
850            cctz::convert(cctz::civil_second(2014, 12, 18, 20, 16, 18), tz));
851      } else {
852        benchmark::DoNotOptimize(
853            cctz::convert(cctz::civil_second(2013, 11, 15, 18, 30, 27), tz));
854      }
855    }
856  }
857  BENCHMARK(BM_Time_FromCivil_CCTZ);
858  void BM_Time_FromCivil_Libc(benchmark::State& state) {
859    int i = 0;
860    while (state.KeepRunning()) {
861      struct tm tm;
862      if ((i++ & 1) == 0) {
863        tm.tm_year = 2014 - 1900;
864        tm.tm_mon = 12 - 1;
865        tm.tm_mday = 18;
866        tm.tm_hour = 20;
867        tm.tm_min = 16;
868        tm.tm_sec = 18;
869      } else {
870        tm.tm_year = 2013 - 1900;
871        tm.tm_mon = 11 - 1;
872        tm.tm_mday = 15;
873        tm.tm_hour = 18;
874        tm.tm_min = 30;
875        tm.tm_sec = 27;
876      }
877      tm.tm_isdst = -1;
878      benchmark::DoNotOptimize(mktime(&tm));
879    }
880  }
881  BENCHMARK(BM_Time_FromCivil_Libc);
882  void BM_Time_FromCivilUTC_CCTZ(benchmark::State& state) {
883    const cctz::time_zone tz = cctz::utc_time_zone();
884    while (state.KeepRunning()) {
885      benchmark::DoNotOptimize(
886          cctz::convert(cctz::civil_second(2014, 12, 18, 20, 16, 18), tz));
887    }
888  }
889  BENCHMARK(BM_Time_FromCivilUTC_CCTZ);
890  void BM_Time_FromCivilDay0_CCTZ(benchmark::State& state) {
891    const cctz::time_zone tz = TestTimeZone();
892    int i = 0;
893    while (state.KeepRunning()) {
894      if ((i++ & 1) == 0) {
895        benchmark::DoNotOptimize(
896            cctz::convert(cctz::civil_second(2014, 12, 0, 20, 16, 18), tz));
897      } else {
898        benchmark::DoNotOptimize(
899            cctz::convert(cctz::civil_second(2013, 11, 0, 18, 30, 27), tz));
900      }
901    }
902  }
903  BENCHMARK(BM_Time_FromCivilDay0_CCTZ);
904  void BM_Time_FromCivilDay0_Libc(benchmark::State& state) {
905    int i = 0;
906    while (state.KeepRunning()) {
907      struct tm tm;
908      if ((i++ & 1) == 0) {
909        tm.tm_year = 2014 - 1900;
910        tm.tm_mon = 12 - 1;
911        tm.tm_mday = 0;
912        tm.tm_hour = 20;
913        tm.tm_min = 16;
914        tm.tm_sec = 18;
915      } else {
916        tm.tm_year = 2013 - 1900;
917        tm.tm_mon = 11 - 1;
918        tm.tm_mday = 0;
919        tm.tm_hour = 18;
920        tm.tm_min = 30;
921        tm.tm_sec = 27;
922      }
923      tm.tm_isdst = -1;
924      benchmark::DoNotOptimize(mktime(&tm));
925    }
926  }
927  BENCHMARK(BM_Time_FromCivilDay0_Libc);
928  const char* const kFormats[] = {
929      RFC1123_full,           
930      RFC1123_no_wday,        
931      RFC3339_full,           
932      RFC3339_sec,            
933      "%Y-%m-%d%ET%H:%M:%S",  
934      "%Y-%m-%d",             
935  };
936  const int kNumFormats = sizeof(kFormats) / sizeof(kFormats[0]);
937  void BM_Format_FormatTime(benchmark::State& state) {
938    const std::string fmt = kFormats[state.range(0)];
939    state.SetLabel(fmt);
940    const cctz::time_zone tz = TestTimeZone();
941    const std::chrono::system_clock::time_point tp =
942        cctz::convert(cctz::civil_second(1977, 6, 28, 9, 8, 7), tz) +
943        std::chrono::microseconds(1);
944    while (state.KeepRunning()) {
945      benchmark::DoNotOptimize(cctz::format(fmt, tp, tz));
946    }
947  }
948  BENCHMARK(BM_Format_FormatTime)->DenseRange(0, kNumFormats - 1);
949  void BM_Format_ParseTime(benchmark::State& state) {
950    const std::string fmt = kFormats[state.range(0)];
951    state.SetLabel(fmt);
952    const cctz::time_zone tz = TestTimeZone();
953    std::chrono::system_clock::time_point tp =
954        cctz::convert(cctz::civil_second(1977, 6, 28, 9, 8, 7), tz) +
955        std::chrono::microseconds(1);
956    const std::string when = cctz::format(fmt, tp, tz);
957    while (state.KeepRunning()) {
958      benchmark::DoNotOptimize(cctz::parse(fmt, when, tz, &tp));
959    }
960  }
961  BENCHMARK(BM_Format_ParseTime)->DenseRange(0, kNumFormats - 1);
962  }  
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from abseil-cpp-MDEwOlJlcG9zaXRvcnkxMDQyMzE1NDE=-flat-cctz_benchmark.cc</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from abseil-cpp-MDEwOlJlcG9zaXRvcnkxMDQyMzE1NDE=-flat-cctz_benchmark.cc</div>
                </div>
                <div class="column column_space"><pre><code>812      t += 1;
813  #if defined(_WIN32) || defined(_WIN64)
814      benchmark::DoNotOptimize(localtime_s(&tm, &t));
815  #else
816      benchmark::DoNotOptimize(localtime_r(&t, &tm));
817  #endif
818    }
819  }
820  BENCHMARK(BM_Time_ToCivil_Libc);
821  void BM_Time_ToCivilUTC_CCTZ(benchmark::State& state) {
822    const cctz::time_zone tz = cctz::utc_time_zone();
</pre></code></div>
                <div class="column column_space"><pre><code>812      t += 1;
813  #if defined(_WIN32) || defined(_WIN64)
814      benchmark::DoNotOptimize(localtime_s(&tm, &t));
815  #else
816      benchmark::DoNotOptimize(localtime_r(&t, &tm));
817  #endif
818    }
819  }
820  BENCHMARK(BM_Time_ToCivil_Libc);
821  void BM_Time_ToCivilUTC_CCTZ(benchmark::State& state) {
822    const cctz::time_zone tz = cctz::utc_time_zone();
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    