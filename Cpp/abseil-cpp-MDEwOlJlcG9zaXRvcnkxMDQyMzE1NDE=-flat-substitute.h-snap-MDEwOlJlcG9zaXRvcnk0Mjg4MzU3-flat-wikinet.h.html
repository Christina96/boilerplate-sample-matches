
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 17.81609195402299%, Tokens: 15, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>abseil-cpp-MDEwOlJlcG9zaXRvcnkxMDQyMzE1NDE=-flat-substitute.h</h3>
            <pre><code>1  #ifndef ABSL_STRINGS_SUBSTITUTE_H_
2  #define ABSL_STRINGS_SUBSTITUTE_H_
3  #include <cstring>
4  #include <string>
5  #include <type_traits>
6  #include <vector>
7  #include "absl/base/macros.h"
8  #include "absl/base/port.h"
9  #include "absl/strings/ascii.h"
10  #include "absl/strings/escaping.h"
11  #include "absl/strings/internal/stringify_sink.h"
12  #include "absl/strings/numbers.h"
13  #include "absl/strings/str_cat.h"
14  #include "absl/strings/str_split.h"
15  #include "absl/strings/string_view.h"
16  #include "absl/strings/strip.h"
17  namespace absl {
18  ABSL_NAMESPACE_BEGIN
19  namespace substitute_internal {
20  class Arg {
21   public:
22    Arg(const char* value)  
23        : piece_(absl::NullSafeStringView(value)) {}
24    template <typename Allocator>
25    Arg(  
26        const std::basic_string<char, std::char_traits<char>, Allocator>&
27            value) noexcept
28        : piece_(value) {}
29    Arg(absl::string_view value)  
30        : piece_(value) {}
31    Arg(char value)  
32        : piece_(scratch_, 1) {
33      scratch_[0] = value;
34    }
35    Arg(short value)  
36        : piece_(scratch_,
37                 static_cast<size_t>(
38                     numbers_internal::FastIntToBuffer(value, scratch_) -
39                     scratch_)) {}
40    Arg(unsigned short value)  
41        : piece_(scratch_,
42                 static_cast<size_t>(
43                     numbers_internal::FastIntToBuffer(value, scratch_) -
44                     scratch_)) {}
45    Arg(int value)  
46        : piece_(scratch_,
47                 static_cast<size_t>(
48                     numbers_internal::FastIntToBuffer(value, scratch_) -
49                     scratch_)) {}
50    Arg(unsigned int value)  
51        : piece_(scratch_,
52                 static_cast<size_t>(
53                     numbers_internal::FastIntToBuffer(value, scratch_) -
54                     scratch_)) {}
55    Arg(long value)  
56        : piece_(scratch_,
57                 static_cast<size_t>(
58                     numbers_internal::FastIntToBuffer(value, scratch_) -
59                     scratch_)) {}
60    Arg(unsigned long value)  
61        : piece_(scratch_,
62                 static_cast<size_t>(
63                     numbers_internal::FastIntToBuffer(value, scratch_) -
64                     scratch_)) {}
65    Arg(long long value)  
66        : piece_(scratch_,
67                 static_cast<size_t>(
68                     numbers_internal::FastIntToBuffer(value, scratch_) -
69                     scratch_)) {}
70    Arg(unsigned long long value)  
71        : piece_(scratch_,
72                 static_cast<size_t>(
73                     numbers_internal::FastIntToBuffer(value, scratch_) -
74                     scratch_)) {}
75    Arg(float value)  
76        : piece_(scratch_, numbers_internal::SixDigitsToBuffer(value, scratch_)) {
77    }
78    Arg(double value)  
79        : piece_(scratch_, numbers_internal::SixDigitsToBuffer(value, scratch_)) {
80    }
81    Arg(bool value)  
82        : piece_(value ? "true" : "false") {}
83    template <typename T, typename = typename std::enable_if<
84                              strings_internal::HasAbslStringify<T>::value>::type>
85    Arg(  
86        const T& v, strings_internal::StringifySink&& sink = {})
87        : piece_(strings_internal::ExtractStringification(sink, v)) {}
88    Arg(Hex hex);  
89    Arg(Dec dec);  
90    template <typename T,
91              absl::enable_if_t<
92                  std::is_class<T>::value &&
93                  (std::is_same<T, std::vector<bool>::reference>::value ||
94                   std::is_same<T, std::vector<bool>::const_reference>::value)>* =
95                  nullptr>
96    Arg(T value)  
97        : Arg(static_cast<bool>(value)) {}
98    Arg(const void* value);  
99    template <typename T,
100              typename = typename std::enable_if<
101                  std::is_enum<T>{} && !std::is_convertible<T, int>{} &&
102                  !strings_internal::HasAbslStringify<T>::value>::type>
103    Arg(T value)  
104        : Arg(static_cast<typename std::underlying_type<T>::type>(value)) {}
105    Arg(const Arg&) = delete;
106    Arg& operator=(const Arg&) = delete;
107    absl::string_view piece() const { return piece_; }
108   private:
109    absl::string_view piece_;
110    char scratch_[numbers_internal::kFastToBufferSize];
111  };
112  void SubstituteAndAppendArray(std::string* output, absl::string_view format,
113                                const absl::string_view* args_array,
114                                size_t num_args);
115  #if defined(ABSL_BAD_CALL_IF)
116  constexpr int CalculateOneBit(const char* format) {
117    return (*format < '0' || *format > '9') ? (*format == '$' ? 0 : -1)
118                                            : (1 << (*format - '0'));
119  }
120  constexpr const char* SkipNumber(const char* format) {
121    return !*format ? format : (format + 1);
122  }
123  constexpr int PlaceholderBitmask(const char* format) {
124    return !*format
125               ? 0
126               : *format != '$' ? PlaceholderBitmask(format + 1)
127                                : (CalculateOneBit(format + 1) |
128                                   PlaceholderBitmask(SkipNumber(format + 1)));
129  }
130  #endif  
131  }  
132  inline void SubstituteAndAppend(std::string* output, absl::string_view format) {
133    substitute_internal::SubstituteAndAppendArray(output, format, nullptr, 0);
134  }
135  inline void SubstituteAndAppend(std::string* output, absl::string_view format,
136                                  const substitute_internal::Arg& a0) {
137    const absl::string_view args[] = {a0.piece()};
138    substitute_internal::SubstituteAndAppendArray(output, format, args,
139                                                  ABSL_ARRAYSIZE(args));
140  }
141  inline void SubstituteAndAppend(std::string* output, absl::string_view format,
142                                  const substitute_internal::Arg& a0,
143                                  const substitute_internal::Arg& a1) {
144    const absl::string_view args[] = {a0.piece(), a1.piece()};
145    substitute_internal::SubstituteAndAppendArray(output, format, args,
146                                                  ABSL_ARRAYSIZE(args));
147  }
148  inline void SubstituteAndAppend(std::string* output, absl::string_view format,
149                                  const substitute_internal::Arg& a0,
150                                  const substitute_internal::Arg& a1,
151                                  const substitute_internal::Arg& a2) {
152    const absl::string_view args[] = {a0.piece(), a1.piece(), a2.piece()};
153    substitute_internal::SubstituteAndAppendArray(output, format, args,
154                                                  ABSL_ARRAYSIZE(args));
155  }
156  inline void SubstituteAndAppend(std::string* output, absl::string_view format,
157                                  const substitute_internal::Arg& a0,
158                                  const substitute_internal::Arg& a1,
159                                  const substitute_internal::Arg& a2,
160                                  const substitute_internal::Arg& a3) {
161    const absl::string_view args[] = {a0.piece(), a1.piece(), a2.piece(),
162                                      a3.piece()};
163    substitute_internal::SubstituteAndAppendArray(output, format, args,
164                                                  ABSL_ARRAYSIZE(args));
165  }
166  inline void SubstituteAndAppend(std::string* output, absl::string_view format,
167                                  const substitute_internal::Arg& a0,
168                                  const substitute_internal::Arg& a1,
169                                  const substitute_internal::Arg& a2,
170                                  const substitute_internal::Arg& a3,
171                                  const substitute_internal::Arg& a4) {
172    const absl::string_view args[] = {a0.piece(), a1.piece(), a2.piece(),
173                                      a3.piece(), a4.piece()};
174    substitute_internal::SubstituteAndAppendArray(output, format, args,
175                                                  ABSL_ARRAYSIZE(args));
176  }
177  inline void SubstituteAndAppend(std::string* output, absl::string_view format,
178                                  const substitute_internal::Arg& a0,
179                                  const substitute_internal::Arg& a1,
180                                  const substitute_internal::Arg& a2,
181                                  const substitute_internal::Arg& a3,
182                                  const substitute_internal::Arg& a4,
183                                  const substitute_internal::Arg& a5) {
184    const absl::string_view args[] = {a0.piece(), a1.piece(), a2.piece(),
185                                      a3.piece(), a4.piece(), a5.piece()};
186    substitute_internal::SubstituteAndAppendArray(output, format, args,
187                                                  ABSL_ARRAYSIZE(args));
188  }
189  inline void SubstituteAndAppend(std::string* output, absl::string_view format,
190                                  const substitute_internal::Arg& a0,
191                                  const substitute_internal::Arg& a1,
192                                  const substitute_internal::Arg& a2,
193                                  const substitute_internal::Arg& a3,
194                                  const substitute_internal::Arg& a4,
195                                  const substitute_internal::Arg& a5,
196                                  const substitute_internal::Arg& a6) {
197    const absl::string_view args[] = {a0.piece(), a1.piece(), a2.piece(),
198                                      a3.piece(), a4.piece(), a5.piece(),
199                                      a6.piece()};
200    substitute_internal::SubstituteAndAppendArray(output, format, args,
201                                                  ABSL_ARRAYSIZE(args));
202  }
203  inline void SubstituteAndAppend(
204      std::string* output, absl::string_view format,
205      const substitute_internal::Arg& a0, const substitute_internal::Arg& a1,
206      const substitute_internal::Arg& a2, const substitute_internal::Arg& a3,
207      const substitute_internal::Arg& a4, const substitute_internal::Arg& a5,
208      const substitute_internal::Arg& a6, const substitute_internal::Arg& a7) {
209    const absl::string_view args[] = {a0.piece(), a1.piece(), a2.piece(),
210                                      a3.piece(), a4.piece(), a5.piece(),
211                                      a6.piece(), a7.piece()};
212    substitute_internal::SubstituteAndAppendArray(output, format, args,
213                                                  ABSL_ARRAYSIZE(args));
214  }
215  inline void SubstituteAndAppend(
216      std::string* output, absl::string_view format,
217      const substitute_internal::Arg& a0, const substitute_internal::Arg& a1,
218      const substitute_internal::Arg& a2, const substitute_internal::Arg& a3,
219      const substitute_internal::Arg& a4, const substitute_internal::Arg& a5,
220      const substitute_internal::Arg& a6, const substitute_internal::Arg& a7,
221      const substitute_internal::Arg& a8) {
222    const absl::string_view args[] = {a0.piece(), a1.piece(), a2.piece(),
223                                      a3.piece(), a4.piece(), a5.piece(),
224                                      a6.piece(), a7.piece(), a8.piece()};
225    substitute_internal::SubstituteAndAppendArray(output, format, args,
226                                                  ABSL_ARRAYSIZE(args));
227  }
228  inline void SubstituteAndAppend(
229      std::string* output, absl::string_view format,
230      const substitute_internal::Arg& a0, const substitute_internal::Arg& a1,
231      const substitute_internal::Arg& a2, const substitute_internal::Arg& a3,
232      const substitute_internal::Arg& a4, const substitute_internal::Arg& a5,
233      const substitute_internal::Arg& a6, const substitute_internal::Arg& a7,
234      const substitute_internal::Arg& a8, const substitute_internal::Arg& a9) {
235    const absl::string_view args[] = {
236        a0.piece(), a1.piece(), a2.piece(), a3.piece(), a4.piece(),
237        a5.piece(), a6.piece(), a7.piece(), a8.piece(), a9.piece()};
238    substitute_internal::SubstituteAndAppendArray(output, format, args,
239                                                  ABSL_ARRAYSIZE(args));
240  }
241  #if defined(ABSL_BAD_CALL_IF)
242  void SubstituteAndAppend(std::string* output, const char* format)
243      ABSL_BAD_CALL_IF(
244          substitute_internal::PlaceholderBitmask(format) != 0,
245          "There were no substitution arguments "
246          "but this format string either has a $[0-9] in it or contains "
247          "an unescaped $ character (use $$ instead)");
248  void SubstituteAndAppend(std::string* output, const char* format,
249                           const substitute_internal::Arg& a0)
250      ABSL_BAD_CALL_IF(substitute_internal::PlaceholderBitmask(format) != 1,
251                       "There was 1 substitution argument given, but "
252                       "this format string is missing its $0, contains "
253                       "one of $1-$9, or contains an unescaped $ character (use "
254                       "$$ instead)");
255  void SubstituteAndAppend(std::string* output, const char* format,
256                           const substitute_internal::Arg& a0,
257                           const substitute_internal::Arg& a1)
258      ABSL_BAD_CALL_IF(
259          substitute_internal::PlaceholderBitmask(format) != 3,
260          "There were 2 substitution arguments given, but this format string is "
261          "missing its $0/$1, contains one of $2-$9, or contains an "
262          "unescaped $ character (use $$ instead)");
263  void SubstituteAndAppend(std::string* output, const char* format,
264                           const substitute_internal::Arg& a0,
265                           const substitute_internal::Arg& a1,
266                           const substitute_internal::Arg& a2)
267      ABSL_BAD_CALL_IF(
268          substitute_internal::PlaceholderBitmask(format) != 7,
269          "There were 3 substitution arguments given, but "
270          "this format string is missing its $0/$1/$2, contains one of "
271          "$3-$9, or contains an unescaped $ character (use $$ instead)");
272  void SubstituteAndAppend(std::string* output, const char* format,
273                           const substitute_internal::Arg& a0,
274                           const substitute_internal::Arg& a1,
<span onclick='openModal()' class='match'>275                           const substitute_internal::Arg& a2,
276                           const substitute_internal::Arg& a3)
277      ABSL_BAD_CALL_IF(
278          substitute_internal::PlaceholderBitmask(format) != 15,
279          "There were 4 substitution arguments given, but "
280          "this format string is missing its $0-$3, contains one of "
281          "$4-$9, or contains an unescaped $ character (use $$ instead)");
282  void SubstituteAndAppend(std::string* output, const char* format,
283                           const substitute_internal::Arg& a0,
284                           const substitute_internal::Arg& a1,
285                           const substitute_internal::Arg& a2,
286                           const substitute_internal::Arg& a3,
287                           const substitute_internal::Arg& a4)
288      ABSL_BAD_CALL_IF(
289          substitute_internal::PlaceholderBitmask(format) != 31,
290          "There were 5 substitution arguments given, but "
291          "this format string is missing its $0-$4, contains one of "
292          "$5-$9, or contains an unescaped $ character (use $$ instead)");
293  void SubstituteAndAppend(std::string* output, const char* format,
294                           const substitute_internal::Arg& a0,
295                           const substitute_internal::Arg& a1,
296                           const substitute_internal::Arg& a2,
297                           const substitute_internal::Arg& a3,
</span>298                           const substitute_internal::Arg& a4,
299                           const substitute_internal::Arg& a5)
300      ABSL_BAD_CALL_IF(
301          substitute_internal::PlaceholderBitmask(format) != 63,
302          "There were 6 substitution arguments given, but "
303          "this format string is missing its $0-$5, contains one of "
304          "$6-$9, or contains an unescaped $ character (use $$ instead)");
305  void SubstituteAndAppend(
306      std::string* output, const char* format, const substitute_internal::Arg& a0,
307      const substitute_internal::Arg& a1, const substitute_internal::Arg& a2,
308      const substitute_internal::Arg& a3, const substitute_internal::Arg& a4,
309      const substitute_internal::Arg& a5, const substitute_internal::Arg& a6)
310      ABSL_BAD_CALL_IF(
311          substitute_internal::PlaceholderBitmask(format) != 127,
312          "There were 7 substitution arguments given, but "
313          "this format string is missing its $0-$6, contains one of "
314          "$7-$9, or contains an unescaped $ character (use $$ instead)");
315  void SubstituteAndAppend(
316      std::string* output, const char* format, const substitute_internal::Arg& a0,
317      const substitute_internal::Arg& a1, const substitute_internal::Arg& a2,
318      const substitute_internal::Arg& a3, const substitute_internal::Arg& a4,
319      const substitute_internal::Arg& a5, const substitute_internal::Arg& a6,
320      const substitute_internal::Arg& a7)
321      ABSL_BAD_CALL_IF(
322          substitute_internal::PlaceholderBitmask(format) != 255,
323          "There were 8 substitution arguments given, but "
324          "this format string is missing its $0-$7, contains one of "
325          "$8-$9, or contains an unescaped $ character (use $$ instead)");
326  void SubstituteAndAppend(
327      std::string* output, const char* format, const substitute_internal::Arg& a0,
328      const substitute_internal::Arg& a1, const substitute_internal::Arg& a2,
329      const substitute_internal::Arg& a3, const substitute_internal::Arg& a4,
330      const substitute_internal::Arg& a5, const substitute_internal::Arg& a6,
331      const substitute_internal::Arg& a7, const substitute_internal::Arg& a8)
332      ABSL_BAD_CALL_IF(
333          substitute_internal::PlaceholderBitmask(format) != 511,
334          "There were 9 substitution arguments given, but "
335          "this format string is missing its $0-$8, contains a $9, or "
336          "contains an unescaped $ character (use $$ instead)");
337  void SubstituteAndAppend(
338      std::string* output, const char* format, const substitute_internal::Arg& a0,
339      const substitute_internal::Arg& a1, const substitute_internal::Arg& a2,
340      const substitute_internal::Arg& a3, const substitute_internal::Arg& a4,
341      const substitute_internal::Arg& a5, const substitute_internal::Arg& a6,
342      const substitute_internal::Arg& a7, const substitute_internal::Arg& a8,
343      const substitute_internal::Arg& a9)
344      ABSL_BAD_CALL_IF(
345          substitute_internal::PlaceholderBitmask(format) != 1023,
346          "There were 10 substitution arguments given, but this "
347          "format string either doesn't contain all of $0 through $9 or "
348          "contains an unescaped $ character (use $$ instead)");
349  #endif  
350  ABSL_MUST_USE_RESULT inline std::string Substitute(absl::string_view format) {
351    std::string result;
352    SubstituteAndAppend(&result, format);
353    return result;
354  }
355  ABSL_MUST_USE_RESULT inline std::string Substitute(
356      absl::string_view format, const substitute_internal::Arg& a0) {
357    std::string result;
358    SubstituteAndAppend(&result, format, a0);
359    return result;
360  }
361  ABSL_MUST_USE_RESULT inline std::string Substitute(
362      absl::string_view format, const substitute_internal::Arg& a0,
363      const substitute_internal::Arg& a1) {
364    std::string result;
365    SubstituteAndAppend(&result, format, a0, a1);
366    return result;
367  }
368  ABSL_MUST_USE_RESULT inline std::string Substitute(
369      absl::string_view format, const substitute_internal::Arg& a0,
370      const substitute_internal::Arg& a1, const substitute_internal::Arg& a2) {
371    std::string result;
372    SubstituteAndAppend(&result, format, a0, a1, a2);
373    return result;
374  }
375  ABSL_MUST_USE_RESULT inline std::string Substitute(
376      absl::string_view format, const substitute_internal::Arg& a0,
377      const substitute_internal::Arg& a1, const substitute_internal::Arg& a2,
378      const substitute_internal::Arg& a3) {
379    std::string result;
380    SubstituteAndAppend(&result, format, a0, a1, a2, a3);
381    return result;
382  }
383  ABSL_MUST_USE_RESULT inline std::string Substitute(
384      absl::string_view format, const substitute_internal::Arg& a0,
385      const substitute_internal::Arg& a1, const substitute_internal::Arg& a2,
386      const substitute_internal::Arg& a3, const substitute_internal::Arg& a4) {
387    std::string result;
388    SubstituteAndAppend(&result, format, a0, a1, a2, a3, a4);
389    return result;
390  }
391  ABSL_MUST_USE_RESULT inline std::string Substitute(
392      absl::string_view format, const substitute_internal::Arg& a0,
393      const substitute_internal::Arg& a1, const substitute_internal::Arg& a2,
394      const substitute_internal::Arg& a3, const substitute_internal::Arg& a4,
395      const substitute_internal::Arg& a5) {
396    std::string result;
397    SubstituteAndAppend(&result, format, a0, a1, a2, a3, a4, a5);
398    return result;
399  }
400  ABSL_MUST_USE_RESULT inline std::string Substitute(
401      absl::string_view format, const substitute_internal::Arg& a0,
402      const substitute_internal::Arg& a1, const substitute_internal::Arg& a2,
403      const substitute_internal::Arg& a3, const substitute_internal::Arg& a4,
404      const substitute_internal::Arg& a5, const substitute_internal::Arg& a6) {
405    std::string result;
406    SubstituteAndAppend(&result, format, a0, a1, a2, a3, a4, a5, a6);
407    return result;
408  }
409  ABSL_MUST_USE_RESULT inline std::string Substitute(
410      absl::string_view format, const substitute_internal::Arg& a0,
411      const substitute_internal::Arg& a1, const substitute_internal::Arg& a2,
412      const substitute_internal::Arg& a3, const substitute_internal::Arg& a4,
413      const substitute_internal::Arg& a5, const substitute_internal::Arg& a6,
414      const substitute_internal::Arg& a7) {
415    std::string result;
416    SubstituteAndAppend(&result, format, a0, a1, a2, a3, a4, a5, a6, a7);
417    return result;
418  }
419  ABSL_MUST_USE_RESULT inline std::string Substitute(
420      absl::string_view format, const substitute_internal::Arg& a0,
421      const substitute_internal::Arg& a1, const substitute_internal::Arg& a2,
422      const substitute_internal::Arg& a3, const substitute_internal::Arg& a4,
423      const substitute_internal::Arg& a5, const substitute_internal::Arg& a6,
424      const substitute_internal::Arg& a7, const substitute_internal::Arg& a8) {
425    std::string result;
426    SubstituteAndAppend(&result, format, a0, a1, a2, a3, a4, a5, a6, a7, a8);
427    return result;
428  }
429  ABSL_MUST_USE_RESULT inline std::string Substitute(
430      absl::string_view format, const substitute_internal::Arg& a0,
431      const substitute_internal::Arg& a1, const substitute_internal::Arg& a2,
432      const substitute_internal::Arg& a3, const substitute_internal::Arg& a4,
433      const substitute_internal::Arg& a5, const substitute_internal::Arg& a6,
434      const substitute_internal::Arg& a7, const substitute_internal::Arg& a8,
435      const substitute_internal::Arg& a9) {
436    std::string result;
437    SubstituteAndAppend(&result, format, a0, a1, a2, a3, a4, a5, a6, a7, a8, a9);
438    return result;
439  }
440  #if defined(ABSL_BAD_CALL_IF)
441  std::string Substitute(const char* format)
442      ABSL_BAD_CALL_IF(substitute_internal::PlaceholderBitmask(format) != 0,
443                       "There were no substitution arguments "
444                       "but this format string either has a $[0-9] in it or "
445                       "contains an unescaped $ character (use $$ instead)");
446  std::string Substitute(const char* format, const substitute_internal::Arg& a0)
447      ABSL_BAD_CALL_IF(
448          substitute_internal::PlaceholderBitmask(format) != 1,
449          "There was 1 substitution argument given, but "
450          "this format string is missing its $0, contains one of $1-$9, "
451          "or contains an unescaped $ character (use $$ instead)");
452  std::string Substitute(const char* format, const substitute_internal::Arg& a0,
453                         const substitute_internal::Arg& a1)
454      ABSL_BAD_CALL_IF(
455          substitute_internal::PlaceholderBitmask(format) != 3,
456          "There were 2 substitution arguments given, but "
457          "this format string is missing its $0/$1, contains one of "
458          "$2-$9, or contains an unescaped $ character (use $$ instead)");
459  std::string Substitute(const char* format, const substitute_internal::Arg& a0,
460                         const substitute_internal::Arg& a1,
461                         const substitute_internal::Arg& a2)
462      ABSL_BAD_CALL_IF(
463          substitute_internal::PlaceholderBitmask(format) != 7,
464          "There were 3 substitution arguments given, but "
465          "this format string is missing its $0/$1/$2, contains one of "
466          "$3-$9, or contains an unescaped $ character (use $$ instead)");
467  std::string Substitute(const char* format, const substitute_internal::Arg& a0,
468                         const substitute_internal::Arg& a1,
469                         const substitute_internal::Arg& a2,
470                         const substitute_internal::Arg& a3)
471      ABSL_BAD_CALL_IF(
472          substitute_internal::PlaceholderBitmask(format) != 15,
473          "There were 4 substitution arguments given, but "
474          "this format string is missing its $0-$3, contains one of "
475          "$4-$9, or contains an unescaped $ character (use $$ instead)");
476  std::string Substitute(const char* format, const substitute_internal::Arg& a0,
477                         const substitute_internal::Arg& a1,
478                         const substitute_internal::Arg& a2,
479                         const substitute_internal::Arg& a3,
480                         const substitute_internal::Arg& a4)
481      ABSL_BAD_CALL_IF(
482          substitute_internal::PlaceholderBitmask(format) != 31,
483          "There were 5 substitution arguments given, but "
484          "this format string is missing its $0-$4, contains one of "
485          "$5-$9, or contains an unescaped $ character (use $$ instead)");
486  std::string Substitute(const char* format, const substitute_internal::Arg& a0,
487                         const substitute_internal::Arg& a1,
488                         const substitute_internal::Arg& a2,
489                         const substitute_internal::Arg& a3,
490                         const substitute_internal::Arg& a4,
491                         const substitute_internal::Arg& a5)
492      ABSL_BAD_CALL_IF(
493          substitute_internal::PlaceholderBitmask(format) != 63,
494          "There were 6 substitution arguments given, but "
495          "this format string is missing its $0-$5, contains one of "
496          "$6-$9, or contains an unescaped $ character (use $$ instead)");
497  std::string Substitute(const char* format, const substitute_internal::Arg& a0,
498                         const substitute_internal::Arg& a1,
499                         const substitute_internal::Arg& a2,
500                         const substitute_internal::Arg& a3,
501                         const substitute_internal::Arg& a4,
502                         const substitute_internal::Arg& a5,
503                         const substitute_internal::Arg& a6)
504      ABSL_BAD_CALL_IF(
505          substitute_internal::PlaceholderBitmask(format) != 127,
506          "There were 7 substitution arguments given, but "
507          "this format string is missing its $0-$6, contains one of "
508          "$7-$9, or contains an unescaped $ character (use $$ instead)");
509  std::string Substitute(const char* format, const substitute_internal::Arg& a0,
510                         const substitute_internal::Arg& a1,
511                         const substitute_internal::Arg& a2,
512                         const substitute_internal::Arg& a3,
513                         const substitute_internal::Arg& a4,
514                         const substitute_internal::Arg& a5,
515                         const substitute_internal::Arg& a6,
516                         const substitute_internal::Arg& a7)
517      ABSL_BAD_CALL_IF(
518          substitute_internal::PlaceholderBitmask(format) != 255,
519          "There were 8 substitution arguments given, but "
520          "this format string is missing its $0-$7, contains one of "
521          "$8-$9, or contains an unescaped $ character (use $$ instead)");
522  std::string Substitute(
523      const char* format, const substitute_internal::Arg& a0,
524      const substitute_internal::Arg& a1, const substitute_internal::Arg& a2,
525      const substitute_internal::Arg& a3, const substitute_internal::Arg& a4,
526      const substitute_internal::Arg& a5, const substitute_internal::Arg& a6,
527      const substitute_internal::Arg& a7, const substitute_internal::Arg& a8)
528      ABSL_BAD_CALL_IF(
529          substitute_internal::PlaceholderBitmask(format) != 511,
530          "There were 9 substitution arguments given, but "
531          "this format string is missing its $0-$8, contains a $9, or "
532          "contains an unescaped $ character (use $$ instead)");
533  std::string Substitute(
534      const char* format, const substitute_internal::Arg& a0,
535      const substitute_internal::Arg& a1, const substitute_internal::Arg& a2,
536      const substitute_internal::Arg& a3, const substitute_internal::Arg& a4,
537      const substitute_internal::Arg& a5, const substitute_internal::Arg& a6,
538      const substitute_internal::Arg& a7, const substitute_internal::Arg& a8,
539      const substitute_internal::Arg& a9)
540      ABSL_BAD_CALL_IF(
541          substitute_internal::PlaceholderBitmask(format) != 1023,
542          "There were 10 substitution arguments given, but this "
543          "format string either doesn't contain all of $0 through $9 or "
544          "contains an unescaped $ character (use $$ instead)");
545  #endif  
546  ABSL_NAMESPACE_END
547  }  
548  #endif  
</code></pre>
        </div>
        <div class="column">
            <h3>snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-wikinet.h</h3>
            <pre><code>1  #ifndef snap_wikinet_h
2  #define snap_wikinet_h
3  #include "Snap.h"
4  #include "signnet.h"
5  class TWikiElecBs;
6  class TWikiMetaHist;
7  class TWikiTalkNet;
8  typedef TPt<TWikiTalkNet> PWikiTalkNet;
9  class TWikiUsr {
10  public:
11    TChA Usr;
12    TBool Admin;
13    TSecTm ElecTm;               
14    TInt BarnStars;
15    TInt MnEdCnt, MnEdWrds;      
16    TInt MnTkEdCnt, MnTkEdWrds;  
17    TInt WkEdCnt, WkEdWrds;      
18    TInt WkTkEdCnt, WkTkEdWrds;  
19    TInt MnRevCnt, MnRevWrds;    
20  public:
21    TWikiUsr();
22    TWikiUsr(const TChA& UsrStr);
23    TWikiUsr(const TWikiUsr& WikiUsr);
24    TWikiUsr(TSIn& SIn);
25    void Save(TSOut& SOut) const;
26    const TChA& GetUsr() const { return Usr; }
27    bool IsAdmin() const { return Admin; }
28    bool IsElec() const { return ElecTm.IsDef(); }
29    int GetStars() const { return BarnStars; }
30    int GetEdCnt() const { return MnEdCnt+WkEdCnt; }
31    int GetWrdCnt() const { return MnEdWrds+WkEdCnt; }
32    int GetTkEdCnt() const { return MnTkEdCnt+WkTkEdCnt; }
33    int GetTkWrdCnt() const { return MnTkEdWrds+WkTkEdWrds; }
34    int GetAllEdCnt() const { return MnEdCnt+WkEdCnt+MnTkEdCnt+WkTkEdCnt; }
35    int GetAllWrdCnt() const { return MnEdWrds+WkEdWrds+MnTkEdWrds+WkTkEdWrds; }
36    int GetRevCnt() const { return MnRevCnt; }
37    int GetRevWrds() const { return MnRevWrds; }
38    bool operator < (const TWikiUsr& WUsr) const {
39      return strcmp(Usr.CStr(), WUsr.Usr.CStr())<0; }
40    void Dump() const {
41      printf("%s\n", Usr.CStr()); }
42    friend class TWikiTalkNet;
43  };
44  class TWikiTalkEdge {
45  private:
46    TInt TotTalks, TotWords, TalksBE, WordsBE, TalksAE, WordsAE; 
47    TInt VoteSign; 
48    TSecTm FirstTalk, LastTalk, VoteTm;
49  public:
50    TWikiTalkEdge();
51    TWikiTalkEdge(const int& _VoteSign);
52    TWikiTalkEdge(const TSecTm& FTalk, const TSecTm& LTalk, const int& NTalks, const int& NWords);
53    TWikiTalkEdge(const TWikiTalkEdge& Talk);
54    TWikiTalkEdge(TSIn& SIn);
55    void Save(TSOut& SOut) const;
56    bool operator < (const TWikiTalkEdge& Edge) const { return TotTalks < Edge.TotTalks; }
57    bool IsTalkE() const { return TotTalks>0; }
58    bool IsVoteE() const { return VoteTm.IsDef(); }
59    bool IsVoteTalkE() const { return IsTalkE()&&IsVoteE(); }
60    int GetTalks() const { return TotTalks; }
61    int GetWords() const { return TotWords; }
62    int GetTalksBE() const { return TalksBE; }
63    int GetWordsBE() const { return WordsBE; }
64    int GetTalksAE() const { return TalksAE; }
65    int GetWordsAE() const { return WordsAE; }
66    int GetVote() const { return VoteSign; }
67    TSecTm GetFTalk() const { return FirstTalk; }
68    TSecTm GetLTalk() const { return LastTalk; }
69    TSecTm GetVoteTm() const { return VoteTm; }
70    friend class TWikiTalkNet;
71  };
72  class TWikiTalkNet : public TNodeEDatNet<TWikiUsr, TWikiTalkEdge> {
73  private:
74    THash<TStr, TInt> UsrNIdH;
75  public:
76    TWikiTalkNet() : TNet() { }
77    TWikiTalkNet(TSIn& SIn) : TNet(SIn), UsrNIdH(SIn) {
78      if (UsrNIdH.Empty()) { for (TNodeI NI=BegNI(); NI<EndNI(); NI++) {
79        UsrNIdH.AddDat(NI().GetUsr(), NI.GetId()); } } }
80    void Save(TSOut& SOut) const { TNet::Save(SOut); UsrNIdH.Save(SOut); }
81    static PWikiTalkNet New() { return new TWikiTalkNet; }
82    static PWikiTalkNet Load(TSIn& SIn) { return new TWikiTalkNet(SIn); }
83    int GetUsrNId(const TStr& UsrStr) const;
84    bool IsUsr(const TStr& UsrStr) const;
85    void PermuteAllVoteSigns(const bool& OnlyVotes);
86    void PermuteOutVoteSigns(const bool& OnlyVotes);
87    void CountStructBalance() const;
88    PWikiTalkNet GetSubGraph(const TIntV& NIdV, const bool& RenumberNodes=false) const;
89    PWikiTalkNet GetVoteSubNet(const int& VoteSign, const bool& VoteOnly, const bool& TalkOnly) const;
90    PSignNet GetSignNet(const int& VoteSign, const bool& VoteOnly, const bool& TalkOnly) const;
91    void FindPartitions(const int& NPart, const bool& OnlyMinus) const;
92    void GetPartStat(const TVec<TIntV>& PartNIdV) const;
93    void TestPartitions(const TStr& OutFNm);
94    void PlotBarnStarDelta(const TStr& OutFNm) const;
95    void PlotFracPosVsWords(const TStr& OutFNm) const;
96    void PlotFracPosVsWords2(const TStr& OutFNm) const;
97    void PlotNodeAttrDistr(const TStr& OutFNm) const;
98    void PlotFracPosVsEdgeAttr(const TStr& OutFNm) const;
99    void PlotVoteSignCmnFriends(const TStr& OutFNm) const;
100    void SaveAreaUTrailAttr(const TStr& OutFNm, const int& MinUsrVotes, const TWikiElecBs& ElecBs) const;
101    void DumpEdgeStat() const;
102    void ImposeElecNet(const TWikiElecBs& ElecBs, const THash<TChA, TChA>& UsrChageH, const bool& AddVoteOnlyEdges);
103    void ClearElecData();
104    static PWikiTalkNet LoadTalkNet(const TStr& ParsedWikiDir, const TWikiElecBs& ElecBs);
105    static PWikiTalkNet LoadSlashdot(const TStr& InFNm);
106    static PWikiTalkNet LoadOldNet(const TStr& InFNm);
107    friend class TPt<TWikiTalkNet>;
108  };
109  namespace TSnap {
110  template <> struct IsDirected<TWikiTalkNet> { enum { Val = 1 }; };
111  template <> struct IsNodeDat<TWikiTalkNet> { enum { Val = 1 }; };
112  template <> struct IsEdgeDat<TWikiTalkNet> { enum { Val = 1 }; };
113  }
114  class TWikiTimeTalkNet;
115  typedef TPt<TWikiTimeTalkNet> PWikiTimeTalkNet;
116  class TWikiTalkEdge2 {
117  public:
118    TSecTm Tm;
119    TInt Words;
120  public:
121    TWikiTalkEdge2() { }
122    TWikiTalkEdge2(const TSecTm& TalkTm, const int& TalkWords) : Tm(TalkTm), Words(TalkWords) { }
123    TWikiTalkEdge2(TSIn& SIn) : Tm(SIn), Words(SIn) { }
124    void Save(TSOut& SOut) const { Tm.Save(SOut); Words.Save(SOut); }
125  };
126  class TWikiTimeTalkNet : public TNodeEdgeNet<TChA, TWikiTalkEdge2> { 
127  private:
128    TStrHash<TInt> UsrNIdH;
129  public:
130    TWikiTimeTalkNet() : TNet() { }
131    TWikiTimeTalkNet(TSIn& SIn) : TNet(SIn), UsrNIdH(SIn) { }
132    void Save(TSOut& SOut) const { TNet::Save(SOut); UsrNIdH.Save(SOut); }
133    static PWikiTimeTalkNet New() { return new TWikiTimeTalkNet; }
134    static PWikiTimeTalkNet Load(TSIn& SIn) { return new TWikiTimeTalkNet(SIn); }
135    PNGraph GetBeforeTimeG(const TSecTm& EdgeTm) const;
136    PSignNet GetBeforeTimeNet(const TSecTm& EdgeTm) const;
137    void SaveDataset(const TWikiElecBs& ElecBs, const TStr& OutFNm) const;
138    static PWikiTimeTalkNet LoadWikiTimeTalkNet();
139    friend class TPt<TWikiTimeTalkNet>;
140  };
141  class TBarnStars {
142  private:
143    THash<TStr, TSecTmV> StarsH;
144  public:
145    TBarnStars() {
146      const TStr UsrChanges = "W:\\data\\wiki20080103-parseByGuerogy\\enwiki.important-username-changes.2007-08-06";
147      const TStr BarnStars = "W:\\Data\\wiki20080103-parseByGuerogy\\barnstars.history.unsorted";
148      THash<TChA, TChA> UsrMapH;
149      for (TSsParser Ss(UsrChanges, ssfSpaceSep); Ss.Next(); ) {
150        TChA U1=Ss[3], U2=Ss[4]; if (U1.ToLc()!=U2.ToLc()) { UsrMapH.AddDat(U1,U2); } }
151      for (TSsParser Ss(BarnStars, ssfSpaceSep); Ss.Next(); ) {
152        TStr U = Ss[3]; U.ToTrunc(); U.ToLc();
153        if (UsrMapH.IsKey(U)) { U = UsrMapH.GetDat(U); }
154        StarsH.AddDat(U).Add(TSecTm::GetDtTmFromStr(TStr(Ss[0])+TStr(" ")+TStr(Ss[1])));
155      }
156      for (int u = 0; u < StarsH.Len(); u++) { StarsH[u].Sort(); }
157    }
158    int GetBarnStars(const TStr& Usr, const TSecTm& Tm = TSecTm()) {
159      if (! StarsH.IsKey(Usr)) { return 0; }
160      const TSecTmV& TmV = StarsH.GetDat(Usr);
161      int Stars=0;
162      for (int t = 0; t < TmV.Len(); t++) {
163        if (! Tm.IsDef() || TmV[t] <= Tm) { Stars++; } }
164      return Stars;
165    }
166  };
167  class TWikiEditCnt {
168  public:
169    struct TEditCnt {
170      TInt MainE, MainW, MainTE, MainTW;
171      TInt WikiE, WikiW, WikiTE, WikiTW;
172      TInt RevE, RevW; 
173      TEditCnt() { memset(this, 0, sizeof(int)); }
174      TEditCnt(TSIn& SIn) { SIn.LoadBf(this, sizeof(TEditCnt)); }
175      void Save(TSOut& SOut) const { SOut.SaveBf(this, sizeof(TEditCnt)); }
176    };
177    THash<TChA, TEditCnt> RfaEdCntH; 
178  public:
179    TWikiEditCnt() { }
180    TWikiEditCnt(TSIn& SIn) : RfaEdCntH(SIn) { }
181    void Save(TSOut& SOut) const { RfaEdCntH.Save(SOut); }
182    void LoadTxtBeforeElec(const TWikiElecBs& ElecBs);
183    void LoadTxtAll(const TWikiElecBs& ElecBs);
184    void SaveTxt(const TWikiElecBs& ElecBs, const TStr& OutFNm);
185  };
186  class TWikiVote {
187  private:
188    TInt UsrId;      
189    TInt UsrVote;    
190    TInt UsrIndent;  
191    TBool IsAVote;   
192    TInt TxtLen;     
193    TSecTm VoteTm;
194  public:
195    TWikiVote() { }
196    TWikiVote(const int& UsrID, const int _UsrVote, const int& _UsrIndent, const int& TextLen, const TSecTm& VoteTime) :
197      UsrId(UsrID), UsrVote(_UsrVote), UsrIndent(_UsrIndent), TxtLen(TextLen), VoteTm(VoteTime) { }
198    TWikiVote(TSIn& SIn) { SIn.LoadBf(this, sizeof(TWikiVote)); }
199    void Save(TSOut& SOut) const { SOut.SaveBf(this, sizeof(TWikiVote)); }
200    bool operator < (const TWikiVote& WV) const { return VoteTm<WV.VoteTm; }
201    int GetUId() const { return UsrId; }
202    int GetVote() const { return UsrVote; }
203    bool IsVote() const { return IsAVote; }
204    int GetIndent() const { return UsrIndent; }
205    int GetTxtLen() const { return TxtLen; }
206    TSecTm GetTm() const { return VoteTm; }
207    friend class TWikiElec;
208  };
209  typedef TVec<TWikiVote> TWikiVoteV;
210  class TWikiElec {
211  public:
212    TStr RfaTitle;
213    TInt UsrId, NomUId, BurUId; 
214    TBool IsSucc;    
215    TSecTm ElecTm;
216    TWikiVoteV VoteV; 
217  public:
218    TWikiElec() : UsrId(-1), NomUId(-1), BurUId(-1), ElecTm() { }
219    TWikiElec(const int& Usr, const TSecTm& Tm) : UsrId(Usr), NomUId(-1), BurUId(-1), ElecTm(Tm) { }
220    TWikiElec(TSIn& SIn);
221    void Save(TSOut& SOut) const;
222    bool operator < (const TWikiElec& WE) const;
223    void SetIsVoteFlag();
224    int GetUId() const { return UsrId; }
225    TSecTm GetTm() const { return ElecTm; }
226    int Len() const { return VoteV.Len(); }
227    const TWikiVote& GetVote(const int& VoteN) const { return VoteV[VoteN]; }
228    const TWikiVote& operator [] (const int& VoteN) const { return GetVote(VoteN); }
229    double GetFracSup(const bool& OnlyVotes=true) const;
230    double GetFracSup(int VoteId1, int VoteId2) const;
231    double GetTrend(int VoteId1, int VoteId2) const;
232    TIntTr GetVotes(const bool& OnlyVotes=true) const;
233    void GetVotesOt(TWikiVoteV& WVoteV, const bool& OnlyVotes=true) const;
234    int GetAvgVoteOt(TFltV& AvgVoteV, const bool& OnlyVotes=true) const;
235    int GetAvgVoteDevOt(TFltV& AvgVoteV, const bool& OnlyVotes=true) const;
236    int GetRunLen(const int& VoteId) const;
237    void PermuteVotes();
238    void KeepVotes(const TIntSet& UIdSet);
239    void GetOnlyVotes(TWikiElec& NewElec, const bool& OnlySupOpp) const;
240    void RemoveSelfVotes();
241    void Dump(const TStrHash<TInt>& UsrH=TStrHash<TInt>()) const;
242  };
243  typedef TVec<TWikiElec> TWikiElecV;
244  class TWikiElecBs {
245  public:
246    struct TElecSum {
247      TStr Usr, RfA, NominatedBy, Bureaucrat;
248      TInt Sup, Opp, Neu;
249    };
250  public:
251    TStrHash<TInt> UsrH;      
252    TVec<TWikiElec> ElecV;    
253  public:
254    TWikiElecBs() { }
255    TWikiElecBs(TSIn& SIn) : UsrH(SIn), ElecV(SIn) { }
256    void Save(TSOut& SOut) const { UsrH.Save(SOut); ElecV.Save(SOut); }
257    int GetUsrs() const { return UsrH.Len(); }
258    const char *GetUsr(const int& UId) const { return UsrH.GetKey(UId); }
259    bool IsUId(const int& UId) const { return UId < UsrH.Len(); }
260    bool IsUsr(const char* CStr) const { return UsrH.IsKey(CStr); }
261    bool IsUsr(const TChA& Str) const { return UsrH.IsKey(Str.CStr()); }
262    int GetUId(const char* CStr) const { return UsrH.GetKeyId(CStr); }
263    int GetUId(const TChA& Str) const { return UsrH.GetKeyId(Str.CStr()); }
264    int AddUsr(const char* CStr) { Assert(TChA(CStr)==TChA(CStr).ToLc() && TChA(CStr).SearchCh(' ')==-1);
265      return UsrH.AddDatId(CStr); }
266    int AddUsr(const TChA& ChA) { Assert(TChA(ChA).SearchCh(' ')==-1 && TChA(ChA)==TChA(ChA).ToLc());
267      return UsrH.AddDatId(ChA.CStr()); }
268    int Len() const { return ElecV.Len(); }
269    int GetVotes() const { int votes=0; for (int e=0; e<Len(); e++) { votes+=GetElec(e).Len(); } return votes; }
270    TWikiElec& GetElec(const int& EId) { return ElecV[EId]; }
271    const TWikiElec& GetElec(const int& EId) const { return ElecV[EId]; }
272    const TWikiElec& operator [] (const int& EId) const { return ElecV[EId]; }
273    void GetEIdByVotes(TIntV& EIdV, const bool& AscNumVotes=true) const;
274    void GetEIdByVotes(TIntV& EIdV, const int& MinLen, const double& FracPos, const double AboveFrac, const bool& AscNumVotes=true) const;
275    void GetEIdByFrac(TIntV& EIdV, const int& MinLen, const double& MnFracSup, const double& MxFracSup) const;
276    void GetUsrV(TIntV& UIdV) const;
277    void GetElecUsrV(TIntV& ElecUIdV) const;
278    void GetElecAdminUsrV(TIntV& ElecAdminUIdV) const;
279    void GetElecNonAdminUsrV(TIntV& ElecNonAdminUIdV) const;
280    void GetFqVoters(TIntSet& FqVoterSet, const int& MinVotes=10, const int& MinElecLen=0, const bool& OnlyAdmins=false) const;
281    void GetUsrVotes(TIntPrV& VoteUIdV) const;
282    void GetAdminSet(TIntSet& AdminSet) const;
283    void GetFqVoterSet(TIntSet& FqVoterSet) const;
284    void GetAdminTmSet(THash<TInt, TSecTm>& AdminSet) const;
285    void KeepFqVoters(const int& MinVotes, const int& MinElecLen, const bool& OnlyAdmins);
286    void KeepVoters(const bool& OnlyAdmins, const bool& OnlyNonAdmins);
287    void KeepTopVoters(const int& Votes, const bool& KeepTop);
288    int GetVoteTrails(const int& MinUsrVotes, const bool& No01Prob, TIntV& UIdV, TVec<TFltPrV>& ProbSupTmV,
289      TVec<TFltPrV>& FracSupTmV, TVec<TFltPrV>& ProbSupFracSupV, TVec<TFltPrV>& VotesTmV) const;
290    void GetVoteTrails2(const int& MinUsrVotes, const bool& No01Prob, TIntV& UIdV,
291      TVec<TFltPrV>& VoteIdxFracSupV, TVec<TFltPrV>& NVotesFracSupV) const;
292    void GetUsrVoteTrail(const TIntV& UIdV, TVec<TFltPrV>& ProbPosFracPosV) const;
293    void GetUsrAreaUTrail(const TIntV& UIdV, TFltV& AreaV) const;
294    void PermuteVotes();
295    void SortVotesByTm();
296    void PlotElecSupOppOt(const TStr& OutFNm, const int& MinVotes, const int& MaxVotes) const;
297    void PlotElecLenDistr(const TStr& OutFNm) const;
298    void PlotRunLenStat(const TStr& OutFNm, const int& MinVotes, const int& MaxVotes) const;
299    void DrawElecTree(const TStr& OutFNm, const int& MinVotes) const;
300    void PlotVotesOt(const TStr& OutFNm, const int& MinVotes, const int& MaxVotes) const;
301    void PlotCovotingUsers(const TStr& OutFNm, const TStr& MinSupStr, const int& TakeOnlyVotes) const;
302    void PlotFracBeforeAfterVote(const TStr& OutFNm) const;
303    void PlotDeltaFracSupOt(const TStr& OutFNm, const int& MinVotes, const int& MaxVotes) const;
304    void PlotUsrVoteVsTime(const TStr& OutFNm, const int& MinUsrVotes, const TIntSet& UsrSplitSet) const;
<span onclick='openModal()' class='match'>305    void PlotFirstOppOutcome(const TStr& OutFNm, const int& NVotes) const;
306    void PlotVoteTrails(const TStr& OutFNm, const int& MinUsrVotes, const bool& No01Prob) const;
307    void PlotVoteTrailGlobal(const TStr& OutFNm) const;
308    void PlotFinalFracVoteCnt(const TStr& OutFNm, const int& MinUsrVotes, const TIntSet& UsrSplitSet) const;
309    void PlotConfusionMatrix(const TStr& OutFNm, const int& MinUsrVotes) const;
</span>310    void PlotSlopeHist(const TStr& OutFNm, const int& MinElecLen) const;
311    void PlotBarnStarsDelta(const TStr& OutFNm) const;
312    void PlotAdminVotes(const TStr& OutFNm) const;
313    void PlotAvgVote(const TStr& OutFNm, const int& MinVotes, const int& MaxVotes) const;
314    void PlotAvgVote(const TIntV& ElecIdV, const TStr& OutFNm, const TStr& Desc=TStr()) const;
315    void PlotAvgVoteDev(const TIntV& ElecIdV, const TStr& OutFNm, const TStr& Desc=TStr()) const;
316    void PlotAvgSupFrac(const TIntV& ElecIdV, const TStr& OutFNm, const TStr& Desc=TStr()) const;
317    void PlotOutcomes(const TStr& OutFNm) const;
318    void PlotSupFracVsElecLen(const TStr& OutFNm) const;
319    void PlotSupOpp(const TStr& OutFNm) const;
320    void PlotVoteDistr(const TStr& OutFNm) const;
321    PSignNet GetAdminUsrVoteNet() const;
322    PSignNet GetElecUsrVoteNet() const;
323    PSignNet GetAllUsrVoteNet() const;
324    PSignNet GetVoteNet(const TIntV& UsrIdV) const;
325    void GetOnlyVoteElecBs(TWikiElecBs& NewElecBs, const bool& OnlySupOpp) const;
326    bool AddElecRes(const TWikiMetaHist& WMH, const THash<TStr, TStr>& UsrMapH, const THash<TStr, TElecSum>& ElecSumH);
327    void ParseVotes(const TWikiMetaHist& WMH, const THash<TStr, TStr>& UsrMapH, TWikiElec& WikiElec);
328    void SetUserIdFromRfa();
329    void Dump() const;
330    void SaveElecUserVotes(const TStr& OutFNm) const;
331    void SaveTxt(const TStr& OutFNm);
332    void SaveOnlyVotes();
333    static bool GetUsrTm(char* LineStr, TChA& Usr, TSecTm& Tm, int& Indent);
334    static int GetWikiTxtLen(char* LineStr);
335    static void LoadElecSumTxt(const TStr& FNm, THash<TStr, TElecSum>& ElecSumH);
336  };
337  class TWikiMetaLoader {
338  private:
339    PSIn SInPt;
340  public:
341    TInt ArticleId, RevisionId;
342    TChA Title, Usr;
343    TBool MonorEdit;
344    TInt RevWrds, UsrId;
345    TSecTm RevTm;
346    TChA CatStr, ImgStr, TemplateStr; 
347    TChA MainLStr, TalkLStr, UserLStr, UserTalkLStr, OtherLStr, ExternalLStr; 
348    TChA CommentStr; 
349  public:
350    TWikiMetaLoader(const TStr& InFNm);
351    bool IsIpAddrUsr() const;
352    bool Next();
353    static bool IsIpAddr(const TChA& Usr);
354  };
355  class TWikiMetaHist {
356  private:
357    PSIn SInPt;
358    PXmlParser XmlInPt;
359    int PageCnt;  TExeTm ExeTm;
360  public:
361    int PageId, RevId, UsrId;
362    TSecTm RevTm;
363    TChA Usr, Cmt;
364    TChA Title, Text, Tmp; 
365  public:
366    TWikiMetaHist() : XmlInPt() { }
367    TWikiMetaHist(const TStr& InFNm); 
368    TWikiMetaHist(const PSIn& SIn); 
369    void Save(TSOut& SOut) const;
370    void Clr();
371    bool LoadNextBin();
372    bool LoadNextTxt();
373    void Dump(const bool& AlsoText=false) const;
374    void DumpNextXmlTags(const int& DumpN);
375  };
376  class TWikiElecBsOLD {
377  public:
378    TStrHash<TInt> UsrH;
379    THash<TInt, TWikiElecV> UsrElecH; 
380  public:
381    TWikiElecBsOLD() { }
382    TWikiElecBsOLD(TSIn& SIn) : UsrH(SIn), UsrElecH(SIn) { }
383    void Save2(TSOut& SOut) const { UsrH.Save(SOut); UsrElecH.Save(SOut); }
384    void Dump() const { TIntH ElecLen; int v=0;for (int e=0;e<UsrElecH.Len();e++) {ElecLen.AddDat(UsrElecH[e].Last().Len())++; v+=UsrElecH[e].Last().Len();}
385    printf("%d users, %d elections, %d all votes\n", UsrH.Len(), UsrElecH.Len(),v);
386    ElecLen.SortByKey(); for(int e=0;e<ElecLen.Len(); e++){printf("  %4d\t%d\t%d\n",e, ElecLen.GetKey(e), ElecLen[e]);} }
387  };
388  #endif
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from abseil-cpp-MDEwOlJlcG9zaXRvcnkxMDQyMzE1NDE=-flat-substitute.h</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-wikinet.h</div>
                </div>
                <div class="column column_space"><pre><code>275                           const substitute_internal::Arg& a2,
276                           const substitute_internal::Arg& a3)
277      ABSL_BAD_CALL_IF(
278          substitute_internal::PlaceholderBitmask(format) != 15,
279          "There were 4 substitution arguments given, but "
280          "this format string is missing its $0-$3, contains one of "
281          "$4-$9, or contains an unescaped $ character (use $$ instead)");
282  void SubstituteAndAppend(std::string* output, const char* format,
283                           const substitute_internal::Arg& a0,
284                           const substitute_internal::Arg& a1,
285                           const substitute_internal::Arg& a2,
286                           const substitute_internal::Arg& a3,
287                           const substitute_internal::Arg& a4)
288      ABSL_BAD_CALL_IF(
289          substitute_internal::PlaceholderBitmask(format) != 31,
290          "There were 5 substitution arguments given, but "
291          "this format string is missing its $0-$4, contains one of "
292          "$5-$9, or contains an unescaped $ character (use $$ instead)");
293  void SubstituteAndAppend(std::string* output, const char* format,
294                           const substitute_internal::Arg& a0,
295                           const substitute_internal::Arg& a1,
296                           const substitute_internal::Arg& a2,
297                           const substitute_internal::Arg& a3,
</pre></code></div>
                <div class="column column_space"><pre><code>305    void PlotFirstOppOutcome(const TStr& OutFNm, const int& NVotes) const;
306    void PlotVoteTrails(const TStr& OutFNm, const int& MinUsrVotes, const bool& No01Prob) const;
307    void PlotVoteTrailGlobal(const TStr& OutFNm) const;
308    void PlotFinalFracVoteCnt(const TStr& OutFNm, const int& MinUsrVotes, const TIntSet& UsrSplitSet) const;
309    void PlotConfusionMatrix(const TStr& OutFNm, const int& MinUsrVotes) const;
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    