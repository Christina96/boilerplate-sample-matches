
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 8.149405772495756%, Tokens: 10</h2>
        <div class="column">
            <h3>snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-linkpred.h</h3>
            <pre><code>1  #ifndef snap_link_pred
2  #define snap_link_pred
3  #include <Snap.h>
4  class TLpPredictor;
5  struct TNodeGrad { 
6    TFlt SumVal;       
7    TFltV SumGradV;    
8    TNodeGrad() : SumVal(0) { }
9    TNodeGrad(const int& NAttr) : SumVal(0), SumGradV(NAttr) { }
10    TNodeGrad(TSIn& SIn) : SumVal(SIn), SumGradV(SIn) { }
11    void Save(TSOut& SOut) const { SumVal.Save(SOut); SumGradV.Save(SOut); }
12    bool operator < (const TNodeGrad& VG) const  { return SumVal < VG.SumVal; }
13  }; 
14  class TEdgeGrad { 
15  public:
16    TFlt Val;       
17    TFltV GradV;    
18    TFltV AttrV;    
19  public:
20    TEdgeGrad() : Val(0) { }
21    TEdgeGrad(const int& NAttr) : Val(0), GradV(NAttr) { }
22    TEdgeGrad(const TFltV& EdgeAttrV) : Val(0), GradV(EdgeAttrV.Len()), AttrV(EdgeAttrV) { }
23    TEdgeGrad(const TEdgeGrad& EG) : Val(EG.Val), GradV(EG.GradV), AttrV(EG.AttrV) { }
24    TEdgeGrad(TSIn& SIn) : Val(SIn), GradV(SIn) { } 
25    void Save(TSOut& SOut) const { Val.Save(SOut); GradV.Save(SOut); }
26    bool operator < (const TEdgeGrad& EG) const  { return Val < EG.Val; }
27  };
28  class TLpExample : public TNodeEDatNet<TInt, TEdgeGrad> {
29  private:
30    typedef TPt<TNodeEDatNet<TInt, TEdgeGrad> > PNet;
31  private:
32    TInt SrcNId;                         
33    TIntV DstNIdV, NolNIdV;              
34    TInt DummyNId;                       
35    THash<TInt, TFlt> PRankH;
36    THash<TInt, TFltV> PrGradH;
37  public:
38    TLpExample() : SrcNId(-1), DummyNId(-1) { CRef.MkRef(); }
39    ~TLpExample() { CRef.UnRef(); }
40    int GetNAttr() const { return BegEI().GetDat().AttrV.Len(); }
41    TNodeI DummyNI() const { return GetNI(DummyNId); }
42    void GetNetAttrV(TVec<TFltV>& AttrV) const;   
43    void GetNodeAttrV(TVec<TFltV>& AttrV) const;  
44    void GetLen2PathAttrV(TVec<TFltV>& AttrV) const;  
45    void SaveAttrV(FILE *F, const bool& NetA, const bool& NodeA, const bool& PathA) const;
46    void InitQGraph();
47    void UpdateQGraph(const TLpPredictor& Predictor);
48    void CalcPageRank();
49    void GenSmallExample1();
50    void GenSmallExample2();
51    void SaveTxt(FILE *F) const;
52    void Dump(const bool& DumpPRank=true, const bool& DumpGrad=false, const bool& DumpNet=false) const;
53    static void LoadTxt(const TStr& FNm, TVec<TLpExample>& ExV);
54  };
55  class TLpPredictor {
56  public:
57    double Alpha;   
58    double B;       
59    double Lambda;  
60    double Z;       
61    TFltV WgtV;     
62  public:
63    TLpPredictor() : Alpha(0.85), B(0.01), Lambda(0.01), Z(0.01) { }
64    double GetFVal(const TFltV& AttrV) const;
65    void GetFGrad(const TFltV& AttrV, TFltV& GradV) const;
66    double GetLossGrad(const TLpExample& Example);
67    double GetLoss(const double& Val) const;
68    double GetLossGrad(const double& Val) const;
69  };
70  namespace __OLD__ {
71  class TLpExample {
72  public:
73    PNGraph Graph;
74    TInt SrcNId;
75    TIntV DstNIdV, NolNIdV;
76    THash<TIntPr, TFltV> EAttrV;
77  public:
78    TLpExample() : Graph(), SrcNId(-1), DstNIdV(), NolNIdV(), EAttrV() { }
79    PNGraph GetGraph() const { return Graph; }
80    const TFltV& GetEAttrV(const TIntPr& Edge) const { return EAttrV.GetDat(Edge); }
81    int Attrs() const { return EAttrV[0].Len(); }
82    void GenSmallExample1();
83    void GenSmallExample2();
84  };
85  class TLpPredictor {
86  private:
87    double Z; 
88  public:
<span onclick='openModal()' class='match'>89    TLpPredictor() : Z(0.01) { }
90    double GetFVal(const TFltV& WgtV, const TFltV& AttrV) const;
91    void GetFGrad(const TFltV& WgtV, const TFltV& AttrV, TFltV& GradV) const;
92    double GetLoss(const double& Val) const;
</span>93    double GetLossGrad(const double& Val) const;
94  };
95  typedef TPair<TFlt, TFltV> TEdgeGrad;
96  class TQGraph : public TNodeEDatNet<TInt, TEdgeGrad> {
97  public:
98    typedef enum { lntUndef, lntSrc, lntDst, lntNoLink, lntDummy } TLpNodeTy;
99  private:
100    int DummyNId;
101    THash<TIntPr, TEdgeGrad> EdgeGradH;  
102    THash<TInt, TEdgeGrad> NormConstH;   
103    THash<TInt, TFlt> PRankH;
104    THash<TInt, TFltV> PrGradH;
105  private:
106    void UpdateNormConst();
107    void UpdateGrad(const double& Alpha, const TIntPr& Edge, TEdgeGrad& Grad);
108  public:
109    TQGraph() : DummyNId(-1) { }
110    int GetDummy() const { return DummyNId; }
111    void MakeGraph(const TLpExample& Example);
112    void UpdateGraph(const TLpExample& Example, const TLpPredictor& Prd, const TFltV& WgtV);
113    void CalcPRankGrad();
114    double GetGradient(const TLpExample& Example, const TLpPredictor& Prd, TFltV& GradV) const;
115    void Dump(const bool& OnlyPRank=true) const;
116  };
117  class TLpBase {
118  private:
119    TLpExample LpData;
120    TLpPredictor LpPred;
121    TQGraph QGraph;
122    TFlt B;      
123    TFlt Alpha;  
124    TFlt Lambda; 
125    TFltV WgtV;  
126  public:
127    TLpBase() { }
128    void CalcDeriv();
129    void TestGrad();
130  };
131  }; 
132  #endif
</code></pre>
        </div>
        <div class="column">
            <h3>snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-euproj.h</h3>
            <pre><code>1  #ifndef euproj_h
2  #define euproj_h
3  #include "mine.h"
4  #include "ciawfb.h"
5  #include "cordis.h"
6  ClassHdTP(TEpBs, PEpBs);
7  ClassTPV(TEpOrg, PEpOrg, TEpOrgV)
8  private:
9    TStr OrgNm, BriefOrgNm;
10    TStr OrgTypeNm;
11    TStr CountryNm;
12    TStrV ProjNmV;
13    TIntIntH ClbOrgIdToFqH;
14    TIntStrVH ClbOrgIdToProjNmVH;
15    TInt SumClbOrgFq;
16  public:
17    TEpOrg(){}
18    TEpOrg(const TStr& _OrgNm, const TStr& _OrgTypeNm, const TStr& _CountryNm):
19      OrgNm(_OrgNm), OrgTypeNm(_OrgTypeNm), CountryNm(_CountryNm){}
20    static PEpOrg New(const TStr& OrgNm, const TStr& OrgTypeNm, const TStr& CountryNm){
21      return new TEpOrg(OrgNm, OrgTypeNm, CountryNm);}
22    ~TEpOrg(){}
23    TEpOrg(TSIn& SIn):
24      OrgNm(SIn), OrgTypeNm(SIn), CountryNm(SIn),
25      ProjNmV(SIn), ClbOrgIdToFqH(SIn),
26      ClbOrgIdToProjNmVH(SIn), SumClbOrgFq(SIn){}
27    static PEpOrg Load(TSIn& SIn){return new TEpOrg(SIn);}
28    void Save(TSOut& SOut){
29      OrgNm.Save(SOut); OrgTypeNm.Save(SOut); CountryNm.Save(SOut);
30      ProjNmV.Save(SOut); ClbOrgIdToFqH.Save(SOut);
31      ClbOrgIdToProjNmVH.Save(SOut); SumClbOrgFq.Save(SOut);}
32    TEpOrg& operator=(const TEpOrg& EpOrg){Fail; return *this;}
33    bool operator==(const TEpOrg& EpOrg) const {
34      return OrgNm==EpOrg.OrgNm;}
35    bool operator<(const TEpOrg& EpOrg) const {
36      return OrgNm<EpOrg.OrgNm;}
37    TStr GetOrgNm() const {return OrgNm;}
38    void PutBriefOrgNm(const TStr& _BriefOrgNm){BriefOrgNm=_BriefOrgNm;}
39    TStr GetBriefOrgNm() const {
40      if (BriefOrgNm.Empty()){return OrgNm;} else {return BriefOrgNm;}}
41    static TStr GetMultiLnOrgNm(
42     const TStr& OrgNm, const int& MnLnLen=10, const char& NewLnCh='\\');
43    TStr GetOrgTypeNm() const {return OrgTypeNm;}
44    TStr GetCountryNm() const {return CountryNm;}
45    int GetProjs() const {return ProjNmV.Len();}
46    TStr GetProjNm(const int& ProjN) const {return ProjNmV[ProjN];}
47    void AddProj(const TStr& ProjNm){ProjNmV.Add(ProjNm);}
48    void GetProjNmV(TStrV& _ProjNmV) const {
49      _ProjNmV=ProjNmV; _ProjNmV.Sort();}
50    int GetClbOrgs() const {return ClbOrgIdToFqH.Len();}
51    int GetClbOrgId(const int& ClbOrgN) const {
52      return ClbOrgIdToFqH.GetKey(ClbOrgN);}
53    TStr GetClbOrgNm(const int& ClbOrgN, const TEpBs* EpBs) const;
54    int GetClbOrgFq(const int& ClbOrgN) const {
<span onclick='openModal()' class='match'>55      return ClbOrgIdToFqH[ClbOrgN];}
56    int GetClbOrgFq(const TStr& ClbOrgNm, const TEpBs* EpBs) const;
57    void GetClbOrgProjNmV(
58     const TStr& ClbOrgNm, TStrV& ProjNmV, const TEpBs* EpBs) const;
59    double GetClbOrgFqPrc(const TStr& ClbOrgNm, const TEpBs* EpBs) const {
</span>60      if (SumClbOrgFq==0){return 0;}
61      else {return GetClbOrgFq(ClbOrgNm, EpBs)/double(SumClbOrgFq);}}
62    void AddClbOrg(const TStr& ClbOrgNm, const TStr& ProjNm, const TEpBs* EpBs);
63    int GetSumClbOrgsFq() const {return SumClbOrgFq;}
64    void GetFqClbOrgIdPrV(TIntPrV& FqClbOrgIdPrV){
65      ClbOrgIdToFqH.GetDatKeyPrV(FqClbOrgIdPrV);}
66  };
67  ClassTPV(TEpCountry, PEpCountry, TEpCountryV)
68  private:
69    TStr CountryNm;
70    TIntIntH OrgIdToFqH;
71    TStrIntH OrgTypeNmToFqH;
72    TStrIntH ProjNmToFqH;
73    TStrIntH ClbCountryNmToFqH;
74    TInt SumClbCountriesFq;
75  public:
76    TEpCountry(){}
77    TEpCountry(const TStr& _CountryNm):
78      CountryNm(_CountryNm){}
79    static PEpCountry New(const TStr& CountryNm){
80      return new TEpCountry(CountryNm);}
81    ~TEpCountry(){}
82    TEpCountry(TSIn& SIn):
83      CountryNm(SIn), OrgIdToFqH(SIn),
84      OrgTypeNmToFqH(SIn), ProjNmToFqH(SIn),
85      ClbCountryNmToFqH(SIn), SumClbCountriesFq(SIn){}
86    static PEpCountry Load(TSIn& SIn){return new TEpCountry(SIn);}
87    void Save(TSOut& SOut){
88      CountryNm.Save(SOut); OrgIdToFqH.Save(SOut);
89      OrgTypeNmToFqH.Save(SOut); ProjNmToFqH.Save(SOut);
90      ClbCountryNmToFqH.Save(SOut); SumClbCountriesFq.Save(SOut);}
91    TEpCountry& operator=(const TEpCountry& EpCountry){Fail; return *this;}
92    bool operator==(const TEpCountry& EpCountry) const {
93      return CountryNm==EpCountry.CountryNm;}
94    bool operator<(const TEpCountry& EpCountry) const {
95      return CountryNm<EpCountry.CountryNm;}
96    TStr GetCountryNm() const {return CountryNm;}
97    void AddOrg(const TStr& OrgNm, const TEpBs* EpBs);
98    void AddOrgType(const TStr& OrgTypeNm){OrgTypeNmToFqH.AddDat(OrgTypeNm)++;}
99    int GetOrgs() const {return OrgIdToFqH.Len();}
100    int GetOrgId(const int& OrgN) const {return OrgIdToFqH.GetKey(OrgN);}
101    TStr GetOrgNm(const int& OrgN, const TEpBs* EpBs) const;
102    int GetOrgFq(const int& OrgN) const {return OrgIdToFqH[OrgN];}
103    int GetOrgFqSum() const {
104      int Orgs=GetOrgs(); int OrgFqSum=0;
105      for (int OrgN=0; OrgN<Orgs; OrgN++){OrgFqSum+=GetOrgFq(OrgN);}
106      return OrgFqSum;}
107    void AddProj(const TStr& ProjNm){ProjNmToFqH.AddDat(ProjNm)++;}
108    int GetProjs() const {return ProjNmToFqH.Len();}
109    TStr GetProjNm(const int& ProjN) const {return ProjNmToFqH.GetKey(ProjN);}
110    void GetProjNmV(TStrV& ProjNmV) const {
111      ProjNmToFqH.GetKeyV(ProjNmV); ProjNmV.Sort();}
112    int GetClbCountries() const {return ClbCountryNmToFqH.Len();}
113    TStr GetClbCountryNm(const int& ClbCountryN) const {return ClbCountryNmToFqH.GetKey(ClbCountryN);}
114    int GetClbCountryFq(const int& ClbCountryN) const {return ClbCountryNmToFqH[ClbCountryN];}
115    double GetClbCountryFqPrc(const int& ClbCountryN) const {
116      if (SumClbCountriesFq==0){return 0;}
117      else {return GetClbCountryFq(ClbCountryN)/double(SumClbCountriesFq);}}
118    void AddClbCountry(const TStr& ClbCountryNm){
119      ClbCountryNmToFqH.AddDat(ClbCountryNm)++; SumClbCountriesFq++;}
120    int GetSumClbCountriesFq() const {return SumClbCountriesFq;}
121    void GetFqClbCountryNmPrV(TIntStrPrV& FqClbCountryNmPrV){
122      ClbCountryNmToFqH.GetDatKeyPrV(FqClbCountryNmPrV);}
123  };
124  ClassTPV(TEpOfficer, PEpOfficer, TEpOfficerV)
125  private:
126    TStr OfficerNm;
127    TIntIntH OrgIdToFqH;
128    TStrH ProjNmH;
129    TStrIntH CountryNmToFqH;
130  public:
131    TEpOfficer(){}
132    TEpOfficer(const TStr& _OfficerNm):
133      OfficerNm(_OfficerNm){}
134    static PEpOfficer New(const TStr& OfficerNm){
135      return new TEpOfficer(OfficerNm);}
136    ~TEpOfficer(){}
137    TEpOfficer(TSIn& SIn):
138      OfficerNm(SIn), OrgIdToFqH(SIn), ProjNmH(SIn),
139      CountryNmToFqH(SIn){}
140    static PEpOfficer Load(TSIn& SIn){return new TEpOfficer(SIn);}
141    void Save(TSOut& SOut){
142      OfficerNm.Save(SOut); OrgIdToFqH.Save(SOut); ProjNmH.Save(SOut);
143      CountryNmToFqH.Save(SOut);}
144    TEpOfficer& operator=(const TEpOfficer& EpOfficer){Fail; return *this;}
145    TStr GetOfficerNm() const {return OfficerNm;}
146    void AddOrg(const TStr& OrgNm, const TEpBs* EpBs);
147    void AddProj(const TStr& ProjNm){ProjNmH.AddDat(ProjNm)++;}
148    int GetProjs() const {return ProjNmH.Len();}
149    TStr GetProjNm(const int& ProjN) const {return ProjNmH.GetKey(ProjN);}
150    void GetProjNmV(TStrV& ProjNmV) const {
151      ProjNmH.GetKeyV(ProjNmV); ProjNmV.Sort();}
152    void AddCountry(const TStr& CountryNm){CountryNmToFqH.AddDat(CountryNm)++;}
153    void GetFqCountryPrV(TIntStrPrV& FqCountryPrV) const {
154      CountryNmToFqH.GetDatKeyPrV(FqCountryPrV);}
155  };
156  ClassTPV(TEpProj, PEpProj, TEpProjV)
157  private:
158    TStr ProjNm, ProjRef;
159    TStr DomainNm, UnitNm;
160    TStr OfficerNm;
161    TIntStrKdV OrgIdRoleKdV;
162  public:
163    TEpProj(){}
164    TEpProj(const TStr& _ProjNm, const TStr& _ProjRef, const TStr& _DomainNm,
165     const TStr& _UnitNm, const TStr& _OfficerNm):
166      ProjNm(_ProjNm), ProjRef(_ProjRef),
167      DomainNm(_DomainNm), UnitNm(_UnitNm),
168      OfficerNm(_OfficerNm){}
169    static PEpProj New(const TStr& ProjNm, const TStr& ProjRef,
170     const TStr& DomainNm, const TStr& UnitNm, const TStr& OfficerNm){
171      return new TEpProj(ProjNm, ProjRef, DomainNm, UnitNm, OfficerNm);}
172    ~TEpProj(){}
173    TEpProj(TSIn& SIn):
174      ProjNm(SIn), ProjRef(SIn),
175      DomainNm(SIn), UnitNm(SIn),
176      OfficerNm(SIn), OrgIdRoleKdV(SIn){}
177    static PEpProj Load(TSIn& SIn){return new TEpProj(SIn);}
178    void Save(TSOut& SOut){
179      ProjNm.Save(SOut); ProjRef.Save(SOut);
180      DomainNm.Save(SOut); UnitNm.Save(SOut);
181      OfficerNm.Save(SOut); OrgIdRoleKdV.Save(SOut);}
182    TEpProj& operator=(const TEpProj& EpProj){Fail; return *this;}
183    TStr GetProjNm() const {return ProjNm;}
184    TStr GetProjRef() const {return ProjRef;}
185    TStr GetDomainNm() const {return DomainNm;}
186    TStr GetUnitNm() const {return UnitNm;}
187    TStr GetOfficerNm() const {return OfficerNm;}
188    void AddOrgNmRole(const TStr& OrgNm, const TStr& OrgRoleNm, const TEpBs* EpBs);
189    int GetRoles() const {return OrgIdRoleKdV.Len();}
190    void GetRole(const int& RoleN, int& OrgId, TStr& RoleNm) const {
191      OrgId=OrgIdRoleKdV[RoleN].Key; RoleNm=OrgIdRoleKdV[RoleN].Dat;}
192    TStr GetRole(const TStr& OrgNm, const TEpBs* EpBs) const;
193    int GetOrgs() const {return OrgIdRoleKdV.Len();}
194    int GetOrgId(const int& OrgN) const {return OrgIdRoleKdV[OrgN].Key;}
195    TStr GetOrgNm(const int& OrgN, const TEpBs* EpBs) const;
196    TStr GetOrgRoleNm(const int& OrgN) const {return OrgIdRoleKdV[OrgN].Dat;}
197  };
198  ClassTPV(TEpDomain, PEpDomain, TEpDomainV)
199  private:
200    TStr DomainNm;
201    TIntIntH OrgIdToFqH;
202    TStrH ProjNmH;
203    TStrIntH CountryNmToFqH;
204  public:
205    TEpDomain(){}
206    TEpDomain(const TStr& _DomainNm):
207      DomainNm(_DomainNm){}
208    static PEpDomain New(const TStr& DomainNm){
209      return new TEpDomain(DomainNm);}
210    ~TEpDomain(){}
211    TEpDomain(TSIn& SIn):
212      DomainNm(SIn), OrgIdToFqH(SIn), ProjNmH(SIn),
213      CountryNmToFqH(SIn){}
214    static PEpDomain Load(TSIn& SIn){return new TEpDomain(SIn);}
215    void Save(TSOut& SOut){
216      DomainNm.Save(SOut); OrgIdToFqH.Save(SOut); ProjNmH.Save(SOut);
217      CountryNmToFqH.Save(SOut);}
218    TEpDomain& operator=(const TEpDomain& EpDomain){Fail; return *this;}
219    TStr GetDomainNm() const {return DomainNm;}
220    void AddOrg(const TStr& OrgNm, const TEpBs* EpBs);
221    int GetOrgs() const {return OrgIdToFqH.Len();}
222    int GetOrgId(const int& OrgN) const {return OrgIdToFqH.GetKey(OrgN);}
223    TStr GetOrgNm(const int& OrgN, const TEpBs* EpBs) const;
224    int GetOrgFq(const int& OrgN) const {return OrgIdToFqH[OrgN];}
225    bool IsOrg(const TStr& OrgNm, TInt& OrgFq, const TEpBs* EpBs) const;
226    void AddProj(const TStr& ProjNm){ProjNmH.AddDat(ProjNm)++;}
227    int GetProjs() const {return ProjNmH.Len();}
228    TStr GetProjNm(const int& ProjN) const {return ProjNmH.GetKey(ProjN);}
229    void GetProjNmV(TStrV& ProjNmV) const {
230      ProjNmH.GetKeyV(ProjNmV); ProjNmV.Sort();}
231    void AddCountry(const TStr& CountryNm){CountryNmToFqH.AddDat(CountryNm)++;}
232  };
233  ClassTPV(TEpUnit, PEpUnit, TEpUnitV)
234  private:
235    TStr UnitNm;
236    TIntIntH OrgIdToFqH;
237    TStrH ProjNmH;
238    TStrIntH CountryNmToFqH;
239  public:
240    TEpUnit(){}
241    TEpUnit(const TStr& _UnitNm):
242      UnitNm(_UnitNm){}
243    static PEpUnit New(const TStr& UnitNm){
244      return new TEpUnit(UnitNm);}
245    ~TEpUnit(){}
246    TEpUnit(TSIn& SIn):
247      UnitNm(SIn), OrgIdToFqH(SIn), ProjNmH(SIn),
248      CountryNmToFqH(SIn){}
249    static PEpUnit Load(TSIn& SIn){return new TEpUnit(SIn);}
250    void Save(TSOut& SOut){
251      UnitNm.Save(SOut); OrgIdToFqH.Save(SOut); ProjNmH.Save(SOut);
252      CountryNmToFqH.Save(SOut);}
253    TEpUnit& operator=(const TEpUnit& EpUnit){Fail; return *this;}
254    TStr GetUnitNm() const {return UnitNm;}
255    void AddOrg(const TStr& OrgNm, const TEpBs* EpBs);
256    int GetOrgs() const {return OrgIdToFqH.Len();}
257    int GetOrgId(const int& OrgN) const {return OrgIdToFqH.GetKey(OrgN);}
258    TStr GetOrgNm(const int& OrgN, const TEpBs* EpBs) const;
259    int GetOrgFq(const int& OrgN) const {return OrgIdToFqH[OrgN];}
260    bool IsOrg(const TStr& OrgNm, TInt& OrgFq, const TEpBs* EpBs) const;
261    void AddProj(const TStr& ProjNm){ProjNmH.AddDat(ProjNm)++;}
262    int GetProjs() const {return ProjNmH.Len();}
263    TStr GetProjNm(const int& ProjN) const {return ProjNmH.GetKey(ProjN);}
264    void GetProjNmV(TStrV& ProjNmV) const {
265      ProjNmH.GetKeyV(ProjNmV); ProjNmV.Sort();}
266    void AddCountry(const TStr& CountryNm){CountryNmToFqH.AddDat(CountryNm)++;}
267  };
268  ClassTP(TEpBs, PEpBs)
269  private:
270    PSs Ss;
271    THash<TStr, PEpOrg> NmToOrgH;
272    THash<TStr, PEpCountry> NmToCountryH;
273    THash<TStr, PEpOfficer> NmToOfficerH;
274    THash<TStr, PEpProj> NmToProjH;
275    THash<TStr, PEpDomain> NmToDomainH;
276    THash<TStr, PEpUnit> NmToUnitH;
277  public:
278    TEpBs(const PSs& _Ss): Ss(_Ss){}
279    static PEpBs New(const PSs& Ss){return new TEpBs(Ss);}
280    ~TEpBs(){}
281    TEpBs(TSIn& SIn):
282      Ss(SIn),
283      NmToOrgH(SIn), NmToCountryH(SIn), NmToOfficerH(SIn),
284      NmToProjH(SIn), NmToDomainH(SIn), NmToUnitH(SIn){}
285    static PEpBs Load(TSIn& SIn){return new TEpBs(SIn);}
286    void Save(TSOut& SOut){
287      Ss.Save(SOut);
288      NmToOrgH.Save(SOut); NmToCountryH.Save(SOut); NmToOfficerH.Save(SOut);
289      NmToProjH.Save(SOut); NmToDomainH.Save(SOut); NmToUnitH.Save(SOut);}
290    TEpBs& operator=(const TEpBs& EpBs){Fail; return *this;}
291    bool IsOrg(const TStr& OrgNm, PEpOrg& Org) const {
292      return NmToOrgH.IsKeyGetDat(OrgNm, Org);}
293    bool IsOrg(const TStr& OrgNm) const {
294      PEpOrg Org; return IsOrg(OrgNm, Org);}
295    void AddOrg(const PEpOrg& Org){
296      NmToOrgH.AddDat(Org->GetOrgNm(), Org);}
297    int GetOrgs() const {return NmToOrgH.Len();}
298    PEpOrg GetOrg(const int& OrgId) const {return NmToOrgH[OrgId];}
299    PEpOrg GetOrg(const TStr& OrgNm) const {return NmToOrgH.GetDat(OrgNm);}
300    int GetOrgId(const TStr& OrgNm) const {return NmToOrgH.GetKeyId(OrgNm);}
301    void GetOrgNmV(TStrV& OrgNmV) const {
302      NmToOrgH.GetKeyV(OrgNmV); OrgNmV.Sort();}
303    bool IsCountry(const TStr& CountryNm, PEpCountry& Country) const {
304      return NmToCountryH.IsKeyGetDat(CountryNm, Country);}
305    void AddCountry(const PEpCountry& Country){
306      NmToCountryH.AddDat(Country->GetCountryNm(), Country);}
307    int GetCountries() const {return NmToCountryH.Len();}
308    int GetCountryN(const TStr& CountryNm) const {return NmToCountryH.GetKeyId(CountryNm);}
309    PEpCountry GetCountry(const int& CountryN) const {return NmToCountryH[CountryN];}
310    PEpCountry GetCountry(const TStr& CountryNm) const {return NmToCountryH.GetDat(CountryNm);}
311    void GetCountryNmV(TStrV& CountryNmV) const {
312      NmToCountryH.GetKeyV(CountryNmV); CountryNmV.Sort();}
313    bool IsOfficer(const TStr& OfficerNm, PEpOfficer& Officer) const {
314      return NmToOfficerH.IsKeyGetDat(OfficerNm, Officer);}
315    void AddOfficer(const PEpOfficer& Officer){
316      NmToOfficerH.AddDat(Officer->GetOfficerNm(), Officer);}
317    int GetOfficers() const {return NmToOfficerH.Len();}
318    PEpOfficer GetOfficer(const int& OfficerN) const {return NmToOfficerH[OfficerN];}
319    PEpOfficer GetOfficer(const TStr& OfficerNm) const {return NmToOfficerH.GetDat(OfficerNm);}
320    void GetOfficerNmV(TStrV& OfficerNmV) const {
321      NmToOfficerH.GetKeyV(OfficerNmV); OfficerNmV.Sort();}
322    bool IsProj(const TStr& ProjNm, PEpProj& Proj) const {
323      return NmToProjH.IsKeyGetDat(ProjNm, Proj);}
324    bool IsProj(const TStr& ProjNm) const {
325      PEpProj Proj; return IsProj(ProjNm, Proj);}
326    void AddProj(const PEpProj& Proj){
327      NmToProjH.AddDat(Proj->GetProjNm(), Proj);}
328    int GetProjs() const {return NmToProjH.Len();}
329    PEpProj GetProj(const int& ProjN) const {return NmToProjH[ProjN];}
330    PEpProj GetProj(const TStr& ProjNm) const {return NmToProjH.GetDat(ProjNm);}
331    void GetProjNmV(TStrV& ProjNmV) const {
332      NmToProjH.GetKeyV(ProjNmV); ProjNmV.Sort();}
333    bool IsDomain(const TStr& DomainNm, PEpDomain& Domain) const {
334      return NmToDomainH.IsKeyGetDat(DomainNm, Domain);}
335    void AddDomain(const PEpDomain& Domain){
336      NmToDomainH.AddDat(Domain->GetDomainNm(), Domain);}
337    int GetDomains() const {return NmToDomainH.Len();}
338    PEpDomain GetDomain(const int& DomainN) const {return NmToDomainH[DomainN];}
339    PEpDomain GetDomain(const TStr& DomainNm) const {return NmToDomainH.GetDat(DomainNm);}
340    void GetDomainNmV(TStrV& DomainNmV) const {
341      NmToDomainH.GetKeyV(DomainNmV); DomainNmV.Sort();}
342    bool IsUnit(const TStr& UnitNm, PEpUnit& Unit) const {
343      return NmToUnitH.IsKeyGetDat(UnitNm, Unit);}
344    void AddUnit(const PEpUnit& Unit){
345      NmToUnitH.AddDat(Unit->GetUnitNm(), Unit);}
346    int GetUnits() const {return NmToUnitH.Len();}
347    PEpUnit GetUnit(const int& UnitN) const {return NmToUnitH[UnitN];}
348    PEpUnit GetUnit(const TStr& UnitNm) const {return NmToUnitH.GetDat(UnitNm);}
349    static TStr GetUnitDNm(const TStr& UnitNm);
350    void GetUnitNmV(TStrV& UnitNmV) const {
351      NmToUnitH.GetKeyV(UnitNmV); UnitNmV.Sort();}
352    void GetOrgIdSetV(const int& OrgId,
353     const int& Depth, TBoolV& OrgIdSetV, int& OrgIdSetVTrues) const;
354    PMom GetDistMom(const int& OrgId) const;
355    static PEpBs GetSelEpBs(const PSs& Ss,
356     const TStrV& SelOrgTypeNmV, const TStrV& SelCountryNmV,
357     const TStrV& SelDomainNmV, const TStrV& SelUnitNmV,
358     const TStrV& SelOfficerNmV, const TStrV& SelProjNmV);
359    PEpBs GetSelEpBs(
360     const TStrV& SelOrgTypeNmV, const TStrV& SelCountryNmV,
361     const TStrV& SelDomainNmV, const TStrV& SelUnitNmV,
362     const TStrV& SelOfficerNmV, const TStrV& SelProjNmV) const;
363    PEpBs GetSelEpBs(
364     const TStr& SelOrgTypeNm, const TStr& SelCountryNm,
365     const TStr& SelDomainNm, const TStr& SelUnitNm,
366     const TStr& SelOfficerNm, const TStr& SelProjNm) const;
367    static PEpBs LoadTxt(const TStr& FNm);
368    static PEpBs LoadBin(const TStr& FNm){
369      TFIn FIn(FNm); return new TEpBs(FIn);}
370    void SaveBin(const TStr& FNm){
371      TFOut FOut(FNm); Save(FOut);}
372    static PEpBs LoadBinOrTxt(const TStr& BinFNm, const TStr& TxtFNm);
373    void LoadBriefOrgNm(const TStr& FNm) const;
374    void SaveTxtCountryClb(const TStr& TxtFNm, const TStr& GraphFNm) const;
375    void SaveCountryClbTree(const TStr& CountryNm, const TStr& TreeFNm);
376    void SaveTxtCountryClbPerCap(
377     const TStr& TxtFNm, const TStr& GraphFNm, const PCiaWFBBs& CiaWFBBs) const;
378    void SaveTxtOrgClb(const TStr& FNm) const;
379    void SaveTxtDomainClb(const TStr& TxtFNm, const TStr& GraphFNm) const;
380    void SaveTxtUnitClb(const TStr& TxtFNm, const TStr& GraphFNm) const;
381    void SaveTxtOrgHub(const TStr& CountryHubFNm, const TStr& DomainHubFNm,
382     const TStr& UnitHubFNm) const;
383    void SaveOrgConnectivity(const TStr& TxtFNm, const TStr& GraphFNm,
384     const int& MnClbOrgFq) const;
385    void SaveOrgConnectivity(const TStr& TxtFNm, const TStr& GraphFNm,
386     const int& MnClbOrgFq, const int& MxClbOrgFq) const;
387    void SaveOrgSmallWorld(const TStr& TxtFNm, const TStr& TreeFNm) const;
388    void SaveOfficerStat(const TStr& FNm, const PBowDocBs& EpBowDocBs) const;
389    void SaveOrgStat(const TStr& FNm, const PBowDocBs& EpBowDocBs) const;
390    void SaveDomainStat(const TStr& FNm, const PBowDocBs& EpBowDocBs) const;
391    void SaveUnitStat(const TStr& FNm, const PBowDocBs& EpBowDocBs) const;
392    void SaveCountryStat(const TStr& FNm, const PBowDocBs& EpBowDocBs) const;
393    void SaveTxtXmlGraph(const TStr& TxtFNm, const TStr& XmlFNm) const;
394    void SaveOrgDistTree(const TStr& FNm, const TStr& OrgNmWc) const;
395    void SaveDomainSim(const TStr& FNm, const PBowDocBs& EpBowDocBs,
396     const double& SimSumPrc, const int& MxKws) const;
397    void SaveUnitSim(const TStr& FNm, const PBowDocBs& EpBowDocBs,
398     const double& SimSumPrc, const int& MxKws) const;
399    void SaveOfficerSim(const TStr& GraphFNm, const PBowDocBs& EpBowDocBs,
400     const double& SimSumPrc, const int& MxKws) const;
401    void SaveOrgPowerDist(const TStr& TxtFNm) const;
402    void SaveCountryProjects(const TStr& TxtFNm,
403     const PCordisEuProjBs& EuProjBs, const TStr& CountryNm) const;
404    void GetClbWgtProjNmPrV(
405     TFltStrPrV& ClbWgtProjNmPrV, const int& DumpTopProjs=0) const;
406    void GetBestClbWgtProjNmV(const int& BestProjs, TStrV& ProjNmV);
407  };
408  #endif
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-linkpred.h</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-euproj.h</div>
                </div>
                <div class="column column_space"><pre><code>89    TLpPredictor() : Z(0.01) { }
90    double GetFVal(const TFltV& WgtV, const TFltV& AttrV) const;
91    void GetFGrad(const TFltV& WgtV, const TFltV& AttrV, TFltV& GradV) const;
92    double GetLoss(const double& Val) const;
</pre></code></div>
                <div class="column column_space"><pre><code>55      return ClbOrgIdToFqH[ClbOrgN];}
56    int GetClbOrgFq(const TStr& ClbOrgNm, const TEpBs* EpBs) const;
57    void GetClbOrgProjNmV(
58     const TStr& ClbOrgNm, TStrV& ProjNmV, const TEpBs* EpBs) const;
59    double GetClbOrgFqPrc(const TStr& ClbOrgNm, const TEpBs* EpBs) const {
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    