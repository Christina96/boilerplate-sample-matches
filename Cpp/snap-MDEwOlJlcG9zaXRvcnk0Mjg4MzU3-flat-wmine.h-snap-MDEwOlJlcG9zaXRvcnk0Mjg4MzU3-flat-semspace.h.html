
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 6.20384047267356%, Tokens: 11</h2>
        <div class="column">
            <h3>snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-wmine.h</h3>
            <pre><code>1  #ifndef wmine_h
2  #define wmine_h
3  #include "tmine.h"
4  ClassTP(TWebLog, PWebLog)
5  private:
6    TStrIntH UsrNmToClicksH;
7    TStrIntH UrlNmToClicksH;
8    TIntPrV UsrIdUrlIdPrV;
9    TIntPrV UrlIdUsrIdPrV;
10  public:
11    TWebLog():
12      UsrNmToClicksH(), UrlNmToClicksH(),
13      UsrIdUrlIdPrV(), UrlIdUsrIdPrV(){}
14    static PWebLog New(){return new TWebLog();}
15    TWebLog(const TWebLog&){Fail;}
16    TWebLog(TSIn& SIn):
17      UsrNmToClicksH(SIn), UrlNmToClicksH(SIn),
18      UsrIdUrlIdPrV(SIn), UrlIdUsrIdPrV(SIn){}
19    static PWebLog Load(TSIn& SIn){return new TWebLog(SIn);}
20    void Save(TSOut& SOut){
21      UsrNmToClicksH.Save(SOut); UrlNmToClicksH.Save(SOut);
22      UsrIdUrlIdPrV.Save(SOut); UrlIdUsrIdPrV.Save(SOut);}
23    TWebLog& operator=(const TWebLog&){Fail; return *this;}
24    int GetUsrs() const {return UsrNmToClicksH.Len();}
25    int GetUrls() const {return UrlNmToClicksH.Len();}
26    TStr GetUsrNm(const int& UsrId) const {return UsrNmToClicksH.GetKey(UsrId);}
<span onclick='openModal()' class='match'>27    TStr GetUrlNm(const int& UrlId) const {return UrlNmToClicksH.GetKey(UrlId);}
28    int GetClicks() const {return UsrIdUrlIdPrV.Len();}
</span>29    void GetUsrIdUrlIdPr(const int& PrN, int& UsrId, int& UrlId){
30      TIntPr& Pr=UsrIdUrlIdPrV[PrN]; UsrId=Pr.Val1; UrlId=Pr.Val2;}
31    void GetUrlIdUsrIdPr(const int& PrN, int& UrlId, int& UsrId){
32      TIntPr& Pr=UrlIdUsrIdPrV[PrN]; UrlId=Pr.Val1; UsrId=Pr.Val2;}
33    static void GetUsrUrlRankStep(
34     const double& TaxFact, const TIntPrV& LRIdPrV,
35     TFltIntKdV& WgtLIdKdV, TFltIntKdV& WgtRIdKdV, double& WgtDiff);
36    void GetUsrUrlRank(TFltIntKdV& WgtUsrIdKdV, TFltIntKdV& WgtUrlIdKdV) const;
37    void SaveTxtUURank(const PSOut& SOut,
38     const TFltIntKdV& WgtUsrIdKdV, const TFltIntKdV& WgtUrlIdKdV,
39     const int& TopRecs=100) const;
40    void SaveXmlUURank(const PSOut& SOut,
41     const TFltIntKdV& WgtUsrIdKdV, const TFltIntKdV& WgtUrlIdKdV,
42     const int& TopRecs=100) const;
43    PBowDocBs GetBowDocBs(
44     const TStrIntH& DocNmToFqH, const TIntPrV& DIdWIdPrV,
45     const TStrIntH& WordStrToFqH, const int& MnFq) const;
46    PBowDocBs GetUsrBowDocBsFromUrl(const int& MnFq) const;
47    PBowDocBs GetUrlBowDocBsFromUsr(const int& MnFq) const;
48    PBowDocBs GetUsrBowDocBsFromHtml(const int& MnFq, const TStr& WebRootFPath);
49    static PWebLog LoadBin(const TStr& FNm){
50      TFIn SIn(FNm); return Load(SIn);}
51    void SaveBin(const TStr& FNm){
52      TFOut SOut(FNm); Save(SOut);}
53    static PWebLog LoadTxt(const TStr& FNm, const int& MxRecs=-1,
54     const TSsFmt& SsFmt=ssfTabSep, const bool& HdLnP=false);
55    static PWebLog LoadBinOrTxt(
56     const TStr& BinFNm, const TStr& TxtFNm, const int& MxRecs=-1);
57    static PWebLog LoadYbTxt(const TStr& FNm, const int& MxRecs=-1);
58  };
59  #endif
</code></pre>
        </div>
        <div class="column">
            <h3>snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-semspace.h</h3>
            <pre><code>1  ClassTP(TSemSpace, PSemSpace) 
2  protected:
3      typedef PSemSpace (*TSemSpcLoad)(TSIn& SIn);
4      typedef TFunc<TSemSpcLoad> TSemSpcLoadF;
5      static THash<TStr, TSemSpcLoadF> TypeToLoadFH;
6      static bool Reg(const TStr& TypeNm, const TSemSpcLoadF& LoadF);
7  protected:
8      TStr MethodeType;
9  public:
10      TSemSpace(const TStr& MtdTyp): MethodeType(MtdTyp) { }
11      TSemSpace(TSIn& SIn) { MethodeType.Load(SIn); }
12      virtual ~TSemSpace() { };
13      static PSemSpace Load(TSIn &SIn);
14      virtual void Save(TSOut& SOut) const { 
15          GetTypeNm(*this).Save(SOut); MethodeType.Save(SOut); }
16      virtual PBowDocBs Project(const PBowDocBs& BowDocBs, 
17          const PBowDocWgtBs& BowDocWgtBs, const TIntV& DIdV, 
18          const int& Vecs, const bool& NormP) const = 0;
19      virtual PBowSpV ProjectSpV(const PBowSpV& SpV, 
20          const int& Vecs, const bool& NormP) const = 0;
21      virtual void ProjectSpV(const PBowSpV& SpV, const int& Vecs, 
22          const bool& NormP, TIntFltKdV& ProjSpV) const = 0;
23      virtual void ProjectSpV(const PBowSpV& SpV, const int& Vecs, 
24          const bool& NormP, TFltV& ProjSpV) const = 0;
25      virtual void ProjectSpV(const TIntFltKdV& SpV, const int& Vecs, 
26          const bool& NormP, TIntFltKdV& ProjSpV)const  = 0;
27      virtual void ProjectSpV(const TIntFltKdV& SpV, const int& Vecs, 
28          const bool& NormP, TFltV& ProjSpV)const  = 0;
29      virtual void ProjectV(const TFltV& FullV, const int& Vecs, 
30          const bool& NormP, TFltV& ProjV) const = 0;
31      virtual void GetVec(const int& VecN, TFltV& Vec)const  = 0;
32      virtual int GetVecs() const = 0;
33      virtual int GetVecLen() const = 0;
34      double GetAvgApprox(const TVec<PBowSpV>& BowSpV, const int& Dim) const;
35      int GetDimNeededForApprox(const TVec<PBowSpV>& BowSpV, 
36          const double& ApproxThresh, double& ApproxVal, const int& MxDimDiff = 5) const;
37      PBowDocPart GetBowDocPart(const PBowDocBs& BowDocBs, 
38          const int& StartVecN = 0, const int _Vecs = -1,
39          const double& Eps = 0.0) const;
40      void GetVecBowSpV(const int& VecN, PBowSpV& PosSpV, PBowSpV& NegSpV,
41          const double& Eps = 0.0) const;
42      void GetWords(PBowDocBs BowDocBs, const int& VecN, 
43          const int& TopWords, const double& TopWordsWgtPrc, 
44          TStrFltPrV& PosWordStrWgtV, TStrFltPrV& NegWordStrWgtV) const;
45      const TStr& GetMethodeType() const { return MethodeType; }
46      static PSemSpace LoadBin(const TStr& FNm) { TFIn FIn(FNm); return Load(FIn); }
47      void SaveBin(const TStr& FNm) const { TFOut FOut(FNm); this->Save(FOut); }
48      void SaveTxt(const TStr& FNm, PBowDocBs BowDocBs, const int& TopWords, 
49          const double& TopWordsWgtPrc, const bool& ShowWgt = true) const;
50      static void SaveTxtStat(const TStr& FNm, PSemSpace SemSp1, PBowDocBs BowBs1, 
51          PBowDocWgtBs BowWgt1, PSemSpace SemSp2, PBowDocBs BowBs2, PBowDocWgtBs BowWgt2, 
52          const bool& NormP, const TIntV& DIdV = TIntV()) ;
53      void SaveApproxStat(const TStr& FNm, const TVec<PBowSpV>& BowSpV, 
54          const int& Step = 5) const;
55  };
56  class TVecSemSpace: TSemSpace {
57  private:
58      static bool IsReg;
59      static bool MkReg(){return TSemSpace::Reg(TTypeNm<TVecSemSpace>(), &Load);}
60  private:
61      TVec<TFltV> BasisV;
62  public:
63      TVecSemSpace(const TVec<TFltV>& _BasisV, const TStr& _MethodeType): 
64        TSemSpace(_MethodeType), BasisV(_BasisV) { };
65      static PSemSpace New(TVec<TFltV>& _BasisV, const TStr& _MethodeType) { 
66          return new TVecSemSpace(_BasisV, _MethodeType); }
67      TVecSemSpace(const TFltVV& BasisVV, const TStr& _MethodeType);
68      static PSemSpace New(const TFltVV& BasisVV, const TStr& _MethodeType) { 
69          return new TVecSemSpace(BasisVV, _MethodeType); }
70      TVecSemSpace(PSVMTrainSet Set, PPartialGS R, 
71          const TVec<TFltV>& DrctV, const TStr& _MethodeType);
72      static PSemSpace New(PSVMTrainSet Set, PPartialGS R, 
73          const TVec<TFltV>& DrctV, const TStr& _MethodeType) {
74              return new TVecSemSpace(Set, R, DrctV, _MethodeType); }
75      TVecSemSpace(const TStr& MatlabFName);
76      static PSemSpace LoadMatlab(const TStr& MatlabFName) {
77          return new TVecSemSpace(MatlabFName); }
78      TVecSemSpace(const TStr& MatlabFName, const TStr& MapFName);
79      static PSemSpace LoadMatlab(const TStr& MatlabFName, const TStr& MapFName) {
80          return new TVecSemSpace(MatlabFName, MapFName); }
81      TVecSemSpace(TSIn &SIn): TSemSpace(SIn) { BasisV.Load(SIn); };
82      static PSemSpace Load(TSIn &SIn) { return new TVecSemSpace(SIn); }
83      void Save(TSOut &SOut) const { TSemSpace::Save(SOut); BasisV.Save(SOut); }
84      PBowDocBs Project(const PBowDocBs& BowDocBs, const PBowDocWgtBs& BowDocWgtBs, 
85          const TIntV& DIdV, const int& Vecs, const bool& NormP) const;
86      PBowSpV ProjectSpV(const PBowSpV& SpV, const int& Vecs, 
87          const bool& NormP) const;
88      void ProjectSpV(const PBowSpV& SpV, const int& Vecs, 
89          const bool& NormP, TIntFltKdV& ProjSpV) const;
90      void ProjectSpV(const PBowSpV& SpV, const int& Vecs, 
91          const bool& NormP, TFltV& ProjV) const;
92      void ProjectSpV(const TIntFltKdV& SpV, const int& Vecs, 
93          const bool& NormP, TIntFltKdV& ProjSpV) const;
94      void ProjectSpV(const TIntFltKdV& SpV, const int& Vecs, 
95          const bool& NormP, TFltV& ProjV) const;
96      void ProjectV(const TFltV& FullV, const int& Vecs, 
97          const bool& NormP, TFltV& ProjV) const;
98      void GetVec(const int& VecN, TFltV& Vec) const { Vec = BasisV[VecN]; }
99      int GetVecs() const { return BasisV.Len(); }
100      int GetVecLen() const { return BasisV.Empty() ? 0 : BasisV[0].Len(); };
101  };
102  class TSpVecSemSpace: TSemSpace {
103  private:
104      static bool IsReg;
105      static bool MkReg(){return TSemSpace::Reg(TTypeNm<TSpVecSemSpace>(), &Load);}
106  private:
107      TInt VecDim;
108      TVec<TIntFltKdV> BasisV;
109  public:
110      TSpVecSemSpace(const TVec<TIntFltKdV>& _BasisV, const TStr& _MethodeType);
111      static PSemSpace New(TVec<TIntFltKdV>& _BasisV, const TStr& _MethodeType) { 
112          return new TSpVecSemSpace(_BasisV, _MethodeType); }
113      TSpVecSemSpace(TSIn &SIn): TSemSpace(SIn) { BasisV.Load(SIn); };
114      static PSemSpace Load(TSIn &SIn) { return new TSpVecSemSpace(SIn); }
115      void Save(TSOut &SOut) const { TSemSpace::Save(SOut); BasisV.Save(SOut); }
116      PBowDocBs Project(const PBowDocBs& BowDocBs, 
117          const PBowDocWgtBs& BowDocWgtBs, const TIntV& DIdV, 
118          const int& Vecs, const bool& NormP) const;
119      PBowSpV ProjectSpV(const PBowSpV& SpV, 
120          const int& Vecs, const bool& NormP) const;
121      void ProjectSpV(const PBowSpV& SpV, const int& Vecs, 
122          const bool& NormP, TIntFltKdV& ProjSpV) const;
123      void ProjectSpV(const PBowSpV& SpV, const int& Vecs, 
124          const bool& NormP, TFltV& ProjV) const;
125      void ProjectSpV(const TIntFltKdV& SpV, const int& Vecs, 
126          const bool& NormP, TIntFltKdV& ProjSpV) const;
127      void ProjectSpV(const TIntFltKdV& SpV, const int& Vecs, 
128          const bool& NormP, TFltV& ProjV) const;
129      void ProjectV(const TFltV& FullV, const int& Vecs, 
130          const bool& NormP, TFltV& ProjV) const;
131      void GetVec(const int& VecN, TFltV& Vec) const {
132          TLAMisc::ToVec(BasisV[VecN], Vec, VecDim); }
133      int GetVecs() const { return BasisV.Len(); }
134      int GetVecLen() const;
135  };
136  class TKCCASemSpace: TSemSpace {
137  private:
138      static bool IsReg;
139      static bool MkReg(){return TSemSpace::Reg(TTypeNm<TKCCASemSpace>(), &Load);}
140  private:
141      TVec<TFltV> BasisV;
142      TVec<TFltV> GSBasisV;
143      PSVMTrainSet TrainSet;
144      void ProjectSpV(const PBowSpV& SpV, const int& Vecs, 
145          const bool& NormP, TIntFltPrV& ProjSpV) const;
146  public:
147      TKCCASemSpace(PSVMTrainSet Set, PPartialGS R, const TVec<TFltV>& DrctV, const TStr& _MethodeType);
148      static PSemSpace New(PSVMTrainSet Set, PPartialGS R, const TVec<TFltV>& DrctV, const TStr& _MethodeType) {
149          return new TKCCASemSpace(Set, R, DrctV, _MethodeType); }
150      TKCCASemSpace(TSIn &SIn): TSemSpace(SIn) { 
151          BasisV.Load(SIn); GSBasisV.Load(SIn); TrainSet = TSVMTrainSet::Load(SIn); }
152      static PSemSpace Load(TSIn &SIn) { return new TKCCASemSpace(SIn); }
153      void Save(TSOut &SOut) const { 
154          TSemSpace::Save(SOut); BasisV.Save(SOut); GSBasisV.Save(SOut); TrainSet->Save(SOut); }
155      PBowDocBs Project(const PBowDocBs& BowDocBs, 
156          const PBowDocWgtBs& BowDocWgtBs, const TIntV& DIdV, 
157          const int& Vecs, const bool& NormP) const;
158      PBowSpV ProjectSpV(const PBowSpV& SpV, 
159          const int& Vecs, const bool& NormP) const;
160      void ProjectSpV(const PBowSpV& SpV, const int& Vecs, 
161          const bool& NormP, TIntFltKdV& ProjSpV) const;
162      void ProjectSpV(const PBowSpV& SpV, const int& Vecs, 
163          const bool& NormP, TFltV& ProjV) const { Fail; }
164      void ProjectSpV(const TIntFltKdV& SpV, const int& Vecs, 
165          const bool& NormP, TIntFltKdV& ProjSpV) const { Fail; }
166      void ProjectSpV(const TIntFltKdV& SpV, const int& Vecs, 
167          const bool& NormP, TFltV& ProjV) const { Fail; }
168      void ProjectV(const TFltV& FullV, const int& Vecs, 
169          const bool& NormP, TFltV& ProjV) const { Fail; }
<span onclick='openModal()' class='match'>170      void GetVec(const int& VecN, TFltV& VecV) const;
171      int GetVecs() const { return BasisV.Len(); }
172      int GetVecLen() const { return TrainSet->Dim(); }
</span>173  };
174  typedef enum { kcntNone, kcntOne, kcntEigVal } TKCCACorrNrmType;
175  class TSemSpaceAlg { 
176  private: 
177      static void CalcKCCA(const TFltVV& Ra, const TFltVV& Rb, const double& ta, const double& tb,
178          const TKCCACorrNrmType& CorrNrmType, TVec<TFltV>& DrctAV, TVec<TFltV>& DrctBV, TFltV& EigV);
179      static void CalcKCCA(PSVMTrainSet SetA, PSVMTrainSet SetB, const double& t, const int& SpaceDim, 
180          const double& Eps, PPartialGS& Ra, PPartialGS& Rb, const TKCCACorrNrmType& CorrNrmType,
181          TVec<TFltV>& DrctAV, TVec<TFltV>& DrctBV, TFltV& EigV);
182      static void DecomposeKernelMatrix(PSVMTrainSet Set, const int& Dim, 
183          TVec<TFltV>& CompV, const bool& CenterMatrix);
184      static PSemSpace CalcKPCA(PSVMTrainSet Set);
185      static PSemSpace CalcFullLSI(PSVMTrainSet Set, const int& SpaceDim);
186      static PSemSpace CalcSparseLSI(TMatrix& TermDocM, const int& SpaceDim, 
187          const int& MaxLanczos, const TSpSVDReOrtoType& ReOrtoType);
188      static PSemSpace CalcSparseLSI(PSVMTrainSet Set, const int& SpaceDim, 
189          const int& MaxLanczos = 300, const TSpSVDReOrtoType& ReOrtoType = ssotSelective);
190  public: 
191      static void CalcKCCA(
192          const TVec<PBowSpV>& BowSpVA, const TVec<PBowSpV>& BowSpVB, 
193          const double& t, const int& SpaceDim, const double& Eps, 
194          PSemSpace& SpA, PSemSpace& SpB, TFltV& EigV, 
195          const TKCCACorrNrmType& CorrNrmType = kcntOne);
196      static void CalcVecKCCA(
197          const TVec<PBowSpV>& BowSpVA, const TVec<PBowSpV>& BowSpVB,
198          const double& t, const int& SpaceDim, const double& Eps, 
199          PSemSpace& SpA, PSemSpace& SpB, 
200          const TKCCACorrNrmType& CorrNrmType = kcntOne);
201      static PSemSpace CalcKPCA(const TVec<PBowSpV>& BowSpV);
202      static PSemSpace CalcKPCA(PBowDocWgtBs BowDocWgtBs, const TIntV& DIdV);
203      static PSemSpace CalcFullLSI(const TVec<PBowSpV>& BowSpV, const int& SpaceDim);
204      static PSemSpace CalcFullLSI(PBowDocWgtBs BowDocWgtBs, 
205          const TIntV& DIdV, const int& SpaceDim);
206      static PSemSpace CalcSparseLSI(const TVec<PBowSpV>& BowSpV, 
207          const int& SpaceDim, const int& MaxLanczos = 300, 
208          const TSpSVDReOrtoType& ReOrtoType = ssotSelective);
209      static PSemSpace CalcSparseLSI(PBowDocWgtBs BowDocWgtBs, 
210          const TIntV& DIdV, const int& SpaceDim, const int& MaxLanczos = 300, 
211          const TSpSVDReOrtoType& ReOrtoType = ssotSelective);
212  };
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-wmine.h</div>
                <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-semspace.h</div>
                <div class="column column_space"><pre><code>27    TStr GetUrlNm(const int& UrlId) const {return UrlNmToClicksH.GetKey(UrlId);}
28    int GetClicks() const {return UsrIdUrlIdPrV.Len();}
</pre></code></div>
                <div class="column column_space"><pre><code>170      void GetVec(const int& VecN, TFltV& VecV) const;
171      int GetVecs() const { return BasisV.Len(); }
172      int GetVecLen() const { return TrainSet->Dim(); }
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    