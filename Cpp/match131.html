<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Matches for testMockImageManager.cpp &amp; testDeadState.cpp</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<style>.modal {display: none;position: fixed;z-index: 1;left: 0;top: 0;width: 100%;height: 100%;overflow: auto;background-color: rgb(0, 0, 0);background-color: rgba(0, 0, 0, 0.4);}  .modal-content {height: 250%;background-color: #fefefe;margin: 5% auto;padding: 20px;border: 1px solid #888;width: 80%;}  .close {color: #aaa;float: right;font-size: 20px;font-weight: bold;}  .close:hover, .close:focus {color: black;text-decoration: none;cursor: pointer;}  .column {float: left;width: 50%;}  .row:after {content: ;display: table;clear: both;}  #column1, #column2 {white-space: pre-wrap;}</style></head>
<body>
<div style="align-items: center; display: flex; justify-content: space-around;">
<div>
<h3 align="center">
Matches for testMockImageManager.cpp &amp; testDeadState.cpp
      </h3>
<h1 align="center">
        16.0%
      </h1>
<center>
<a href="#" target="_top">
          INDEX
        </a>
<span>-</span>
<a href="#" target="_top">
          HELP
        </a>
</center>
</div>
<div>
<table bgcolor="#d0d0d0" border="1" cellspacing="0">
<tr><th><th>testMockImageManager.cpp (28.282827%)<th>testDeadState.cpp (11.155378%)<th>Tokens
<tr onclick='openModal("#0000ff")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#0000ff"><font color="#0000ff">-</font><td><a href="#" name="0">(136-148)<td><a href="#" name="0">(483-495)</a><td align="center"><font color="#ff0000">16</font>
<tr onclick='openModal("#f63526")' onmouseleave='this.style.backgroundColor = "#D0D0D0"' onmouseover='this.style.backgroundColor = "yellow"' style="cursor:pointer"><td bgcolor="#f63526"><font color="#f63526">-</font><td><a href="#" name="1">(58-64)<td><a href="#" name="1">(51-57)</a><td align="center"><font color="#bf0000">12</font>
</td></td></a></td></td></tr></td></td></a></td></td></tr></th></th></th></th></tr></table>
</div>
</div>
<hr/>
<div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>testMockImageManager.cpp</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 #include "gtest/gtest.h"
2 #include &lt;yarp/os/Property.h&gt;
3 #include &lt;yarp/dev/PolyDriver.h&gt;
4 #include &lt;yarp/os/Network.h&gt;
5 #include &lt;yarp/sig/all.h&gt;
6 #include &lt;yarp/os/ResourceFinder.h&gt;
7 #include "ImageManager.hpp"
8 #include "MockImageManager.hpp"
9 #include "MockImageEventListener.hpp"
10 namespace rd
11 {
12 namespace test
13 {
14 class MockImageManagerTest : public testing::Test
15 {
16     public:
17         virtual void SetUp()
18         {
19             yarp::os::ResourceFinder rf;
20             rf.setDefaultContext("robotDevastation");
21             rf.setDefaultConfigFile("robotDevastation.ini");
22             image_filename = rf.findFileByName(image_filename_raw);
23             MockImageManager::RegisterManager();
24             imageManager = ImageManager::getImageManager(MockImageManager::id);
25         }
26         virtual void TearDown()
27         {
28             ImageManager::destroyImageManager();
29         }
30         static const std::string image_filename_raw;
31         std::string image_filename;
32     protected:
33         ImageManager * imageManager;
34 };
35 const std::string MockImageManagerTest::image_filename_raw = "../images/test_frame.ppm";
36 <a name="1"></a>//----------------------------------------------------------------------------------------
37 <font color="#f63526"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>class MockImageManagerEnvironment : public testing::Environment
38 {
39     public:
40         MockImageManagerEnvironment(int argc, char ** argv)
41         {
42             this-&gt;argc = argc;
43             this-&gt;argv = argv;</b></font>
44         }
45         virtual void SetUp()
46         {
47             yarp::os::NetworkBase::setLocalMode(true);
48             yarp::os::Network::init();
49         }
50         virtual void TearDown()
51         {
52             yarp::os::Network::fini();
53         }
54     private:
55         int argc;
56         char ** argv;
57 };
58 TEST_F(MockImageManagerTest, MockImageManagerNotificationWorks)
59 {
60     MockImageEventListener listener;
61     ASSERT_TRUE(imageManager-&gt;addImageEventListener(&amp;listener));
62     listener.resetImagesArrived();
63     ASSERT_TRUE(imageManager-&gt;start());
64     EXPECT_EQ(0, listener.getImagesArrived());
65     Image test_image;
66     ASSERT_TRUE(yarp::sig::file::read(test_image, MockImageManagerTest::image_filename));
67     EXPECT_FALSE(((MockImageManager *) imageManager)-&gt;receiveImage(test_image));
68     EXPECT_EQ(0, listener.getImagesArrived());
69     ASSERT_TRUE(imageManager-&gt;setEnabled(true));
70     ASSERT_TRUE(((MockImageManager *) imageManager)-&gt;receiveImage(test_image));
71     EXPECT_EQ(1, listener.getImagesArrived());
72     Image received_image = listener.getStoredImage();
73     ASSERT_EQ(received_image.width(), test_image.width());
74     ASSERT_EQ(received_image.height(), test_image.height());
75     for (int i = 0 ; i &lt; received_image.width(); i++)
76         for (int j = 0; j &lt; received_image.height(); j++)
77         {
78             EXPECT_EQ(received_image(i, j).r, test_image(i, j).r);
79             EXPECT_EQ(received_image(i, j).g, test_image(i, j).g);
80             EXPECT_EQ(received_image(i, j).b, test_image(i, j).b);
81         }
82     EXPECT_TRUE(imageManager-&gt;removeImageEventListeners());
83 <a name="0"></a>    ASSERT_TRUE(imageManager-&gt;stop());
84     ASSERT_TRUE(imageManager-&gt;isStopped());
85     ASSERT_FALSE(((MockImageManager *) imageManager)-&gt;isEnabled());
86 <font color="#0000ff"><a href="#"><img align="right" alt="other" border="0" src="forward.gif"/></a><b>}
87 }  
88 }  
89 int main(int argc, char **argv)
90 {
91   testing::InitGoogleTest(&amp;argc, argv);
92   testing::Environment* env = testing::AddGlobalTestEnvironment(new rd::test::MockImageManagerEnvironment(argc, argv));
93   return RUN_ALL_TESTS();
94 }</b></font>
</pre>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>testDeadState.cpp</span>
<span> - </span>
<span></span>
</center>
</h3>
<hr/>
<pre>
1 #include "gtest/gtest.h"
2 #include &lt;string&gt;
3 #include &lt;vector&gt;
4 #include &lt;yarp/sig/all.h&gt;
5 #include &lt;yarp/os/Network.h&gt;
6 #include &lt;yarp/os/Time.h&gt;
7 #include &lt;yarp/os/ResourceFinder.h&gt;
8 #include "StateMachine.hpp"
9 #include "StateMachineBuilder.hpp"
10 #include "SDLUtils.hpp"
11 #include "DeadState.hpp"
12 #include "InitState.hpp"
13 #include "MockState.hpp"
14 #include "MockNetworkManager.hpp"
15 #include "MockImageManager.hpp"
16 #include "MockInputEventListener.hpp"
17 #include "MockInputManager.hpp"
18 #include "MentalMap.hpp"
19 #include "MockRobotManager.hpp"
20 #include "MockAudioManager.hpp"
21 #include "SDLScreenManager.hpp"
22 namespace rd
23 {
24 namespace test
25 {
26 <a name="1"></a>//----------------------------------------------------------------------------------------
27 <font color="#f63526"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>class DeadStateTestEnvironment : public testing::Environment
28 {
29     public:
30         DeadStateTestEnvironment(int argc, char ** argv)
31         {
32             this-&gt;argc = argc;
33             this-&gt;argv = argv;</b></font>
34             screenManager = NULL;
35         }
36         virtual void SetUp()
37         {
38             yarp::os::NetworkBase::setLocalMode(true);
39             yarp::os::Network::init();
40             SDLScreenManager::RegisterManager();
41             screenManager = ScreenManager::getScreenManager("SDL");
42             ASSERT_NE((ScreenManager*) NULL, screenManager);
43             screenManager-&gt;start();
44         }
45         virtual void TearDown()
46         {
47             yarp::os::Network::fini();
48             screenManager-&gt;stop();
49             ScreenManager::destroyScreenManager();
50         }
51     private:
52         int argc;
53         char ** argv;
54     protected:
55         ScreenManager * screenManager;
56 };
57 class DeadStateTest : public testing::Test
58 {
59     public:
60         virtual void SetUp()
61         {
62             yarp::os::ResourceFinder rf;
63             rf.setDefaultContext("robotDevastation");
64             rf.setDefaultConfigFile("robotDevastation.ini");
65             yarp::os::NetworkBase::setLocalMode(true);
66             yarp::os::Network::init();
67             MockNetworkManager::RegisterManager();
68             MockImageManager::RegisterManager();
69             MockInputManager::RegisterManager();
70             MockAudioManager::RegisterManager();
71             networkManager = NetworkManager::getNetworkManager("MOCK");
72             mockNetworkManager = dynamic_cast&lt;MockNetworkManager *&gt;(networkManager);
73             ASSERT_NE((NetworkManager*) NULL, networkManager);
74             ASSERT_NE((MockNetworkManager*) NULL, mockNetworkManager);
75             imageManager = ImageManager::getImageManager("MOCK");
76             mockImageManager = dynamic_cast&lt;MockImageManager *&gt;(imageManager);
77             ASSERT_NE((ImageManager*) NULL, imageManager);
78             ASSERT_NE((MockImageManager*) NULL, mockImageManager);
79             Image test_frame;
80             yarp::sig::file::read(test_frame, rf.findFileByName("../images/test_frame_qr.ppm"));
81             mockImageManager-&gt;receiveImage(test_frame);
82             inputManager = InputManager::getInputManager("MOCK");
83             mockInputManager = dynamic_cast&lt;MockInputManager *&gt;(inputManager);
84             ASSERT_NE((InputManager*) NULL, inputManager);
85             ASSERT_NE((MockInputManager*) NULL, mockInputManager);
86             audioManager = AudioManager::getAudioManager("MOCK");
87             mockAudioManager = dynamic_cast&lt;MockAudioManager *&gt;(audioManager);
88             ASSERT_NE((AudioManager*) NULL, audioManager);
89             ASSERT_NE((MockAudioManager*) NULL, mockAudioManager);
90             mockAudioManager-&gt;load("RD_THEME","RD_THEME", AudioManager::MUSIC);
91             mockAudioManager-&gt;load("RD_DEAD","RD_DEAD", AudioManager::MUSIC);
92             mentalMap = MentalMap::getMentalMap();
93             ASSERT_NE((MentalMap*) NULL, mentalMap);
94             ASSERT_TRUE(mentalMap-&gt;configure(1));
95             std::vector&lt;Player&gt; players;
96             players.push_back(Player(1,"test_player", 0,MAX_HEALTH,0,0) );
97             ASSERT_TRUE(mentalMap-&gt;updatePlayers(players));
98             mentalMap-&gt;addWeapon(Weapon("Default gun", 10, 5));
99             networkManager-&gt;configure("player", players[0]);
100             mockRobotManager = new MockRobotManager("MOCK");
101             robotManager = (asrob::IRobotManager *) mockRobotManager;
102             ASSERT_NE((MockRobotManager*) NULL, mockRobotManager);
103             ASSERT_NE((asrob::IRobotManager*) NULL, robotManager);
104             screenManager = ScreenManager::getScreenManager("SDL");
105             ASSERT_NE((ScreenManager*) NULL, screenManager);
106             State * initState = new InitState(networkManager, imageManager, inputManager,
107                                               mentalMap, robotManager, audioManager,
108                                               screenManager);
109             initState-&gt;setup();
110             dynamic_cast&lt;InputEventListener *&gt;(initState)-&gt;onKeyUp(Key::KEY_ENTER);
111             initState-&gt;loop();
112             initState-&gt;cleanup();
113             delete initState;
114             initState = NULL;
115             mockImageManager-&gt;start();
116             listener = new MockInputEventListener;
117             mockInputManager-&gt;addInputEventListener(listener);
118             audioManager-&gt;start();
119             audioManager-&gt;play("RD_THEME", -1);
120             mockImageManager-&gt;setEnabled(true);
121         }
122         virtual void TearDown()
123         {
124             yarp::os::Network::fini();
125             NetworkManager::destroyNetworkManager();
126             networkManager = NULL;
127             mockNetworkManager = NULL;
128             ImageManager::destroyImageManager();
129             imageManager = NULL;
130             mockImageManager = NULL;
131             InputManager::destroyInputManager();
132             AudioManager::destroyAudioManager();
133             MentalMap::destroyMentalMap();
134             delete mockRobotManager;
135             mockRobotManager = NULL;
136             delete listener;
137             listener=NULL;
138         }
139     static const int MAX_HEALTH;
140     protected:
141         FiniteStateMachine *fsm;
142         NetworkManager * networkManager;
143         MockNetworkManager * mockNetworkManager;
144         ImageManager * imageManager;
145         MockImageManager * mockImageManager;
146         InputManager * inputManager;
147         MockInputManager * mockInputManager;
148         AudioManager * audioManager;
149         MockAudioManager * mockAudioManager;
150         MentalMap * mentalMap;
151         MockRobotManager * mockRobotManager;
152         asrob::IRobotManager * robotManager;
153         ScreenManager * screenManager;
154         MockInputEventListener * listener;
155 };
156 const int DeadStateTest::MAX_HEALTH = 100;
157 TEST_F(DeadStateTest, DeadStateGoesToRespawn)
158 {
159     StateMachineBuilder builder;
160     ASSERT_TRUE(builder.setDirectorType("YARP"));
161     int dead_state_id = builder.addState(new DeadState(networkManager, imageManager, inputManager,
162                                                        mentalMap, robotManager, audioManager, screenManager));
163     ASSERT_NE(-1, dead_state_id);
164     int game_state_id = builder.addState(new MockState(1));
165     ASSERT_NE(-1, game_state_id);
166     int exit_state_id = builder.addState(State::getEndState());
167     ASSERT_TRUE(builder.addTransition(dead_state_id, game_state_id, DeadState::RESPAWN_SELECTED));
168     ASSERT_TRUE(builder.addTransition(dead_state_id, exit_state_id, DeadState::EXIT_SELECTED));
169     ASSERT_TRUE(builder.setInitialState(dead_state_id));
170     fsm = builder.buildStateMachine();
171     ASSERT_NE((FiniteStateMachine*)NULL, fsm);
172     ASSERT_EQ(0, mentalMap-&gt;getMyself().getHealth()); //-- Important thing to check
173     ASSERT_FALSE(mockImageManager-&gt;isStopped());
174     ASSERT_TRUE(mockImageManager-&gt;isEnabled());
175     ASSERT_FALSE(mockInputManager-&gt;isStopped());
176     ASSERT_EQ(1, mockInputManager-&gt;getNumListeners());
177     ASSERT_FALSE(mockAudioManager-&gt;isStopped());
178     ASSERT_TRUE(mockAudioManager-&gt;isPlaying("RD_THEME"));
179     ASSERT_FALSE(mockAudioManager-&gt;isPlaying("RD_DEAD"));
180     ASSERT_FALSE(mockNetworkManager-&gt;isStopped());
181     ASSERT_TRUE(mockNetworkManager-&gt;isLoggedIn());
182     ASSERT_TRUE(fsm-&gt;start());
183     ASSERT_EQ(0, mentalMap-&gt;getMyself().getHealth()); //-- Important thing to check
184     ASSERT_FALSE(mockImageManager-&gt;isStopped());
185     ASSERT_FALSE(mockImageManager-&gt;isEnabled());
186     ASSERT_FALSE(mockInputManager-&gt;isStopped());
187     ASSERT_EQ(0, mockInputManager-&gt;getNumListeners());
188     ASSERT_FALSE(mockAudioManager-&gt;isStopped());
189     ASSERT_FALSE(mockAudioManager-&gt;isPlaying("RD_THEME"));
190     ASSERT_TRUE(mockAudioManager-&gt;isPlaying("RD_DEAD"));
191     ASSERT_FALSE(mockNetworkManager-&gt;isStopped());
192     ASSERT_TRUE(mockNetworkManager-&gt;isLoggedIn());
193     ASSERT_EQ(dead_state_id, fsm-&gt;getCurrentState());
194     yarp::os::Time::delay(0.5);
195     mockInputManager-&gt;sendKeyPress(Key::KEY_ENTER);
196     yarp::os::Time::delay(0.5);
197     ASSERT_EQ(dead_state_id, fsm-&gt;getCurrentState());
198     yarp::os::Time::delay(10);
199     ASSERT_EQ(1, mockInputManager-&gt;getNumListeners());
200     mockInputManager-&gt;sendKeyPress(Key::KEY_ENTER);
201     yarp::os::Time::delay(0.5);
202     ASSERT_EQ(DeadStateTest::MAX_HEALTH, mentalMap-&gt;getMyself().getHealth());
203     ASSERT_FALSE(mockImageManager-&gt;isStopped());
204     ASSERT_FALSE(mockImageManager-&gt;isEnabled());
205     ASSERT_FALSE(mockInputManager-&gt;isStopped());
206     ASSERT_EQ(0, mockInputManager-&gt;getNumListeners()); //-- Game sets its own listener
207     ASSERT_FALSE(mockAudioManager-&gt;isStopped());
208     ASSERT_FALSE(mockAudioManager-&gt;isPlaying("RD_THEME"));
209     ASSERT_FALSE(mockAudioManager-&gt;isPlaying("RD_DEAD"));
210     ASSERT_FALSE(mockNetworkManager-&gt;isStopped());
211     ASSERT_TRUE(mockNetworkManager-&gt;isLoggedIn());
212     ASSERT_EQ(game_state_id, fsm-&gt;getCurrentState());
213 }
214 TEST_F(DeadStateTest, DeadStateGoesToLogoutKeyPress)
215 {
216     StateMachineBuilder builder;
217     ASSERT_TRUE(builder.setDirectorType("YARP"));
218     int dead_state_id = builder.addState(new DeadState(networkManager, imageManager, inputManager,
219                                                        mentalMap, robotManager, audioManager, screenManager));
220     ASSERT_NE(-1, dead_state_id);
221     int game_state_id = builder.addState(new MockState(1));
222     ASSERT_NE(-1, game_state_id);
223     int exit_state_id = builder.addState(State::getEndState());
224     ASSERT_NE(-1, exit_state_id);
225     ASSERT_TRUE(builder.addTransition(dead_state_id, game_state_id, DeadState::RESPAWN_SELECTED));
226     ASSERT_TRUE(builder.addTransition(dead_state_id, exit_state_id, DeadState::EXIT_SELECTED));
227     ASSERT_TRUE(builder.setInitialState(dead_state_id));
228     fsm = builder.buildStateMachine();
229     ASSERT_NE((FiniteStateMachine*)NULL, fsm);
230     ASSERT_EQ(0, mentalMap-&gt;getMyself().getHealth()); //-- Important thing to check
231     ASSERT_FALSE(mockImageManager-&gt;isStopped());
232     ASSERT_TRUE(mockImageManager-&gt;isEnabled());
233     ASSERT_FALSE(mockInputManager-&gt;isStopped());
234     ASSERT_EQ(1, mockInputManager-&gt;getNumListeners());
235     ASSERT_FALSE(mockAudioManager-&gt;isStopped());
236     ASSERT_TRUE(mockAudioManager-&gt;isPlaying("RD_THEME"));
237     ASSERT_FALSE(mockAudioManager-&gt;isPlaying("RD_DEAD"));
238     ASSERT_FALSE(mockNetworkManager-&gt;isStopped());
239     ASSERT_TRUE(mockNetworkManager-&gt;isLoggedIn());
240     ASSERT_TRUE(fsm-&gt;start());
241     ASSERT_EQ(0, mentalMap-&gt;getMyself().getHealth()); //-- Important thing to check
242     ASSERT_FALSE(mockImageManager-&gt;isStopped());
243     ASSERT_FALSE(mockImageManager-&gt;isEnabled());
244     ASSERT_FALSE(mockInputManager-&gt;isStopped());
245     ASSERT_EQ(0, mockInputManager-&gt;getNumListeners());
246     ASSERT_FALSE(mockAudioManager-&gt;isStopped());
247     ASSERT_FALSE(mockAudioManager-&gt;isPlaying("RD_THEME"));
248     ASSERT_TRUE(mockAudioManager-&gt;isPlaying("RD_DEAD"));
249     ASSERT_FALSE(mockNetworkManager-&gt;isStopped());
250     ASSERT_TRUE(mockNetworkManager-&gt;isLoggedIn());
251     ASSERT_EQ(dead_state_id, fsm-&gt;getCurrentState());
252     yarp::os::Time::delay(0.5);
253     mockInputManager-&gt;sendKeyPress(Key::KEY_ENTER);
254     yarp::os::Time::delay(0.5);
255     ASSERT_EQ(dead_state_id, fsm-&gt;getCurrentState());
256     yarp::os::Time::delay(10);
257     ASSERT_EQ(1, mockInputManager-&gt;getNumListeners());
258     mockInputManager-&gt;sendKeyPress(Key::KEY_ESCAPE);
259     yarp::os::Time::delay(0.5);
260     ASSERT_TRUE(mockImageManager-&gt;isStopped());
261     ASSERT_FALSE(mockImageManager-&gt;isEnabled());
262     ASSERT_TRUE(mockInputManager-&gt;isStopped());
263     ASSERT_EQ(0, mockInputManager-&gt;getNumListeners());
264     ASSERT_TRUE(mockAudioManager-&gt;isStopped());
265     ASSERT_FALSE(mockAudioManager-&gt;isPlaying("RD_THEME"));
266     ASSERT_FALSE(mockAudioManager-&gt;isPlaying("RD_DEAD"));
267     ASSERT_TRUE(mockNetworkManager-&gt;isStopped());
268     ASSERT_FALSE(mockNetworkManager-&gt;isLoggedIn());
269     ASSERT_EQ(-1, fsm-&gt;getCurrentState()); //-- (When FSM is ended, no state is active, hence -1)
270 }
271 TEST_F(DeadStateTest, DeadStateGoesToLogoutWindowEvent)
272 {
273     StateMachineBuilder builder;
274     ASSERT_TRUE(builder.setDirectorType("YARP"));
275     int dead_state_id = builder.addState(new DeadState(networkManager, imageManager, inputManager,
276                                                        mentalMap, robotManager, audioManager, screenManager));
277     ASSERT_NE(-1, dead_state_id);
278     int game_state_id = builder.addState(new MockState(1));
279     ASSERT_NE(-1, game_state_id);
280     int exit_state_id = builder.addState(State::getEndState());
281     ASSERT_NE(-1, exit_state_id);
282     ASSERT_TRUE(builder.addTransition(dead_state_id, game_state_id, DeadState::RESPAWN_SELECTED));
283     ASSERT_TRUE(builder.addTransition(dead_state_id, exit_state_id, DeadState::EXIT_SELECTED));
284     ASSERT_TRUE(builder.setInitialState(dead_state_id));
285     fsm = builder.buildStateMachine();
286     ASSERT_NE((FiniteStateMachine*)NULL, fsm);
287     ASSERT_EQ(0, mentalMap-&gt;getMyself().getHealth()); //-- Important thing to check
288     ASSERT_FALSE(mockImageManager-&gt;isStopped());
289     ASSERT_TRUE(mockImageManager-&gt;isEnabled());
290     ASSERT_FALSE(mockInputManager-&gt;isStopped());
291     ASSERT_EQ(1, mockInputManager-&gt;getNumListeners());
292     ASSERT_FALSE(mockAudioManager-&gt;isStopped());
293     ASSERT_TRUE(mockAudioManager-&gt;isPlaying("RD_THEME"));
294     ASSERT_FALSE(mockAudioManager-&gt;isPlaying("RD_DEAD"));
295     ASSERT_FALSE(mockNetworkManager-&gt;isStopped());
296     ASSERT_TRUE(mockNetworkManager-&gt;isLoggedIn());
297     ASSERT_TRUE(fsm-&gt;start());
298     ASSERT_EQ(0, mentalMap-&gt;getMyself().getHealth()); //-- Important thing to check
299     ASSERT_FALSE(mockImageManager-&gt;isStopped());
300     ASSERT_FALSE(mockImageManager-&gt;isEnabled());
301     ASSERT_FALSE(mockInputManager-&gt;isStopped());
302     ASSERT_EQ(0, mockInputManager-&gt;getNumListeners());
303     ASSERT_FALSE(mockAudioManager-&gt;isStopped());
304     ASSERT_FALSE(mockAudioManager-&gt;isPlaying("RD_THEME"));
305     ASSERT_TRUE(mockAudioManager-&gt;isPlaying("RD_DEAD"));
306     ASSERT_FALSE(mockNetworkManager-&gt;isStopped());
307     ASSERT_TRUE(mockNetworkManager-&gt;isLoggedIn());
308     ASSERT_EQ(dead_state_id, fsm-&gt;getCurrentState());
309     yarp::os::Time::delay(0.5);
310     mockInputManager-&gt;sendKeyPress(Key::KEY_ENTER);
311     yarp::os::Time::delay(0.5);
312     ASSERT_EQ(dead_state_id, fsm-&gt;getCurrentState());
313     yarp::os::Time::delay(10);
314     ASSERT_EQ(1, mockInputManager-&gt;getNumListeners());
315     mockInputManager-&gt;sendWindowEvent(WindowEvent::WINDOW_CLOSE);
316     yarp::os::Time::delay(0.5);
317     ASSERT_TRUE(mockImageManager-&gt;isStopped());
318     ASSERT_FALSE(mockImageManager-&gt;isEnabled());
319     ASSERT_TRUE(mockInputManager-&gt;isStopped());
320     ASSERT_EQ(0, mockInputManager-&gt;getNumListeners());
321     ASSERT_TRUE(mockAudioManager-&gt;isStopped());
322     ASSERT_FALSE(mockAudioManager-&gt;isPlaying("RD_THEME"));
323     ASSERT_FALSE(mockAudioManager-&gt;isPlaying("RD_DEAD"));
324     ASSERT_TRUE(mockNetworkManager-&gt;isStopped());
325     ASSERT_FALSE(mockNetworkManager-&gt;isLoggedIn());
326 <a name="0"></a>
327     ASSERT_EQ(-1, fsm-&gt;getCurrentState()); //-- (When FSM is ended, no state is active, hence -1)
328 <font color="#0000ff"><div style="position:absolute;left:0"><a href="#"><img align="left" alt="other" border="0" src="back.gif"/></a></div><b>}
329 }  
330 }  
331 int main(int argc, char **argv)
332 {
333   testing::InitGoogleTest(&amp;argc, argv);
334   testing::Environment* env = testing::AddGlobalTestEnvironment(new rd::test::DeadStateTestEnvironment(argc, argv));
335   return RUN_ALL_TESTS();
336 }</b></font>
</pre>
</div>
</div>
<div class="modal" id="myModal" style="display:none;"><div class="modal-content"><span class="close">x</span><p></p><div class="row"><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 1</div><div class="column" style="font-weight: bold;text-decoration: underline">Fragment from File 2</div></div><div class="row"><div class="column" id="column1">Column 1</div><div class="column" id="column2">Column 2</div></div></div></div><script>var modal=document.getElementById("myModal"),span=document.getElementsByClassName("close")[0];span.onclick=function(){modal.style.display="none"};window.onclick=function(a){a.target==modal&&(modal.style.display="none")};function openModal(a){console.log("the color is "+a);let b=getCodes(a);console.log(b);var c=document.getElementById("column1");c.innerText=b[0];var d=document.getElementById("column2");d.innerText=b[1];c.style.color=a;c.style.fontWeight="bold";d.style.fontWeight="bold";d.style.color=a;var e=document.getElementById("myModal");e.style.display="block"}function getCodes(a){for(var b=document.getElementsByTagName("font"),c=[],d=0;d<b.length;d++)b[d].attributes.color.nodeValue===a&&"-"!==b[d].innerText&&c.push(b[d].innerText);return c}</script><script>const params=window.location.search;const urlParams=new URLSearchParams(params);const searchText=urlParams.get('lines');let lines=searchText.split(',');for(let line of lines){const elements=document.getElementsByTagName('td');for(let i=0;i<elements.length;i++){if(elements[i].innerText.includes(line)){elements[i].style.background='green';break;}}}</script></body>
</html>
