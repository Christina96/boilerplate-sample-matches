
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Tokens: 15, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-tbhc.h</h3>
            <pre><code>1  #ifndef TbHc_h
2  #define TbHc_h
3  #include "base.h"
4  #include "tb.h"
5  #include "hc.h"
6  class THTbVar: public TTbVar{
7  private:
8    TStr Nm;
9    PTbVarType VarType;
10  public:
11    THTbVar(const TStr& _Nm, const PTbVarType& _VarType):
12      TTbVar(), Nm(_Nm), VarType(_VarType){}
13    THTbVar(TSIn& SIn): TTbVar(SIn), Nm(SIn){}
14    void Save(TSOut& SOut){TTbVar::Save(SOut); Nm.Save(SOut);}
15    THTbVar& operator=(const THTbVar& HTbVar){
16      TTbVar::operator=(HTbVar); Nm=HTbVar.Nm; VarType=HTbVar.VarType; return *this;}
17    TStr GetNm() const {return Nm;}
18    PTbVarType GetVarType() const {return VarType;}
19    TB32Set GetActVTSet() const {return VarType->GetAlwVTSet();}
20    void DefVarType(){Fail;}
21    TTbVal GetDscVal(const TStr& Str){return VarType->GetDscVal(Str);}
22    TTbVal GetDscVal(const int& Dsc){return VarType->GetDscVal(Dsc);}
23    TTbVal GetFltVal(const double& Flt){return VarType->GetFltVal(Flt);}
24    TTbVal GetVal(const TTbVal& Val){return VarType->GetVal(Val);}
25  };
26  class THTb: public TTb{
27  protected:
28    PHcBase HcBase;
29    TIntV VarNToWordIdV, WordIdToVarNV;
30    TIntV TupNToDocIdV, DocIdToTupNV;
31  public:
32    THTb(const PHcBase& _HcBase);
33    THTb(TSIn& SIn):
34      TTb(SIn), HcBase(SIn),
35      VarNToWordIdV(SIn), WordIdToVarNV(SIn),
36      TupNToDocIdV(SIn), DocIdToTupNV(SIn){}
37    void Save(TSOut& SOut){
38      TTb::Save(SOut); HcBase.Save(SOut);
39      VarNToWordIdV.Save(SOut); WordIdToVarNV.Save(SOut);
40      TupNToDocIdV.Save(SOut); DocIdToTupNV.Save(SOut);}
41    int AddVar(const PTbVar&){Fail; return -1;}
42    void DefVarTypes(){Fail;}
43    int GetVars(){return VarNToWordIdV.Len();}
44    int GetVarN(const TStr& Nm){return WordIdToVarNV[HcBase->GetWordId(Nm)];}
45    int AddTup(const TStr&){Fail; return -1;}
46    int GetTups(){return TupNToDocIdV.Len();}
47    TStr GetTupNm(const int& TupN){return HcBase->GetDocNm(TupNToDocIdV[TupN]);}
48    int GetTupN(const TStr& Nm){return DocIdToTupNV[HcBase->GetWordId&bsol;**/(Nm)];}
49    void PutDsc(const int&, const int&, const TStr&){Fail;}
50    void PutDsc(const int&, const int&, const int&){Fail;}
51    void PutFlt(const int&, const int&, const double&){Fail;}
52    void PutVal(const int&, const int&, const TTbVal&){Fail;}
53    TStr GetValStr(const int& TupN, const int& VarN){
<span onclick='openModal()' class='match'>54      return GetVal(TupN, VarN).GetStr();}
55  };
56  class THBTb: public THTb{
</span>57  private:
58    TVec<PBSet> TupV;
59  public:
60    THBTb(const PHcBase& _HcBase);
61    THBTb(TSIn& SIn): THTb(SIn), TupV(SIn){SIn.LoadCs();}
62    void Save(TSOut& SOut){THTb::Save(SOut); TupV.Save(SOut); SOut.SaveCs();}
63    PTbVar GetVar(const int& VarN){
64      return new THTbVar(HcBase->GetWordStr&bsol;**/(VarN), TTbVarType::GetDscBoolVarType());}
65    TTbVal GetVal(const int& TupN, const int& VarN){
66      return TTbVal(TupV[TupN]->In(VarN));}
67  };
68  class THSTb: public THTb{
69  private:
70    TVec<TIntV> TupV;
71  public:
72    THSTb(const PHcBase& _HcBase);
73    THSTb(TSIn& SIn): THTb(SIn), TupV(SIn){SIn.LoadCs();}
74    void Save(TSOut& SOut){THTb::Save(SOut); TupV.Save(SOut); SOut.SaveCs();}
75    PTbVar GetVar(const int& VarN){
76      return new THTbVar(HcBase->GetWordStr&bsol;**/(VarN), TTbVarType::GetFltVarType());}
77    TTbVal GetVal(const int& TupN, const int& VarN){
78      return TTbVal(TupV[TupN].SearchBin(VarNToWordIdV[VarN])!=-1);}
79  };
80  class THFTb: public THTb{
81  private:
82    TVec<TVec<TIntPr> > TupV;
83  public:
84    THFTb(const PHcBase& _HcBase);
85    THFTb(TSIn& SIn): THTb(SIn), TupV(SIn){SIn.LoadCs();}
86    void Save(TSOut& SOut){THTb::Save(SOut); TupV.Save(SOut); SOut.SaveCs();}
87    PTbVar GetVar(const int& VarN){
88      return new THTbVar(HcBase->GetWordStr&bsol;**/(VarN), TTbVarType::GetFltVarType());}
89    TTbVal GetVal(const int& TupN, const int& VarN){
90      int WordOccN=TupV[TupN].SearchBin(TIntPr(VarNToWordIdV[VarN], TInt(-1)));
91      if (WordOccN==-1){return TTbVal((double)0);}
92      else {return TTbVal((double)TupV[TupN][WordOccN].Val2);}}
93  };
94  #endif
</code></pre>
        </div>
        <div class="column">
            <h3>snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-yahoodm.h</h3>
            <pre><code>1  #ifndef YahooDm_h
2  #define YahooDm_h
3  #include "base.h"
4  #include "dmdata.h"
5  #include "yahoobs.h"
6  #include "mg.h"
7  #include "md.h"
8  class TYTbVar: public TTbVar{
9  private:
10    TStr Nm;
11    PTbVarType VarType;
12  public:
13    TYTbVar(const TStr& _Nm, const PTbVarType& _VarType):
14      TTbVar(), Nm(_Nm), VarType(_VarType){}
15    TYTbVar(TSIn& SIn): TTbVar(SIn), Nm(SIn){}
16    void Save(TSOut& SOut){TTbVar::Save(SOut); Nm.Save(SOut);}
17    TYTbVar& operator=(const TYTbVar& YTbVar){
18      TTbVar::operator=(YTbVar); Nm=YTbVar.Nm; VarType=YTbVar.VarType;
19      return *this;}
20    TStr GetNm() const {return Nm;}
21    PTbVarType GetVarType() const {return VarType;}
22    TFSet GetActVTSet() const {return VarType->GetAlwVTSet();}
23    void DefVarType(){Fail;}
24    TTbVal GetDscVal(const TStr& Str){return VarType->GetDscVal(Str);}
25    TTbVal GetDscVal(const int& Dsc){return VarType->GetDscVal(Dsc);}
26    TTbVal GetFltVal(const double& Flt){return VarType->GetFltVal(Flt);}
27    TTbVal GetVal(const TTbVal& Val){return VarType->GetVal(Val);}
28  };
29  class TYTb: public TTb{
30  protected:
31    PYBs YBs;
32    PYDsBs YDsBs;
33    TIntV VarNToWordIdV, WordIdToVarNV;
34    TIntV TupNToDocIdV, DocIdToTupNV;
35  public:
36    TYTb(const PYBs& _YBs, const PYDsBs& _YDsBs);
37    TYTb(TSIn& SIn):
38      TTb(SIn), YBs(SIn), YDsBs(SIn),
39      VarNToWordIdV(SIn), WordIdToVarNV(SIn),
40      TupNToDocIdV(SIn), DocIdToTupNV(SIn){}
41    void Save(TSOut& SOut){
42      TTb::Save(SOut); YBs.Save(SOut); YDsBs.Save(SOut);
43      VarNToWordIdV.Save(SOut); WordIdToVarNV.Save(SOut);
44      TupNToDocIdV.Save(SOut); DocIdToTupNV.Save(SOut);}
45    int AddVar(const PTbVar&){Fail; return -1;}
46    void DefVarTypes(){Fail;}
47    int GetVars(){return VarNToWordIdV.Len();}
48    PTbVar GetVar(const int& VarN){
49      TStr WordStr=YBs->GetWordStr(VarNToWordIdV[VarN]);
50      return new TYTbVar(WordStr, TTbVarType::GetFltVarType());}
51    int GetVarN(const TStr& Nm){return WordIdToVarNV[YBs->GetWordId(Nm)];}
52    int AddTup(const TStr&){Fail; return -1;}
53    int GetTups(){return TupNToDocIdV.Len();}
54    TStr GetTupNm(const int& TupN){return YBs->GetDocUrlStr(TupNToDocIdV[TupN]);}
55    int GetTupN(const TStr& Nm){return DocIdToTupNV[YBs->GetDocId(Nm)];}
56    void PutDsc(const int&, const int&, const TStr&){Fail;}
57    void PutDsc(const int&, const int&, const int&){Fail;}
58    void PutFlt(const int&, const int&, const double&){Fail;}
59    void PutVal(const int&, const int&, const TTbVal&){Fail;}
60    TTbVal GetVal(const int& TupN, const int& VarN);
61    TStr GetValStr(const int& TupN, const int& VarN){
<span onclick='openModal()' class='match'>62      return GetVal(TupN, VarN).GetStr();}
63  };
64  typedef TGDmHdVar TYDmHdVar;
</span>65  class TYDmHd: public TDmHd{
66  private:
67    PYBs YBs;
68    PYDsBs YDsBs;
69  public:
70    TYDmHd(const PYBs& _YBs, const PYDsBs& _YDsBs):
71      TDmHd(), YBs(_YBs), YDsBs(_YDsBs){IAssert(YBs->IsIdEqN());}
72    TYDmHd& operator=(const TYDmHd&){Fail; return *this;}
73    int GetClasses() const {return YBs->GetDocs();}
74    int GetClassN(const TStr& Nm) const {return YBs->GetDocId(Nm);}
75    TStr GetClassNm(const int& ClassN) const {return YBs->GetDocUrlStr(ClassN);}
76    PDmHdVar GetClass(const int& ClassN) const {
77      TStr ClassNm=YBs->GetDocUrlStr(ClassN);
78      return new TYDmHdVar(ClassNm, TTbVarType::GetDscBoolVarType());}
79    int GetAttrs() const {return YBs->GetWords();}
80    int GetAttrN(const TStr& Nm) const {return YBs->GetWordId(Nm);}
81    TStr GetAttrNm(const int& AttrN) const {return YBs->GetWordStr(AttrN);}
82    PDmHdVar GetAttr(const int& AttrN) const {
83      TStr AttrNm=YBs->GetWordStr(AttrN);
84      return new TYDmHdVar(AttrNm, TTbVarType::GetFltVarType());}
85  };
86  typedef enum {yndtEmpty, yndtRoot, yndtAll} TYNegDsType;
87  typedef enum {yptWords, yptSects, yptDocs} TYPriorType;
88  class TYDmDs: public TDmDs{
89  private:
90    bool DoPriorDmDs;
91    int YNegDsType;
92    int YPriorType;
93    PYBs YBs;
94    PYDsBs YDsBs;
95    PDmHd DmHd;
96    PYWordDs NegWordDs;
97    PYWordDs PosWordDs;
98    PTbValDs CValDs;
99    double NegCValPrb;
100    double PosCValPrb;
101  public:
102    TYDmDs(
103     const bool& _DoPriorDmDs, const int& ClassN,
104     const int& _YNegDsType, const int& _YPriorType,
105     const PYBs& _YBs, const PYDsBs& _YDsBs, const PDmHd& _DmHd);
106    TYDmDs(TSIn&){Fail;}
107    void Save(TSOut&){Fail;}
108    TYDmDs& operator=(const TYDmDs&){Fail; return *this;}
109    double GetSumW();
110    PTbValDs GetCDs();
111    PTbValDs GetAVDs(const int& AttrN);
112    PTbValDs GetCAVDs(const TTbVal& CVal, const int& AttrN);
113    static PYWordDs GetNegWordDs(
114     const int& YNegDsType, const PYBs& YBs, const PYDsBs& YDsBs);
115    static PTbValDs GetPriorValDs(const int& YPriorType,
116     const PYWordDs& NegWordDs, const PYWordDs& PosWordDs);
117    static TStr GetYNegDsTypeStr(const TYNegDsType& YNegDsType);
118    static TStr GetYPriorTypeStr(const TYPriorType& YPriorType);
119  };
120  typedef enum {yfstFix, yfstPosPrc, yfstUnionPrc} TYFSelType;
121  class TYFSelBs{
122  private:
123    TCRef CRef;
124  private:
125    TInt YNegDsType;
126    TVec<TIntFltKdV> DocIdToWordIdEstVV;
127  public:
128    TYFSelBs(
129     const TYFSelType& FSelType, const double& FSels,
130     const bool& FSelPosWords, const PAttrEst& AttrEst,
131     const TYNegDsType& YNegDsType, const TYPriorType& YPriorType,
132     const PYBs& YBs, const PYDsBs& YDsBs, const PNotify& Notify=NULL);
133    ~TYFSelBs(){}
134    TYFSelBs(TSIn& SIn):
135      YNegDsType(SIn), DocIdToWordIdEstVV(SIn){SIn.LoadCs();}
136    static TPt<TYFSelBs> Load(TSIn& SIn){return new TYFSelBs(SIn);}
137    void Save(TSOut& SOut){
138      YNegDsType.Save(SOut); DocIdToWordIdEstVV.Save(SOut); SOut.SaveCs();}
139    TYFSelBs& operator=(const TYFSelBs&){Fail; return *this;}
140    int GetWords(const int& DocId){
141      return DocIdToWordIdEstVV[DocId].Len();}
142    TIntFltKdV& GetWordIdEstV(const int& DocId){
143      return DocIdToWordIdEstVV[DocId];}
144    void GetBestWordIdV(
145     const int& DocId, const double& EstExp, const double& SumEstPrb,
146     const PYWordDs& IntrsWordDs, TIntV& BestWordIdV);
147    bool IsWordId(const TIntFltKdV& WordIdEstV, const int& WordId){
148      return WordIdEstV.SearchBin(TIntFltKd(WordId))!=-1;}
149    void SaveTxt(
150     const PSOut& SOut, const PYBs& YBs, const PYDsBs& YDsBs);
151    static TStr GetYFSelTypeStr(const TYFSelType& YFSelType);
152    friend TPt<TYFSelBs>;
153  };
154  typedef TPt<TYFSelBs> PYFSelBs;
155  class TYInvIx{
156  private:
157    TCRef CRef;
158  private:
159    TIntIntH WordIdToFirstDocIdNH;
160    TIntV DocIdVHeap;
161    TIntV AllDocIdV;
162  public:
163    TYInvIx(
164     const double& EstExp, const double& SumEstPrb,
165     const PYBs& YBs, const PYDsBs& YDsBs,
166     const PYFSelBs& YFSelBs, const PNotify& Notify);
167    TYInvIx(TSIn& SIn):
168      WordIdToFirstDocIdNH(SIn), DocIdVHeap(SIn),
169      AllDocIdV(SIn){SIn.LoadCs();}
170    static TPt<TYInvIx> Load(TSIn& SIn){return new TYInvIx(SIn);}
171    void Save(TSOut& SOut){
172      WordIdToFirstDocIdNH.Save(SOut); DocIdVHeap.Save(SOut);
173      AllDocIdV.Save(SOut); SOut.SaveCs();}
174    TYInvIx& operator=(const TYInvIx&){Fail; return *this;}
175    void GetDocIdV(const PYWordDs& WordDs, const int& MnDocFq, TIntV& DocIdV);
176    int FFirstDocId(const int& WordId){
177      return WordIdToFirstDocIdNH.GetDat(WordId);}
178    bool FNextWordId(int& DocIdN, int& DocId){
179      if (DocIdN==-1){return false;}
180      else {DocId=DocIdVHeap[DocIdN++]; return DocId!=-1;}}
181    void SaveTxt(const PSOut& SOut, const PYBs& YBs);
182    friend TPt<TYInvIx>;
183  };
184  typedef TPt<TYInvIx> PYInvIx;
185  class TYValRet: public TValRet{
186  private:
187    double MnWordPrb;
188    PYBs YBs;
189    PYWordDs WordDs;
190    TIntV WordIdToAttrNV;
191  public:
192    TYValRet(const double& _MnWordPrb, const PDmHd& _DmHd,
193     const PYBs& _YBs, const PYWordDs& _WordDs):
194      TValRet(_DmHd), MnWordPrb(_MnWordPrb), YBs(_YBs), WordDs(_WordDs){}
195    TTbVal GetVal(const int& AttrN) const {
196      return TTbVal(WordDs->IsWordId(AttrN));}
197    int FFirstAttrN() const {return WordDs->FFirstWordId();}
198    bool FNextAttrN(int& AttrP, int& AttrN, TTbVal& AttrVal) const;
199  };
200  class TMdYBayes: public TMd{
201  private:
202    TInt YNegDsType;
203    TInt YPriorType;
204    PYBs YBs;
205    PYDsBs YDsBs;
206    PYFSelBs YFSelBs;
207    PYInvIx YInvIx;
208    PYWordDs NegWordDs;
209  public:
210    TMdYBayes(
211     const TYNegDsType& _YNegDsType, const TYPriorType& _YPriorType,
212     const PYBs& _YBs, const PYDsBs& _YDsBs,
213     const PYFSelBs& _YFSelBs, const PYInvIx& _YInvIx);
214    static PMd Load(TSIn& SIn);
215    void Save(TSOut& SOut);
216    PTbValDs GetPriorValDs(const int& ClassN) const {
217      PYWordDs PosWordDs=YDsBs->GetWordDs(ClassN);
218      return TYDmDs::GetPriorValDs(YPriorType, NegWordDs, PosWordDs);}
219    PTbValDs GetPostrValDs(const PValRet& ValRet, const int& ClassN) const;
220    PTbValDs GetPostrValDs(const PValRet& ValRet, const int& ClassN,
221     TFltIntKdV& WordPrbIdV) const;
222    PYBs GetYBs() const {return YBs;}
223    PYDsBs GetYDsBs() const {return YDsBs;}
224    PYFSelBs GetYFSelBs() const {return YFSelBs;}
225    PYInvIx GetYInvIx() const {return YInvIx;}
226    void Print(const int&) const {}
227  };
228  #endif
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-tbhc.h</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-yahoodm.h</div>
                </div>
                <div class="column column_space"><pre><code>54      return GetVal(TupN, VarN).GetStr();}
55  };
56  class THBTb: public THTb{
</pre></code></div>
                <div class="column column_space"><pre><code>62      return GetVal(TupN, VarN).GetStr();}
63  };
64  typedef TGDmHdVar TYDmHdVar;
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    