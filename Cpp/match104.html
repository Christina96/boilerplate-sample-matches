<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML><HEAD><TITLE>Matches for subscription_callback_types.cpp & test_ns_node_remapping.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
</HEAD>
<body>
  <div style="align-items: center; display: flex; justify-content: space-around;">
    <div>
      <h3 align="center">
Matches for subscription_callback_types.cpp & test_ns_node_remapping.cpp
      </h3>
      <h1 align="center">
        27.7%
      </h1>
      <center>
        <a href="index.html" target="_top">
          INDEX
        </a>
        <span>-</span>
        <a href="help-en.html" target="_top">
          HELP
        </a>
      </center>
    </div>
    <div>
<TABLE BORDER="1" CELLSPACING="0" BGCOLOR="#d0d0d0">
<TR><TH><TH>subscription_callback_types.cpp (19.078947%)<TH>test_ns_node_remapping.cpp (50.877193%)<TH>Tokens
<TR><TD BGCOLOR="#0000ff"><FONT COLOR="#0000ff">-</FONT><TD><A HREF="javascript:ZweiFrames('match104-0.html#0',2,'match104-1.html#0',3)" NAME="0">(171-185)<TD><A HREF="javascript:ZweiFrames('match104-0.html#0',2,'match104-1.html#0',3)" NAME="0">(90-102)</A><TD ALIGN=center><FONT COLOR="#ff0000">17</FONT>
<TR><TD BGCOLOR="#f63526"><FONT COLOR="#f63526">-</FONT><TD><A HREF="javascript:ZweiFrames('match104-0.html#1',2,'match104-1.html#1',3)" NAME="1">(147-168)<TD><A HREF="javascript:ZweiFrames('match104-0.html#1',2,'match104-1.html#1',3)" NAME="1">(39-49)</A><TD ALIGN=center><FONT COLOR="#b40000">12</FONT>
</TABLE>
    </div>
  </div>
  <hr>
  <div style="display: flex;">
<div style="flex-grow: 1;">
<h3>
<center>
<span>subscription_callback_types.cpp</span>
<span> - </span>
<span></span>
</center>
</h3>
<HR>
<PRE>

/*
 * Copyright (C) 2008, Morgan Quigley and Willow Garage, Inc.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *   * Redistributions of source code must retain the above copyright notice,
 *     this list of conditions and the following disclaimer.
 *   * Redistributions in binary form must reproduce the above copyright
 *     notice, this list of conditions and the following disclaimer in the
 *     documentation and/or other materials provided with the distribution.
 *   * Neither the names of Stanford University or Willow Garage, Inc. nor the names of its
 *     contributors may be used to endorse or promote products derived from
 *     this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot;
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */

/**
 * Author: Josh Faust
 */

/*
 * Test compilation of all the different subscription callback types
 */

#include &lt;gtest/gtest.h&gt;
#include &quot;ros/ros.h&quot;
#include &quot;std_msgs/String.h&quot;

#include &lt;vector&gt;

/**
 * This tutorial demonstrates simple receipt of messages over the ROS system.
 */

void chatterCallback(const std_msgs::String::ConstPtr&amp; msg)
{
  ROS_INFO(&quot;I heard: [%s]&quot;, msg-&gt;data.c_str());
}

void chatterCallback2(const std_msgs::String&amp; msg)
{
  ROS_INFO(&quot;I heard(2): [%s]&quot;, msg.data.c_str());
}

void chatterCallback3(std_msgs::String::ConstPtr msg)
{
  ROS_INFO(&quot;I heard(3): [%s]&quot;, msg-&gt;data.c_str());
}

void chatterCallback4(const ros::MessageEvent&lt;std_msgs::String const&gt;&amp; event)
{
  ROS_INFO(&quot;I heard(4): [%s, %s]&quot;, event.getMessage()-&gt;data.c_str(), event.getConnectionHeader()[&quot;callerid&quot;].c_str());
}

void chatterCallback5(std_msgs::String msg)
{
  ROS_INFO(&quot;I heard(5): [%s]&quot;, msg.data.c_str());
}

void chatterCallback6(const std_msgs::String::Ptr&amp; msg)
{
  ROS_INFO(&quot;I heard(6): [%s]&quot;, msg-&gt;data.c_str());
}

void chatterCallback7(std_msgs::String::Ptr msg)
{
  ROS_INFO(&quot;I heard(7): [%s]&quot;, msg-&gt;data.c_str());
}

void chatterCallback8(const ros::MessageEvent&lt;std_msgs::String&gt;&amp; event)
{
  ROS_INFO(&quot;I heard(8): [%s, %s]&quot;, event.getMessage()-&gt;data.c_str(), event.getConnectionHeader()[&quot;callerid&quot;].c_str());
}

struct A
{
  void chatterCallback(const std_msgs::String::ConstPtr&amp; msg)
  {
    ROS_INFO(&quot;A I heard: [%s]&quot;, msg-&gt;data.c_str());
  }

  void chatterCallback2(const std_msgs::String&amp; msg)
  {
    ROS_INFO(&quot;A I heard(2): [%s]&quot;, msg.data.c_str());
  }

  void chatterCallback3(std_msgs::String::ConstPtr msg)
  {
    ROS_INFO(&quot;A I heard(3): [%s]&quot;, msg-&gt;data.c_str());
  }

  void chatterCallback4(const ros::MessageEvent&lt;std_msgs::String const&gt;&amp; event)
  {
    ROS_INFO(&quot;A I heard(4): [%s]&quot;, event.getMessage()-&gt;data.c_str());
  }

  void chatterCallback5(std_msgs::String msg)
  {
    ROS_INFO(&quot;A I heard(5): [%s]&quot;, msg.data.c_str());
  }

  void chatterCallback6(const std_msgs::String::ConstPtr&amp; msg, const std::string&amp; bound)
  {
    ROS_INFO(&quot;A I heard(6): [%s, %s]&quot;, msg-&gt;data.c_str(), bound.c_str());
  }

  void chatterCallback7(const std_msgs::String&amp; msg, const std::string&amp; bound)
  {
    ROS_INFO(&quot;A I heard(7): [%s, %s]&quot;, msg.data.c_str(), bound.c_str());
  }

  void chatterCallback8(const std_msgs::String::Ptr&amp; msg)
  {
    ROS_INFO(&quot;A I heard(6): [%s]&quot;, msg-&gt;data.c_str());
  }

  void chatterCallback9(std_msgs::String::Ptr msg)
  {
    ROS_INFO(&quot;A I heard(7): [%s]&quot;, msg-&gt;data.c_str());
  }

  void chatterCallback10(const ros::MessageEvent&lt;std_msgs::String&gt;&amp; event)
  {
    ROS_INFO(&quot;A I heard(8): [%s, %s]&quot;, event.getMessage()-&gt;data.c_str(), event.getConnectionHeader()[&quot;callerid&quot;].c_str());
  }

  void constCallback(std_msgs::String::Ptr msg) const
  {
    ROS_INFO(&quot;A I heard(7): [%s] and I'm const&quot;, msg-&gt;data.c_str());
  }

<A NAME="1"></A>};

TEST(SubscriptionCallbackTypes, compile)
<FONT color="#f63526"><A HREF="javascript:ZweiFrames('match104-1.html#1',3,'match104-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>{
  ros::NodeHandle n;

  std::vector&lt;ros::Subscriber&gt; subs;
  subs.push_back(n.subscribe(&quot;chatter&quot;, 1000, chatterCallback));
  subs.push_back(n.subscribe&lt;std_msgs::String&gt;(&quot;chatter&quot;, 1000, chatterCallback));
  subs.push_back(n.subscribe(&quot;chatter&quot;, 1000, chatterCallback2));
  subs.push_back(n.subscribe(&quot;chatter&quot;, 1000, chatterCallback3));
  subs.push_back(n.subscribe(&quot;chatter&quot;, 1000, chatterCallback4));
  subs.push_back(n.subscribe(&quot;chatter&quot;, 1000, chatterCallback5));
  subs.push_back(n.subscribe(&quot;chatter&quot;, 1000, chatterCallback6));
  subs.push_back(n.subscribe(&quot;chatter&quot;, 1000, chatterCallback7));
  subs.push_back(n.subscribe(&quot;chatter&quot;, 1000, chatterCallback8));


  A a;
  subs.push_back(n.subscribe(&quot;chatter&quot;, 1000, &amp;A::chatterCallback, &amp;a));
  subs.push_back(n.subscribe&lt;std_msgs::String&gt;(&quot;chatter&quot;, 1000, &amp;A::chatterCallback, &amp;a));
  subs.push_back(n.subscribe(&quot;chatter&quot;, 1000, &amp;A::chatterCallback2, &amp;a));
  subs.push_back(n.subscribe(&quot;chatter&quot;, 1000, &amp;A::chatterCallback3, &amp;a));
  subs.push_back(n.subscribe(&quot;chatter&quot;, 1000, &amp;A::chatterCallback4, &amp;a));
<A NAME="0"></A>  subs.push_back(n.subscribe(&quot;chatter&quot;, 1000, &amp;A::chatterCallback5, &amp;a));</B></FONT>

  subs.push_back(n.subscribe&lt;std_msgs::String&gt;(&quot;chatter&quot;, 1000, boost::bind(&amp;A::chatterCallback6, &amp;a, boost::placeholders::_1, std::string(&quot;hello&quot;))));
<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match104-1.html#0',3,'match104-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>  subs.push_back(n.subscribe&lt;std_msgs::String, const std_msgs::String&amp;&gt;(&quot;chatter&quot;, 1000, boost::bind(&amp;A::chatterCallback7, &amp;a, boost::placeholders::_1, std::string(&quot;hello2&quot;))));


  subs.push_back(n.subscribe(&quot;chatter&quot;, 1000, &amp;A::chatterCallback8, &amp;a));
  subs.push_back(n.subscribe(&quot;chatter&quot;, 1000, &amp;A::chatterCallback9, &amp;a));
  subs.push_back(n.subscribe(&quot;chatter&quot;, 1000, &amp;A::chatterCallback10, &amp;a));

  subs.push_back(n.subscribe(&quot;chatter&quot;, 1000, &amp;A::constCallback, &amp;a));
}

int main(int argc, char **argv)
{
  testing::InitGoogleTest(&amp;argc, argv);

  ros::init( argc, argv, &quot;subscription_callback_types&quot; );</B></FONT>
  ros::NodeHandle nh;

  return RUN_ALL_TESTS();
}
</PRE>
</div>
<div style="flex-grow: 1;">
<h3>
<center>
<span>test_ns_node_remapping.cpp</span>
<span> - </span>
<span></span>
</center>
</h3>
<HR>
<PRE>
/*
 * Copyright (c) 2009, Willow Garage, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 *     * Redistributions of source code must retain the above copyright
 *       notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above copyright
 *       notice, this list of conditions and the following disclaimer in the
 *       documentation and/or other materials provided with the distribution.
 *     * Neither the name of the Willow Garage, Inc. nor the names of its
 *       contributors may be used to endorse or promote products derived from
 *       this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot;
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */

#include &lt;ros/ros.h&gt;
#include &lt;gtest/gtest.h&gt;

static int argc_;
static char** argv_;

<A NAME="1"></A>#define PRINT(cmd) printf(#cmd&quot;\n&quot;); cmd; printf(&quot;\n&quot;);

TEST(NamespaceRemappingTest, unqualified_remaps)
<FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match104-0.html#1',2,'match104-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>{
  ros::M_string local_remappings;
  local_remappings.insert(std::make_pair(&quot;a&quot;, &quot;Ra&quot;));
  local_remappings.insert(std::make_pair(&quot;b&quot;, &quot;Rb&quot;));
  local_remappings.insert(std::make_pair(&quot;c&quot;, &quot;Rc&quot;));

  PRINT(ros::NodeHandle base(&quot;a&quot;, local_remappings));
  PRINT(ros::NodeHandle a1(base, &quot;a&quot;));
  PRINT(ros::NodeHandle a2(base, &quot;a&quot;, ros::M_string()));
  PRINT(ros::NodeHandle  b(base, &quot;b&quot;));
  PRINT(ros::NodeHandle  c(base, &quot;c&quot;, ros::M_string()));  // Same as b, but different constructor</B></FONT>

  EXPECT_STREQ(base.getNamespace().c_str(), &quot;/a&quot;);
  EXPECT_STREQ(a1.getNamespace().c_str(), &quot;/a/Ra&quot;);
  EXPECT_STREQ(a2.getNamespace().c_str(), &quot;/a/Ra&quot;);
  EXPECT_STREQ( b.getNamespace().c_str(), &quot;/a/Rb&quot;);
  EXPECT_STREQ( c.getNamespace().c_str(), &quot;/a/Rc&quot;);
}

TEST(NamespaceRemappingTest, qualified_remaps)
{
  ros::M_string local_remappings;
  local_remappings.insert(std::make_pair(&quot;/a&quot;, &quot;/Ra&quot;));

  PRINT(ros::NodeHandle a(&quot;a&quot;, local_remappings));  // local_remappings don't apply to this nodehandle's name
  PRINT(ros::NodeHandle sub_a(a, &quot;a&quot;));             // remapping were fully qualified, so don't apply to /a/a

  EXPECT_STREQ(    a.getNamespace().c_str(), &quot;/a&quot;);
  EXPECT_STREQ(sub_a.getNamespace().c_str(), &quot;/a/a&quot;);
}

TEST(NamespaceRemappingTest, unqualified_root_remaps)
{
  ros::M_string local_remappings;
  local_remappings.insert(std::make_pair(&quot;a&quot;, &quot;Ra&quot;));
  local_remappings.insert(std::make_pair(&quot;b&quot;, &quot;Rb&quot;));

  ros::NodeHandle base(&quot;&quot;, local_remappings);
  ros::NodeHandle a(base, &quot;a&quot;);
  ros::NodeHandle b(base, &quot;b&quot;, ros::M_string());

  EXPECT_STREQ(a.getNamespace().c_str(), &quot;/Ra&quot;);
  EXPECT_STREQ(b.getNamespace().c_str(), &quot;/Rb&quot;);
}

TEST(NamespaceRemappingTest, tilde_namespaces)
{
  ros::M_string local_remappings;
<A NAME="0"></A>  local_remappings.insert(std::make_pair(&quot;a&quot;, &quot;Ra&quot;));
  local_remappings.insert(std::make_pair(&quot;b&quot;, &quot;Rb&quot;));

<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match104-0.html#0',2,'match104-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>  ros::NodeHandle base(&quot;~&quot;, local_remappings);
  ros::NodeHandle a(base, &quot;a&quot;);
  ros::NodeHandle b(base, &quot;b&quot;, ros::M_string());

  EXPECT_STREQ(base.getNamespace().c_str(), ros::this_node::getName().c_str());
  EXPECT_STREQ(a.getNamespace().c_str(), (ros::this_node::getName() + &quot;/Ra&quot;).c_str());
  EXPECT_STREQ(b.getNamespace().c_str(), (ros::this_node::getName() + &quot;/Rb&quot;).c_str());
}

int main(int argc, char** argv)
{
  testing::InitGoogleTest(&amp;argc, argv);
  ros::init(argc, argv, &quot;remapping_tester&quot;);</B></FONT>
  argc_ = argc;
  argv_ = argv;
  return RUN_ALL_TESTS();
}
</PRE>
</div>
  </div>
</body>
</html>
