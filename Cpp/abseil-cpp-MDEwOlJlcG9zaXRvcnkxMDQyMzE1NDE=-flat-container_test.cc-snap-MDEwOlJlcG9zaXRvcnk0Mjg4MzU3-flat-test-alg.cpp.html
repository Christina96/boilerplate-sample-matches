
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Tokens: 14, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>abseil-cpp-MDEwOlJlcG9zaXRvcnkxMDQyMzE1NDE=-flat-container_test.cc</h3>
            <pre><code>1  #include "absl/algorithm/container.h"
2  #include <functional>
3  #include <initializer_list>
4  #include <iterator>
5  #include <list>
6  #include <memory>
7  #include <ostream>
8  #include <random>
9  #include <set>
10  #include <unordered_set>
11  #include <utility>
12  #include <valarray>
13  #include <vector>
14  #include "gmock/gmock.h"
15  #include "gtest/gtest.h"
16  #include "absl/base/casts.h"
17  #include "absl/base/macros.h"
18  #include "absl/memory/memory.h"
19  #include "absl/types/span.h"
20  namespace {
21  using ::testing::Each;
22  using ::testing::ElementsAre;
23  using ::testing::Gt;
24  using ::testing::IsNull;
25  using ::testing::Lt;
26  using ::testing::Pointee;
27  using ::testing::Truly;
28  using ::testing::UnorderedElementsAre;
29  class NonMutatingTest : public testing::Test {
30   protected:
31    std::unordered_set<int> container_ = {1, 2, 3};
32    std::list<int> sequence_ = {1, 2, 3};
33    std::vector<int> vector_ = {1, 2, 3};
34    int array_[3] = {1, 2, 3};
35  };
36  struct AccumulateCalls {
37    void operator()(int value) { calls.push_back(value); }
38    std::vector<int> calls;
39  };
40  bool Predicate(int value) { return value < 3; }
41  bool BinPredicate(int v1, int v2) { return v1 < v2; }
42  bool Equals(int v1, int v2) { return v1 == v2; }
43  bool IsOdd(int x) { return x % 2 != 0; }
44  TEST_F(NonMutatingTest, Distance) {
45    EXPECT_EQ(container_.size(),
46              static_cast<size_t>(absl::c_distance(container_)));
47    EXPECT_EQ(sequence_.size(), static_cast<size_t>(absl::c_distance(sequence_)));
48    EXPECT_EQ(vector_.size(), static_cast<size_t>(absl::c_distance(vector_)));
49    EXPECT_EQ(ABSL_ARRAYSIZE(array_),
50              static_cast<size_t>(absl::c_distance(array_)));
51    EXPECT_EQ(vector_.size(),
52              static_cast<size_t>(absl::c_distance(std::vector<int>(vector_))));
53  }
54  TEST_F(NonMutatingTest, Distance_OverloadedBeginEnd) {
55    std::initializer_list<int> a = {1, 2, 3};
56    std::valarray<int> b = {1, 2, 3};
57    EXPECT_EQ(3, absl::c_distance(a));
58    EXPECT_EQ(3, absl::c_distance(b));
59  }
60  TEST_F(NonMutatingTest, ForEach) {
61    AccumulateCalls c = absl::c_for_each(container_, AccumulateCalls());
62    std::sort(c.calls.begin(), c.calls.end());
63    EXPECT_EQ(vector_, c.calls);
64    AccumulateCalls c2 =
65        absl::c_for_each(std::unordered_set<int>(container_), AccumulateCalls());
66    std::sort(c2.calls.begin(), c2.calls.end());
67    EXPECT_EQ(vector_, c2.calls);
68  }
69  TEST_F(NonMutatingTest, FindReturnsCorrectType) {
70    auto it = absl::c_find(container_, 3);
71    EXPECT_EQ(3, *it);
72    absl::c_find(absl::implicit_cast<const std::list<int>&>(sequence_), 3);
73  }
74  TEST_F(NonMutatingTest, FindIf) { absl::c_find_if(container_, Predicate); }
75  TEST_F(NonMutatingTest, FindIfNot) {
76    absl::c_find_if_not(container_, Predicate);
77  }
78  TEST_F(NonMutatingTest, FindEnd) {
79    absl::c_find_end(sequence_, vector_);
80    absl::c_find_end(vector_, sequence_);
81  }
82  TEST_F(NonMutatingTest, FindEndWithPredicate) {
83    absl::c_find_end(sequence_, vector_, BinPredicate);
84    absl::c_find_end(vector_, sequence_, BinPredicate);
85  }
86  TEST_F(NonMutatingTest, FindFirstOf) {
87    absl::c_find_first_of(container_, sequence_);
88    absl::c_find_first_of(sequence_, container_);
89  }
90  TEST_F(NonMutatingTest, FindFirstOfWithPredicate) {
91    absl::c_find_first_of(container_, sequence_, BinPredicate);
92    absl::c_find_first_of(sequence_, container_, BinPredicate);
93  }
94  TEST_F(NonMutatingTest, AdjacentFind) { absl::c_adjacent_find(sequence_); }
95  TEST_F(NonMutatingTest, AdjacentFindWithPredicate) {
96    absl::c_adjacent_find(sequence_, BinPredicate);
97  }
98  TEST_F(NonMutatingTest, Count) { EXPECT_EQ(1, absl::c_count(container_, 3)); }
99  TEST_F(NonMutatingTest, CountIf) {
100    EXPECT_EQ(2, absl::c_count_if(container_, Predicate));
101    const std::unordered_set<int>& const_container = container_;
102    EXPECT_EQ(2, absl::c_count_if(const_container, Predicate));
103  }
104  TEST_F(NonMutatingTest, Mismatch) {
105    {
106      auto result = absl::c_mismatch(vector_, sequence_);
107      EXPECT_EQ(result.first, vector_.end());
108      EXPECT_EQ(result.second, sequence_.end());
109    }
110    {
111      auto result = absl::c_mismatch(sequence_, vector_);
112      EXPECT_EQ(result.first, sequence_.end());
113      EXPECT_EQ(result.second, vector_.end());
114    }
115    sequence_.back() = 5;
116    {
117      auto result = absl::c_mismatch(vector_, sequence_);
118      EXPECT_EQ(result.first, std::prev(vector_.end()));
119      EXPECT_EQ(result.second, std::prev(sequence_.end()));
120    }
121    {
122      auto result = absl::c_mismatch(sequence_, vector_);
123      EXPECT_EQ(result.first, std::prev(sequence_.end()));
124      EXPECT_EQ(result.second, std::prev(vector_.end()));
125    }
126    sequence_.pop_back();
127    {
128      auto result = absl::c_mismatch(vector_, sequence_);
129      EXPECT_EQ(result.first, std::prev(vector_.end()));
130      EXPECT_EQ(result.second, sequence_.end());
131    }
132    {
133      auto result = absl::c_mismatch(sequence_, vector_);
134      EXPECT_EQ(result.first, sequence_.end());
135      EXPECT_EQ(result.second, std::prev(vector_.end()));
136    }
137    {
138      struct NoNotEquals {
139        constexpr bool operator==(NoNotEquals) const { return true; }
140        constexpr bool operator!=(NoNotEquals) const = delete;
141      };
142      std::vector<NoNotEquals> first;
143      std::list<NoNotEquals> second;
144      absl::c_mismatch(first, second);
145    }
146  }
147  TEST_F(NonMutatingTest, MismatchWithPredicate) {
148    {
149      auto result = absl::c_mismatch(vector_, sequence_, BinPredicate);
150      EXPECT_EQ(result.first, vector_.begin());
151      EXPECT_EQ(result.second, sequence_.begin());
152    }
153    {
154      auto result = absl::c_mismatch(sequence_, vector_, BinPredicate);
155      EXPECT_EQ(result.first, sequence_.begin());
156      EXPECT_EQ(result.second, vector_.begin());
157    }
158    sequence_.front() = 0;
159    {
160      auto result = absl::c_mismatch(vector_, sequence_, BinPredicate);
161      EXPECT_EQ(result.first, vector_.begin());
162      EXPECT_EQ(result.second, sequence_.begin());
163    }
164    {
165      auto result = absl::c_mismatch(sequence_, vector_, BinPredicate);
166      EXPECT_EQ(result.first, std::next(sequence_.begin()));
167      EXPECT_EQ(result.second, std::next(vector_.begin()));
168    }
169    sequence_.clear();
170    {
171      auto result = absl::c_mismatch(vector_, sequence_, BinPredicate);
172      EXPECT_EQ(result.first, vector_.begin());
173      EXPECT_EQ(result.second, sequence_.end());
174    }
175    {
176      auto result = absl::c_mismatch(sequence_, vector_, BinPredicate);
177      EXPECT_EQ(result.first, sequence_.end());
178      EXPECT_EQ(result.second, vector_.begin());
179    }
180  }
181  TEST_F(NonMutatingTest, Equal) {
182    EXPECT_TRUE(absl::c_equal(vector_, sequence_));
183    EXPECT_TRUE(absl::c_equal(sequence_, vector_));
184    EXPECT_TRUE(absl::c_equal(sequence_, array_));
185    EXPECT_TRUE(absl::c_equal(array_, vector_));
186    std::vector<int> vector_plus = {1, 2, 3};
187    vector_plus.push_back(4);
188    EXPECT_FALSE(absl::c_equal(vector_plus, sequence_));
189    EXPECT_FALSE(absl::c_equal(sequence_, vector_plus));
190    EXPECT_FALSE(absl::c_equal(array_, vector_plus));
191  }
192  TEST_F(NonMutatingTest, EqualWithPredicate) {
193    EXPECT_TRUE(absl::c_equal(vector_, sequence_, Equals));
194    EXPECT_TRUE(absl::c_equal(sequence_, vector_, Equals));
195    EXPECT_TRUE(absl::c_equal(array_, sequence_, Equals));
196    EXPECT_TRUE(absl::c_equal(vector_, array_, Equals));
197    std::vector<int> vector_plus = {1, 2, 3};
198    vector_plus.push_back(4);
199    EXPECT_FALSE(absl::c_equal(vector_plus, sequence_, Equals));
200    EXPECT_FALSE(absl::c_equal(sequence_, vector_plus, Equals));
201    EXPECT_FALSE(absl::c_equal(vector_plus, array_, Equals));
202  }
203  TEST_F(NonMutatingTest, IsPermutation) {
204    auto vector_permut_ = vector_;
205    std::next_permutation(vector_permut_.begin(), vector_permut_.end());
206    EXPECT_TRUE(absl::c_is_permutation(vector_permut_, sequence_));
207    EXPECT_TRUE(absl::c_is_permutation(sequence_, vector_permut_));
208    std::vector<int> vector_plus = {1, 2, 3};
209    vector_plus.push_back(4);
210    EXPECT_FALSE(absl::c_is_permutation(vector_plus, sequence_));
211    EXPECT_FALSE(absl::c_is_permutation(sequence_, vector_plus));
212  }
213  TEST_F(NonMutatingTest, IsPermutationWithPredicate) {
214    auto vector_permut_ = vector_;
215    std::next_permutation(vector_permut_.begin(), vector_permut_.end());
216    EXPECT_TRUE(absl::c_is_permutation(vector_permut_, sequence_, Equals));
217    EXPECT_TRUE(absl::c_is_permutation(sequence_, vector_permut_, Equals));
218    std::vector<int> vector_plus = {1, 2, 3};
219    vector_plus.push_back(4);
220    EXPECT_FALSE(absl::c_is_permutation(vector_plus, sequence_, Equals));
221    EXPECT_FALSE(absl::c_is_permutation(sequence_, vector_plus, Equals));
222  }
223  TEST_F(NonMutatingTest, Search) {
224    absl::c_search(sequence_, vector_);
225    absl::c_search(vector_, sequence_);
226    absl::c_search(array_, sequence_);
227  }
228  TEST_F(NonMutatingTest, SearchWithPredicate) {
229    absl::c_search(sequence_, vector_, BinPredicate);
230    absl::c_search(vector_, sequence_, BinPredicate);
231  }
232  TEST_F(NonMutatingTest, SearchN) { absl::c_search_n(sequence_, 3, 1); }
233  TEST_F(NonMutatingTest, SearchNWithPredicate) {
234    absl::c_search_n(sequence_, 3, 1, BinPredicate);
235  }
236  TEST_F(NonMutatingTest, LowerBound) {
237    std::list<int>::iterator i = absl::c_lower_bound(sequence_, 3);
238    ASSERT_TRUE(i != sequence_.end());
239    EXPECT_EQ(2, std::distance(sequence_.begin(), i));
240    EXPECT_EQ(3, *i);
241  }
242  TEST_F(NonMutatingTest, LowerBoundWithPredicate) {
243    std::vector<int> v(vector_);
244    std::sort(v.begin(), v.end(), std::greater<int>());
245    std::vector<int>::iterator i = absl::c_lower_bound(v, 3, std::greater<int>());
246    EXPECT_TRUE(i == v.begin());
247    EXPECT_EQ(3, *i);
248  }
249  TEST_F(NonMutatingTest, UpperBound) {
250    std::list<int>::iterator i = absl::c_upper_bound(sequence_, 1);
251    ASSERT_TRUE(i != sequence_.end());
252    EXPECT_EQ(1, std::distance(sequence_.begin(), i));
253    EXPECT_EQ(2, *i);
254  }
255  TEST_F(NonMutatingTest, UpperBoundWithPredicate) {
256    std::vector<int> v(vector_);
257    std::sort(v.begin(), v.end(), std::greater<int>());
258    std::vector<int>::iterator i = absl::c_upper_bound(v, 1, std::greater<int>());
259    EXPECT_EQ(3, i - v.begin());
260    EXPECT_TRUE(i == v.end());
261  }
262  TEST_F(NonMutatingTest, EqualRange) {
263    std::pair<std::list<int>::iterator, std::list<int>::iterator> p =
264        absl::c_equal_range(sequence_, 2);
265    EXPECT_EQ(1, std::distance(sequence_.begin(), p.first));
266    EXPECT_EQ(2, std::distance(sequence_.begin(), p.second));
267  }
268  TEST_F(NonMutatingTest, EqualRangeArray) {
269    auto p = absl::c_equal_range(array_, 2);
270    EXPECT_EQ(1, std::distance(std::begin(array_), p.first));
271    EXPECT_EQ(2, std::distance(std::begin(array_), p.second));
272  }
273  TEST_F(NonMutatingTest, EqualRangeWithPredicate) {
274    std::vector<int> v(vector_);
275    std::sort(v.begin(), v.end(), std::greater<int>());
276    std::pair<std::vector<int>::iterator, std::vector<int>::iterator> p =
277        absl::c_equal_range(v, 2, std::greater<int>());
278    EXPECT_EQ(1, std::distance(v.begin(), p.first));
279    EXPECT_EQ(2, std::distance(v.begin(), p.second));
280  }
281  TEST_F(NonMutatingTest, BinarySearch) {
282    EXPECT_TRUE(absl::c_binary_search(vector_, 2));
283    EXPECT_TRUE(absl::c_binary_search(std::vector<int>(vector_), 2));
284  }
285  TEST_F(NonMutatingTest, BinarySearchWithPredicate) {
286    std::vector<int> v(vector_);
287    std::sort(v.begin(), v.end(), std::greater<int>());
288    EXPECT_TRUE(absl::c_binary_search(v, 2, std::greater<int>()));
289    EXPECT_TRUE(
290        absl::c_binary_search(std::vector<int>(v), 2, std::greater<int>()));
291  }
292  TEST_F(NonMutatingTest, MinElement) {
293    std::list<int>::iterator i = absl::c_min_element(sequence_);
294    ASSERT_TRUE(i != sequence_.end());
295    EXPECT_EQ(*i, 1);
296  }
297  TEST_F(NonMutatingTest, MinElementWithPredicate) {
298    std::list<int>::iterator i =
299        absl::c_min_element(sequence_, std::greater<int>());
300    ASSERT_TRUE(i != sequence_.end());
301    EXPECT_EQ(*i, 3);
302  }
303  TEST_F(NonMutatingTest, MaxElement) {
304    std::list<int>::iterator i = absl::c_max_element(sequence_);
305    ASSERT_TRUE(i != sequence_.end());
306    EXPECT_EQ(*i, 3);
307  }
308  TEST_F(NonMutatingTest, MaxElementWithPredicate) {
309    std::list<int>::iterator i =
310        absl::c_max_element(sequence_, std::greater<int>());
311    ASSERT_TRUE(i != sequence_.end());
312    EXPECT_EQ(*i, 1);
313  }
314  TEST_F(NonMutatingTest, LexicographicalCompare) {
315    EXPECT_FALSE(absl::c_lexicographical_compare(sequence_, sequence_));
316    std::vector<int> v;
317    v.push_back(1);
318    v.push_back(2);
319    v.push_back(4);
320    EXPECT_TRUE(absl::c_lexicographical_compare(sequence_, v));
321    EXPECT_TRUE(absl::c_lexicographical_compare(std::list<int>(sequence_), v));
322  }
323  TEST_F(NonMutatingTest, LexicographicalCopmareWithPredicate) {
324    EXPECT_FALSE(absl::c_lexicographical_compare(sequence_, sequence_,
325                                                 std::greater<int>()));
326    std::vector<int> v;
327    v.push_back(1);
328    v.push_back(2);
329    v.push_back(4);
330    EXPECT_TRUE(
331        absl::c_lexicographical_compare(v, sequence_, std::greater<int>()));
332    EXPECT_TRUE(absl::c_lexicographical_compare(
333        std::vector<int>(v), std::list<int>(sequence_), std::greater<int>()));
334  }
335  TEST_F(NonMutatingTest, Includes) {
336    std::set<int> s(vector_.begin(), vector_.end());
337    s.insert(4);
338    EXPECT_TRUE(absl::c_includes(s, vector_));
339  }
340  TEST_F(NonMutatingTest, IncludesWithPredicate) {
341    std::vector<int> v = {3, 2, 1};
342    std::set<int, std::greater<int>> s(v.begin(), v.end());
343    s.insert(4);
344    EXPECT_TRUE(absl::c_includes(s, v, std::greater<int>()));
345  }
346  class NumericMutatingTest : public testing::Test {
347   protected:
348    std::list<int> list_ = {1, 2, 3};
349    std::vector<int> output_;
350  };
351  TEST_F(NumericMutatingTest, Iota) {
352    absl::c_iota(list_, 5);
353    std::list<int> expected{5, 6, 7};
354    EXPECT_EQ(list_, expected);
355  }
356  TEST_F(NonMutatingTest, Accumulate) {
357    EXPECT_EQ(absl::c_accumulate(sequence_, 4), 1 + 2 + 3 + 4);
358  }
359  TEST_F(NonMutatingTest, AccumulateWithBinaryOp) {
360    EXPECT_EQ(absl::c_accumulate(sequence_, 4, std::multiplies<int>()),
361              1 * 2 * 3 * 4);
362  }
363  TEST_F(NonMutatingTest, AccumulateLvalueInit) {
364    int lvalue = 4;
365    EXPECT_EQ(absl::c_accumulate(sequence_, lvalue), 1 + 2 + 3 + 4);
366  }
367  TEST_F(NonMutatingTest, AccumulateWithBinaryOpLvalueInit) {
368    int lvalue = 4;
369    EXPECT_EQ(absl::c_accumulate(sequence_, lvalue, std::multiplies<int>()),
370              1 * 2 * 3 * 4);
371  }
372  TEST_F(NonMutatingTest, InnerProduct) {
373    EXPECT_EQ(absl::c_inner_product(sequence_, vector_, 1000),
374              1000 + 1 * 1 + 2 * 2 + 3 * 3);
375  }
376  TEST_F(NonMutatingTest, InnerProductWithBinaryOps) {
377    EXPECT_EQ(absl::c_inner_product(sequence_, vector_, 10,
378                                    std::multiplies<int>(), std::plus<int>()),
379              10 * (1 + 1) * (2 + 2) * (3 + 3));
380  }
381  TEST_F(NonMutatingTest, InnerProductLvalueInit) {
382    int lvalue = 1000;
383    EXPECT_EQ(absl::c_inner_product(sequence_, vector_, lvalue),
384              1000 + 1 * 1 + 2 * 2 + 3 * 3);
385  }
386  TEST_F(NonMutatingTest, InnerProductWithBinaryOpsLvalueInit) {
387    int lvalue = 10;
388    EXPECT_EQ(absl::c_inner_product(sequence_, vector_, lvalue,
389                                    std::multiplies<int>(), std::plus<int>()),
390              10 * (1 + 1) * (2 + 2) * (3 + 3));
391  }
392  TEST_F(NumericMutatingTest, AdjacentDifference) {
393    auto last = absl::c_adjacent_difference(list_, std::back_inserter(output_));
394    *last = 1000;
395    std::vector<int> expected{1, 2 - 1, 3 - 2, 1000};
396    EXPECT_EQ(output_, expected);
397  }
398  TEST_F(NumericMutatingTest, AdjacentDifferenceWithBinaryOp) {
399    auto last = absl::c_adjacent_difference(list_, std::back_inserter(output_),
400                                            std::multiplies<int>());
401    *last = 1000;
402    std::vector<int> expected{1, 2 * 1, 3 * 2, 1000};
403    EXPECT_EQ(output_, expected);
404  }
405  TEST_F(NumericMutatingTest, PartialSum) {
406    auto last = absl::c_partial_sum(list_, std::back_inserter(output_));
407    *last = 1000;
408    std::vector<int> expected{1, 1 + 2, 1 + 2 + 3, 1000};
409    EXPECT_EQ(output_, expected);
410  }
411  TEST_F(NumericMutatingTest, PartialSumWithBinaryOp) {
412    auto last = absl::c_partial_sum(list_, std::back_inserter(output_),
413                                    std::multiplies<int>());
414    *last = 1000;
415    std::vector<int> expected{1, 1 * 2, 1 * 2 * 3, 1000};
416    EXPECT_EQ(output_, expected);
417  }
418  TEST_F(NonMutatingTest, LinearSearch) {
419    EXPECT_TRUE(absl::c_linear_search(container_, 3));
420    EXPECT_FALSE(absl::c_linear_search(container_, 4));
421  }
422  TEST_F(NonMutatingTest, AllOf) {
423    const std::vector<int>& v = vector_;
424    EXPECT_FALSE(absl::c_all_of(v, [](int x) { return x > 1; }));
425    EXPECT_TRUE(absl::c_all_of(v, [](int x) { return x > 0; }));
426  }
427  TEST_F(NonMutatingTest, AnyOf) {
428    const std::vector<int>& v = vector_;
429    EXPECT_TRUE(absl::c_any_of(v, [](int x) { return x > 2; }));
430    EXPECT_FALSE(absl::c_any_of(v, [](int x) { return x > 5; }));
431  }
432  TEST_F(NonMutatingTest, NoneOf) {
433    const std::vector<int>& v = vector_;
434    EXPECT_FALSE(absl::c_none_of(v, [](int x) { return x > 2; }));
435    EXPECT_TRUE(absl::c_none_of(v, [](int x) { return x > 5; }));
436  }
437  TEST_F(NonMutatingTest, MinMaxElementLess) {
438    std::pair<std::vector<int>::const_iterator, std::vector<int>::const_iterator>
439        p = absl::c_minmax_element(vector_, std::less<int>());
440    EXPECT_TRUE(p.first == vector_.begin());
441    EXPECT_TRUE(p.second == vector_.begin() + 2);
442  }
443  TEST_F(NonMutatingTest, MinMaxElementGreater) {
444    std::pair<std::vector<int>::const_iterator, std::vector<int>::const_iterator>
445        p = absl::c_minmax_element(vector_, std::greater<int>());
446    EXPECT_TRUE(p.first == vector_.begin() + 2);
447    EXPECT_TRUE(p.second == vector_.begin());
448  }
449  TEST_F(NonMutatingTest, MinMaxElementNoPredicate) {
450    std::pair<std::vector<int>::const_iterator, std::vector<int>::const_iterator>
451        p = absl::c_minmax_element(vector_);
452    EXPECT_TRUE(p.first == vector_.begin());
453    EXPECT_TRUE(p.second == vector_.begin() + 2);
454  }
455  class SortingTest : public testing::Test {
456   protected:
457    std::list<int> sorted_ = {1, 2, 3, 4};
458    std::list<int> unsorted_ = {2, 4, 1, 3};
459    std::list<int> reversed_ = {4, 3, 2, 1};
460  };
461  TEST_F(SortingTest, IsSorted) {
462    EXPECT_TRUE(absl::c_is_sorted(sorted_));
463    EXPECT_FALSE(absl::c_is_sorted(unsorted_));
464    EXPECT_FALSE(absl::c_is_sorted(reversed_));
465  }
466  TEST_F(SortingTest, IsSortedWithPredicate) {
467    EXPECT_FALSE(absl::c_is_sorted(sorted_, std::greater<int>()));
468    EXPECT_FALSE(absl::c_is_sorted(unsorted_, std::greater<int>()));
469    EXPECT_TRUE(absl::c_is_sorted(reversed_, std::greater<int>()));
470  }
471  TEST_F(SortingTest, IsSortedUntil) {
472    EXPECT_EQ(1, *absl::c_is_sorted_until(unsorted_));
473    EXPECT_EQ(4, *absl::c_is_sorted_until(unsorted_, std::greater<int>()));
474  }
475  TEST_F(SortingTest, NthElement) {
476    std::vector<int> unsorted = {2, 4, 1, 3};
477    absl::c_nth_element(unsorted, unsorted.begin() + 2);
478    EXPECT_THAT(unsorted, ElementsAre(Lt(3), Lt(3), 3, Gt(3)));
479    absl::c_nth_element(unsorted, unsorted.begin() + 2, std::greater<int>());
480    EXPECT_THAT(unsorted, ElementsAre(Gt(2), Gt(2), 2, Lt(2)));
481  }
482  TEST(MutatingTest, IsPartitioned) {
483    EXPECT_TRUE(
484        absl::c_is_partitioned(std::vector<int>{1, 3, 5, 2, 4, 6}, IsOdd));
485    EXPECT_FALSE(
486        absl::c_is_partitioned(std::vector<int>{1, 2, 3, 4, 5, 6}, IsOdd));
487    EXPECT_FALSE(
488        absl::c_is_partitioned(std::vector<int>{2, 4, 6, 1, 3, 5}, IsOdd));
489  }
490  TEST(MutatingTest, Partition) {
491    std::vector<int> actual = {1, 2, 3, 4, 5};
492    absl::c_partition(actual, IsOdd);
493    EXPECT_THAT(actual, Truly([](const std::vector<int>& c) {
494                  return absl::c_is_partitioned(c, IsOdd);
495                }));
496  }
497  TEST(MutatingTest, StablePartition) {
498    std::vector<int> actual = {1, 2, 3, 4, 5};
499    absl::c_stable_partition(actual, IsOdd);
500    EXPECT_THAT(actual, ElementsAre(1, 3, 5, 2, 4));
501  }
502  TEST(MutatingTest, PartitionCopy) {
503    const std::vector<int> initial = {1, 2, 3, 4, 5};
504    std::vector<int> odds, evens;
505    auto ends = absl::c_partition_copy(initial, back_inserter(odds),
506                                       back_inserter(evens), IsOdd);
507    *ends.first = 7;
508    *ends.second = 6;
509    EXPECT_THAT(odds, ElementsAre(1, 3, 5, 7));
510    EXPECT_THAT(evens, ElementsAre(2, 4, 6));
511  }
512  TEST(MutatingTest, PartitionPoint) {
513    const std::vector<int> initial = {1, 3, 5, 2, 4};
514    auto middle = absl::c_partition_point(initial, IsOdd);
515    EXPECT_EQ(2, *middle);
516  }
517  TEST(MutatingTest, CopyMiddle) {
518    const std::vector<int> initial = {4, -1, -2, -3, 5};
519    const std::list<int> input = {1, 2, 3};
520    const std::vector<int> expected = {4, 1, 2, 3, 5};
521    std::list<int> test_list(initial.begin(), initial.end());
522    absl::c_copy(input, ++test_list.begin());
523    EXPECT_EQ(std::list<int>(expected.begin(), expected.end()), test_list);
524    std::vector<int> test_vector = initial;
525    absl::c_copy(input, test_vector.begin() + 1);
526    EXPECT_EQ(expected, test_vector);
527  }
528  TEST(MutatingTest, CopyFrontInserter) {
529    const std::list<int> initial = {4, 5};
530    const std::list<int> input = {1, 2, 3};
531    const std::list<int> expected = {3, 2, 1, 4, 5};
532    std::list<int> test_list = initial;
533    absl::c_copy(input, std::front_inserter(test_list));
534    EXPECT_EQ(expected, test_list);
535  }
536  TEST(MutatingTest, CopyBackInserter) {
537    const std::vector<int> initial = {4, 5};
538    const std::list<int> input = {1, 2, 3};
539    const std::vector<int> expected = {4, 5, 1, 2, 3};
540    std::list<int> test_list(initial.begin(), initial.end());
541    absl::c_copy(input, std::back_inserter(test_list));
542    EXPECT_EQ(std::list<int>(expected.begin(), expected.end()), test_list);
543    std::vector<int> test_vector = initial;
544    absl::c_copy(input, std::back_inserter(test_vector));
545    EXPECT_EQ(expected, test_vector);
546  }
547  TEST(MutatingTest, CopyN) {
548    const std::vector<int> initial = {1, 2, 3, 4, 5};
549    const std::vector<int> expected = {1, 2};
550    std::vector<int> actual;
551    absl::c_copy_n(initial, 2, back_inserter(actual));
552    EXPECT_EQ(expected, actual);
553  }
554  TEST(MutatingTest, CopyIf) {
555    const std::list<int> input = {1, 2, 3};
556    std::vector<int> output;
557    absl::c_copy_if(input, std::back_inserter(output),
558                    [](int i) { return i != 2; });
559    EXPECT_THAT(output, ElementsAre(1, 3));
560  }
561  TEST(MutatingTest, CopyBackward) {
562    std::vector<int> actual = {1, 2, 3, 4, 5};
563    std::vector<int> expected = {1, 2, 1, 2, 3};
564    absl::c_copy_backward(absl::MakeSpan(actual.data(), 3), actual.end());
565    EXPECT_EQ(expected, actual);
566  }
567  TEST(MutatingTest, Move) {
568    std::vector<std::unique_ptr<int>> src;
569    src.emplace_back(absl::make_unique<int>(1));
570    src.emplace_back(absl::make_unique<int>(2));
571    src.emplace_back(absl::make_unique<int>(3));
572    src.emplace_back(absl::make_unique<int>(4));
573    src.emplace_back(absl::make_unique<int>(5));
574    std::vector<std::unique_ptr<int>> dest = {};
575    absl::c_move(src, std::back_inserter(dest));
576    EXPECT_THAT(src, Each(IsNull()));
577    EXPECT_THAT(dest, ElementsAre(Pointee(1), Pointee(2), Pointee(3), Pointee(4),
578                                  Pointee(5)));
579  }
580  TEST(MutatingTest, MoveBackward) {
581    std::vector<std::unique_ptr<int>> actual;
582    actual.emplace_back(absl::make_unique<int>(1));
583    actual.emplace_back(absl::make_unique<int>(2));
584    actual.emplace_back(absl::make_unique<int>(3));
585    actual.emplace_back(absl::make_unique<int>(4));
586    actual.emplace_back(absl::make_unique<int>(5));
587    auto subrange = absl::MakeSpan(actual.data(), 3);
588    absl::c_move_backward(subrange, actual.end());
589    EXPECT_THAT(actual, ElementsAre(IsNull(), IsNull(), Pointee(1), Pointee(2),
590                                    Pointee(3)));
591  }
592  TEST(MutatingTest, MoveWithRvalue) {
593    auto MakeRValueSrc = [] {
594      std::vector<std::unique_ptr<int>> src;
595      src.emplace_back(absl::make_unique<int>(1));
596      src.emplace_back(absl::make_unique<int>(2));
597      src.emplace_back(absl::make_unique<int>(3));
598      return src;
599    };
600    std::vector<std::unique_ptr<int>> dest = MakeRValueSrc();
601    absl::c_move(MakeRValueSrc(), std::back_inserter(dest));
602    EXPECT_THAT(dest, ElementsAre(Pointee(1), Pointee(2), Pointee(3), Pointee(1),
603                                  Pointee(2), Pointee(3)));
604  }
605  TEST(MutatingTest, SwapRanges) {
606    std::vector<int> odds = {2, 4, 6};
607    std::vector<int> evens = {1, 3, 5};
608    absl::c_swap_ranges(odds, evens);
609    EXPECT_THAT(odds, ElementsAre(1, 3, 5));
610    EXPECT_THAT(evens, ElementsAre(2, 4, 6));
611    odds.pop_back();
612    absl::c_swap_ranges(odds, evens);
613    EXPECT_THAT(odds, ElementsAre(2, 4));
614    EXPECT_THAT(evens, ElementsAre(1, 3, 6));
615    absl::c_swap_ranges(evens, odds);
616    EXPECT_THAT(odds, ElementsAre(1, 3));
617    EXPECT_THAT(evens, ElementsAre(2, 4, 6));
618  }
619  TEST_F(NonMutatingTest, Transform) {
620    std::vector<int> x{0, 2, 4}, y, z;
621    auto end = absl::c_transform(x, back_inserter(y), std::negate<int>());
622    EXPECT_EQ(std::vector<int>({0, -2, -4}), y);
623    *end = 7;
624    EXPECT_EQ(std::vector<int>({0, -2, -4, 7}), y);
625    y = {1, 3, 0};
626    end = absl::c_transform(x, y, back_inserter(z), std::plus<int>());
627    EXPECT_EQ(std::vector<int>({1, 5, 4}), z);
628    *end = 7;
629    EXPECT_EQ(std::vector<int>({1, 5, 4, 7}), z);
630    z.clear();
631    y.pop_back();
632    end = absl::c_transform(x, y, std::back_inserter(z), std::plus<int>());
633    EXPECT_EQ(std::vector<int>({1, 5}), z);
634    *end = 7;
635    EXPECT_EQ(std::vector<int>({1, 5, 7}), z);
636    z.clear();
637    std::swap(x, y);
638    end = absl::c_transform(x, y, std::back_inserter(z), std::plus<int>());
639    EXPECT_EQ(std::vector<int>({1, 5}), z);
640    *end = 7;
641    EXPECT_EQ(std::vector<int>({1, 5, 7}), z);
642  }
643  TEST(MutatingTest, Replace) {
644    const std::vector<int> initial = {1, 2, 3, 1, 4, 5};
645    const std::vector<int> expected = {4, 2, 3, 4, 4, 5};
646    std::vector<int> test_vector = initial;
647    absl::c_replace(test_vector, 1, 4);
648    EXPECT_EQ(expected, test_vector);
649    std::list<int> test_list(initial.begin(), initial.end());
650    absl::c_replace(test_list, 1, 4);
651    EXPECT_EQ(std::list<int>(expected.begin(), expected.end()), test_list);
652  }
653  TEST(MutatingTest, ReplaceIf) {
654    std::vector<int> actual = {1, 2, 3, 4, 5};
655    const std::vector<int> expected = {0, 2, 0, 4, 0};
656    absl::c_replace_if(actual, IsOdd, 0);
657    EXPECT_EQ(expected, actual);
658  }
659  TEST(MutatingTest, ReplaceCopy) {
660    const std::vector<int> initial = {1, 2, 3, 1, 4, 5};
661    const std::vector<int> expected = {4, 2, 3, 4, 4, 5};
662    std::vector<int> actual;
663    absl::c_replace_copy(initial, back_inserter(actual), 1, 4);
664    EXPECT_EQ(expected, actual);
665  }
666  TEST(MutatingTest, Sort) {
667    std::vector<int> test_vector = {2, 3, 1, 4};
668    absl::c_sort(test_vector);
669    EXPECT_THAT(test_vector, ElementsAre(1, 2, 3, 4));
670  }
671  TEST(MutatingTest, SortWithPredicate) {
672    std::vector<int> test_vector = {2, 3, 1, 4};
673    absl::c_sort(test_vector, std::greater<int>());
674    EXPECT_THAT(test_vector, ElementsAre(4, 3, 2, 1));
675  }
676  struct Element {
677    int key;
678    int value;
679    friend bool operator<(const Element& e1, const Element& e2) {
680      return e1.key < e2.key;
681    }
682    friend std::ostream& operator<<(std::ostream& o, const Element& e) {
683      return o << "{" << e.key << ", " << e.value << "}";
684    }
685  };
686  MATCHER_P2(IsElement, key, value, "") {
687    return arg.key == key && arg.value == value;
688  }
689  TEST(MutatingTest, StableSort) {
690    std::vector<Element> test_vector = {{1, 1}, {2, 1}, {2, 0}, {1, 0}, {2, 2}};
691    absl::c_stable_sort(test_vector);
692    EXPECT_THAT(test_vector,
693                ElementsAre(IsElement(1, 1), IsElement(1, 0), IsElement(2, 1),
694                            IsElement(2, 0), IsElement(2, 2)));
695  }
696  TEST(MutatingTest, StableSortWithPredicate) {
697    std::vector<Element> test_vector = {{1, 1}, {2, 1}, {2, 0}, {1, 0}, {2, 2}};
698    absl::c_stable_sort(test_vector, [](const Element& e1, const Element& e2) {
699      return e2 < e1;
700    });
701    EXPECT_THAT(test_vector,
702                ElementsAre(IsElement(2, 1), IsElement(2, 0), IsElement(2, 2),
703                            IsElement(1, 1), IsElement(1, 0)));
704  }
705  TEST(MutatingTest, ReplaceCopyIf) {
706    const std::vector<int> initial = {1, 2, 3, 4, 5};
707    const std::vector<int> expected = {0, 2, 0, 4, 0};
708    std::vector<int> actual;
709    absl::c_replace_copy_if(initial, back_inserter(actual), IsOdd, 0);
710    EXPECT_EQ(expected, actual);
711  }
712  TEST(MutatingTest, Fill) {
713    std::vector<int> actual(5);
714    absl::c_fill(actual, 1);
715    EXPECT_THAT(actual, ElementsAre(1, 1, 1, 1, 1));
716  }
717  TEST(MutatingTest, FillN) {
718    std::vector<int> actual(5, 0);
719    absl::c_fill_n(actual, 2, 1);
720    EXPECT_THAT(actual, ElementsAre(1, 1, 0, 0, 0));
721  }
722  TEST(MutatingTest, Generate) {
723    std::vector<int> actual(5);
724    int x = 0;
725    absl::c_generate(actual, [&x]() { return ++x; });
726    EXPECT_THAT(actual, ElementsAre(1, 2, 3, 4, 5));
727  }
728  TEST(MutatingTest, GenerateN) {
729    std::vector<int> actual(5, 0);
730    int x = 0;
731    absl::c_generate_n(actual, 3, [&x]() { return ++x; });
732    EXPECT_THAT(actual, ElementsAre(1, 2, 3, 0, 0));
733  }
734  TEST(MutatingTest, RemoveCopy) {
735    std::vector<int> actual;
736    absl::c_remove_copy(std::vector<int>{1, 2, 3}, back_inserter(actual), 2);
737    EXPECT_THAT(actual, ElementsAre(1, 3));
738  }
739  TEST(MutatingTest, RemoveCopyIf) {
740    std::vector<int> actual;
741    absl::c_remove_copy_if(std::vector<int>{1, 2, 3}, back_inserter(actual),
742                           IsOdd);
743    EXPECT_THAT(actual, ElementsAre(2));
744  }
745  TEST(MutatingTest, UniqueCopy) {
746    std::vector<int> actual;
747    absl::c_unique_copy(std::vector<int>{1, 2, 2, 2, 3, 3, 2},
748                        back_inserter(actual));
749    EXPECT_THAT(actual, ElementsAre(1, 2, 3, 2));
750  }
751  TEST(MutatingTest, UniqueCopyWithPredicate) {
752    std::vector<int> actual;
753    absl::c_unique_copy(std::vector<int>{1, 2, 3, -1, -2, -3, 1},
754                        back_inserter(actual),
755                        [](int x, int y) { return (x < 0) == (y < 0); });
756    EXPECT_THAT(actual, ElementsAre(1, -1, 1));
757  }
758  TEST(MutatingTest, Reverse) {
759    std::vector<int> test_vector = {1, 2, 3, 4};
760    absl::c_reverse(test_vector);
761    EXPECT_THAT(test_vector, ElementsAre(4, 3, 2, 1));
762    std::list<int> test_list = {1, 2, 3, 4};
763    absl::c_reverse(test_list);
764    EXPECT_THAT(test_list, ElementsAre(4, 3, 2, 1));
765  }
766  TEST(MutatingTest, ReverseCopy) {
767    std::vector<int> actual;
768    absl::c_reverse_copy(std::vector<int>{1, 2, 3, 4}, back_inserter(actual));
769    EXPECT_THAT(actual, ElementsAre(4, 3, 2, 1));
770  }
771  TEST(MutatingTest, Rotate) {
772    std::vector<int> actual = {1, 2, 3, 4};
773    auto it = absl::c_rotate(actual, actual.begin() + 2);
774    EXPECT_THAT(actual, testing::ElementsAreArray({3, 4, 1, 2}));
775    EXPECT_EQ(*it, 1);
776  }
777  TEST(MutatingTest, RotateCopy) {
778    std::vector<int> initial = {1, 2, 3, 4};
779    std::vector<int> actual;
780    auto end =
781        absl::c_rotate_copy(initial, initial.begin() + 2, back_inserter(actual));
782    *end = 5;
783    EXPECT_THAT(actual, ElementsAre(3, 4, 1, 2, 5));
784  }
785  TEST(MutatingTest, Shuffle) {
786    std::vector<int> actual = {1, 2, 3, 4, 5};
787    absl::c_shuffle(actual, std::random_device());
788    EXPECT_THAT(actual, UnorderedElementsAre(1, 2, 3, 4, 5));
789  }
790  TEST(MutatingTest, PartialSort) {
791    std::vector<int> sequence{5, 3, 42, 0};
792    absl::c_partial_sort(sequence, sequence.begin() + 2);
793    EXPECT_THAT(absl::MakeSpan(sequence.data(), 2), ElementsAre(0, 3));
794    absl::c_partial_sort(sequence, sequence.begin() + 2, std::greater<int>());
795    EXPECT_THAT(absl::MakeSpan(sequence.data(), 2), ElementsAre(42, 5));
796  }
797  TEST(MutatingTest, PartialSortCopy) {
798    const std::vector<int> initial = {5, 3, 42, 0};
799    std::vector<int> actual(2);
800    absl::c_partial_sort_copy(initial, actual);
801    EXPECT_THAT(actual, ElementsAre(0, 3));
802    absl::c_partial_sort_copy(initial, actual, std::greater<int>());
803    EXPECT_THAT(actual, ElementsAre(42, 5));
804  }
805  TEST(MutatingTest, Merge) {
806    std::vector<int> actual;
807    absl::c_merge(std::vector<int>{1, 3, 5}, std::vector<int>{2, 4},
808                  back_inserter(actual));
809    EXPECT_THAT(actual, ElementsAre(1, 2, 3, 4, 5));
810  }
811  TEST(MutatingTest, MergeWithComparator) {
812    std::vector<int> actual;
813    absl::c_merge(std::vector<int>{5, 3, 1}, std::vector<int>{4, 2},
814                  back_inserter(actual), std::greater<int>());
815    EXPECT_THAT(actual, ElementsAre(5, 4, 3, 2, 1));
816  }
817  TEST(MutatingTest, InplaceMerge) {
818    std::vector<int> actual = {1, 3, 5, 2, 4};
819    absl::c_inplace_merge(actual, actual.begin() + 3);
820    EXPECT_THAT(actual, ElementsAre(1, 2, 3, 4, 5));
821  }
822  TEST(MutatingTest, InplaceMergeWithComparator) {
823    std::vector<int> actual = {5, 3, 1, 4, 2};
824    absl::c_inplace_merge(actual, actual.begin() + 3, std::greater<int>());
825    EXPECT_THAT(actual, ElementsAre(5, 4, 3, 2, 1));
826  }
827  class SetOperationsTest : public testing::Test {
828   protected:
829    std::vector<int> a_ = {1, 2, 3};
830    std::vector<int> b_ = {1, 3, 5};
831    std::vector<int> a_reversed_ = {3, 2, 1};
832    std::vector<int> b_reversed_ = {5, 3, 1};
833  };
834  TEST_F(SetOperationsTest, SetUnion) {
835    std::vector<int> actual;
836    absl::c_set_union(a_, b_, back_inserter(actual));
837    EXPECT_THAT(actual, ElementsAre(1, 2, 3, 5));
838  }
839  TEST_F(SetOperationsTest, SetUnionWithComparator) {
840    std::vector<int> actual;
841    absl::c_set_union(a_reversed_, b_reversed_, back_inserter(actual),
842                      std::greater<int>());
843    EXPECT_THAT(actual, ElementsAre(5, 3, 2, 1));
844  }
845  TEST_F(SetOperationsTest, SetIntersection) {
846    std::vector<int> actual;
847    absl::c_set_intersection(a_, b_, back_inserter(actual));
848    EXPECT_THAT(actual, ElementsAre(1, 3));
849  }
850  TEST_F(SetOperationsTest, SetIntersectionWithComparator) {
851    std::vector<int> actual;
852    absl::c_set_intersection(a_reversed_, b_reversed_, back_inserter(actual),
853                             std::greater<int>());
854    EXPECT_THAT(actual, ElementsAre(3, 1));
855  }
856  TEST_F(SetOperationsTest, SetDifference) {
857    std::vector<int> actual;
858    absl::c_set_difference(a_, b_, back_inserter(actual));
859    EXPECT_THAT(actual, ElementsAre(2));
860  }
861  TEST_F(SetOperationsTest, SetDifferenceWithComparator) {
862    std::vector<int> actual;
863    absl::c_set_difference(a_reversed_, b_reversed_, back_inserter(actual),
864                           std::greater<int>());
865    EXPECT_THAT(actual, ElementsAre(2));
866  }
867  TEST_F(SetOperationsTest, SetSymmetricDifference) {
868    std::vector<int> actual;
869    absl::c_set_symmetric_difference(a_, b_, back_inserter(actual));
870    EXPECT_THAT(actual, ElementsAre(2, 5));
871  }
872  TEST_F(SetOperationsTest, SetSymmetricDifferenceWithComparator) {
873    std::vector<int> actual;
874    absl::c_set_symmetric_difference(a_reversed_, b_reversed_,
875                                     back_inserter(actual), std::greater<int>());
876    EXPECT_THAT(actual, ElementsAre(5, 2));
877  }
878  TEST(HeapOperationsTest, WithoutComparator) {
879    std::vector<int> heap = {1, 2, 3};
880    EXPECT_FALSE(absl::c_is_heap(heap));
881    absl::c_make_heap(heap);
882    EXPECT_TRUE(absl::c_is_heap(heap));
883    heap.push_back(4);
884    EXPECT_EQ(3, absl::c_is_heap_until(heap) - heap.begin());
885    absl::c_push_heap(heap);
886    EXPECT_EQ(4, heap[0]);
887    absl::c_pop_heap(heap);
888    EXPECT_EQ(4, heap[3]);
889    absl::c_make_heap(heap);
890    absl::c_sort_heap(heap);
891    EXPECT_THAT(heap, ElementsAre(1, 2, 3, 4));
892    EXPECT_FALSE(absl::c_is_heap(heap));
893  }
894  TEST(HeapOperationsTest, WithComparator) {
895    using greater = std::greater<int>;
896    std::vector<int> heap = {3, 2, 1};
897    EXPECT_FALSE(absl::c_is_heap(heap, greater()));
898    absl::c_make_heap(heap, greater());
899    EXPECT_TRUE(absl::c_is_heap(heap, greater()));
900    heap.push_back(0);
901    EXPECT_EQ(3, absl::c_is_heap_until(heap, greater()) - heap.begin());
902    absl::c_push_heap(heap, greater());
903    EXPECT_EQ(0, heap[0]);
904    absl::c_pop_heap(heap, greater());
905    EXPECT_EQ(0, heap[3]);
906    absl::c_make_heap(heap, greater());
907    absl::c_sort_heap(heap, greater());
908    EXPECT_THAT(heap, ElementsAre(3, 2, 1, 0));
909    EXPECT_FALSE(absl::c_is_heap(heap, greater()));
910  }
911  TEST(MutatingTest, PermutationOperations) {
912    std::vector<int> initial = {1, 2, 3, 4};
913    std::vector<int> permuted = initial;
914    absl::c_next_permutation(permuted);
915    EXPECT_TRUE(absl::c_is_permutation(initial, permuted));
916    EXPECT_TRUE(absl::c_is_permutation(initial, permuted, std::equal_to<int>()));
917    std::vector<int> permuted2 = initial;
918    absl::c_prev_permutation(permuted2, std::greater<int>());
919    EXPECT_EQ(permuted, permuted2);
<span onclick='openModal()' class='match'>920    absl::c_prev_permutation(permuted);
921    EXPECT_EQ(initial, permuted);
922  }
</span>923  }  
</code></pre>
        </div>
        <div class="column">
            <h3>snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-test-alg.cpp</h3>
            <pre><code>1  #include <gtest/gtest.h>
2  #include "Snap.h"
3  void CheckVectors(const TIntPrV& Expected, const TIntPrV& Actual);
4  void CheckVectors(const TFltPrV& Expected, const TFltPrV& Actual);
5  void CheckVectors(const TIntSet& Expected, const TIntSet& Actual);
6  void CheckVectors(const TIntV& Expected, const TIntV& Actual);
7  void CheckGraphs(const TIntPrV& Expected, const PUNGraph& Actual);
8  void CheckGraphs(const TIntPrV& Expected, const PNGraph& Actual);
9  void CheckGraphs(const TIntPrV& Expected, const PNEGraph& Actual);
10  void CheckNotInSet(int Key, const TIntSet& Keys);
11  void AddValues(TIntV& Vector, int NumValues, int Value);
12  void AddConsecutiveValues(TIntV& Vector, int Start, int End);
13  void GetKeys(TIntV& Keys, const TIntPrV& Map);
14  class GraphTest : public ::testing::Test {
15   protected:
16    PUNGraph TUNLoopGraph;
17    PNGraph TNLoopGraph;
18    PNEGraph TNELoopGraph;
19    PUNGraph TUNReverseTree;
20    PNGraph TNReverseTree;
21    PNEGraph TNEReverseTree;
22    PUNGraph TUNComplicatedGraph;
23    PNGraph TNComplicatedGraph;
24    PNEGraph TNEComplicatedGraph;
25    PUNGraph TUNComplicatedGraphWithLoop;
26    PNGraph TNComplicatedGraphWithLoop;
27    PNEGraph TNEComplicatedGraphWithLoop;
28    virtual void SetUp() {
29      TUNLoopGraph = GenerateLoopGraph(TUNGraph::New());
30      TNLoopGraph = GenerateLoopGraph(TNGraph::New());
31      TNELoopGraph = GenerateLoopGraph(TNEGraph::New());
32      TUNReverseTree = GenerateReverseTree(TUNGraph::New());
33      TNReverseTree = GenerateReverseTree(TNGraph::New());
34      TNEReverseTree = GenerateReverseTree(TNEGraph::New());
35      TUNComplicatedGraph = GenerateComplicatedGraph(TUNGraph::New());
36      TNComplicatedGraph = GenerateComplicatedGraph(TNGraph::New());
37      TNEComplicatedGraph = GenerateComplicatedGraph(TNEGraph::New());
38      TUNComplicatedGraphWithLoop =
39          GenerateComplicatedGraphWithLoop(TUNGraph::New());
40      TNComplicatedGraphWithLoop =
41          GenerateComplicatedGraphWithLoop(TNGraph::New());
42      TNEComplicatedGraphWithLoop =
43          GenerateComplicatedGraphWithLoop(TNEGraph::New());
44    }
45    template<class PGraph>
46    void GenerateNodes(const PGraph& Graph, int NumNodes = 5) {
47      for (int i = 0; i < NumNodes; i++) {
48        Graph->AddNode(i);
49      }
50    }
51    template<class PGraph>
52    PGraph GenerateLoopGraph(const PGraph& Graph) {
53      GenerateNodes(Graph);
54      Graph->AddEdge(0, 1);
55      Graph->AddEdge(1, 2);
56      Graph->AddEdge(2, 3);
57      Graph->AddEdge(3, 4);
58      Graph->AddEdge(4, 0);
59      Graph->AddEdge(4, 0);
60      Graph->AddEdge(0, 4);
61      return Graph;
62    }
63    template<class PGraph>
64    PGraph GenerateReverseTree(const PGraph& Graph) {
65      GenerateNodes(Graph);
66      Graph->AddEdge(0, 1);
67      Graph->AddEdge(0, 2);
68      Graph->AddEdge(1, 3);
69      Graph->AddEdge(2, 4);
70      return Graph;
71    }
72    template<class PGraph>
73    PGraph GenerateComplicatedGraph(const PGraph& Graph) {
74      GenerateNodes(Graph);
75      Graph->AddEdge(0, 1);
76      Graph->AddEdge(0, 2);
77      Graph->AddEdge(1, 2);
78      Graph->AddEdge(2, 1);
79      Graph->AddEdge(2, 4);
80      Graph->AddEdge(1, 4);
81      Graph->AddEdge(1, 4);
82      return Graph;
83    }
84    template<class PGraph>
85    PGraph GenerateComplicatedGraphWithLoop(const PGraph& Graph) {
86      GenerateComplicatedGraph(Graph);
87      Graph->AddEdge(0, 0);
88      return Graph;
89    }
90  };
91  class TreeTest : public ::testing::Test {
92   protected:
93    PNGraph SingleNode;
94    PNGraph Tree;
95    PNGraph Forest;
96    PNGraph Circle;
97    virtual void SetUp() {
98      SingleNode = GetSingleNode();
99      Tree = GetTree();
100      Forest = GetForest();
101      Circle = GetCircle();
102    }
103    PNGraph GetSingleNode() {
104      PNGraph G = TNGraph::New();
105      G->AddNode(1);
106      return G;
107    }
108    PNGraph GetTree() {
109      PNGraph G = TNGraph::New();
110      for (int i = 1; i < 15; i++) {
111        G->AddNode(i);
112      }
113      for (int i = 2; i < 15; i++) {
114        G->AddEdge(i, i/2);
115      }
116      return G;
117    }
118    PNGraph GetForest() {
119      PNGraph G = GetTree();
120      G->DelEdge(4,2);
121      return G;
122    }
123    PNGraph GetCircle() {
124      PNGraph G = GetTree();
125      G->AddEdge(7,2);
126      return G;
127    }
128  };
129  TEST_F(GraphTest, CntInDegNodesTest) {
130    EXPECT_EQ(0, TSnap::CntInDegNodes(TUNLoopGraph, 0));
131    EXPECT_EQ(0, TSnap::CntInDegNodes(TUNLoopGraph, 1));
132    EXPECT_EQ(5, TSnap::CntInDegNodes(TUNLoopGraph, 2));
133    EXPECT_EQ(0, TSnap::CntInDegNodes(TUNLoopGraph, 3));
134    EXPECT_EQ(0, TSnap::CntInDegNodes(TUNLoopGraph, 4));
135    EXPECT_EQ(0, TSnap::CntInDegNodes(TNLoopGraph, 0));
136    EXPECT_EQ(4, TSnap::CntInDegNodes(TNLoopGraph, 1));
137    EXPECT_EQ(1, TSnap::CntInDegNodes(TNLoopGraph, 2));
138    EXPECT_EQ(0, TSnap::CntInDegNodes(TNLoopGraph, 3));
139    EXPECT_EQ(0, TSnap::CntInDegNodes(TNLoopGraph, 4));
140    EXPECT_EQ(0, TSnap::CntInDegNodes(TNELoopGraph, 0));
141    EXPECT_EQ(3, TSnap::CntInDegNodes(TNELoopGraph, 1));
142    EXPECT_EQ(2, TSnap::CntInDegNodes(TNELoopGraph, 2));
143    EXPECT_EQ(0, TSnap::CntInDegNodes(TNELoopGraph, 3));
144    EXPECT_EQ(0, TSnap::CntInDegNodes(TNELoopGraph, 4));
145    EXPECT_EQ(0, TSnap::CntInDegNodes(TUNReverseTree, 0));
146    EXPECT_EQ(2, TSnap::CntInDegNodes(TUNReverseTree, 1));
147    EXPECT_EQ(3, TSnap::CntInDegNodes(TUNReverseTree, 2));
148    EXPECT_EQ(0, TSnap::CntInDegNodes(TUNReverseTree, 3));
149    EXPECT_EQ(0, TSnap::CntInDegNodes(TUNReverseTree, 4));
150    EXPECT_EQ(1, TSnap::CntInDegNodes(TNReverseTree, 0));
151    EXPECT_EQ(4, TSnap::CntInDegNodes(TNReverseTree, 1));
152    EXPECT_EQ(0, TSnap::CntInDegNodes(TNReverseTree, 2));
153    EXPECT_EQ(0, TSnap::CntInDegNodes(TNReverseTree, 3));
154    EXPECT_EQ(0, TSnap::CntInDegNodes(TNReverseTree, 4));
155    EXPECT_EQ(1, TSnap::CntInDegNodes(TNEReverseTree, 0));
156    EXPECT_EQ(4, TSnap::CntInDegNodes(TNEReverseTree, 1));
157    EXPECT_EQ(0, TSnap::CntInDegNodes(TNEReverseTree, 2));
158    EXPECT_EQ(0, TSnap::CntInDegNodes(TNEReverseTree, 3));
159    EXPECT_EQ(0, TSnap::CntInDegNodes(TNEReverseTree, 4));
160    EXPECT_EQ(1, TSnap::CntInDegNodes(TUNComplicatedGraph, 0));
161    EXPECT_EQ(0, TSnap::CntInDegNodes(TUNComplicatedGraph, 1));
162    EXPECT_EQ(2, TSnap::CntInDegNodes(TUNComplicatedGraph, 2));
163    EXPECT_EQ(2, TSnap::CntInDegNodes(TUNComplicatedGraph, 3));
164    EXPECT_EQ(0, TSnap::CntInDegNodes(TUNComplicatedGraph, 4));
165    EXPECT_EQ(2, TSnap::CntInDegNodes(TNComplicatedGraph, 0));
166    EXPECT_EQ(0, TSnap::CntInDegNodes(TNComplicatedGraph, 1));
167    EXPECT_EQ(3, TSnap::CntInDegNodes(TNComplicatedGraph, 2));
168    EXPECT_EQ(0, TSnap::CntInDegNodes(TNComplicatedGraph, 3));
169    EXPECT_EQ(0, TSnap::CntInDegNodes(TNComplicatedGraph, 4));
170    EXPECT_EQ(2, TSnap::CntInDegNodes(TNEComplicatedGraph, 0));
171    EXPECT_EQ(0, TSnap::CntInDegNodes(TNEComplicatedGraph, 1));
172    EXPECT_EQ(2, TSnap::CntInDegNodes(TNEComplicatedGraph, 2));
173    EXPECT_EQ(1, TSnap::CntInDegNodes(TNEComplicatedGraph, 3));
174    EXPECT_EQ(0, TSnap::CntInDegNodes(TNEComplicatedGraph, 4));
175  }
176  TEST_F(GraphTest, CntOutDegNodesTest) {
177    EXPECT_EQ(0, TSnap::CntOutDegNodes(TUNLoopGraph, 0));
178    EXPECT_EQ(0, TSnap::CntOutDegNodes(TUNLoopGraph, 1));
179    EXPECT_EQ(5, TSnap::CntOutDegNodes(TUNLoopGraph, 2));
180    EXPECT_EQ(0, TSnap::CntOutDegNodes(TUNLoopGraph, 3));
181    EXPECT_EQ(0, TSnap::CntOutDegNodes(TUNLoopGraph, 4));
182    EXPECT_EQ(0, TSnap::CntOutDegNodes(TNLoopGraph, 0));
183    EXPECT_EQ(4, TSnap::CntOutDegNodes(TNLoopGraph, 1));
184    EXPECT_EQ(1, TSnap::CntOutDegNodes(TNLoopGraph, 2));
185    EXPECT_EQ(0, TSnap::CntOutDegNodes(TNLoopGraph, 3));
186    EXPECT_EQ(0, TSnap::CntOutDegNodes(TNLoopGraph, 4));
187    EXPECT_EQ(0, TSnap::CntOutDegNodes(TNELoopGraph, 0));
188    EXPECT_EQ(3, TSnap::CntOutDegNodes(TNELoopGraph, 1));
189    EXPECT_EQ(2, TSnap::CntOutDegNodes(TNELoopGraph, 2));
190    EXPECT_EQ(0, TSnap::CntOutDegNodes(TNELoopGraph, 3));
191    EXPECT_EQ(0, TSnap::CntOutDegNodes(TNELoopGraph, 4));
192    EXPECT_EQ(0, TSnap::CntOutDegNodes(TUNReverseTree, 0));
193    EXPECT_EQ(2, TSnap::CntOutDegNodes(TUNReverseTree, 1));
194    EXPECT_EQ(3, TSnap::CntOutDegNodes(TUNReverseTree, 2));
195    EXPECT_EQ(0, TSnap::CntOutDegNodes(TUNReverseTree, 3));
196    EXPECT_EQ(0, TSnap::CntOutDegNodes(TUNReverseTree, 4));
197    EXPECT_EQ(2, TSnap::CntOutDegNodes(TNReverseTree, 0));
198    EXPECT_EQ(2, TSnap::CntOutDegNodes(TNReverseTree, 1));
199    EXPECT_EQ(1, TSnap::CntOutDegNodes(TNReverseTree, 2));
200    EXPECT_EQ(0, TSnap::CntOutDegNodes(TNReverseTree, 3));
201    EXPECT_EQ(0, TSnap::CntOutDegNodes(TNReverseTree, 4));
202    EXPECT_EQ(2, TSnap::CntOutDegNodes(TNEReverseTree, 0));
203    EXPECT_EQ(2, TSnap::CntOutDegNodes(TNEReverseTree, 1));
204    EXPECT_EQ(1, TSnap::CntOutDegNodes(TNEReverseTree, 2));
205    EXPECT_EQ(0, TSnap::CntOutDegNodes(TNEReverseTree, 3));
206    EXPECT_EQ(0, TSnap::CntOutDegNodes(TNEReverseTree, 4));
207    EXPECT_EQ(1, TSnap::CntOutDegNodes(TUNComplicatedGraph, 0));
208    EXPECT_EQ(0, TSnap::CntOutDegNodes(TUNComplicatedGraph, 1));
209    EXPECT_EQ(2, TSnap::CntOutDegNodes(TUNComplicatedGraph, 2));
210    EXPECT_EQ(2, TSnap::CntOutDegNodes(TUNComplicatedGraph, 3));
211    EXPECT_EQ(0, TSnap::CntOutDegNodes(TUNComplicatedGraph, 4));
212    EXPECT_EQ(2, TSnap::CntOutDegNodes(TNComplicatedGraph, 0));
213    EXPECT_EQ(0, TSnap::CntOutDegNodes(TNComplicatedGraph, 1));
214    EXPECT_EQ(3, TSnap::CntOutDegNodes(TNComplicatedGraph, 2));
215    EXPECT_EQ(0, TSnap::CntOutDegNodes(TNComplicatedGraph, 3));
216    EXPECT_EQ(0, TSnap::CntOutDegNodes(TNComplicatedGraph, 4));
217    EXPECT_EQ(2, TSnap::CntOutDegNodes(TNEComplicatedGraph, 0));
218    EXPECT_EQ(0, TSnap::CntOutDegNodes(TNEComplicatedGraph, 1));
219    EXPECT_EQ(2, TSnap::CntOutDegNodes(TNEComplicatedGraph, 2));
220    EXPECT_EQ(1, TSnap::CntOutDegNodes(TNEComplicatedGraph, 3));
221    EXPECT_EQ(0, TSnap::CntOutDegNodes(TNEComplicatedGraph, 4));
222  }
223  TEST_F(GraphTest, CntDegNodesTest) {
224    EXPECT_EQ(5, TSnap::CntDegNodes(TUNLoopGraph, 2));
225    EXPECT_EQ(3, TSnap::CntDegNodes(TNLoopGraph, 2));
226    EXPECT_EQ(3, TSnap::CntDegNodes(TNELoopGraph, 2));
227    EXPECT_EQ(0, TSnap::CntDegNodes(TUNLoopGraph, 3));
228    EXPECT_EQ(2, TSnap::CntDegNodes(TNLoopGraph, 3));
229    EXPECT_EQ(0, TSnap::CntDegNodes(TNELoopGraph, 3));
230    EXPECT_EQ(3, TSnap::CntDegNodes(TUNReverseTree, 2));
231    EXPECT_EQ(3, TSnap::CntDegNodes(TNReverseTree, 2));
232    EXPECT_EQ(3, TSnap::CntDegNodes(TNEReverseTree, 2));
233    EXPECT_EQ(2, TSnap::CntDegNodes(TUNReverseTree, 1));
234    EXPECT_EQ(2, TSnap::CntDegNodes(TNReverseTree, 1));
235    EXPECT_EQ(2, TSnap::CntDegNodes(TNEReverseTree, 1));
236    EXPECT_EQ(2, TSnap::CntDegNodes(TUNComplicatedGraph, 3));
237    EXPECT_EQ(0, TSnap::CntDegNodes(TNComplicatedGraph, 3));
238    EXPECT_EQ(1, TSnap::CntDegNodes(TNEComplicatedGraph, 3));
239    EXPECT_EQ(0, TSnap::CntDegNodes(TUNComplicatedGraph, 4));
240    EXPECT_EQ(2, TSnap::CntDegNodes(TNComplicatedGraph, 4));
241    EXPECT_EQ(1, TSnap::CntDegNodes(TNEComplicatedGraph, 4));
242  }
243  TEST_F(GraphTest, CntNonZNodesTest) {
244    EXPECT_EQ(5, TSnap::CntNonZNodes(TUNLoopGraph));
245    EXPECT_EQ(5, TSnap::CntNonZNodes(TNLoopGraph));
246    EXPECT_EQ(5, TSnap::CntNonZNodes(TNELoopGraph));
247    EXPECT_EQ(5, TSnap::CntNonZNodes(TUNReverseTree));
248    EXPECT_EQ(5, TSnap::CntNonZNodes(TNReverseTree));
249    EXPECT_EQ(5, TSnap::CntNonZNodes(TNEReverseTree));
250    EXPECT_EQ(4, TSnap::CntNonZNodes(TUNComplicatedGraph));
251    EXPECT_EQ(4, TSnap::CntNonZNodes(TNComplicatedGraph));
252    EXPECT_EQ(4, TSnap::CntNonZNodes(TNEComplicatedGraph));
253  }
254  TEST_F(GraphTest, CntEdgesToSetTest) {
255    TIntSet NodeKeysV;
256    NodeKeysV.AddKey(0);
257    NodeKeysV.AddKey(1);
258    NodeKeysV.AddKey(2);
259    NodeKeysV.AddKey(3);
260    EXPECT_EQ(2, TSnap::CntEdgesToSet(TUNLoopGraph, 4, NodeKeysV));
261    EXPECT_EQ(2, TSnap::CntEdgesToSet(TNLoopGraph, 4, NodeKeysV));
262    EXPECT_EQ(2, TSnap::CntEdgesToSet(TNELoopGraph, 4, NodeKeysV));
263    EXPECT_EQ(1, TSnap::CntEdgesToSet(TUNReverseTree, 4, NodeKeysV));
264    EXPECT_EQ(1, TSnap::CntEdgesToSet(TNReverseTree, 4, NodeKeysV));
265    EXPECT_EQ(1, TSnap::CntEdgesToSet(TNEReverseTree, 4, NodeKeysV));
266    EXPECT_EQ(2, TSnap::CntEdgesToSet(TUNComplicatedGraph, 4, NodeKeysV));
267    EXPECT_EQ(2, TSnap::CntEdgesToSet(TNComplicatedGraph, 4, NodeKeysV));
268    EXPECT_EQ(2, TSnap::CntEdgesToSet(TNEComplicatedGraph, 4, NodeKeysV));
269  }
270  TEST_F(GraphTest, GetMxDegNIdTest) {
271    TIntSet IncorrectKeysLoopGraph;
272    TIntSet IncorrectKeysReverseTree;
273    TIntSet IncorrectKeysComplicatedGraph;
274    CheckNotInSet(TSnap::GetMxDegNId(TUNLoopGraph), IncorrectKeysLoopGraph);
275    IncorrectKeysLoopGraph.AddKey(1);
276    IncorrectKeysLoopGraph.AddKey(2);
277    IncorrectKeysLoopGraph.AddKey(3);
278    CheckNotInSet(TSnap::GetMxDegNId(TNLoopGraph), IncorrectKeysLoopGraph);
279    CheckNotInSet(TSnap::GetMxDegNId(TNELoopGraph), IncorrectKeysLoopGraph);
280    IncorrectKeysReverseTree.AddKey(3);
281    IncorrectKeysReverseTree.AddKey(4);
282    CheckNotInSet(TSnap::GetMxDegNId(TUNReverseTree), IncorrectKeysReverseTree);
283    CheckNotInSet(TSnap::GetMxDegNId(TNReverseTree), IncorrectKeysReverseTree);
284    CheckNotInSet(TSnap::GetMxDegNId(TNEReverseTree), IncorrectKeysReverseTree);
285    IncorrectKeysComplicatedGraph.AddKey(3);
286    IncorrectKeysComplicatedGraph.AddKey(4);
287    CheckNotInSet(TSnap::GetMxDegNId(TUNComplicatedGraph),
288                  IncorrectKeysComplicatedGraph);
289    CheckNotInSet(TSnap::GetMxDegNId(TNComplicatedGraph),
290                  IncorrectKeysComplicatedGraph);
291    EXPECT_EQ(1, TSnap::GetMxDegNId(TNEComplicatedGraph));
292  }
293  TEST_F(GraphTest, GetMxInDegNIdTest) {
294    TIntSet IncorrectKeysLoopGraph;
295    TIntSet TUNIncorrectKeysReverseTree;
296    TIntSet TNIncorrectKeysReverseTree;
297    TIntSet IncorrectKeysComplicatedGraph;
298    return;
299    CheckNotInSet(TSnap::GetMxInDegNId(TUNLoopGraph), IncorrectKeysLoopGraph);
300    EXPECT_EQ(4, TSnap::GetMxInDegNId(TNLoopGraph));
301    IncorrectKeysLoopGraph.AddKey(1);
302    IncorrectKeysLoopGraph.AddKey(2);
303    IncorrectKeysLoopGraph.AddKey(3);
304    CheckNotInSet(TSnap::GetMxInDegNId(TNELoopGraph), IncorrectKeysLoopGraph);
305    TUNIncorrectKeysReverseTree.AddKey(3);
306    TUNIncorrectKeysReverseTree.AddKey(4);
307    TNIncorrectKeysReverseTree.AddKey(0);
308    CheckNotInSet(TSnap::GetMxInDegNId(TUNReverseTree),
309                  TUNIncorrectKeysReverseTree);
310    CheckNotInSet(TSnap::GetMxInDegNId(TNReverseTree),
311                  TNIncorrectKeysReverseTree);
312    CheckNotInSet(TSnap::GetMxInDegNId(TNEReverseTree),
313                  TNIncorrectKeysReverseTree);
314    IncorrectKeysComplicatedGraph.AddKey(3);
315    IncorrectKeysComplicatedGraph.AddKey(4);
316    CheckNotInSet(TSnap::GetMxInDegNId(TUNComplicatedGraph),
317                  IncorrectKeysComplicatedGraph);
318    IncorrectKeysComplicatedGraph.AddKey(0);
319    CheckNotInSet(TSnap::GetMxInDegNId(TNComplicatedGraph),
320                  IncorrectKeysComplicatedGraph);
321    EXPECT_EQ(4, TSnap::GetMxInDegNId(TNEComplicatedGraph));
322  }
323  TEST_F(GraphTest, GetMxOutDegNIdTest) {
324    TIntSet IncorrectKeysLoopGraph;
325    TIntSet IncorrectKeysReverseTree;
326    TIntSet IncorrectKeysComplicatedGraph;
327    CheckNotInSet(TSnap::GetMxOutDegNId(TUNLoopGraph), IncorrectKeysLoopGraph);
328    EXPECT_EQ(0, TSnap::GetMxOutDegNId(TNLoopGraph));
329    IncorrectKeysLoopGraph.AddKey(1);
330    IncorrectKeysLoopGraph.AddKey(2);
331    IncorrectKeysLoopGraph.AddKey(3);
332    CheckNotInSet(TSnap::GetMxOutDegNId(TNELoopGraph), IncorrectKeysLoopGraph);
333    IncorrectKeysReverseTree.AddKey(3);
334    IncorrectKeysReverseTree.AddKey(4);
335    CheckNotInSet(TSnap::GetMxOutDegNId(TUNReverseTree),
336                  IncorrectKeysReverseTree);
337    EXPECT_EQ(0, TSnap::GetMxOutDegNId(TNReverseTree));
338    EXPECT_EQ(0, TSnap::GetMxOutDegNId(TNEReverseTree));
339    IncorrectKeysComplicatedGraph.AddKey(3);
340    IncorrectKeysComplicatedGraph.AddKey(4);
341    CheckNotInSet(TSnap::GetMxOutDegNId(TUNComplicatedGraph),
342                  IncorrectKeysComplicatedGraph);
343    IncorrectKeysComplicatedGraph.AddKey(2);
344    CheckNotInSet(TSnap::GetMxOutDegNId(TNEComplicatedGraph),
345                  IncorrectKeysComplicatedGraph);
346  }
347  TEST_F(GraphTest, GetInDegCntIntTest) {
348    TIntPrV TUNExpectedLoopGraph;
349    TIntPrV TUNInDegCntLoopGraph;
350    TIntPrV TNExpectedLoopGraph;
351    TIntPrV TNInDegCntLoopGraph;
352    TIntPrV TNEExpectedLoopGraph;
353    TIntPrV TNEInDegCntLoopGraph;
354    TIntPrV TUNExpectedReverseTree;
355    TIntPrV TUNInDegCntReverseTree;
356    TIntPrV TNExpectedReverseTree;
357    TIntPrV TNInDegCntReverseTree;
358    TIntPrV TNEExpectedReverseTree;
359    TIntPrV TNEInDegCntReverseTree;
360    TIntPrV TUNExpectedComplicatedGraph;
361    TIntPrV TUNInDegCntComplicatedGraph;
362    TIntPrV TNExpectedComplicatedGraph;
363    TIntPrV TNInDegCntComplicatedGraph;
364    TIntPrV TNEExpectedComplicatedGraph;
365    TIntPrV TNEInDegCntComplicatedGraph;
366    TUNExpectedLoopGraph.Add(TIntPr(2, 5));
367    TSnap::GetInDegCnt(TUNLoopGraph, TUNInDegCntLoopGraph);
368    CheckVectors(TUNExpectedLoopGraph, TUNInDegCntLoopGraph);
369    TNExpectedLoopGraph.Add(TIntPr(1, 4));
370    TNExpectedLoopGraph.Add(TIntPr(2, 1));
371    TSnap::GetInDegCnt(TNLoopGraph, TNInDegCntLoopGraph);
372    CheckVectors(TNExpectedLoopGraph, TNInDegCntLoopGraph);
373    TNEExpectedLoopGraph.Add(TIntPr(1, 3));
374    TNEExpectedLoopGraph.Add(TIntPr(2, 2));
375    TSnap::GetInDegCnt(TNELoopGraph, TNEInDegCntLoopGraph);
376    CheckVectors(TNEExpectedLoopGraph, TNEInDegCntLoopGraph);
377    TUNExpectedReverseTree.Add(TIntPr(1, 2));
378    TUNExpectedReverseTree.Add(TIntPr(2, 3));
379    TSnap::GetInDegCnt(TUNReverseTree, TUNInDegCntReverseTree);
380    CheckVectors(TUNExpectedReverseTree, TUNInDegCntReverseTree);
381    TNExpectedReverseTree.Add(TIntPr(0, 1));
382    TNExpectedReverseTree.Add(TIntPr(1, 4));
383    TSnap::GetInDegCnt(TNReverseTree, TNInDegCntReverseTree);
384    CheckVectors(TNExpectedReverseTree, TNInDegCntReverseTree);
385    TNEExpectedReverseTree.Add(TIntPr(0, 1));
386    TNEExpectedReverseTree.Add(TIntPr(1, 4));
387    TSnap::GetInDegCnt(TNEReverseTree, TNEInDegCntReverseTree);
388    CheckVectors(TNEExpectedReverseTree, TNEInDegCntReverseTree);
389    TUNExpectedComplicatedGraph.Add(TIntPr(0, 1));
390    TUNExpectedComplicatedGraph.Add(TIntPr(2, 2));
391    TUNExpectedComplicatedGraph.Add(TIntPr(3, 2));
392    TSnap::GetInDegCnt(TUNComplicatedGraph, TUNInDegCntComplicatedGraph);
393    CheckVectors(TUNExpectedComplicatedGraph, TUNInDegCntComplicatedGraph);
394    TNExpectedComplicatedGraph.Add(TIntPr(0, 2));
395    TNExpectedComplicatedGraph.Add(TIntPr(2, 3));
396    TSnap::GetInDegCnt(TNComplicatedGraph, TNInDegCntComplicatedGraph);
397    CheckVectors(TNExpectedComplicatedGraph, TNInDegCntComplicatedGraph);
398    TNEExpectedComplicatedGraph.Add(TIntPr(0, 2));
399    TNEExpectedComplicatedGraph.Add(TIntPr(2, 2));
400    TNEExpectedComplicatedGraph.Add(TIntPr(3, 1));
401    TSnap::GetInDegCnt(TNEComplicatedGraph, TNEInDegCntComplicatedGraph);
402    CheckVectors(TNEExpectedComplicatedGraph, TNEInDegCntComplicatedGraph);
403  }
404  TEST_F(GraphTest, GetInDegCntFltTest) {
405    TFltPrV TUNExpectedLoopGraph;
406    TFltPrV TUNInDegCntLoopGraph;
407    TFltPrV TNExpectedLoopGraph;
408    TFltPrV TNInDegCntLoopGraph;
409    TFltPrV TNEExpectedLoopGraph;
410    TFltPrV TNEInDegCntLoopGraph;
411    TFltPrV TUNExpectedReverseTree;
412    TFltPrV TUNInDegCntReverseTree;
413    TFltPrV TNExpectedReverseTree;
414    TFltPrV TNInDegCntReverseTree;
415    TFltPrV TNEExpectedReverseTree;
416    TFltPrV TNEInDegCntReverseTree;
417    TFltPrV TUNExpectedComplicatedGraph;
418    TFltPrV TUNInDegCntComplicatedGraph;
419    TFltPrV TNExpectedComplicatedGraph;
420    TFltPrV TNInDegCntComplicatedGraph;
421    TFltPrV TNEExpectedComplicatedGraph;
422    TFltPrV TNEInDegCntComplicatedGraph;
423    TUNExpectedLoopGraph.Add(TFltPr(2, 5));
424    TSnap::GetInDegCnt(TUNLoopGraph, TUNInDegCntLoopGraph);
425    CheckVectors(TUNExpectedLoopGraph, TUNInDegCntLoopGraph);
426    TNExpectedLoopGraph.Add(TFltPr(1, 4));
427    TNExpectedLoopGraph.Add(TFltPr(2, 1));
428    TSnap::GetInDegCnt(TNLoopGraph, TNInDegCntLoopGraph);
429    CheckVectors(TNExpectedLoopGraph, TNInDegCntLoopGraph);
430    TNEExpectedLoopGraph.Add(TFltPr(1, 3));
431    TNEExpectedLoopGraph.Add(TFltPr(2, 2));
432    TSnap::GetInDegCnt(TNELoopGraph, TNEInDegCntLoopGraph);
433    CheckVectors(TNEExpectedLoopGraph, TNEInDegCntLoopGraph);
434    TUNExpectedReverseTree.Add(TFltPr(1, 2));
435    TUNExpectedReverseTree.Add(TFltPr(2, 3));
436    TSnap::GetInDegCnt(TUNReverseTree, TUNInDegCntReverseTree);
437    CheckVectors(TUNExpectedReverseTree, TUNInDegCntReverseTree);
438    TNExpectedReverseTree.Add(TFltPr(0, 1));
439    TNExpectedReverseTree.Add(TFltPr(1, 4));
440    TSnap::GetInDegCnt(TNReverseTree, TNInDegCntReverseTree);
441    CheckVectors(TNExpectedReverseTree, TNInDegCntReverseTree);
442    TNEExpectedReverseTree.Add(TFltPr(0, 1));
443    TNEExpectedReverseTree.Add(TFltPr(1, 4));
444    TSnap::GetInDegCnt(TNEReverseTree, TNEInDegCntReverseTree);
445    CheckVectors(TNEExpectedReverseTree, TNEInDegCntReverseTree);
446    TUNExpectedComplicatedGraph.Add(TFltPr(0, 1));
447    TUNExpectedComplicatedGraph.Add(TFltPr(2, 2));
448    TUNExpectedComplicatedGraph.Add(TFltPr(3, 2));
449    TSnap::GetInDegCnt(TUNComplicatedGraph, TUNInDegCntComplicatedGraph);
450    CheckVectors(TUNExpectedComplicatedGraph, TUNInDegCntComplicatedGraph);
451    TNExpectedComplicatedGraph.Add(TFltPr(0, 2));
452    TNExpectedComplicatedGraph.Add(TFltPr(2, 3));
453    TSnap::GetInDegCnt(TNComplicatedGraph, TNInDegCntComplicatedGraph);
454    CheckVectors(TNExpectedComplicatedGraph, TNInDegCntComplicatedGraph);
455    TNEExpectedComplicatedGraph.Add(TFltPr(0, 2));
456    TNEExpectedComplicatedGraph.Add(TFltPr(2, 2));
457    TNEExpectedComplicatedGraph.Add(TFltPr(3, 1));
458    TSnap::GetInDegCnt(TNEComplicatedGraph, TNEInDegCntComplicatedGraph);
459    CheckVectors(TNEExpectedComplicatedGraph, TNEInDegCntComplicatedGraph);
460  }
461  TEST_F(GraphTest, GetOutDegCntIntTest) {
462    TIntPrV TUNExpectedLoopGraph;
463    TIntPrV TUNOutDegCntLoopGraph;
464    TIntPrV TNExpectedLoopGraph;
465    TIntPrV TNOutDegCntLoopGraph;
466    TIntPrV TNEExpectedLoopGraph;
467    TIntPrV TNEOutDegCntLoopGraph;
468    TIntPrV TUNExpectedReverseTree;
469    TIntPrV TUNOutDegCntReverseTree;
470    TIntPrV TNExpectedReverseTree;
471    TIntPrV TNOutDegCntReverseTree;
472    TIntPrV TNEExpectedReverseTree;
473    TIntPrV TNEOutDegCntReverseTree;
474    TIntPrV TUNExpectedComplicatedGraph;
475    TIntPrV TUNOutDegCntComplicatedGraph;
476    TIntPrV TNExpectedComplicatedGraph;
477    TIntPrV TNOutDegCntComplicatedGraph;
478    TIntPrV TNEExpectedComplicatedGraph;
479    TIntPrV TNEOutDegCntComplicatedGraph;
480    TUNExpectedLoopGraph.Add(TIntPr(2, 5));
481    TSnap::GetOutDegCnt(TUNLoopGraph, TUNOutDegCntLoopGraph);
482    CheckVectors(TUNExpectedLoopGraph, TUNOutDegCntLoopGraph);
483    TNExpectedLoopGraph.Add(TIntPr(1, 4));
484    TNExpectedLoopGraph.Add(TIntPr(2, 1));
485    TSnap::GetOutDegCnt(TNLoopGraph, TNOutDegCntLoopGraph);
486    CheckVectors(TNExpectedLoopGraph, TNOutDegCntLoopGraph);
487    TNEExpectedLoopGraph.Add(TIntPr(1, 3));
488    TNEExpectedLoopGraph.Add(TIntPr(2, 2));
489    TSnap::GetOutDegCnt(TNELoopGraph, TNEOutDegCntLoopGraph);
490    CheckVectors(TNEExpectedLoopGraph, TNEOutDegCntLoopGraph);
491    TUNExpectedReverseTree.Add(TIntPr(1, 2));
492    TUNExpectedReverseTree.Add(TIntPr(2, 3));
493    TSnap::GetOutDegCnt(TUNReverseTree, TUNOutDegCntReverseTree);
494    CheckVectors(TUNExpectedReverseTree, TUNOutDegCntReverseTree);
495    TNExpectedReverseTree.Add(TIntPr(0, 2));
496    TNExpectedReverseTree.Add(TIntPr(1, 2));
497    TNExpectedReverseTree.Add(TIntPr(2, 1));
498    TSnap::GetOutDegCnt(TNReverseTree, TNOutDegCntReverseTree);
499    CheckVectors(TNExpectedReverseTree, TNOutDegCntReverseTree);
500    TNEExpectedReverseTree.Add(TIntPr(0, 2));
501    TNEExpectedReverseTree.Add(TIntPr(1, 2));
502    TNEExpectedReverseTree.Add(TIntPr(2, 1));
503    TSnap::GetOutDegCnt(TNEReverseTree, TNEOutDegCntReverseTree);
504    CheckVectors(TNEExpectedReverseTree, TNEOutDegCntReverseTree);
505    TUNExpectedComplicatedGraph.Add(TIntPr(0, 1));
506    TUNExpectedComplicatedGraph.Add(TIntPr(2, 2));
507    TUNExpectedComplicatedGraph.Add(TIntPr(3, 2));
508    TSnap::GetOutDegCnt(TUNComplicatedGraph, TUNOutDegCntComplicatedGraph);
509    CheckVectors(TUNExpectedComplicatedGraph, TUNOutDegCntComplicatedGraph);
510    TNExpectedComplicatedGraph.Add(TIntPr(0, 2));
511    TNExpectedComplicatedGraph.Add(TIntPr(2, 3));
512    TSnap::GetOutDegCnt(TNComplicatedGraph, TNOutDegCntComplicatedGraph);
513    CheckVectors(TNExpectedComplicatedGraph, TNOutDegCntComplicatedGraph);
514    TNEExpectedComplicatedGraph.Add(TIntPr(0, 2));
515    TNEExpectedComplicatedGraph.Add(TIntPr(2, 2));
516    TNEExpectedComplicatedGraph.Add(TIntPr(3, 1));
517    TSnap::GetOutDegCnt(TNEComplicatedGraph, TNEOutDegCntComplicatedGraph);
518    CheckVectors(TNEExpectedComplicatedGraph, TNEOutDegCntComplicatedGraph);
519  }
520  TEST_F(GraphTest, GetOutDegCntFltTest) {
521    TFltPrV TUNExpectedLoopGraph;
522    TFltPrV TUNOutDegCntLoopGraph;
523    TFltPrV TNExpectedLoopGraph;
524    TFltPrV TNOutDegCntLoopGraph;
525    TFltPrV TNEExpectedLoopGraph;
526    TFltPrV TNEOutDegCntLoopGraph;
527    TFltPrV TUNExpectedReverseTree;
528    TFltPrV TUNOutDegCntReverseTree;
529    TFltPrV TNExpectedReverseTree;
530    TFltPrV TNOutDegCntReverseTree;
531    TFltPrV TNEExpectedReverseTree;
532    TFltPrV TNEOutDegCntReverseTree;
533    TFltPrV TUNExpectedComplicatedGraph;
534    TFltPrV TUNOutDegCntComplicatedGraph;
535    TFltPrV TNExpectedComplicatedGraph;
536    TFltPrV TNOutDegCntComplicatedGraph;
537    TFltPrV TNEExpectedComplicatedGraph;
538    TFltPrV TNEOutDegCntComplicatedGraph;
539    TUNExpectedLoopGraph.Add(TFltPr(2, 5));
540    TSnap::GetOutDegCnt(TUNLoopGraph, TUNOutDegCntLoopGraph);
541    CheckVectors(TUNExpectedLoopGraph, TUNOutDegCntLoopGraph);
542    TNExpectedLoopGraph.Add(TFltPr(1, 4));
543    TNExpectedLoopGraph.Add(TFltPr(2, 1));
544    TSnap::GetOutDegCnt(TNLoopGraph, TNOutDegCntLoopGraph);
545    CheckVectors(TNExpectedLoopGraph, TNOutDegCntLoopGraph);
546    TNEExpectedLoopGraph.Add(TFltPr(1, 3));
547    TNEExpectedLoopGraph.Add(TFltPr(2, 2));
548    TSnap::GetOutDegCnt(TNELoopGraph, TNEOutDegCntLoopGraph);
549    CheckVectors(TNEExpectedLoopGraph, TNEOutDegCntLoopGraph);
550    TUNExpectedReverseTree.Add(TFltPr(1, 2));
551    TUNExpectedReverseTree.Add(TFltPr(2, 3));
552    TSnap::GetOutDegCnt(TUNReverseTree, TUNOutDegCntReverseTree);
553    CheckVectors(TUNExpectedReverseTree, TUNOutDegCntReverseTree);
554    TNExpectedReverseTree.Add(TFltPr(0, 2));
555    TNExpectedReverseTree.Add(TFltPr(1, 2));
556    TNExpectedReverseTree.Add(TFltPr(2, 1));
557    TSnap::GetOutDegCnt(TNReverseTree, TNOutDegCntReverseTree);
558    CheckVectors(TNExpectedReverseTree, TNOutDegCntReverseTree);
559    TNEExpectedReverseTree.Add(TFltPr(0, 2));
560    TNEExpectedReverseTree.Add(TFltPr(1, 2));
561    TNEExpectedReverseTree.Add(TFltPr(2, 1));
562    TSnap::GetOutDegCnt(TNEReverseTree, TNEOutDegCntReverseTree);
563    CheckVectors(TNEExpectedReverseTree, TNEOutDegCntReverseTree);
564    TUNExpectedComplicatedGraph.Add(TFltPr(0, 1));
565    TUNExpectedComplicatedGraph.Add(TFltPr(2, 2));
566    TUNExpectedComplicatedGraph.Add(TFltPr(3, 2));
567    TSnap::GetOutDegCnt(TUNComplicatedGraph, TUNOutDegCntComplicatedGraph);
568    CheckVectors(TUNExpectedComplicatedGraph, TUNOutDegCntComplicatedGraph);
569    TNExpectedComplicatedGraph.Add(TFltPr(0, 2));
570    TNExpectedComplicatedGraph.Add(TFltPr(2, 3));
571    TSnap::GetOutDegCnt(TNComplicatedGraph, TNOutDegCntComplicatedGraph);
572    CheckVectors(TNExpectedComplicatedGraph, TNOutDegCntComplicatedGraph);
573    TNEExpectedComplicatedGraph.Add(TFltPr(0, 2));
574    TNEExpectedComplicatedGraph.Add(TFltPr(2, 2));
575    TNEExpectedComplicatedGraph.Add(TFltPr(3, 1));
576    TSnap::GetOutDegCnt(TNEComplicatedGraph, TNEOutDegCntComplicatedGraph);
577    CheckVectors(TNEExpectedComplicatedGraph, TNEOutDegCntComplicatedGraph);
578  }
579  TEST_F(GraphTest, GetDegCntIntTest) {
580    TIntPrV TUNExpectedLoopGraph;
581    TIntPrV TUNDegCntLoopGraph;
582    TIntPrV TNExpectedLoopGraph;
583    TIntPrV TNDegCntLoopGraph;
584    TIntPrV TNEExpectedLoopGraph;
585    TIntPrV TNEDegCntLoopGraph;
586    TIntPrV TUNExpectedReverseTree;
587    TIntPrV TUNDegCntReverseTree;
588    TIntPrV TNExpectedReverseTree;
589    TIntPrV TNDegCntReverseTree;
590    TIntPrV TNEExpectedReverseTree;
591    TIntPrV TNEDegCntReverseTree;
592    TIntPrV TUNExpectedComplicatedGraph;
593    TIntPrV TUNDegCntComplicatedGraph;
594    TIntPrV TNExpectedComplicatedGraph;
595    TIntPrV TNDegCntComplicatedGraph;
596    TIntPrV TNEExpectedComplicatedGraph;
597    TIntPrV TNEDegCntComplicatedGraph;
598    TUNExpectedLoopGraph.Add(TIntPr(2, 5));
599    TSnap::GetDegCnt(TUNLoopGraph, TUNDegCntLoopGraph);
600    CheckVectors(TUNExpectedLoopGraph, TUNDegCntLoopGraph);
601    TNExpectedLoopGraph.Add(TIntPr(2, 3));
602    TNExpectedLoopGraph.Add(TIntPr(3, 2));
603    TSnap::GetDegCnt(TNLoopGraph, TNDegCntLoopGraph);
604    CheckVectors(TNExpectedLoopGraph, TNDegCntLoopGraph);
605    TNEExpectedLoopGraph.Add(TIntPr(2, 3));
606    TNEExpectedLoopGraph.Add(TIntPr(4, 2));
607    TSnap::GetDegCnt(TNELoopGraph, TNEDegCntLoopGraph);
608    CheckVectors(TNEExpectedLoopGraph, TNEDegCntLoopGraph);
609    TUNExpectedReverseTree.Add(TIntPr(1, 2));
610    TUNExpectedReverseTree.Add(TIntPr(2, 3));
611    TSnap::GetDegCnt(TUNReverseTree, TUNDegCntReverseTree);
612    CheckVectors(TUNExpectedReverseTree, TUNDegCntReverseTree);
613    TNExpectedReverseTree.Add(TIntPr(1, 2));
614    TNExpectedReverseTree.Add(TIntPr(2, 3));
615    TSnap::GetDegCnt(TNReverseTree, TNDegCntReverseTree);
616    CheckVectors(TNExpectedReverseTree, TNDegCntReverseTree);
617    TNEExpectedReverseTree.Add(TIntPr(1, 2));
618    TNEExpectedReverseTree.Add(TIntPr(2, 3));
619    TSnap::GetDegCnt(TNEReverseTree, TNEDegCntReverseTree);
620    CheckVectors(TNEExpectedReverseTree, TNEDegCntReverseTree);
621    TUNExpectedComplicatedGraph.Add(TIntPr(0, 1));
622    TUNExpectedComplicatedGraph.Add(TIntPr(2, 2));
623    TUNExpectedComplicatedGraph.Add(TIntPr(3, 2));
624    TSnap::GetDegCnt(TUNComplicatedGraph, TUNDegCntComplicatedGraph);
625    CheckVectors(TUNExpectedComplicatedGraph, TUNDegCntComplicatedGraph);
626    TNExpectedComplicatedGraph.Add(TIntPr(0, 1));
627    TNExpectedComplicatedGraph.Add(TIntPr(2, 2));
628    TNExpectedComplicatedGraph.Add(TIntPr(4, 2));
629    TSnap::GetDegCnt(TNComplicatedGraph, TNDegCntComplicatedGraph);
630    CheckVectors(TNExpectedComplicatedGraph, TNDegCntComplicatedGraph);
631    TNEExpectedComplicatedGraph.Add(TIntPr(0, 1));
632    TNEExpectedComplicatedGraph.Add(TIntPr(2, 1));
633    TNEExpectedComplicatedGraph.Add(TIntPr(3, 1));
634    TNEExpectedComplicatedGraph.Add(TIntPr(4, 1));
635    TNEExpectedComplicatedGraph.Add(TIntPr(5, 1));
636    TSnap::GetDegCnt(TNEComplicatedGraph, TNEDegCntComplicatedGraph);
637    CheckVectors(TNEExpectedComplicatedGraph, TNEDegCntComplicatedGraph);
638  }
639  TEST_F(GraphTest, GetDegCntFltTest) {
640    TFltPrV TUNExpectedLoopGraph;
641    TFltPrV TUNDegCntLoopGraph;
642    TFltPrV TNExpectedLoopGraph;
643    TFltPrV TNDegCntLoopGraph;
644    TFltPrV TNEExpectedLoopGraph;
645    TFltPrV TNEDegCntLoopGraph;
646    TFltPrV TUNExpectedReverseTree;
647    TFltPrV TUNDegCntReverseTree;
648    TFltPrV TNExpectedReverseTree;
649    TFltPrV TNDegCntReverseTree;
650    TFltPrV TNEExpectedReverseTree;
651    TFltPrV TNEDegCntReverseTree;
652    TFltPrV TUNExpectedComplicatedGraph;
653    TFltPrV TUNDegCntComplicatedGraph;
654    TFltPrV TNExpectedComplicatedGraph;
655    TFltPrV TNDegCntComplicatedGraph;
656    TFltPrV TNEExpectedComplicatedGraph;
657    TFltPrV TNEDegCntComplicatedGraph;
658    TUNExpectedLoopGraph.Add(TFltPr(2, 5));
659    TSnap::GetDegCnt(TUNLoopGraph, TUNDegCntLoopGraph);
660    CheckVectors(TUNExpectedLoopGraph, TUNDegCntLoopGraph);
661    TNExpectedLoopGraph.Add(TFltPr(2, 3));
662    TNExpectedLoopGraph.Add(TFltPr(3, 2));
663    TSnap::GetDegCnt(TNLoopGraph, TNDegCntLoopGraph);
664    CheckVectors(TNExpectedLoopGraph, TNDegCntLoopGraph);
665    TNEExpectedLoopGraph.Add(TFltPr(2, 3));
666    TNEExpectedLoopGraph.Add(TFltPr(4, 2));
667    TSnap::GetDegCnt(TNELoopGraph, TNEDegCntLoopGraph);
668    CheckVectors(TNEExpectedLoopGraph, TNEDegCntLoopGraph);
669    TUNExpectedReverseTree.Add(TFltPr(1, 2));
670    TUNExpectedReverseTree.Add(TFltPr(2, 3));
671    TSnap::GetDegCnt(TUNReverseTree, TUNDegCntReverseTree);
672    CheckVectors(TUNExpectedReverseTree, TUNDegCntReverseTree);
673    TNExpectedReverseTree.Add(TFltPr(1, 2));
674    TNExpectedReverseTree.Add(TFltPr(2, 3));
675    TSnap::GetDegCnt(TNReverseTree, TNDegCntReverseTree);
676    CheckVectors(TNExpectedReverseTree, TNDegCntReverseTree);
677    TNEExpectedReverseTree.Add(TFltPr(1, 2));
678    TNEExpectedReverseTree.Add(TFltPr(2, 3));
679    TSnap::GetDegCnt(TNEReverseTree, TNEDegCntReverseTree);
680    CheckVectors(TNEExpectedReverseTree, TNEDegCntReverseTree);
681    TUNExpectedComplicatedGraph.Add(TFltPr(0, 1));
682    TUNExpectedComplicatedGraph.Add(TFltPr(2, 2));
683    TUNExpectedComplicatedGraph.Add(TFltPr(3, 2));
684    TSnap::GetDegCnt(TUNComplicatedGraph, TUNDegCntComplicatedGraph);
685    CheckVectors(TUNExpectedComplicatedGraph, TUNDegCntComplicatedGraph);
686    TNExpectedComplicatedGraph.Add(TFltPr(0, 1));
687    TNExpectedComplicatedGraph.Add(TFltPr(2, 2));
688    TNExpectedComplicatedGraph.Add(TFltPr(4, 2));
689    TSnap::GetDegCnt(TNComplicatedGraph, TNDegCntComplicatedGraph);
690    CheckVectors(TNExpectedComplicatedGraph, TNDegCntComplicatedGraph);
691    TNEExpectedComplicatedGraph.Add(TFltPr(0, 1));
692    TNEExpectedComplicatedGraph.Add(TFltPr(2, 1));
693    TNEExpectedComplicatedGraph.Add(TFltPr(3, 1));
694    TNEExpectedComplicatedGraph.Add(TFltPr(4, 1));
695    TNEExpectedComplicatedGraph.Add(TFltPr(5, 1));
696    TSnap::GetDegCnt(TNEComplicatedGraph, TNEDegCntComplicatedGraph);
697    CheckVectors(TNEExpectedComplicatedGraph, TNEDegCntComplicatedGraph);
698  }
699  TEST_F(GraphTest, GetDegSeqVTest) {
700    TIntV TUNExpectedLoopGraph;
701    TIntV TUNDegVLoopGraph;
702    TIntV TNExpectedLoopGraph;
703    TIntV TNDegVLoopGraph;
704    TIntV TNEExpectedLoopGraph;
705    TIntV TNEDegVLoopGraph;
706    TIntV TUNExpectedReverseTree;
707    TIntV TUNDegVReverseTree;
708    TIntV TNExpectedReverseTree;
709    TIntV TNDegVReverseTree;
710    TIntV TNEExpectedReverseTree;
711    TIntV TNEDegVReverseTree;
712    TIntV TUNExpectedComplicatedGraph;
713    TIntV TUNDegVComplicatedGraph;
714    TIntV TNExpectedComplicatedGraph;
715    TIntV TNDegVComplicatedGraph;
716    TIntV TNEExpectedComplicatedGraph;
717    TIntV TNEDegVComplicatedGraph;
718    TUNExpectedLoopGraph.Add(2);
719    TUNExpectedLoopGraph.Add(2);
720    TUNExpectedLoopGraph.Add(2);
721    TUNExpectedLoopGraph.Add(2);
722    TUNExpectedLoopGraph.Add(2);
723    TSnap::GetDegSeqV(TUNLoopGraph, TUNDegVLoopGraph);
724    CheckVectors(TUNExpectedLoopGraph, TUNDegVLoopGraph);
725    TNExpectedLoopGraph.Add(3);
726    TNExpectedLoopGraph.Add(2);
727    TNExpectedLoopGraph.Add(2);
728    TNExpectedLoopGraph.Add(2);
729    TNExpectedLoopGraph.Add(3);
730    TSnap::GetDegSeqV(TNLoopGraph, TNDegVLoopGraph);
731    CheckVectors(TNExpectedLoopGraph, TNDegVLoopGraph);
732    TNEExpectedLoopGraph.Add(4);
733    TNEExpectedLoopGraph.Add(2);
734    TNEExpectedLoopGraph.Add(2);
735    TNEExpectedLoopGraph.Add(2);
736    TNEExpectedLoopGraph.Add(4);
737    TSnap::GetDegSeqV(TNELoopGraph, TNEDegVLoopGraph);
738    CheckVectors(TNEExpectedLoopGraph, TNEDegVLoopGraph);
739    TUNExpectedReverseTree.Add(2);
740    TUNExpectedReverseTree.Add(2);
741    TUNExpectedReverseTree.Add(2);
742    TUNExpectedReverseTree.Add(1);
743    TUNExpectedReverseTree.Add(1);
744    TSnap::GetDegSeqV(TUNReverseTree, TUNDegVReverseTree);
745    CheckVectors(TUNExpectedReverseTree, TUNDegVReverseTree);
746    TNExpectedReverseTree.Add(2);
747    TNExpectedReverseTree.Add(2);
748    TNExpectedReverseTree.Add(2);
749    TNExpectedReverseTree.Add(1);
750    TNExpectedReverseTree.Add(1);
751    TSnap::GetDegSeqV(TNReverseTree, TNDegVReverseTree);
752    CheckVectors(TNExpectedReverseTree, TNDegVReverseTree);
753    TNEExpectedReverseTree.Add(2);
754    TNEExpectedReverseTree.Add(2);
755    TNEExpectedReverseTree.Add(2);
756    TNEExpectedReverseTree.Add(1);
757    TNEExpectedReverseTree.Add(1);
758    TSnap::GetDegSeqV(TNEReverseTree, TNEDegVReverseTree);
759    CheckVectors(TNEExpectedReverseTree, TNEDegVReverseTree);
760    TUNExpectedComplicatedGraph.Add(2);
761    TUNExpectedComplicatedGraph.Add(3);
762    TUNExpectedComplicatedGraph.Add(3);
763    TUNExpectedComplicatedGraph.Add(0);
764    TUNExpectedComplicatedGraph.Add(2);
765    TSnap::GetDegSeqV(TUNComplicatedGraph, TUNDegVComplicatedGraph);
766    CheckVectors(TUNExpectedComplicatedGraph, TUNDegVComplicatedGraph);
767    TNExpectedComplicatedGraph.Add(2);
768    TNExpectedComplicatedGraph.Add(4);
769    TNExpectedComplicatedGraph.Add(4);
770    TNExpectedComplicatedGraph.Add(0);
771    TNExpectedComplicatedGraph.Add(2);
772    TSnap::GetDegSeqV(TNComplicatedGraph, TNDegVComplicatedGraph);
773    CheckVectors(TNExpectedComplicatedGraph, TNDegVComplicatedGraph);
774    TNEExpectedComplicatedGraph.Add(2);
775    TNEExpectedComplicatedGraph.Add(5);
776    TNEExpectedComplicatedGraph.Add(4);
777    TNEExpectedComplicatedGraph.Add(0);
778    TNEExpectedComplicatedGraph.Add(3);
779    TSnap::GetDegSeqV(TNEComplicatedGraph, TNEDegVComplicatedGraph);
780    CheckVectors(TNEExpectedComplicatedGraph, TNEDegVComplicatedGraph);
781  }
782  TEST_F(GraphTest, GetDegSeqVInOutDegVTest) {
783    TIntV TUNExpectedInDegVLoopGraph;
784    TIntV TUNExpectedOutDegVLoopGraph;
785    TIntV TUNInDegVLoopGraph;
786    TIntV TUNOutDegVLoopGraph;
787    TIntV TNExpectedInDegVLoopGraph;
788    TIntV TNExpectedOutDegVLoopGraph;
789    TIntV TNInDegVLoopGraph;
790    TIntV TNOutDegVLoopGraph;
791    TIntV TNEExpectedInDegVLoopGraph;
792    TIntV TNEExpectedOutDegVLoopGraph;
793    TIntV TNEInDegVLoopGraph;
794    TIntV TNEOutDegVLoopGraph;
795    TIntV TUNExpectedInDegVReverseTree;
796    TIntV TUNExpectedOutDegVReverseTree;
797    TIntV TUNInDegVReverseTree;
798    TIntV TUNOutDegVReverseTree;
799    TIntV TNExpectedInDegVReverseTree;
800    TIntV TNExpectedOutDegVReverseTree;
801    TIntV TNInDegVReverseTree;
802    TIntV TNOutDegVReverseTree;
803    TIntV TNEExpectedInDegVReverseTree;
804    TIntV TNEExpectedOutDegVReverseTree;
805    TIntV TNEInDegVReverseTree;
806    TIntV TNEOutDegVReverseTree;
807    TIntV TUNExpectedInDegVComplicatedGraph;
808    TIntV TUNExpectedOutDegVComplicatedGraph;
809    TIntV TUNInDegVComplicatedGraph;
810    TIntV TUNOutDegVComplicatedGraph;
811    TIntV TNExpectedInDegVComplicatedGraph;
812    TIntV TNExpectedOutDegVComplicatedGraph;
813    TIntV TNInDegVComplicatedGraph;
814    TIntV TNOutDegVComplicatedGraph;
815    TIntV TNEExpectedInDegVComplicatedGraph;
816    TIntV TNEExpectedOutDegVComplicatedGraph;
817    TIntV TNEInDegVComplicatedGraph;
818    TIntV TNEOutDegVComplicatedGraph;
819    TUNExpectedInDegVLoopGraph.Add(2);
820    TUNExpectedInDegVLoopGraph.Add(2);
821    TUNExpectedInDegVLoopGraph.Add(2);
822    TUNExpectedInDegVLoopGraph.Add(2);
823    TUNExpectedInDegVLoopGraph.Add(2);
824    TUNExpectedOutDegVLoopGraph.Add(2);
825    TUNExpectedOutDegVLoopGraph.Add(2);
826    TUNExpectedOutDegVLoopGraph.Add(2);
827    TUNExpectedOutDegVLoopGraph.Add(2);
828    TUNExpectedOutDegVLoopGraph.Add(2);
829    TSnap::GetDegSeqV(TUNLoopGraph, TUNInDegVLoopGraph, TUNOutDegVLoopGraph);
830    CheckVectors(TUNExpectedInDegVLoopGraph, TUNInDegVLoopGraph);
831    CheckVectors(TUNExpectedOutDegVLoopGraph, TUNOutDegVLoopGraph);
832    TNExpectedInDegVLoopGraph.Add(1);
833    TNExpectedInDegVLoopGraph.Add(1);
834    TNExpectedInDegVLoopGraph.Add(1);
835    TNExpectedInDegVLoopGraph.Add(1);
836    TNExpectedInDegVLoopGraph.Add(2);
837    TNExpectedOutDegVLoopGraph.Add(2);
838    TNExpectedOutDegVLoopGraph.Add(1);
839    TNExpectedOutDegVLoopGraph.Add(1);
840    TNExpectedOutDegVLoopGraph.Add(1);
841    TNExpectedOutDegVLoopGraph.Add(1);
842    TSnap::GetDegSeqV(TNLoopGraph, TNInDegVLoopGraph, TNOutDegVLoopGraph);
843    CheckVectors(TNExpectedInDegVLoopGraph, TNInDegVLoopGraph);
844    CheckVectors(TNExpectedOutDegVLoopGraph, TNOutDegVLoopGraph);
845    TNEExpectedInDegVLoopGraph.Add(2);
846    TNEExpectedInDegVLoopGraph.Add(1);
847    TNEExpectedInDegVLoopGraph.Add(1);
848    TNEExpectedInDegVLoopGraph.Add(1);
849    TNEExpectedInDegVLoopGraph.Add(2);
850    TNEExpectedOutDegVLoopGraph.Add(2);
851    TNEExpectedOutDegVLoopGraph.Add(1);
852    TNEExpectedOutDegVLoopGraph.Add(1);
853    TNEExpectedOutDegVLoopGraph.Add(1);
854    TNEExpectedOutDegVLoopGraph.Add(2);
855    TSnap::GetDegSeqV(TNELoopGraph, TNEInDegVLoopGraph, TNEOutDegVLoopGraph);
856    CheckVectors(TNEExpectedInDegVLoopGraph, TNEInDegVLoopGraph);
857    CheckVectors(TNEExpectedOutDegVLoopGraph, TNEOutDegVLoopGraph);
858    TUNExpectedInDegVReverseTree.Add(2);
859    TUNExpectedInDegVReverseTree.Add(2);
860    TUNExpectedInDegVReverseTree.Add(2);
861    TUNExpectedInDegVReverseTree.Add(1);
862    TUNExpectedInDegVReverseTree.Add(1);
863    TUNExpectedOutDegVReverseTree.Add(2);
864    TUNExpectedOutDegVReverseTree.Add(2);
865    TUNExpectedOutDegVReverseTree.Add(2);
866    TUNExpectedOutDegVReverseTree.Add(1);
867    TUNExpectedOutDegVReverseTree.Add(1);
868    TSnap::GetDegSeqV(
869        TUNReverseTree,
870        TUNInDegVReverseTree,
871        TUNOutDegVReverseTree);
872    CheckVectors(TUNExpectedInDegVReverseTree, TUNInDegVReverseTree);
873    CheckVectors(TUNExpectedOutDegVReverseTree, TUNOutDegVReverseTree);
874    TNExpectedInDegVReverseTree.Add(0);
875    TNExpectedInDegVReverseTree.Add(1);
876    TNExpectedInDegVReverseTree.Add(1);
877    TNExpectedInDegVReverseTree.Add(1);
878    TNExpectedInDegVReverseTree.Add(1);
879    TNExpectedOutDegVReverseTree.Add(2);
880    TNExpectedOutDegVReverseTree.Add(1);
881    TNExpectedOutDegVReverseTree.Add(1);
882    TNExpectedOutDegVReverseTree.Add(0);
883    TNExpectedOutDegVReverseTree.Add(0);
884    TSnap::GetDegSeqV(TNReverseTree, TNInDegVReverseTree, TNOutDegVReverseTree);
885    CheckVectors(TNExpectedInDegVReverseTree, TNInDegVReverseTree);
886    CheckVectors(TNExpectedOutDegVReverseTree, TNOutDegVReverseTree);
887    TNEExpectedInDegVReverseTree.Add(0);
888    TNEExpectedInDegVReverseTree.Add(1);
889    TNEExpectedInDegVReverseTree.Add(1);
890    TNEExpectedInDegVReverseTree.Add(1);
891    TNEExpectedInDegVReverseTree.Add(1);
892    TNEExpectedOutDegVReverseTree.Add(2);
893    TNEExpectedOutDegVReverseTree.Add(1);
894    TNEExpectedOutDegVReverseTree.Add(1);
895    TNEExpectedOutDegVReverseTree.Add(0);
896    TNEExpectedOutDegVReverseTree.Add(0);
897    TSnap::GetDegSeqV(
898        TNEReverseTree,
899        TNEInDegVReverseTree,
900        TNEOutDegVReverseTree);
901    CheckVectors(TNEExpectedInDegVReverseTree, TNEInDegVReverseTree);
902    CheckVectors(TNEExpectedOutDegVReverseTree, TNEOutDegVReverseTree);
903    TUNExpectedInDegVComplicatedGraph.Add(2);
904    TUNExpectedInDegVComplicatedGraph.Add(3);
905    TUNExpectedInDegVComplicatedGraph.Add(3);
906    TUNExpectedInDegVComplicatedGraph.Add(0);
907    TUNExpectedInDegVComplicatedGraph.Add(2);
908    TUNExpectedOutDegVComplicatedGraph.Add(2);
909    TUNExpectedOutDegVComplicatedGraph.Add(3);
910    TUNExpectedOutDegVComplicatedGraph.Add(3);
911    TUNExpectedOutDegVComplicatedGraph.Add(0);
912    TUNExpectedOutDegVComplicatedGraph.Add(2);
913    TSnap::GetDegSeqV(
914        TUNComplicatedGraph,
915        TUNInDegVComplicatedGraph,
916        TUNOutDegVComplicatedGraph);
917    CheckVectors(TUNExpectedInDegVComplicatedGraph, TUNInDegVComplicatedGraph);
918    CheckVectors(TUNExpectedOutDegVComplicatedGraph, TUNOutDegVComplicatedGraph);
919    TNExpectedInDegVComplicatedGraph.Add(0);
920    TNExpectedInDegVComplicatedGraph.Add(2);
921    TNExpectedInDegVComplicatedGraph.Add(2);
922    TNExpectedInDegVComplicatedGraph.Add(0);
923    TNExpectedInDegVComplicatedGraph.Add(2);
924    TNExpectedOutDegVComplicatedGraph.Add(2);
925    TNExpectedOutDegVComplicatedGraph.Add(2);
926    TNExpectedOutDegVComplicatedGraph.Add(2);
927    TNExpectedOutDegVComplicatedGraph.Add(0);
928    TNExpectedOutDegVComplicatedGraph.Add(0);
929    TSnap::GetDegSeqV(
930        TNComplicatedGraph,
931        TNInDegVComplicatedGraph,
932        TNOutDegVComplicatedGraph);
933    CheckVectors(TNExpectedInDegVComplicatedGraph, TNInDegVComplicatedGraph);
934    CheckVectors(TNExpectedOutDegVComplicatedGraph, TNOutDegVComplicatedGraph);
935    TNEExpectedInDegVComplicatedGraph.Add(0);
936    TNEExpectedInDegVComplicatedGraph.Add(2);
937    TNEExpectedInDegVComplicatedGraph.Add(2);
938    TNEExpectedInDegVComplicatedGraph.Add(0);
939    TNEExpectedInDegVComplicatedGraph.Add(3);
940    TNEExpectedOutDegVComplicatedGraph.Add(2);
941    TNEExpectedOutDegVComplicatedGraph.Add(3);
942    TNEExpectedOutDegVComplicatedGraph.Add(2);
943    TNEExpectedOutDegVComplicatedGraph.Add(0);
944    TNEExpectedOutDegVComplicatedGraph.Add(0);
945    TSnap::GetDegSeqV(
946        TNEComplicatedGraph,
947        TNEInDegVComplicatedGraph,
948        TNEOutDegVComplicatedGraph);
949    CheckVectors(TNEExpectedInDegVComplicatedGraph, TNEInDegVComplicatedGraph);
950    CheckVectors(TNEExpectedOutDegVComplicatedGraph, TNEOutDegVComplicatedGraph);
951  }
952  TEST_F(GraphTest, GetNodeInDegVTest) {
953    TIntPrV TUNExpectedInDegVLoopGraph;
954    TIntPrV TUNInDegVLoopGraph;
955    TIntPrV TNExpectedInDegVLoopGraph;
956    TIntPrV TNInDegVLoopGraph;
957    TIntPrV TNEExpectedInDegVLoopGraph;
958    TIntPrV TNEInDegVLoopGraph;
959    TIntPrV TUNExpectedInDegVReverseTree;
960    TIntPrV TUNInDegVReverseTree;
961    TIntPrV TNExpectedInDegVReverseTree;
962    TIntPrV TNInDegVReverseTree;
963    TIntPrV TNEExpectedInDegVReverseTree;
964    TIntPrV TNEInDegVReverseTree;
965    TIntPrV TUNExpectedInDegVComplicatedGraph;
966    TIntPrV TUNInDegVComplicatedGraph;
967    TIntPrV TNExpectedInDegVComplicatedGraph;
968    TIntPrV TNInDegVComplicatedGraph;
969    TIntPrV TNEExpectedInDegVComplicatedGraph;
970    TIntPrV TNEInDegVComplicatedGraph;
971    TUNExpectedInDegVLoopGraph.Add(TIntPr(0, 2));
972    TUNExpectedInDegVLoopGraph.Add(TIntPr(1, 2));
973    TUNExpectedInDegVLoopGraph.Add(TIntPr(2, 2));
974    TUNExpectedInDegVLoopGraph.Add(TIntPr(3, 2));
975    TUNExpectedInDegVLoopGraph.Add(TIntPr(4, 2));
976    TSnap::GetNodeInDegV(TUNLoopGraph, TUNInDegVLoopGraph);
977    CheckVectors(TUNExpectedInDegVLoopGraph, TUNInDegVLoopGraph);
978    TNExpectedInDegVLoopGraph.Add(TIntPr(0, 1));
979    TNExpectedInDegVLoopGraph.Add(TIntPr(1, 1));
980    TNExpectedInDegVLoopGraph.Add(TIntPr(2, 1));
981    TNExpectedInDegVLoopGraph.Add(TIntPr(3, 1));
982    TNExpectedInDegVLoopGraph.Add(TIntPr(4, 2));
983    TSnap::GetNodeInDegV(TNLoopGraph, TNInDegVLoopGraph);
984    CheckVectors(TNExpectedInDegVLoopGraph, TNInDegVLoopGraph);
985    TNEExpectedInDegVLoopGraph.Add(TIntPr(0, 2));
986    TNEExpectedInDegVLoopGraph.Add(TIntPr(1, 1));
987    TNEExpectedInDegVLoopGraph.Add(TIntPr(2, 1));
988    TNEExpectedInDegVLoopGraph.Add(TIntPr(3, 1));
989    TNEExpectedInDegVLoopGraph.Add(TIntPr(4, 2));
990    TSnap::GetNodeInDegV(TNELoopGraph, TNEInDegVLoopGraph);
991    CheckVectors(TNEExpectedInDegVLoopGraph, TNEInDegVLoopGraph);
992    TUNExpectedInDegVReverseTree.Add(TIntPr(0, 2));
993    TUNExpectedInDegVReverseTree.Add(TIntPr(1, 2));
994    TUNExpectedInDegVReverseTree.Add(TIntPr(2, 2));
995    TUNExpectedInDegVReverseTree.Add(TIntPr(3, 1));
996    TUNExpectedInDegVReverseTree.Add(TIntPr(4, 1));
997    TSnap::GetNodeInDegV(TUNReverseTree, TUNInDegVReverseTree);
998    CheckVectors(TUNExpectedInDegVReverseTree, TUNInDegVReverseTree);
999    TNExpectedInDegVReverseTree.Add(TIntPr(0, 0));
1000    TNExpectedInDegVReverseTree.Add(TIntPr(1, 1));
1001    TNExpectedInDegVReverseTree.Add(TIntPr(2, 1));
1002    TNExpectedInDegVReverseTree.Add(TIntPr(3, 1));
1003    TNExpectedInDegVReverseTree.Add(TIntPr(4, 1));
1004    TSnap::GetNodeInDegV(TNReverseTree, TNInDegVReverseTree);
1005    CheckVectors(TNExpectedInDegVReverseTree, TNInDegVReverseTree);
1006    TNEExpectedInDegVReverseTree.Add(TIntPr(0, 0));
1007    TNEExpectedInDegVReverseTree.Add(TIntPr(1, 1));
1008    TNEExpectedInDegVReverseTree.Add(TIntPr(2, 1));
1009    TNEExpectedInDegVReverseTree.Add(TIntPr(3, 1));
1010    TNEExpectedInDegVReverseTree.Add(TIntPr(4, 1));
1011    TSnap::GetNodeInDegV(TNEReverseTree, TNEInDegVReverseTree);
1012    CheckVectors(TNEExpectedInDegVReverseTree, TNEInDegVReverseTree);
1013    TUNExpectedInDegVComplicatedGraph.Add(TIntPr(0, 2));
1014    TUNExpectedInDegVComplicatedGraph.Add(TIntPr(1, 3));
1015    TUNExpectedInDegVComplicatedGraph.Add(TIntPr(2, 3));
1016    TUNExpectedInDegVComplicatedGraph.Add(TIntPr(3, 0));
1017    TUNExpectedInDegVComplicatedGraph.Add(TIntPr(4, 2));
1018    TSnap::GetNodeInDegV(TUNComplicatedGraph, TUNInDegVComplicatedGraph);
1019    CheckVectors(TUNExpectedInDegVComplicatedGraph, TUNInDegVComplicatedGraph);
1020    TNExpectedInDegVComplicatedGraph.Add(TIntPr(0, 0));
1021    TNExpectedInDegVComplicatedGraph.Add(TIntPr(1, 2));
1022    TNExpectedInDegVComplicatedGraph.Add(TIntPr(2, 2));
1023    TNExpectedInDegVComplicatedGraph.Add(TIntPr(3, 0));
1024    TNExpectedInDegVComplicatedGraph.Add(TIntPr(4, 2));
1025    TSnap::GetNodeInDegV(TNComplicatedGraph, TNInDegVComplicatedGraph);
1026    CheckVectors(TNExpectedInDegVComplicatedGraph, TNInDegVComplicatedGraph);
1027    TNEExpectedInDegVComplicatedGraph.Add(TIntPr(0, 0));
1028    TNEExpectedInDegVComplicatedGraph.Add(TIntPr(1, 2));
1029    TNEExpectedInDegVComplicatedGraph.Add(TIntPr(2, 2));
1030    TNEExpectedInDegVComplicatedGraph.Add(TIntPr(3, 0));
1031    TNEExpectedInDegVComplicatedGraph.Add(TIntPr(4, 3));
1032    TSnap::GetNodeInDegV(TNEComplicatedGraph, TNEInDegVComplicatedGraph);
1033    CheckVectors(TNEExpectedInDegVComplicatedGraph, TNEInDegVComplicatedGraph);
1034  }
1035  TEST_F(GraphTest, GetNodeOutDegVTest) {
1036    TIntPrV TUNExpectedOutDegVLoopGraph;
1037    TIntPrV TUNOutDegVLoopGraph;
1038    TIntPrV TNExpectedOutDegVLoopGraph;
1039    TIntPrV TNOutDegVLoopGraph;
1040    TIntPrV TNEExpectedOutDegVLoopGraph;
1041    TIntPrV TNEOutDegVLoopGraph;
1042    TIntPrV TUNExpectedOutDegVReverseTree;
1043    TIntPrV TUNOutDegVReverseTree;
1044    TIntPrV TNExpectedOutDegVReverseTree;
1045    TIntPrV TNOutDegVReverseTree;
1046    TIntPrV TNEExpectedOutDegVReverseTree;
1047    TIntPrV TNEOutDegVReverseTree;
1048    TIntPrV TUNExpectedOutDegVComplicatedGraph;
1049    TIntPrV TUNOutDegVComplicatedGraph;
1050    TIntPrV TNExpectedOutDegVComplicatedGraph;
1051    TIntPrV TNOutDegVComplicatedGraph;
1052    TIntPrV TNEExpectedOutDegVComplicatedGraph;
1053    TIntPrV TNEOutDegVComplicatedGraph;
1054    TUNExpectedOutDegVLoopGraph.Add(TIntPr(0, 2));
1055    TUNExpectedOutDegVLoopGraph.Add(TIntPr(1, 2));
1056    TUNExpectedOutDegVLoopGraph.Add(TIntPr(2, 2));
1057    TUNExpectedOutDegVLoopGraph.Add(TIntPr(3, 2));
1058    TUNExpectedOutDegVLoopGraph.Add(TIntPr(4, 2));
1059    TSnap::GetNodeOutDegV(TUNLoopGraph, TUNOutDegVLoopGraph);
1060    CheckVectors(TUNExpectedOutDegVLoopGraph, TUNOutDegVLoopGraph);
1061    TNExpectedOutDegVLoopGraph.Add(TIntPr(0, 2));
1062    TNExpectedOutDegVLoopGraph.Add(TIntPr(1, 1));
1063    TNExpectedOutDegVLoopGraph.Add(TIntPr(2, 1));
1064    TNExpectedOutDegVLoopGraph.Add(TIntPr(3, 1));
1065    TNExpectedOutDegVLoopGraph.Add(TIntPr(4, 1));
1066    TSnap::GetNodeOutDegV(TNLoopGraph, TNOutDegVLoopGraph);
1067    CheckVectors(TNExpectedOutDegVLoopGraph, TNOutDegVLoopGraph);
1068    TNEExpectedOutDegVLoopGraph.Add(TIntPr(0, 2));
1069    TNEExpectedOutDegVLoopGraph.Add(TIntPr(1, 1));
1070    TNEExpectedOutDegVLoopGraph.Add(TIntPr(2, 1));
1071    TNEExpectedOutDegVLoopGraph.Add(TIntPr(3, 1));
1072    TNEExpectedOutDegVLoopGraph.Add(TIntPr(4, 2));
1073    TSnap::GetNodeOutDegV(TNELoopGraph, TNEOutDegVLoopGraph);
1074    CheckVectors(TNEExpectedOutDegVLoopGraph, TNEOutDegVLoopGraph);
1075    TUNExpectedOutDegVReverseTree.Add(TIntPr(0, 2));
1076    TUNExpectedOutDegVReverseTree.Add(TIntPr(1, 2));
1077    TUNExpectedOutDegVReverseTree.Add(TIntPr(2, 2));
1078    TUNExpectedOutDegVReverseTree.Add(TIntPr(3, 1));
1079    TUNExpectedOutDegVReverseTree.Add(TIntPr(4, 1));
1080    TSnap::GetNodeOutDegV(TUNReverseTree, TUNOutDegVReverseTree);
1081    CheckVectors(TUNExpectedOutDegVReverseTree, TUNOutDegVReverseTree);
1082    TNExpectedOutDegVReverseTree.Add(TIntPr(0, 2));
1083    TNExpectedOutDegVReverseTree.Add(TIntPr(1, 1));
1084    TNExpectedOutDegVReverseTree.Add(TIntPr(2, 1));
1085    TNExpectedOutDegVReverseTree.Add(TIntPr(3, 0));
1086    TNExpectedOutDegVReverseTree.Add(TIntPr(4, 0));
1087    TSnap::GetNodeOutDegV(TNReverseTree, TNOutDegVReverseTree);
1088    CheckVectors(TNExpectedOutDegVReverseTree, TNOutDegVReverseTree);
1089    TNEExpectedOutDegVReverseTree.Add(TIntPr(0, 2));
1090    TNEExpectedOutDegVReverseTree.Add(TIntPr(1, 1));
1091    TNEExpectedOutDegVReverseTree.Add(TIntPr(2, 1));
1092    TNEExpectedOutDegVReverseTree.Add(TIntPr(3, 0));
1093    TNEExpectedOutDegVReverseTree.Add(TIntPr(4, 0));
1094    TSnap::GetNodeOutDegV(TNEReverseTree, TNEOutDegVReverseTree);
1095    CheckVectors(TNEExpectedOutDegVReverseTree, TNEOutDegVReverseTree);
1096    TUNExpectedOutDegVComplicatedGraph.Add(TIntPr(0, 2));
1097    TUNExpectedOutDegVComplicatedGraph.Add(TIntPr(1, 3));
1098    TUNExpectedOutDegVComplicatedGraph.Add(TIntPr(2, 3));
1099    TUNExpectedOutDegVComplicatedGraph.Add(TIntPr(3, 0));
1100    TUNExpectedOutDegVComplicatedGraph.Add(TIntPr(4, 2));
1101    TSnap::GetNodeOutDegV(TUNComplicatedGraph, TUNOutDegVComplicatedGraph);
1102    CheckVectors(TUNExpectedOutDegVComplicatedGraph, TUNOutDegVComplicatedGraph);
1103    TNExpectedOutDegVComplicatedGraph.Add(TIntPr(0, 2));
1104    TNExpectedOutDegVComplicatedGraph.Add(TIntPr(1, 2));
1105    TNExpectedOutDegVComplicatedGraph.Add(TIntPr(2, 2));
1106    TNExpectedOutDegVComplicatedGraph.Add(TIntPr(3, 0));
1107    TNExpectedOutDegVComplicatedGraph.Add(TIntPr(4, 0));
1108    TSnap::GetNodeOutDegV(TNComplicatedGraph, TNOutDegVComplicatedGraph);
1109    CheckVectors(TNExpectedOutDegVComplicatedGraph, TNOutDegVComplicatedGraph);
1110    TNEExpectedOutDegVComplicatedGraph.Add(TIntPr(0, 2));
1111    TNEExpectedOutDegVComplicatedGraph.Add(TIntPr(1, 3));
1112    TNEExpectedOutDegVComplicatedGraph.Add(TIntPr(2, 2));
1113    TNEExpectedOutDegVComplicatedGraph.Add(TIntPr(3, 0));
1114    TNEExpectedOutDegVComplicatedGraph.Add(TIntPr(4, 0));
1115    TSnap::GetNodeOutDegV(TNEComplicatedGraph, TNEOutDegVComplicatedGraph);
1116    CheckVectors(TNEExpectedOutDegVComplicatedGraph, TNEOutDegVComplicatedGraph);
1117  }
1118  TEST_F(GraphTest, CntUniqUndirEdgesTest) {
1119    EXPECT_EQ(5, TSnap::CntUniqUndirEdges(TUNLoopGraph));
1120    EXPECT_EQ(5, TSnap::CntUniqUndirEdges(TNLoopGraph));
1121    EXPECT_EQ(5, TSnap::CntUniqUndirEdges(TNELoopGraph));
1122    EXPECT_EQ(4, TSnap::CntUniqUndirEdges(TUNReverseTree));
1123    EXPECT_EQ(4, TSnap::CntUniqUndirEdges(TNReverseTree));
1124    EXPECT_EQ(4, TSnap::CntUniqUndirEdges(TNEReverseTree));
1125    EXPECT_EQ(5, TSnap::CntUniqUndirEdges(TUNComplicatedGraph));
1126    EXPECT_EQ(5, TSnap::CntUniqUndirEdges(TNComplicatedGraph));
1127    EXPECT_EQ(5, TSnap::CntUniqUndirEdges(TNEComplicatedGraph));
1128  }
1129  TEST_F(GraphTest, CntUniqDirEdgesTest) {
1130    EXPECT_EQ(10, TSnap::CntUniqDirEdges(TUNLoopGraph));
1131    EXPECT_EQ(6, TSnap::CntUniqDirEdges(TNLoopGraph));
1132    EXPECT_EQ(6, TSnap::CntUniqDirEdges(TNELoopGraph));
1133    EXPECT_EQ(8, TSnap::CntUniqDirEdges(TUNReverseTree));
1134    EXPECT_EQ(4, TSnap::CntUniqDirEdges(TNReverseTree));
1135    EXPECT_EQ(4, TSnap::CntUniqDirEdges(TNEReverseTree));
1136    EXPECT_EQ(10, TSnap::CntUniqDirEdges(TUNComplicatedGraph));
1137    EXPECT_EQ(6, TSnap::CntUniqDirEdges(TNComplicatedGraph));
1138    EXPECT_EQ(6, TSnap::CntUniqDirEdges(TNEComplicatedGraph));
1139  }
1140  TEST_F(GraphTest, CntUniqBiDirEdgesTest) {
1141    EXPECT_EQ(5, TSnap::CntUniqBiDirEdges(TUNLoopGraph));
1142    EXPECT_EQ(1, TSnap::CntUniqBiDirEdges(TNLoopGraph));
1143    EXPECT_EQ(1, TSnap::CntUniqBiDirEdges(TNELoopGraph));
1144    EXPECT_EQ(4, TSnap::CntUniqBiDirEdges(TUNReverseTree));
1145    EXPECT_EQ(0, TSnap::CntUniqBiDirEdges(TNReverseTree));
1146    EXPECT_EQ(0, TSnap::CntUniqBiDirEdges(TNEReverseTree));
1147    EXPECT_EQ(5, TSnap::CntUniqBiDirEdges(TUNComplicatedGraph));
1148    EXPECT_EQ(1, TSnap::CntUniqBiDirEdges(TNComplicatedGraph));
1149    EXPECT_EQ(1, TSnap::CntUniqBiDirEdges(TNEComplicatedGraph));
1150  }
1151  TEST_F(GraphTest, CntSelfEdgesTest) {
1152    EXPECT_EQ(0, TSnap::CntSelfEdges(TUNLoopGraph));
1153    EXPECT_EQ(0, TSnap::CntSelfEdges(TNLoopGraph));
1154    EXPECT_EQ(0, TSnap::CntSelfEdges(TNELoopGraph));
1155    EXPECT_EQ(0, TSnap::CntSelfEdges(TUNReverseTree));
1156    EXPECT_EQ(0, TSnap::CntSelfEdges(TNReverseTree));
1157    EXPECT_EQ(0, TSnap::CntSelfEdges(TNEReverseTree));
1158    EXPECT_EQ(0, TSnap::CntSelfEdges(TUNComplicatedGraph));
1159    EXPECT_EQ(0, TSnap::CntSelfEdges(TNComplicatedGraph));
1160    EXPECT_EQ(0, TSnap::CntSelfEdges(TNEComplicatedGraph));
1161    EXPECT_EQ(1, TSnap::CntSelfEdges(TUNComplicatedGraphWithLoop));
1162    EXPECT_EQ(1, TSnap::CntSelfEdges(TNComplicatedGraphWithLoop));
1163    EXPECT_EQ(1, TSnap::CntSelfEdges(TNEComplicatedGraphWithLoop));
1164  }
1165  TEST_F(GraphTest, GetUnDirTest) {
1166    TIntPrV TNExpectedDegCnt;
1167    TIntPrV TNEExpectedDegCnt;
1168    PUNGraph TUNGraphUnDir;
1169    PNGraph TNGraphUnDir;
1170    PNEGraph TNEGraphUnDir;
1171    TNExpectedDegCnt.Add(TIntPr(0, 1));
1172    TNExpectedDegCnt.Add(TIntPr(4, 2));
1173    TNExpectedDegCnt.Add(TIntPr(6, 2));
1174    TNEExpectedDegCnt.Add(TIntPr(0, 1));
1175    TNEExpectedDegCnt.Add(TIntPr(4, 1));
1176    TNEExpectedDegCnt.Add(TIntPr(6, 2));
1177    TNEExpectedDegCnt.Add(TIntPr(8, 1));
1178    TNGraphUnDir = TSnap::GetUnDir(TNComplicatedGraph);
1179    TNEGraphUnDir = TSnap::GetUnDir(TNEComplicatedGraph);
1180    CheckGraphs(TNExpectedDegCnt, TNGraphUnDir);
1181    CheckGraphs(TNEExpectedDegCnt, TNEGraphUnDir);
1182  }
1183  TEST_F(GraphTest, MakeUnDirTest) {
1184    TIntPrV TNExpectedDegCnt;
1185    TIntPrV TNEExpectedDegCnt;
1186    TNExpectedDegCnt.Add(TIntPr(0, 1));
1187    TNExpectedDegCnt.Add(TIntPr(4, 2));
1188    TNExpectedDegCnt.Add(TIntPr(6, 2));
1189    TNEExpectedDegCnt.Add(TIntPr(0, 1));
1190    TNEExpectedDegCnt.Add(TIntPr(4, 1));
1191    TNEExpectedDegCnt.Add(TIntPr(6, 2));
1192    TNEExpectedDegCnt.Add(TIntPr(8, 1));
1193    TSnap::MakeUnDir(TNComplicatedGraph);
<span onclick='openModal()' class='match'>1194    TSnap::MakeUnDir(TNEComplicatedGraph);
1195    CheckGraphs(TNExpectedDegCnt, TNComplicatedGraph);
1196    CheckGraphs(TNEExpectedDegCnt, TNEComplicatedGraph);
</span>1197  }
1198  TEST_F(GraphTest, AddSelfEdgesTest) {
1199    TIntPrV TUNExpectedDegCnt;
1200    TIntPrV TNExpectedDegCnt;
1201    TIntPrV TNEExpectedDegCnt;
1202    TUNExpectedDegCnt.Add(TIntPr(1, 1));
1203    TUNExpectedDegCnt.Add(TIntPr(3, 2));
1204    TUNExpectedDegCnt.Add(TIntPr(4, 2));
1205    TNExpectedDegCnt.Add(TIntPr(2, 1));
1206    TNExpectedDegCnt.Add(TIntPr(4, 2));
1207    TNExpectedDegCnt.Add(TIntPr(6, 2));
1208    TNEExpectedDegCnt.Add(TIntPr(2, 1));
1209    TNEExpectedDegCnt.Add(TIntPr(4, 1));
1210    TNEExpectedDegCnt.Add(TIntPr(5, 1));
1211    TNEExpectedDegCnt.Add(TIntPr(6, 1));
1212    TNEExpectedDegCnt.Add(TIntPr(7, 1));
1213    TSnap::AddSelfEdges(TUNComplicatedGraph);
1214    TSnap::AddSelfEdges(TNComplicatedGraph);
1215    TSnap::AddSelfEdges(TNEComplicatedGraph);
1216    CheckGraphs(TUNExpectedDegCnt, TUNComplicatedGraph);
1217    CheckGraphs(TNExpectedDegCnt, TNComplicatedGraph);
1218    CheckGraphs(TNEExpectedDegCnt, TNEComplicatedGraph);
1219  }
1220  TEST_F(GraphTest, DelSelfEdgesTest) {
1221    TIntPrV TUNExpectedDegCnt;
1222    TIntPrV TNExpectedDegCnt;
1223    TIntPrV TNEExpectedDegCnt;
1224    TUNExpectedDegCnt.Add(TIntPr(0, 1));
1225    TUNExpectedDegCnt.Add(TIntPr(2, 2));
1226    TUNExpectedDegCnt.Add(TIntPr(3, 2));
1227    TNExpectedDegCnt.Add(TIntPr(0, 1));
1228    TNExpectedDegCnt.Add(TIntPr(2, 2));
1229    TNExpectedDegCnt.Add(TIntPr(4, 2));
1230    TNEExpectedDegCnt.Add(TIntPr(0, 1));
1231    TNEExpectedDegCnt.Add(TIntPr(2, 1));
1232    TNEExpectedDegCnt.Add(TIntPr(3, 1));
1233    TNEExpectedDegCnt.Add(TIntPr(4, 1));
1234    TNEExpectedDegCnt.Add(TIntPr(5, 1));
1235    TSnap::DelSelfEdges(TUNComplicatedGraphWithLoop);
1236    TSnap::DelSelfEdges(TNComplicatedGraphWithLoop);
1237    TSnap::DelSelfEdges(TNEComplicatedGraphWithLoop);
1238    CheckGraphs(TUNExpectedDegCnt, TUNComplicatedGraphWithLoop);
1239    CheckGraphs(TNExpectedDegCnt, TNComplicatedGraphWithLoop);
1240    CheckGraphs(TNEExpectedDegCnt, TNEComplicatedGraphWithLoop);
1241  }
1242  TEST_F(GraphTest, DelNodesTest) {
1243    TIntV TUNDelNodes;
1244    TIntV TNDelNodes;
1245    TIntV TNEDelNodes;
1246    TIntPrV TUNExpectedDegCnt;
1247    TIntPrV TNExpectedDegCnt;
1248    TIntPrV TNEExpectedDegCnt;
1249    TUNDelNodes.Add(0);
1250    TNDelNodes.Add(0);
1251    TNEDelNodes.Add(0);
1252    TUNExpectedDegCnt.Add(TIntPr(0, 1));
1253    TUNExpectedDegCnt.Add(TIntPr(2, 3));
1254    TNExpectedDegCnt.Add(TIntPr(0, 1));
1255    TNExpectedDegCnt.Add(TIntPr(2, 1));
1256    TNExpectedDegCnt.Add(TIntPr(3, 2));
1257    TNEExpectedDegCnt.Add(TIntPr(0, 1));
1258    TNEExpectedDegCnt.Add(TIntPr(3, 2));
1259    TNEExpectedDegCnt.Add(TIntPr(4, 1));
1260    TSnap::DelNodes(TUNComplicatedGraph, TUNDelNodes);
1261    TSnap::DelNodes(TNComplicatedGraph, TNDelNodes);
1262    TSnap::DelNodes(TNEComplicatedGraph, TNEDelNodes);
1263    CheckGraphs(TUNExpectedDegCnt, TUNComplicatedGraph);
1264    CheckGraphs(TNExpectedDegCnt, TNComplicatedGraph);
1265    CheckGraphs(TNEExpectedDegCnt, TNEComplicatedGraph);
1266  }
1267  TEST_F(GraphTest, DelZeroDegNodesTest) {
1268    TIntPrV TUNExpectedDegCnt;
1269    TIntPrV TNExpectedDegCnt;
1270    TIntPrV TNEExpectedDegCnt;
1271    TUNExpectedDegCnt.Add(TIntPr(2, 2));
1272    TUNExpectedDegCnt.Add(TIntPr(3, 2));
1273    TNExpectedDegCnt.Add(TIntPr(2, 2));
1274    TNExpectedDegCnt.Add(TIntPr(4, 2));
1275    TNEExpectedDegCnt.Add(TIntPr(2, 1));
1276    TNEExpectedDegCnt.Add(TIntPr(3, 1));
1277    TNEExpectedDegCnt.Add(TIntPr(4, 1));
1278    TNEExpectedDegCnt.Add(TIntPr(5, 1));
1279    TSnap::DelZeroDegNodes(TUNComplicatedGraph);
1280    TSnap::DelZeroDegNodes(TNComplicatedGraph);
1281    TSnap::DelZeroDegNodes(TNEComplicatedGraph);
1282    CheckGraphs(TUNExpectedDegCnt, TUNComplicatedGraph);
1283    CheckGraphs(TNExpectedDegCnt, TNComplicatedGraph);
1284    CheckGraphs(TNEExpectedDegCnt, TNEComplicatedGraph);
1285  }
1286  TEST_F(GraphTest, DelDegKNodesTest) {
1287    TIntPrV TUNExpectedDegCnt;
1288    TIntPrV TNExpectedDegCnt;
1289    TIntPrV TNEExpectedDegCnt;
1290    TUNExpectedDegCnt.Add(TIntPr(0, 3));
1291    TNExpectedDegCnt.Add(TIntPr(0, 1));
1292    TNEExpectedDegCnt.Add(TIntPr(2, 2));
1293    TSnap::DelDegKNodes(TUNComplicatedGraph, 3, 3);
1294    TSnap::DelDegKNodes(TNComplicatedGraph, 2, 0);
1295    TSnap::DelDegKNodes(TNEComplicatedGraph, 2, 0);
1296    CheckGraphs(TUNExpectedDegCnt, TUNComplicatedGraph);
1297    CheckGraphs(TNExpectedDegCnt, TNComplicatedGraph);
1298    CheckGraphs(TNEExpectedDegCnt, TNEComplicatedGraph);
1299  }
1300  TEST_F(TreeTest, IsTreeTest) {
1301    int RootNId;
1302    EXPECT_TRUE(TSnap::IsTree(SingleNode, RootNId));
1303    EXPECT_EQ(1, RootNId);
1304    EXPECT_TRUE(TSnap::IsTree(Tree, RootNId));
1305    EXPECT_EQ(1, RootNId);
1306    EXPECT_FALSE(TSnap::IsTree(Forest, RootNId));
1307    EXPECT_EQ(-1, RootNId);
1308    EXPECT_FALSE(TSnap::IsTree(Circle, RootNId));
1309    EXPECT_EQ(-1, RootNId);
1310  }
1311  TEST_F(TreeTest, GetTreeRootNIdTest) {
1312    int RootNId = 1;
1313    EXPECT_EQ(RootNId, TSnap::GetTreeRootNId(SingleNode));
1314    EXPECT_EQ(RootNId, TSnap::GetTreeRootNId(Tree));
1315  }
1316  TEST_F(TreeTest, GetTreeSigTest) {
1317    int RootNId = 1;
1318    TIntV SingleNodeSig;
1319    TIntV TreeSig;
1320    TIntV ForestSig;
1321    TIntV CircleSig;
1322    TIntV ExpectedSingleNodeSig;
1323    TIntV ExpectedTreeSig;
1324    ExpectedSingleNodeSig.Add(0);
1325    TSnap::GetTreeSig(SingleNode, RootNId, SingleNodeSig);
1326    CheckVectors(ExpectedSingleNodeSig, SingleNodeSig);
1327    int NumNodesWithChildren = 6;
1328    int NumNodesWithChild = 1;
1329    int NumNodesWithNoChildren = 7;
1330    AddValues(ExpectedTreeSig, NumNodesWithChildren, 2);
1331    AddValues(ExpectedTreeSig, NumNodesWithChild, 1);
1332    AddValues(ExpectedTreeSig, NumNodesWithNoChildren, 0);
1333  }
1334  TEST_F(TreeTest, GetTreeSigWithNodeMapTest) {
1335    int RootNId = 1;
1336    TIntV SingleNodeSig;
1337    TIntV TreeSig;
1338    TIntV ForestSig;
1339    TIntV CircleSig;
1340    TIntV ExpectedSingleNodeSig;
1341    TIntV ExpectedTreeSig;
1342    TIntPrV SingleNodeNodeMap;
1343    TIntPrV TreeNodeMap;
1344    TIntPrV ForestNodeMap;
1345    TIntPrV CircleNodeMap;
1346    TIntV TreeNodeMapKeys;
1347    TIntPrV ExpectedSingleNodeNodeMap;
1348    TIntV ExpectedTreeNodeMapKeys;
1349    ExpectedSingleNodeSig.Add(0);
1350    ExpectedSingleNodeNodeMap.Add(TIntPr(1, 0));
1351    TSnap::GetTreeSig(SingleNode, RootNId, SingleNodeSig, SingleNodeNodeMap);
1352    int NumNodesWithChildren = 6;
1353    int NumNodesWithChild = 1;
1354    int NumNodesWithNoChildren = 7;
1355    AddValues(ExpectedTreeSig, NumNodesWithChildren, 2);
1356    AddValues(ExpectedTreeSig, NumNodesWithChild, 1);
1357    AddValues(ExpectedTreeSig, NumNodesWithNoChildren, 0);
1358    AddConsecutiveValues(ExpectedTreeNodeMapKeys, RootNId, Tree->GetNodes());
1359  }
1360  void CheckVectors(const TIntPrV& Expected, const TIntPrV& Actual) {
1361    ASSERT_EQ(Expected.Len(), Actual.Len());
1362    for (int i = 0; i < Actual.Len(); i++) {
1363      EXPECT_EQ(Expected[i].Val1.Val, Actual[i].Val1.Val);
1364      EXPECT_EQ(Expected[i].Val2.Val, Actual[i].Val2.Val);
1365    }
1366  }
1367  void CheckVectors(const TFltPrV& Expected, const TFltPrV& Actual) {
1368    ASSERT_EQ(Expected.Len(), Actual.Len());
1369    for (int i = 0; i < Actual.Len(); i++) {
1370      EXPECT_EQ(Expected[i].Val1.Val, Actual[i].Val1.Val);
1371      EXPECT_EQ(Expected[i].Val2.Val, Actual[i].Val2.Val);
1372    }
1373  }
1374  void CheckVectors(const TIntV& Expected, const TIntV& Actual) {
1375    ASSERT_EQ(Expected.Len(), Actual.Len());
1376    for (int i = 0; i < Actual.Len(); i++) {
1377      EXPECT_EQ(Expected[i].Val, Actual[i].Val);
1378    }
1379  }
1380  void CheckVectors(const TIntSet& Expected, const TIntSet& Actual) {
1381    ASSERT_EQ(Expected.Len(), Actual.Len());
1382    for (int i = 0; i < Actual.Len(); i++) {
1383      EXPECT_EQ(Expected[i].Val, Actual[i].Val);
1384    }
1385  }
1386  void CheckGraphs(const TIntPrV& ExpectedDegCnt, const PUNGraph& ActualGraph) {
1387    TIntPrV ActualDegCnt;
1388    TSnap::GetDegCnt(ActualGraph, ActualDegCnt);
1389    CheckVectors(ExpectedDegCnt, ActualDegCnt);
1390  }
1391  void CheckGraphs(const TIntPrV& ExpectedDegCnt, const PNGraph& ActualGraph) {
1392    TIntPrV ActualDegCnt;
1393    TSnap::GetDegCnt(ActualGraph, ActualDegCnt);
1394    CheckVectors(ExpectedDegCnt, ActualDegCnt);
1395  }
1396  void CheckGraphs(const TIntPrV& ExpectedDegCnt, const PNEGraph& ActualGraph) {
1397    TIntPrV ActualDegCnt;
1398    TSnap::GetDegCnt(ActualGraph, ActualDegCnt);
1399    CheckVectors(ExpectedDegCnt, ActualDegCnt);
1400  }
1401  void CheckNotInSet(int Key, const TIntSet& Keys) {
1402    for (int i = 0; i < Keys.Len(); i++) {
1403      EXPECT_NE(Keys[i], Key);
1404    }
1405  }
1406  void AddValues(TIntV& Vector, int NumValues, int Value) {
1407    for (int i = 0; i < NumValues; i++) {
1408      Vector.Add(Value);
1409    }
1410  }
1411  void AddConsecutiveValues(TIntV& Vector, int Start, int End) {
1412    for (int Id = Start; Id <= End; Id++) {
1413      Vector.Add(Id);
1414    }
1415  }
1416  void GetKeys(TIntV& Keys, const TIntPrV& Map) {
1417    for (int Id = 0; Id < Map.Len(); Id++) {
1418      Keys.Add(Map[Id].Val1.Val);
1419    }
1420  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from abseil-cpp-MDEwOlJlcG9zaXRvcnkxMDQyMzE1NDE=-flat-container_test.cc</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-test-alg.cpp</div>
                </div>
                <div class="column column_space"><pre><code>920    absl::c_prev_permutation(permuted);
921    EXPECT_EQ(initial, permuted);
922  }
</pre></code></div>
                <div class="column column_space"><pre><code>1194    TSnap::MakeUnDir(TNEComplicatedGraph);
1195    CheckGraphs(TNExpectedDegCnt, TNComplicatedGraph);
1196    CheckGraphs(TNEExpectedDegCnt, TNEComplicatedGraph);
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    