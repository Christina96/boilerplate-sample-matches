
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Similarity: 18.243243243243242%, Tokens: 9</h2>
        <div class="column">
            <h3>snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-bfs-dev.h</h3>
            <pre><code>1  #include <stdio.h>
2  template<class PGraph>
3  class TBreathFS_Test {
4  public:
5    PGraph Graph;
6    TSnapQueue<int> Queue;
7    TInt StartNId;
8    TIntH NIdDistH;
9  public:
10    TBreathFS_Test(const PGraph& GraphPt, const bool& InitBigQ=true) :
11      Graph(GraphPt), Queue(InitBigQ?Graph->GetNodes():1024), NIdDistH(InitBigQ?Graph->GetNodes():1024) { }
12    int DoBfs_test(const int& StartNode, const bool& FollowOut, const bool& FollowIn, const int& TargetNId=-1, const int& MxDist=TInt::Mx);
13  };
14  template<class PGraph>
15  int TBreathFS_Test<PGraph>::DoBfs_test(const int& StartNode, const bool& FollowOut, const bool& FollowIn, const int& TargetNId, const int& MxDist) {
16    StartNId = StartNode;
17    IAssert(Graph->IsNode(StartNId));
18    NIdDistH.Clr(false);  NIdDistH.AddDat(StartNId, 0);
19    printf("__AddDat__ %d %d\n", StartNId.Val, 0);
20    Queue.Clr(false);  Queue.Push(StartNId);
21    printf("__QueuePush__ %d\n", StartNId.Val);
22    int v, MaxDist = 0;
23    while (! Queue.Empty()) {
24      const int NId = Queue.Top();  Queue.Pop();
25      printf("__QueuePop__\n");
26      const int Dist = NIdDistH.GetDat(NId);
27      printf("__GetDat__ %d\n", NId);
28      if (Dist == MxDist) { break; } 
29      const typename PGraph::TObj::TNodeI NodeI = Graph->GetNI(NId);
30      printf("__GraphGetNI__ %d\n", NId);
31      if (FollowOut) { 
32        for (v = 0; v < NodeI.GetOutDeg(); v++) {  
33          const int DstNId = NodeI.GetOutNId(v);
34          printf("__IsKey__ %d\n", DstNId);
35          if (! NIdDistH.IsKey(DstNId)) {
36            NIdDistH.AddDat(DstNId, Dist+1);
37            printf("__AddDat__ %d %d\n", DstNId, Dist+1);
38            MaxDist = TMath::Mx(MaxDist, Dist+1);
39            if (DstNId == TargetNId) { return MaxDist; }
40            Queue.Push(DstNId);
41            printf("__QueuePush__ %d\n", DstNId);
42          }
43        }
44      }
45      if (FollowIn) { 
<span onclick='openModal()' class='match'>46        for (v = 0; v < NodeI.GetInDeg(); v++) {
47          const int DstNId = NodeI.GetInNId(v);
48          if (! NIdDistH.IsKey(DstNId)) {
49            NIdDistH.AddDat(DstNId, Dist+1);
50            MaxDist = TMath::Mx(MaxDist, Dist+1);
</span>51            if (DstNId == TargetNId) { return MaxDist; }
52            Queue.Push(DstNId);
53          }
54        }
55      }
56    }
57    return MaxDist;
58  }
</code></pre>
        </div>
        <div class="column">
            <h3>snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-mxdag.cpp</h3>
            <pre><code>1  #include "stdafx.h"
2  #include "mxdag.h"
3  namespace TSnap {
4  int EvalMxDagOrdering(const PNGraph& Graph, const TIntV& NIdV) {
5    TIntH NIdPosH(NIdV.Len());
6    for (int i = 0; i < NIdV.Len(); i++) {
7  	  NIdPosH.AddDat(NIdV[i], i);
8    }
9    return EvalMxDagOrdering(Graph, NIdPosH);
10  }
11  int EvalMxDagOrdering(const PNGraph& Graph, const TIntH& NIdPosH) {
12    int OkEdges=0;
13    for (TNGraph::TNodeI NI = Graph->BegNI(); NI < Graph->EndNI(); NI++) {
14      const int MyPos = NIdPosH.GetDat(NI.GetId());
15      for (int e = 0; e < NI.GetOutDeg(); e++) {
16        if (MyPos < NIdPosH.GetDat(NI.GetOutNId(e))) { OkEdges++; }
17      }
18    }
19    return OkEdges;
20  }
21  int EvalMxDagNodeSwap(const PNGraph& Graph, const TIntH& NIdPosH, const int& NId1, const int& NId2) {
22    int oldOkEdges=0, newOkEdges=0;
23    const int newPos1 = NIdPosH.GetDat(NId2);
24    const int newPos2 = NIdPosH.GetDat(NId1);
25    { TNGraph::TNodeI NI = Graph->GetNI(NId1);
26    for (int e = 0; e < NI.GetOutDeg(); e++) {
27      const int DstPos = NIdPosH.GetDat(NI.GetOutNId(e));
28      if (newPos2 < DstPos) { oldOkEdges++; }
29      if (newPos1 < DstPos) { newOkEdges++; } }
<span onclick='openModal()' class='match'>30    for (int e = 0; e < NI.GetInDeg(); e++) {
31      const int DstPos = NIdPosH.GetDat(NI.GetInNId(e));
32      if (DstPos < newPos2) { oldOkEdges++; }
</span>33      if (DstPos < newPos1) { newOkEdges++; } }
34    }
35    { TNGraph::TNodeI NI = Graph->GetNI(NId2);
36    for (int e = 0; e < NI.GetOutDeg(); e++) {
37      const int DstPos = NIdPosH.GetDat(NI.GetOutNId(e));
38      if (newPos1 < DstPos) { oldOkEdges++; }
39      if (newPos2 < DstPos) { newOkEdges++; } }
40    for (int e = 0; e < NI.GetInDeg(); e++) {
41      const int DstPos = NIdPosH.GetDat(NI.GetInNId(e));
42      if (DstPos < newPos1) { oldOkEdges++; }
43      if (DstPos < newPos2) { newOkEdges++; } }
44    }
45    if (Graph->IsEdge(NId1, NId2) || Graph->IsEdge(NId2, NId1)) { oldOkEdges--; }
46    return newOkEdges - oldOkEdges;
47  }
48  int GetGreedyMxDag(const PNGraph& Graph, const int& NIters) {
49    TIntV NIdOrdeV;
50    return GetGreedyMxDag(Graph, NIters, NIdOrdeV);
51  }
52  int GetGreedyMxDag(const PNGraph& Graph, const int& NIters, TIntV& NIdOrderV) {
53    const int Edges = Graph->GetEdges();
54    TIntH NIdPosH;
55    TIntV NIdV;
56    Graph->GetNIdV(NIdV);  NIdV.Shuffle(TInt::Rnd);
57    for (int i = 0; i < NIdV.Len(); i++) {
58      NIdPosH.AddDat(NIdV[i], i);
59    }
60    int Score = EvalMxDagOrdering(Graph, NIdPosH), GoodMoves=0;
61    for (int i = 1; i <= NIters; i++) {
62      const int RndNId1 = NIdPosH.GetKey(TInt::Rnd.GetUniDevInt(NIdPosH.Len()));
63      const int RndNId2 = NIdPosH.GetKey(TInt::Rnd.GetUniDevInt(NIdPosH.Len()));
64      if (RndNId1 == RndNId2) { i--; continue; }
65      const int Delta = EvalMxDagNodeSwap(Graph, NIdPosH, RndNId1, RndNId2);
66      if (Delta > 0) {
67        int tmp=NIdPosH.GetDat(RndNId2);
68        NIdPosH.GetDat(RndNId2) = NIdPosH.GetDat(RndNId1);
69        NIdPosH.GetDat(RndNId1) = tmp;
70        Score += Delta;  GoodMoves++;
71      }
72      if (i==1 || i % Kilo(100) == 0) {
73      }
74    }
75    NIdOrderV.Gen(NIdPosH.Len());
76    for (int i = 0; i < NIdPosH.Len(); i++) {
77      IAssert(NIdPosH[i] < NIdOrderV.Len());
78      NIdOrderV[NIdPosH[i]] = NIdPosH.GetKey(i);
79    }
80    return EvalMxDagOrdering(Graph, NIdPosH);
81  }
82  } 
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-bfs-dev.h</div>
                <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-mxdag.cpp</div>
                <div class="column column_space"><pre><code>46        for (v = 0; v < NodeI.GetInDeg(); v++) {
47          const int DstNId = NodeI.GetInNId(v);
48          if (! NIdDistH.IsKey(DstNId)) {
49            NIdDistH.AddDat(DstNId, Dist+1);
50            MaxDist = TMath::Mx(MaxDist, Dist+1);
</pre></code></div>
                <div class="column column_space"><pre><code>30    for (int e = 0; e < NI.GetInDeg(); e++) {
31      const int DstPos = NIdPosH.GetDat(NI.GetInNId(e));
32      if (DstPos < newPos2) { oldOkEdges++; }
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    