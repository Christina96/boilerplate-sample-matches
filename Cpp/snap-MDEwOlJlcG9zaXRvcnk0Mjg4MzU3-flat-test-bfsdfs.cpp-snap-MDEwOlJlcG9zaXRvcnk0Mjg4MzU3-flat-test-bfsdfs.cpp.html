
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <title>Code Files</title>
            <style>
                .column {
                    width: 47%;
                    float: left;
                    padding: 12px;
                    border: 2px solid #ffd0d0;
                }
        
                .modal {
                    display: none;
                    position: fixed;
                    z-index: 1;
                    left: 0;
                    top: 0;
                    width: 100%;
                    height: 100%;
                    overflow: auto;
                    background-color: rgb(0, 0, 0);
                    background-color: rgba(0, 0, 0, 0.4);
                }
    
                .modal-content {
                    height: 250%;
                    background-color: #fefefe;
                    margin: 5% auto;
                    padding: 20px;
                    border: 1px solid #888;
                    width: 80%;
                }
    
                .close {
                    color: #aaa;
                    float: right;
                    font-size: 20px;
                    font-weight: bold;
                    text-align: right;
                }
    
                .close:hover, .close:focus {
                    color: black;
                    text-decoration: none;
                    cursor: pointer;
                }
    
                .row {
                    float: right;
                    width: 100%;
                }
    
                .column_space  {
                    white - space: pre-wrap;
                }
                 
                pre {
                    width: 100%;
                    overflow-y: auto;
                    background: #f8fef2;
                }
                
                .match {
                    cursor:pointer; 
                    background-color:#00ffbb;
                }
        </style>
    </head>
    <body>
        <h2>Tokens: 97, <button onclick='openModal()' class='match'></button></h2>
        <div class="column">
            <h3>snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-test-bfsdfs.cpp</h3>
            <pre><code>1  #include <gtest/gtest.h>
2  #include <iostream>
3  #include "Snap.h"
4  #define EPSILON 0.001
5  #define DIRNAME "bfsdfs"
6  class BfsDfsTest { };  
7  using namespace TSnap;
8  template <class PGraph>
9  void TestFullBfsDfs() {
10    const int NNodes = 500;
11    PGraph G = GenFull<PGraph>(NNodes);
12    PNGraph GOut;
13    int TreeSz, TreeDepth;
14    GOut = GetBfsTree(G, 1, false, false);
15    GetSubTreeSz(G, 1, false, false, TreeSz, TreeDepth);
16    EXPECT_TRUE(GOut->GetNodes() == 1);
17    EXPECT_TRUE(GOut->GetEdges() == 0);
18    EXPECT_TRUE(TreeSz == 1);
19    EXPECT_TRUE(TreeDepth == 0);
20    GOut = GetBfsTree(G, NNodes-1, true, true);
21    GetSubTreeSz(G, 1, true, true, TreeSz, TreeDepth);
22    EXPECT_TRUE(GOut->GetNodes() == NNodes);
23    EXPECT_TRUE(GOut->GetEdges() == NNodes-1);
24    EXPECT_TRUE(TreeSz == NNodes);
25    EXPECT_TRUE(TreeDepth == 1);
26    GOut = GetBfsTree(G, NNodes/2, true, false);
27    GetSubTreeSz(G, 1, true, false, TreeSz, TreeDepth);
28    EXPECT_TRUE(GOut->GetNodes() == NNodes);
29    EXPECT_TRUE(GOut->GetEdges() == NNodes-1);
30    EXPECT_TRUE(TreeSz == NNodes);
31    EXPECT_TRUE(TreeDepth == 1);
32    GOut = GetBfsTree(G, 1, false, true);
33    GetSubTreeSz(G, 1, false, true, TreeSz, TreeDepth);
34    EXPECT_TRUE(GOut->GetNodes() == NNodes);
35    EXPECT_TRUE(GOut->GetEdges() == NNodes-1);
36    EXPECT_TRUE(TreeSz == NNodes);
37    EXPECT_TRUE(TreeDepth == 1);
38    TIntV NIdV;
39    int StartNId, Hop, Nodes;
40    StartNId = 1;
41    Hop = 1;
42    Nodes = GetNodesAtHop(G, StartNId, Hop, NIdV, HasGraphFlag(typename PGraph::TObj, gfDirected));
43    TIntPrV HopCntV;
44    Nodes = GetNodesAtHops(G, StartNId, HopCntV, HasGraphFlag(typename PGraph::TObj, gfDirected));
45    int Length, SrcNId, DstNId;
46    SrcNId = 1;
47    DstNId = NNodes-1;
48    Length = GetShortPath(G, SrcNId, DstNId, HasGraphFlag(typename PGraph::TObj, gfDirected));
49    TIntH NIdToDistH;
50    int MaxDist = 9;
51    Length = GetShortPath(G, SrcNId, NIdToDistH, HasGraphFlag(typename PGraph::TObj, gfDirected), MaxDist);
52    EXPECT_TRUE(NIdToDistH[0] == 0);
53    EXPECT_TRUE(NIdToDistH[1] == 1);
54    EXPECT_TRUE(NIdToDistH[2] == 1);
55    EXPECT_TRUE(NIdToDistH[3] == 1);
56    EXPECT_TRUE(NIdToDistH[4] == 1);
57    int FullDiam;
58    double EffDiam, AvgDiam;
59    int NTestNodes = 10;
60    for (int IsDir = 0; IsDir < 2; IsDir++) {
61      FullDiam = GetBfsFullDiam(G, NTestNodes, IsDir);
62      EXPECT_TRUE(FullDiam == 1);
63      EffDiam = GetBfsEffDiam (G, NTestNodes, IsDir);
64      EXPECT_TRUE(EffDiam > 0.8 - EPSILON && EffDiam < 0.95 + EPSILON);
65      EffDiam = GetBfsEffDiam (G, NTestNodes, IsDir, EffDiam, FullDiam);
66      EXPECT_TRUE(EffDiam > 0.8 - EPSILON && EffDiam < 0.95 + EPSILON);
67      EXPECT_TRUE(FullDiam == 1);
68      EffDiam = GetBfsEffDiam (G, NTestNodes, IsDir, EffDiam, FullDiam, AvgDiam);
69      EXPECT_TRUE(EffDiam > 0.8 - EPSILON && EffDiam < 0.95 + EPSILON);
70      EXPECT_TRUE(FullDiam == 1);
71      EXPECT_TRUE(AvgDiam > 0.9980 - EPSILON && AvgDiam < 0.9980 + EPSILON);
72      EffDiam = GetBfsEffDiamAll (G, NTestNodes, IsDir, EffDiam, FullDiam, AvgDiam);
73      EXPECT_TRUE(EffDiam > 0.8 - EPSILON && EffDiam < 0.95 + EPSILON);
74      EXPECT_TRUE(FullDiam == 1);
75      EXPECT_TRUE(AvgDiam > 0.9980 - EPSILON && AvgDiam < 0.9980 + EPSILON);
76      TIntV SubGraphNIdV;
77      for (int i = 0; i < NTestNodes; i++) {
78        SubGraphNIdV.Add(G->GetRndNId());
79      }
80      EffDiam = GetBfsEffDiam(G, NTestNodes, SubGraphNIdV, IsDir, EffDiam, FullDiam);
81      EXPECT_TRUE(EffDiam > 0.8 - EPSILON && EffDiam < 0.95 + EPSILON);
82      EXPECT_TRUE(FullDiam == 1);
83    }
84  }
85  TEST(BfsDfsTest, UndirectedRandom) {
86    PUNGraph G;
87    TStr FName = TStr::Fmt("%s/sample_bfsdfs_unpower.txt", DIRNAME);
88    G = LoadEdgeList<PUNGraph>(FName);
89    TIntStrH NodeLabelH;
90    for (int i = 0; i < G->GetNodes(); i++) {
91      NodeLabelH.AddDat(i, TStr::Fmt("%d", i));
92    }
93    DrawGViz(G, gvlNeato, TStr::Fmt("%s/sample_bfsdfs_unpower.png", DIRNAME), "Sample bfsdfs Graph", NodeLabelH);
94    TIntV NIdV;
95    int StartNId, Hop, Nodes; 
96    int IsDir = 0;
97    StartNId = 1;
98    Hop = 1;
99    Nodes = GetNodesAtHop(G, StartNId, Hop, NIdV, IsDir);
100      EXPECT_TRUE(Nodes == 1);
101    EXPECT_TRUE(NIdV.Len() == 1);
102    EXPECT_TRUE(NIdV[0] = 46);
103    TIntPrV HopCntV;
104    Nodes = GetNodesAtHops(G, StartNId, HopCntV, IsDir);
105      EXPECT_TRUE(Nodes == 8);
106    EXPECT_TRUE(HopCntV.Len() == 8);
107    int Length, SrcNId, DstNId;
108    SrcNId = 1;
109    DstNId = G->GetNodes() - 1;
110    Length = GetShortPath(G, SrcNId, DstNId, IsDir);
111    EXPECT_TRUE(Length == -1);
112    SrcNId = 1;
113    DstNId = 33;
114    Length = GetShortPath(G, SrcNId, DstNId, IsDir);
115    EXPECT_TRUE(Length == 7);
116    TIntH NIdToDistH;
117    int MaxDist = 9;
118    Length = GetShortPath(G, SrcNId, NIdToDistH, IsDir, MaxDist);
119    EXPECT_TRUE(NIdToDistH[0] == 0);
120    EXPECT_TRUE(NIdToDistH[1] == 1);
121    EXPECT_TRUE(NIdToDistH[2] == 2);
122    EXPECT_TRUE(NIdToDistH[3] == 3);
123    EXPECT_TRUE(NIdToDistH[4] == 3);
124    TInt::Rnd.PutSeed(0);
125    int FullDiam;
126    double EffDiam, AvgSPL;
127    int NTestNodes = G->GetNodes() / 3 * 2;
128    FullDiam = GetBfsFullDiam(G, NTestNodes, IsDir);
129    EXPECT_TRUE(FullDiam <= 8 && FullDiam >= 5);
130    EffDiam = GetBfsEffDiam(G, NTestNodes, IsDir);
131    EXPECT_TRUE(EffDiam > 3.5 && EffDiam < 4.5);
132    EffDiam = GetBfsEffDiam(G, NTestNodes, IsDir, EffDiam, FullDiam);
133    EXPECT_TRUE(EffDiam > 3.5 && EffDiam < 4.5);
134    EXPECT_TRUE(FullDiam > 5 && FullDiam < 8);
135    EffDiam = GetBfsEffDiam(G, NTestNodes, IsDir, EffDiam, FullDiam, AvgSPL);
136    EXPECT_TRUE(EffDiam > 3.5 && EffDiam < 4.5);
137    EXPECT_TRUE(FullDiam > 5 && FullDiam < 8);
138    EXPECT_TRUE(AvgSPL > 1.5 && AvgSPL < 5.0);
139    TIntV SubGraphNIdV;
140    SubGraphNIdV.Add(0);
141    SubGraphNIdV.Add(4);
142    SubGraphNIdV.Add(31);
143    SubGraphNIdV.Add(45);
144    SubGraphNIdV.Add(18);
145    SubGraphNIdV.Add(11);
146    SubGraphNIdV.Add(11);
147    SubGraphNIdV.Add(48);
148    SubGraphNIdV.Add(34);
149    SubGraphNIdV.Add(30);
150    EffDiam = GetBfsEffDiam(G, NTestNodes, SubGraphNIdV, IsDir, EffDiam, FullDiam);
151    EXPECT_TRUE(EffDiam > 2.7385 - EPSILON && EffDiam < 2.7385 + EPSILON);
152    EXPECT_TRUE(FullDiam == 3);
153  }
154  TEST(BfsDfsTest, DirectedRandom) {
155    PNGraph G = TNGraph::New();
156    TStr FName = TStr::Fmt("%s/sample_bfsdfs_ngraph.txt", DIRNAME);
157    G = LoadEdgeList<PNGraph>(FName);
158    TIntStrH NodeLabelH;
159    for (int i = 0; i < G->GetNodes(); i++) {
160      NodeLabelH.AddDat(i, TStr::Fmt("%d", i));
161    }
162    DrawGViz(G, gvlDot, TStr::Fmt("%s/sample_bfsdfs_ngraph.png", DIRNAME), "Sample BFS Graph", NodeLabelH);
163    TIntV NIdV;
164    int StartNId, Hop, Nodes;
165    int IsDir = 1;
166    StartNId = 11;
167    Hop = 1;
168    Nodes = GetNodesAtHop(G, StartNId, Hop, NIdV, IsDir);
169    EXPECT_TRUE(Nodes == 2);
170    EXPECT_TRUE(NIdV.Len() == 2);
171    EXPECT_TRUE(NIdV[0] = 20);
172    EXPECT_TRUE(NIdV[1] = 25);
173    TIntPrV HopCntV;
174    Nodes = GetNodesAtHops(G, StartNId, HopCntV, IsDir);
175    EXPECT_TRUE(Nodes == 10);
176    EXPECT_TRUE(HopCntV.Len() == 10);
177    EXPECT_TRUE(HopCntV[0] == TIntPr(0, 1));
178    EXPECT_TRUE(HopCntV[1] == TIntPr(1, 2));
179    EXPECT_TRUE(HopCntV[2] == TIntPr(2, 3));
180    EXPECT_TRUE(HopCntV[3] == TIntPr(3, 4));
181    EXPECT_TRUE(HopCntV[4] == TIntPr(4, 5));
182    EXPECT_TRUE(HopCntV[5] == TIntPr(5, 4));
183    EXPECT_TRUE(HopCntV[6] == TIntPr(6, 1));
184    EXPECT_TRUE(HopCntV[7] == TIntPr(7, 1));
185    EXPECT_TRUE(HopCntV[8] == TIntPr(8, 3));
186    EXPECT_TRUE(HopCntV[9] == TIntPr(9, 1));
187    int Length, SrcNId, DstNId;
188    SrcNId = 11;
189    DstNId = G->GetNodes() - 1;
190    Length = GetShortPath(G, SrcNId, DstNId, IsDir);
191    EXPECT_TRUE(Length == 2);
192    SrcNId = 11;
193    DstNId = 27;
194    Length = GetShortPath(G, SrcNId, DstNId, IsDir);
<span onclick='openModal()' class='match'>195    EXPECT_TRUE(Length == 9);
196    TIntH NIdToDistH;
197    int MaxDist = 9;
198    Length = GetShortPath(G, SrcNId, NIdToDistH, IsDir, MaxDist);
199    EXPECT_TRUE(NIdToDistH[0] == 0);
200    EXPECT_TRUE(NIdToDistH[1] == 1);
201    EXPECT_TRUE(NIdToDistH[2] == 1);
202    EXPECT_TRUE(NIdToDistH[3] == 2);
203    EXPECT_TRUE(NIdToDistH[4] == 2);
204    TInt::Rnd.PutSeed(0);
205    int FullDiam;
206    double EffDiam, AvgSPL;
207    int NTestNodes = G->GetNodes() / 2;
</span>208    FullDiam = GetBfsFullDiam(G, NTestNodes, IsDir);
209    EXPECT_TRUE(FullDiam >= 7 && FullDiam <= 9);
210    EffDiam = GetBfsEffDiam(G, NTestNodes, IsDir);
211    EXPECT_TRUE(EffDiam > 4.0 && EffDiam < 6.0);
212    EffDiam = GetBfsEffDiam(G, NTestNodes, IsDir, EffDiam, FullDiam);
213    EXPECT_TRUE(EffDiam > 4.0 && EffDiam < 6.0);
214    EXPECT_TRUE(FullDiam >= 7 && FullDiam <= 9);
215    EffDiam = GetBfsEffDiam(G, NTestNodes, IsDir, EffDiam, FullDiam, AvgSPL);
216    EXPECT_TRUE(EffDiam > 4.0 && EffDiam < 6.0);
217    EXPECT_TRUE(FullDiam >= 7 && FullDiam <= 9);
218    EXPECT_TRUE(AvgSPL > 2.75 && AvgSPL < 4.0);
219    TIntV SubGraphNIdV;
220    SubGraphNIdV.Add(8);
221    SubGraphNIdV.Add(29);
222    SubGraphNIdV.Add(16);
223    SubGraphNIdV.Add(0);
224    SubGraphNIdV.Add(19);
225    SubGraphNIdV.Add(17);
226    SubGraphNIdV.Add(26);
227    SubGraphNIdV.Add(14);
228    SubGraphNIdV.Add(10);
229    SubGraphNIdV.Add(24);
230    SubGraphNIdV.Add(27);
231    SubGraphNIdV.Add(2);
232    SubGraphNIdV.Add(18);
233    EffDiam = GetBfsEffDiam(G, NTestNodes, SubGraphNIdV, IsDir, EffDiam, FullDiam);
234    EXPECT_TRUE(EffDiam > 4.0 && EffDiam < 6.0);
235    EXPECT_TRUE(FullDiam == 9);
236  }
237  TEST(BfsDfsTest, CompleteGraph) {
238    mkdir(DIRNAME, S_IRWXU | S_IRWXG | S_IRWXO);
239    TestFullBfsDfs<PUNGraph>();
240    TestFullBfsDfs<PNGraph>();
241    TestFullBfsDfs<PNEGraph>();
242  }
</code></pre>
        </div>
        <div class="column">
            <h3>snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-test-bfsdfs.cpp</h3>
            <pre><code>1  #include <gtest/gtest.h>
2  #include <iostream>
3  #include "Snap.h"
4  #define EPSILON 0.001
5  #define DIRNAME "bfsdfs"
6  class BfsDfsTest { };  
7  using namespace TSnap;
8  template <class PGraph>
9  void TestFullBfsDfs() {
10    const int NNodes = 500;
11    PGraph G = GenFull<PGraph>(NNodes);
12    PNGraph GOut;
13    int TreeSz, TreeDepth;
14    GOut = GetBfsTree(G, 1, false, false);
15    GetSubTreeSz(G, 1, false, false, TreeSz, TreeDepth);
16    EXPECT_TRUE(GOut->GetNodes() == 1);
17    EXPECT_TRUE(GOut->GetEdges() == 0);
18    EXPECT_TRUE(TreeSz == 1);
19    EXPECT_TRUE(TreeDepth == 0);
20    GOut = GetBfsTree(G, NNodes-1, true, true);
21    GetSubTreeSz(G, 1, true, true, TreeSz, TreeDepth);
22    EXPECT_TRUE(GOut->GetNodes() == NNodes);
23    EXPECT_TRUE(GOut->GetEdges() == NNodes-1);
24    EXPECT_TRUE(TreeSz == NNodes);
25    EXPECT_TRUE(TreeDepth == 1);
26    GOut = GetBfsTree(G, NNodes/2, true, false);
27    GetSubTreeSz(G, 1, true, false, TreeSz, TreeDepth);
28    EXPECT_TRUE(GOut->GetNodes() == NNodes);
29    EXPECT_TRUE(GOut->GetEdges() == NNodes-1);
30    EXPECT_TRUE(TreeSz == NNodes);
31    EXPECT_TRUE(TreeDepth == 1);
32    GOut = GetBfsTree(G, 1, false, true);
33    GetSubTreeSz(G, 1, false, true, TreeSz, TreeDepth);
34    EXPECT_TRUE(GOut->GetNodes() == NNodes);
35    EXPECT_TRUE(GOut->GetEdges() == NNodes-1);
36    EXPECT_TRUE(TreeSz == NNodes);
37    EXPECT_TRUE(TreeDepth == 1);
38    TIntV NIdV;
39    int StartNId, Hop, Nodes;
40    StartNId = 1;
41    Hop = 1;
42    Nodes = GetNodesAtHop(G, StartNId, Hop, NIdV, HasGraphFlag(typename PGraph::TObj, gfDirected));
43    TIntPrV HopCntV;
44    Nodes = GetNodesAtHops(G, StartNId, HopCntV, HasGraphFlag(typename PGraph::TObj, gfDirected));
45    int Length, SrcNId, DstNId;
46    SrcNId = 1;
47    DstNId = NNodes-1;
48    Length = GetShortPath(G, SrcNId, DstNId, HasGraphFlag(typename PGraph::TObj, gfDirected));
49    TIntH NIdToDistH;
50    int MaxDist = 9;
51    Length = GetShortPath(G, SrcNId, NIdToDistH, HasGraphFlag(typename PGraph::TObj, gfDirected), MaxDist);
52    EXPECT_TRUE(NIdToDistH[0] == 0);
53    EXPECT_TRUE(NIdToDistH[1] == 1);
54    EXPECT_TRUE(NIdToDistH[2] == 1);
55    EXPECT_TRUE(NIdToDistH[3] == 1);
56    EXPECT_TRUE(NIdToDistH[4] == 1);
57    int FullDiam;
58    double EffDiam, AvgDiam;
59    int NTestNodes = 10;
60    for (int IsDir = 0; IsDir < 2; IsDir++) {
61      FullDiam = GetBfsFullDiam(G, NTestNodes, IsDir);
62      EXPECT_TRUE(FullDiam == 1);
63      EffDiam = GetBfsEffDiam (G, NTestNodes, IsDir);
64      EXPECT_TRUE(EffDiam > 0.8 - EPSILON && EffDiam < 0.95 + EPSILON);
65      EffDiam = GetBfsEffDiam (G, NTestNodes, IsDir, EffDiam, FullDiam);
66      EXPECT_TRUE(EffDiam > 0.8 - EPSILON && EffDiam < 0.95 + EPSILON);
67      EXPECT_TRUE(FullDiam == 1);
68      EffDiam = GetBfsEffDiam (G, NTestNodes, IsDir, EffDiam, FullDiam, AvgDiam);
69      EXPECT_TRUE(EffDiam > 0.8 - EPSILON && EffDiam < 0.95 + EPSILON);
70      EXPECT_TRUE(FullDiam == 1);
71      EXPECT_TRUE(AvgDiam > 0.9980 - EPSILON && AvgDiam < 0.9980 + EPSILON);
72      EffDiam = GetBfsEffDiamAll (G, NTestNodes, IsDir, EffDiam, FullDiam, AvgDiam);
73      EXPECT_TRUE(EffDiam > 0.8 - EPSILON && EffDiam < 0.95 + EPSILON);
74      EXPECT_TRUE(FullDiam == 1);
75      EXPECT_TRUE(AvgDiam > 0.9980 - EPSILON && AvgDiam < 0.9980 + EPSILON);
76      TIntV SubGraphNIdV;
77      for (int i = 0; i < NTestNodes; i++) {
78        SubGraphNIdV.Add(G->GetRndNId());
79      }
80      EffDiam = GetBfsEffDiam(G, NTestNodes, SubGraphNIdV, IsDir, EffDiam, FullDiam);
81      EXPECT_TRUE(EffDiam > 0.8 - EPSILON && EffDiam < 0.95 + EPSILON);
82      EXPECT_TRUE(FullDiam == 1);
83    }
84  }
85  TEST(BfsDfsTest, UndirectedRandom) {
86    PUNGraph G;
87    TStr FName = TStr::Fmt("%s/sample_bfsdfs_unpower.txt", DIRNAME);
88    G = LoadEdgeList<PUNGraph>(FName);
89    TIntStrH NodeLabelH;
90    for (int i = 0; i < G->GetNodes(); i++) {
91      NodeLabelH.AddDat(i, TStr::Fmt("%d", i));
92    }
93    DrawGViz(G, gvlNeato, TStr::Fmt("%s/sample_bfsdfs_unpower.png", DIRNAME), "Sample bfsdfs Graph", NodeLabelH);
94    TIntV NIdV;
95    int StartNId, Hop, Nodes; 
96    int IsDir = 0;
97    StartNId = 1;
98    Hop = 1;
99    Nodes = GetNodesAtHop(G, StartNId, Hop, NIdV, IsDir);
100      EXPECT_TRUE(Nodes == 1);
101    EXPECT_TRUE(NIdV.Len() == 1);
102    EXPECT_TRUE(NIdV[0] = 46);
103    TIntPrV HopCntV;
104    Nodes = GetNodesAtHops(G, StartNId, HopCntV, IsDir);
105      EXPECT_TRUE(Nodes == 8);
106    EXPECT_TRUE(HopCntV.Len() == 8);
107    int Length, SrcNId, DstNId;
108    SrcNId = 1;
109    DstNId = G->GetNodes() - 1;
110    Length = GetShortPath(G, SrcNId, DstNId, IsDir);
111    EXPECT_TRUE(Length == -1);
112    SrcNId = 1;
113    DstNId = 33;
114    Length = GetShortPath(G, SrcNId, DstNId, IsDir);
115    EXPECT_TRUE(Length == 7);
116    TIntH NIdToDistH;
117    int MaxDist = 9;
118    Length = GetShortPath(G, SrcNId, NIdToDistH, IsDir, MaxDist);
119    EXPECT_TRUE(NIdToDistH[0] == 0);
120    EXPECT_TRUE(NIdToDistH[1] == 1);
121    EXPECT_TRUE(NIdToDistH[2] == 2);
122    EXPECT_TRUE(NIdToDistH[3] == 3);
123    EXPECT_TRUE(NIdToDistH[4] == 3);
124    TInt::Rnd.PutSeed(0);
125    int FullDiam;
126    double EffDiam, AvgSPL;
127    int NTestNodes = G->GetNodes() / 3 * 2;
128    FullDiam = GetBfsFullDiam(G, NTestNodes, IsDir);
129    EXPECT_TRUE(FullDiam <= 8 && FullDiam >= 5);
130    EffDiam = GetBfsEffDiam(G, NTestNodes, IsDir);
131    EXPECT_TRUE(EffDiam > 3.5 && EffDiam < 4.5);
132    EffDiam = GetBfsEffDiam(G, NTestNodes, IsDir, EffDiam, FullDiam);
133    EXPECT_TRUE(EffDiam > 3.5 && EffDiam < 4.5);
134    EXPECT_TRUE(FullDiam > 5 && FullDiam < 8);
135    EffDiam = GetBfsEffDiam(G, NTestNodes, IsDir, EffDiam, FullDiam, AvgSPL);
136    EXPECT_TRUE(EffDiam > 3.5 && EffDiam < 4.5);
137    EXPECT_TRUE(FullDiam > 5 && FullDiam < 8);
138    EXPECT_TRUE(AvgSPL > 1.5 && AvgSPL < 5.0);
139    TIntV SubGraphNIdV;
140    SubGraphNIdV.Add(0);
141    SubGraphNIdV.Add(4);
142    SubGraphNIdV.Add(31);
143    SubGraphNIdV.Add(45);
144    SubGraphNIdV.Add(18);
145    SubGraphNIdV.Add(11);
146    SubGraphNIdV.Add(11);
147    SubGraphNIdV.Add(48);
148    SubGraphNIdV.Add(34);
149    SubGraphNIdV.Add(30);
150    EffDiam = GetBfsEffDiam(G, NTestNodes, SubGraphNIdV, IsDir, EffDiam, FullDiam);
151    EXPECT_TRUE(EffDiam > 2.7385 - EPSILON && EffDiam < 2.7385 + EPSILON);
152    EXPECT_TRUE(FullDiam == 3);
153  }
154  TEST(BfsDfsTest, DirectedRandom) {
155    PNGraph G = TNGraph::New();
156    TStr FName = TStr::Fmt("%s/sample_bfsdfs_ngraph.txt", DIRNAME);
157    G = LoadEdgeList<PNGraph>(FName);
158    TIntStrH NodeLabelH;
159    for (int i = 0; i < G->GetNodes(); i++) {
160      NodeLabelH.AddDat(i, TStr::Fmt("%d", i));
161    }
162    DrawGViz(G, gvlDot, TStr::Fmt("%s/sample_bfsdfs_ngraph.png", DIRNAME), "Sample BFS Graph", NodeLabelH);
163    TIntV NIdV;
164    int StartNId, Hop, Nodes;
165    int IsDir = 1;
166    StartNId = 11;
167    Hop = 1;
168    Nodes = GetNodesAtHop(G, StartNId, Hop, NIdV, IsDir);
169    EXPECT_TRUE(Nodes == 2);
170    EXPECT_TRUE(NIdV.Len() == 2);
171    EXPECT_TRUE(NIdV[0] = 20);
172    EXPECT_TRUE(NIdV[1] = 25);
173    TIntPrV HopCntV;
174    Nodes = GetNodesAtHops(G, StartNId, HopCntV, IsDir);
175    EXPECT_TRUE(Nodes == 10);
176    EXPECT_TRUE(HopCntV.Len() == 10);
177    EXPECT_TRUE(HopCntV[0] == TIntPr(0, 1));
178    EXPECT_TRUE(HopCntV[1] == TIntPr(1, 2));
179    EXPECT_TRUE(HopCntV[2] == TIntPr(2, 3));
180    EXPECT_TRUE(HopCntV[3] == TIntPr(3, 4));
181    EXPECT_TRUE(HopCntV[4] == TIntPr(4, 5));
182    EXPECT_TRUE(HopCntV[5] == TIntPr(5, 4));
183    EXPECT_TRUE(HopCntV[6] == TIntPr(6, 1));
184    EXPECT_TRUE(HopCntV[7] == TIntPr(7, 1));
185    EXPECT_TRUE(HopCntV[8] == TIntPr(8, 3));
186    EXPECT_TRUE(HopCntV[9] == TIntPr(9, 1));
187    int Length, SrcNId, DstNId;
188    SrcNId = 11;
189    DstNId = G->GetNodes() - 1;
190    Length = GetShortPath(G, SrcNId, DstNId, IsDir);
191    EXPECT_TRUE(Length == 2);
192    SrcNId = 11;
193    DstNId = 27;
194    Length = GetShortPath(G, SrcNId, DstNId, IsDir);
<span onclick='openModal()' class='match'>195    EXPECT_TRUE(Length == 9);
196    TIntH NIdToDistH;
197    int MaxDist = 9;
198    Length = GetShortPath(G, SrcNId, NIdToDistH, IsDir, MaxDist);
199    EXPECT_TRUE(NIdToDistH[0] == 0);
200    EXPECT_TRUE(NIdToDistH[1] == 1);
201    EXPECT_TRUE(NIdToDistH[2] == 1);
202    EXPECT_TRUE(NIdToDistH[3] == 2);
203    EXPECT_TRUE(NIdToDistH[4] == 2);
204    TInt::Rnd.PutSeed(0);
205    int FullDiam;
206    double EffDiam, AvgSPL;
207    int NTestNodes = G->GetNodes() / 2;
</span>208    FullDiam = GetBfsFullDiam(G, NTestNodes, IsDir);
209    EXPECT_TRUE(FullDiam >= 7 && FullDiam <= 9);
210    EffDiam = GetBfsEffDiam(G, NTestNodes, IsDir);
211    EXPECT_TRUE(EffDiam > 4.0 && EffDiam < 6.0);
212    EffDiam = GetBfsEffDiam(G, NTestNodes, IsDir, EffDiam, FullDiam);
213    EXPECT_TRUE(EffDiam > 4.0 && EffDiam < 6.0);
214    EXPECT_TRUE(FullDiam >= 7 && FullDiam <= 9);
215    EffDiam = GetBfsEffDiam(G, NTestNodes, IsDir, EffDiam, FullDiam, AvgSPL);
216    EXPECT_TRUE(EffDiam > 4.0 && EffDiam < 6.0);
217    EXPECT_TRUE(FullDiam >= 7 && FullDiam <= 9);
218    EXPECT_TRUE(AvgSPL > 2.75 && AvgSPL < 4.0);
219    TIntV SubGraphNIdV;
220    SubGraphNIdV.Add(8);
221    SubGraphNIdV.Add(29);
222    SubGraphNIdV.Add(16);
223    SubGraphNIdV.Add(0);
224    SubGraphNIdV.Add(19);
225    SubGraphNIdV.Add(17);
226    SubGraphNIdV.Add(26);
227    SubGraphNIdV.Add(14);
228    SubGraphNIdV.Add(10);
229    SubGraphNIdV.Add(24);
230    SubGraphNIdV.Add(27);
231    SubGraphNIdV.Add(2);
232    SubGraphNIdV.Add(18);
233    EffDiam = GetBfsEffDiam(G, NTestNodes, SubGraphNIdV, IsDir, EffDiam, FullDiam);
234    EXPECT_TRUE(EffDiam > 4.0 && EffDiam < 6.0);
235    EXPECT_TRUE(FullDiam == 9);
236  }
237  TEST(BfsDfsTest, CompleteGraph) {
238    mkdir(DIRNAME, S_IRWXU | S_IRWXG | S_IRWXO);
239    TestFullBfsDfs<PUNGraph>();
240    TestFullBfsDfs<PNGraph>();
241    TestFullBfsDfs<PNEGraph>();
242  }
</code></pre>
        </div>
    
        <!-- The Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="row close">&times;</span>
                <div class='row'>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-test-bfsdfs.cpp</div>
                    <div class="column" style="font-weight: bold;text-decoration: underline">Fragment from snap-MDEwOlJlcG9zaXRvcnk0Mjg4MzU3-flat-test-bfsdfs.cpp</div>
                </div>
                <div class="column column_space"><pre><code>195    EXPECT_TRUE(Length == 9);
196    TIntH NIdToDistH;
197    int MaxDist = 9;
198    Length = GetShortPath(G, SrcNId, NIdToDistH, IsDir, MaxDist);
199    EXPECT_TRUE(NIdToDistH[0] == 0);
200    EXPECT_TRUE(NIdToDistH[1] == 1);
201    EXPECT_TRUE(NIdToDistH[2] == 1);
202    EXPECT_TRUE(NIdToDistH[3] == 2);
203    EXPECT_TRUE(NIdToDistH[4] == 2);
204    TInt::Rnd.PutSeed(0);
205    int FullDiam;
206    double EffDiam, AvgSPL;
207    int NTestNodes = G->GetNodes() / 2;
</pre></code></div>
                <div class="column column_space"><pre><code>195    EXPECT_TRUE(Length == 9);
196    TIntH NIdToDistH;
197    int MaxDist = 9;
198    Length = GetShortPath(G, SrcNId, NIdToDistH, IsDir, MaxDist);
199    EXPECT_TRUE(NIdToDistH[0] == 0);
200    EXPECT_TRUE(NIdToDistH[1] == 1);
201    EXPECT_TRUE(NIdToDistH[2] == 1);
202    EXPECT_TRUE(NIdToDistH[3] == 2);
203    EXPECT_TRUE(NIdToDistH[4] == 2);
204    TInt::Rnd.PutSeed(0);
205    int FullDiam;
206    double EffDiam, AvgSPL;
207    int NTestNodes = G->GetNodes() / 2;
</pre></code></div>
            </div>
        </div>
        <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        
        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");
        
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        
        // When the user clicks the button, open the modal
        function openModal(){
          modal.style.display = "block";
        }
        
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
        modal.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
        if (event.target == modal) {
        modal.style.display = "none";
        } }
        
        </script>
    </body>
    </html>
    